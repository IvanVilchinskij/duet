(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["GCodeViewer"],{"./node_modules/@babylonjs/core/Actions/abstractActionManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AbstractActionManager",(function(){return n}));var n=function(){function AbstractActionManager(){this.hoverCursor="",this.actions=new Array,this.isRecursive=!1}return Object.defineProperty(AbstractActionManager,"HasTriggers",{get:function(){for(var e in AbstractActionManager.Triggers)if(AbstractActionManager.Triggers.hasOwnProperty(e))return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractActionManager,"HasPickTriggers",{get:function(){for(var e in AbstractActionManager.Triggers)if(AbstractActionManager.Triggers.hasOwnProperty(e)){var t=parseInt(e);if(t>=1&&t<=7)return!0}return!1},enumerable:!1,configurable:!0}),AbstractActionManager.HasSpecificTrigger=function(e){for(var t in AbstractActionManager.Triggers)if(AbstractActionManager.Triggers.hasOwnProperty(t)){var r=parseInt(t);if(r===e)return!0}return!1},AbstractActionManager.Triggers={},AbstractActionManager}()},"./node_modules/@babylonjs/core/Actions/actionEvent.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ActionEvent",(function(){return n}));var n=function(){function ActionEvent(e,t,r,n,i,o){this.source=e,this.pointerX=t,this.pointerY=r,this.meshUnderPointer=n,this.sourceEvent=i,this.additionalData=o}return ActionEvent.CreateNew=function(e,t,r){var n=e.getScene();return new ActionEvent(e,n.pointerX,n.pointerY,n.meshUnderPointer||e,t,r)},ActionEvent.CreateNewFromSprite=function(e,t,r,n){return new ActionEvent(e,t.pointerX,t.pointerY,t.meshUnderPointer,r,n)},ActionEvent.CreateNewFromScene=function(e,t){return new ActionEvent(null,e.pointerX,e.pointerY,e.meshUnderPointer,t)},ActionEvent.CreateNewFromPrimitive=function(e,t,r,n){return new ActionEvent(e,t.x,t.y,null,r,n)},ActionEvent}()},"./node_modules/@babylonjs/core/Animations/animation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"_IAnimationState",(function(){return f})),r.d(t,"Animation",(function(){return p}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Maths/math.scalar.js"),s=r("./node_modules/@babylonjs/core/Misc/decorators.js"),a=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),u=r("./node_modules/@babylonjs/core/Animations/animationKey.js"),c=r("./node_modules/@babylonjs/core/Animations/animationRange.js"),l=r("./node_modules/@babylonjs/core/node.js"),d=r("./node_modules/@babylonjs/core/Maths/math.size.js"),h=r("./node_modules/@babylonjs/core/Misc/webRequest.js"),f=function(){function _IAnimationState(){}return _IAnimationState}(),p=function(){function Animation(e,t,r,n,i,o){this.name=e,this.targetProperty=t,this.framePerSecond=r,this.dataType=n,this.loopMode=i,this.enableBlending=o,this._runtimeAnimations=new Array,this._events=new Array,this.blendingSpeed=.01,this._ranges={},this.targetPropertyPath=t.split("."),this.dataType=n,this.loopMode=void 0===i?Animation.ANIMATIONLOOPMODE_CYCLE:i}return Animation._PrepareAnimation=function(e,t,r,o,s,a,u,c){var l=void 0;if(!isNaN(parseFloat(s))&&isFinite(s)?l=Animation.ANIMATIONTYPE_FLOAT:s instanceof n["Quaternion"]?l=Animation.ANIMATIONTYPE_QUATERNION:s instanceof n["Vector3"]?l=Animation.ANIMATIONTYPE_VECTOR3:s instanceof n["Vector2"]?l=Animation.ANIMATIONTYPE_VECTOR2:s instanceof i["Color3"]?l=Animation.ANIMATIONTYPE_COLOR3:s instanceof i["Color4"]?l=Animation.ANIMATIONTYPE_COLOR4:s instanceof d["Size"]&&(l=Animation.ANIMATIONTYPE_SIZE),void 0==l)return null;var h=new Animation(e,t,r,l,u),f=[{frame:0,value:s},{frame:o,value:a}];return h.setKeys(f),void 0!==c&&h.setEasingFunction(c),h},Animation.CreateAnimation=function(e,t,r,n){var i=new Animation(e+"Animation",e,r,t,Animation.ANIMATIONLOOPMODE_CONSTANT);return i.setEasingFunction(n),i},Animation.CreateAndStartAnimation=function(e,t,r,n,i,o,s,a,u,c){var l=Animation._PrepareAnimation(e,r,n,i,o,s,a,u);return l?t.getScene().beginDirectAnimation(t,[l],0,i,1===l.loopMode,1,c):null},Animation.CreateAndStartHierarchyAnimation=function(e,t,r,n,i,o,s,a,u,c,l){var d=Animation._PrepareAnimation(e,n,i,o,s,a,u,c);if(!d)return null;var h=t.getScene();return h.beginDirectHierarchyAnimation(t,r,[d],0,o,1===d.loopMode,1,l)},Animation.CreateMergeAndStartAnimation=function(e,t,r,n,i,o,s,a,u,c){var l=Animation._PrepareAnimation(e,r,n,i,o,s,a,u);return l?(t.animations.push(l),t.getScene().beginAnimation(t,0,i,1===l.loopMode,1,c)):null},Animation.MakeAnimationAdditive=function(e,t,r,i,o){void 0===t&&(t=0),void 0===i&&(i=!1);var s=e;if(i&&(s=e.clone(),s.name=o||s.name),!s._keys.length)return s;t=t>=0?t:0;var a=0,u=s._keys[0],c=s._keys.length-1,l=s._keys[c],d={referenceValue:u.value,referencePosition:n["TmpVectors"].Vector3[0],referenceQuaternion:n["TmpVectors"].Quaternion[0],referenceScaling:n["TmpVectors"].Vector3[1],keyPosition:n["TmpVectors"].Vector3[2],keyQuaternion:n["TmpVectors"].Quaternion[1],keyScaling:n["TmpVectors"].Vector3[3]},h=!1,f=u.frame,p=l.frame;if(r){var m=s.getRange(r);m&&(f=m.from,p=m.to)}var _=u.frame===f,g=l.frame===p;if(1===s._keys.length){var b=s._getKeyValue(s._keys[0]);d.referenceValue=b.clone?b.clone():b,h=!0}else if(t<=u.frame){b=s._getKeyValue(u.value);d.referenceValue=b.clone?b.clone():b,h=!0}else if(t>=l.frame){b=s._getKeyValue(l.value);d.referenceValue=b.clone?b.clone():b,h=!0}var v=0;while(!h||!_||!g&&v<s._keys.length-1){var M=s._keys[v],T=s._keys[v+1];if(!h&&t>=M.frame&&t<=T.frame){b=void 0;if(t===M.frame)b=s._getKeyValue(M.value);else if(t===T.frame)b=s._getKeyValue(T.value);else{var S={key:v,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT};b=s._interpolate(t,S)}d.referenceValue=b.clone?b.clone():b,h=!0}if(!_&&f>=M.frame&&f<=T.frame){if(f===M.frame)a=v;else if(f===T.frame)a=v+1;else{S={key:v,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},b=s._interpolate(f,S);var C={frame:f,value:b.clone?b.clone():b};s._keys.splice(v+1,0,C),a=v+1}_=!0}if(!g&&p>=M.frame&&p<=T.frame){if(p===M.frame)c=v;else if(p===T.frame)c=v+1;else{S={key:v,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},b=s._interpolate(p,S),C={frame:p,value:b.clone?b.clone():b};s._keys.splice(v+1,0,C),c=v+1}g=!0}v++}s.dataType===Animation.ANIMATIONTYPE_QUATERNION?d.referenceValue.normalize().conjugateInPlace():s.dataType===Animation.ANIMATIONTYPE_MATRIX&&(d.referenceValue.decompose(d.referenceScaling,d.referenceQuaternion,d.referencePosition),d.referenceQuaternion.normalize().conjugateInPlace());for(v=a;v<=c;v++){C=s._keys[v];if(!v||s.dataType===Animation.ANIMATIONTYPE_FLOAT||C.value!==u.value)switch(s.dataType){case Animation.ANIMATIONTYPE_MATRIX:C.value.decompose(d.keyScaling,d.keyQuaternion,d.keyPosition),d.keyPosition.subtractInPlace(d.referencePosition),d.keyScaling.divideInPlace(d.referenceScaling),d.referenceQuaternion.multiplyToRef(d.keyQuaternion,d.keyQuaternion),n["Matrix"].ComposeToRef(d.keyScaling,d.keyQuaternion,d.keyPosition,C.value);break;case Animation.ANIMATIONTYPE_QUATERNION:d.referenceValue.multiplyToRef(C.value,C.value);break;case Animation.ANIMATIONTYPE_VECTOR2:case Animation.ANIMATIONTYPE_VECTOR3:case Animation.ANIMATIONTYPE_COLOR3:case Animation.ANIMATIONTYPE_COLOR4:C.value.subtractToRef(d.referenceValue,C.value);break;case Animation.ANIMATIONTYPE_SIZE:C.value.width-=d.referenceValue.width,C.value.height-=d.referenceValue.height;break;default:C.value-=d.referenceValue}}return s},Animation.TransitionTo=function(e,t,r,n,i,o,s,a){if(void 0===a&&(a=null),s<=0)return r[e]=t,a&&a(),null;var u=i*(s/1e3);o.setKeys([{frame:0,value:r[e].clone?r[e].clone():r[e]},{frame:u,value:t}]),r.animations||(r.animations=[]),r.animations.push(o);var c=n.beginAnimation(r,0,u,!1);return c.onAnimationEnd=a,c},Object.defineProperty(Animation.prototype,"runtimeAnimations",{get:function(){return this._runtimeAnimations},enumerable:!1,configurable:!0}),Object.defineProperty(Animation.prototype,"hasRunningRuntimeAnimations",{get:function(){for(var e=0,t=this._runtimeAnimations;e<t.length;e++){var r=t[e];if(!r.isStopped)return!0}return!1},enumerable:!1,configurable:!0}),Animation.prototype.toString=function(e){var t="Name: "+this.name+", property: "+this.targetProperty;if(t+=", datatype: "+["Float","Vector3","Quaternion","Matrix","Color3","Vector2"][this.dataType],t+=", nKeys: "+(this._keys?this._keys.length:"none"),t+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),e){t+=", Ranges: {";var r=!0;for(var n in this._ranges)r&&(t+=", ",r=!1),t+=n;t+="}"}return t},Animation.prototype.addEvent=function(e){this._events.push(e),this._events.sort((function(e,t){return e.frame-t.frame}))},Animation.prototype.removeEvents=function(e){for(var t=0;t<this._events.length;t++)this._events[t].frame===e&&(this._events.splice(t,1),t--)},Animation.prototype.getEvents=function(){return this._events},Animation.prototype.createRange=function(e,t,r){this._ranges[e]||(this._ranges[e]=new c["AnimationRange"](e,t,r))},Animation.prototype.deleteRange=function(e,t){void 0===t&&(t=!0);var r=this._ranges[e];if(r){if(t)for(var n=r.from,i=r.to,o=this._keys.length-1;o>=0;o--)this._keys[o].frame>=n&&this._keys[o].frame<=i&&this._keys.splice(o,1);this._ranges[e]=null}},Animation.prototype.getRange=function(e){return this._ranges[e]},Animation.prototype.getKeys=function(){return this._keys},Animation.prototype.getHighestFrame=function(){for(var e=0,t=0,r=this._keys.length;t<r;t++)e<this._keys[t].frame&&(e=this._keys[t].frame);return e},Animation.prototype.getEasingFunction=function(){return this._easingFunction},Animation.prototype.setEasingFunction=function(e){this._easingFunction=e},Animation.prototype.floatInterpolateFunction=function(e,t,r){return o["Scalar"].Lerp(e,t,r)},Animation.prototype.floatInterpolateFunctionWithTangents=function(e,t,r,n,i){return o["Scalar"].Hermite(e,t,r,n,i)},Animation.prototype.quaternionInterpolateFunction=function(e,t,r){return n["Quaternion"].Slerp(e,t,r)},Animation.prototype.quaternionInterpolateFunctionWithTangents=function(e,t,r,i,o){return n["Quaternion"].Hermite(e,t,r,i,o).normalize()},Animation.prototype.vector3InterpolateFunction=function(e,t,r){return n["Vector3"].Lerp(e,t,r)},Animation.prototype.vector3InterpolateFunctionWithTangents=function(e,t,r,i,o){return n["Vector3"].Hermite(e,t,r,i,o)},Animation.prototype.vector2InterpolateFunction=function(e,t,r){return n["Vector2"].Lerp(e,t,r)},Animation.prototype.vector2InterpolateFunctionWithTangents=function(e,t,r,i,o){return n["Vector2"].Hermite(e,t,r,i,o)},Animation.prototype.sizeInterpolateFunction=function(e,t,r){return d["Size"].Lerp(e,t,r)},Animation.prototype.color3InterpolateFunction=function(e,t,r){return i["Color3"].Lerp(e,t,r)},Animation.prototype.color4InterpolateFunction=function(e,t,r){return i["Color4"].Lerp(e,t,r)},Animation.prototype._getKeyValue=function(e){return"function"===typeof e?e():e},Animation.prototype._interpolate=function(e,t){if(t.loopMode===Animation.ANIMATIONLOOPMODE_CONSTANT&&t.repeatCount>0)return t.highLimitValue.clone?t.highLimitValue.clone():t.highLimitValue;var r=this._keys;if(1===r.length)return this._getKeyValue(r[0].value);var n=t.key;if(r[n].frame>=e)while(n-1>=0&&r[n].frame>=e)n--;for(var i=n;i<r.length;i++){var o=r[i+1];if(o.frame>=e){t.key=i;var s=r[i],a=this._getKeyValue(s.value);if(s.interpolation===u["AnimationKeyInterpolation"].STEP)return a;var c=this._getKeyValue(o.value),l=void 0!==s.outTangent&&void 0!==o.inTangent,d=o.frame-s.frame,h=(e-s.frame)/d,f=this.getEasingFunction();switch(null!=f&&(h=f.ease(h)),this.dataType){case Animation.ANIMATIONTYPE_FLOAT:var p=l?this.floatInterpolateFunctionWithTangents(a,s.outTangent*d,c,o.inTangent*d,h):this.floatInterpolateFunction(a,c,h);switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return p;case Animation.ANIMATIONLOOPMODE_RELATIVE:return t.offsetValue*t.repeatCount+p}break;case Animation.ANIMATIONTYPE_QUATERNION:var m=l?this.quaternionInterpolateFunctionWithTangents(a,s.outTangent.scale(d),c,o.inTangent.scale(d),h):this.quaternionInterpolateFunction(a,c,h);switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return m;case Animation.ANIMATIONLOOPMODE_RELATIVE:return m.addInPlace(t.offsetValue.scale(t.repeatCount))}return m;case Animation.ANIMATIONTYPE_VECTOR3:var _=l?this.vector3InterpolateFunctionWithTangents(a,s.outTangent.scale(d),c,o.inTangent.scale(d),h):this.vector3InterpolateFunction(a,c,h);switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return _;case Animation.ANIMATIONLOOPMODE_RELATIVE:return _.add(t.offsetValue.scale(t.repeatCount))}case Animation.ANIMATIONTYPE_VECTOR2:var g=l?this.vector2InterpolateFunctionWithTangents(a,s.outTangent.scale(d),c,o.inTangent.scale(d),h):this.vector2InterpolateFunction(a,c,h);switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return g;case Animation.ANIMATIONLOOPMODE_RELATIVE:return g.add(t.offsetValue.scale(t.repeatCount))}case Animation.ANIMATIONTYPE_SIZE:switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return this.sizeInterpolateFunction(a,c,h);case Animation.ANIMATIONLOOPMODE_RELATIVE:return this.sizeInterpolateFunction(a,c,h).add(t.offsetValue.scale(t.repeatCount))}case Animation.ANIMATIONTYPE_COLOR3:switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return this.color3InterpolateFunction(a,c,h);case Animation.ANIMATIONLOOPMODE_RELATIVE:return this.color3InterpolateFunction(a,c,h).add(t.offsetValue.scale(t.repeatCount))}case Animation.ANIMATIONTYPE_COLOR4:switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:return this.color4InterpolateFunction(a,c,h);case Animation.ANIMATIONLOOPMODE_RELATIVE:return this.color4InterpolateFunction(a,c,h).add(t.offsetValue.scale(t.repeatCount))}case Animation.ANIMATIONTYPE_MATRIX:switch(t.loopMode){case Animation.ANIMATIONLOOPMODE_CYCLE:case Animation.ANIMATIONLOOPMODE_CONSTANT:if(Animation.AllowMatricesInterpolation)return this.matrixInterpolateFunction(a,c,h,t.workValue);case Animation.ANIMATIONLOOPMODE_RELATIVE:return a}default:break}break}}return this._getKeyValue(r[r.length-1].value)},Animation.prototype.matrixInterpolateFunction=function(e,t,r,i){return Animation.AllowMatrixDecomposeForInterpolation?i?(n["Matrix"].DecomposeLerpToRef(e,t,r,i),i):n["Matrix"].DecomposeLerp(e,t,r):i?(n["Matrix"].LerpToRef(e,t,r,i),i):n["Matrix"].Lerp(e,t,r)},Animation.prototype.clone=function(){var e=new Animation(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);if(e.enableBlending=this.enableBlending,e.blendingSpeed=this.blendingSpeed,this._keys&&e.setKeys(this._keys),this._ranges)for(var t in e._ranges={},this._ranges){var r=this._ranges[t];r&&(e._ranges[t]=r.clone())}return e},Animation.prototype.setKeys=function(e){this._keys=e.slice(0)},Animation.prototype.serialize=function(){var e={};e.name=this.name,e.property=this.targetProperty,e.framePerSecond=this.framePerSecond,e.dataType=this.dataType,e.loopBehavior=this.loopMode,e.enableBlending=this.enableBlending,e.blendingSpeed=this.blendingSpeed;var t=this.dataType;e.keys=[];for(var r=this.getKeys(),n=0;n<r.length;n++){var i=r[n],o={};switch(o.frame=i.frame,t){case Animation.ANIMATIONTYPE_FLOAT:o.values=[i.value],void 0!==i.inTangent&&o.values.push(i.inTangent),void 0!==i.outTangent&&(void 0===i.inTangent&&o.values.push(void 0),o.values.push(i.outTangent));break;case Animation.ANIMATIONTYPE_QUATERNION:case Animation.ANIMATIONTYPE_MATRIX:case Animation.ANIMATIONTYPE_VECTOR3:case Animation.ANIMATIONTYPE_COLOR3:case Animation.ANIMATIONTYPE_COLOR4:o.values=i.value.asArray(),void 0!=i.inTangent&&o.values.push(i.inTangent.asArray()),void 0!=i.outTangent&&(void 0===i.inTangent&&o.values.push(void 0),o.values.push(i.outTangent.asArray()));break}e.keys.push(o)}for(var s in e.ranges=[],this._ranges){var a=this._ranges[s];if(a){var u={};u.name=s,u.from=a.from,u.to=a.to,e.ranges.push(u)}}return e},Animation._UniversalLerp=function(e,t,r){var n=e.constructor;return n.Lerp?n.Lerp(e,t,r):n.Slerp?n.Slerp(e,t,r):e.toFixed?e*(1-r)+r*t:t},Animation.Parse=function(e){var t,r,o=new Animation(e.name,e.property,e.framePerSecond,e.dataType,e.loopBehavior),s=e.dataType,a=[];for(e.enableBlending&&(o.enableBlending=e.enableBlending),e.blendingSpeed&&(o.blendingSpeed=e.blendingSpeed),r=0;r<e.keys.length;r++){var u,c,l=e.keys[r];switch(s){case Animation.ANIMATIONTYPE_FLOAT:t=l.values[0],l.values.length>=1&&(u=l.values[1]),l.values.length>=2&&(c=l.values[2]);break;case Animation.ANIMATIONTYPE_QUATERNION:if(t=n["Quaternion"].FromArray(l.values),l.values.length>=8){var d=n["Quaternion"].FromArray(l.values.slice(4,8));d.equals(n["Quaternion"].Zero())||(u=d)}if(l.values.length>=12){var h=n["Quaternion"].FromArray(l.values.slice(8,12));h.equals(n["Quaternion"].Zero())||(c=h)}break;case Animation.ANIMATIONTYPE_MATRIX:t=n["Matrix"].FromArray(l.values);break;case Animation.ANIMATIONTYPE_COLOR3:t=i["Color3"].FromArray(l.values);break;case Animation.ANIMATIONTYPE_COLOR4:t=i["Color4"].FromArray(l.values);break;case Animation.ANIMATIONTYPE_VECTOR3:default:t=n["Vector3"].FromArray(l.values);break}var f={};f.frame=l.frame,f.value=t,void 0!=u&&(f.inTangent=u),void 0!=c&&(f.outTangent=c),a.push(f)}if(o.setKeys(a),e.ranges)for(r=0;r<e.ranges.length;r++)t=e.ranges[r],o.createRange(t.name,t.from,t.to);return o},Animation.AppendSerializedAnimations=function(e,t){s["SerializationHelper"].AppendSerializedAnimations(e,t)},Animation.ParseFromFileAsync=function(e,t){var r=this;return new Promise((function(n,i){var o=new h["WebRequest"];o.addEventListener("readystatechange",(function(){if(4==o.readyState)if(200==o.status){var t=JSON.parse(o.responseText);if(t.length){for(var s=new Array,a=0,u=t;a<u.length;a++){var c=u[a];s.push(r.Parse(c))}n(s)}else{s=r.Parse(t);e&&(s.name=e),n(s)}}else i("Unable to load the animation")})),o.open("GET",t),o.send()}))},Animation.CreateFromSnippetAsync=function(e){var t=this;return new Promise((function(r,n){var i=new h["WebRequest"];i.addEventListener("readystatechange",(function(){if(4==i.readyState)if(200==i.status){var o=JSON.parse(JSON.parse(i.responseText).jsonPayload);if(o.animations){for(var s=JSON.parse(o.animations),a=new Array,u=0,c=s;u<c.length;u++){var l=c[u];a.push(t.Parse(l))}r(a)}else{s=JSON.parse(o.animation),a=t.Parse(s);a.snippetId=e,r(a)}}else n("Unable to load the snippet "+e)})),i.open("GET",t.SnippetUrl+"/"+e.replace(/#/g,"/")),i.send()}))},Animation.AllowMatricesInterpolation=!1,Animation.AllowMatrixDecomposeForInterpolation=!0,Animation.SnippetUrl="https://snippet.babylonjs.com",Animation.ANIMATIONTYPE_FLOAT=0,Animation.ANIMATIONTYPE_VECTOR3=1,Animation.ANIMATIONTYPE_QUATERNION=2,Animation.ANIMATIONTYPE_MATRIX=3,Animation.ANIMATIONTYPE_COLOR3=4,Animation.ANIMATIONTYPE_COLOR4=7,Animation.ANIMATIONTYPE_VECTOR2=5,Animation.ANIMATIONTYPE_SIZE=6,Animation.ANIMATIONLOOPMODE_RELATIVE=0,Animation.ANIMATIONLOOPMODE_CYCLE=1,Animation.ANIMATIONLOOPMODE_CONSTANT=2,Animation}();a["_TypeStore"].RegisteredTypes["BABYLON.Animation"]=p,l["Node"]._AnimationRangeFactory=function(e,t,r){return new c["AnimationRange"](e,t,r)}},"./node_modules/@babylonjs/core/Animations/animationKey.js":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"AnimationKeyInterpolation",(function(){return n})),function(e){e[e["STEP"]=1]="STEP"}(n||(n={}))},"./node_modules/@babylonjs/core/Animations/animationRange.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AnimationRange",(function(){return n}));var n=function(){function AnimationRange(e,t,r){this.name=e,this.from=t,this.to=r}return AnimationRange.prototype.clone=function(){return new AnimationRange(this.name,this.from,this.to)},AnimationRange}()},"./node_modules/@babylonjs/core/Animations/easing.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EasingFunction",(function(){return o})),r.d(t,"CircleEase",(function(){return s})),r.d(t,"BackEase",(function(){return a})),r.d(t,"BounceEase",(function(){return u})),r.d(t,"CubicEase",(function(){return c})),r.d(t,"ElasticEase",(function(){return l})),r.d(t,"ExponentialEase",(function(){return d})),r.d(t,"PowerEase",(function(){return h})),r.d(t,"QuadraticEase",(function(){return f})),r.d(t,"QuarticEase",(function(){return p})),r.d(t,"QuinticEase",(function(){return m})),r.d(t,"SineEase",(function(){return _})),r.d(t,"BezierCurveEase",(function(){return g}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.path.js"),o=function(){function EasingFunction(){this._easingMode=EasingFunction.EASINGMODE_EASEIN}return EasingFunction.prototype.setEasingMode=function(e){var t=Math.min(Math.max(e,0),2);this._easingMode=t},EasingFunction.prototype.getEasingMode=function(){return this._easingMode},EasingFunction.prototype.easeInCore=function(e){throw new Error("You must implement this method")},EasingFunction.prototype.ease=function(e){switch(this._easingMode){case EasingFunction.EASINGMODE_EASEIN:return this.easeInCore(e);case EasingFunction.EASINGMODE_EASEOUT:return 1-this.easeInCore(1-e)}return e>=.5?.5*(1-this.easeInCore(2*(1-e)))+.5:.5*this.easeInCore(2*e)},EasingFunction.EASINGMODE_EASEIN=0,EasingFunction.EASINGMODE_EASEOUT=1,EasingFunction.EASINGMODE_EASEINOUT=2,EasingFunction}(),s=function(e){function CircleEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(CircleEase,e),CircleEase.prototype.easeInCore=function(e){return e=Math.max(0,Math.min(1,e)),1-Math.sqrt(1-e*e)},CircleEase}(o),a=function(e){function BackEase(t){void 0===t&&(t=1);var r=e.call(this)||this;return r.amplitude=t,r}return Object(n["__extends"])(BackEase,e),BackEase.prototype.easeInCore=function(e){var t=Math.max(0,this.amplitude);return Math.pow(e,3)-e*t*Math.sin(3.141592653589793*e)},BackEase}(o),u=function(e){function BounceEase(t,r){void 0===t&&(t=3),void 0===r&&(r=2);var n=e.call(this)||this;return n.bounces=t,n.bounciness=r,n}return Object(n["__extends"])(BounceEase,e),BounceEase.prototype.easeInCore=function(e){var t=Math.max(0,this.bounces),r=this.bounciness;r<=1&&(r=1.001);var n=Math.pow(r,t),i=1-r,o=(1-n)/i+.5*n,s=e*o,a=Math.log(-s*(1-r)+1)/Math.log(r),u=Math.floor(a),c=u+1,l=(1-Math.pow(r,u))/(i*o),d=(1-Math.pow(r,c))/(i*o),h=.5*(l+d),f=e-h,p=h-l;return-Math.pow(1/r,t-u)/(p*p)*(f-p)*(f+p)},BounceEase}(o),c=function(e){function CubicEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(CubicEase,e),CubicEase.prototype.easeInCore=function(e){return e*e*e},CubicEase}(o),l=function(e){function ElasticEase(t,r){void 0===t&&(t=3),void 0===r&&(r=3);var n=e.call(this)||this;return n.oscillations=t,n.springiness=r,n}return Object(n["__extends"])(ElasticEase,e),ElasticEase.prototype.easeInCore=function(e){var t,r=Math.max(0,this.oscillations),n=Math.max(0,this.springiness);return t=0==n?e:(Math.exp(n*e)-1)/(Math.exp(n)-1),t*Math.sin((6.283185307179586*r+1.5707963267948966)*e)},ElasticEase}(o),d=function(e){function ExponentialEase(t){void 0===t&&(t=2);var r=e.call(this)||this;return r.exponent=t,r}return Object(n["__extends"])(ExponentialEase,e),ExponentialEase.prototype.easeInCore=function(e){return this.exponent<=0?e:(Math.exp(this.exponent*e)-1)/(Math.exp(this.exponent)-1)},ExponentialEase}(o),h=function(e){function PowerEase(t){void 0===t&&(t=2);var r=e.call(this)||this;return r.power=t,r}return Object(n["__extends"])(PowerEase,e),PowerEase.prototype.easeInCore=function(e){var t=Math.max(0,this.power);return Math.pow(e,t)},PowerEase}(o),f=function(e){function QuadraticEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(QuadraticEase,e),QuadraticEase.prototype.easeInCore=function(e){return e*e},QuadraticEase}(o),p=function(e){function QuarticEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(QuarticEase,e),QuarticEase.prototype.easeInCore=function(e){return e*e*e*e},QuarticEase}(o),m=function(e){function QuinticEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(QuinticEase,e),QuinticEase.prototype.easeInCore=function(e){return e*e*e*e*e},QuinticEase}(o),_=function(e){function SineEase(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(SineEase,e),SineEase.prototype.easeInCore=function(e){return 1-Math.sin(1.5707963267948966*(1-e))},SineEase}(o),g=function(e){function BezierCurveEase(t,r,n,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=1);var o=e.call(this)||this;return o.x1=t,o.y1=r,o.x2=n,o.y2=i,o}return Object(n["__extends"])(BezierCurveEase,e),BezierCurveEase.prototype.easeInCore=function(e){return i["BezierCurve"].Interpolate(e,this.x1,this.y1,this.x2,this.y2)},BezierCurveEase}(o)},"./node_modules/@babylonjs/core/Behaviors/Cameras/autoRotationBehavior.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AutoRotationBehavior",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),i=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),o=function(){function AutoRotationBehavior(){this._zoomStopsAnimation=!1,this._idleRotationSpeed=.05,this._idleRotationWaitTime=2e3,this._idleRotationSpinupTime=2e3,this._isPointerDown=!1,this._lastFrameTime=null,this._lastInteractionTime=-1/0,this._cameraRotationSpeed=0,this._lastFrameRadius=0}return Object.defineProperty(AutoRotationBehavior.prototype,"name",{get:function(){return"AutoRotation"},enumerable:!1,configurable:!0}),Object.defineProperty(AutoRotationBehavior.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(e){this._zoomStopsAnimation=e},enumerable:!1,configurable:!0}),Object.defineProperty(AutoRotationBehavior.prototype,"idleRotationSpeed",{get:function(){return this._idleRotationSpeed},set:function(e){this._idleRotationSpeed=e},enumerable:!1,configurable:!0}),Object.defineProperty(AutoRotationBehavior.prototype,"idleRotationWaitTime",{get:function(){return this._idleRotationWaitTime},set:function(e){this._idleRotationWaitTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(AutoRotationBehavior.prototype,"idleRotationSpinupTime",{get:function(){return this._idleRotationSpinupTime},set:function(e){this._idleRotationSpinupTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(AutoRotationBehavior.prototype,"rotationInProgress",{get:function(){return Math.abs(this._cameraRotationSpeed)>0},enumerable:!1,configurable:!0}),AutoRotationBehavior.prototype.init=function(){},AutoRotationBehavior.prototype.attach=function(e){var t=this;this._attachedCamera=e;var r=this._attachedCamera.getScene();this._onPrePointerObservableObserver=r.onPrePointerObservable.add((function(e){e.type!==n["PointerEventTypes"].POINTERDOWN?e.type===n["PointerEventTypes"].POINTERUP&&(t._isPointerDown=!1):t._isPointerDown=!0})),this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add((function(){var e=i["PrecisionDate"].Now,r=0;null!=t._lastFrameTime&&(r=e-t._lastFrameTime),t._lastFrameTime=e,t._applyUserInteraction();var n=e-t._lastInteractionTime-t._idleRotationWaitTime,o=Math.max(Math.min(n/t._idleRotationSpinupTime,1),0);t._cameraRotationSpeed=t._idleRotationSpeed*o,t._attachedCamera&&(t._attachedCamera.alpha-=t._cameraRotationSpeed*(r/1e3))}))},AutoRotationBehavior.prototype.detach=function(){if(this._attachedCamera){var e=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&e.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._attachedCamera=null}},AutoRotationBehavior.prototype._userIsZooming=function(){return!!this._attachedCamera&&0!==this._attachedCamera.inertialRadiusOffset},AutoRotationBehavior.prototype._shouldAnimationStopForInteraction=function(){if(!this._attachedCamera)return!1;var e=!1;return this._lastFrameRadius===this._attachedCamera.radius&&0!==this._attachedCamera.inertialRadiusOffset&&(e=!0),this._lastFrameRadius=this._attachedCamera.radius,this._zoomStopsAnimation?e:this._userIsZooming()},AutoRotationBehavior.prototype._applyUserInteraction=function(){this._userIsMoving()&&!this._shouldAnimationStopForInteraction()&&(this._lastInteractionTime=i["PrecisionDate"].Now)},AutoRotationBehavior.prototype._userIsMoving=function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},AutoRotationBehavior}()},"./node_modules/@babylonjs/core/Behaviors/Cameras/bouncingBehavior.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BouncingBehavior",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Animations/easing.js"),i=r("./node_modules/@babylonjs/core/Animations/animation.js"),o=function(){function BouncingBehavior(){this.transitionDuration=450,this.lowerRadiusTransitionRange=2,this.upperRadiusTransitionRange=-2,this._autoTransitionRange=!1,this._radiusIsAnimating=!1,this._radiusBounceTransition=null,this._animatables=new Array}return Object.defineProperty(BouncingBehavior.prototype,"name",{get:function(){return"Bouncing"},enumerable:!1,configurable:!0}),Object.defineProperty(BouncingBehavior.prototype,"autoTransitionRange",{get:function(){return this._autoTransitionRange},set:function(e){var t=this;if(this._autoTransitionRange!==e){this._autoTransitionRange=e;var r=this._attachedCamera;r&&(e?this._onMeshTargetChangedObserver=r.onMeshTargetChangedObservable.add((function(e){if(e){e.computeWorldMatrix(!0);var r=e.getBoundingInfo().diagonalLength;t.lowerRadiusTransitionRange=.05*r,t.upperRadiusTransitionRange=.05*r}})):this._onMeshTargetChangedObserver&&r.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver))}},enumerable:!1,configurable:!0}),BouncingBehavior.prototype.init=function(){},BouncingBehavior.prototype.attach=function(e){var t=this;this._attachedCamera=e,this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add((function(){t._attachedCamera&&(t._isRadiusAtLimit(t._attachedCamera.lowerRadiusLimit)&&t._applyBoundRadiusAnimation(t.lowerRadiusTransitionRange),t._isRadiusAtLimit(t._attachedCamera.upperRadiusLimit)&&t._applyBoundRadiusAnimation(t.upperRadiusTransitionRange))}))},BouncingBehavior.prototype.detach=function(){this._attachedCamera&&(this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null)},BouncingBehavior.prototype._isRadiusAtLimit=function(e){return!!this._attachedCamera&&(this._attachedCamera.radius===e&&!this._radiusIsAnimating)},BouncingBehavior.prototype._applyBoundRadiusAnimation=function(e){var t=this;if(this._attachedCamera){this._radiusBounceTransition||(BouncingBehavior.EasingFunction.setEasingMode(BouncingBehavior.EasingMode),this._radiusBounceTransition=i["Animation"].CreateAnimation("radius",i["Animation"].ANIMATIONTYPE_FLOAT,60,BouncingBehavior.EasingFunction)),this._cachedWheelPrecision=this._attachedCamera.wheelPrecision,this._attachedCamera.wheelPrecision=1/0,this._attachedCamera.inertialRadiusOffset=0,this.stopAllAnimations(),this._radiusIsAnimating=!0;var r=i["Animation"].TransitionTo("radius",this._attachedCamera.radius+e,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusBounceTransition,this.transitionDuration,(function(){return t._clearAnimationLocks()}));r&&this._animatables.push(r)}},BouncingBehavior.prototype._clearAnimationLocks=function(){this._radiusIsAnimating=!1,this._attachedCamera&&(this._attachedCamera.wheelPrecision=this._cachedWheelPrecision)},BouncingBehavior.prototype.stopAllAnimations=function(){this._attachedCamera&&(this._attachedCamera.animations=[]);while(this._animatables.length)this._animatables[0].onAnimationEnd=null,this._animatables[0].stop(),this._animatables.shift()},BouncingBehavior.EasingFunction=new n["BackEase"](.3),BouncingBehavior.EasingMode=n["EasingFunction"].EASINGMODE_EASEOUT,BouncingBehavior}()},"./node_modules/@babylonjs/core/Behaviors/Cameras/framingBehavior.js":function(e,t,r){"use strict";r.r(t),r.d(t,"FramingBehavior",(function(){return u}));var n=r("./node_modules/@babylonjs/core/Animations/easing.js"),i=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),o=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Animations/animation.js"),u=function(){function FramingBehavior(){this._mode=FramingBehavior.FitFrustumSidesMode,this._radiusScale=1,this._positionScale=.5,this._defaultElevation=.3,this._elevationReturnTime=1500,this._elevationReturnWaitTime=1e3,this._zoomStopsAnimation=!1,this._framingTime=1500,this.autoCorrectCameraLimitsAndSensibility=!0,this._isPointerDown=!1,this._lastInteractionTime=-1/0,this._animatables=new Array,this._betaIsAnimating=!1}return Object.defineProperty(FramingBehavior.prototype,"name",{get:function(){return"Framing"},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"radiusScale",{get:function(){return this._radiusScale},set:function(e){this._radiusScale=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"positionScale",{get:function(){return this._positionScale},set:function(e){this._positionScale=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"defaultElevation",{get:function(){return this._defaultElevation},set:function(e){this._defaultElevation=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"elevationReturnTime",{get:function(){return this._elevationReturnTime},set:function(e){this._elevationReturnTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"elevationReturnWaitTime",{get:function(){return this._elevationReturnWaitTime},set:function(e){this._elevationReturnWaitTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(e){this._zoomStopsAnimation=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramingBehavior.prototype,"framingTime",{get:function(){return this._framingTime},set:function(e){this._framingTime=e},enumerable:!1,configurable:!0}),FramingBehavior.prototype.init=function(){},FramingBehavior.prototype.attach=function(e){var t=this;this._attachedCamera=e;var r=this._attachedCamera.getScene();FramingBehavior.EasingFunction.setEasingMode(FramingBehavior.EasingMode),this._onPrePointerObservableObserver=r.onPrePointerObservable.add((function(e){e.type!==i["PointerEventTypes"].POINTERDOWN?e.type===i["PointerEventTypes"].POINTERUP&&(t._isPointerDown=!1):t._isPointerDown=!0})),this._onMeshTargetChangedObserver=e.onMeshTargetChangedObservable.add((function(e){e&&t.zoomOnMesh(e)})),this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add((function(){t._applyUserInteraction(),t._maintainCameraAboveGround()}))},FramingBehavior.prototype.detach=function(){if(this._attachedCamera){var e=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&e.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null}},FramingBehavior.prototype.zoomOnMesh=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),e.computeWorldMatrix(!0);var n=e.getBoundingInfo().boundingBox;this.zoomOnBoundingInfo(n.minimumWorld,n.maximumWorld,t,r)},FramingBehavior.prototype.zoomOnMeshHierarchy=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),e.computeWorldMatrix(!0);var n=e.getHierarchyBoundingVectors(!0);this.zoomOnBoundingInfo(n.min,n.max,t,r)},FramingBehavior.prototype.zoomOnMeshesHierarchy=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null);for(var n=new s["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new s["Vector3"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),o=0;o<e.length;o++){var a=e[o].getHierarchyBoundingVectors(!0);s["Vector3"].CheckExtends(a.min,n,i),s["Vector3"].CheckExtends(a.max,n,i)}this.zoomOnBoundingInfo(n,i,t,r)},FramingBehavior.prototype.zoomOnBoundingInfo=function(e,t,r,n){var i,o=this;if(void 0===r&&(r=!1),void 0===n&&(n=null),this._attachedCamera){var u=e.y,c=t.y,l=u+(c-u)*this._positionScale,d=t.subtract(e).scale(.5);if(r)i=new s["Vector3"](0,l,0);else{var h=e.add(d);i=new s["Vector3"](h.x,l,h.z)}this._vectorTransition||(this._vectorTransition=a["Animation"].CreateAnimation("target",a["Animation"].ANIMATIONTYPE_VECTOR3,60,FramingBehavior.EasingFunction)),this._betaIsAnimating=!0;var f=a["Animation"].TransitionTo("target",i,this._attachedCamera,this._attachedCamera.getScene(),60,this._vectorTransition,this._framingTime);f&&this._animatables.push(f);var p=0;if(this._mode===FramingBehavior.FitFrustumSidesMode){var m=this._calculateLowerRadiusFromModelBoundingSphere(e,t);this.autoCorrectCameraLimitsAndSensibility&&(this._attachedCamera.lowerRadiusLimit=d.length()+this._attachedCamera.minZ),p=m}else this._mode===FramingBehavior.IgnoreBoundsSizeMode&&(p=this._calculateLowerRadiusFromModelBoundingSphere(e,t),this.autoCorrectCameraLimitsAndSensibility&&null===this._attachedCamera.lowerRadiusLimit&&(this._attachedCamera.lowerRadiusLimit=this._attachedCamera.minZ));if(this.autoCorrectCameraLimitsAndSensibility){var _=t.subtract(e).length();this._attachedCamera.panningSensibility=5e3/_,this._attachedCamera.wheelPrecision=100/p}this._radiusTransition||(this._radiusTransition=a["Animation"].CreateAnimation("radius",a["Animation"].ANIMATIONTYPE_FLOAT,60,FramingBehavior.EasingFunction)),f=a["Animation"].TransitionTo("radius",p,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusTransition,this._framingTime,(function(){o.stopAllAnimations(),n&&n(),o._attachedCamera&&o._attachedCamera.useInputToRestoreState&&o._attachedCamera.storeState()})),f&&this._animatables.push(f)}},FramingBehavior.prototype._calculateLowerRadiusFromModelBoundingSphere=function(e,t){var r=t.subtract(e),n=r.length(),i=this._getFrustumSlope(),o=.5*n,s=o*this._radiusScale,a=s*Math.sqrt(1+1/(i.x*i.x)),u=s*Math.sqrt(1+1/(i.y*i.y)),c=Math.max(a,u),l=this._attachedCamera;return l?(l.lowerRadiusLimit&&this._mode===FramingBehavior.IgnoreBoundsSizeMode&&(c=c<l.lowerRadiusLimit?l.lowerRadiusLimit:c),l.upperRadiusLimit&&(c=c>l.upperRadiusLimit?l.upperRadiusLimit:c),c):0},FramingBehavior.prototype._maintainCameraAboveGround=function(){var e=this;if(!(this._elevationReturnTime<0)){var t=o["PrecisionDate"].Now-this._lastInteractionTime,r=.5*Math.PI-this._defaultElevation,n=.5*Math.PI;if(this._attachedCamera&&!this._betaIsAnimating&&this._attachedCamera.beta>n&&t>=this._elevationReturnWaitTime){this._betaIsAnimating=!0,this.stopAllAnimations(),this._betaTransition||(this._betaTransition=a["Animation"].CreateAnimation("beta",a["Animation"].ANIMATIONTYPE_FLOAT,60,FramingBehavior.EasingFunction));var i=a["Animation"].TransitionTo("beta",r,this._attachedCamera,this._attachedCamera.getScene(),60,this._betaTransition,this._elevationReturnTime,(function(){e._clearAnimationLocks(),e.stopAllAnimations()}));i&&this._animatables.push(i)}}},FramingBehavior.prototype._getFrustumSlope=function(){var e=this._attachedCamera;if(!e)return s["Vector2"].Zero();var t=e.getScene().getEngine(),r=t.getAspectRatio(e),n=Math.tan(e.fov/2),i=n*r;return new s["Vector2"](i,n)},FramingBehavior.prototype._clearAnimationLocks=function(){this._betaIsAnimating=!1},FramingBehavior.prototype._applyUserInteraction=function(){this.isUserIsMoving&&(this._lastInteractionTime=o["PrecisionDate"].Now,this.stopAllAnimations(),this._clearAnimationLocks())},FramingBehavior.prototype.stopAllAnimations=function(){this._attachedCamera&&(this._attachedCamera.animations=[]);while(this._animatables.length)this._animatables[0]&&(this._animatables[0].onAnimationEnd=null,this._animatables[0].stop()),this._animatables.shift()},Object.defineProperty(FramingBehavior.prototype,"isUserIsMoving",{get:function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},enumerable:!1,configurable:!0}),FramingBehavior.EasingFunction=new n["ExponentialEase"],FramingBehavior.EasingMode=n["EasingFunction"].EASINGMODE_EASEINOUT,FramingBehavior.IgnoreBoundsSizeMode=0,FramingBehavior.FitFrustumSidesMode=1,FramingBehavior}()},"./node_modules/@babylonjs/core/Cameras/Inputs/BaseCameraPointersInput.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BaseCameraPointersInput",(function(){return a}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/tools.js"),s=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),a=function(){function BaseCameraPointersInput(){this.buttons=[0,1,2]}return BaseCameraPointersInput.prototype.attachControl=function(e){var t=this;e=o["Tools"].BackCompatCameraNoPreventDefault(arguments);var r=this.camera.getEngine(),n=r.getInputElement(),i=0,a=null;this.pointA=null,this.pointB=null,this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0,this._pointerInput=function(o,u){var c=o.event,l="touch"===c.pointerType;if(!r.isInVRExclusivePointerMode&&(o.type===s["PointerEventTypes"].POINTERMOVE||-1!==t.buttons.indexOf(c.button))){var d=c.srcElement||c.target;if(t._altKey=c.altKey,t._ctrlKey=c.ctrlKey,t._metaKey=c.metaKey,t._shiftKey=c.shiftKey,t._buttonsPressed=c.buttons,r.isPointerLock){var h=c.movementX||c.mozMovementX||c.webkitMovementX||c.msMovementX||0,f=c.movementY||c.mozMovementY||c.webkitMovementY||c.msMovementY||0;t.onTouch(null,h,f),t.pointA=null,t.pointB=null}else if(o.type===s["PointerEventTypes"].POINTERDOWN&&d){try{d.setPointerCapture(c.pointerId)}catch(v){}null===t.pointA?t.pointA={x:c.clientX,y:c.clientY,pointerId:c.pointerId,type:c.pointerType}:null===t.pointB&&(t.pointB={x:c.clientX,y:c.clientY,pointerId:c.pointerId,type:c.pointerType}),t.onButtonDown(c),e||(c.preventDefault(),n&&n.focus())}else if(o.type===s["PointerEventTypes"].POINTERDOUBLETAP)t.onDoubleTap(c.pointerType);else if(o.type===s["PointerEventTypes"].POINTERUP&&d){try{d.releasePointerCapture(c.pointerId)}catch(v){}l||(t.pointB=null),r._badOS?t.pointA=t.pointB=null:t.pointB&&t.pointA&&t.pointA.pointerId==c.pointerId?(t.pointA=t.pointB,t.pointB=null):t.pointA&&t.pointB&&t.pointB.pointerId==c.pointerId?t.pointB=null:t.pointA=t.pointB=null,(0!==i||a)&&(t.onMultiTouch(t.pointA,t.pointB,i,0,a,null),i=0,a=null),t.onButtonUp(c),e||c.preventDefault()}else if(o.type===s["PointerEventTypes"].POINTERMOVE)if(e||c.preventDefault(),t.pointA&&null===t.pointB){h=c.clientX-t.pointA.x,f=c.clientY-t.pointA.y;t.onTouch(t.pointA,h,f),t.pointA.x=c.clientX,t.pointA.y=c.clientY}else if(t.pointA&&t.pointB){var p=t.pointA.pointerId===c.pointerId?t.pointA:t.pointB;p.x=c.clientX,p.y=c.clientY;var m=t.pointA.x-t.pointB.x,_=t.pointA.y-t.pointB.y,g=m*m+_*_,b={x:(t.pointA.x+t.pointB.x)/2,y:(t.pointA.y+t.pointB.y)/2,pointerId:c.pointerId,type:o.type};t.onMultiTouch(t.pointA,t.pointB,i,g,a,b),a=b,i=g}}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,s["PointerEventTypes"].POINTERDOWN|s["PointerEventTypes"].POINTERUP|s["PointerEventTypes"].POINTERMOVE),this._onLostFocus=function(){t.pointA=t.pointB=null,i=0,a=null,t.onLostFocus()},n&&n.addEventListener("contextmenu",this.onContextMenu.bind(this),!1);var u=this.camera.getScene().getEngine().getHostWindow();u&&o["Tools"].RegisterTopRootEvents(u,[{name:"blur",handler:this._onLostFocus}])},BaseCameraPointersInput.prototype.detachControl=function(e){if(this._onLostFocus){var t=this.camera.getScene().getEngine().getHostWindow();t&&o["Tools"].UnregisterTopRootEvents(t,[{name:"blur",handler:this._onLostFocus}])}if(this._observer){if(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this.onContextMenu){var r=this.camera.getScene().getEngine().getInputElement();r&&r.removeEventListener("contextmenu",this.onContextMenu)}this._onLostFocus=null}this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0},BaseCameraPointersInput.prototype.getClassName=function(){return"BaseCameraPointersInput"},BaseCameraPointersInput.prototype.getSimpleName=function(){return"pointers"},BaseCameraPointersInput.prototype.onDoubleTap=function(e){},BaseCameraPointersInput.prototype.onTouch=function(e,t,r){},BaseCameraPointersInput.prototype.onMultiTouch=function(e,t,r,n,i,o){},BaseCameraPointersInput.prototype.onContextMenu=function(e){e.preventDefault()},BaseCameraPointersInput.prototype.onButtonDown=function(e){},BaseCameraPointersInput.prototype.onButtonUp=function(e){},BaseCameraPointersInput.prototype.onLostFocus=function(){},Object(n["__decorate"])([Object(i["serialize"])()],BaseCameraPointersInput.prototype,"buttons",void 0),BaseCameraPointersInput}()},"./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraKeyboardMoveInput.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArcRotateCameraKeyboardMoveInput",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Cameras/cameraInputsManager.js"),s=r("./node_modules/@babylonjs/core/Events/keyboardEvents.js"),a=r("./node_modules/@babylonjs/core/Misc/tools.js"),u=function(){function ArcRotateCameraKeyboardMoveInput(){this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this.keysReset=[220],this.panningSensibility=50,this.zoomingSensibility=25,this.useAltToZoom=!0,this.angularSpeed=.01,this._keys=new Array}return ArcRotateCameraKeyboardMoveInput.prototype.attachControl=function(e){var t=this;e=a["Tools"].BackCompatCameraNoPreventDefault(arguments),this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((function(){t._keys=[]})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((function(r){var n=r.event;if(!n.metaKey)if(r.type===s["KeyboardEventTypes"].KEYDOWN){if(t._ctrlPressed=n.ctrlKey,t._altPressed=n.altKey,-1!==t.keysUp.indexOf(n.keyCode)||-1!==t.keysDown.indexOf(n.keyCode)||-1!==t.keysLeft.indexOf(n.keyCode)||-1!==t.keysRight.indexOf(n.keyCode)||-1!==t.keysReset.indexOf(n.keyCode)){var i=t._keys.indexOf(n.keyCode);-1===i&&t._keys.push(n.keyCode),n.preventDefault&&(e||n.preventDefault())}}else if(-1!==t.keysUp.indexOf(n.keyCode)||-1!==t.keysDown.indexOf(n.keyCode)||-1!==t.keysLeft.indexOf(n.keyCode)||-1!==t.keysRight.indexOf(n.keyCode)||-1!==t.keysReset.indexOf(n.keyCode)){i=t._keys.indexOf(n.keyCode);i>=0&&t._keys.splice(i,1),n.preventDefault&&(e||n.preventDefault())}})))},ArcRotateCameraKeyboardMoveInput.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},ArcRotateCameraKeyboardMoveInput.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,t=0;t<this._keys.length;t++){var r=this._keys[t];-1!==this.keysLeft.indexOf(r)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningX-=1/this.panningSensibility:e.inertialAlphaOffset-=this.angularSpeed:-1!==this.keysUp.indexOf(r)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningY+=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?e.inertialRadiusOffset+=1/this.zoomingSensibility:e.inertialBetaOffset-=this.angularSpeed:-1!==this.keysRight.indexOf(r)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningX+=1/this.panningSensibility:e.inertialAlphaOffset+=this.angularSpeed:-1!==this.keysDown.indexOf(r)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningY-=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?e.inertialRadiusOffset-=1/this.zoomingSensibility:e.inertialBetaOffset+=this.angularSpeed:-1!==this.keysReset.indexOf(r)&&e.useInputToRestoreState&&e.restoreState()}},ArcRotateCameraKeyboardMoveInput.prototype.getClassName=function(){return"ArcRotateCameraKeyboardMoveInput"},ArcRotateCameraKeyboardMoveInput.prototype.getSimpleName=function(){return"keyboard"},Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"keysUp",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"keysDown",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"keysLeft",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"keysRight",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"keysReset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"panningSensibility",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"zoomingSensibility",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"useAltToZoom",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraKeyboardMoveInput.prototype,"angularSpeed",void 0),ArcRotateCameraKeyboardMoveInput}();o["CameraInputTypes"]["ArcRotateCameraKeyboardMoveInput"]=u},"./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraMouseWheelInput.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArcRotateCameraMouseWheelInput",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Cameras/cameraInputsManager.js"),s=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),a=r("./node_modules/@babylonjs/core/Maths/math.scalar.js"),u=r("./node_modules/@babylonjs/core/Misc/tools.js"),c=function(){function ArcRotateCameraMouseWheelInput(){this.wheelPrecision=3,this.wheelDeltaPercentage=0}return ArcRotateCameraMouseWheelInput.prototype.computeDeltaFromMouseWheelLegacyEvent=function(e,t){var r=0,n=.01*e*this.wheelDeltaPercentage*t;return r=e>0?n/(1+this.wheelDeltaPercentage):n*(1+this.wheelDeltaPercentage),r},ArcRotateCameraMouseWheelInput.prototype.attachControl=function(e){var t=this;e=u["Tools"].BackCompatCameraNoPreventDefault(arguments),this._wheel=function(r,n){if(r.type===s["PointerEventTypes"].POINTERWHEEL){var i=r.event,o=0,u=i,c=0;if(c=u.wheelDelta?u.wheelDelta:60*-(i.deltaY||i.detail),t.wheelDeltaPercentage){if(o=t.computeDeltaFromMouseWheelLegacyEvent(c,t.camera.radius),o>0){for(var l=t.camera.radius,d=t.camera.inertialRadiusOffset+o,h=0;h<20&&Math.abs(d)>.001;h++)l-=d,d*=t.camera.inertia;l=a["Scalar"].Clamp(l,0,Number.MAX_VALUE),o=t.computeDeltaFromMouseWheelLegacyEvent(c,l)}}else o=c/(40*t.wheelPrecision);o&&(t.camera.inertialRadiusOffset+=o),i.preventDefault&&(e||i.preventDefault())}},this._observer=this.camera.getScene().onPointerObservable.add(this._wheel,s["PointerEventTypes"].POINTERWHEEL)},ArcRotateCameraMouseWheelInput.prototype.detachControl=function(e){this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._wheel=null)},ArcRotateCameraMouseWheelInput.prototype.getClassName=function(){return"ArcRotateCameraMouseWheelInput"},ArcRotateCameraMouseWheelInput.prototype.getSimpleName=function(){return"mousewheel"},Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraMouseWheelInput.prototype,"wheelPrecision",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraMouseWheelInput.prototype,"wheelDeltaPercentage",void 0),ArcRotateCameraMouseWheelInput}();o["CameraInputTypes"]["ArcRotateCameraMouseWheelInput"]=c},"./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraPointersInput.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArcRotateCameraPointersInput",(function(){return a}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Cameras/cameraInputsManager.js"),s=r("./node_modules/@babylonjs/core/Cameras/Inputs/BaseCameraPointersInput.js"),a=function(e){function ArcRotateCameraPointersInput(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttons=[0,1,2],t.angularSensibilityX=1e3,t.angularSensibilityY=1e3,t.pinchPrecision=12,t.pinchDeltaPercentage=0,t.useNaturalPinchZoom=!1,t.panningSensibility=1e3,t.multiTouchPanning=!0,t.multiTouchPanAndZoom=!0,t.pinchInwards=!0,t._isPanClick=!1,t._twoFingerActivityCount=0,t._isPinching=!1,t}return Object(n["__extends"])(ArcRotateCameraPointersInput,e),ArcRotateCameraPointersInput.prototype.getClassName=function(){return"ArcRotateCameraPointersInput"},ArcRotateCameraPointersInput.prototype.onTouch=function(e,t,r){0!==this.panningSensibility&&(this._ctrlKey&&this.camera._useCtrlForPanning||this._isPanClick)?(this.camera.inertialPanningX+=-t/this.panningSensibility,this.camera.inertialPanningY+=r/this.panningSensibility):(this.camera.inertialAlphaOffset-=t/this.angularSensibilityX,this.camera.inertialBetaOffset-=r/this.angularSensibilityY)},ArcRotateCameraPointersInput.prototype.onDoubleTap=function(e){this.camera.useInputToRestoreState&&this.camera.restoreState()},ArcRotateCameraPointersInput.prototype.onMultiTouch=function(e,t,r,n,i,o){if((0!==r||null!==i)&&(0!==n||null!==o)){var s=this.pinchInwards?1:-1;if(this.multiTouchPanAndZoom){if(this.useNaturalPinchZoom?this.camera.radius=this.camera.radius*Math.sqrt(r)/Math.sqrt(n):this.pinchDeltaPercentage?this.camera.inertialRadiusOffset+=.001*(n-r)*this.camera.radius*this.pinchDeltaPercentage:this.camera.inertialRadiusOffset+=(n-r)/(this.pinchPrecision*s*(this.angularSensibilityX+this.angularSensibilityY)/2),0!==this.panningSensibility&&i&&o){var a=o.x-i.x,u=o.y-i.y;this.camera.inertialPanningX+=-a/this.panningSensibility,this.camera.inertialPanningY+=u/this.panningSensibility}}else{this._twoFingerActivityCount++;var c=Math.sqrt(r),l=Math.sqrt(n);if(this._isPinching||this._twoFingerActivityCount<20&&Math.abs(l-c)>this.camera.pinchToPanMaxDistance)this.pinchDeltaPercentage?this.camera.inertialRadiusOffset+=.001*(n-r)*this.camera.radius*this.pinchDeltaPercentage:this.camera.inertialRadiusOffset+=(n-r)/(this.pinchPrecision*s*(this.angularSensibilityX+this.angularSensibilityY)/2),this._isPinching=!0;else if(0!==this.panningSensibility&&this.multiTouchPanning&&o&&i){a=o.x-i.x,u=o.y-i.y;this.camera.inertialPanningX+=-a/this.panningSensibility,this.camera.inertialPanningY+=u/this.panningSensibility}}}},ArcRotateCameraPointersInput.prototype.onButtonDown=function(e){this._isPanClick=e.button===this.camera._panningMouseButton},ArcRotateCameraPointersInput.prototype.onButtonUp=function(e){this._twoFingerActivityCount=0,this._isPinching=!1},ArcRotateCameraPointersInput.prototype.onLostFocus=function(){this._isPanClick=!1,this._twoFingerActivityCount=0,this._isPinching=!1},Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"buttons",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"angularSensibilityX",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"angularSensibilityY",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"pinchPrecision",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"pinchDeltaPercentage",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"useNaturalPinchZoom",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"panningSensibility",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"multiTouchPanning",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCameraPointersInput.prototype,"multiTouchPanAndZoom",void 0),ArcRotateCameraPointersInput}(s["BaseCameraPointersInput"]);o["CameraInputTypes"]["ArcRotateCameraPointersInput"]=a},"./node_modules/@babylonjs/core/Cameras/arcRotateCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArcRotateCamera",(function(){return g}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/node.js"),u=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),c=r("./node_modules/@babylonjs/core/Behaviors/Cameras/autoRotationBehavior.js"),l=r("./node_modules/@babylonjs/core/Behaviors/Cameras/bouncingBehavior.js"),d=r("./node_modules/@babylonjs/core/Behaviors/Cameras/framingBehavior.js"),h=r("./node_modules/@babylonjs/core/Cameras/camera.js"),f=r("./node_modules/@babylonjs/core/Cameras/targetCamera.js"),p=r("./node_modules/@babylonjs/core/Cameras/arcRotateCameraInputsManager.js"),m=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),_=r("./node_modules/@babylonjs/core/Misc/tools.js");a["Node"].AddNodeConstructor("ArcRotateCamera",(function(e,t){return function(){return new g(e,0,0,1,s["Vector3"].Zero(),t)}}));var g=function(e){function ArcRotateCamera(t,r,n,i,a,u,c){void 0===c&&(c=!0);var l=e.call(this,t,s["Vector3"].Zero(),u,c)||this;return l.inertialAlphaOffset=0,l.inertialBetaOffset=0,l.inertialRadiusOffset=0,l.lowerAlphaLimit=null,l.upperAlphaLimit=null,l.lowerBetaLimit=.01,l.upperBetaLimit=Math.PI-.01,l.lowerRadiusLimit=null,l.upperRadiusLimit=null,l.inertialPanningX=0,l.inertialPanningY=0,l.pinchToPanMaxDistance=20,l.panningDistanceLimit=null,l.panningOriginTarget=s["Vector3"].Zero(),l.panningInertia=.9,l.zoomOnFactor=1,l.targetScreenOffset=s["Vector2"].Zero(),l.allowUpsideDown=!0,l.useInputToRestoreState=!0,l._viewMatrix=new s["Matrix"],l.panningAxis=new s["Vector3"](1,1,0),l.onMeshTargetChangedObservable=new o["Observable"],l.checkCollisions=!1,l.collisionRadius=new s["Vector3"](.5,.5,.5),l._previousPosition=s["Vector3"].Zero(),l._collisionVelocity=s["Vector3"].Zero(),l._newPosition=s["Vector3"].Zero(),l._computationVector=s["Vector3"].Zero(),l._onCollisionPositionChange=function(e,t,r){void 0===r&&(r=null),r?(l.setPosition(t),l.onCollide&&l.onCollide(r)):l._previousPosition.copyFrom(l._position);var n=Math.cos(l.alpha),i=Math.sin(l.alpha),o=Math.cos(l.beta),s=Math.sin(l.beta);0===s&&(s=1e-4);var a=l._getTargetPosition();l._computationVector.copyFromFloats(l.radius*n*s,l.radius*o,l.radius*i*s),a.addToRef(l._computationVector,l._newPosition),l._position.copyFrom(l._newPosition);var u=l.upVector;l.allowUpsideDown&&l.beta<0&&(u=u.clone(),u=u.negate()),l._computeViewMatrix(l._position,a,u),l._viewMatrix.addAtIndex(12,l.targetScreenOffset.x),l._viewMatrix.addAtIndex(13,l.targetScreenOffset.y),l._collisionTriggered=!1},l._target=s["Vector3"].Zero(),a&&l.setTarget(a),l.alpha=r,l.beta=n,l.radius=i,l.getViewMatrix(),l.inputs=new p["ArcRotateCameraInputsManager"](l),l.inputs.addKeyboard().addMouseWheel().addPointers(),l}return Object(n["__extends"])(ArcRotateCamera,e),Object.defineProperty(ArcRotateCamera.prototype,"target",{get:function(){return this._target},set:function(e){this.setTarget(e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"position",{get:function(){return this._position},set:function(e){this.setPosition(e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"upVector",{get:function(){return this._upVector},set:function(e){this._upToYMatrix||(this._YToUpMatrix=new s["Matrix"],this._upToYMatrix=new s["Matrix"],this._upVector=s["Vector3"].Zero()),e.normalize(),this._upVector.copyFrom(e),this.setMatUp()},enumerable:!1,configurable:!0}),ArcRotateCamera.prototype.setMatUp=function(){s["Matrix"].RotationAlignToRef(s["Vector3"].UpReadOnly,this._upVector,this._YToUpMatrix),s["Matrix"].RotationAlignToRef(this._upVector,s["Vector3"].UpReadOnly,this._upToYMatrix)},Object.defineProperty(ArcRotateCamera.prototype,"angularSensibilityX",{get:function(){var e=this.inputs.attached["pointers"];return e?e.angularSensibilityX:0},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.angularSensibilityX=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"angularSensibilityY",{get:function(){var e=this.inputs.attached["pointers"];return e?e.angularSensibilityY:0},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.angularSensibilityY=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"pinchPrecision",{get:function(){var e=this.inputs.attached["pointers"];return e?e.pinchPrecision:0},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.pinchPrecision=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"pinchDeltaPercentage",{get:function(){var e=this.inputs.attached["pointers"];return e?e.pinchDeltaPercentage:0},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.pinchDeltaPercentage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"useNaturalPinchZoom",{get:function(){var e=this.inputs.attached["pointers"];return!!e&&e.useNaturalPinchZoom},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.useNaturalPinchZoom=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"panningSensibility",{get:function(){var e=this.inputs.attached["pointers"];return e?e.panningSensibility:0},set:function(e){var t=this.inputs.attached["pointers"];t&&(t.panningSensibility=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"keysUp",{get:function(){var e=this.inputs.attached["keyboard"];return e?e.keysUp:[]},set:function(e){var t=this.inputs.attached["keyboard"];t&&(t.keysUp=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"keysDown",{get:function(){var e=this.inputs.attached["keyboard"];return e?e.keysDown:[]},set:function(e){var t=this.inputs.attached["keyboard"];t&&(t.keysDown=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"keysLeft",{get:function(){var e=this.inputs.attached["keyboard"];return e?e.keysLeft:[]},set:function(e){var t=this.inputs.attached["keyboard"];t&&(t.keysLeft=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"keysRight",{get:function(){var e=this.inputs.attached["keyboard"];return e?e.keysRight:[]},set:function(e){var t=this.inputs.attached["keyboard"];t&&(t.keysRight=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"wheelPrecision",{get:function(){var e=this.inputs.attached["mousewheel"];return e?e.wheelPrecision:0},set:function(e){var t=this.inputs.attached["mousewheel"];t&&(t.wheelPrecision=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"wheelDeltaPercentage",{get:function(){var e=this.inputs.attached["mousewheel"];return e?e.wheelDeltaPercentage:0},set:function(e){var t=this.inputs.attached["mousewheel"];t&&(t.wheelDeltaPercentage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"bouncingBehavior",{get:function(){return this._bouncingBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"useBouncingBehavior",{get:function(){return null!=this._bouncingBehavior},set:function(e){e!==this.useBouncingBehavior&&(e?(this._bouncingBehavior=new l["BouncingBehavior"],this.addBehavior(this._bouncingBehavior)):this._bouncingBehavior&&(this.removeBehavior(this._bouncingBehavior),this._bouncingBehavior=null))},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"framingBehavior",{get:function(){return this._framingBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"useFramingBehavior",{get:function(){return null!=this._framingBehavior},set:function(e){e!==this.useFramingBehavior&&(e?(this._framingBehavior=new d["FramingBehavior"],this.addBehavior(this._framingBehavior)):this._framingBehavior&&(this.removeBehavior(this._framingBehavior),this._framingBehavior=null))},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"autoRotationBehavior",{get:function(){return this._autoRotationBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(ArcRotateCamera.prototype,"useAutoRotationBehavior",{get:function(){return null!=this._autoRotationBehavior},set:function(e){e!==this.useAutoRotationBehavior&&(e?(this._autoRotationBehavior=new c["AutoRotationBehavior"],this.addBehavior(this._autoRotationBehavior)):this._autoRotationBehavior&&(this.removeBehavior(this._autoRotationBehavior),this._autoRotationBehavior=null))},enumerable:!1,configurable:!0}),ArcRotateCamera.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache._target=new s["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.alpha=void 0,this._cache.beta=void 0,this._cache.radius=void 0,this._cache.targetScreenOffset=s["Vector2"].Zero()},ArcRotateCamera.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache._target.copyFrom(this._getTargetPosition()),this._cache.alpha=this.alpha,this._cache.beta=this.beta,this._cache.radius=this.radius,this._cache.targetScreenOffset.copyFrom(this.targetScreenOffset)},ArcRotateCamera.prototype._getTargetPosition=function(){if(this._targetHost&&this._targetHost.getAbsolutePosition){var e=this._targetHost.absolutePosition;this._targetBoundingCenter?e.addToRef(this._targetBoundingCenter,this._target):this._target.copyFrom(e)}var t=this._getLockedTargetPosition();return t||this._target},ArcRotateCamera.prototype.storeState=function(){return this._storedAlpha=this.alpha,this._storedBeta=this.beta,this._storedRadius=this.radius,this._storedTarget=this._getTargetPosition().clone(),this._storedTargetScreenOffset=this.targetScreenOffset.clone(),e.prototype.storeState.call(this)},ArcRotateCamera.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.setTarget(this._storedTarget.clone()),this.alpha=this._storedAlpha,this.beta=this._storedBeta,this.radius=this._storedRadius,this.targetScreenOffset=this._storedTargetScreenOffset.clone(),this.inertialAlphaOffset=0,this.inertialBetaOffset=0,this.inertialRadiusOffset=0,this.inertialPanningX=0,this.inertialPanningY=0,!0)},ArcRotateCamera.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronizedViewMatrix.call(this)&&(this._cache._target.equals(this._getTargetPosition())&&this._cache.alpha===this.alpha&&this._cache.beta===this.beta&&this._cache.radius===this.radius&&this._cache.targetScreenOffset.equals(this.targetScreenOffset))},ArcRotateCamera.prototype.attachControl=function(e,t,r,n){var i=this;void 0===r&&(r=!0),void 0===n&&(n=2),t=_["Tools"].BackCompatCameraNoPreventDefault(arguments),this._useCtrlForPanning=r,this._panningMouseButton=n,"boolean"===typeof arguments[0]&&(arguments.length>1&&(this._useCtrlForPanning=arguments[1]),arguments.length>2&&(this._panningMouseButton=arguments[2])),this.inputs.attachElement(t),this._reset=function(){i.inertialAlphaOffset=0,i.inertialBetaOffset=0,i.inertialRadiusOffset=0,i.inertialPanningX=0,i.inertialPanningY=0}},ArcRotateCamera.prototype.detachControl=function(e){this.inputs.detachElement(),this._reset&&this._reset()},ArcRotateCamera.prototype._checkInputs=function(){if(!this._collisionTriggered){if(this.inputs.checkInputs(),0!==this.inertialAlphaOffset||0!==this.inertialBetaOffset||0!==this.inertialRadiusOffset){var t=this.inertialAlphaOffset;this.beta<=0&&(t*=-1),this.getScene().useRightHandedSystem&&(t*=-1),this.parent&&this.parent._getWorldMatrixDeterminant()<0&&(t*=-1),this.alpha+=t,this.beta+=this.inertialBetaOffset,this.radius-=this.inertialRadiusOffset,this.inertialAlphaOffset*=this.inertia,this.inertialBetaOffset*=this.inertia,this.inertialRadiusOffset*=this.inertia,Math.abs(this.inertialAlphaOffset)<m["Epsilon"]&&(this.inertialAlphaOffset=0),Math.abs(this.inertialBetaOffset)<m["Epsilon"]&&(this.inertialBetaOffset=0),Math.abs(this.inertialRadiusOffset)<this.speed*m["Epsilon"]&&(this.inertialRadiusOffset=0)}if(0!==this.inertialPanningX||0!==this.inertialPanningY){if(this._localDirection||(this._localDirection=s["Vector3"].Zero(),this._transformedDirection=s["Vector3"].Zero()),this._localDirection.copyFromFloats(this.inertialPanningX,this.inertialPanningY,this.inertialPanningY),this._localDirection.multiplyInPlace(this.panningAxis),this._viewMatrix.invertToRef(this._cameraTransformMatrix),s["Vector3"].TransformNormalToRef(this._localDirection,this._cameraTransformMatrix,this._transformedDirection),this.panningAxis.y||(this._transformedDirection.y=0),!this._targetHost)if(this.panningDistanceLimit){this._transformedDirection.addInPlace(this._target);var r=s["Vector3"].DistanceSquared(this._transformedDirection,this.panningOriginTarget);r<=this.panningDistanceLimit*this.panningDistanceLimit&&this._target.copyFrom(this._transformedDirection)}else this._target.addInPlace(this._transformedDirection);this.inertialPanningX*=this.panningInertia,this.inertialPanningY*=this.panningInertia,Math.abs(this.inertialPanningX)<this.speed*m["Epsilon"]&&(this.inertialPanningX=0),Math.abs(this.inertialPanningY)<this.speed*m["Epsilon"]&&(this.inertialPanningY=0)}this._checkLimits(),e.prototype._checkInputs.call(this)}},ArcRotateCamera.prototype._checkLimits=function(){null===this.lowerBetaLimit||void 0===this.lowerBetaLimit?this.allowUpsideDown&&this.beta>Math.PI&&(this.beta=this.beta-2*Math.PI):this.beta<this.lowerBetaLimit&&(this.beta=this.lowerBetaLimit),null===this.upperBetaLimit||void 0===this.upperBetaLimit?this.allowUpsideDown&&this.beta<-Math.PI&&(this.beta=this.beta+2*Math.PI):this.beta>this.upperBetaLimit&&(this.beta=this.upperBetaLimit),null!==this.lowerAlphaLimit&&this.alpha<this.lowerAlphaLimit&&(this.alpha=this.lowerAlphaLimit),null!==this.upperAlphaLimit&&this.alpha>this.upperAlphaLimit&&(this.alpha=this.upperAlphaLimit),null!==this.lowerRadiusLimit&&this.radius<this.lowerRadiusLimit&&(this.radius=this.lowerRadiusLimit,this.inertialRadiusOffset=0),null!==this.upperRadiusLimit&&this.radius>this.upperRadiusLimit&&(this.radius=this.upperRadiusLimit,this.inertialRadiusOffset=0)},ArcRotateCamera.prototype.rebuildAnglesAndRadius=function(){this._position.subtractToRef(this._getTargetPosition(),this._computationVector),0===this._upVector.x&&1===this._upVector.y&&0===this._upVector.z||s["Vector3"].TransformCoordinatesToRef(this._computationVector,this._upToYMatrix,this._computationVector),this.radius=this._computationVector.length(),0===this.radius&&(this.radius=1e-4);var e=this.alpha;0===this._computationVector.x&&0===this._computationVector.z?this.alpha=Math.PI/2:this.alpha=Math.acos(this._computationVector.x/Math.sqrt(Math.pow(this._computationVector.x,2)+Math.pow(this._computationVector.z,2))),this._computationVector.z<0&&(this.alpha=2*Math.PI-this.alpha);var t=Math.round((e-this.alpha)/(2*Math.PI));this.alpha+=2*t*Math.PI,this.beta=Math.acos(this._computationVector.y/this.radius),this._checkLimits()},ArcRotateCamera.prototype.setPosition=function(e){this._position.equals(e)||(this._position.copyFrom(e),this.rebuildAnglesAndRadius())},ArcRotateCamera.prototype.setTarget=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=!1),e.getBoundingInfo)this._targetBoundingCenter=t?e.getBoundingInfo().boundingBox.centerWorld.clone():null,e.computeWorldMatrix(),this._targetHost=e,this._target=this._getTargetPosition(),this.onMeshTargetChangedObservable.notifyObservers(this._targetHost);else{var n=e,i=this._getTargetPosition();if(i&&!r&&i.equals(n))return;this._targetHost=null,this._target=n,this._targetBoundingCenter=null,this.onMeshTargetChangedObservable.notifyObservers(null)}this.rebuildAnglesAndRadius()},ArcRotateCamera.prototype._getViewMatrix=function(){var e=Math.cos(this.alpha),t=Math.sin(this.alpha),r=Math.cos(this.beta),n=Math.sin(this.beta);0===n&&(n=1e-4),0===this.radius&&(this.radius=1e-4);var i=this._getTargetPosition();if(this._computationVector.copyFromFloats(this.radius*e*n,this.radius*r,this.radius*t*n),0===this._upVector.x&&1===this._upVector.y&&0===this._upVector.z||s["Vector3"].TransformCoordinatesToRef(this._computationVector,this._YToUpMatrix,this._computationVector),i.addToRef(this._computationVector,this._newPosition),this.getScene().collisionsEnabled&&this.checkCollisions){var o=this.getScene().collisionCoordinator;this._collider||(this._collider=o.createCollider()),this._collider._radius=this.collisionRadius,this._newPosition.subtractToRef(this._position,this._collisionVelocity),this._collisionTriggered=!0,o.getNewPosition(this._position,this._collisionVelocity,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)}else{this._position.copyFrom(this._newPosition);var a=this.upVector;this.allowUpsideDown&&n<0&&(a=a.negate()),this._computeViewMatrix(this._position,i,a),this._viewMatrix.addAtIndex(12,this.targetScreenOffset.x),this._viewMatrix.addAtIndex(13,this.targetScreenOffset.y)}return this._currentTarget=i,this._viewMatrix},ArcRotateCamera.prototype.zoomOn=function(e,t){void 0===t&&(t=!1),e=e||this.getScene().meshes;var r=u["Mesh"].MinMax(e),n=s["Vector3"].Distance(r.min,r.max);this.radius=n*this.zoomOnFactor,this.focusOn({min:r.min,max:r.max,distance:n},t)},ArcRotateCamera.prototype.focusOn=function(e,t){var r,n;if(void 0===t&&(t=!1),void 0===e.min){var i=e||this.getScene().meshes;r=u["Mesh"].MinMax(i),n=s["Vector3"].Distance(r.min,r.max)}else{var o=e;r=o,n=o.distance}this._target=u["Mesh"].Center(r),t||(this.maxZ=2*n)},ArcRotateCamera.prototype.createRigCamera=function(e,t){var r=0;switch(this.cameraRigMode){case h["Camera"].RIG_MODE_STEREOSCOPIC_ANAGLYPH:case h["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case h["Camera"].RIG_MODE_STEREOSCOPIC_OVERUNDER:case h["Camera"].RIG_MODE_STEREOSCOPIC_INTERLACED:case h["Camera"].RIG_MODE_VR:r=this._cameraRigParams.stereoHalfAngle*(0===t?1:-1);break;case h["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:r=this._cameraRigParams.stereoHalfAngle*(0===t?-1:1);break}var n=new ArcRotateCamera(e,this.alpha+r,this.beta,this.radius,this._target,this.getScene());return n._cameraRigParams={},n.isRigCamera=!0,n.rigParent=this,n.upVector=this.upVector,n},ArcRotateCamera.prototype._updateRigCameras=function(){var t=this._rigCameras[0],r=this._rigCameras[1];switch(t.beta=r.beta=this.beta,this.cameraRigMode){case h["Camera"].RIG_MODE_STEREOSCOPIC_ANAGLYPH:case h["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case h["Camera"].RIG_MODE_STEREOSCOPIC_OVERUNDER:case h["Camera"].RIG_MODE_STEREOSCOPIC_INTERLACED:case h["Camera"].RIG_MODE_VR:t.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle,r.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle;break;case h["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:t.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle,r.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle;break}e.prototype._updateRigCameras.call(this)},ArcRotateCamera.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},ArcRotateCamera.prototype.getClassName=function(){return"ArcRotateCamera"},Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"alpha",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"beta",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"radius",void 0),Object(n["__decorate"])([Object(i["serializeAsVector3"])("target")],ArcRotateCamera.prototype,"_target",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"inertialAlphaOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"inertialBetaOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"inertialRadiusOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"lowerAlphaLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"upperAlphaLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"lowerBetaLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"upperBetaLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"lowerRadiusLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"upperRadiusLimit",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"inertialPanningX",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"inertialPanningY",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"pinchToPanMaxDistance",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"panningDistanceLimit",void 0),Object(n["__decorate"])([Object(i["serializeAsVector3"])()],ArcRotateCamera.prototype,"panningOriginTarget",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"panningInertia",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"zoomOnFactor",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"targetScreenOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"allowUpsideDown",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ArcRotateCamera.prototype,"useInputToRestoreState",void 0),ArcRotateCamera}(f["TargetCamera"])},"./node_modules/@babylonjs/core/Cameras/arcRotateCameraInputsManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArcRotateCameraInputsManager",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraPointersInput.js"),o=r("./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraKeyboardMoveInput.js"),s=r("./node_modules/@babylonjs/core/Cameras/Inputs/arcRotateCameraMouseWheelInput.js"),a=r("./node_modules/@babylonjs/core/Cameras/cameraInputsManager.js"),u=function(e){function ArcRotateCameraInputsManager(t){return e.call(this,t)||this}return Object(n["__extends"])(ArcRotateCameraInputsManager,e),ArcRotateCameraInputsManager.prototype.addMouseWheel=function(){return this.add(new s["ArcRotateCameraMouseWheelInput"]),this},ArcRotateCameraInputsManager.prototype.addPointers=function(){return this.add(new i["ArcRotateCameraPointersInput"]),this},ArcRotateCameraInputsManager.prototype.addKeyboard=function(){return this.add(new o["ArcRotateCameraKeyboardMoveInput"]),this},ArcRotateCameraInputsManager}(a["CameraInputsManager"])},"./node_modules/@babylonjs/core/Cameras/camera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Camera",(function(){return m}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/smartArray.js"),s=r("./node_modules/@babylonjs/core/Misc/tools.js"),a=r("./node_modules/@babylonjs/core/Misc/observable.js"),u=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),c=r("./node_modules/@babylonjs/core/node.js"),l=r("./node_modules/@babylonjs/core/Misc/logger.js"),d=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),h=r("./node_modules/@babylonjs/core/Misc/devTools.js"),f=r("./node_modules/@babylonjs/core/Maths/math.viewport.js"),p=r("./node_modules/@babylonjs/core/Maths/math.frustum.js"),m=function(e){function Camera(t,r,n,i){void 0===i&&(i=!0);var s=e.call(this,t,n)||this;return s._position=u["Vector3"].Zero(),s._upVector=u["Vector3"].Up(),s.orthoLeft=null,s.orthoRight=null,s.orthoBottom=null,s.orthoTop=null,s.fov=.8,s.minZ=1,s.maxZ=1e4,s.inertia=.9,s.mode=Camera.PERSPECTIVE_CAMERA,s.isIntermediate=!1,s.viewport=new f["Viewport"](0,0,1,1),s.layerMask=268435455,s.fovMode=Camera.FOVMODE_VERTICAL_FIXED,s.cameraRigMode=Camera.RIG_MODE_NONE,s.customRenderTargets=new Array,s.outputRenderTarget=null,s.onViewMatrixChangedObservable=new a["Observable"],s.onProjectionMatrixChangedObservable=new a["Observable"],s.onAfterCheckInputsObservable=new a["Observable"],s.onRestoreStateObservable=new a["Observable"],s.isRigCamera=!1,s._rigCameras=new Array,s._webvrViewMatrix=u["Matrix"].Identity(),s._skipRendering=!1,s._projectionMatrix=new u["Matrix"],s._postProcesses=new Array,s._activeMeshes=new o["SmartArray"](256),s._globalPosition=u["Vector3"].Zero(),s._computedViewMatrix=u["Matrix"].Identity(),s._doNotComputeProjectionMatrix=!1,s._transformMatrix=u["Matrix"].Zero(),s._refreshFrustumPlanes=!0,s._isCamera=!0,s._isLeftCamera=!1,s._isRightCamera=!1,s.getScene().addCamera(s),i&&!s.getScene().activeCamera&&(s.getScene().activeCamera=s),s.position=r,s}return Object(n["__extends"])(Camera,e),Object.defineProperty(Camera.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!1,configurable:!0}),Object.defineProperty(Camera.prototype,"upVector",{get:function(){return this._upVector},set:function(e){this._upVector=e},enumerable:!1,configurable:!0}),Camera.prototype.storeState=function(){return this._stateStored=!0,this._storedFov=this.fov,this},Camera.prototype._restoreStateValues=function(){return!!this._stateStored&&(this.fov=this._storedFov,!0)},Camera.prototype.restoreState=function(){return!!this._restoreStateValues()&&(this.onRestoreStateObservable.notifyObservers(this),!0)},Camera.prototype.getClassName=function(){return"Camera"},Camera.prototype.toString=function(e){var t="Name: "+this.name;if(t+=", type: "+this.getClassName(),this.animations)for(var r=0;r<this.animations.length;r++)t+=", animation[0]: "+this.animations[r].toString(e);return t},Object.defineProperty(Camera.prototype,"globalPosition",{get:function(){return this._globalPosition},enumerable:!1,configurable:!0}),Camera.prototype.getActiveMeshes=function(){return this._activeMeshes},Camera.prototype.isActiveMesh=function(e){return-1!==this._activeMeshes.indexOf(e)},Camera.prototype.isReady=function(t){if(void 0===t&&(t=!1),t)for(var r=0,n=this._postProcesses;r<n.length;r++){var i=n[r];if(i&&!i.isReady())return!1}return e.prototype.isReady.call(this,t)},Camera.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.position=new u["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.upVector=new u["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.mode=void 0,this._cache.minZ=void 0,this._cache.maxZ=void 0,this._cache.fov=void 0,this._cache.fovMode=void 0,this._cache.aspectRatio=void 0,this._cache.orthoLeft=void 0,this._cache.orthoRight=void 0,this._cache.orthoBottom=void 0,this._cache.orthoTop=void 0,this._cache.renderWidth=void 0,this._cache.renderHeight=void 0},Camera.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache.position.copyFrom(this.position),this._cache.upVector.copyFrom(this.upVector)},Camera.prototype._isSynchronized=function(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()},Camera.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronized.call(this)&&(this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent())},Camera.prototype._isSynchronizedProjectionMatrix=function(){var e=this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ;if(!e)return!1;var t=this.getEngine();return e=this.mode===Camera.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&this._cache.aspectRatio===t.getAspectRatio(this):this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===t.getRenderWidth()&&this._cache.renderHeight===t.getRenderHeight(),e},Camera.prototype.attachControl=function(e,t){},Camera.prototype.detachControl=function(e){},Camera.prototype.update=function(){this._checkInputs(),this.cameraRigMode!==Camera.RIG_MODE_NONE&&this._updateRigCameras()},Camera.prototype._checkInputs=function(){this.onAfterCheckInputsObservable.notifyObservers(this)},Object.defineProperty(Camera.prototype,"rigCameras",{get:function(){return this._rigCameras},enumerable:!1,configurable:!0}),Object.defineProperty(Camera.prototype,"rigPostProcess",{get:function(){return this._rigPostProcess},enumerable:!1,configurable:!0}),Camera.prototype._getFirstPostProcess=function(){for(var e=0;e<this._postProcesses.length;e++)if(null!==this._postProcesses[e])return this._postProcesses[e];return null},Camera.prototype._cascadePostProcessesToRigCams=function(){var e=this._getFirstPostProcess();e&&e.markTextureDirty();for(var t=0,r=this._rigCameras.length;t<r;t++){var n=this._rigCameras[t],i=n._rigPostProcess;if(i){var o="pass"===i.getEffectName();o&&(n.isIntermediate=0===this._postProcesses.length),n._postProcesses=this._postProcesses.slice(0).concat(i),i.markTextureDirty()}else n._postProcesses=this._postProcesses.slice(0)}},Camera.prototype.attachPostProcess=function(e,t){return void 0===t&&(t=null),!e.isReusable()&&this._postProcesses.indexOf(e)>-1?(l["Logger"].Error("You're trying to reuse a post process not defined as reusable."),0):(null==t||t<0?this._postProcesses.push(e):null===this._postProcesses[t]?this._postProcesses[t]=e:this._postProcesses.splice(t,0,e),this._cascadePostProcessesToRigCams(),this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty(),this._postProcesses.indexOf(e))},Camera.prototype.detachPostProcess=function(e){var t=this._postProcesses.indexOf(e);-1!==t&&(this._postProcesses[t]=null),this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty(),this._cascadePostProcessesToRigCams()},Camera.prototype.getWorldMatrix=function(){return this._isSynchronizedViewMatrix()||this.getViewMatrix(),this._worldMatrix},Camera.prototype._getViewMatrix=function(){return u["Matrix"].Identity()},Camera.prototype.getViewMatrix=function(e){return!e&&this._isSynchronizedViewMatrix()||(this.updateCache(),this._computedViewMatrix=this._getViewMatrix(),this._currentRenderId=this.getScene().getRenderId(),this._childUpdateId++,this._refreshFrustumPlanes=!0,this._cameraRigParams&&this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix),this.parent&&this.parent.onViewMatrixChangedObservable&&this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent),this.onViewMatrixChangedObservable.notifyObservers(this),this._computedViewMatrix.invertToRef(this._worldMatrix)),this._computedViewMatrix},Camera.prototype.freezeProjectionMatrix=function(e){this._doNotComputeProjectionMatrix=!0,void 0!==e&&(this._projectionMatrix=e)},Camera.prototype.unfreezeProjectionMatrix=function(){this._doNotComputeProjectionMatrix=!1},Camera.prototype.getProjectionMatrix=function(e){var t,r,n,i,o,s,a,c;if(this._doNotComputeProjectionMatrix||!e&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode,this._cache.minZ=this.minZ,this._cache.maxZ=this.maxZ,this._refreshFrustumPlanes=!0;var l=this.getEngine(),d=this.getScene();if(this.mode===Camera.PERSPECTIVE_CAMERA){this._cache.fov=this.fov,this._cache.fovMode=this.fovMode,this._cache.aspectRatio=l.getAspectRatio(this),this.minZ<=0&&(this.minZ=.1);var h=l.useReverseDepthBuffer,f=void 0;f=d.useRightHandedSystem?h?u["Matrix"].PerspectiveFovReverseRHToRef:u["Matrix"].PerspectiveFovRHToRef:h?u["Matrix"].PerspectiveFovReverseLHToRef:u["Matrix"].PerspectiveFovLHToRef,f(this.fov,l.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===Camera.FOVMODE_VERTICAL_FIXED)}else{var p=l.getRenderWidth()/2,m=l.getRenderHeight()/2;d.useRightHandedSystem?u["Matrix"].OrthoOffCenterRHToRef(null!==(t=this.orthoLeft)&&void 0!==t?t:-p,null!==(r=this.orthoRight)&&void 0!==r?r:p,null!==(n=this.orthoBottom)&&void 0!==n?n:-m,null!==(i=this.orthoTop)&&void 0!==i?i:m,this.minZ,this.maxZ,this._projectionMatrix):u["Matrix"].OrthoOffCenterLHToRef(null!==(o=this.orthoLeft)&&void 0!==o?o:-p,null!==(s=this.orthoRight)&&void 0!==s?s:p,null!==(a=this.orthoBottom)&&void 0!==a?a:-m,null!==(c=this.orthoTop)&&void 0!==c?c:m,this.minZ,this.maxZ,this._projectionMatrix),this._cache.orthoLeft=this.orthoLeft,this._cache.orthoRight=this.orthoRight,this._cache.orthoBottom=this.orthoBottom,this._cache.orthoTop=this.orthoTop,this._cache.renderWidth=l.getRenderWidth(),this._cache.renderHeight=l.getRenderHeight()}return this.onProjectionMatrixChangedObservable.notifyObservers(this),this._projectionMatrix},Camera.prototype.getTransformationMatrix=function(){return this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._transformMatrix},Camera.prototype._updateFrustumPlanes=function(){this._refreshFrustumPlanes&&(this.getTransformationMatrix(),this._frustumPlanes?p["Frustum"].GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=p["Frustum"].GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)},Camera.prototype.isInFrustum=function(e,t){if(void 0===t&&(t=!1),this._updateFrustumPlanes(),t&&this.rigCameras.length>0){var r=!1;return this.rigCameras.forEach((function(t){t._updateFrustumPlanes(),r=r||e.isInFrustum(t._frustumPlanes)})),r}return e.isInFrustum(this._frustumPlanes)},Camera.prototype.isCompletelyInFrustum=function(e){return this._updateFrustumPlanes(),e.isCompletelyInFrustum(this._frustumPlanes)},Camera.prototype.getForwardRay=function(e,t,r){throw void 0===e&&(e=100),h["_DevTools"].WarnImport("Ray")},Camera.prototype.getForwardRayToRef=function(e,t,r,n){throw void 0===t&&(t=100),h["_DevTools"].WarnImport("Ray")},Camera.prototype.dispose=function(t,r){void 0===r&&(r=!1),this.onViewMatrixChangedObservable.clear(),this.onProjectionMatrixChangedObservable.clear(),this.onAfterCheckInputsObservable.clear(),this.onRestoreStateObservable.clear(),this.inputs&&this.inputs.clear(),this.getScene().stopAnimation(this),this.getScene().removeCamera(this);while(this._rigCameras.length>0){var n=this._rigCameras.pop();n&&n.dispose()}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses=[];else if(this.cameraRigMode!==Camera.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses=[];else{var i=this._postProcesses.length;while(--i>=0){var o=this._postProcesses[i];o&&o.dispose(this)}}i=this.customRenderTargets.length;while(--i>=0)this.customRenderTargets[i].dispose();this.customRenderTargets=[],this._activeMeshes.dispose(),e.prototype.dispose.call(this,t,r)},Object.defineProperty(Camera.prototype,"isLeftCamera",{get:function(){return this._isLeftCamera},enumerable:!1,configurable:!0}),Object.defineProperty(Camera.prototype,"isRightCamera",{get:function(){return this._isRightCamera},enumerable:!1,configurable:!0}),Object.defineProperty(Camera.prototype,"leftCamera",{get:function(){return this._rigCameras.length<1?null:this._rigCameras[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Camera.prototype,"rightCamera",{get:function(){return this._rigCameras.length<2?null:this._rigCameras[1]},enumerable:!1,configurable:!0}),Camera.prototype.getLeftTarget=function(){return this._rigCameras.length<1?null:this._rigCameras[0].getTarget()},Camera.prototype.getRightTarget=function(){return this._rigCameras.length<2?null:this._rigCameras[1].getTarget()},Camera.prototype.setCameraRigMode=function(e,t){if(this.cameraRigMode!==e){while(this._rigCameras.length>0){var r=this._rigCameras.pop();r&&r.dispose()}if(this.cameraRigMode=e,this._cameraRigParams={},this._cameraRigParams.interaxialDistance=t.interaxialDistance||.0637,this._cameraRigParams.stereoHalfAngle=s["Tools"].ToRadians(this._cameraRigParams.interaxialDistance/.0637),this.cameraRigMode!==Camera.RIG_MODE_NONE){var n=this.createRigCamera(this.name+"_L",0);n&&(n._isLeftCamera=!0);var i=this.createRigCamera(this.name+"_R",1);i&&(i._isRightCamera=!0),n&&i&&(this._rigCameras.push(n),this._rigCameras.push(i))}switch(this.cameraRigMode){case Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH:Camera._setStereoscopicAnaglyphRigMode(this);break;case Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER:case Camera.RIG_MODE_STEREOSCOPIC_INTERLACED:Camera._setStereoscopicRigMode(this);break;case Camera.RIG_MODE_VR:Camera._setVRRigMode(this,t);break;case Camera.RIG_MODE_WEBVR:Camera._setWebVRRigMode(this,t);break}this._cascadePostProcessesToRigCams(),this.update()}},Camera._setStereoscopicRigMode=function(e){throw"Import Cameras/RigModes/stereoscopicRigMode before using stereoscopic rig mode"},Camera._setStereoscopicAnaglyphRigMode=function(e){throw"Import Cameras/RigModes/stereoscopicAnaglyphRigMode before using stereoscopic anaglyph rig mode"},Camera._setVRRigMode=function(e,t){throw"Import Cameras/RigModes/vrRigMode before using VR rig mode"},Camera._setWebVRRigMode=function(e,t){throw"Import Cameras/RigModes/WebVRRigMode before using Web VR rig mode"},Camera.prototype._getVRProjectionMatrix=function(){return u["Matrix"].PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,this._cameraRigParams.vrWorkMatrix),this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix),this._projectionMatrix},Camera.prototype._updateCameraRotationMatrix=function(){},Camera.prototype._updateWebVRCameraRotationMatrix=function(){},Camera.prototype._getWebVRProjectionMatrix=function(){return u["Matrix"].Identity()},Camera.prototype._getWebVRViewMatrix=function(){return u["Matrix"].Identity()},Camera.prototype.setCameraRigParameter=function(e,t){this._cameraRigParams||(this._cameraRigParams={}),this._cameraRigParams[e]=t,"interaxialDistance"===e&&(this._cameraRigParams.stereoHalfAngle=s["Tools"].ToRadians(t/.0637))},Camera.prototype.createRigCamera=function(e,t){return null},Camera.prototype._updateRigCameras=function(){for(var e=0;e<this._rigCameras.length;e++)this._rigCameras[e].minZ=this.minZ,this._rigCameras[e].maxZ=this.maxZ,this._rigCameras[e].fov=this.fov,this._rigCameras[e].upVector.copyFrom(this.upVector);this.cameraRigMode===Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=this.viewport)},Camera.prototype._setupInputs=function(){},Camera.prototype.serialize=function(){var e=i["SerializationHelper"].Serialize(this);return e.type=this.getClassName(),this.parent&&(e.parentId=this.parent.id),this.inputs&&this.inputs.serialize(e),i["SerializationHelper"].AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},Camera.prototype.clone=function(e){return i["SerializationHelper"].Clone(Camera.GetConstructorFromName(this.getClassName(),e,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this)},Camera.prototype.getDirection=function(e){var t=u["Vector3"].Zero();return this.getDirectionToRef(e,t),t},Object.defineProperty(Camera.prototype,"absoluteRotation",{get:function(){var e=u["Quaternion"].Zero();return this.getWorldMatrix().decompose(void 0,e),e},enumerable:!1,configurable:!0}),Camera.prototype.getDirectionToRef=function(e,t){u["Vector3"].TransformNormalToRef(e,this.getWorldMatrix(),t)},Camera.GetConstructorFromName=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!0);var o=c["Node"].Construct(e,t,r,{interaxial_distance:n,isStereoscopicSideBySide:i});return o||function(){return Camera._createDefaultParsedCamera(t,r)}},Camera.prototype.computeWorldMatrix=function(){return this.getWorldMatrix()},Camera.Parse=function(e,t){var r=e.type,n=Camera.GetConstructorFromName(r,e.name,t,e.interaxial_distance,e.isStereoscopicSideBySide),o=i["SerializationHelper"].Parse(n,e,t);if(e.parentId&&(o._waitingParentId=e.parentId),o.inputs&&(o.inputs.parse(e),o._setupInputs()),e.upVector&&(o.upVector=u["Vector3"].FromArray(e.upVector)),o.setPosition&&(o.position.copyFromFloats(0,0,0),o.setPosition(u["Vector3"].FromArray(e.position))),e.target&&o.setTarget&&o.setTarget(u["Vector3"].FromArray(e.target)),e.cameraRigMode){var s=e.interaxial_distance?{interaxialDistance:e.interaxial_distance}:{};o.setCameraRigMode(e.cameraRigMode,s)}if(e.animations){for(var a=0;a<e.animations.length;a++){var l=e.animations[a],h=d["_TypeStore"].GetClass("BABYLON.Animation");h&&o.animations.push(h.Parse(l))}c["Node"].ParseAnimationRanges(o,e,t)}return e.autoAnimate&&t.beginAnimation(o,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),o},Camera._createDefaultParsedCamera=function(e,t){throw h["_DevTools"].WarnImport("UniversalCamera")},Camera.PERSPECTIVE_CAMERA=0,Camera.ORTHOGRAPHIC_CAMERA=1,Camera.FOVMODE_VERTICAL_FIXED=0,Camera.FOVMODE_HORIZONTAL_FIXED=1,Camera.RIG_MODE_NONE=0,Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER=13,Camera.RIG_MODE_STEREOSCOPIC_INTERLACED=14,Camera.RIG_MODE_VR=20,Camera.RIG_MODE_WEBVR=21,Camera.RIG_MODE_CUSTOM=22,Camera.ForceAttachControlToAlwaysPreventDefault=!1,Object(n["__decorate"])([Object(i["serializeAsVector3"])("position")],Camera.prototype,"_position",void 0),Object(n["__decorate"])([Object(i["serializeAsVector3"])("upVector")],Camera.prototype,"_upVector",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"orthoLeft",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"orthoRight",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"orthoBottom",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"orthoTop",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"fov",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"minZ",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"maxZ",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"inertia",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"mode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"layerMask",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"fovMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"cameraRigMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"interaxialDistance",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Camera.prototype,"isStereoscopicSideBySide",void 0),Camera}(c["Node"])},"./node_modules/@babylonjs/core/Cameras/cameraInputsManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CameraInputTypes",(function(){return s})),r.d(t,"CameraInputsManager",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Misc/logger.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Cameras/camera.js"),s={},a=function(){function CameraInputsManager(e){this.attachedToElement=!1,this.attached={},this.camera=e,this.checkInputs=function(){}}return CameraInputsManager.prototype.add=function(e){var t=e.getSimpleName();this.attached[t]?n["Logger"].Warn("camera input of type "+t+" already exists on camera"):(this.attached[t]=e,e.camera=this.camera,e.checkInputs&&(this.checkInputs=this._addCheckInputs(e.checkInputs.bind(e))),this.attachedToElement&&e.attachControl())},CameraInputsManager.prototype.remove=function(e){for(var t in this.attached){var r=this.attached[t];r===e&&(r.detachControl(),r.camera=null,delete this.attached[t],this.rebuildInputCheck())}},CameraInputsManager.prototype.removeByType=function(e){for(var t in this.attached){var r=this.attached[t];r.getClassName()===e&&(r.detachControl(),r.camera=null,delete this.attached[t],this.rebuildInputCheck())}},CameraInputsManager.prototype._addCheckInputs=function(e){var t=this.checkInputs;return function(){t(),e()}},CameraInputsManager.prototype.attachInput=function(e){this.attachedToElement&&e.attachControl(this.noPreventDefault)},CameraInputsManager.prototype.attachElement=function(e){if(void 0===e&&(e=!1),!this.attachedToElement)for(var t in e=!o["Camera"].ForceAttachControlToAlwaysPreventDefault&&e,this.attachedToElement=!0,this.noPreventDefault=e,this.attached)this.attached[t].attachControl(e)},CameraInputsManager.prototype.detachElement=function(e){for(var t in void 0===e&&(e=!1),this.attached)this.attached[t].detachControl(),e&&(this.attached[t].camera=null);this.attachedToElement=!1},CameraInputsManager.prototype.rebuildInputCheck=function(){for(var e in this.checkInputs=function(){},this.attached){var t=this.attached[e];t.checkInputs&&(this.checkInputs=this._addCheckInputs(t.checkInputs.bind(t)))}},CameraInputsManager.prototype.clear=function(){this.attachedToElement&&this.detachElement(!0),this.attached={},this.attachedToElement=!1,this.checkInputs=function(){}},CameraInputsManager.prototype.serialize=function(e){var t={};for(var r in this.attached){var n=this.attached[r],o=i["SerializationHelper"].Serialize(n);t[n.getClassName()]=o}e.inputsmgr=t},CameraInputsManager.prototype.parse=function(e){var t=e.inputsmgr;if(t)for(var r in this.clear(),t){var n=s[r];if(n){var o=t[r],a=i["SerializationHelper"].Parse((function(){return new n}),o,null);this.add(a)}}else for(var r in this.attached){n=s[this.attached[r].getClassName()];if(n){a=i["SerializationHelper"].Parse((function(){return new n}),e,null);this.remove(this.attached[r]),this.add(a)}}},CameraInputsManager}()},"./node_modules/@babylonjs/core/Cameras/targetCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TargetCamera",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Cameras/camera.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),u=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),c=function(e){function TargetCamera(t,r,n,i){void 0===i&&(i=!0);var o=e.call(this,t,r,n,i)||this;return o._tmpUpVector=s["Vector3"].Zero(),o._tmpTargetVector=s["Vector3"].Zero(),o.cameraDirection=new s["Vector3"](0,0,0),o.cameraRotation=new s["Vector2"](0,0),o.ignoreParentScaling=!1,o.updateUpVectorFromRotation=!1,o._tmpQuaternion=new s["Quaternion"],o.rotation=new s["Vector3"](0,0,0),o.speed=2,o.noRotationConstraint=!1,o.invertRotation=!1,o.inverseRotationSpeed=.2,o.lockedTarget=null,o._currentTarget=s["Vector3"].Zero(),o._initialFocalDistance=1,o._viewMatrix=s["Matrix"].Zero(),o._camMatrix=s["Matrix"].Zero(),o._cameraTransformMatrix=s["Matrix"].Zero(),o._cameraRotationMatrix=s["Matrix"].Zero(),o._referencePoint=new s["Vector3"](0,0,1),o._transformedReferencePoint=s["Vector3"].Zero(),o._defaultUp=s["Vector3"].Up(),o._cachedRotationZ=0,o._cachedQuaternionRotationZ=0,o}return Object(n["__extends"])(TargetCamera,e),TargetCamera.prototype.getFrontPosition=function(e){this.getWorldMatrix();var t=this.getTarget().subtract(this.position);return t.normalize(),t.scaleInPlace(e),this.globalPosition.add(t)},TargetCamera.prototype._getLockedTargetPosition=function(){return this.lockedTarget?(this.lockedTarget.absolutePosition&&this.lockedTarget.computeWorldMatrix(),this.lockedTarget.absolutePosition||this.lockedTarget):null},TargetCamera.prototype.storeState=function(){return this._storedPosition=this.position.clone(),this._storedRotation=this.rotation.clone(),this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone()),e.prototype.storeState.call(this)},TargetCamera.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.position=this._storedPosition.clone(),this.rotation=this._storedRotation.clone(),this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone()),this.cameraDirection.copyFromFloats(0,0,0),this.cameraRotation.copyFromFloats(0,0),!0)},TargetCamera.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.lockedTarget=new s["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotation=new s["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotationQuaternion=new s["Quaternion"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},TargetCamera.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this);var r=this._getLockedTargetPosition();r?this._cache.lockedTarget?this._cache.lockedTarget.copyFrom(r):this._cache.lockedTarget=r.clone():this._cache.lockedTarget=null,this._cache.rotation.copyFrom(this.rotation),this.rotationQuaternion&&this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)},TargetCamera.prototype._isSynchronizedViewMatrix=function(){if(!e.prototype._isSynchronizedViewMatrix.call(this))return!1;var t=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(t):!t)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))},TargetCamera.prototype._computeLocalCameraSpeed=function(){var e=this.getEngine();return this.speed*Math.sqrt(e.getDeltaTime()/(100*e.getFps()))},TargetCamera.prototype.setTarget=function(e){this.upVector.normalize(),this._initialFocalDistance=e.subtract(this.position).length(),this.position.z===e.z&&(this.position.z+=a["Epsilon"]),this._referencePoint.normalize().scaleInPlace(this._initialFocalDistance),s["Matrix"].LookAtLHToRef(this.position,e,this._defaultUp,this._camMatrix),this._camMatrix.invert(),this.rotation.x=Math.atan(this._camMatrix.m[6]/this._camMatrix.m[10]);var t=e.subtract(this.position);t.x>=0?this.rotation.y=-Math.atan(t.z/t.x)+Math.PI/2:this.rotation.y=-Math.atan(t.z/t.x)-Math.PI/2,this.rotation.z=0,isNaN(this.rotation.x)&&(this.rotation.x=0),isNaN(this.rotation.y)&&(this.rotation.y=0),isNaN(this.rotation.z)&&(this.rotation.z=0),this.rotationQuaternion&&s["Quaternion"].RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)},Object.defineProperty(TargetCamera.prototype,"target",{get:function(){return this.getTarget()},set:function(e){this.setTarget(e)},enumerable:!1,configurable:!0}),TargetCamera.prototype.getTarget=function(){return this._currentTarget},TargetCamera.prototype._decideIfNeedsToMove=function(){return Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},TargetCamera.prototype._updatePosition=function(){if(this.parent)return this.parent.getWorldMatrix().invertToRef(s["TmpVectors"].Matrix[0]),s["Vector3"].TransformNormalToRef(this.cameraDirection,s["TmpVectors"].Matrix[0],s["TmpVectors"].Vector3[0]),void this.position.addInPlace(s["TmpVectors"].Vector3[0]);this.position.addInPlace(this.cameraDirection)},TargetCamera.prototype._checkInputs=function(){var t=this.invertRotation?-this.inverseRotationSpeed:1,r=this._decideIfNeedsToMove(),n=Math.abs(this.cameraRotation.x)>0||Math.abs(this.cameraRotation.y)>0;if(r&&this._updatePosition(),n){if(this.rotationQuaternion&&this.rotationQuaternion.toEulerAnglesToRef(this.rotation),this.rotation.x+=this.cameraRotation.x*t,this.rotation.y+=this.cameraRotation.y*t,!this.noRotationConstraint){var i=1.570796;this.rotation.x>i&&(this.rotation.x=i),this.rotation.x<-i&&(this.rotation.x=-i)}if(this.rotationQuaternion){var o=this.rotation.lengthSquared();o&&s["Quaternion"].RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)}}r&&(Math.abs(this.cameraDirection.x)<this.speed*a["Epsilon"]&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*a["Epsilon"]&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*a["Epsilon"]&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia)),n&&(Math.abs(this.cameraRotation.x)<this.speed*a["Epsilon"]&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*a["Epsilon"]&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia)),e.prototype._checkInputs.call(this)},TargetCamera.prototype._updateCameraRotationMatrix=function(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):s["Matrix"].RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix)},TargetCamera.prototype._rotateUpVectorWithCameraRotationMatrix=function(){return s["Vector3"].TransformNormalToRef(this._defaultUp,this._cameraRotationMatrix,this.upVector),this},TargetCamera.prototype._getViewMatrix=function(){return this.lockedTarget&&this.setTarget(this._getLockedTargetPosition()),this._updateCameraRotationMatrix(),this.rotationQuaternion&&this._cachedQuaternionRotationZ!=this.rotationQuaternion.z?(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedQuaternionRotationZ=this.rotationQuaternion.z):this._cachedRotationZ!=this.rotation.z&&(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedRotationZ=this.rotation.z),s["Vector3"].TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),this.updateUpVectorFromRotation&&(this.rotationQuaternion?u["Axis"].Y.rotateByQuaternionToRef(this.rotationQuaternion,this.upVector):(s["Quaternion"].FromEulerVectorToRef(this.rotation,this._tmpQuaternion),u["Axis"].Y.rotateByQuaternionToRef(this._tmpQuaternion,this.upVector))),this._computeViewMatrix(this.position,this._currentTarget,this.upVector),this._viewMatrix},TargetCamera.prototype._computeViewMatrix=function(e,t,r){if(this.ignoreParentScaling){if(this.parent){var n=this.parent.getWorldMatrix();s["Vector3"].TransformCoordinatesToRef(e,n,this._globalPosition),s["Vector3"].TransformCoordinatesToRef(t,n,this._tmpTargetVector),s["Vector3"].TransformNormalToRef(r,n,this._tmpUpVector),this._markSyncedWithParent()}else this._globalPosition.copyFrom(e),this._tmpTargetVector.copyFrom(t),this._tmpUpVector.copyFrom(r);this.getScene().useRightHandedSystem?s["Matrix"].LookAtRHToRef(this._globalPosition,this._tmpTargetVector,this._tmpUpVector,this._viewMatrix):s["Matrix"].LookAtLHToRef(this._globalPosition,this._tmpTargetVector,this._tmpUpVector,this._viewMatrix)}else if(this.getScene().useRightHandedSystem?s["Matrix"].LookAtRHToRef(e,t,r,this._viewMatrix):s["Matrix"].LookAtLHToRef(e,t,r,this._viewMatrix),this.parent){n=this.parent.getWorldMatrix();this._viewMatrix.invert(),this._viewMatrix.multiplyToRef(n,this._viewMatrix),this._viewMatrix.getTranslationToRef(this._globalPosition),this._viewMatrix.invert(),this._markSyncedWithParent()}else this._globalPosition.copyFrom(e)},TargetCamera.prototype.createRigCamera=function(e,t){if(this.cameraRigMode!==o["Camera"].RIG_MODE_NONE){var r=new TargetCamera(e,this.position.clone(),this.getScene());return r.isRigCamera=!0,r.rigParent=this,this.cameraRigMode!==o["Camera"].RIG_MODE_VR&&this.cameraRigMode!==o["Camera"].RIG_MODE_WEBVR||(this.rotationQuaternion||(this.rotationQuaternion=new s["Quaternion"]),r._cameraRigParams={},r.rotationQuaternion=new s["Quaternion"]),r}return null},TargetCamera.prototype._updateRigCameras=function(){var t=this._rigCameras[0],r=this._rigCameras[1];switch(this.computeWorldMatrix(),this.cameraRigMode){case o["Camera"].RIG_MODE_STEREOSCOPIC_ANAGLYPH:case o["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case o["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case o["Camera"].RIG_MODE_STEREOSCOPIC_OVERUNDER:case o["Camera"].RIG_MODE_STEREOSCOPIC_INTERLACED:var n=this.cameraRigMode===o["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1,i=this.cameraRigMode===o["Camera"].RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*n,t),this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*i,r);break;case o["Camera"].RIG_MODE_VR:t.rotationQuaternion?(t.rotationQuaternion.copyFrom(this.rotationQuaternion),r.rotationQuaternion.copyFrom(this.rotationQuaternion)):(t.rotation.copyFrom(this.rotation),r.rotation.copyFrom(this.rotation)),t.position.copyFrom(this.position),r.position.copyFrom(this.position);break}e.prototype._updateRigCameras.call(this)},TargetCamera.prototype._getRigCamPositionAndTarget=function(e,t){var r=this.getTarget();r.subtractToRef(this.position,TargetCamera._TargetFocalPoint),TargetCamera._TargetFocalPoint.normalize().scaleInPlace(this._initialFocalDistance);var n=TargetCamera._TargetFocalPoint.addInPlace(this.position);s["Matrix"].TranslationToRef(-n.x,-n.y,-n.z,TargetCamera._TargetTransformMatrix),TargetCamera._TargetTransformMatrix.multiplyToRef(s["Matrix"].RotationAxis(t.upVector,e),TargetCamera._RigCamTransformMatrix),s["Matrix"].TranslationToRef(n.x,n.y,n.z,TargetCamera._TargetTransformMatrix),TargetCamera._RigCamTransformMatrix.multiplyToRef(TargetCamera._TargetTransformMatrix,TargetCamera._RigCamTransformMatrix),s["Vector3"].TransformCoordinatesToRef(this.position,TargetCamera._RigCamTransformMatrix,t.position),t.setTarget(n)},TargetCamera.prototype.getClassName=function(){return"TargetCamera"},TargetCamera._RigCamTransformMatrix=new s["Matrix"],TargetCamera._TargetTransformMatrix=new s["Matrix"],TargetCamera._TargetFocalPoint=new s["Vector3"],Object(n["__decorate"])([Object(i["serializeAsVector3"])()],TargetCamera.prototype,"rotation",void 0),Object(n["__decorate"])([Object(i["serialize"])()],TargetCamera.prototype,"speed",void 0),Object(n["__decorate"])([Object(i["serializeAsMeshReference"])("lockedTargetId")],TargetCamera.prototype,"lockedTarget",void 0),TargetCamera}(o["Camera"])},"./node_modules/@babylonjs/core/Collisions/intersectionInfo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"IntersectionInfo",(function(){return n}));var n=function(){function IntersectionInfo(e,t,r){this.bu=e,this.bv=t,this.distance=r,this.faceId=0,this.subMeshId=0}return IntersectionInfo}()},"./node_modules/@babylonjs/core/Collisions/meshCollisionData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"_MeshCollisionData",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=function(){function _MeshCollisionData(){this._checkCollisions=!1,this._collisionMask=-1,this._collisionGroup=-1,this._surroundingMeshes=null,this._collider=null,this._oldPositionForCollisions=new n["Vector3"](0,0,0),this._diffPositionForCollisions=new n["Vector3"](0,0,0),this._collisionResponse=!0}return _MeshCollisionData}()},"./node_modules/@babylonjs/core/Collisions/pickingInfo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PickingInfo",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),o=function(){function PickingInfo(){this._pickingUnavailable=!1,this.hit=!1,this.distance=0,this.pickedPoint=null,this.pickedMesh=null,this.bu=0,this.bv=0,this.faceId=-1,this.subMeshFaceId=-1,this.subMeshId=0,this.pickedSprite=null,this.thinInstanceIndex=-1,this.originMesh=null,this.ray=null}return PickingInfo.prototype.getNormal=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!0),!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(i["VertexBuffer"].NormalKind))return null;var r,o=this.pickedMesh.getIndices();if(!o)return null;if(t){var s=this.pickedMesh.getVerticesData(i["VertexBuffer"].NormalKind),a=n["Vector3"].FromArray(s,3*o[3*this.faceId]),u=n["Vector3"].FromArray(s,3*o[3*this.faceId+1]),c=n["Vector3"].FromArray(s,3*o[3*this.faceId+2]);a=a.scale(this.bu),u=u.scale(this.bv),c=c.scale(1-this.bu-this.bv),r=new n["Vector3"](a.x+u.x+c.x,a.y+u.y+c.y,a.z+u.z+c.z)}else{var l=this.pickedMesh.getVerticesData(i["VertexBuffer"].PositionKind),d=n["Vector3"].FromArray(l,3*o[3*this.faceId]),h=n["Vector3"].FromArray(l,3*o[3*this.faceId+1]),f=n["Vector3"].FromArray(l,3*o[3*this.faceId+2]),p=d.subtract(h),m=f.subtract(h);r=n["Vector3"].Cross(p,m)}if(e){var _=this.pickedMesh.getWorldMatrix();this.pickedMesh.nonUniformScaling&&(n["TmpVectors"].Matrix[0].copyFrom(_),_=n["TmpVectors"].Matrix[0],_.setTranslationFromFloats(0,0,0),_.invert(),_.transposeToRef(n["TmpVectors"].Matrix[1]),_=n["TmpVectors"].Matrix[1]),r=n["Vector3"].TransformNormal(r,_)}return r.normalize(),r},PickingInfo.prototype.getTextureCoordinates=function(){if(!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(i["VertexBuffer"].UVKind))return null;var e=this.pickedMesh.getIndices();if(!e)return null;var t=this.pickedMesh.getVerticesData(i["VertexBuffer"].UVKind);if(!t)return null;var r=n["Vector2"].FromArray(t,2*e[3*this.faceId]),o=n["Vector2"].FromArray(t,2*e[3*this.faceId+1]),s=n["Vector2"].FromArray(t,2*e[3*this.faceId+2]);return r=r.scale(this.bu),o=o.scale(this.bv),s=s.scale(1-this.bu-this.bv),new n["Vector2"](r.x+o.x+s.x,r.y+o.y+s.y)},PickingInfo}()},"./node_modules/@babylonjs/core/Culling/boundingBox.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BoundingBox",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),s=function(){function BoundingBox(e,t,r){this.vectors=n["ArrayTools"].BuildArray(8,i["Vector3"].Zero),this.center=i["Vector3"].Zero(),this.centerWorld=i["Vector3"].Zero(),this.extendSize=i["Vector3"].Zero(),this.extendSizeWorld=i["Vector3"].Zero(),this.directions=n["ArrayTools"].BuildArray(3,i["Vector3"].Zero),this.vectorsWorld=n["ArrayTools"].BuildArray(8,i["Vector3"].Zero),this.minimumWorld=i["Vector3"].Zero(),this.maximumWorld=i["Vector3"].Zero(),this.minimum=i["Vector3"].Zero(),this.maximum=i["Vector3"].Zero(),this.reConstruct(e,t,r)}return BoundingBox.prototype.reConstruct=function(e,t,r){var n=e.x,o=e.y,s=e.z,a=t.x,u=t.y,c=t.z,l=this.vectors;this.minimum.copyFromFloats(n,o,s),this.maximum.copyFromFloats(a,u,c),l[0].copyFromFloats(n,o,s),l[1].copyFromFloats(a,u,c),l[2].copyFromFloats(a,o,s),l[3].copyFromFloats(n,u,s),l[4].copyFromFloats(n,o,c),l[5].copyFromFloats(a,u,s),l[6].copyFromFloats(n,u,c),l[7].copyFromFloats(a,o,c),t.addToRef(e,this.center).scaleInPlace(.5),t.subtractToRef(e,this.extendSize).scaleInPlace(.5),this._worldMatrix=r||i["Matrix"].IdentityReadOnly,this._update(this._worldMatrix)},BoundingBox.prototype.scale=function(e){var t=BoundingBox.TmpVector3,r=this.maximum.subtractToRef(this.minimum,t[0]),n=r.length();r.normalizeFromLength(n);var i=n*e,o=r.scaleInPlace(.5*i),s=this.center.subtractToRef(o,t[1]),a=this.center.addToRef(o,t[2]);return this.reConstruct(s,a,this._worldMatrix),this},BoundingBox.prototype.getWorldMatrix=function(){return this._worldMatrix},BoundingBox.prototype._update=function(e){var t=this.minimumWorld,r=this.maximumWorld,n=this.directions,o=this.vectorsWorld,s=this.vectors;if(e.isIdentity()){t.copyFrom(this.minimum),r.copyFrom(this.maximum);for(a=0;a<8;++a)o[a].copyFrom(s[a]);this.extendSizeWorld.copyFrom(this.extendSize),this.centerWorld.copyFrom(this.center)}else{t.setAll(Number.MAX_VALUE),r.setAll(-Number.MAX_VALUE);for(var a=0;a<8;++a){var u=o[a];i["Vector3"].TransformCoordinatesToRef(s[a],e,u),t.minimizeInPlace(u),r.maximizeInPlace(u)}r.subtractToRef(t,this.extendSizeWorld).scaleInPlace(.5),r.addToRef(t,this.centerWorld).scaleInPlace(.5)}i["Vector3"].FromArrayToRef(e.m,0,n[0]),i["Vector3"].FromArrayToRef(e.m,4,n[1]),i["Vector3"].FromArrayToRef(e.m,8,n[2]),this._worldMatrix=e},BoundingBox.prototype.isInFrustum=function(e){return BoundingBox.IsInFrustum(this.vectorsWorld,e)},BoundingBox.prototype.isCompletelyInFrustum=function(e){return BoundingBox.IsCompletelyInFrustum(this.vectorsWorld,e)},BoundingBox.prototype.intersectsPoint=function(e){var t=this.minimumWorld,r=this.maximumWorld,n=t.x,i=t.y,s=t.z,a=r.x,u=r.y,c=r.z,l=e.x,d=e.y,h=e.z,f=-o["Epsilon"];return!(a-l<f||f>l-n)&&(!(u-d<f||f>d-i)&&!(c-h<f||f>h-s))},BoundingBox.prototype.intersectsSphere=function(e){return BoundingBox.IntersectsSphere(this.minimumWorld,this.maximumWorld,e.centerWorld,e.radiusWorld)},BoundingBox.prototype.intersectsMinMax=function(e,t){var r=this.minimumWorld,n=this.maximumWorld,i=r.x,o=r.y,s=r.z,a=n.x,u=n.y,c=n.z,l=e.x,d=e.y,h=e.z,f=t.x,p=t.y,m=t.z;return!(a<l||i>f)&&(!(u<d||o>p)&&!(c<h||s>m))},BoundingBox.Intersects=function(e,t){return e.intersectsMinMax(t.minimumWorld,t.maximumWorld)},BoundingBox.IntersectsSphere=function(e,t,r,n){var o=BoundingBox.TmpVector3[0];i["Vector3"].ClampToRef(r,e,t,o);var s=i["Vector3"].DistanceSquared(r,o);return s<=n*n},BoundingBox.IsCompletelyInFrustum=function(e,t){for(var r=0;r<6;++r)for(var n=t[r],i=0;i<8;++i)if(n.dotCoordinate(e[i])<0)return!1;return!0},BoundingBox.IsInFrustum=function(e,t){for(var r=0;r<6;++r){for(var n=!0,i=t[r],o=0;o<8;++o)if(i.dotCoordinate(e[o])>=0){n=!1;break}if(n)return!1}return!0},BoundingBox.TmpVector3=n["ArrayTools"].BuildArray(3,i["Vector3"].Zero),BoundingBox}()},"./node_modules/@babylonjs/core/Culling/boundingInfo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BoundingInfo",(function(){return c}));var n=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Culling/boundingBox.js"),s=r("./node_modules/@babylonjs/core/Culling/boundingSphere.js"),a={min:0,max:0},u={min:0,max:0},computeBoxExtents=function(e,t,r){var n=i["Vector3"].Dot(t.centerWorld,e),o=Math.abs(i["Vector3"].Dot(t.directions[0],e))*t.extendSize.x,s=Math.abs(i["Vector3"].Dot(t.directions[1],e))*t.extendSize.y,a=Math.abs(i["Vector3"].Dot(t.directions[2],e))*t.extendSize.z,u=o+s+a;r.min=n-u,r.max=n+u},axisOverlap=function(e,t,r){return computeBoxExtents(e,t,a),computeBoxExtents(e,r,u),!(a.min>u.max||u.min>a.max)},c=function(){function BoundingInfo(e,t,r){this._isLocked=!1,this.boundingBox=new o["BoundingBox"](e,t,r),this.boundingSphere=new s["BoundingSphere"](e,t,r)}return BoundingInfo.prototype.reConstruct=function(e,t,r){this.boundingBox.reConstruct(e,t,r),this.boundingSphere.reConstruct(e,t,r)},Object.defineProperty(BoundingInfo.prototype,"minimum",{get:function(){return this.boundingBox.minimum},enumerable:!1,configurable:!0}),Object.defineProperty(BoundingInfo.prototype,"maximum",{get:function(){return this.boundingBox.maximum},enumerable:!1,configurable:!0}),Object.defineProperty(BoundingInfo.prototype,"isLocked",{get:function(){return this._isLocked},set:function(e){this._isLocked=e},enumerable:!1,configurable:!0}),BoundingInfo.prototype.update=function(e){this._isLocked||(this.boundingBox._update(e),this.boundingSphere._update(e))},BoundingInfo.prototype.centerOn=function(e,t){var r=BoundingInfo.TmpVector3[0].copyFrom(e).subtractInPlace(t),n=BoundingInfo.TmpVector3[1].copyFrom(e).addInPlace(t);return this.boundingBox.reConstruct(r,n,this.boundingBox.getWorldMatrix()),this.boundingSphere.reConstruct(r,n,this.boundingBox.getWorldMatrix()),this},BoundingInfo.prototype.scale=function(e){return this.boundingBox.scale(e),this.boundingSphere.scale(e),this},BoundingInfo.prototype.isInFrustum=function(e,t){void 0===t&&(t=0);var r=2===t||3===t;if(r&&this.boundingSphere.isCenterInFrustum(e))return!0;if(!this.boundingSphere.isInFrustum(e))return!1;var n=1===t||3===t;return!!n||this.boundingBox.isInFrustum(e)},Object.defineProperty(BoundingInfo.prototype,"diagonalLength",{get:function(){var e=this.boundingBox,t=e.maximumWorld.subtractToRef(e.minimumWorld,BoundingInfo.TmpVector3[0]);return t.length()},enumerable:!1,configurable:!0}),BoundingInfo.prototype.isCompletelyInFrustum=function(e){return this.boundingBox.isCompletelyInFrustum(e)},BoundingInfo.prototype._checkCollision=function(e){return e._canDoCollision(this.boundingSphere.centerWorld,this.boundingSphere.radiusWorld,this.boundingBox.minimumWorld,this.boundingBox.maximumWorld)},BoundingInfo.prototype.intersectsPoint=function(e){return!!this.boundingSphere.centerWorld&&(!!this.boundingSphere.intersectsPoint(e)&&!!this.boundingBox.intersectsPoint(e))},BoundingInfo.prototype.intersects=function(e,t){if(!s["BoundingSphere"].Intersects(this.boundingSphere,e.boundingSphere))return!1;if(!o["BoundingBox"].Intersects(this.boundingBox,e.boundingBox))return!1;if(!t)return!0;var r=this.boundingBox,n=e.boundingBox;return!!axisOverlap(r.directions[0],r,n)&&(!!axisOverlap(r.directions[1],r,n)&&(!!axisOverlap(r.directions[2],r,n)&&(!!axisOverlap(n.directions[0],r,n)&&(!!axisOverlap(n.directions[1],r,n)&&(!!axisOverlap(n.directions[2],r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[0],n.directions[0]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[0],n.directions[1]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[0],n.directions[2]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[1],n.directions[0]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[1],n.directions[1]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[1],n.directions[2]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[2],n.directions[0]),r,n)&&(!!axisOverlap(i["Vector3"].Cross(r.directions[2],n.directions[1]),r,n)&&!!axisOverlap(i["Vector3"].Cross(r.directions[2],n.directions[2]),r,n))))))))))))))},BoundingInfo.TmpVector3=n["ArrayTools"].BuildArray(2,i["Vector3"].Zero),BoundingInfo}()},"./node_modules/@babylonjs/core/Culling/boundingSphere.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BoundingSphere",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=function(){function BoundingSphere(e,t,r){this.center=i["Vector3"].Zero(),this.centerWorld=i["Vector3"].Zero(),this.minimum=i["Vector3"].Zero(),this.maximum=i["Vector3"].Zero(),this.reConstruct(e,t,r)}return BoundingSphere.prototype.reConstruct=function(e,t,r){this.minimum.copyFrom(e),this.maximum.copyFrom(t);var n=i["Vector3"].Distance(e,t);t.addToRef(e,this.center).scaleInPlace(.5),this.radius=.5*n,this._update(r||i["Matrix"].IdentityReadOnly)},BoundingSphere.prototype.scale=function(e){var t=this.radius*e,r=BoundingSphere.TmpVector3,n=r[0].setAll(t),i=this.center.subtractToRef(n,r[1]),o=this.center.addToRef(n,r[2]);return this.reConstruct(i,o,this._worldMatrix),this},BoundingSphere.prototype.getWorldMatrix=function(){return this._worldMatrix},BoundingSphere.prototype._update=function(e){if(e.isIdentity())this.centerWorld.copyFrom(this.center),this.radiusWorld=this.radius;else{i["Vector3"].TransformCoordinatesToRef(this.center,e,this.centerWorld);var t=BoundingSphere.TmpVector3[0];i["Vector3"].TransformNormalFromFloatsToRef(1,1,1,e,t),this.radiusWorld=Math.max(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z))*this.radius}},BoundingSphere.prototype.isInFrustum=function(e){for(var t=this.centerWorld,r=this.radiusWorld,n=0;n<6;n++)if(e[n].dotCoordinate(t)<=-r)return!1;return!0},BoundingSphere.prototype.isCenterInFrustum=function(e){for(var t=this.centerWorld,r=0;r<6;r++)if(e[r].dotCoordinate(t)<0)return!1;return!0},BoundingSphere.prototype.intersectsPoint=function(e){var t=i["Vector3"].DistanceSquared(this.centerWorld,e);return!(this.radiusWorld*this.radiusWorld<t)},BoundingSphere.Intersects=function(e,t){var r=i["Vector3"].DistanceSquared(e.centerWorld,t.centerWorld),n=e.radiusWorld+t.radiusWorld;return!(n*n<r)},BoundingSphere.TmpVector3=n["ArrayTools"].BuildArray(3,i["Vector3"].Zero),BoundingSphere}()},"./node_modules/@babylonjs/core/Culling/ray.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Ray",(function(){return c}));var n=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Collisions/pickingInfo.js"),s=r("./node_modules/@babylonjs/core/Collisions/intersectionInfo.js"),a=r("./node_modules/@babylonjs/core/scene.js"),u=r("./node_modules/@babylonjs/core/Cameras/camera.js"),c=function(){function Ray(e,t,r){void 0===r&&(r=Number.MAX_VALUE),this.origin=e,this.direction=t,this.length=r}return Ray.prototype.intersectsBoxMinMax=function(e,t,r){void 0===r&&(r=0);var n,i,o,s,a=Ray._TmpVector3[0].copyFromFloats(e.x-r,e.y-r,e.z-r),u=Ray._TmpVector3[1].copyFromFloats(t.x+r,t.y+r,t.z+r),c=0,l=Number.MAX_VALUE;if(Math.abs(this.direction.x)<1e-7){if(this.origin.x<a.x||this.origin.x>u.x)return!1}else if(n=1/this.direction.x,i=(a.x-this.origin.x)*n,o=(u.x-this.origin.x)*n,o===-1/0&&(o=1/0),i>o&&(s=i,i=o,o=s),c=Math.max(i,c),l=Math.min(o,l),c>l)return!1;if(Math.abs(this.direction.y)<1e-7){if(this.origin.y<a.y||this.origin.y>u.y)return!1}else if(n=1/this.direction.y,i=(a.y-this.origin.y)*n,o=(u.y-this.origin.y)*n,o===-1/0&&(o=1/0),i>o&&(s=i,i=o,o=s),c=Math.max(i,c),l=Math.min(o,l),c>l)return!1;if(Math.abs(this.direction.z)<1e-7){if(this.origin.z<a.z||this.origin.z>u.z)return!1}else if(n=1/this.direction.z,i=(a.z-this.origin.z)*n,o=(u.z-this.origin.z)*n,o===-1/0&&(o=1/0),i>o&&(s=i,i=o,o=s),c=Math.max(i,c),l=Math.min(o,l),c>l)return!1;return!0},Ray.prototype.intersectsBox=function(e,t){return void 0===t&&(t=0),this.intersectsBoxMinMax(e.minimum,e.maximum,t)},Ray.prototype.intersectsSphere=function(e,t){void 0===t&&(t=0);var r=e.center.x-this.origin.x,n=e.center.y-this.origin.y,i=e.center.z-this.origin.z,o=r*r+n*n+i*i,s=e.radius+t,a=s*s;if(o<=a)return!0;var u=r*this.direction.x+n*this.direction.y+i*this.direction.z;if(u<0)return!1;var c=o-u*u;return c<=a},Ray.prototype.intersectsTriangle=function(e,t,r){var n=Ray._TmpVector3[0],o=Ray._TmpVector3[1],a=Ray._TmpVector3[2],u=Ray._TmpVector3[3],c=Ray._TmpVector3[4];t.subtractToRef(e,n),r.subtractToRef(e,o),i["Vector3"].CrossToRef(this.direction,o,a);var l=i["Vector3"].Dot(n,a);if(0===l)return null;var d=1/l;this.origin.subtractToRef(e,u);var h=i["Vector3"].Dot(u,a)*d;if(h<0||h>1)return null;i["Vector3"].CrossToRef(u,n,c);var f=i["Vector3"].Dot(this.direction,c)*d;if(f<0||h+f>1)return null;var p=i["Vector3"].Dot(o,c)*d;return p>this.length?null:new s["IntersectionInfo"](1-h-f,h,p)},Ray.prototype.intersectsPlane=function(e){var t,r=i["Vector3"].Dot(e.normal,this.direction);if(Math.abs(r)<9.99999997475243e-7)return null;var n=i["Vector3"].Dot(e.normal,this.origin);return t=(-e.d-n)/r,t<0?t<-9.99999997475243e-7?null:0:t},Ray.prototype.intersectsAxis=function(e,t){switch(void 0===t&&(t=0),e){case"y":var r=(this.origin.y-t)/this.direction.y;return r>0?null:new i["Vector3"](this.origin.x+this.direction.x*-r,t,this.origin.z+this.direction.z*-r);case"x":r=(this.origin.x-t)/this.direction.x;return r>0?null:new i["Vector3"](t,this.origin.y+this.direction.y*-r,this.origin.z+this.direction.z*-r);case"z":r=(this.origin.z-t)/this.direction.z;return r>0?null:new i["Vector3"](this.origin.x+this.direction.x*-r,this.origin.y+this.direction.y*-r,t);default:return null}},Ray.prototype.intersectsMesh=function(e,t){var r=i["TmpVectors"].Matrix[0];return e.getWorldMatrix().invertToRef(r),this._tmpRay?Ray.TransformToRef(this,r,this._tmpRay):this._tmpRay=Ray.Transform(this,r),e.intersects(this._tmpRay,t)},Ray.prototype.intersectsMeshes=function(e,t,r){r?r.length=0:r=[];for(var n=0;n<e.length;n++){var i=this.intersectsMesh(e[n],t);i.hit&&r.push(i)}return r.sort(this._comparePickingInfo),r},Ray.prototype._comparePickingInfo=function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0},Ray.prototype.intersectionSegment=function(e,t,r){var n=this.origin,o=i["TmpVectors"].Vector3[0],s=i["TmpVectors"].Vector3[1],a=i["TmpVectors"].Vector3[2],u=i["TmpVectors"].Vector3[3];t.subtractToRef(e,o),this.direction.scaleToRef(Ray.rayl,a),n.addToRef(a,s),e.subtractToRef(n,u);var c,l,d,h,f=i["Vector3"].Dot(o,o),p=i["Vector3"].Dot(o,a),m=i["Vector3"].Dot(a,a),_=i["Vector3"].Dot(o,u),g=i["Vector3"].Dot(a,u),b=f*m-p*p,v=b,M=b;b<Ray.smallnum?(l=0,v=1,h=g,M=m):(l=p*g-m*_,h=f*g-p*_,l<0?(l=0,h=g,M=m):l>v&&(l=v,h=g+p,M=m)),h<0?(h=0,-_<0?l=0:-_>f?l=v:(l=-_,v=f)):h>M&&(h=M,-_+p<0?l=0:-_+p>f?l=v:(l=-_+p,v=f)),c=Math.abs(l)<Ray.smallnum?0:l/v,d=Math.abs(h)<Ray.smallnum?0:h/M;var T=i["TmpVectors"].Vector3[4];a.scaleToRef(d,T);var S=i["TmpVectors"].Vector3[5];o.scaleToRef(c,S),S.addInPlace(u);var C=i["TmpVectors"].Vector3[6];S.subtractToRef(T,C);var E=d>0&&d<=this.length&&C.lengthSquared()<r*r;return E?S.length():-1},Ray.prototype.update=function(e,t,r,n,i,o,s){return this.unprojectRayToRef(e,t,r,n,i,o,s),this},Ray.Zero=function(){return new Ray(i["Vector3"].Zero(),i["Vector3"].Zero())},Ray.CreateNew=function(e,t,r,n,i,o,s){var a=Ray.Zero();return a.update(e,t,r,n,i,o,s)},Ray.CreateNewFromTo=function(e,t,r){void 0===r&&(r=i["Matrix"].IdentityReadOnly);var n=t.subtract(e),o=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);return n.normalize(),Ray.Transform(new Ray(e,n,o),r)},Ray.Transform=function(e,t){var r=new Ray(new i["Vector3"](0,0,0),new i["Vector3"](0,0,0));return Ray.TransformToRef(e,t,r),r},Ray.TransformToRef=function(e,t,r){i["Vector3"].TransformCoordinatesToRef(e.origin,t,r.origin),i["Vector3"].TransformNormalToRef(e.direction,t,r.direction),r.length=e.length;var n=r.direction,o=n.length();if(0!==o&&1!==o){var s=1/o;n.x*=s,n.y*=s,n.z*=s,r.length*=o}},Ray.prototype.unprojectRayToRef=function(e,t,r,n,o,s,a){var u=i["TmpVectors"].Matrix[0];o.multiplyToRef(s,u),u.multiplyToRef(a,u),u.invert();var c=i["TmpVectors"].Vector3[0];c.x=e/r*2-1,c.y=-(t/n*2-1),c.z=-1;var l=i["TmpVectors"].Vector3[1].copyFromFloats(c.x,c.y,1),d=i["TmpVectors"].Vector3[2],h=i["TmpVectors"].Vector3[3];i["Vector3"]._UnprojectFromInvertedMatrixToRef(c,u,d),i["Vector3"]._UnprojectFromInvertedMatrixToRef(l,u,h),this.origin.copyFrom(d),h.subtractToRef(d,this.direction),this.direction.normalize()},Ray._TmpVector3=n["ArrayTools"].BuildArray(6,i["Vector3"].Zero),Ray.smallnum=1e-8,Ray.rayl=1e9,Ray}();a["Scene"].prototype.createPickingRay=function(e,t,r,n,i){void 0===i&&(i=!1);var o=c.Zero();return this.createPickingRayToRef(e,t,r,o,n,i),o},a["Scene"].prototype.createPickingRayToRef=function(e,t,r,n,o,s){void 0===s&&(s=!1);var a=this.getEngine();if(!o){if(!this.activeCamera)return this;o=this.activeCamera}var u=o.viewport,c=u.toGlobal(a.getRenderWidth(),a.getRenderHeight());return e=e/a.getHardwareScalingLevel()-c.x,t=t/a.getHardwareScalingLevel()-(a.getRenderHeight()-c.y-c.height),n.update(e,t,c.width,c.height,r||i["Matrix"].IdentityReadOnly,s?i["Matrix"].IdentityReadOnly:o.getViewMatrix(),o.getProjectionMatrix()),this},a["Scene"].prototype.createPickingRayInCameraSpace=function(e,t,r){var n=c.Zero();return this.createPickingRayInCameraSpaceToRef(e,t,n,r),n},a["Scene"].prototype.createPickingRayInCameraSpaceToRef=function(e,t,r,n){if(!o["PickingInfo"])return this;var s=this.getEngine();if(!n){if(!this.activeCamera)throw new Error("Active camera not set");n=this.activeCamera}var a=n.viewport,u=a.toGlobal(s.getRenderWidth(),s.getRenderHeight()),c=i["Matrix"].Identity();return e=e/s.getHardwareScalingLevel()-u.x,t=t/s.getHardwareScalingLevel()-(s.getRenderHeight()-u.y-u.height),r.update(e,t,u.width,u.height,c,c,n.getProjectionMatrix()),this},a["Scene"].prototype._internalPickForMesh=function(e,t,r,n,i,o,s,a){var u=t(n),c=r.intersects(u,i,s,o,n,a);return c&&c.hit?!i&&null!=e&&c.distance>=e.distance?null:c:null},a["Scene"].prototype._internalPick=function(e,t,r,n,s){if(!o["PickingInfo"])return null;for(var a=null,u=0;u<this.meshes.length;u++){var c=this.meshes[u];if(t){if(!t(c))continue}else if(!c.isEnabled()||!c.isVisible||!c.isPickable)continue;var l=c.skeleton&&c.skeleton.overrideMesh?c.skeleton.overrideMesh.getWorldMatrix():c.getWorldMatrix();if(c.hasThinInstances&&c.thinInstanceEnablePicking){var d=this._internalPickForMesh(a,e,c,l,!0,!0,s);if(d){if(n)return a;for(var h=i["TmpVectors"].Matrix[1],f=c.thinInstanceGetWorldMatrices(),p=0;p<f.length;p++){var m=f[p];m.multiplyToRef(l,h);var _=this._internalPickForMesh(a,e,c,h,r,n,s,!0);if(_&&(a=_,a.thinInstanceIndex=p,r))return a}}}else{d=this._internalPickForMesh(a,e,c,l,r,n,s);if(d&&(a=d,r))return a}}return a||new o["PickingInfo"]},a["Scene"].prototype._internalMultiPick=function(e,t,r){if(!o["PickingInfo"])return null;for(var n=new Array,s=0;s<this.meshes.length;s++){var a=this.meshes[s];if(t){if(!t(a))continue}else if(!a.isEnabled()||!a.isVisible||!a.isPickable)continue;var u=a.skeleton&&a.skeleton.overrideMesh?a.skeleton.overrideMesh.getWorldMatrix():a.getWorldMatrix();if(a.hasThinInstances&&a.thinInstanceEnablePicking){var c=this._internalPickForMesh(null,e,a,u,!0,!0,r);if(c)for(var l=i["TmpVectors"].Matrix[1],d=a.thinInstanceGetWorldMatrices(),h=0;h<d.length;h++){var f=d[h];f.multiplyToRef(u,l);var p=this._internalPickForMesh(null,e,a,l,!1,!1,r,!0);p&&(p.thinInstanceIndex=h,n.push(p))}}else{c=this._internalPickForMesh(null,e,a,u,!1,!1,r);c&&n.push(c)}}return n},a["Scene"].prototype.pickWithBoundingInfo=function(e,t,r,n,s){var a=this;if(!o["PickingInfo"])return null;var u=this._internalPick((function(r){return a._tempPickingRay||(a._tempPickingRay=c.Zero()),a.createPickingRayToRef(e,t,r,a._tempPickingRay,s||null),a._tempPickingRay}),r,n,!0);return u&&(u.ray=this.createPickingRay(e,t,i["Matrix"].Identity(),s||null)),u},a["Scene"].prototype.pick=function(e,t,r,n,s,a){var u=this;if(!o["PickingInfo"])return null;var l=this._internalPick((function(r){return u._tempPickingRay||(u._tempPickingRay=c.Zero()),u.createPickingRayToRef(e,t,r,u._tempPickingRay,s||null),u._tempPickingRay}),r,n,!1,a);return l&&(l.ray=this.createPickingRay(e,t,i["Matrix"].Identity(),s||null)),l},a["Scene"].prototype.pickWithRay=function(e,t,r,n){var o=this,s=this._internalPick((function(t){return o._pickWithRayInverseMatrix||(o._pickWithRayInverseMatrix=i["Matrix"].Identity()),t.invertToRef(o._pickWithRayInverseMatrix),o._cachedRayForTransform||(o._cachedRayForTransform=c.Zero()),c.TransformToRef(e,o._pickWithRayInverseMatrix,o._cachedRayForTransform),o._cachedRayForTransform}),t,r,!1,n);return s&&(s.ray=e),s},a["Scene"].prototype.multiPick=function(e,t,r,n,i){var o=this;return this._internalMultiPick((function(r){return o.createPickingRay(e,t,r,n||null)}),r,i)},a["Scene"].prototype.multiPickWithRay=function(e,t,r){var n=this;return this._internalMultiPick((function(t){return n._pickWithRayInverseMatrix||(n._pickWithRayInverseMatrix=i["Matrix"].Identity()),t.invertToRef(n._pickWithRayInverseMatrix),n._cachedRayForTransform||(n._cachedRayForTransform=c.Zero()),c.TransformToRef(e,n._pickWithRayInverseMatrix,n._cachedRayForTransform),n._cachedRayForTransform}),t,r)},u["Camera"].prototype.getForwardRay=function(e,t,r){return void 0===e&&(e=100),this.getForwardRayToRef(new c(i["Vector3"].Zero(),i["Vector3"].Zero(),e),e,t,r)},u["Camera"].prototype.getForwardRayToRef=function(e,t,r,n){return void 0===t&&(t=100),r||(r=this.getWorldMatrix()),e.length=t,n?e.origin.copyFrom(n):e.origin.copyFrom(this.position),i["TmpVectors"].Vector3[2].set(0,0,this._scene.useRightHandedSystem?-1:1),i["Vector3"].TransformNormalToRef(i["TmpVectors"].Vector3[2],r,i["TmpVectors"].Vector3[3]),i["Vector3"].NormalizeToRef(i["TmpVectors"].Vector3[3],e.direction),e}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.alpha.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Engines/thinEngine.js");n["ThinEngine"].prototype.setAlphaConstants=function(e,t,r,n){this._alphaState.setAlphaBlendConstants(e,t,r,n)},n["ThinEngine"].prototype.setAlphaMode=function(e,t){if(void 0===t&&(t=!1),this._alphaMode!==e){switch(e){case 0:this._alphaState.alphaBlend=!1;break;case 7:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 8:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 2:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 6:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 1:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 3:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 4:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR,this._gl.ZERO,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 5:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 9:this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR,this._gl.CONSTANT_ALPHA,this._gl.ONE_MINUS_CONSTANT_ALPHA),this._alphaState.alphaBlend=!0;break;case 10:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 11:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 12:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 13:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE_MINUS_DST_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 14:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 15:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 16:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break}t||(this.depthCullingState.depthMask=0===e),this._alphaMode=e}},n["ThinEngine"].prototype.getAlphaMode=function(){return this._alphaMode},n["ThinEngine"].prototype.setAlphaEquation=function(e){if(this._alphaEquation!==e){switch(e){case 0:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_ADD,this._gl.FUNC_ADD);break;case 1:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_SUBTRACT,this._gl.FUNC_SUBTRACT);break;case 2:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_REVERSE_SUBTRACT,this._gl.FUNC_REVERSE_SUBTRACT);break;case 3:this._alphaState.setAlphaEquationParameters(this._gl.MAX,this._gl.MAX);break;case 4:this._alphaState.setAlphaEquationParameters(this._gl.MIN,this._gl.MIN);break;case 5:this._alphaState.setAlphaEquationParameters(this._gl.MIN,this._gl.FUNC_ADD);break}this._alphaEquation=e}},n["ThinEngine"].prototype.getAlphaEquation=function(){return this._alphaEquation}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.dynamicBuffer.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Engines/thinEngine.js");n["ThinEngine"].prototype.updateDynamicIndexBuffer=function(e,t,r){var n;void 0===r&&(r=0),this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER]=null,this.bindIndexBuffer(e),n=t instanceof Uint16Array||t instanceof Uint32Array?t:e.is32Bits?new Uint32Array(t):new Uint16Array(t),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,n,this._gl.DYNAMIC_DRAW),this._resetIndexBufferBinding()},n["ThinEngine"].prototype.updateDynamicVertexBuffer=function(e,t,r,n){this.bindArrayBuffer(e),void 0===r&&(r=0);var i=t.length||t.byteLength;void 0===n||n>=i&&0===r?t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,r,new Float32Array(t)):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,r,t):t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,new Float32Array(t).subarray(r,r+n)):(t=t instanceof ArrayBuffer?new Uint8Array(t,r,n):new Uint8Array(t.buffer,t.byteOffset+r,n),this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t)),this._resetVertexBufferBinding()}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.dynamicTexture.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Engines/thinEngine.js"),i=r("./node_modules/@babylonjs/core/Materials/Textures/internalTexture.js");n["ThinEngine"].prototype.createDynamicTexture=function(e,t,r,o){var s=new i["InternalTexture"](this,i["InternalTextureSource"].Dynamic);return s.baseWidth=e,s.baseHeight=t,r&&(e=this.needPOTTextures?n["ThinEngine"].GetExponentOfTwo(e,this._caps.maxTextureSize):e,t=this.needPOTTextures?n["ThinEngine"].GetExponentOfTwo(t,this._caps.maxTextureSize):t),s.width=e,s.height=t,s.isReady=!1,s.generateMipMaps=r,s.samplingMode=o,this.updateTextureSamplingMode(o,s),this._internalTexturesCache.push(s),s},n["ThinEngine"].prototype.updateDynamicTexture=function(e,t,r,n,i,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),e){var s=this._gl,a=s.TEXTURE_2D,u=this._bindTextureDirectly(a,e,!0,o);this._unpackFlipY(void 0===r?e.invertY:r),n&&s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);var c=this._getWebGLTextureType(e.type),l=this._getInternalFormat(i||e.format),d=this._getRGBABufferInternalSizedFormat(e.type,l);s.texImage2D(a,0,d,l,c,t),e.generateMipMaps&&s.generateMipmap(a),u||this._bindTextureDirectly(a,null),n&&s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.isReady=!0}}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.readTexture.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Engines/thinEngine.js");n["ThinEngine"].prototype._readTexturePixels=function(e,t,r,n,i,o){void 0===n&&(n=-1),void 0===i&&(i=0),void 0===o&&(o=null);var s=this._gl;if(!s)throw new Error("Engine does not have gl rendering context.");if(!this._dummyFramebuffer){var a=s.createFramebuffer();if(!a)throw new Error("Unable to create dummy framebuffer");this._dummyFramebuffer=a}s.bindFramebuffer(s.FRAMEBUFFER,this._dummyFramebuffer),n>-1?s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+n,e._webGLTexture,i):s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e._webGLTexture,i);var u=void 0!==e.type?this._getWebGLTextureType(e.type):s.UNSIGNED_BYTE;switch(u){case s.UNSIGNED_BYTE:o||(o=new Uint8Array(4*t*r)),u=s.UNSIGNED_BYTE;break;default:o||(o=new Float32Array(4*t*r)),u=s.FLOAT;break}return s.readPixels(0,0,t,r,s.RGBA,u,o),s.bindFramebuffer(s.FRAMEBUFFER,this._currentFramebuffer),o}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.renderTarget.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Materials/Textures/internalTexture.js"),o=r("./node_modules/@babylonjs/core/Misc/logger.js"),s=r("./node_modules/@babylonjs/core/Materials/Textures/renderTargetCreationOptions.js"),a=r("./node_modules/@babylonjs/core/Engines/thinEngine.js");a["ThinEngine"].prototype.createRenderTargetTexture=function(e,t){var r=new s["RenderTargetCreationOptions"];void 0!==t&&"object"===typeof t?(r.generateMipMaps=t.generateMipMaps,r.generateDepthBuffer=!!t.generateDepthBuffer,r.generateStencilBuffer=!!t.generateStencilBuffer,r.type=void 0===t.type?0:t.type,r.samplingMode=void 0===t.samplingMode?3:t.samplingMode,r.format=void 0===t.format?5:t.format):(r.generateMipMaps=t,r.generateDepthBuffer=!0,r.generateStencilBuffer=!1,r.type=0,r.samplingMode=3,r.format=5),(1!==r.type||this._caps.textureFloatLinearFiltering)&&(2!==r.type||this._caps.textureHalfFloatLinearFiltering)||(r.samplingMode=1),1!==r.type||this._caps.textureFloat||(r.type=0,o["Logger"].Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type"));var n=this._gl,a=new i["InternalTexture"](this,i["InternalTextureSource"].RenderTarget),u=e.width||e,c=e.height||e,l=e.layers||0,d=this._getSamplingParameters(r.samplingMode,!!r.generateMipMaps),h=0!==l?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D,f=this._getRGBABufferInternalSizedFormat(r.type,r.format),p=this._getInternalFormat(r.format),m=this._getWebGLTextureType(r.type);this._bindTextureDirectly(h,a),0!==l?(a.is2DArray=!0,n.texImage3D(h,0,f,u,c,l,0,p,m,null)):n.texImage2D(h,0,f,u,c,0,p,m,null),n.texParameteri(h,n.TEXTURE_MAG_FILTER,d.mag),n.texParameteri(h,n.TEXTURE_MIN_FILTER,d.min),n.texParameteri(h,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(h,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r.generateMipMaps&&this._gl.generateMipmap(h),this._bindTextureDirectly(h,null);var _=this._currentFramebuffer,g=n.createFramebuffer();return this._bindUnboundFramebuffer(g),a._depthStencilBuffer=this._setupFramebufferDepthAttachments(!!r.generateStencilBuffer,r.generateDepthBuffer,u,c),a.is2DArray||n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a._webGLTexture,0),this._bindUnboundFramebuffer(_),a._framebuffer=g,a.baseWidth=u,a.baseHeight=c,a.width=u,a.height=c,a.depth=l,a.isReady=!0,a.samples=1,a.generateMipMaps=!!r.generateMipMaps,a.samplingMode=r.samplingMode,a.type=r.type,a.format=r.format,a._generateDepthBuffer=r.generateDepthBuffer,a._generateStencilBuffer=!!r.generateStencilBuffer,this._internalTexturesCache.push(a),a},a["ThinEngine"].prototype.createDepthStencilTexture=function(e,t){if(t.isCube){var r=e.width||e;return this._createDepthStencilCubeTexture(r,t)}return this._createDepthStencilTexture(e,t)},a["ThinEngine"].prototype._createDepthStencilTexture=function(e,t){var r=this._gl,s=e.layers||0,a=0!==s?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D,u=new i["InternalTexture"](this,i["InternalTextureSource"].Depth);if(!this._caps.depthTextureExtension)return o["Logger"].Error("Depth texture is not supported by your browser or hardware."),u;var c=Object(n["__assign"])({bilinearFiltering:!1,comparisonFunction:0,generateStencil:!1},t);this._bindTextureDirectly(a,u,!0),this._setupDepthStencilTexture(u,e,c.generateStencil,c.bilinearFiltering,c.comparisonFunction);var l=c.generateStencil?r.UNSIGNED_INT_24_8:r.UNSIGNED_INT,d=c.generateStencil?r.DEPTH_STENCIL:r.DEPTH_COMPONENT,h=d;return this.webGLVersion>1&&(h=c.generateStencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24),u.is2DArray?r.texImage3D(a,0,h,u.width,u.height,s,0,d,l,null):r.texImage2D(a,0,h,u.width,u.height,0,d,l,null),this._bindTextureDirectly(a,null),u}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.renderTargetCube.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Materials/Textures/internalTexture.js"),o=r("./node_modules/@babylonjs/core/Misc/logger.js"),s=r("./node_modules/@babylonjs/core/Engines/thinEngine.js");s["ThinEngine"].prototype.createRenderTargetCubeTexture=function(e,t){var r=Object(n["__assign"])({generateMipMaps:!0,generateDepthBuffer:!0,generateStencilBuffer:!1,type:0,samplingMode:3,format:5},t);r.generateStencilBuffer=r.generateDepthBuffer&&r.generateStencilBuffer,(1!==r.type||this._caps.textureFloatLinearFiltering)&&(2!==r.type||this._caps.textureHalfFloatLinearFiltering)||(r.samplingMode=1);var s=this._gl,a=new i["InternalTexture"](this,i["InternalTextureSource"].RenderTarget);this._bindTextureDirectly(s.TEXTURE_CUBE_MAP,a,!0);var u=this._getSamplingParameters(r.samplingMode,r.generateMipMaps);1!==r.type||this._caps.textureFloat||(r.type=0,o["Logger"].Warn("Float textures are not supported. Cube render target forced to TEXTURETYPE_UNESIGNED_BYTE type")),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,u.mag),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,u.min),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);for(var c=0;c<6;c++)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,this._getRGBABufferInternalSizedFormat(r.type,r.format),e,e,0,this._getInternalFormat(r.format),this._getWebGLTextureType(r.type),null);var l=s.createFramebuffer();return this._bindUnboundFramebuffer(l),a._depthStencilBuffer=this._setupFramebufferDepthAttachments(r.generateStencilBuffer,r.generateDepthBuffer,e,e),r.generateMipMaps&&s.generateMipmap(s.TEXTURE_CUBE_MAP),this._bindTextureDirectly(s.TEXTURE_CUBE_MAP,null),this._bindUnboundFramebuffer(null),a._framebuffer=l,a.width=e,a.height=e,a.isReady=!0,a.isCube=!0,a.samples=1,a.generateMipMaps=r.generateMipMaps,a.samplingMode=r.samplingMode,a.type=r.type,a.format=r.format,a._generateDepthBuffer=r.generateDepthBuffer,a._generateStencilBuffer=r.generateStencilBuffer,this._internalTexturesCache.push(a),a}},"./node_modules/@babylonjs/core/Engines/Extensions/engine.uniformBuffer.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Engines/thinEngine.js"),i=r("./node_modules/@babylonjs/core/Meshes/WebGL/webGLDataBuffer.js");n["ThinEngine"].prototype.createUniformBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create uniform buffer");var r=new i["WebGLDataBuffer"](t);return this.bindUniformBuffer(r),e instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,e,this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW),this.bindUniformBuffer(null),r.references=1,r},n["ThinEngine"].prototype.createDynamicUniformBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create dynamic uniform buffer");var r=new i["WebGLDataBuffer"](t);return this.bindUniformBuffer(r),e instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,e,this._gl.DYNAMIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(e),this._gl.DYNAMIC_DRAW),this.bindUniformBuffer(null),r.references=1,r},n["ThinEngine"].prototype.updateUniformBuffer=function(e,t,r,n){this.bindUniformBuffer(e),void 0===r&&(r=0),void 0===n?t instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,r,t):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,r,new Float32Array(t)):t instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,t.subarray(r,r+n)):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,new Float32Array(t).subarray(r,r+n)),this.bindUniformBuffer(null)},n["ThinEngine"].prototype.bindUniformBuffer=function(e){this._gl.bindBuffer(this._gl.UNIFORM_BUFFER,e?e.underlyingResource:null)},n["ThinEngine"].prototype.bindUniformBufferBase=function(e,t){this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER,t,e?e.underlyingResource:null)},n["ThinEngine"].prototype.bindUniformBlock=function(e,t,r){var n=e.program,i=this._gl.getUniformBlockIndex(n,t);this._gl.uniformBlockBinding(n,i,r)}},"./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineAndOperator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderDefineAndOperator",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js"),o=function(e){function ShaderDefineAndOperator(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(ShaderDefineAndOperator,e),ShaderDefineAndOperator.prototype.isTrue=function(e){return this.leftOperand.isTrue(e)&&this.rightOperand.isTrue(e)},ShaderDefineAndOperator}(i["ShaderDefineExpression"])},"./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineArithmeticOperator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderDefineArithmeticOperator",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js"),o=function(e){function ShaderDefineArithmeticOperator(t,r,n){var i=e.call(this)||this;return i.define=t,i.operand=r,i.testValue=n,i}return Object(n["__extends"])(ShaderDefineArithmeticOperator,e),ShaderDefineArithmeticOperator.prototype.isTrue=function(e){var t=e[this.define];void 0===t&&(t=this.define);var r=!1,n=parseInt(t),i=parseInt(this.testValue);switch(this.operand){case">":r=n>i;break;case"<":r=n<i;break;case"<=":r=n<=i;break;case">=":r=n>=i;break;case"==":r=n===i;break}return r},ShaderDefineArithmeticOperator}(i["ShaderDefineExpression"])},"./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineIsDefinedOperator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderDefineIsDefinedOperator",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js"),o=function(e){function ShaderDefineIsDefinedOperator(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;return n.define=t,n.not=r,n}return Object(n["__extends"])(ShaderDefineIsDefinedOperator,e),ShaderDefineIsDefinedOperator.prototype.isTrue=function(e){var t=void 0!==e[this.define];return this.not&&(t=!t),t},ShaderDefineIsDefinedOperator}(i["ShaderDefineExpression"])},"./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineOrOperator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderDefineOrOperator",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js"),o=function(e){function ShaderDefineOrOperator(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(ShaderDefineOrOperator,e),ShaderDefineOrOperator.prototype.isTrue=function(e){return this.leftOperand.isTrue(e)||this.rightOperand.isTrue(e)},ShaderDefineOrOperator}(i["ShaderDefineExpression"])},"./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderDefineExpression",(function(){return n}));var n=function(){function ShaderDefineExpression(){}return ShaderDefineExpression.prototype.isTrue=function(e){return!0},ShaderDefineExpression.postfixToInfix=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];if(void 0===ShaderDefineExpression._OperatorPriority[i])t.push(i);else{var o=t[t.length-1],s=t[t.length-2];t.length-=2,t.push("("+s+i+o+")")}}return t[t.length-1]},ShaderDefineExpression.infixToPostfix=function(e){var t=[],r=-1,pushOperand=function(){i=i.trim(),""!==i&&(t.push(i),i="")},push=function(e){r<ShaderDefineExpression._Stack.length-1&&(ShaderDefineExpression._Stack[++r]=e)},peek=function(){return ShaderDefineExpression._Stack[r]},pop=function(){return-1===r?"!!INVALID EXPRESSION!!":ShaderDefineExpression._Stack[r--]},n=0,i="";while(n<e.length){var o=e.charAt(n),s=n<e.length-1?e.substr(n,2):"";if("("===o)i="",push(o);else if(")"===o){pushOperand();while(-1!==r&&"("!==peek())t.push(pop());pop()}else if(ShaderDefineExpression._OperatorPriority[s]>1){pushOperand();while(-1!==r&&ShaderDefineExpression._OperatorPriority[peek()]>=ShaderDefineExpression._OperatorPriority[s])t.push(pop());push(s),n++}else i+=o;n++}pushOperand();while(-1!==r)"("===peek()?pop():t.push(pop());return t},ShaderDefineExpression._OperatorPriority={")":0,"(":1,"||":2,"&&":3},ShaderDefineExpression._Stack=["","","","","","","","","","","","","","","","","","","",""],ShaderDefineExpression}()},"./node_modules/@babylonjs/core/Engines/Processors/shaderCodeConditionNode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderCodeConditionNode",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeNode.js"),o=function(e){function ShaderCodeConditionNode(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(ShaderCodeConditionNode,e),ShaderCodeConditionNode.prototype.process=function(e,t){for(var r=0;r<this.children.length;r++){var n=this.children[r];if(n.isValid(e))return n.process(e,t)}return""},ShaderCodeConditionNode}(i["ShaderCodeNode"])},"./node_modules/@babylonjs/core/Engines/Processors/shaderCodeCursor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderCodeCursor",(function(){return n}));var n=function(){function ShaderCodeCursor(){}return Object.defineProperty(ShaderCodeCursor.prototype,"currentLine",{get:function(){return this._lines[this.lineIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(ShaderCodeCursor.prototype,"canRead",{get:function(){return this.lineIndex<this._lines.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(ShaderCodeCursor.prototype,"lines",{set:function(e){this._lines=[];for(var t=0,r=e;t<r.length;t++){var n=r[t];if("#"!==n[0])for(var i=n.split(";"),o=0;o<i.length;o++){var s=i[o];s=s.trim(),s&&this._lines.push(s+(o!==i.length-1?";":""))}else this._lines.push(n)}},enumerable:!1,configurable:!0}),ShaderCodeCursor}()},"./node_modules/@babylonjs/core/Engines/Processors/shaderCodeNode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderCodeNode",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/stringTools.js"),i=function(){function ShaderCodeNode(){this.children=[]}return ShaderCodeNode.prototype.isValid=function(e){return!0},ShaderCodeNode.prototype.process=function(e,t){var r="";if(this.line){var i=this.line,o=t.processor;if(o){if(o.lineProcessor&&(i=o.lineProcessor(i,t.isFragment)),o.attributeProcessor&&n["StringTools"].StartsWith(this.line,"attribute"))i=o.attributeProcessor(this.line);else if(o.varyingProcessor&&n["StringTools"].StartsWith(this.line,"varying"))i=o.varyingProcessor(this.line,t.isFragment);else if((o.uniformProcessor||o.uniformBufferProcessor)&&n["StringTools"].StartsWith(this.line,"uniform")){var s=/uniform (.+) (.+)/;s.test(this.line)?o.uniformProcessor&&(i=o.uniformProcessor(this.line,t.isFragment)):o.uniformBufferProcessor&&(i=o.uniformBufferProcessor(this.line,t.isFragment),t.lookForClosingBracketForUniformBuffer=!0)}o.endOfUniformBufferProcessor&&t.lookForClosingBracketForUniformBuffer&&-1!==this.line.indexOf("}")&&(t.lookForClosingBracketForUniformBuffer=!1,i=o.endOfUniformBufferProcessor(this.line,t.isFragment))}r+=i+"\r\n"}return this.children.forEach((function(n){r+=n.process(e,t)})),this.additionalDefineKey&&(e[this.additionalDefineKey]=this.additionalDefineValue||"true"),r},ShaderCodeNode}()},"./node_modules/@babylonjs/core/Engines/Processors/shaderCodeTestNode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderCodeTestNode",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeNode.js"),o=function(e){function ShaderCodeTestNode(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(ShaderCodeTestNode,e),ShaderCodeTestNode.prototype.isValid=function(e){return this.testExpression.isTrue(e)},ShaderCodeTestNode}(i["ShaderCodeNode"])},"./node_modules/@babylonjs/core/Engines/Processors/shaderProcessor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderProcessor",(function(){return m}));var n=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeNode.js"),i=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeCursor.js"),o=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeConditionNode.js"),s=r("./node_modules/@babylonjs/core/Engines/Processors/shaderCodeTestNode.js"),a=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineIsDefinedOperator.js"),u=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineOrOperator.js"),c=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineAndOperator.js"),l=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js"),d=r("./node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineArithmeticOperator.js"),h=r("./node_modules/@babylonjs/core/Misc/devTools.js"),f=/defined\s*?\((.+?)\)/g,p=/defined\s*?\[(.+?)\]/g,m=function(){function ShaderProcessor(){}return ShaderProcessor.Process=function(e,t,r,n){var i=this;this._ProcessIncludes(e,t,(function(e){var o=i._ProcessShaderConversion(e,t,n);r(o)}))},ShaderProcessor._ProcessPrecision=function(e,t){var r=t.shouldUseHighPrecisionShader;return-1===e.indexOf("precision highp float")?e=r?"precision highp float;\n"+e:"precision mediump float;\n"+e:r||(e=e.replace("precision highp float","precision mediump float")),e},ShaderProcessor._ExtractOperation=function(e){var t=/defined\((.+)\)/,r=t.exec(e);if(r&&r.length)return new a["ShaderDefineIsDefinedOperator"](r[1].trim(),"!"===e[0]);for(var n=["==",">=","<=","<",">"],i="",o=0,s=0,u=n;s<u.length;s++)if(i=u[s],o=e.indexOf(i),o>-1)break;if(-1===o)return new a["ShaderDefineIsDefinedOperator"](e);var c=e.substring(0,o).trim(),l=e.substring(o+i.length).trim();return new d["ShaderDefineArithmeticOperator"](c,i,l)},ShaderProcessor._BuildSubExpression=function(e){e=e.replace(f,"defined[$1]");for(var t=l["ShaderDefineExpression"].infixToPostfix(e),r=[],n=0,i=t;n<i.length;n++){var o=i[n];if("||"!==o&&"&&"!==o)r.push(o);else if(r.length>=2){var s=r[r.length-1],a=r[r.length-2];r.length-=2;var d="&&"==o?new c["ShaderDefineAndOperator"]:new u["ShaderDefineOrOperator"];"string"===typeof s&&(s=s.replace(p,"defined($1)")),"string"===typeof a&&(a=a.replace(p,"defined($1)")),d.leftOperand="string"===typeof a?this._ExtractOperation(a):a,d.rightOperand="string"===typeof s?this._ExtractOperation(s):s,r.push(d)}}var h=r[r.length-1];return"string"===typeof h&&(h=h.replace(p,"defined($1)")),"string"===typeof h?this._ExtractOperation(h):h},ShaderProcessor._BuildExpression=function(e,t){var r=new s["ShaderCodeTestNode"],n=e.substring(0,t),i=e.substring(t);return i=i.substring(0,(i.indexOf("//")+1||i.length+1)-1).trim(),r.testExpression="#ifdef"===n?new a["ShaderDefineIsDefinedOperator"](i):"#ifndef"===n?new a["ShaderDefineIsDefinedOperator"](i,!0):this._BuildSubExpression(i),r},ShaderProcessor._MoveCursorWithinIf=function(e,t,r){var i=e.currentLine;while(this._MoveCursor(e,r)){i=e.currentLine;var o=i.substring(0,5).toLowerCase();if("#else"===o){var s=new n["ShaderCodeNode"];return t.children.push(s),void this._MoveCursor(e,s)}if("#elif"===o){var a=this._BuildExpression(i,5);t.children.push(a),r=a}}},ShaderProcessor._MoveCursor=function(e,t){while(e.canRead){e.lineIndex++;var r=e.currentLine,i=/(#ifdef)|(#else)|(#elif)|(#endif)|(#ifndef)|(#if)/,s=i.exec(r);if(s&&s.length){var a=s[0];switch(a){case"#ifdef":var u=new o["ShaderCodeConditionNode"];t.children.push(u);var c=this._BuildExpression(r,6);u.children.push(c),this._MoveCursorWithinIf(e,u,c);break;case"#else":case"#elif":return!0;case"#endif":return!1;case"#ifndef":u=new o["ShaderCodeConditionNode"];t.children.push(u);c=this._BuildExpression(r,7);u.children.push(c),this._MoveCursorWithinIf(e,u,c);break;case"#if":u=new o["ShaderCodeConditionNode"],c=this._BuildExpression(r,3);t.children.push(u),u.children.push(c),this._MoveCursorWithinIf(e,u,c);break}}else{var l=new n["ShaderCodeNode"];if(l.line=r,t.children.push(l),"#"===r[0]&&"d"===r[1]){var d=r.replace(";","").split(" ");l.additionalDefineKey=d[1],3===d.length&&(l.additionalDefineValue=d[2])}}}return!1},ShaderProcessor._EvaluatePreProcessors=function(e,t,r){var o=new n["ShaderCodeNode"],s=new i["ShaderCodeCursor"];return s.lineIndex=-1,s.lines=e.split("\n"),this._MoveCursor(s,o),o.process(t,r)},ShaderProcessor._PreparePreProcessors=function(e){for(var t=e.defines,r={},n=0,i=t;n<i.length;n++){var o=i[n],s=o.replace("#define","").replace(";","").trim(),a=s.split(" ");r[a[0]]=a.length>1?a[1]:""}return r["GL_ES"]="true",r["__VERSION__"]=e.version,r[e.platformName]="true",r},ShaderProcessor._ProcessShaderConversion=function(e,t,r){var n=this._ProcessPrecision(e,t);if(!t.processor)return n;if(-1!==n.indexOf("#version 3"))return n.replace("#version 300 es","");var i=t.defines,o=this._PreparePreProcessors(t);return t.processor.preProcessor&&(n=t.processor.preProcessor(n,i,t.isFragment)),n=this._EvaluatePreProcessors(n,o,t),t.processor.postProcessor&&(n=t.processor.postProcessor(n,i,t.isFragment,r)),n},ShaderProcessor._ProcessIncludes=function(e,t,r){var n=this,i=/#include<(.+)>(\((.*)\))*(\[(.*)\])*/g,o=i.exec(e),s=new String(e),a=!1;while(null!=o){var u=o[1];if(-1!==u.indexOf("__decl__")&&(u=u.replace(/__decl__/,""),t.supportsUniformBuffers&&(u=u.replace(/Vertex/,"Ubo"),u=u.replace(/Fragment/,"Ubo")),u+="Declaration"),!t.includesShadersStore[u]){var c=t.shadersRepository+"ShadersInclude/"+u+".fx";return void ShaderProcessor._FileToolsLoadFile(c,(function(e){t.includesShadersStore[u]=e,n._ProcessIncludes(s,t,r)}))}var l=t.includesShadersStore[u];if(o[2])for(var d=o[3].split(","),h=0;h<d.length;h+=2){var f=new RegExp(d[h],"g"),p=d[h+1];l=l.replace(f,p)}if(o[4]){var m=o[5];if(-1!==m.indexOf("..")){var _=m.split(".."),g=parseInt(_[0]),b=parseInt(_[1]),v=l.slice(0);l="",isNaN(b)&&(b=t.indexParameters[_[1]]);for(var M=g;M<b;M++)t.supportsUniformBuffers||(v=v.replace(/light\{X\}.(\w*)/g,(function(e,t){return t+"{X}"}))),l+=v.replace(/\{X\}/g,M.toString())+"\n"}else t.supportsUniformBuffers||(l=l.replace(/light\{X\}.(\w*)/g,(function(e,t){return t+"{X}"}))),l=l.replace(/\{X\}/g,m)}s=s.replace(o[0],l),a=a||l.indexOf("#include<")>=0,o=i.exec(e)}a?this._ProcessIncludes(s.toString(),t,r):r(s)},ShaderProcessor._FileToolsLoadFile=function(e,t,r,n,i,o){throw h["_DevTools"].WarnImport("FileTools")},ShaderProcessor}()},"./node_modules/@babylonjs/core/Engines/WebGL/webGL2ShaderProcessors.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WebGL2ShaderProcessor",(function(){return n}));var n=function(){function WebGL2ShaderProcessor(){}return WebGL2ShaderProcessor.prototype.attributeProcessor=function(e){return e.replace("attribute","in")},WebGL2ShaderProcessor.prototype.varyingProcessor=function(e,t){return e.replace("varying",t?"in":"out")},WebGL2ShaderProcessor.prototype.postProcessor=function(e,t,r){var n=-1!==e.search(/#extension.+GL_EXT_draw_buffers.+require/),i=/#extension.+(GL_OVR_multiview2|GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g;if(e=e.replace(i,""),e=e.replace(/texture2D\s*\(/g,"texture("),r)e=e.replace(/texture2DLodEXT\s*\(/g,"textureLod("),e=e.replace(/textureCubeLodEXT\s*\(/g,"textureLod("),e=e.replace(/textureCube\s*\(/g,"texture("),e=e.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),e=e.replace(/gl_FragColor/g,"glFragColor"),e=e.replace(/gl_FragData/g,"glFragData"),e=e.replace(/void\s+?main\s*\(/g,(n?"":"out vec4 glFragColor;\n")+"void main(");else{var o=-1!==t.indexOf("#define MULTIVIEW");if(o)return"#extension GL_OVR_multiview2 : require\nlayout (num_views = 2) in;\n"+e}return e},WebGL2ShaderProcessor}()},"./node_modules/@babylonjs/core/Engines/WebGL/webGLPipelineContext.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WebGLPipelineContext",(function(){return n}));var n=function(){function WebGLPipelineContext(){this.vertexCompilationError=null,this.fragmentCompilationError=null,this.programLinkError=null,this.programValidationError=null}return Object.defineProperty(WebGLPipelineContext.prototype,"isAsync",{get:function(){return this.isParallelCompiled},enumerable:!1,configurable:!0}),Object.defineProperty(WebGLPipelineContext.prototype,"isReady",{get:function(){return!!this.program&&(!this.isParallelCompiled||this.engine._isRenderingStateCompiled(this))},enumerable:!1,configurable:!0}),WebGLPipelineContext.prototype._handlesSpectorRebuildCallback=function(e){e&&this.program&&e(this.program)},WebGLPipelineContext.prototype._getVertexShaderCode=function(){return this.vertexShader?this.engine._getShaderSource(this.vertexShader):null},WebGLPipelineContext.prototype._getFragmentShaderCode=function(){return this.fragmentShader?this.engine._getShaderSource(this.fragmentShader):null},WebGLPipelineContext}()},"./node_modules/@babylonjs/core/Engines/WebGL/webGLShaderProcessors.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WebGLShaderProcessor",(function(){return n}));var n=function(){function WebGLShaderProcessor(){}return WebGLShaderProcessor.prototype.postProcessor=function(e,t,r,n){if(!n.getCaps().drawBuffersExtension){var i=/#extension.+GL_EXT_draw_buffers.+(enable|require)/g;e=e.replace(i,"")}return e},WebGLShaderProcessor}()},"./node_modules/@babylonjs/core/Engines/engine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Engine",(function(){return f}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/observable.js"),o=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),s=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),a=r("./node_modules/@babylonjs/core/Misc/devTools.js"),u=r("./node_modules/@babylonjs/core/Engines/thinEngine.js"),c=r("./node_modules/@babylonjs/core/Misc/performanceMonitor.js"),l=r("./node_modules/@babylonjs/core/Misc/perfCounter.js"),d=r("./node_modules/@babylonjs/core/Meshes/WebGL/webGLDataBuffer.js"),h=r("./node_modules/@babylonjs/core/Misc/logger.js"),f=(r("./node_modules/@babylonjs/core/Engines/Extensions/engine.alpha.js"),r("./node_modules/@babylonjs/core/Engines/Extensions/engine.readTexture.js"),r("./node_modules/@babylonjs/core/Engines/Extensions/engine.dynamicBuffer.js"),function(e){function Engine(t,r,n,s){void 0===s&&(s=!1);var a=e.call(this,t,r,n,s)||this;if(a.enableOfflineSupport=!1,a.disableManifestCheck=!1,a.scenes=new Array,a.onNewSceneAddedObservable=new i["Observable"],a.postProcesses=new Array,a.isPointerLock=!1,a.onResizeObservable=new i["Observable"],a.onCanvasBlurObservable=new i["Observable"],a.onCanvasFocusObservable=new i["Observable"],a.onCanvasPointerOutObservable=new i["Observable"],a.onBeginFrameObservable=new i["Observable"],a.customAnimationFrameRequester=null,a.onEndFrameObservable=new i["Observable"],a.onBeforeShaderCompilationObservable=new i["Observable"],a.onAfterShaderCompilationObservable=new i["Observable"],a._deterministicLockstep=!1,a._lockstepMaxSteps=4,a._timeStep=1/60,a._fps=60,a._deltaTime=0,a._drawCalls=new l["PerfCounter"],a.canvasTabIndex=1,a.disablePerformanceMonitorInBackground=!1,a._performanceMonitor=new c["PerformanceMonitor"],Engine.Instances.push(a),!t)return a;if(n=a._creationOptions,t.getContext){var u=t;if(a._onCanvasFocus=function(){a.onCanvasFocusObservable.notifyObservers(a)},a._onCanvasBlur=function(){a.onCanvasBlurObservable.notifyObservers(a)},u.addEventListener("focus",a._onCanvasFocus),u.addEventListener("blur",a._onCanvasBlur),a._onBlur=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.disable(),a._windowIsBackground=!0},a._onFocus=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.enable(),a._windowIsBackground=!1},a._onCanvasPointerOut=function(e){a.onCanvasPointerOutObservable.notifyObservers(e)},u.addEventListener("pointerout",a._onCanvasPointerOut),o["DomManagement"].IsWindowObjectExist()){var d=a.getHostWindow();d.addEventListener("blur",a._onBlur),d.addEventListener("focus",a._onFocus);var h=document;a._onFullscreenChange=function(){void 0!==h.fullscreen?a.isFullscreen=h.fullscreen:void 0!==h.mozFullScreen?a.isFullscreen=h.mozFullScreen:void 0!==h.webkitIsFullScreen?a.isFullscreen=h.webkitIsFullScreen:void 0!==h.msIsFullScreen&&(a.isFullscreen=h.msIsFullScreen),a.isFullscreen&&a._pointerLockRequested&&u&&Engine._RequestPointerlock(u)},document.addEventListener("fullscreenchange",a._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",a._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",a._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",a._onFullscreenChange,!1),a._onPointerLockChange=function(){a.isPointerLock=h.mozPointerLockElement===u||h.webkitPointerLockElement===u||h.msPointerLockElement===u||h.pointerLockElement===u},document.addEventListener("pointerlockchange",a._onPointerLockChange,!1),document.addEventListener("mspointerlockchange",a._onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",a._onPointerLockChange,!1),document.addEventListener("webkitpointerlockchange",a._onPointerLockChange,!1),!Engine.audioEngine&&n.audioEngine&&Engine.AudioEngineFactory&&(Engine.audioEngine=Engine.AudioEngineFactory(a.getRenderingCanvas()))}a._connectVREvents(),a.enableOfflineSupport=void 0!==Engine.OfflineProviderFactory,n.doNotHandleTouchAction||a._disableTouchAction(),a._deterministicLockstep=!!n.deterministicLockstep,a._lockstepMaxSteps=n.lockstepMaxSteps||0,a._timeStep=n.timeStep||1/60}return a._prepareVRComponent(),n.autoEnableWebVR&&a.initWebVR(),a}return Object(n["__extends"])(Engine,e),Object.defineProperty(Engine,"NpmPackage",{get:function(){return u["ThinEngine"].NpmPackage},enumerable:!1,configurable:!0}),Object.defineProperty(Engine,"Version",{get:function(){return u["ThinEngine"].Version},enumerable:!1,configurable:!0}),Object.defineProperty(Engine,"Instances",{get:function(){return s["EngineStore"].Instances},enumerable:!1,configurable:!0}),Object.defineProperty(Engine,"LastCreatedEngine",{get:function(){return s["EngineStore"].LastCreatedEngine},enumerable:!1,configurable:!0}),Object.defineProperty(Engine,"LastCreatedScene",{get:function(){return s["EngineStore"].LastCreatedScene},enumerable:!1,configurable:!0}),Engine.MarkAllMaterialsAsDirty=function(e,t){for(var r=0;r<Engine.Instances.length;r++)for(var n=Engine.Instances[r],i=0;i<n.scenes.length;i++)n.scenes[i].markAllMaterialsAsDirty(e,t)},Engine.DefaultLoadingScreenFactory=function(e){throw a["_DevTools"].WarnImport("LoadingScreen")},Object.defineProperty(Engine.prototype,"_supportsHardwareTextureRescaling",{get:function(){return!!Engine._RescalePostProcessFactory},enumerable:!1,configurable:!0}),Object.defineProperty(Engine.prototype,"performanceMonitor",{get:function(){return this._performanceMonitor},enumerable:!1,configurable:!0}),Engine.prototype.getInputElement=function(){return this._renderingCanvas},Engine.prototype.getAspectRatio=function(e,t){void 0===t&&(t=!1);var r=e.viewport;return this.getRenderWidth(t)*r.width/(this.getRenderHeight(t)*r.height)},Engine.prototype.getScreenAspectRatio=function(){return this.getRenderWidth(!0)/this.getRenderHeight(!0)},Engine.prototype.getRenderingCanvasClientRect=function(){return this._renderingCanvas?this._renderingCanvas.getBoundingClientRect():null},Engine.prototype.getInputElementClientRect=function(){return this._renderingCanvas?this.getInputElement().getBoundingClientRect():null},Engine.prototype.isDeterministicLockStep=function(){return this._deterministicLockstep},Engine.prototype.getLockstepMaxSteps=function(){return this._lockstepMaxSteps},Engine.prototype.getTimeStep=function(){return 1e3*this._timeStep},Engine.prototype.generateMipMapsForCubemap=function(e,t){if(void 0===t&&(t=!0),e.generateMipMaps){var r=this._gl;this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,e,!0),r.generateMipmap(r.TEXTURE_CUBE_MAP),t&&this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,null)}},Engine.prototype.setState=function(e,t,r,n){void 0===t&&(t=0),void 0===n&&(n=!1),(this._depthCullingState.cull!==e||r)&&(this._depthCullingState.cull=e);var i=this.cullBackFaces?this._gl.BACK:this._gl.FRONT;(this._depthCullingState.cullFace!==i||r)&&(this._depthCullingState.cullFace=i),this.setZOffset(t);var o=n?this._gl.CW:this._gl.CCW;(this._depthCullingState.frontFace!==o||r)&&(this._depthCullingState.frontFace=o)},Engine.prototype.setZOffset=function(e){this._depthCullingState.zOffset=e},Engine.prototype.getZOffset=function(){return this._depthCullingState.zOffset},Engine.prototype.setDepthBuffer=function(e){this._depthCullingState.depthTest=e},Engine.prototype.getDepthWrite=function(){return this._depthCullingState.depthMask},Engine.prototype.setDepthWrite=function(e){this._depthCullingState.depthMask=e},Engine.prototype.getStencilBuffer=function(){return this._stencilState.stencilTest},Engine.prototype.setStencilBuffer=function(e){this._stencilState.stencilTest=e},Engine.prototype.getStencilMask=function(){return this._stencilState.stencilMask},Engine.prototype.setStencilMask=function(e){this._stencilState.stencilMask=e},Engine.prototype.getStencilFunction=function(){return this._stencilState.stencilFunc},Engine.prototype.getStencilFunctionReference=function(){return this._stencilState.stencilFuncRef},Engine.prototype.getStencilFunctionMask=function(){return this._stencilState.stencilFuncMask},Engine.prototype.setStencilFunction=function(e){this._stencilState.stencilFunc=e},Engine.prototype.setStencilFunctionReference=function(e){this._stencilState.stencilFuncRef=e},Engine.prototype.setStencilFunctionMask=function(e){this._stencilState.stencilFuncMask=e},Engine.prototype.getStencilOperationFail=function(){return this._stencilState.stencilOpStencilFail},Engine.prototype.getStencilOperationDepthFail=function(){return this._stencilState.stencilOpDepthFail},Engine.prototype.getStencilOperationPass=function(){return this._stencilState.stencilOpStencilDepthPass},Engine.prototype.setStencilOperationFail=function(e){this._stencilState.stencilOpStencilFail=e},Engine.prototype.setStencilOperationDepthFail=function(e){this._stencilState.stencilOpDepthFail=e},Engine.prototype.setStencilOperationPass=function(e){this._stencilState.stencilOpStencilDepthPass=e},Engine.prototype.setDitheringState=function(e){e?this._gl.enable(this._gl.DITHER):this._gl.disable(this._gl.DITHER)},Engine.prototype.setRasterizerState=function(e){e?this._gl.disable(this._gl.RASTERIZER_DISCARD):this._gl.enable(this._gl.RASTERIZER_DISCARD)},Engine.prototype.getDepthFunction=function(){return this._depthCullingState.depthFunc},Engine.prototype.setDepthFunction=function(e){this._depthCullingState.depthFunc=e},Engine.prototype.setDepthFunctionToGreater=function(){this._depthCullingState.depthFunc=this._gl.GREATER},Engine.prototype.setDepthFunctionToGreaterOrEqual=function(){this._depthCullingState.depthFunc=this._gl.GEQUAL},Engine.prototype.setDepthFunctionToLess=function(){this._depthCullingState.depthFunc=this._gl.LESS},Engine.prototype.setDepthFunctionToLessOrEqual=function(){this._depthCullingState.depthFunc=this._gl.LEQUAL},Engine.prototype.cacheStencilState=function(){this._cachedStencilBuffer=this.getStencilBuffer(),this._cachedStencilFunction=this.getStencilFunction(),this._cachedStencilMask=this.getStencilMask(),this._cachedStencilOperationPass=this.getStencilOperationPass(),this._cachedStencilOperationFail=this.getStencilOperationFail(),this._cachedStencilOperationDepthFail=this.getStencilOperationDepthFail(),this._cachedStencilReference=this.getStencilFunctionReference()},Engine.prototype.restoreStencilState=function(){this.setStencilFunction(this._cachedStencilFunction),this.setStencilMask(this._cachedStencilMask),this.setStencilBuffer(this._cachedStencilBuffer),this.setStencilOperationPass(this._cachedStencilOperationPass),this.setStencilOperationFail(this._cachedStencilOperationFail),this.setStencilOperationDepthFail(this._cachedStencilOperationDepthFail),this.setStencilFunctionReference(this._cachedStencilReference)},Engine.prototype.setDirectViewport=function(e,t,r,n){var i=this._cachedViewport;return this._cachedViewport=null,this._viewport(e,t,r,n),i},Engine.prototype.scissorClear=function(e,t,r,n,i){this.enableScissor(e,t,r,n),this.clear(i,!0,!0,!0),this.disableScissor()},Engine.prototype.enableScissor=function(e,t,r,n){var i=this._gl;i.enable(i.SCISSOR_TEST),i.scissor(e,t,r,n)},Engine.prototype.disableScissor=function(){var e=this._gl;e.disable(e.SCISSOR_TEST)},Engine.prototype._reportDrawCall=function(){this._drawCalls.addCount(1,!1)},Engine.prototype.initWebVR=function(){throw a["_DevTools"].WarnImport("WebVRCamera")},Engine.prototype._prepareVRComponent=function(){},Engine.prototype._connectVREvents=function(e,t){},Engine.prototype._submitVRFrame=function(){},Engine.prototype.disableVR=function(){},Engine.prototype.isVRPresenting=function(){return!1},Engine.prototype._requestVRFrame=function(){},Engine.prototype._loadFileAsync=function(e,t,r){var n=this;return new Promise((function(i,o){n._loadFile(e,(function(e){i(e)}),void 0,t,r,(function(e,t){o(t)}))}))},Engine.prototype.getVertexShaderSource=function(e){var t=this._gl.getAttachedShaders(e);return t?this._gl.getShaderSource(t[0]):null},Engine.prototype.getFragmentShaderSource=function(e){var t=this._gl.getAttachedShaders(e);return t?this._gl.getShaderSource(t[1]):null},Engine.prototype.setDepthStencilTexture=function(e,t,r){void 0!==e&&(t&&(this._boundUniforms[e]=t),r&&r.depthStencilTexture?this._setTexture(e,r,!1,!0):this._setTexture(e,null))},Engine.prototype.setTextureFromPostProcess=function(e,t){this._bindTexture(e,t?t._textures.data[t._currentRenderTextureInd]:null)},Engine.prototype.setTextureFromPostProcessOutput=function(e,t){this._bindTexture(e,t?t._outputTexture:null)},Engine.prototype._rebuildBuffers=function(){for(var t=0,r=this.scenes;t<r.length;t++){var n=r[t];n.resetCachedMaterial(),n._rebuildGeometries(),n._rebuildTextures()}e.prototype._rebuildBuffers.call(this)},Engine.prototype._renderFrame=function(){for(var e=0;e<this._activeRenderLoops.length;e++){var t=this._activeRenderLoops[e];t()}},Engine.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e&&(this.beginFrame(),this._renderViews()||this._renderFrame(),this.endFrame())}this._activeRenderLoops.length>0?this.customAnimationFrameRequester?(this.customAnimationFrameRequester.requestID=this._queueNewFrame(this.customAnimationFrameRequester.renderFunction||this._boundRenderFunction,this.customAnimationFrameRequester),this._frameHandler=this.customAnimationFrameRequester.requestID):this.isVRPresenting()?this._requestVRFrame():this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()):this._renderingQueueLaunched=!1},Engine.prototype._renderViews=function(){return!1},Engine.prototype.switchFullscreen=function(e){this.isFullscreen?this.exitFullscreen():this.enterFullscreen(e)},Engine.prototype.enterFullscreen=function(e){this.isFullscreen||(this._pointerLockRequested=e,this._renderingCanvas&&Engine._RequestFullscreen(this._renderingCanvas))},Engine.prototype.exitFullscreen=function(){this.isFullscreen&&Engine._ExitFullscreen()},Engine.prototype.enterPointerlock=function(){this._renderingCanvas&&Engine._RequestPointerlock(this._renderingCanvas)},Engine.prototype.exitPointerlock=function(){Engine._ExitPointerlock()},Engine.prototype.beginFrame=function(){this._measureFps(),this.onBeginFrameObservable.notifyObservers(this),e.prototype.beginFrame.call(this)},Engine.prototype.endFrame=function(){e.prototype.endFrame.call(this),this._submitVRFrame(),this.onEndFrameObservable.notifyObservers(this)},Engine.prototype.resize=function(){this.isVRPresenting()||e.prototype.resize.call(this)},Engine.prototype.setSize=function(t,r){if(!this._renderingCanvas)return!1;if(!e.prototype.setSize.call(this,t,r))return!1;if(this.scenes){for(var n=0;n<this.scenes.length;n++)for(var i=this.scenes[n],o=0;o<i.cameras.length;o++){var s=i.cameras[o];s._currentRenderId=0}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0},Engine.prototype._deletePipelineContext=function(t){var r=t;r&&r.program&&r.transformFeedback&&(this.deleteTransformFeedback(r.transformFeedback),r.transformFeedback=null),e.prototype._deletePipelineContext.call(this,t)},Engine.prototype.createShaderProgram=function(t,r,n,i,o,s){void 0===s&&(s=null),o=o||this._gl,this.onBeforeShaderCompilationObservable.notifyObservers(this);var a=e.prototype.createShaderProgram.call(this,t,r,n,i,o,s);return this.onAfterShaderCompilationObservable.notifyObservers(this),a},Engine.prototype._createShaderProgram=function(e,t,r,n,i){void 0===i&&(i=null);var o=n.createProgram();if(e.program=o,!o)throw new Error("Unable to create program");if(n.attachShader(o,t),n.attachShader(o,r),this.webGLVersion>1&&i){var s=this.createTransformFeedback();this.bindTransformFeedback(s),this.setTranformFeedbackVaryings(o,i),e.transformFeedback=s}return n.linkProgram(o),this.webGLVersion>1&&i&&this.bindTransformFeedback(null),e.context=n,e.vertexShader=t,e.fragmentShader=r,e.isParallelCompiled||this._finalizePipelineContext(e),o},Engine.prototype._releaseTexture=function(t){e.prototype._releaseTexture.call(this,t),this.scenes.forEach((function(e){e.postProcesses.forEach((function(e){e._outputTexture==t&&(e._outputTexture=null)})),e.cameras.forEach((function(e){e._postProcesses.forEach((function(e){e&&e._outputTexture==t&&(e._outputTexture=null)}))}))}))},Engine.prototype._rescaleTexture=function(e,t,r,n,i){var o=this;this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);var s=this.createRenderTargetTexture({width:t.width,height:t.height},{generateMipMaps:!1,type:0,samplingMode:2,generateDepthBuffer:!1,generateStencilBuffer:!1});!this._rescalePostProcess&&Engine._RescalePostProcessFactory&&(this._rescalePostProcess=Engine._RescalePostProcessFactory(this)),this._rescalePostProcess.getEffect().executeWhenCompiled((function(){o._rescalePostProcess.onApply=function(t){t._bindTexture("textureSampler",e)};var a=r;a||(a=o.scenes[o.scenes.length-1]),a.postProcessManager.directRender([o._rescalePostProcess],s,!0),o._bindTextureDirectly(o._gl.TEXTURE_2D,t,!0),o._gl.copyTexImage2D(o._gl.TEXTURE_2D,0,n,0,0,t.width,t.height,0),o.unBindFramebuffer(s),o._releaseTexture(s),i&&i()}))},Engine.prototype.getFps=function(){return this._fps},Engine.prototype.getDeltaTime=function(){return this._deltaTime},Engine.prototype._measureFps=function(){this._performanceMonitor.sampleFrame(),this._fps=this._performanceMonitor.averageFPS,this._deltaTime=this._performanceMonitor.instantaneousFrameTime||0},Engine.prototype._uploadImageToTexture=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=this._gl,o=this._getWebGLTextureType(e.type),s=this._getInternalFormat(e.format),a=this._getRGBABufferInternalSizedFormat(e.type,s),u=e.isCube?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D;this._bindTextureDirectly(u,e,!0),this._unpackFlipY(e.invertY);var c=i.TEXTURE_2D;e.isCube&&(c=i.TEXTURE_CUBE_MAP_POSITIVE_X+r),i.texImage2D(c,n,a,s,o,t),this._bindTextureDirectly(u,null,!0)},Engine.prototype.updateRenderTargetTextureSampleCount=function(e,t){if(this.webGLVersion<2||!e)return 1;if(e.samples===t)return t;var r=this._gl;if(t=Math.min(t,this.getCaps().maxMSAASamples),e._depthStencilBuffer&&(r.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(r.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null),e._MSAARenderBuffer&&(r.deleteRenderbuffer(e._MSAARenderBuffer),e._MSAARenderBuffer=null),t>1&&r.renderbufferStorageMultisample){var n=r.createFramebuffer();if(!n)throw new Error("Unable to create multi sampled framebuffer");e._MSAAFramebuffer=n,this._bindUnboundFramebuffer(e._MSAAFramebuffer);var i=r.createRenderbuffer();if(!i)throw new Error("Unable to create multi sampled framebuffer");r.bindRenderbuffer(r.RENDERBUFFER,i),r.renderbufferStorageMultisample(r.RENDERBUFFER,t,this._getRGBAMultiSampleBufferFormat(e.type),e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i),e._MSAARenderBuffer=i}else this._bindUnboundFramebuffer(e._framebuffer);return e.samples=t,e._depthStencilBuffer=this._setupFramebufferDepthAttachments(e._generateStencilBuffer,e._generateDepthBuffer,e.width,e.height,t),this._bindUnboundFramebuffer(null),t},Engine.prototype.updateTextureComparisonFunction=function(e,t){if(1!==this.webGLVersion){var r=this._gl;e.isCube?(this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,e,!0),0===t?(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_FUNC,515),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_MODE,r.NONE)):(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_FUNC,t),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null)):(this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0),0===t?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_FUNC,515),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_MODE,r.NONE)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_FUNC,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)),e._comparisonFunction=t}else h["Logger"].Error("WebGL 1 does not support texture comparison.")},Engine.prototype.createInstancesBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create instance buffer");var r=new d["WebGLDataBuffer"](t);return r.capacity=e,this.bindArrayBuffer(r),this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.DYNAMIC_DRAW),r},Engine.prototype.deleteInstancesBuffer=function(e){this._gl.deleteBuffer(e)},Engine.prototype._clientWaitAsync=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=10);var n=this._gl;return new Promise((function(i,o){var check=function(){var s=n.clientWaitSync(e,t,0);s!=n.WAIT_FAILED?s!=n.TIMEOUT_EXPIRED?i():setTimeout(check,r):o()};check()}))},Engine.prototype._readPixelsAsync=function(e,t,r,n,i,o,s){if(this._webGLVersion<2)throw new Error("_readPixelsAsync only work on WebGL2+");var a=this._gl,u=a.createBuffer();a.bindBuffer(a.PIXEL_PACK_BUFFER,u),a.bufferData(a.PIXEL_PACK_BUFFER,s.byteLength,a.STREAM_READ),a.readPixels(e,t,r,n,i,o,0),a.bindBuffer(a.PIXEL_PACK_BUFFER,null);var c=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);return c?(a.flush(),this._clientWaitAsync(c,0,10).then((function(){return a.deleteSync(c),a.bindBuffer(a.PIXEL_PACK_BUFFER,u),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,s),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.deleteBuffer(u),s}))):null},Engine.prototype.dispose=function(){this.hideLoadingUI(),this.onNewSceneAddedObservable.clear();while(this.postProcesses.length)this.postProcesses[0].dispose();this._rescalePostProcess&&this._rescalePostProcess.dispose();while(this.scenes.length)this.scenes[0].dispose();1===Engine.Instances.length&&Engine.audioEngine&&Engine.audioEngine.dispose(),this.disableVR(),o["DomManagement"].IsWindowObjectExist()&&(window.removeEventListener("blur",this._onBlur),window.removeEventListener("focus",this._onFocus),this._renderingCanvas&&(this._renderingCanvas.removeEventListener("focus",this._onCanvasFocus),this._renderingCanvas.removeEventListener("blur",this._onCanvasBlur),this._renderingCanvas.removeEventListener("pointerout",this._onCanvasPointerOut)),o["DomManagement"].IsDocumentAvailable()&&(document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),document.removeEventListener("pointerlockchange",this._onPointerLockChange),document.removeEventListener("mspointerlockchange",this._onPointerLockChange),document.removeEventListener("mozpointerlockchange",this._onPointerLockChange),document.removeEventListener("webkitpointerlockchange",this._onPointerLockChange))),e.prototype.dispose.call(this);var t=Engine.Instances.indexOf(this);t>=0&&Engine.Instances.splice(t,1),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()},Engine.prototype._disableTouchAction=function(){this._renderingCanvas&&this._renderingCanvas.setAttribute&&(this._renderingCanvas.setAttribute("touch-action","none"),this._renderingCanvas.style.touchAction="none",this._renderingCanvas.style.msTouchAction="none")},Engine.prototype.displayLoadingUI=function(){if(o["DomManagement"].IsWindowObjectExist()){var e=this.loadingScreen;e&&e.displayLoadingUI()}},Engine.prototype.hideLoadingUI=function(){if(o["DomManagement"].IsWindowObjectExist()){var e=this._loadingScreen;e&&e.hideLoadingUI()}},Object.defineProperty(Engine.prototype,"loadingScreen",{get:function(){return!this._loadingScreen&&this._renderingCanvas&&(this._loadingScreen=Engine.DefaultLoadingScreenFactory(this._renderingCanvas)),this._loadingScreen},set:function(e){this._loadingScreen=e},enumerable:!1,configurable:!0}),Object.defineProperty(Engine.prototype,"loadingUIText",{set:function(e){this.loadingScreen.loadingUIText=e},enumerable:!1,configurable:!0}),Object.defineProperty(Engine.prototype,"loadingUIBackgroundColor",{set:function(e){this.loadingScreen.loadingUIBackgroundColor=e},enumerable:!1,configurable:!0}),Engine._RequestPointerlock=function(e){e.requestPointerLock=e.requestPointerLock||e.msRequestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock&&e.requestPointerLock()},Engine._ExitPointerlock=function(){var e=document;document.exitPointerLock=document.exitPointerLock||e.msExitPointerLock||e.mozExitPointerLock||e.webkitExitPointerLock,document.exitPointerLock&&document.exitPointerLock()},Engine._RequestFullscreen=function(e){var t=e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen;t&&t.call(e)},Engine._ExitFullscreen=function(){var e=document;document.exitFullscreen?document.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msCancelFullScreen&&e.msCancelFullScreen()},Engine.ALPHA_DISABLE=0,Engine.ALPHA_ADD=1,Engine.ALPHA_COMBINE=2,Engine.ALPHA_SUBTRACT=3,Engine.ALPHA_MULTIPLY=4,Engine.ALPHA_MAXIMIZED=5,Engine.ALPHA_ONEONE=6,Engine.ALPHA_PREMULTIPLIED=7,Engine.ALPHA_PREMULTIPLIED_PORTERDUFF=8,Engine.ALPHA_INTERPOLATE=9,Engine.ALPHA_SCREENMODE=10,Engine.DELAYLOADSTATE_NONE=0,Engine.DELAYLOADSTATE_LOADED=1,Engine.DELAYLOADSTATE_LOADING=2,Engine.DELAYLOADSTATE_NOTLOADED=4,Engine.NEVER=512,Engine.ALWAYS=519,Engine.LESS=513,Engine.EQUAL=514,Engine.LEQUAL=515,Engine.GREATER=516,Engine.GEQUAL=518,Engine.NOTEQUAL=517,Engine.KEEP=7680,Engine.REPLACE=7681,Engine.INCR=7682,Engine.DECR=7683,Engine.INVERT=5386,Engine.INCR_WRAP=34055,Engine.DECR_WRAP=34056,Engine.TEXTURE_CLAMP_ADDRESSMODE=0,Engine.TEXTURE_WRAP_ADDRESSMODE=1,Engine.TEXTURE_MIRROR_ADDRESSMODE=2,Engine.TEXTUREFORMAT_ALPHA=0,Engine.TEXTUREFORMAT_LUMINANCE=1,Engine.TEXTUREFORMAT_LUMINANCE_ALPHA=2,Engine.TEXTUREFORMAT_RGB=4,Engine.TEXTUREFORMAT_RGBA=5,Engine.TEXTUREFORMAT_RED=6,Engine.TEXTUREFORMAT_R=6,Engine.TEXTUREFORMAT_RG=7,Engine.TEXTUREFORMAT_RED_INTEGER=8,Engine.TEXTUREFORMAT_R_INTEGER=8,Engine.TEXTUREFORMAT_RG_INTEGER=9,Engine.TEXTUREFORMAT_RGB_INTEGER=10,Engine.TEXTUREFORMAT_RGBA_INTEGER=11,Engine.TEXTURETYPE_UNSIGNED_BYTE=0,Engine.TEXTURETYPE_UNSIGNED_INT=0,Engine.TEXTURETYPE_FLOAT=1,Engine.TEXTURETYPE_HALF_FLOAT=2,Engine.TEXTURETYPE_BYTE=3,Engine.TEXTURETYPE_SHORT=4,Engine.TEXTURETYPE_UNSIGNED_SHORT=5,Engine.TEXTURETYPE_INT=6,Engine.TEXTURETYPE_UNSIGNED_INTEGER=7,Engine.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=8,Engine.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=9,Engine.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=10,Engine.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=11,Engine.TEXTURETYPE_UNSIGNED_INT_24_8=12,Engine.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=13,Engine.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=14,Engine.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=15,Engine.TEXTURE_NEAREST_SAMPLINGMODE=1,Engine.TEXTURE_BILINEAR_SAMPLINGMODE=2,Engine.TEXTURE_TRILINEAR_SAMPLINGMODE=3,Engine.TEXTURE_NEAREST_NEAREST_MIPLINEAR=8,Engine.TEXTURE_LINEAR_LINEAR_MIPNEAREST=11,Engine.TEXTURE_LINEAR_LINEAR_MIPLINEAR=3,Engine.TEXTURE_NEAREST_NEAREST_MIPNEAREST=4,Engine.TEXTURE_NEAREST_LINEAR_MIPNEAREST=5,Engine.TEXTURE_NEAREST_LINEAR_MIPLINEAR=6,Engine.TEXTURE_NEAREST_LINEAR=7,Engine.TEXTURE_NEAREST_NEAREST=1,Engine.TEXTURE_LINEAR_NEAREST_MIPNEAREST=9,Engine.TEXTURE_LINEAR_NEAREST_MIPLINEAR=10,Engine.TEXTURE_LINEAR_LINEAR=2,Engine.TEXTURE_LINEAR_NEAREST=12,Engine.TEXTURE_EXPLICIT_MODE=0,Engine.TEXTURE_SPHERICAL_MODE=1,Engine.TEXTURE_PLANAR_MODE=2,Engine.TEXTURE_CUBIC_MODE=3,Engine.TEXTURE_PROJECTION_MODE=4,Engine.TEXTURE_SKYBOX_MODE=5,Engine.TEXTURE_INVCUBIC_MODE=6,Engine.TEXTURE_EQUIRECTANGULAR_MODE=7,Engine.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=8,Engine.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,Engine.SCALEMODE_FLOOR=1,Engine.SCALEMODE_NEAREST=2,Engine.SCALEMODE_CEILING=3,Engine._RescalePostProcessFactory=null,Engine}(u["ThinEngine"]))},"./node_modules/@babylonjs/core/Engines/engineStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EngineStore",(function(){return n}));var n=function(){function EngineStore(){}return Object.defineProperty(EngineStore,"LastCreatedEngine",{get:function(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(EngineStore,"LastCreatedScene",{get:function(){return this._LastCreatedScene},enumerable:!1,configurable:!0}),EngineStore.Instances=new Array,EngineStore._LastCreatedScene=null,EngineStore.UseFallbackTexture=!0,EngineStore.FallbackTexture="",EngineStore}()},"./node_modules/@babylonjs/core/Engines/performanceConfigurator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PerformanceConfigurator",(function(){return n}));var n=function(){function PerformanceConfigurator(){}return PerformanceConfigurator.SetMatrixPrecision=function(e){if(PerformanceConfigurator.MatrixTrackPrecisionChange=!1,e&&!PerformanceConfigurator.MatrixUse64Bits&&PerformanceConfigurator.MatrixTrackedMatrices)for(var t=0;t<PerformanceConfigurator.MatrixTrackedMatrices.length;++t){var r=PerformanceConfigurator.MatrixTrackedMatrices[t],n=r._m;r._m=new Array(16);for(var i=0;i<16;++i)r._m[i]=n[i]}PerformanceConfigurator.MatrixUse64Bits=e,PerformanceConfigurator.MatrixCurrentType=PerformanceConfigurator.MatrixUse64Bits?Array:Float32Array,PerformanceConfigurator.MatrixTrackedMatrices=null},PerformanceConfigurator.MatrixUse64Bits=!1,PerformanceConfigurator.MatrixTrackPrecisionChange=!0,PerformanceConfigurator.MatrixCurrentType=Float32Array,PerformanceConfigurator.MatrixTrackedMatrices=[],PerformanceConfigurator}()},"./node_modules/@babylonjs/core/Engines/thinEngine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ThinEngine",(function(){return M}));var n=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),i=r("./node_modules/@babylonjs/core/Materials/effect.js"),o=r("./node_modules/@babylonjs/core/Misc/devTools.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/States/depthCullingState.js"),u=r("./node_modules/@babylonjs/core/States/stencilState.js"),c=r("./node_modules/@babylonjs/core/States/alphaCullingState.js"),l=r("./node_modules/@babylonjs/core/Materials/Textures/internalTexture.js"),d=r("./node_modules/@babylonjs/core/Misc/logger.js"),h=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),f=r("./node_modules/@babylonjs/core/Engines/WebGL/webGLShaderProcessors.js"),p=r("./node_modules/@babylonjs/core/Engines/WebGL/webGL2ShaderProcessors.js"),m=r("./node_modules/@babylonjs/core/Meshes/WebGL/webGLDataBuffer.js"),_=r("./node_modules/@babylonjs/core/Engines/WebGL/webGLPipelineContext.js"),g=r("./node_modules/@babylonjs/core/Misc/canvasGenerator.js"),b=r("./node_modules/@babylonjs/core/Engines/performanceConfigurator.js"),v=function(){function BufferPointer(){}return BufferPointer}(),M=function(){function ThinEngine(e,t,r,n){var i=this;void 0===n&&(n=!1),this.forcePOTTextures=!1,this.isFullscreen=!1,this.cullBackFaces=!0,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this.validateShaderPrograms=!1,this.useReverseDepthBuffer=!1,this.disableUniformBuffers=!1,this._uniformBuffers=new Array,this._webGLVersion=1,this._windowIsBackground=!1,this._highPrecisionShadersAllowed=!0,this._badOS=!1,this._badDesktopOS=!1,this._renderingQueueLaunched=!1,this._activeRenderLoops=new Array,this.onContextLostObservable=new s["Observable"],this.onContextRestoredObservable=new s["Observable"],this._contextWasLost=!1,this._doNotHandleContextLost=!1,this.disableVertexArrayObjects=!1,this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new a["DepthCullingState"],this._stencilState=new u["StencilState"],this._alphaState=new c["AlphaState"],this._alphaMode=1,this._alphaEquation=0,this._internalTexturesCache=new Array,this._activeChannel=0,this._currentTextureChannel=-1,this._boundTexturesCache={},this._compiledEffects={},this._vertexAttribArraysEnabled=[],this._uintIndicesCurrentlySet=!1,this._currentBoundBuffer=new Array,this._currentFramebuffer=null,this._dummyFramebuffer=null,this._currentBufferPointers=new Array,this._currentInstanceLocations=new Array,this._currentInstanceBuffers=new Array,this._vaoRecordInProgress=!1,this._mustWipeVertexAttributes=!1,this._nextFreeTextureSlots=new Array,this._maxSimultaneousTextures=0,this._activeRequests=new Array,this._transformTextureUrl=null,this.hostInformation={isMobile:!1},this.premultipliedAlpha=!0,this.onBeforeTextureInitObservable=new s["Observable"],this._viewportCached={x:0,y:0,z:0,w:0},this._unpackFlipYCached=null,this.enableUnpackFlipYCached=!0,this._getDepthStencilBuffer=function(e,t,r,n,o,s){var a=i._gl,u=a.createRenderbuffer();return a.bindRenderbuffer(a.RENDERBUFFER,u),r>1&&a.renderbufferStorageMultisample?a.renderbufferStorageMultisample(a.RENDERBUFFER,r,o,e,t):a.renderbufferStorage(a.RENDERBUFFER,n,e,t),a.framebufferRenderbuffer(a.FRAMEBUFFER,s,a.RENDERBUFFER,u),a.bindRenderbuffer(a.RENDERBUFFER,null),u},this._boundUniforms={};var o=null;if(e){if(r=r||{},b["PerformanceConfigurator"].SetMatrixPrecision(!!r.useHighPrecisionMatrix),e.getContext){if(o=e,this._renderingCanvas=o,null!=t&&(r.antialias=t),void 0===r.deterministicLockstep&&(r.deterministicLockstep=!1),void 0===r.lockstepMaxSteps&&(r.lockstepMaxSteps=4),void 0===r.timeStep&&(r.timeStep=1/60),void 0===r.preserveDrawingBuffer&&(r.preserveDrawingBuffer=!1),void 0===r.audioEngine&&(r.audioEngine=!0),void 0===r.stencil&&(r.stencil=!0),!1===r.premultipliedAlpha&&(this.premultipliedAlpha=!1),void 0===r.xrCompatible&&(r.xrCompatible=!0),this._doNotHandleContextLost=!!r.doNotHandleContextLost,navigator&&navigator.userAgent){var l=navigator.userAgent;this.hostInformation.isMobile=-1!==l.indexOf("Mobile");for(var m=0,_=ThinEngine.ExceptionList;m<_.length;m++){var g=_[m],M=g.key,T=g.targets,S=new RegExp(M);if(S.test(l)){if(g.capture&&g.captureConstraint){var C=g.capture,E=g.captureConstraint,P=new RegExp(C),A=P.exec(l);if(A&&A.length>0){var j=parseInt(A[A.length-1]);if(j>=E)continue}}for(var O=0,R=T;O<R.length;O++){var I=R[O];switch(I){case"uniformBuffer":this.disableUniformBuffers=!0;break;case"vao":this.disableVertexArrayObjects=!0;break}}}}}if(this._doNotHandleContextLost||(this._onContextLost=function(e){e.preventDefault(),i._contextWasLost=!0,d["Logger"].Warn("WebGL context lost."),i.onContextLostObservable.notifyObservers(i)},this._onContextRestored=function(){setTimeout((function(){i._initGLContext(),i._rebuildEffects(),i._rebuildInternalTextures(),i._rebuildBuffers(),i.wipeCaches(!0),d["Logger"].Warn("WebGL context successfully restored."),i.onContextRestoredObservable.notifyObservers(i),i._contextWasLost=!1}),0)},o.addEventListener("webglcontextlost",this._onContextLost,!1),o.addEventListener("webglcontextrestored",this._onContextRestored,!1),r.powerPreference="high-performance"),!r.disableWebGL2Support)try{this._gl=o.getContext("webgl2",r)||o.getContext("experimental-webgl2",r),this._gl&&(this._webGLVersion=2,this._gl.deleteQuery||(this._webGLVersion=1))}catch(L){}if(!this._gl){if(!o)throw new Error("The provided canvas is null or undefined.");try{this._gl=o.getContext("webgl",r)||o.getContext("experimental-webgl",r)}catch(L){throw new Error("WebGL not supported")}}if(!this._gl)throw new Error("WebGL not supported")}else{this._gl=e,this._renderingCanvas=this._gl.canvas,this._gl.renderbufferStorageMultisample&&(this._webGLVersion=2);var w=this._gl.getContextAttributes();w&&(r.stencil=w.stencil)}this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),void 0!==r.useHighPrecisionFloats&&(this._highPrecisionShadersAllowed=r.useHighPrecisionFloats);var D=h["DomManagement"].IsWindowObjectExist()&&window.devicePixelRatio||1,F=r.limitDeviceRatio||D;this._hardwareScalingLevel=n?1/Math.min(F,D):1,this.resize(),this._isStencilEnable=!!r.stencil,this._initGLContext();for(var B=0;B<this._caps.maxVertexAttribs;B++)this._currentBufferPointers[B]=new v;this.webGLVersion>1?this._shaderProcessor=new p["WebGL2ShaderProcessor"]:this._shaderProcessor=new f["WebGLShaderProcessor"],this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this._creationOptions=r,console.log("Babylon.js v"+ThinEngine.Version+" - "+this.description)}}return Object.defineProperty(ThinEngine,"NpmPackage",{get:function(){return"babylonjs@4.2.0"},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine,"Version",{get:function(){return"4.2.0"},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"description",{get:function(){var e="WebGL"+this.webGLVersion;return this._caps.parallelShaderCompile&&(e+=" - Parallel shader compilation"),e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine,"ShadersRepository",{get:function(){return i["Effect"].ShadersRepository},set:function(e){i["Effect"].ShadersRepository=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"supportsUniformBuffers",{get:function(){return this.webGLVersion>1&&!this.disableUniformBuffers},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"_shouldUseHighPrecisionShader",{get:function(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"needPOTTextures",{get:function(){return this._webGLVersion<2||this.forcePOTTextures},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"doNotHandleContextLost",{get:function(){return this._doNotHandleContextLost},set:function(e){this._doNotHandleContextLost=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"_supportsHardwareTextureRescaling",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"framebufferDimensionsObject",{set:function(e){this._framebufferDimensionsObject=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"currentViewport",{get:function(){return this._cachedViewport},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"emptyTexture",{get:function(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"emptyTexture3D",{get:function(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"emptyTexture2DArray",{get:function(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"emptyCubeTexture",{get:function(){if(!this._emptyCubeTexture){var e=new Uint8Array(4),t=[e,e,e,e,e,e];this._emptyCubeTexture=this.createRawCubeTexture(t,1,5,0,!1,!1,1)}return this._emptyCubeTexture},enumerable:!1,configurable:!0}),ThinEngine.prototype._rebuildInternalTextures=function(){for(var e=this._internalTexturesCache.slice(),t=0,r=e;t<r.length;t++){var n=r[t];n._rebuild()}},ThinEngine.prototype._rebuildEffects=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e];t._prepareEffect()}i["Effect"].ResetCache()},ThinEngine.prototype.areAllEffectsReady=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e];if(!t.isReady())return!1}return!0},ThinEngine.prototype._rebuildBuffers=function(){for(var e=0,t=this._uniformBuffers;e<t.length;e++){var r=t[e];r._rebuild()}},ThinEngine.prototype._initGLContext=function(){this._caps={maxTexturesImageUnits:this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),maxCombinedTexturesImageUnits:this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),maxVertexTextureImageUnits:this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureSize:this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),maxSamples:this._webGLVersion>1?this._gl.getParameter(this._gl.MAX_SAMPLES):1,maxCubemapTextureSize:this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),maxRenderTextureSize:this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),maxVertexAttribs:this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),maxVaryingVectors:this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),maxFragmentUniformVectors:this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),maxVertexUniformVectors:this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),parallelShaderCompile:this._gl.getExtension("KHR_parallel_shader_compile"),standardDerivatives:this._webGLVersion>1||null!==this._gl.getExtension("OES_standard_derivatives"),maxAnisotropy:1,astc:this._gl.getExtension("WEBGL_compressed_texture_astc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"),bptc:this._gl.getExtension("EXT_texture_compression_bptc")||this._gl.getExtension("WEBKIT_EXT_texture_compression_bptc"),s3tc:this._gl.getExtension("WEBGL_compressed_texture_s3tc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),pvrtc:this._gl.getExtension("WEBGL_compressed_texture_pvrtc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:this._gl.getExtension("WEBGL_compressed_texture_etc1")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),etc2:this._gl.getExtension("WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBGL_compressed_texture_es3_0"),textureAnisotropicFilterExtension:this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"),uintIndices:this._webGLVersion>1||null!==this._gl.getExtension("OES_element_index_uint"),fragmentDepthSupported:this._webGLVersion>1||null!==this._gl.getExtension("EXT_frag_depth"),highPrecisionShaderSupported:!1,timerQuery:this._gl.getExtension("EXT_disjoint_timer_query_webgl2")||this._gl.getExtension("EXT_disjoint_timer_query"),canUseTimestampForTimerQuery:!1,drawBuffersExtension:!1,maxMSAASamples:1,colorBufferFloat:this._webGLVersion>1&&this._gl.getExtension("EXT_color_buffer_float"),textureFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_float")),textureHalfFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_half_float")),textureHalfFloatRender:!1,textureFloatLinearFiltering:!1,textureFloatRender:!1,textureHalfFloatLinearFiltering:!1,vertexArrayObject:!1,instancedArrays:!1,textureLOD:!!(this._webGLVersion>1||this._gl.getExtension("EXT_shader_texture_lod")),blendMinMax:!1,multiview:this._gl.getExtension("OVR_multiview2"),oculusMultiview:this._gl.getExtension("OCULUS_multiview"),depthTextureExtension:!1},this._glVersion=this._gl.getParameter(this._gl.VERSION);var e=this._gl.getExtension("WEBGL_debug_renderer_info");if(null!=e&&(this._glRenderer=this._gl.getParameter(e.UNMASKED_RENDERER_WEBGL),this._glVendor=this._gl.getParameter(e.UNMASKED_VENDOR_WEBGL)),this._glVendor||(this._glVendor="Unknown vendor"),this._glRenderer||(this._glRenderer="Unknown renderer"),36193!==this._gl.HALF_FLOAT_OES&&(this._gl.HALF_FLOAT_OES=36193),34842!==this._gl.RGBA16F&&(this._gl.RGBA16F=34842),34836!==this._gl.RGBA32F&&(this._gl.RGBA32F=34836),35056!==this._gl.DEPTH24_STENCIL8&&(this._gl.DEPTH24_STENCIL8=35056),this._caps.timerQuery&&(1===this._webGLVersion&&(this._gl.getQuery=this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)),this._caps.canUseTimestampForTimerQuery=this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT,this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)>0),this._caps.maxAnisotropy=this._caps.textureAnisotropicFilterExtension?this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this._caps.textureFloatLinearFiltering=!(!this._caps.textureFloat||!this._gl.getExtension("OES_texture_float_linear")),this._caps.textureFloatRender=!(!this._caps.textureFloat||!this._canRenderToFloatFramebuffer()),this._caps.textureHalfFloatLinearFiltering=!!(this._webGLVersion>1||this._caps.textureHalfFloat&&this._gl.getExtension("OES_texture_half_float_linear")),this._webGLVersion>1&&5131!==this._gl.HALF_FLOAT_OES&&(this._gl.HALF_FLOAT_OES=5131),this._caps.textureHalfFloatRender=this._caps.textureHalfFloat&&this._canRenderToHalfFloatFramebuffer(),this._webGLVersion>1)this._caps.drawBuffersExtension=!0,this._caps.maxMSAASamples=this._gl.getParameter(this._gl.MAX_SAMPLES);else{var t=this._gl.getExtension("WEBGL_draw_buffers");if(null!==t){this._caps.drawBuffersExtension=!0,this._gl.drawBuffers=t.drawBuffersWEBGL.bind(t),this._gl.DRAW_FRAMEBUFFER=this._gl.FRAMEBUFFER;for(var r=0;r<16;r++)this._gl["COLOR_ATTACHMENT"+r+"_WEBGL"]=t["COLOR_ATTACHMENT"+r+"_WEBGL"]}}if(this._webGLVersion>1)this._caps.depthTextureExtension=!0;else{var n=this._gl.getExtension("WEBGL_depth_texture");null!=n&&(this._caps.depthTextureExtension=!0,this._gl.UNSIGNED_INT_24_8=n.UNSIGNED_INT_24_8_WEBGL)}if(this.disableVertexArrayObjects)this._caps.vertexArrayObject=!1;else if(this._webGLVersion>1)this._caps.vertexArrayObject=!0;else{var i=this._gl.getExtension("OES_vertex_array_object");null!=i&&(this._caps.vertexArrayObject=!0,this._gl.createVertexArray=i.createVertexArrayOES.bind(i),this._gl.bindVertexArray=i.bindVertexArrayOES.bind(i),this._gl.deleteVertexArray=i.deleteVertexArrayOES.bind(i))}if(this._webGLVersion>1)this._caps.instancedArrays=!0;else{var o=this._gl.getExtension("ANGLE_instanced_arrays");null!=o?(this._caps.instancedArrays=!0,this._gl.drawArraysInstanced=o.drawArraysInstancedANGLE.bind(o),this._gl.drawElementsInstanced=o.drawElementsInstancedANGLE.bind(o),this._gl.vertexAttribDivisor=o.vertexAttribDivisorANGLE.bind(o)):this._caps.instancedArrays=!1}if(this._gl.getShaderPrecisionFormat){var s=this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER,this._gl.HIGH_FLOAT),a=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);s&&a&&(this._caps.highPrecisionShaderSupported=0!==s.precision&&0!==a.precision)}if(this._webGLVersion>1)this._caps.blendMinMax=!0;else{var u=this._gl.getExtension("EXT_blend_minmax");null!=u&&(this._caps.blendMinMax=!0,this._gl.MAX=u.MAX_EXT,this._gl.MIN=u.MIN_EXT)}this._depthCullingState.depthTest=!0,this._depthCullingState.depthFunc=this._gl.LEQUAL,this._depthCullingState.depthMask=!0,this._maxSimultaneousTextures=this._caps.maxCombinedTexturesImageUnits;for(var c=0;c<this._maxSimultaneousTextures;c++)this._nextFreeTextureSlots.push(c)},Object.defineProperty(ThinEngine.prototype,"webGLVersion",{get:function(){return this._webGLVersion},enumerable:!1,configurable:!0}),ThinEngine.prototype.getClassName=function(){return"ThinEngine"},Object.defineProperty(ThinEngine.prototype,"isStencilEnable",{get:function(){return this._isStencilEnable},enumerable:!1,configurable:!0}),ThinEngine.prototype._prepareWorkingCanvas=function(){if(!this._workingCanvas){this._workingCanvas=g["CanvasGenerator"].CreateCanvas(1,1);var e=this._workingCanvas.getContext("2d");e&&(this._workingContext=e)}},ThinEngine.prototype.resetTextureCache=function(){for(var e in this._boundTexturesCache)this._boundTexturesCache.hasOwnProperty(e)&&(this._boundTexturesCache[e]=null);this._currentTextureChannel=-1},ThinEngine.prototype.getGlInfo=function(){return{vendor:this._glVendor,renderer:this._glRenderer,version:this._glVersion}},ThinEngine.prototype.setHardwareScalingLevel=function(e){this._hardwareScalingLevel=e,this.resize()},ThinEngine.prototype.getHardwareScalingLevel=function(){return this._hardwareScalingLevel},ThinEngine.prototype.getLoadedTexturesCache=function(){return this._internalTexturesCache},ThinEngine.prototype.getCaps=function(){return this._caps},ThinEngine.prototype.stopRenderLoop=function(e){if(e){var t=this._activeRenderLoops.indexOf(e);t>=0&&this._activeRenderLoops.splice(t,1)}else this._activeRenderLoops=[]},ThinEngine.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;if(!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e){this.beginFrame();for(var t=0;t<this._activeRenderLoops.length;t++){var r=this._activeRenderLoops[t];r()}this.endFrame()}}this._activeRenderLoops.length>0?this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()):this._renderingQueueLaunched=!1},ThinEngine.prototype.getRenderingCanvas=function(){return this._renderingCanvas},ThinEngine.prototype.getHostWindow=function(){return h["DomManagement"].IsWindowObjectExist()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null},ThinEngine.prototype.getRenderWidth=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.width:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferWidth:this._gl.drawingBufferWidth},ThinEngine.prototype.getRenderHeight=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.height:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferHeight:this._gl.drawingBufferHeight},ThinEngine.prototype._queueNewFrame=function(e,t){return ThinEngine.QueueNewFrame(e,t)},ThinEngine.prototype.runRenderLoop=function(e){-1===this._activeRenderLoops.indexOf(e)&&(this._activeRenderLoops.push(e),this._renderingQueueLaunched||(this._renderingQueueLaunched=!0,this._boundRenderFunction=this._renderLoop.bind(this),this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))},ThinEngine.prototype.clear=function(e,t,r,n){void 0===n&&(n=!1),this.applyStates();var i=0;t&&e&&(this._gl.clearColor(e.r,e.g,e.b,void 0!==e.a?e.a:1),i|=this._gl.COLOR_BUFFER_BIT),r&&(this.useReverseDepthBuffer?(this._depthCullingState.depthFunc=this._gl.GREATER,this._gl.clearDepth(0)):this._gl.clearDepth(1),i|=this._gl.DEPTH_BUFFER_BIT),n&&(this._gl.clearStencil(0),i|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(i)},ThinEngine.prototype._viewport=function(e,t,r,n){e===this._viewportCached.x&&t===this._viewportCached.y&&r===this._viewportCached.z&&n===this._viewportCached.w||(this._viewportCached.x=e,this._viewportCached.y=t,this._viewportCached.z=r,this._viewportCached.w=n,this._gl.viewport(e,t,r,n))},ThinEngine.prototype.setViewport=function(e,t,r){var n=t||this.getRenderWidth(),i=r||this.getRenderHeight(),o=e.x||0,s=e.y||0;this._cachedViewport=e,this._viewport(o*n,s*i,n*e.width,i*e.height)},ThinEngine.prototype.beginFrame=function(){},ThinEngine.prototype.endFrame=function(){this._badOS&&this.flushFramebuffer()},ThinEngine.prototype.resize=function(){var e,t;h["DomManagement"].IsWindowObjectExist()?(e=this._renderingCanvas?this._renderingCanvas.clientWidth||this._renderingCanvas.width:window.innerWidth,t=this._renderingCanvas?this._renderingCanvas.clientHeight||this._renderingCanvas.height:window.innerHeight):(e=this._renderingCanvas?this._renderingCanvas.width:100,t=this._renderingCanvas?this._renderingCanvas.height:100),this.setSize(e/this._hardwareScalingLevel,t/this._hardwareScalingLevel)},ThinEngine.prototype.setSize=function(e,t){return!!this._renderingCanvas&&(e|=0,t|=0,(this._renderingCanvas.width!==e||this._renderingCanvas.height!==t)&&(this._renderingCanvas.width=e,this._renderingCanvas.height=t,!0))},ThinEngine.prototype.bindFramebuffer=function(e,t,r,n,i,o,s){void 0===t&&(t=0),void 0===o&&(o=0),void 0===s&&(s=0),this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=e,this._bindUnboundFramebuffer(e._MSAAFramebuffer?e._MSAAFramebuffer:e._framebuffer);var a=this._gl;e.is2DArray?a.framebufferTextureLayer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,e._webGLTexture,o,s):e.isCube&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+t,e._webGLTexture,o);var u=e._depthStencilTexture;if(u){var c=u._generateStencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;e.is2DArray?a.framebufferTextureLayer(a.FRAMEBUFFER,c,u._webGLTexture,o,s):e.isCube?a.framebufferTexture2D(a.FRAMEBUFFER,c,a.TEXTURE_CUBE_MAP_POSITIVE_X+t,u._webGLTexture,o):a.framebufferTexture2D(a.FRAMEBUFFER,c,a.TEXTURE_2D,u._webGLTexture,o)}this._cachedViewport&&!i?this.setViewport(this._cachedViewport,r,n):(r||(r=e.width,o&&(r/=Math.pow(2,o))),n||(n=e.height,o&&(n/=Math.pow(2,o))),this._viewport(0,0,r,n)),this.wipeCaches()},ThinEngine.prototype._bindUnboundFramebuffer=function(e){this._currentFramebuffer!==e&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e),this._currentFramebuffer=e)},ThinEngine.prototype.unBindFramebuffer=function(e,t,r){void 0===t&&(t=!1),this._currentRenderTarget=null;var n=this._gl;if(e._MSAAFramebuffer){if(e._textureArray)return void this.unBindMultiColorAttachmentFramebuffer(e._textureArray,t,r);n.bindFramebuffer(n.READ_FRAMEBUFFER,e._MSAAFramebuffer),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,e._framebuffer),n.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,n.COLOR_BUFFER_BIT,n.NEAREST)}!e.generateMipMaps||t||e.isCube||(this._bindTextureDirectly(n.TEXTURE_2D,e,!0),n.generateMipmap(n.TEXTURE_2D),this._bindTextureDirectly(n.TEXTURE_2D,null)),r&&(e._MSAAFramebuffer&&this._bindUnboundFramebuffer(e._framebuffer),r()),this._bindUnboundFramebuffer(null)},ThinEngine.prototype.flushFramebuffer=function(){this._gl.flush()},ThinEngine.prototype.restoreDefaultFramebuffer=function(){this._currentRenderTarget?this.unBindFramebuffer(this._currentRenderTarget):this._bindUnboundFramebuffer(null),this._cachedViewport&&this.setViewport(this._cachedViewport),this.wipeCaches()},ThinEngine.prototype._resetVertexBufferBinding=function(){this.bindArrayBuffer(null),this._cachedVertexBuffers=null},ThinEngine.prototype.createVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.STATIC_DRAW)},ThinEngine.prototype._createVertexBuffer=function(e,t){var r=this._gl.createBuffer();if(!r)throw new Error("Unable to create vertex buffer");var n=new m["WebGLDataBuffer"](r);return this.bindArrayBuffer(n),e instanceof Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.STATIC_DRAW),this._resetVertexBufferBinding(),n.references=1,n},ThinEngine.prototype.createDynamicVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.DYNAMIC_DRAW)},ThinEngine.prototype._resetIndexBufferBinding=function(){this.bindIndexBuffer(null),this._cachedIndexBuffer=null},ThinEngine.prototype.createIndexBuffer=function(e,t){var r=this._gl.createBuffer(),n=new m["WebGLDataBuffer"](r);if(!r)throw new Error("Unable to create index buffer");this.bindIndexBuffer(n);var i=this._normalizeIndexData(e);return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,i,t?this._gl.DYNAMIC_DRAW:this._gl.STATIC_DRAW),this._resetIndexBufferBinding(),n.references=1,n.is32Bits=4===i.BYTES_PER_ELEMENT,n},ThinEngine.prototype._normalizeIndexData=function(e){if(e instanceof Uint16Array)return e;if(this._caps.uintIndices){if(e instanceof Uint32Array)return e;for(var t=0;t<e.length;t++)if(e[t]>=65535)return new Uint32Array(e);return new Uint16Array(e)}return new Uint16Array(e)},ThinEngine.prototype.bindArrayBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ARRAY_BUFFER)},ThinEngine.prototype.bindUniformBlock=function(e,t,r){var n=e.program,i=this._gl.getUniformBlockIndex(n,t);this._gl.uniformBlockBinding(n,i,r)},ThinEngine.prototype.bindIndexBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ELEMENT_ARRAY_BUFFER)},ThinEngine.prototype.bindBuffer=function(e,t){(this._vaoRecordInProgress||this._currentBoundBuffer[t]!==e)&&(this._gl.bindBuffer(t,e?e.underlyingResource:null),this._currentBoundBuffer[t]=e)},ThinEngine.prototype.updateArrayBuffer=function(e){this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e)},ThinEngine.prototype._vertexAttribPointer=function(e,t,r,n,i,o,s){var a=this._currentBufferPointers[t];if(a){var u=!1;a.active?(a.buffer!==e&&(a.buffer=e,u=!0),a.size!==r&&(a.size=r,u=!0),a.type!==n&&(a.type=n,u=!0),a.normalized!==i&&(a.normalized=i,u=!0),a.stride!==o&&(a.stride=o,u=!0),a.offset!==s&&(a.offset=s,u=!0)):(u=!0,a.active=!0,a.index=t,a.size=r,a.type=n,a.normalized=i,a.stride=o,a.offset=s,a.buffer=e),(u||this._vaoRecordInProgress)&&(this.bindArrayBuffer(e),this._gl.vertexAttribPointer(t,r,n,i,o,s))}},ThinEngine.prototype._bindIndexBufferWithCache=function(e){null!=e&&this._cachedIndexBuffer!==e&&(this._cachedIndexBuffer=e,this.bindIndexBuffer(e),this._uintIndicesCurrentlySet=e.is32Bits)},ThinEngine.prototype._bindVertexBuffersAttributes=function(e,t){var r=t.getAttributesNames();this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var n=0;n<r.length;n++){var i=t.getAttributeLocation(n);if(i>=0){var o=e[r[n]];if(!o)continue;this._gl.enableVertexAttribArray(i),this._vaoRecordInProgress||(this._vertexAttribArraysEnabled[i]=!0);var s=o.getBuffer();s&&(this._vertexAttribPointer(s,i,o.getSize(),o.type,o.normalized,o.byteStride,o.byteOffset),o.getIsInstanced()&&(this._gl.vertexAttribDivisor(i,o.getInstanceDivisor()),this._vaoRecordInProgress||(this._currentInstanceLocations.push(i),this._currentInstanceBuffers.push(s))))}}},ThinEngine.prototype.recordVertexArrayObject=function(e,t,r){var n=this._gl.createVertexArray();return this._vaoRecordInProgress=!0,this._gl.bindVertexArray(n),this._mustWipeVertexAttributes=!0,this._bindVertexBuffersAttributes(e,r),this.bindIndexBuffer(t),this._vaoRecordInProgress=!1,this._gl.bindVertexArray(null),n},ThinEngine.prototype.bindVertexArrayObject=function(e,t){this._cachedVertexArrayObject!==e&&(this._cachedVertexArrayObject=e,this._gl.bindVertexArray(e),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._uintIndicesCurrentlySet=null!=t&&t.is32Bits,this._mustWipeVertexAttributes=!0)},ThinEngine.prototype.bindBuffersDirectly=function(e,t,r,n,i){if(this._cachedVertexBuffers!==e||this._cachedEffectForVertexBuffers!==i){this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=i;var o=i.getAttributesCount();this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var s=0,a=0;a<o;a++)if(a<r.length){var u=i.getAttributeLocation(a);u>=0&&(this._gl.enableVertexAttribArray(u),this._vertexAttribArraysEnabled[u]=!0,this._vertexAttribPointer(e,u,r[a],this._gl.FLOAT,!1,n,s)),s+=4*r[a]}}this._bindIndexBufferWithCache(t)},ThinEngine.prototype._unbindVertexArrayObject=function(){this._cachedVertexArrayObject&&(this._cachedVertexArrayObject=null,this._gl.bindVertexArray(null))},ThinEngine.prototype.bindBuffers=function(e,t,r){this._cachedVertexBuffers===e&&this._cachedEffectForVertexBuffers===r||(this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=r,this._bindVertexBuffersAttributes(e,r)),this._bindIndexBufferWithCache(t)},ThinEngine.prototype.unbindInstanceAttributes=function(){for(var e,t=0,r=this._currentInstanceLocations.length;t<r;t++){var n=this._currentInstanceBuffers[t];e!=n&&n.references&&(e=n,this.bindArrayBuffer(n));var i=this._currentInstanceLocations[t];this._gl.vertexAttribDivisor(i,0)}this._currentInstanceBuffers.length=0,this._currentInstanceLocations.length=0},ThinEngine.prototype.releaseVertexArrayObject=function(e){this._gl.deleteVertexArray(e)},ThinEngine.prototype._releaseBuffer=function(e){return e.references--,0===e.references&&(this._deleteBuffer(e),!0)},ThinEngine.prototype._deleteBuffer=function(e){this._gl.deleteBuffer(e.underlyingResource)},ThinEngine.prototype.updateAndBindInstancesBuffer=function(e,t,r){if(this.bindArrayBuffer(e),t&&this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t),void 0!==r[0].index)this.bindInstancesBuffer(e,r,!0);else for(var n=0;n<4;n++){var i=r[n];this._vertexAttribArraysEnabled[i]||(this._gl.enableVertexAttribArray(i),this._vertexAttribArraysEnabled[i]=!0),this._vertexAttribPointer(e,i,4,this._gl.FLOAT,!1,64,16*n),this._gl.vertexAttribDivisor(i,1),this._currentInstanceLocations.push(i),this._currentInstanceBuffers.push(e)}},ThinEngine.prototype.bindInstancesBuffer=function(e,t,r){void 0===r&&(r=!0),this.bindArrayBuffer(e);var n=0;if(r)for(var i=0;i<t.length;i++){var o=t[i];n+=4*o.attributeSize}for(i=0;i<t.length;i++){o=t[i];void 0===o.index&&(o.index=this._currentEffect.getAttributeLocationByName(o.attributeName)),o.index<0||(this._vertexAttribArraysEnabled[o.index]||(this._gl.enableVertexAttribArray(o.index),this._vertexAttribArraysEnabled[o.index]=!0),this._vertexAttribPointer(e,o.index,o.attributeSize,o.attributeType||this._gl.FLOAT,o.normalized||!1,n,o.offset),this._gl.vertexAttribDivisor(o.index,void 0===o.divisor?1:o.divisor),this._currentInstanceLocations.push(o.index),this._currentInstanceBuffers.push(e))}},ThinEngine.prototype.disableInstanceAttributeByName=function(e){if(this._currentEffect){var t=this._currentEffect.getAttributeLocationByName(e);this.disableInstanceAttribute(t)}},ThinEngine.prototype.disableInstanceAttribute=function(e){var t,r=!1;while(-1!==(t=this._currentInstanceLocations.indexOf(e)))this._currentInstanceLocations.splice(t,1),this._currentInstanceBuffers.splice(t,1),r=!0,t=this._currentInstanceLocations.indexOf(e);r&&(this._gl.vertexAttribDivisor(e,0),this.disableAttributeByIndex(e))},ThinEngine.prototype.disableAttributeByIndex=function(e){this._gl.disableVertexAttribArray(e),this._vertexAttribArraysEnabled[e]=!1,this._currentBufferPointers[e].active=!1},ThinEngine.prototype.draw=function(e,t,r,n){this.drawElementsType(e?0:1,t,r,n)},ThinEngine.prototype.drawPointClouds=function(e,t,r){this.drawArraysType(2,e,t,r)},ThinEngine.prototype.drawUnIndexed=function(e,t,r,n){this.drawArraysType(e?0:1,t,r,n)},ThinEngine.prototype.drawElementsType=function(e,t,r,n){this.applyStates(),this._reportDrawCall();var i=this._drawMode(e),o=this._uintIndicesCurrentlySet?this._gl.UNSIGNED_INT:this._gl.UNSIGNED_SHORT,s=this._uintIndicesCurrentlySet?4:2;n?this._gl.drawElementsInstanced(i,r,o,t*s,n):this._gl.drawElements(i,r,o,t*s)},ThinEngine.prototype.drawArraysType=function(e,t,r,n){this.applyStates(),this._reportDrawCall();var i=this._drawMode(e);n?this._gl.drawArraysInstanced(i,t,r,n):this._gl.drawArrays(i,t,r)},ThinEngine.prototype._drawMode=function(e){switch(e){case 0:return this._gl.TRIANGLES;case 2:return this._gl.POINTS;case 1:return this._gl.LINES;case 3:return this._gl.POINTS;case 4:return this._gl.LINES;case 5:return this._gl.LINE_LOOP;case 6:return this._gl.LINE_STRIP;case 7:return this._gl.TRIANGLE_STRIP;case 8:return this._gl.TRIANGLE_FAN;default:return this._gl.TRIANGLES}},ThinEngine.prototype._reportDrawCall=function(){},ThinEngine.prototype._releaseEffect=function(e){this._compiledEffects[e._key]&&(delete this._compiledEffects[e._key],this._deletePipelineContext(e.getPipelineContext()))},ThinEngine.prototype._deletePipelineContext=function(e){var t=e;t&&t.program&&(t.program.__SPECTOR_rebuildProgram=null,this._gl.deleteProgram(t.program))},ThinEngine.prototype.createEffect=function(e,t,r,n,o,s,a,u,c){var l=e.vertexElement||e.vertex||e.vertexToken||e.vertexSource||e,d=e.fragmentElement||e.fragment||e.fragmentToken||e.fragmentSource||e,h=l+"+"+d+"@"+(o||t.defines);if(this._compiledEffects[h]){var f=this._compiledEffects[h];return a&&f.isReady()&&a(f),f}var p=new i["Effect"](e,t,r,n,this,o,s,a,u,c);return p._key=h,this._compiledEffects[h]=p,p},ThinEngine._ConcatenateShader=function(e,t,r){return void 0===r&&(r=""),r+(t?t+"\n":"")+e},ThinEngine.prototype._compileShader=function(e,t,r,n){return this._compileRawShader(ThinEngine._ConcatenateShader(e,r,n),t)},ThinEngine.prototype._compileRawShader=function(e,t){var r=this._gl,n=r.createShader("vertex"===t?r.VERTEX_SHADER:r.FRAGMENT_SHADER);if(!n)throw new Error("Something went wrong while compile the shader.");return r.shaderSource(n,e),r.compileShader(n),n},ThinEngine.prototype._getShaderSource=function(e){return this._gl.getShaderSource(e)},ThinEngine.prototype.createRawShaderProgram=function(e,t,r,n,i){void 0===i&&(i=null),n=n||this._gl;var o=this._compileRawShader(t,"vertex"),s=this._compileRawShader(r,"fragment");return this._createShaderProgram(e,o,s,n,i)},ThinEngine.prototype.createShaderProgram=function(e,t,r,n,i,o){void 0===o&&(o=null),i=i||this._gl;var s=this._webGLVersion>1?"#version 300 es\n#define WEBGL2 \n":"",a=this._compileShader(t,"vertex",n,s),u=this._compileShader(r,"fragment",n,s);return this._createShaderProgram(e,a,u,i,o)},ThinEngine.prototype.createPipelineContext=function(){var e=new _["WebGLPipelineContext"];return e.engine=this,this._caps.parallelShaderCompile&&(e.isParallelCompiled=!0),e},ThinEngine.prototype._createShaderProgram=function(e,t,r,n,i){void 0===i&&(i=null);var o=n.createProgram();if(e.program=o,!o)throw new Error("Unable to create program");return n.attachShader(o,t),n.attachShader(o,r),n.linkProgram(o),e.context=n,e.vertexShader=t,e.fragmentShader=r,e.isParallelCompiled||this._finalizePipelineContext(e),o},ThinEngine.prototype._finalizePipelineContext=function(e){var t=e.context,r=e.vertexShader,n=e.fragmentShader,i=e.program,o=t.getProgramParameter(i,t.LINK_STATUS);if(!o){if(!this._gl.getShaderParameter(r,this._gl.COMPILE_STATUS)){var s=this._gl.getShaderInfoLog(r);if(s)throw e.vertexCompilationError=s,new Error("VERTEX SHADER "+s)}if(!this._gl.getShaderParameter(n,this._gl.COMPILE_STATUS)){s=this._gl.getShaderInfoLog(n);if(s)throw e.fragmentCompilationError=s,new Error("FRAGMENT SHADER "+s)}var a=t.getProgramInfoLog(i);if(a)throw e.programLinkError=a,new Error(a)}if(this.validateShaderPrograms){t.validateProgram(i);var u=t.getProgramParameter(i,t.VALIDATE_STATUS);if(!u){a=t.getProgramInfoLog(i);if(a)throw e.programValidationError=a,new Error(a)}}t.deleteShader(r),t.deleteShader(n),e.vertexShader=void 0,e.fragmentShader=void 0,e.onCompiled&&(e.onCompiled(),e.onCompiled=void 0)},ThinEngine.prototype._preparePipelineContext=function(e,t,r,n,i,o,s){var a=e;a.program=n?this.createRawShaderProgram(a,t,r,void 0,s):this.createShaderProgram(a,t,r,o,void 0,s),a.program.__SPECTOR_rebuildProgram=i},ThinEngine.prototype._isRenderingStateCompiled=function(e){var t=e;return!!this._gl.getProgramParameter(t.program,this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)&&(this._finalizePipelineContext(t),!0)},ThinEngine.prototype._executeWhenRenderingStateIsCompiled=function(e,t){var r=e;if(r.isParallelCompiled){var n=r.onCompiled;r.onCompiled=n?function(){n(),t()}:t}else t()},ThinEngine.prototype.getUniforms=function(e,t){for(var r=new Array,n=e,i=0;i<t.length;i++)r.push(this._gl.getUniformLocation(n.program,t[i]));return r},ThinEngine.prototype.getAttributes=function(e,t){for(var r=[],n=e,i=0;i<t.length;i++)try{r.push(this._gl.getAttribLocation(n.program,t[i]))}catch(o){r.push(-1)}return r},ThinEngine.prototype.enableEffect=function(e){e&&e!==this._currentEffect&&(this.bindSamplers(e),this._currentEffect=e,e.onBind&&e.onBind(e),e._onBindObservable&&e._onBindObservable.notifyObservers(e))},ThinEngine.prototype.setInt=function(e,t){return!!e&&(this._gl.uniform1i(e,t),!0)},ThinEngine.prototype.setIntArray=function(e,t){return!!e&&(this._gl.uniform1iv(e,t),!0)},ThinEngine.prototype.setIntArray2=function(e,t){return!(!e||t.length%2!==0)&&(this._gl.uniform2iv(e,t),!0)},ThinEngine.prototype.setIntArray3=function(e,t){return!(!e||t.length%3!==0)&&(this._gl.uniform3iv(e,t),!0)},ThinEngine.prototype.setIntArray4=function(e,t){return!(!e||t.length%4!==0)&&(this._gl.uniform4iv(e,t),!0)},ThinEngine.prototype.setArray=function(e,t){return!!e&&(this._gl.uniform1fv(e,t),!0)},ThinEngine.prototype.setArray2=function(e,t){return!(!e||t.length%2!==0)&&(this._gl.uniform2fv(e,t),!0)},ThinEngine.prototype.setArray3=function(e,t){return!(!e||t.length%3!==0)&&(this._gl.uniform3fv(e,t),!0)},ThinEngine.prototype.setArray4=function(e,t){return!(!e||t.length%4!==0)&&(this._gl.uniform4fv(e,t),!0)},ThinEngine.prototype.setMatrices=function(e,t){return!!e&&(this._gl.uniformMatrix4fv(e,!1,t),!0)},ThinEngine.prototype.setMatrix3x3=function(e,t){return!!e&&(this._gl.uniformMatrix3fv(e,!1,t),!0)},ThinEngine.prototype.setMatrix2x2=function(e,t){return!!e&&(this._gl.uniformMatrix2fv(e,!1,t),!0)},ThinEngine.prototype.setFloat=function(e,t){return!!e&&(this._gl.uniform1f(e,t),!0)},ThinEngine.prototype.setFloat2=function(e,t,r){return!!e&&(this._gl.uniform2f(e,t,r),!0)},ThinEngine.prototype.setFloat3=function(e,t,r,n){return!!e&&(this._gl.uniform3f(e,t,r,n),!0)},ThinEngine.prototype.setFloat4=function(e,t,r,n,i){return!!e&&(this._gl.uniform4f(e,t,r,n,i),!0)},ThinEngine.prototype.applyStates=function(){if(this._depthCullingState.apply(this._gl),this._stencilState.apply(this._gl),this._alphaState.apply(this._gl),this._colorWriteChanged){this._colorWriteChanged=!1;var e=this._colorWrite;this._gl.colorMask(e,e,e,e)}},ThinEngine.prototype.setColorWrite=function(e){e!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=e)},ThinEngine.prototype.getColorWrite=function(){return this._colorWrite},Object.defineProperty(ThinEngine.prototype,"depthCullingState",{get:function(){return this._depthCullingState},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"alphaState",{get:function(){return this._alphaState},enumerable:!1,configurable:!0}),Object.defineProperty(ThinEngine.prototype,"stencilState",{get:function(){return this._stencilState},enumerable:!1,configurable:!0}),ThinEngine.prototype.clearInternalTexturesCache=function(){this._internalTexturesCache=[]},ThinEngine.prototype.wipeCaches=function(e){this.preventCacheWipeBetweenFrames&&!e||(this._currentEffect=null,this._viewportCached.x=0,this._viewportCached.y=0,this._viewportCached.z=0,this._viewportCached.w=0,this._unbindVertexArrayObject(),e&&(this._currentProgram=null,this.resetTextureCache(),this._stencilState.reset(),this._depthCullingState.reset(),this._depthCullingState.depthFunc=this._gl.LEQUAL,this._alphaState.reset(),this._alphaMode=1,this._alphaEquation=0,this._colorWrite=!0,this._colorWriteChanged=!0,this._unpackFlipYCached=null,this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),this._mustWipeVertexAttributes=!0,this.unbindAllAttributes()),this._resetVertexBufferBinding(),this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null,this.bindIndexBuffer(null))},ThinEngine.prototype._getSamplingParameters=function(e,t){var r=this._gl,n=r.NEAREST,i=r.NEAREST;switch(e){case 11:n=r.LINEAR,i=t?r.LINEAR_MIPMAP_NEAREST:r.LINEAR;break;case 3:n=r.LINEAR,i=t?r.LINEAR_MIPMAP_LINEAR:r.LINEAR;break;case 8:n=r.NEAREST,i=t?r.NEAREST_MIPMAP_LINEAR:r.NEAREST;break;case 4:n=r.NEAREST,i=t?r.NEAREST_MIPMAP_NEAREST:r.NEAREST;break;case 5:n=r.NEAREST,i=t?r.LINEAR_MIPMAP_NEAREST:r.LINEAR;break;case 6:n=r.NEAREST,i=t?r.LINEAR_MIPMAP_LINEAR:r.LINEAR;break;case 7:n=r.NEAREST,i=r.LINEAR;break;case 1:n=r.NEAREST,i=r.NEAREST;break;case 9:n=r.LINEAR,i=t?r.NEAREST_MIPMAP_NEAREST:r.NEAREST;break;case 10:n=r.LINEAR,i=t?r.NEAREST_MIPMAP_LINEAR:r.NEAREST;break;case 2:n=r.LINEAR,i=r.LINEAR;break;case 12:n=r.LINEAR,i=r.NEAREST;break}return{min:i,mag:n}},ThinEngine.prototype._createTexture=function(){var e=this._gl.createTexture();if(!e)throw new Error("Unable to create texture");return e},ThinEngine.prototype.createTexture=function(e,t,r,i,o,s,a,u,c,h,f,p,m){var _=this;void 0===o&&(o=3),void 0===s&&(s=null),void 0===a&&(a=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===h&&(h=null),void 0===f&&(f=null),e=e||"";var g="data:"===e.substr(0,5),b="blob:"===e.substr(0,5),v=g&&-1!==e.indexOf(";base64,"),M=c||new l["InternalTexture"](this,l["InternalTextureSource"].Url),T=e;!this._transformTextureUrl||v||c||u||(e=this._transformTextureUrl(e)),T!==e&&(M._originalUrl=T);var S=e.lastIndexOf("."),C=f||(S>-1?e.substring(S).toLowerCase():""),E=null,P=C.indexOf("?");P>-1&&(C=C.split("?")[0]);for(var A=0,j=ThinEngine._TextureLoaders;A<j.length;A++){var O=j[A];if(O.canLoad(C,p)){E=O;break}}i&&i._addPendingData(M),M.url=e,M.generateMipMaps=!t,M.samplingMode=o,M.invertY=r,this._doNotHandleContextLost||(M._buffer=u);var R=null;s&&!c&&(R=M.onLoadedObservable.add(s)),c||this._internalTexturesCache.push(M);var onInternalError=function(r,c){i&&i._removePendingData(M),e===T?(R&&M.onLoadedObservable.remove(R),n["EngineStore"].UseFallbackTexture&&_.createTexture(n["EngineStore"].FallbackTexture,t,M.invertY,i,o,null,a,u,M),a&&a((r||"Unknown error")+(n["EngineStore"].UseFallbackTexture?" - Fallback texture was used":""),c)):(d["Logger"].Warn("Failed to load "+e+", falling back to "+T),_.createTexture(T,t,M.invertY,i,o,s,a,u,M,h,f,p,m))};if(E){var callback_1=function(e){E.loadData(e,M,(function(e,t,r,n,s,a){a?onInternalError("TextureLoader failed to load data"):_._prepareWebGLTexture(M,i,e,t,M.invertY,!r,n,(function(){return s(),!1}),o)}),m)};u?u instanceof ArrayBuffer?callback_1(new Uint8Array(u)):ArrayBuffer.isView(u)?callback_1(u):a&&a("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(e,(function(e){return callback_1(new Uint8Array(e))}),void 0,i?i.offlineProvider:void 0,!0,(function(e,t){onInternalError("Unable to load "+(e&&e.responseURL,t))}))}else{var onload_1=function(e){b&&!_._doNotHandleContextLost&&(M._buffer=e),_._prepareWebGLTexture(M,i,e.width,e.height,M.invertY,t,!1,(function(t,r,n){var o=_._gl,s=e.width===t&&e.height===r,a=h?_._getInternalFormat(h):".jpg"===C?o.RGB:o.RGBA;if(s)return o.texImage2D(o.TEXTURE_2D,0,a,a,o.UNSIGNED_BYTE,e),!1;var u=_._caps.maxTextureSize;if(e.width>u||e.height>u||!_._supportsHardwareTextureRescaling)return _._prepareWorkingCanvas(),!(!_._workingCanvas||!_._workingContext)&&(_._workingCanvas.width=t,_._workingCanvas.height=r,_._workingContext.drawImage(e,0,0,e.width,e.height,0,0,t,r),o.texImage2D(o.TEXTURE_2D,0,a,a,o.UNSIGNED_BYTE,_._workingCanvas),M.width=t,M.height=r,!1);var c=new l["InternalTexture"](_,l["InternalTextureSource"].Temp);return _._bindTextureDirectly(o.TEXTURE_2D,c,!0),o.texImage2D(o.TEXTURE_2D,0,a,a,o.UNSIGNED_BYTE,e),_._rescaleTexture(c,M,i,a,(function(){_._releaseTexture(c),_._bindTextureDirectly(o.TEXTURE_2D,M,!0),n()})),!0}),o)};!g||v?u&&(u.decoding||u.close)?onload_1(u):ThinEngine._FileToolsLoadImage(e,onload_1,onInternalError,i?i.offlineProvider:null,p):"string"===typeof u||u instanceof ArrayBuffer||ArrayBuffer.isView(u)||u instanceof Blob?ThinEngine._FileToolsLoadImage(u,onload_1,onInternalError,i?i.offlineProvider:null,p):u&&onload_1(u)}return M},ThinEngine._FileToolsLoadImage=function(e,t,r,n,i){throw o["_DevTools"].WarnImport("FileTools")},ThinEngine.prototype._rescaleTexture=function(e,t,r,n,i){},ThinEngine.prototype.createRawTexture=function(e,t,r,n,i,s,a,u,c){throw void 0===u&&(u=null),void 0===c&&(c=0),o["_DevTools"].WarnImport("Engine.RawTexture")},ThinEngine.prototype.createRawCubeTexture=function(e,t,r,n,i,s,a,u){throw void 0===u&&(u=null),o["_DevTools"].WarnImport("Engine.RawTexture")},ThinEngine.prototype.createRawTexture3D=function(e,t,r,n,i,s,a,u,c,l){throw void 0===c&&(c=null),void 0===l&&(l=0),o["_DevTools"].WarnImport("Engine.RawTexture")},ThinEngine.prototype.createRawTexture2DArray=function(e,t,r,n,i,s,a,u,c,l){throw void 0===c&&(c=null),void 0===l&&(l=0),o["_DevTools"].WarnImport("Engine.RawTexture")},ThinEngine.prototype._unpackFlipY=function(e){this._unpackFlipYCached!==e&&(this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,e?1:0),this.enableUnpackFlipYCached&&(this._unpackFlipYCached=e))},ThinEngine.prototype._getUnpackAlignement=function(){return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT)},ThinEngine.prototype._getTextureTarget=function(e){return e.isCube?this._gl.TEXTURE_CUBE_MAP:e.is3D?this._gl.TEXTURE_3D:e.is2DArray||e.isMultiview?this._gl.TEXTURE_2D_ARRAY:this._gl.TEXTURE_2D},ThinEngine.prototype.updateTextureSamplingMode=function(e,t,r){void 0===r&&(r=!1);var n=this._getTextureTarget(t),i=this._getSamplingParameters(e,t.generateMipMaps||r);this._setTextureParameterInteger(n,this._gl.TEXTURE_MAG_FILTER,i.mag,t),this._setTextureParameterInteger(n,this._gl.TEXTURE_MIN_FILTER,i.min),r&&(t.generateMipMaps=!0,this._gl.generateMipmap(n)),this._bindTextureDirectly(n,null),t.samplingMode=e},ThinEngine.prototype.updateTextureWrappingMode=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var i=this._getTextureTarget(e);null!==t&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(t),e),e._cachedWrapU=t),null!==r&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(r),e),e._cachedWrapV=r),(e.is2DArray||e.is3D)&&null!==n&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(n),e),e._cachedWrapR=n),this._bindTextureDirectly(i,null)},ThinEngine.prototype._setupDepthStencilTexture=function(e,t,r,n,i){var o=t.width||t,s=t.height||t,a=t.layers||0;e.baseWidth=o,e.baseHeight=s,e.width=o,e.height=s,e.is2DArray=a>0,e.depth=a,e.isReady=!0,e.samples=1,e.generateMipMaps=!1,e._generateDepthBuffer=!0,e._generateStencilBuffer=r,e.samplingMode=n?2:1,e.type=0,e._comparisonFunction=i;var u=this._gl,c=this._getTextureTarget(e),l=this._getSamplingParameters(e.samplingMode,!1);u.texParameteri(c,u.TEXTURE_MAG_FILTER,l.mag),u.texParameteri(c,u.TEXTURE_MIN_FILTER,l.min),u.texParameteri(c,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(c,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),0===i?(u.texParameteri(c,u.TEXTURE_COMPARE_FUNC,515),u.texParameteri(c,u.TEXTURE_COMPARE_MODE,u.NONE)):(u.texParameteri(c,u.TEXTURE_COMPARE_FUNC,i),u.texParameteri(c,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE))},ThinEngine.prototype._uploadCompressedDataToTextureDirectly=function(e,t,r,n,i,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var a=this._gl,u=a.TEXTURE_2D;e.isCube&&(u=a.TEXTURE_CUBE_MAP_POSITIVE_X+o),this._gl.compressedTexImage2D(u,s,t,r,n,0,i)},ThinEngine.prototype._uploadDataToTextureDirectly=function(e,t,r,n,i,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=!1);var s=this._gl,a=this._getWebGLTextureType(e.type),u=this._getInternalFormat(e.format),c=void 0===i?this._getRGBABufferInternalSizedFormat(e.type,e.format):this._getInternalFormat(i);this._unpackFlipY(e.invertY);var l=s.TEXTURE_2D;e.isCube&&(l=s.TEXTURE_CUBE_MAP_POSITIVE_X+r);var d=Math.round(Math.log(e.width)*Math.LOG2E),h=Math.round(Math.log(e.height)*Math.LOG2E),f=o?e.width:Math.pow(2,Math.max(d-n,0)),p=o?e.height:Math.pow(2,Math.max(h-n,0));s.texImage2D(l,n,c,f,p,0,u,a,t)},ThinEngine.prototype.updateTextureData=function(e,t,r,n,i,o,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var u=this._gl,c=this._getWebGLTextureType(e.type),l=this._getInternalFormat(e.format);this._unpackFlipY(e.invertY);var d=u.TEXTURE_2D;e.isCube&&(d=u.TEXTURE_CUBE_MAP_POSITIVE_X+s),u.texSubImage2D(d,a,r,n,i,o,l,c,t)},ThinEngine.prototype._uploadArrayBufferViewToTexture=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=this._gl,o=e.isCube?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D;this._bindTextureDirectly(o,e,!0),this._uploadDataToTextureDirectly(e,t,r,n),this._bindTextureDirectly(o,null,!0)},ThinEngine.prototype._prepareWebGLTextureContinuation=function(e,t,r,n,i){var o=this._gl;if(o){var s=this._getSamplingParameters(i,!r);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s.mag),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s.min),r||n||o.generateMipmap(o.TEXTURE_2D),this._bindTextureDirectly(o.TEXTURE_2D,null),t&&t._removePendingData(e),e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear()}},ThinEngine.prototype._prepareWebGLTexture=function(e,t,r,n,i,o,s,a,u){var c=this;void 0===u&&(u=3);var l=this.getCaps().maxTextureSize,d=Math.min(l,this.needPOTTextures?ThinEngine.GetExponentOfTwo(r,l):r),h=Math.min(l,this.needPOTTextures?ThinEngine.GetExponentOfTwo(n,l):n),f=this._gl;f&&(e._webGLTexture?(this._bindTextureDirectly(f.TEXTURE_2D,e,!0),this._unpackFlipY(void 0===i||!!i),e.baseWidth=r,e.baseHeight=n,e.width=d,e.height=h,e.isReady=!0,a(d,h,(function(){c._prepareWebGLTextureContinuation(e,t,o,s,u)}))||this._prepareWebGLTextureContinuation(e,t,o,s,u)):t&&t._removePendingData(e))},ThinEngine.prototype._setupFramebufferDepthAttachments=function(e,t,r,n,i){void 0===i&&(i=1);var o=this._gl;if(e&&t)return this._getDepthStencilBuffer(r,n,i,o.DEPTH_STENCIL,o.DEPTH24_STENCIL8,o.DEPTH_STENCIL_ATTACHMENT);if(t){var s=o.DEPTH_COMPONENT16;return this._webGLVersion>1&&(s=o.DEPTH_COMPONENT32F),this._getDepthStencilBuffer(r,n,i,s,s,o.DEPTH_ATTACHMENT)}return e?this._getDepthStencilBuffer(r,n,i,o.STENCIL_INDEX8,o.STENCIL_INDEX8,o.STENCIL_ATTACHMENT):null},ThinEngine.prototype._releaseFramebufferObjects=function(e){var t=this._gl;e._framebuffer&&(t.deleteFramebuffer(e._framebuffer),e._framebuffer=null),e._depthStencilBuffer&&(t.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(t.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null),e._MSAARenderBuffer&&(t.deleteRenderbuffer(e._MSAARenderBuffer),e._MSAARenderBuffer=null)},ThinEngine.prototype._releaseTexture=function(e){this._releaseFramebufferObjects(e),this._deleteTexture(e._webGLTexture),this.unbindAllTextures();var t=this._internalTexturesCache.indexOf(e);-1!==t&&this._internalTexturesCache.splice(t,1),e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureLow&&e._lodTextureLow.dispose(),e._irradianceTexture&&e._irradianceTexture.dispose()},ThinEngine.prototype._deleteTexture=function(e){this._gl.deleteTexture(e)},ThinEngine.prototype._setProgram=function(e){this._currentProgram!==e&&(this._gl.useProgram(e),this._currentProgram=e)},ThinEngine.prototype.bindSamplers=function(e){var t=e.getPipelineContext();this._setProgram(t.program);for(var r=e.getSamplers(),n=0;n<r.length;n++){var i=e.getUniform(r[n]);i&&(this._boundUniforms[n]=i)}this._currentEffect=null},ThinEngine.prototype._activateCurrentTexture=function(){this._currentTextureChannel!==this._activeChannel&&(this._gl.activeTexture(this._gl.TEXTURE0+this._activeChannel),this._currentTextureChannel=this._activeChannel)},ThinEngine.prototype._bindTextureDirectly=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var i=!1,o=t&&t._associatedChannel>-1;r&&o&&(this._activeChannel=t._associatedChannel);var s=this._boundTexturesCache[this._activeChannel];return s!==t||n?(this._activateCurrentTexture(),t&&t.isMultiview?this._gl.bindTexture(e,t?t._colorTextureArray:null):this._gl.bindTexture(e,t?t._webGLTexture:null),this._boundTexturesCache[this._activeChannel]=t,t&&(t._associatedChannel=this._activeChannel)):r&&(i=!0,this._activateCurrentTexture()),o&&!r&&this._bindSamplerUniformToChannel(t._associatedChannel,this._activeChannel),i},ThinEngine.prototype._bindTexture=function(e,t){if(void 0!==e){t&&(t._associatedChannel=e),this._activeChannel=e;var r=t?this._getTextureTarget(t):this._gl.TEXTURE_2D;this._bindTextureDirectly(r,t)}},ThinEngine.prototype.unbindAllTextures=function(){for(var e=0;e<this._maxSimultaneousTextures;e++)this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))},ThinEngine.prototype.setTexture=function(e,t,r){void 0!==e&&(t&&(this._boundUniforms[e]=t),this._setTexture(e,r))},ThinEngine.prototype._bindSamplerUniformToChannel=function(e,t){var r=this._boundUniforms[e];r&&r._currentState!==t&&(this._gl.uniform1i(r,t),r._currentState=t)},ThinEngine.prototype._getTextureWrapMode=function(e){switch(e){case 1:return this._gl.REPEAT;case 0:return this._gl.CLAMP_TO_EDGE;case 2:return this._gl.MIRRORED_REPEAT}return this._gl.REPEAT},ThinEngine.prototype._setTexture=function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),!t)return null!=this._boundTexturesCache[e]&&(this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))),!1;if(t.video)this._activeChannel=e,t.update();else if(4===t.delayLoadState)return t.delayLoad(),!1;var i;i=n?t.depthStencilTexture:t.isReady()?t.getInternalTexture():t.isCube?this.emptyCubeTexture:t.is3D?this.emptyTexture3D:t.is2DArray?this.emptyTexture2DArray:this.emptyTexture,!r&&i&&(i._associatedChannel=e);var o=!0;this._boundTexturesCache[e]===i&&(r||this._bindSamplerUniformToChannel(i._associatedChannel,e),o=!1),this._activeChannel=e;var s=this._getTextureTarget(i);if(o&&this._bindTextureDirectly(s,i,r),i&&!i.isMultiview){if(i.isCube&&i._cachedCoordinatesMode!==t.coordinatesMode){i._cachedCoordinatesMode=t.coordinatesMode;var a=3!==t.coordinatesMode&&5!==t.coordinatesMode?1:0;t.wrapU=a,t.wrapV=a}i._cachedWrapU!==t.wrapU&&(i._cachedWrapU=t.wrapU,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(t.wrapU),i)),i._cachedWrapV!==t.wrapV&&(i._cachedWrapV=t.wrapV,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(t.wrapV),i)),i.is3D&&i._cachedWrapR!==t.wrapR&&(i._cachedWrapR=t.wrapR,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(t.wrapR),i)),this._setAnisotropicLevel(s,i,t.anisotropicFilteringLevel)}return!0},ThinEngine.prototype.setTextureArray=function(e,t,r){if(void 0!==e&&t){this._textureUnits&&this._textureUnits.length===r.length||(this._textureUnits=new Int32Array(r.length));for(var n=0;n<r.length;n++){var i=r[n].getInternalTexture();i?(this._textureUnits[n]=e+n,i._associatedChannel=e+n):this._textureUnits[n]=-1}this._gl.uniform1iv(t,this._textureUnits);for(var o=0;o<r.length;o++)this._setTexture(this._textureUnits[o],r[o],!0)}},ThinEngine.prototype._setAnisotropicLevel=function(e,t,r){var n=this._caps.textureAnisotropicFilterExtension;11!==t.samplingMode&&3!==t.samplingMode&&2!==t.samplingMode&&(r=1),n&&t._cachedAnisotropicFilteringLevel!==r&&(this._setTextureParameterFloat(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r,this._caps.maxAnisotropy),t),t._cachedAnisotropicFilteringLevel=r)},ThinEngine.prototype._setTextureParameterFloat=function(e,t,r,n){this._bindTextureDirectly(e,n,!0,!0),this._gl.texParameterf(e,t,r)},ThinEngine.prototype._setTextureParameterInteger=function(e,t,r,n){n&&this._bindTextureDirectly(e,n,!0,!0),this._gl.texParameteri(e,t,r)},ThinEngine.prototype.unbindAllAttributes=function(){if(this._mustWipeVertexAttributes){this._mustWipeVertexAttributes=!1;for(var e=0;e<this._caps.maxVertexAttribs;e++)this.disableAttributeByIndex(e)}else{e=0;for(var t=this._vertexAttribArraysEnabled.length;e<t;e++)e>=this._caps.maxVertexAttribs||!this._vertexAttribArraysEnabled[e]||this.disableAttributeByIndex(e)}},ThinEngine.prototype.releaseEffects=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e].getPipelineContext();this._deletePipelineContext(t)}this._compiledEffects={}},ThinEngine.prototype.dispose=function(){this.stopRenderLoop(),this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._dummyFramebuffer&&this._gl.deleteFramebuffer(this._dummyFramebuffer),this.releaseEffects(),this.unbindAllAttributes(),this._boundUniforms=[],h["DomManagement"].IsWindowObjectExist()&&this._renderingCanvas&&(this._doNotHandleContextLost||(this._renderingCanvas.removeEventListener("webglcontextlost",this._onContextLost),this._renderingCanvas.removeEventListener("webglcontextrestored",this._onContextRestored))),this._workingCanvas=null,this._workingContext=null,this._currentBufferPointers=[],this._renderingCanvas=null,this._currentProgram=null,this._boundRenderFunction=null,i["Effect"].ResetCache();for(var e=0,t=this._activeRequests;e<t.length;e++){var r=t[e];r.abort()}},ThinEngine.prototype.attachContextLostEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextlost",e,!1)},ThinEngine.prototype.attachContextRestoredEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextrestored",e,!1)},ThinEngine.prototype.getError=function(){return this._gl.getError()},ThinEngine.prototype._canRenderToFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(1)},ThinEngine.prototype._canRenderToHalfFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(2)},ThinEngine.prototype._canRenderToFramebuffer=function(e){var t=this._gl;while(t.getError()!==t.NO_ERROR);var r=!0,n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(e),1,1,0,t.RGBA,this._getWebGLTextureType(e),null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r=r&&o===t.FRAMEBUFFER_COMPLETE,r=r&&t.getError()===t.NO_ERROR,r&&(t.clear(t.COLOR_BUFFER_BIT),r=r&&t.getError()===t.NO_ERROR),r){t.bindFramebuffer(t.FRAMEBUFFER,null);var s=t.RGBA,a=t.UNSIGNED_BYTE,u=new Uint8Array(4);t.readPixels(0,0,1,1,s,a,u),r=r&&t.getError()===t.NO_ERROR}t.deleteTexture(n),t.deleteFramebuffer(i),t.bindFramebuffer(t.FRAMEBUFFER,null);while(!r&&t.getError()!==t.NO_ERROR);return r},ThinEngine.prototype._getWebGLTextureType=function(e){if(1===this._webGLVersion){switch(e){case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT_OES;case 0:return this._gl.UNSIGNED_BYTE;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5}return this._gl.UNSIGNED_BYTE}switch(e){case 3:return this._gl.BYTE;case 0:return this._gl.UNSIGNED_BYTE;case 4:return this._gl.SHORT;case 5:return this._gl.UNSIGNED_SHORT;case 6:return this._gl.INT;case 7:return this._gl.UNSIGNED_INT;case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5;case 11:return this._gl.UNSIGNED_INT_2_10_10_10_REV;case 12:return this._gl.UNSIGNED_INT_24_8;case 13:return this._gl.UNSIGNED_INT_10F_11F_11F_REV;case 14:return this._gl.UNSIGNED_INT_5_9_9_9_REV;case 15:return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV}return this._gl.UNSIGNED_BYTE},ThinEngine.prototype._getInternalFormat=function(e){var t=this._gl.RGBA;switch(e){case 0:t=this._gl.ALPHA;break;case 1:t=this._gl.LUMINANCE;break;case 2:t=this._gl.LUMINANCE_ALPHA;break;case 6:t=this._gl.RED;break;case 7:t=this._gl.RG;break;case 4:t=this._gl.RGB;break;case 5:t=this._gl.RGBA;break}if(this._webGLVersion>1)switch(e){case 8:t=this._gl.RED_INTEGER;break;case 9:t=this._gl.RG_INTEGER;break;case 10:t=this._gl.RGB_INTEGER;break;case 11:t=this._gl.RGBA_INTEGER;break}return t},ThinEngine.prototype._getRGBABufferInternalSizedFormat=function(e,t){if(1===this._webGLVersion){if(void 0!==t)switch(t){case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;case 4:return this._gl.RGB}return this._gl.RGBA}switch(e){case 3:switch(t){case 6:return this._gl.R8_SNORM;case 7:return this._gl.RG8_SNORM;case 4:return this._gl.RGB8_SNORM;case 8:return this._gl.R8I;case 9:return this._gl.RG8I;case 10:return this._gl.RGB8I;case 11:return this._gl.RGBA8I;default:return this._gl.RGBA8_SNORM}case 0:switch(t){case 6:return this._gl.R8;case 7:return this._gl.RG8;case 4:return this._gl.RGB8;case 5:return this._gl.RGBA8;case 8:return this._gl.R8UI;case 9:return this._gl.RG8UI;case 10:return this._gl.RGB8UI;case 11:return this._gl.RGBA8UI;case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;default:return this._gl.RGBA8}case 4:switch(t){case 8:return this._gl.R16I;case 9:return this._gl.RG16I;case 10:return this._gl.RGB16I;case 11:return this._gl.RGBA16I;default:return this._gl.RGBA16I}case 5:switch(t){case 8:return this._gl.R16UI;case 9:return this._gl.RG16UI;case 10:return this._gl.RGB16UI;case 11:return this._gl.RGBA16UI;default:return this._gl.RGBA16UI}case 6:switch(t){case 8:return this._gl.R32I;case 9:return this._gl.RG32I;case 10:return this._gl.RGB32I;case 11:return this._gl.RGBA32I;default:return this._gl.RGBA32I}case 7:switch(t){case 8:return this._gl.R32UI;case 9:return this._gl.RG32UI;case 10:return this._gl.RGB32UI;case 11:return this._gl.RGBA32UI;default:return this._gl.RGBA32UI}case 1:switch(t){case 6:return this._gl.R32F;case 7:return this._gl.RG32F;case 4:return this._gl.RGB32F;case 5:return this._gl.RGBA32F;default:return this._gl.RGBA32F}case 2:switch(t){case 6:return this._gl.R16F;case 7:return this._gl.RG16F;case 4:return this._gl.RGB16F;case 5:return this._gl.RGBA16F;default:return this._gl.RGBA16F}case 10:return this._gl.RGB565;case 13:return this._gl.R11F_G11F_B10F;case 14:return this._gl.RGB9_E5;case 8:return this._gl.RGBA4;case 9:return this._gl.RGB5_A1;case 11:switch(t){case 5:return this._gl.RGB10_A2;case 11:return this._gl.RGB10_A2UI;default:return this._gl.RGB10_A2}}return this._gl.RGBA8},ThinEngine.prototype._getRGBAMultiSampleBufferFormat=function(e){return 1===e?this._gl.RGBA32F:2===e?this._gl.RGBA16F:this._gl.RGBA8},ThinEngine.prototype._loadFile=function(e,t,r,n,i,o){var s=this,a=ThinEngine._FileToolsLoadFile(e,t,r,n,i,o);return this._activeRequests.push(a),a.onCompleteObservable.add((function(e){s._activeRequests.splice(s._activeRequests.indexOf(e),1)})),a},ThinEngine._FileToolsLoadFile=function(e,t,r,n,i,s){throw o["_DevTools"].WarnImport("FileTools")},ThinEngine.prototype.readPixels=function(e,t,r,n,i){void 0===i&&(i=!0);var o=i?4:3,s=i?this._gl.RGBA:this._gl.RGB,a=new Uint8Array(n*r*o);return this._gl.readPixels(e,t,r,n,s,this._gl.UNSIGNED_BYTE,a),a},Object.defineProperty(ThinEngine,"IsSupported",{get:function(){return this.isSupported()},enumerable:!1,configurable:!0}),ThinEngine.isSupported=function(){if(null!==this._HasMajorPerformanceCaveat)return!this._HasMajorPerformanceCaveat;if(null===this._IsSupported)try{var e=g["CanvasGenerator"].CreateCanvas(1,1),t=e.getContext("webgl")||e.getContext("experimental-webgl");this._IsSupported=null!=t&&!!window.WebGLRenderingContext}catch(r){this._IsSupported=!1}return this._IsSupported},Object.defineProperty(ThinEngine,"HasMajorPerformanceCaveat",{get:function(){if(null===this._HasMajorPerformanceCaveat)try{var e=g["CanvasGenerator"].CreateCanvas(1,1),t=e.getContext("webgl",{failIfMajorPerformanceCaveat:!0})||e.getContext("experimental-webgl",{failIfMajorPerformanceCaveat:!0});this._HasMajorPerformanceCaveat=!t}catch(r){this._HasMajorPerformanceCaveat=!1}return this._HasMajorPerformanceCaveat},enumerable:!1,configurable:!0}),ThinEngine.CeilingPOT=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e},ThinEngine.FloorPOT=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e-(e>>1)},ThinEngine.NearestPOT=function(e){var t=ThinEngine.CeilingPOT(e),r=ThinEngine.FloorPOT(e);return t-e>e-r?r:t},ThinEngine.GetExponentOfTwo=function(e,t,r){var n;switch(void 0===r&&(r=2),r){case 1:n=ThinEngine.FloorPOT(e);break;case 2:n=ThinEngine.NearestPOT(e);break;case 3:default:n=ThinEngine.CeilingPOT(e);break}return Math.min(n,t)},ThinEngine.QueueNewFrame=function(e,t){return h["DomManagement"].IsWindowObjectExist()?(t||(t=window),t.requestPostAnimationFrame?t.requestPostAnimationFrame(e):t.requestAnimationFrame?t.requestAnimationFrame(e):t.msRequestAnimationFrame?t.msRequestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.mozRequestAnimationFrame?t.mozRequestAnimationFrame(e):t.oRequestAnimationFrame?t.oRequestAnimationFrame(e):window.setTimeout(e,16)):"undefined"!==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,16)},ThinEngine.prototype.getHostDocument=function(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:document},ThinEngine.ExceptionList=[{key:"Chrome/63.0",capture:"63\\.0\\.3239\\.(\\d+)",captureConstraint:108,targets:["uniformBuffer"]},{key:"Firefox/58",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Firefox/59",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Chrome/72.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/73.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/74.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/71",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/72",capture:null,captureConstraint:null,targets:["vao"]}],ThinEngine._TextureLoaders=[],ThinEngine.CollisionsEpsilon=.001,ThinEngine._IsSupported=null,ThinEngine._HasMajorPerformanceCaveat=null,ThinEngine}()},"./node_modules/@babylonjs/core/Events/keyboardEvents.js":function(e,t,r){"use strict";r.r(t),r.d(t,"KeyboardEventTypes",(function(){return i})),r.d(t,"KeyboardInfo",(function(){return o})),r.d(t,"KeyboardInfoPre",(function(){return s}));var n=r("./node_modules/tslib/tslib.es6.js"),i=function(){function KeyboardEventTypes(){}return KeyboardEventTypes.KEYDOWN=1,KeyboardEventTypes.KEYUP=2,KeyboardEventTypes}(),o=function(){function KeyboardInfo(e,t){this.type=e,this.event=t}return KeyboardInfo}(),s=function(e){function KeyboardInfoPre(t,r){var n=e.call(this,t,r)||this;return n.type=t,n.event=r,n.skipOnPointerObservable=!1,n}return Object(n["__extends"])(KeyboardInfoPre,e),KeyboardInfoPre}(o)},"./node_modules/@babylonjs/core/Events/pointerEvents.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PointerEventTypes",(function(){return o})),r.d(t,"PointerInfoBase",(function(){return s})),r.d(t,"PointerInfoPre",(function(){return a})),r.d(t,"PointerInfo",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=function(){function PointerEventTypes(){}return PointerEventTypes.POINTERDOWN=1,PointerEventTypes.POINTERUP=2,PointerEventTypes.POINTERMOVE=4,PointerEventTypes.POINTERWHEEL=8,PointerEventTypes.POINTERPICK=16,PointerEventTypes.POINTERTAP=32,PointerEventTypes.POINTERDOUBLETAP=64,PointerEventTypes}(),s=function(){function PointerInfoBase(e,t){this.type=e,this.event=t}return PointerInfoBase}(),a=function(e){function PointerInfoPre(t,r,n,o){var s=e.call(this,t,r)||this;return s.ray=null,s.skipOnPointerObservable=!1,s.localPosition=new i["Vector2"](n,o),s}return Object(n["__extends"])(PointerInfoPre,e),PointerInfoPre}(s),u=function(e){function PointerInfo(t,r,n){var i=e.call(this,t,r)||this;return i.pickInfo=n,i}return Object(n["__extends"])(PointerInfo,e),PointerInfo}(s)},"./node_modules/@babylonjs/core/Inputs/scene.inputManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"InputManager",(function(){return l}));var n=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),i=r("./node_modules/@babylonjs/core/Actions/abstractActionManager.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Actions/actionEvent.js"),a=r("./node_modules/@babylonjs/core/Misc/tools.js"),u=r("./node_modules/@babylonjs/core/Events/keyboardEvents.js"),c=function(){function _ClickInfo(){this._singleClick=!1,this._doubleClick=!1,this._hasSwiped=!1,this._ignore=!1}return Object.defineProperty(_ClickInfo.prototype,"singleClick",{get:function(){return this._singleClick},set:function(e){this._singleClick=e},enumerable:!1,configurable:!0}),Object.defineProperty(_ClickInfo.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(e){this._doubleClick=e},enumerable:!1,configurable:!0}),Object.defineProperty(_ClickInfo.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(e){this._hasSwiped=e},enumerable:!1,configurable:!0}),Object.defineProperty(_ClickInfo.prototype,"ignore",{get:function(){return this._ignore},set:function(e){this._ignore=e},enumerable:!1,configurable:!0}),_ClickInfo}(),l=function(){function InputManager(e){this._alreadyAttached=!1,this._wheelEventName="",this._meshPickProceed=!1,this._currentPickResult=null,this._previousPickResult=null,this._totalPointersPressed=0,this._doubleClickOccured=!1,this._pointerX=0,this._pointerY=0,this._startingPointerPosition=new o["Vector2"](0,0),this._previousStartingPointerPosition=new o["Vector2"](0,0),this._startingPointerTime=0,this._previousStartingPointerTime=0,this._pointerCaptures={},this._meshUnderPointerId=[],this._keyboardIsAttached=!1,this._scene=e}return Object.defineProperty(InputManager.prototype,"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!1,configurable:!0}),InputManager.prototype.getMeshUnderPointerByPointerId=function(e){return this._meshUnderPointerId[e]},Object.defineProperty(InputManager.prototype,"unTranslatedPointer",{get:function(){return new o["Vector2"](this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!1,configurable:!0}),Object.defineProperty(InputManager.prototype,"pointerX",{get:function(){return this._pointerX},set:function(e){this._pointerX=e},enumerable:!1,configurable:!0}),Object.defineProperty(InputManager.prototype,"pointerY",{get:function(){return this._pointerY},set:function(e){this._pointerY=e},enumerable:!1,configurable:!0}),InputManager.prototype._updatePointerPosition=function(e){var t=this._scene.getEngine().getInputElementClientRect();t&&(this._pointerX=e.clientX-t.left,this._pointerY=e.clientY-t.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)},InputManager.prototype._processPointerMove=function(e,t){var r=this._scene,i=r.getEngine(),o=i.getInputElement();if(o){o.tabIndex=i.canvasTabIndex,r.doNotHandleCursors||(o.style.cursor=r.defaultCursor);var s=!!(e&&e.hit&&e.pickedMesh);s?(r.setPointerOverMesh(e.pickedMesh,t.pointerId),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers&&(r.doNotHandleCursors||(this._pointerOverMesh.actionManager.hoverCursor?o.style.cursor=this._pointerOverMesh.actionManager.hoverCursor:o.style.cursor=r.hoverCursor))):r.setPointerOverMesh(null,t.pointerId);for(var a=0,u=r._pointerMoveStage;a<u.length;a++){var c=u[a];e=c.action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,s,o)}if(e){var l=t.type===this._wheelEventName?n["PointerEventTypes"].POINTERWHEEL:n["PointerEventTypes"].POINTERMOVE;if(r.onPointerMove&&r.onPointerMove(t,e,l),r.onPointerObservable.hasObservers()){var d=new n["PointerInfo"](l,t,e);this._setRayOnPointerInfo(d),r.onPointerObservable.notifyObservers(d,l)}}}},InputManager.prototype._setRayOnPointerInfo=function(e){var t=this._scene;e.pickInfo&&!e.pickInfo._pickingUnavailable&&(e.pickInfo.ray||(e.pickInfo.ray=t.createPickingRay(e.event.offsetX,e.event.offsetY,o["Matrix"].Identity(),t.activeCamera)))},InputManager.prototype._checkPrePointerObservable=function(e,t,r){var i=this._scene,o=new n["PointerInfoPre"](r,t,this._unTranslatedPointerX,this._unTranslatedPointerY);return e&&(o.ray=e.ray),i.onPrePointerObservable.notifyObservers(o,r),!!o.skipOnPointerObservable},InputManager.prototype.simulatePointerMove=function(e,t){var r=new PointerEvent("pointermove",t);this._checkPrePointerObservable(e,r,n["PointerEventTypes"].POINTERMOVE)||this._processPointerMove(e,r)},InputManager.prototype.simulatePointerDown=function(e,t){var r=new PointerEvent("pointerdown",t);this._checkPrePointerObservable(e,r,n["PointerEventTypes"].POINTERDOWN)||this._processPointerDown(e,r)},InputManager.prototype._processPointerDown=function(e,t){var r=this,i=this._scene;if(e&&e.hit&&e.pickedMesh){this._pickedDownMesh=e.pickedMesh;var o=e.pickedMesh._getActionManagerForTrigger();if(o){if(o.hasPickTriggers)switch(o.processTrigger(5,s["ActionEvent"].CreateNew(e.pickedMesh,t)),t.button){case 0:o.processTrigger(2,s["ActionEvent"].CreateNew(e.pickedMesh,t));break;case 1:o.processTrigger(4,s["ActionEvent"].CreateNew(e.pickedMesh,t));break;case 2:o.processTrigger(3,s["ActionEvent"].CreateNew(e.pickedMesh,t));break}o.hasSpecificTrigger(8)&&window.setTimeout((function(){var e=i.pick(r._unTranslatedPointerX,r._unTranslatedPointerY,(function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.actionManager&&e.actionManager.hasSpecificTrigger(8)&&e==r._pickedDownMesh}),!1,i.cameraToUseForPointers);e&&e.hit&&e.pickedMesh&&o&&0!==r._totalPointersPressed&&Date.now()-r._startingPointerTime>InputManager.LongPressDelay&&!r._isPointerSwiping()&&(r._startingPointerTime=0,o.processTrigger(8,s["ActionEvent"].CreateNew(e.pickedMesh,t)))}),InputManager.LongPressDelay)}}else for(var a=0,u=i._pointerDownStage;a<u.length;a++){var c=u[a];e=c.action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,t)}if(e){var l=n["PointerEventTypes"].POINTERDOWN;if(i.onPointerDown&&i.onPointerDown(t,e,l),i.onPointerObservable.hasObservers()){var d=new n["PointerInfo"](l,t,e);this._setRayOnPointerInfo(d),i.onPointerObservable.notifyObservers(d,l)}}},InputManager.prototype._isPointerSwiping=function(){return Math.abs(this._startingPointerPosition.x-this._pointerX)>InputManager.DragMovementThreshold||Math.abs(this._startingPointerPosition.y-this._pointerY)>InputManager.DragMovementThreshold},InputManager.prototype.simulatePointerUp=function(e,t,r){var i=new PointerEvent("pointerup",t),o=new c;r?o.doubleClick=!0:o.singleClick=!0,this._checkPrePointerObservable(e,i,n["PointerEventTypes"].POINTERUP)||this._processPointerUp(e,i,o)},InputManager.prototype._processPointerUp=function(e,t,r){var i=this._scene;if(e&&e&&e.pickedMesh){if(this._pickedUpMesh=e.pickedMesh,this._pickedDownMesh===this._pickedUpMesh&&(i.onPointerPick&&i.onPointerPick(t,e),r.singleClick&&!r.ignore&&i.onPointerObservable.hasObservers())){var o=n["PointerEventTypes"].POINTERPICK,a=new n["PointerInfo"](o,t,e);this._setRayOnPointerInfo(a),i.onPointerObservable.notifyObservers(a,o)}var u=e.pickedMesh._getActionManagerForTrigger();if(u&&!r.ignore){u.processTrigger(7,s["ActionEvent"].CreateNew(e.pickedMesh,t)),!r.hasSwiped&&r.singleClick&&u.processTrigger(1,s["ActionEvent"].CreateNew(e.pickedMesh,t));var c=e.pickedMesh._getActionManagerForTrigger(6);r.doubleClick&&c&&c.processTrigger(6,s["ActionEvent"].CreateNew(e.pickedMesh,t))}}else if(!r.ignore)for(var l=0,d=i._pointerUpStage;l<d.length;l++){var h=d[l];e=h.action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,t)}if(this._pickedDownMesh&&this._pickedDownMesh!==this._pickedUpMesh){var f=this._pickedDownMesh._getActionManagerForTrigger(16);f&&f.processTrigger(16,s["ActionEvent"].CreateNew(this._pickedDownMesh,t))}var p=0;if(i.onPointerObservable.hasObservers()){if(!r.ignore&&!r.hasSwiped&&(r.singleClick&&i.onPointerObservable.hasSpecificMask(n["PointerEventTypes"].POINTERTAP)?p=n["PointerEventTypes"].POINTERTAP:r.doubleClick&&i.onPointerObservable.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP)&&(p=n["PointerEventTypes"].POINTERDOUBLETAP),p)){a=new n["PointerInfo"](p,t,e);this._setRayOnPointerInfo(a),i.onPointerObservable.notifyObservers(a,p)}if(!r.ignore){p=n["PointerEventTypes"].POINTERUP;a=new n["PointerInfo"](p,t,e);this._setRayOnPointerInfo(a),i.onPointerObservable.notifyObservers(a,p)}}i.onPointerUp&&!r.ignore&&i.onPointerUp(t,e,p)},InputManager.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._pointerCaptures[e]},InputManager.prototype.attachControl=function(e,t,r,o){var l=this;void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=null);var d=this._scene;if(o||(o=d.getEngine().getInputElement()),o){this._alreadyAttached&&this.detachControl(),this._alreadyAttachedTo=o;var h=d.getEngine();this._initActionManager=function(e,t){if(!l._meshPickProceed){var r=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers);l._currentPickResult=r,r&&(e=r.hit&&r.pickedMesh?r.pickedMesh._getActionManagerForTrigger():null),l._meshPickProceed=!0}return e},this._delayedSimpleClick=function(e,t,r){(Date.now()-l._previousStartingPointerTime>InputManager.DoubleClickDelay&&!l._doubleClickOccured||e!==l._previousButtonPressed)&&(l._doubleClickOccured=!1,t.singleClick=!0,t.ignore=!1,r(t,l._currentPickResult))},this._initClickEvent=function(e,t,r,o){var s=new c;l._currentPickResult=null;var a=null,u=e.hasSpecificMask(n["PointerEventTypes"].POINTERPICK)||t.hasSpecificMask(n["PointerEventTypes"].POINTERPICK)||e.hasSpecificMask(n["PointerEventTypes"].POINTERTAP)||t.hasSpecificMask(n["PointerEventTypes"].POINTERTAP)||e.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP)||t.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP);!u&&i["AbstractActionManager"]&&(a=l._initActionManager(a,s),a&&(u=a.hasPickTriggers));var d=!1;if(u){var h=r.button;if(s.hasSwiped=l._isPointerSwiping(),!s.hasSwiped){var f=!InputManager.ExclusiveDoubleClickMode;f||(f=!e.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP)&&!t.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP),f&&!i["AbstractActionManager"].HasSpecificTrigger(6)&&(a=l._initActionManager(a,s),a&&(f=!a.hasSpecificTrigger(6)))),f?(Date.now()-l._previousStartingPointerTime>InputManager.DoubleClickDelay||h!==l._previousButtonPressed)&&(s.singleClick=!0,o(s,l._currentPickResult),d=!0):(l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,l._delayedSimpleClickTimeout=window.setTimeout(l._delayedSimpleClick.bind(l,h,s,o),InputManager.DoubleClickDelay));var p=e.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP)||t.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP);!p&&i["AbstractActionManager"].HasSpecificTrigger(6)&&(a=l._initActionManager(a,s),a&&(p=a.hasSpecificTrigger(6))),p&&(h===l._previousButtonPressed&&Date.now()-l._previousStartingPointerTime<InputManager.DoubleClickDelay&&!l._doubleClickOccured?(s.hasSwiped||l._isPointerSwiping()?(l._doubleClickOccured=!1,l._previousStartingPointerTime=l._startingPointerTime,l._previousStartingPointerPosition.x=l._startingPointerPosition.x,l._previousStartingPointerPosition.y=l._startingPointerPosition.y,l._previousButtonPressed=h,InputManager.ExclusiveDoubleClickMode?(l._previousDelayedSimpleClickTimeout&&clearTimeout(l._previousDelayedSimpleClickTimeout),l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,o(s,l._previousPickResult)):o(s,l._currentPickResult)):(l._previousStartingPointerTime=0,l._doubleClickOccured=!0,s.doubleClick=!0,s.ignore=!1,InputManager.ExclusiveDoubleClickMode&&l._previousDelayedSimpleClickTimeout&&clearTimeout(l._previousDelayedSimpleClickTimeout),l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,o(s,l._currentPickResult)),d=!0):(l._doubleClickOccured=!1,l._previousStartingPointerTime=l._startingPointerTime,l._previousStartingPointerPosition.x=l._startingPointerPosition.x,l._previousStartingPointerPosition.y=l._startingPointerPosition.y,l._previousButtonPressed=h))}}d||o(s,l._currentPickResult)},this._onPointerMove=function(e){if(void 0===e.pointerId&&(e.pointerId=0),l._updatePointerPosition(e),!l._checkPrePointerObservable(null,e,e.type===l._wheelEventName?n["PointerEventTypes"].POINTERWHEEL:n["PointerEventTypes"].POINTERMOVE)&&(d.cameraToUseForPointers||d.activeCamera)){d.pointerMovePredicate||(d.pointerMovePredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(e.enablePointerMoveEvents||d.constantlyUpdateMeshUnderPointer||null!=e._getActionManagerForTrigger())&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&e.layerMask))});var t=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerMovePredicate,!1,d.cameraToUseForPointers);l._processPointerMove(t,e)}},this._onPointerDown=function(e){if(l._totalPointersPressed++,l._pickedDownMesh=null,l._meshPickProceed=!1,void 0===e.pointerId&&(e.pointerId=0),l._updatePointerPosition(e),d.preventDefaultOnPointerDown&&o&&(e.preventDefault(),o.focus()),l._startingPointerPosition.x=l._pointerX,l._startingPointerPosition.y=l._pointerY,l._startingPointerTime=Date.now(),!l._checkPrePointerObservable(null,e,n["PointerEventTypes"].POINTERDOWN)&&(d.cameraToUseForPointers||d.activeCamera)){l._pointerCaptures[e.pointerId]=!0,d.pointerDownPredicate||(d.pointerDownPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&e.layerMask))}),l._pickedDownMesh=null;var t=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers);l._processPointerDown(t,e)}},this._onPointerUp=function(e){0!==l._totalPointersPressed&&(l._totalPointersPressed--,l._pickedUpMesh=null,l._meshPickProceed=!1,void 0===e.pointerId&&(e.pointerId=0),l._updatePointerPosition(e),d.preventDefaultOnPointerUp&&o&&(e.preventDefault(),o.focus()),l._initClickEvent(d.onPrePointerObservable,d.onPointerObservable,e,(function(t,r){if(d.onPrePointerObservable.hasObservers()&&!t.ignore){if(!t.hasSwiped){if(t.singleClick&&d.onPrePointerObservable.hasSpecificMask(n["PointerEventTypes"].POINTERTAP)&&l._checkPrePointerObservable(null,e,n["PointerEventTypes"].POINTERTAP))return;if(t.doubleClick&&d.onPrePointerObservable.hasSpecificMask(n["PointerEventTypes"].POINTERDOUBLETAP)&&l._checkPrePointerObservable(null,e,n["PointerEventTypes"].POINTERDOUBLETAP))return}if(l._checkPrePointerObservable(null,e,n["PointerEventTypes"].POINTERUP))return}l._pointerCaptures[e.pointerId]&&(l._pointerCaptures[e.pointerId]=!1,(d.cameraToUseForPointers||d.activeCamera)&&(d.pointerUpPredicate||(d.pointerUpPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&e.layerMask))}),!l._meshPickProceed&&(i["AbstractActionManager"]&&i["AbstractActionManager"].HasTriggers||d.onPointerObservable.hasObservers())&&l._initActionManager(null,t),r||(r=l._currentPickResult),l._processPointerUp(r,e,t),l._previousPickResult=l._currentPickResult))})))},this._onKeyDown=function(e){var t=u["KeyboardEventTypes"].KEYDOWN;if(d.onPreKeyboardObservable.hasObservers()){var r=new u["KeyboardInfoPre"](t,e);if(d.onPreKeyboardObservable.notifyObservers(r,t),r.skipOnPointerObservable)return}if(d.onKeyboardObservable.hasObservers()){r=new u["KeyboardInfo"](t,e);d.onKeyboardObservable.notifyObservers(r,t)}d.actionManager&&d.actionManager.processTrigger(14,s["ActionEvent"].CreateNewFromScene(d,e))},this._onKeyUp=function(e){var t=u["KeyboardEventTypes"].KEYUP;if(d.onPreKeyboardObservable.hasObservers()){var r=new u["KeyboardInfoPre"](t,e);if(d.onPreKeyboardObservable.notifyObservers(r,t),r.skipOnPointerObservable)return}if(d.onKeyboardObservable.hasObservers()){r=new u["KeyboardInfo"](t,e);d.onKeyboardObservable.notifyObservers(r,t)}d.actionManager&&d.actionManager.processTrigger(15,s["ActionEvent"].CreateNewFromScene(d,e))};var attachedFunction=function(){o&&!l._keyboardIsAttached&&(o.addEventListener("keydown",l._onKeyDown,!1),o.addEventListener("keyup",l._onKeyUp,!1),l._keyboardIsAttached=!0)};this._onCanvasFocusObserver=h.onCanvasFocusObservable.add(function(){return document.activeElement===o&&attachedFunction(),attachedFunction}()),this._onCanvasBlurObserver=h.onCanvasBlurObservable.add((function(){o&&(o.removeEventListener("keydown",l._onKeyDown),o.removeEventListener("keyup",l._onKeyUp),l._keyboardIsAttached=!1)})),attachedFunction();var f=a["Tools"].GetPointerPrefix(h);if(r&&(o.addEventListener(f+"move",this._onPointerMove,!1),this._wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",o.addEventListener(this._wheelEventName,this._onPointerMove,!1)),t&&o.addEventListener(f+"down",this._onPointerDown,!1),e){var p=d.getEngine().getHostWindow();p&&p.addEventListener(f+"up",this._onPointerUp,!1)}this._alreadyAttached=!0}},InputManager.prototype.detachControl=function(){var e=this._scene.getEngine(),t=a["Tools"].GetPointerPrefix(e);this._alreadyAttachedTo&&this._alreadyAttached&&(this._alreadyAttachedTo.removeEventListener(t+"move",this._onPointerMove),this._alreadyAttachedTo.removeEventListener(this._wheelEventName,this._onPointerMove),this._alreadyAttachedTo.removeEventListener(t+"down",this._onPointerDown),window.removeEventListener(t+"up",this._onPointerUp),this._onCanvasBlurObserver&&e.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&e.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),this._alreadyAttachedTo.removeEventListener("keydown",this._onKeyDown),this._alreadyAttachedTo.removeEventListener("keyup",this._onKeyUp),this._scene.doNotHandleCursors||(this._alreadyAttachedTo.style.cursor=this._scene.defaultCursor),this._alreadyAttached=!1)},InputManager.prototype.setPointerOverMesh=function(e,t){if(void 0===t&&(t=0),t<0&&(t=0),this._meshUnderPointerId[t]!==e){var r,n=this._meshUnderPointerId[t];n&&(r=n._getActionManagerForTrigger(10),r&&r.processTrigger(10,s["ActionEvent"].CreateNew(n,void 0,{pointerId:t}))),this._meshUnderPointerId[t]=e,this._pointerOverMesh=e,n=this._meshUnderPointerId[t],n&&(r=n._getActionManagerForTrigger(9),r&&r.processTrigger(9,s["ActionEvent"].CreateNew(n,void 0,{pointerId:t})))}},InputManager.prototype.getPointerOverMesh=function(){return this._pointerOverMesh},InputManager.DragMovementThreshold=10,InputManager.LongPressDelay=500,InputManager.DoubleClickDelay=300,InputManager.ExclusiveDoubleClickMode=!1,InputManager}()},"./node_modules/@babylonjs/core/Layers/effectLayer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EffectLayer",(function(){return g}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/tools.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/Maths/math.color.js"),u=r("./node_modules/@babylonjs/core/Engines/engine.js"),c=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),l=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),d=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),h=r("./node_modules/@babylonjs/core/Materials/Textures/renderTargetTexture.js"),f=r("./node_modules/@babylonjs/core/Materials/material.js"),p=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),m=(r("./node_modules/@babylonjs/core/Shaders/glowMapGeneration.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/glowMapGeneration.vertex.js"),r("./node_modules/@babylonjs/core/Misc/devTools.js")),_=r("./node_modules/@babylonjs/core/Materials/effectFallbacks.js"),g=function(){function EffectLayer(e,t){this._vertexBuffers={},this._maxSize=0,this._mainTextureDesiredSize={width:0,height:0},this._shouldRender=!0,this._postProcesses=[],this._textures=[],this._emissiveTextureAndColor={texture:null,color:new a["Color4"]},this.neutralColor=new a["Color4"],this.isEnabled=!0,this.disableBoundingBoxesFromEffectLayer=!1,this.onDisposeObservable=new s["Observable"],this.onBeforeRenderMainTextureObservable=new s["Observable"],this.onBeforeComposeObservable=new s["Observable"],this.onBeforeRenderMeshToEffect=new s["Observable"],this.onAfterRenderMeshToEffect=new s["Observable"],this.onAfterComposeObservable=new s["Observable"],this.onSizeChangedObservable=new s["Observable"],this.name=e,this._scene=t||c["EngineStore"].LastCreatedScene,EffectLayer._SceneComponentInitialization(this._scene),this._engine=this._scene.getEngine(),this._maxSize=this._engine.getCaps().maxTextureSize,this._scene.effectLayers.push(this),this._generateIndexBuffer(),this._generateVertexBuffer()}return Object.defineProperty(EffectLayer.prototype,"camera",{get:function(){return this._effectLayerOptions.camera},enumerable:!1,configurable:!0}),Object.defineProperty(EffectLayer.prototype,"renderingGroupId",{get:function(){return this._effectLayerOptions.renderingGroupId},set:function(e){this._effectLayerOptions.renderingGroupId=e},enumerable:!1,configurable:!0}),EffectLayer.prototype._init=function(e){this._effectLayerOptions=Object(n["__assign"])({mainTextureRatio:.5,alphaBlendingMode:2,camera:null,renderingGroupId:-1},e),this._setMainTextureSize(),this._createMainTexture(),this._createTextureAndPostProcesses(),this._mergeEffect=this._createMergeEffect()},EffectLayer.prototype._generateIndexBuffer=function(){var e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=this._engine.createIndexBuffer(e)},EffectLayer.prototype._generateVertexBuffer=function(){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1);var t=new l["VertexBuffer"](this._engine,e,l["VertexBuffer"].PositionKind,!1,!1,2);this._vertexBuffers[l["VertexBuffer"].PositionKind]=t},EffectLayer.prototype._setMainTextureSize=function(){this._effectLayerOptions.mainTextureFixedSize?(this._mainTextureDesiredSize.width=this._effectLayerOptions.mainTextureFixedSize,this._mainTextureDesiredSize.height=this._effectLayerOptions.mainTextureFixedSize):(this._mainTextureDesiredSize.width=this._engine.getRenderWidth()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.height=this._engine.getRenderHeight()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.width=this._engine.needPOTTextures?u["Engine"].GetExponentOfTwo(this._mainTextureDesiredSize.width,this._maxSize):this._mainTextureDesiredSize.width,this._mainTextureDesiredSize.height=this._engine.needPOTTextures?u["Engine"].GetExponentOfTwo(this._mainTextureDesiredSize.height,this._maxSize):this._mainTextureDesiredSize.height),this._mainTextureDesiredSize.width=Math.floor(this._mainTextureDesiredSize.width),this._mainTextureDesiredSize.height=Math.floor(this._mainTextureDesiredSize.height)},EffectLayer.prototype._createMainTexture=function(){var e=this;this._mainTexture=new h["RenderTargetTexture"]("HighlightLayerMainRTT",{width:this._mainTextureDesiredSize.width,height:this._mainTextureDesiredSize.height},this._scene,!1,!0,0),this._mainTexture.activeCamera=this._effectLayerOptions.camera,this._mainTexture.wrapU=d["Texture"].CLAMP_ADDRESSMODE,this._mainTexture.wrapV=d["Texture"].CLAMP_ADDRESSMODE,this._mainTexture.anisotropicFilteringLevel=1,this._mainTexture.updateSamplingMode(d["Texture"].BILINEAR_SAMPLINGMODE),this._mainTexture.renderParticles=!1,this._mainTexture.renderList=null,this._mainTexture.ignoreCameraViewport=!0,this._mainTexture.customRenderFunction=function(t,r,n,i){var o;e.onBeforeRenderMainTextureObservable.notifyObservers(e);var s=e._scene.getEngine();if(i.length){for(s.setColorWrite(!1),o=0;o<i.length;o++)e._renderSubMesh(i.data[o]);s.setColorWrite(!0)}for(o=0;o<t.length;o++)e._renderSubMesh(t.data[o]);for(o=0;o<r.length;o++)e._renderSubMesh(r.data[o]);var a=s.getAlphaMode();for(o=0;o<n.length;o++)e._renderSubMesh(n.data[o],!0);s.setAlphaMode(a)},this._mainTexture.onClearObservable.add((function(t){t.clear(e.neutralColor,!0,!0,!0)}));var t=this._scene.getBoundingBoxRenderer().enabled;this._mainTexture.onBeforeBindObservable.add((function(){e._scene.getBoundingBoxRenderer().enabled=!e.disableBoundingBoxesFromEffectLayer&&t})),this._mainTexture.onAfterUnbindObservable.add((function(){e._scene.getBoundingBoxRenderer().enabled=t}))},EffectLayer.prototype._addCustomEffectDefines=function(e){},EffectLayer.prototype._isReady=function(e,t,r){var n=e.getMaterial();if(!n)return!1;if(!n.isReadyForSubMesh(e.getMesh(),e,t))return!1;var i=[],o=[l["VertexBuffer"].PositionKind],s=e.getMesh(),a=!1,u=!1;if(n){var c=n.needAlphaTesting(),d=n.getAlphaTestTexture(),h=d&&d.hasAlpha&&(n.useAlphaFromDiffuseTexture||n._useAlphaFromAlbedoTexture);d&&(c||h)&&(i.push("#define DIFFUSE"),s.isVerticesDataPresent(l["VertexBuffer"].UV2Kind)&&1===d.coordinatesIndex?(i.push("#define DIFFUSEUV2"),u=!0):s.isVerticesDataPresent(l["VertexBuffer"].UVKind)&&(i.push("#define DIFFUSEUV1"),a=!0),c&&(i.push("#define ALPHATEST"),i.push("#define ALPHATESTVALUE 0.4")));var f=n.opacityTexture;f&&(i.push("#define OPACITY"),s.isVerticesDataPresent(l["VertexBuffer"].UV2Kind)&&1===f.coordinatesIndex?(i.push("#define OPACITYUV2"),u=!0):s.isVerticesDataPresent(l["VertexBuffer"].UVKind)&&(i.push("#define OPACITYUV1"),a=!0))}r&&(i.push("#define EMISSIVE"),s.isVerticesDataPresent(l["VertexBuffer"].UV2Kind)&&1===r.coordinatesIndex?(i.push("#define EMISSIVEUV2"),u=!0):s.isVerticesDataPresent(l["VertexBuffer"].UVKind)&&(i.push("#define EMISSIVEUV1"),a=!0)),s.isVerticesDataPresent(l["VertexBuffer"].ColorKind)&&s.hasVertexAlpha&&(o.push(l["VertexBuffer"].ColorKind),i.push("#define VERTEXALPHA")),a&&(o.push(l["VertexBuffer"].UVKind),i.push("#define UV1")),u&&(o.push(l["VertexBuffer"].UV2Kind),i.push("#define UV2"));var m=new _["EffectFallbacks"];if(s.useBones&&s.computeBonesUsingShaders){o.push(l["VertexBuffer"].MatricesIndicesKind),o.push(l["VertexBuffer"].MatricesWeightsKind),s.numBoneInfluencers>4&&(o.push(l["VertexBuffer"].MatricesIndicesExtraKind),o.push(l["VertexBuffer"].MatricesWeightsExtraKind)),i.push("#define NUM_BONE_INFLUENCERS "+s.numBoneInfluencers);var g=s.skeleton;g&&g.isUsingTextureForMatrices?i.push("#define BONETEXTURE"):i.push("#define BonesPerMesh "+(g?g.bones.length+1:0)),s.numBoneInfluencers>0&&m.addCPUSkinningFallback(0,s)}else i.push("#define NUM_BONE_INFLUENCERS 0");var b=s.morphTargetManager,v=0;b&&b.numInfluencers>0&&(i.push("#define MORPHTARGETS"),v=b.numInfluencers,i.push("#define NUM_MORPH_INFLUENCERS "+v),p["MaterialHelper"].PrepareAttributesForMorphTargetsInfluencers(o,s,v)),t&&(i.push("#define INSTANCES"),p["MaterialHelper"].PushAttributesForInstances(o),e.getRenderingMesh().hasThinInstances&&i.push("#define THIN_INSTANCES")),this._addCustomEffectDefines(i);var M=i.join("\n");return this._cachedDefines!==M&&(this._cachedDefines=M,this._effectLayerMapGenerationEffect=this._scene.getEngine().createEffect("glowMapGeneration",o,["world","mBones","viewProjection","glowColor","morphTargetInfluences","boneTextureWidth","diffuseMatrix","emissiveMatrix","opacityMatrix","opacityIntensity"],["diffuseSampler","emissiveSampler","opacitySampler","boneSampler"],M,m,void 0,void 0,{maxSimultaneousMorphTargets:v})),this._effectLayerMapGenerationEffect.isReady()},EffectLayer.prototype.render=function(){var e=this._mergeEffect;if(e.isReady()){for(var t=0;t<this._postProcesses.length;t++)if(!this._postProcesses[t].isReady())return;var r=this._scene.getEngine();this.onBeforeComposeObservable.notifyObservers(this),r.enableEffect(e),r.setState(!1),r.bindBuffers(this._vertexBuffers,this._indexBuffer,e);var n=r.getAlphaMode();r.setAlphaMode(this._effectLayerOptions.alphaBlendingMode),this._internalRender(e),r.setAlphaMode(n),this.onAfterComposeObservable.notifyObservers(this);var i=this._mainTexture.getSize();this._setMainTextureSize(),i.width===this._mainTextureDesiredSize.width&&i.height===this._mainTextureDesiredSize.height||(this.onSizeChangedObservable.notifyObservers(this),this._disposeTextureAndPostProcesses(),this._createMainTexture(),this._createTextureAndPostProcesses())}},EffectLayer.prototype.hasMesh=function(e){return-1===this.renderingGroupId||e.renderingGroupId===this.renderingGroupId},EffectLayer.prototype.shouldRender=function(){return this.isEnabled&&this._shouldRender},EffectLayer.prototype._shouldRenderMesh=function(e){return!0},EffectLayer.prototype._canRenderMesh=function(e,t){return!t.needAlphaBlendingForMesh(e)},EffectLayer.prototype._shouldRenderEmissiveTextureForMesh=function(){return!0},EffectLayer.prototype._renderSubMesh=function(e,t){var r,n=this;if(void 0===t&&(t=!1),this.shouldRender()){var i=e.getMaterial(),o=e.getMesh(),s=e.getReplacementMesh(),a=e.getRenderingMesh(),u=e.getEffectiveMesh(),c=this._scene,l=c.getEngine();if(u._internalAbstractMeshDataInfo._isActiveIntermediate=!1,i&&this._canRenderMesh(a,i)){var d=null!==(r=a.overrideMaterialSideOrientation)&&void 0!==r?r:i.sideOrientation,h=a._getWorldMatrixDeterminant();h<0&&(d=d===f["Material"].ClockWiseSideOrientation?f["Material"].CounterClockWiseSideOrientation:f["Material"].ClockWiseSideOrientation);var m=d===f["Material"].ClockWiseSideOrientation;l.setState(i.backFaceCulling,i.zOffset,void 0,m);var _=a._getInstancesRenderList(e._id,!!s);if(!_.mustReturn&&this._shouldRenderMesh(a)){var g=_.hardwareInstancedRendering[e._id]||a.hasThinInstances;if(this._setEmissiveTextureAndColor(a,e,i),this.onBeforeRenderMeshToEffect.notifyObservers(o),this._useMeshMaterial(a))a.render(e,g,s||void 0);else if(this._isReady(e,g,this._emissiveTextureAndColor.texture)){l.enableEffect(this._effectLayerMapGenerationEffect),a._bind(e,this._effectLayerMapGenerationEffect,f["Material"].TriangleFillMode),this._effectLayerMapGenerationEffect.setMatrix("viewProjection",c.getTransformMatrix()),this._effectLayerMapGenerationEffect.setMatrix("world",u.getWorldMatrix()),this._effectLayerMapGenerationEffect.setFloat4("glowColor",this._emissiveTextureAndColor.color.r,this._emissiveTextureAndColor.color.g,this._emissiveTextureAndColor.color.b,this._emissiveTextureAndColor.color.a);var b=i.needAlphaTesting(),v=i.getAlphaTestTexture(),M=v&&v.hasAlpha&&(i.useAlphaFromDiffuseTexture||i._useAlphaFromAlbedoTexture);if(v&&(b||M)){this._effectLayerMapGenerationEffect.setTexture("diffuseSampler",v);var T=v.getTextureMatrix();T&&this._effectLayerMapGenerationEffect.setMatrix("diffuseMatrix",T)}var S=i.opacityTexture;if(S){this._effectLayerMapGenerationEffect.setTexture("opacitySampler",S),this._effectLayerMapGenerationEffect.setFloat("opacityIntensity",S.level);T=S.getTextureMatrix();T&&this._effectLayerMapGenerationEffect.setMatrix("opacityMatrix",T)}if(this._emissiveTextureAndColor.texture&&(this._effectLayerMapGenerationEffect.setTexture("emissiveSampler",this._emissiveTextureAndColor.texture),this._effectLayerMapGenerationEffect.setMatrix("emissiveMatrix",this._emissiveTextureAndColor.texture.getTextureMatrix())),a.useBones&&a.computeBonesUsingShaders&&a.skeleton){var C=a.skeleton;if(C.isUsingTextureForMatrices){var E=C.getTransformMatrixTexture(a);if(!E)return;this._effectLayerMapGenerationEffect.setTexture("boneSampler",E),this._effectLayerMapGenerationEffect.setFloat("boneTextureWidth",4*(C.bones.length+1))}else this._effectLayerMapGenerationEffect.setMatrices("mBones",C.getTransformMatrices(a))}p["MaterialHelper"].BindMorphTargetParameters(a,this._effectLayerMapGenerationEffect),t&&l.setAlphaMode(i.alphaMode),a._processRendering(u,e,this._effectLayerMapGenerationEffect,i.fillMode,_,g,(function(e,t){return n._effectLayerMapGenerationEffect.setMatrix("world",t)}))}else this._mainTexture.resetRefreshCounter();this.onAfterRenderMeshToEffect.notifyObservers(o)}}}},EffectLayer.prototype._useMeshMaterial=function(e){return!1},EffectLayer.prototype._rebuild=function(){var e=this._vertexBuffers[l["VertexBuffer"].PositionKind];e&&e._rebuild(),this._generateIndexBuffer()},EffectLayer.prototype._disposeTextureAndPostProcesses=function(){this._mainTexture.dispose();for(var e=0;e<this._postProcesses.length;e++)this._postProcesses[e]&&this._postProcesses[e].dispose();this._postProcesses=[];for(e=0;e<this._textures.length;e++)this._textures[e]&&this._textures[e].dispose();this._textures=[]},EffectLayer.prototype.dispose=function(){var e=this._vertexBuffers[l["VertexBuffer"].PositionKind];e&&(e.dispose(),this._vertexBuffers[l["VertexBuffer"].PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this._disposeTextureAndPostProcesses();var t=this._scene.effectLayers.indexOf(this,0);t>-1&&this._scene.effectLayers.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderMainTextureObservable.clear(),this.onBeforeComposeObservable.clear(),this.onBeforeRenderMeshToEffect.clear(),this.onAfterRenderMeshToEffect.clear(),this.onAfterComposeObservable.clear(),this.onSizeChangedObservable.clear()},EffectLayer.prototype.getClassName=function(){return"EffectLayer"},EffectLayer.Parse=function(e,t,r){var n=o["Tools"].Instantiate(e.customType);return n.Parse(e,t,r)},EffectLayer._SceneComponentInitialization=function(e){throw m["_DevTools"].WarnImport("EffectLayerSceneComponent")},Object(n["__decorate"])([Object(i["serialize"])()],EffectLayer.prototype,"name",void 0),Object(n["__decorate"])([Object(i["serializeAsColor4"])()],EffectLayer.prototype,"neutralColor",void 0),Object(n["__decorate"])([Object(i["serialize"])()],EffectLayer.prototype,"isEnabled",void 0),Object(n["__decorate"])([Object(i["serializeAsCameraReference"])()],EffectLayer.prototype,"camera",null),Object(n["__decorate"])([Object(i["serialize"])()],EffectLayer.prototype,"renderingGroupId",null),Object(n["__decorate"])([Object(i["serialize"])()],EffectLayer.prototype,"disableBoundingBoxesFromEffectLayer",void 0),EffectLayer}()},"./node_modules/@babylonjs/core/Layers/highlightLayer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"HighlightLayer",(function(){return T}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Engines/engine.js"),u=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),c=r("./node_modules/@babylonjs/core/Materials/material.js"),l=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),d=r("./node_modules/@babylonjs/core/Materials/Textures/renderTargetTexture.js"),h=r("./node_modules/@babylonjs/core/PostProcesses/postProcess.js"),f=r("./node_modules/@babylonjs/core/PostProcesses/passPostProcess.js"),p=r("./node_modules/@babylonjs/core/PostProcesses/blurPostProcess.js"),m=r("./node_modules/@babylonjs/core/Layers/effectLayer.js"),_=r("./node_modules/@babylonjs/core/abstractScene.js"),g=r("./node_modules/@babylonjs/core/Misc/logger.js"),b=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),v=r("./node_modules/@babylonjs/core/Maths/math.color.js");r("./node_modules/@babylonjs/core/Shaders/glowMapMerge.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/glowMapMerge.vertex.js"),r("./node_modules/@babylonjs/core/Shaders/glowBlurPostProcess.fragment.js");_["AbstractScene"].prototype.getHighlightLayerByName=function(e){for(var t=0;t<this.effectLayers.length;t++)if(this.effectLayers[t].name===e&&this.effectLayers[t].getEffectName()===T.EffectName)return this.effectLayers[t];return null};var M=function(e){function GlowBlurPostProcess(t,r,n,i,o,s,a,u){void 0===s&&(s=l["Texture"].BILINEAR_SAMPLINGMODE);var c=e.call(this,t,"glowBlurPostProcess",["screenSize","direction","blurWidth"],null,i,o,s,a,u)||this;return c.direction=r,c.kernel=n,c.onApplyObservable.add((function(e){e.setFloat2("screenSize",c.width,c.height),e.setVector2("direction",c.direction),e.setFloat("blurWidth",c.kernel)})),c}return Object(n["__extends"])(GlowBlurPostProcess,e),GlowBlurPostProcess}(h["PostProcess"]),T=function(e){function HighlightLayer(t,r,i){var s=e.call(this,t,r)||this;return s.name=t,s.innerGlow=!0,s.outerGlow=!0,s.onBeforeBlurObservable=new o["Observable"],s.onAfterBlurObservable=new o["Observable"],s._instanceGlowingMeshStencilReference=HighlightLayer.GlowingMeshStencilReference++,s._meshes={},s._excludedMeshes={},s.neutralColor=HighlightLayer.NeutralColor,s._engine.isStencilEnable||g["Logger"].Warn("Rendering the Highlight Layer requires the stencil to be active on the canvas. var engine = new Engine(canvas, antialias, { stencil: true }"),s._options=Object(n["__assign"])({mainTextureRatio:.5,blurTextureSizeRatio:.5,blurHorizontalSize:1,blurVerticalSize:1,alphaBlendingMode:2,camera:null,renderingGroupId:-1},i),s._init({alphaBlendingMode:s._options.alphaBlendingMode,camera:s._options.camera,mainTextureFixedSize:s._options.mainTextureFixedSize,mainTextureRatio:s._options.mainTextureRatio,renderingGroupId:s._options.renderingGroupId}),s._shouldRender=!1,s}return Object(n["__extends"])(HighlightLayer,e),Object.defineProperty(HighlightLayer.prototype,"blurHorizontalSize",{get:function(){return this._horizontalBlurPostprocess.kernel},set:function(e){this._horizontalBlurPostprocess.kernel=e},enumerable:!1,configurable:!0}),Object.defineProperty(HighlightLayer.prototype,"blurVerticalSize",{get:function(){return this._verticalBlurPostprocess.kernel},set:function(e){this._verticalBlurPostprocess.kernel=e},enumerable:!1,configurable:!0}),HighlightLayer.prototype.getEffectName=function(){return HighlightLayer.EffectName},HighlightLayer.prototype._createMergeEffect=function(){return this._engine.createEffect("glowMapMerge",[u["VertexBuffer"].PositionKind],["offset"],["textureSampler"],this._options.isStroke?"#define STROKE \n":void 0)},HighlightLayer.prototype._createTextureAndPostProcesses=function(){var e=this,t=this._mainTextureDesiredSize.width*this._options.blurTextureSizeRatio,r=this._mainTextureDesiredSize.height*this._options.blurTextureSizeRatio;t=this._engine.needPOTTextures?a["Engine"].GetExponentOfTwo(t,this._maxSize):t,r=this._engine.needPOTTextures?a["Engine"].GetExponentOfTwo(r,this._maxSize):r;var n=0;n=this._engine.getCaps().textureHalfFloatRender?2:0,this._blurTexture=new d["RenderTargetTexture"]("HighlightLayerBlurRTT",{width:t,height:r},this._scene,!1,!0,n),this._blurTexture.wrapU=l["Texture"].CLAMP_ADDRESSMODE,this._blurTexture.wrapV=l["Texture"].CLAMP_ADDRESSMODE,this._blurTexture.anisotropicFilteringLevel=16,this._blurTexture.updateSamplingMode(l["Texture"].TRILINEAR_SAMPLINGMODE),this._blurTexture.renderParticles=!1,this._blurTexture.ignoreCameraViewport=!0,this._textures=[this._blurTexture],2===this._options.alphaBlendingMode?(this._downSamplePostprocess=new f["PassPostProcess"]("HighlightLayerPPP",this._options.blurTextureSizeRatio,null,l["Texture"].BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._downSamplePostprocess.onApplyObservable.add((function(t){t.setTexture("textureSampler",e._mainTexture)})),this._horizontalBlurPostprocess=new M("HighlightLayerHBP",new s["Vector2"](1,0),this._options.blurHorizontalSize,1,null,l["Texture"].BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._horizontalBlurPostprocess.onApplyObservable.add((function(e){e.setFloat2("screenSize",t,r)})),this._verticalBlurPostprocess=new M("HighlightLayerVBP",new s["Vector2"](0,1),this._options.blurVerticalSize,1,null,l["Texture"].BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._verticalBlurPostprocess.onApplyObservable.add((function(e){e.setFloat2("screenSize",t,r)})),this._postProcesses=[this._downSamplePostprocess,this._horizontalBlurPostprocess,this._verticalBlurPostprocess]):(this._horizontalBlurPostprocess=new p["BlurPostProcess"]("HighlightLayerHBP",new s["Vector2"](1,0),this._options.blurHorizontalSize/2,{width:t,height:r},null,l["Texture"].BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,n),this._horizontalBlurPostprocess.width=t,this._horizontalBlurPostprocess.height=r,this._horizontalBlurPostprocess.onApplyObservable.add((function(t){t.setTexture("textureSampler",e._mainTexture)})),this._verticalBlurPostprocess=new p["BlurPostProcess"]("HighlightLayerVBP",new s["Vector2"](0,1),this._options.blurVerticalSize/2,{width:t,height:r},null,l["Texture"].BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,n),this._postProcesses=[this._horizontalBlurPostprocess,this._verticalBlurPostprocess]),this._mainTexture.onAfterUnbindObservable.add((function(){e.onBeforeBlurObservable.notifyObservers(e);var t=e._blurTexture.getInternalTexture();t&&(e._scene.postProcessManager.directRender(e._postProcesses,t,!0),e._engine.unBindFramebuffer(t,!0)),e.onAfterBlurObservable.notifyObservers(e)})),this._postProcesses.map((function(e){e.autoClear=!1}))},HighlightLayer.prototype.needStencil=function(){return!0},HighlightLayer.prototype.isReady=function(t,r){var n=t.getMaterial(),i=t.getRenderingMesh();if(!n||!i||!this._meshes)return!1;var o=null,s=this._meshes[i.uniqueId];return s&&s.glowEmissiveOnly&&n&&(o=n.emissiveTexture),e.prototype._isReady.call(this,t,r,o)},HighlightLayer.prototype._internalRender=function(e){e.setTexture("textureSampler",this._blurTexture);var t=this._engine;t.cacheStencilState(),t.setStencilOperationPass(7681),t.setStencilOperationFail(7680),t.setStencilOperationDepthFail(7680),t.setStencilMask(0),t.setStencilBuffer(!0),t.setStencilFunctionReference(this._instanceGlowingMeshStencilReference),this.outerGlow&&(e.setFloat("offset",0),t.setStencilFunction(517),t.drawElementsType(c["Material"].TriangleFillMode,0,6)),this.innerGlow&&(e.setFloat("offset",1),t.setStencilFunction(514),t.drawElementsType(c["Material"].TriangleFillMode,0,6)),t.restoreStencilState()},HighlightLayer.prototype.shouldRender=function(){return!!e.prototype.shouldRender.call(this)&&!!this._meshes},HighlightLayer.prototype._shouldRenderMesh=function(t){return(!this._excludedMeshes||!this._excludedMeshes[t.uniqueId])&&!!e.prototype.hasMesh.call(this,t)},HighlightLayer.prototype._canRenderMesh=function(e,t){return!0},HighlightLayer.prototype._addCustomEffectDefines=function(e){e.push("#define HIGHLIGHT")},HighlightLayer.prototype._setEmissiveTextureAndColor=function(e,t,r){var n=this._meshes[e.uniqueId];n?this._emissiveTextureAndColor.color.set(n.color.r,n.color.g,n.color.b,1):this._emissiveTextureAndColor.color.set(this.neutralColor.r,this.neutralColor.g,this.neutralColor.b,this.neutralColor.a),n&&n.glowEmissiveOnly&&r?(this._emissiveTextureAndColor.texture=r.emissiveTexture,this._emissiveTextureAndColor.color.set(1,1,1,1)):this._emissiveTextureAndColor.texture=null},HighlightLayer.prototype.addExcludedMesh=function(e){if(this._excludedMeshes){var t=this._excludedMeshes[e.uniqueId];t||(this._excludedMeshes[e.uniqueId]={mesh:e,beforeBind:e.onBeforeBindObservable.add((function(e){e.getEngine().setStencilBuffer(!1)})),afterRender:e.onAfterRenderObservable.add((function(e){e.getEngine().setStencilBuffer(!0)}))})}},HighlightLayer.prototype.removeExcludedMesh=function(e){if(this._excludedMeshes){var t=this._excludedMeshes[e.uniqueId];t&&(t.beforeBind&&e.onBeforeBindObservable.remove(t.beforeBind),t.afterRender&&e.onAfterRenderObservable.remove(t.afterRender)),this._excludedMeshes[e.uniqueId]=null}},HighlightLayer.prototype.hasMesh=function(t){return!!this._meshes&&(!!e.prototype.hasMesh.call(this,t)&&(void 0!==this._meshes[t.uniqueId]&&null!==this._meshes[t.uniqueId]))},HighlightLayer.prototype.addMesh=function(e,t,r){var n=this;if(void 0===r&&(r=!1),this._meshes){var i=this._meshes[e.uniqueId];i?i.color=t:(this._meshes[e.uniqueId]={mesh:e,color:t,observerHighlight:e.onBeforeBindObservable.add((function(e){n.isEnabled&&(n._excludedMeshes&&n._excludedMeshes[e.uniqueId]?n._defaultStencilReference(e):e.getScene().getEngine().setStencilFunctionReference(n._instanceGlowingMeshStencilReference))})),observerDefault:e.onAfterRenderObservable.add((function(e){n.isEnabled&&n._defaultStencilReference(e)})),glowEmissiveOnly:r},e.onDisposeObservable.add((function(){n._disposeMesh(e)}))),this._shouldRender=!0}},HighlightLayer.prototype.removeMesh=function(e){if(this._meshes){var t=this._meshes[e.uniqueId];for(var r in t&&(t.observerHighlight&&e.onBeforeBindObservable.remove(t.observerHighlight),t.observerDefault&&e.onAfterRenderObservable.remove(t.observerDefault),delete this._meshes[e.uniqueId]),this._shouldRender=!1,this._meshes)if(this._meshes[r]){this._shouldRender=!0;break}}},HighlightLayer.prototype.removeAllMeshes=function(){if(this._meshes)for(var e in this._meshes)if(this._meshes.hasOwnProperty(e)){var t=this._meshes[e];t&&this.removeMesh(t.mesh)}},HighlightLayer.prototype._defaultStencilReference=function(e){e.getScene().getEngine().setStencilFunctionReference(HighlightLayer.NormalMeshStencilReference)},HighlightLayer.prototype._disposeMesh=function(e){this.removeMesh(e),this.removeExcludedMesh(e)},HighlightLayer.prototype.dispose=function(){if(this._meshes){for(var t in this._meshes){var r=this._meshes[t];r&&r.mesh&&(r.observerHighlight&&r.mesh.onBeforeBindObservable.remove(r.observerHighlight),r.observerDefault&&r.mesh.onAfterRenderObservable.remove(r.observerDefault))}this._meshes=null}if(this._excludedMeshes){for(var t in this._excludedMeshes){r=this._excludedMeshes[t];r&&(r.beforeBind&&r.mesh.onBeforeBindObservable.remove(r.beforeBind),r.afterRender&&r.mesh.onAfterRenderObservable.remove(r.afterRender))}this._excludedMeshes=null}e.prototype.dispose.call(this)},HighlightLayer.prototype.getClassName=function(){return"HighlightLayer"},HighlightLayer.prototype.serialize=function(){var e=i["SerializationHelper"].Serialize(this);if(e.customType="BABYLON.HighlightLayer",e.meshes=[],this._meshes)for(var t in this._meshes){var r=this._meshes[t];r&&e.meshes.push({glowEmissiveOnly:r.glowEmissiveOnly,color:r.color.asArray(),meshId:r.mesh.id})}if(e.excludedMeshes=[],this._excludedMeshes)for(var n in this._excludedMeshes){var o=this._excludedMeshes[n];o&&e.excludedMeshes.push(o.mesh.id)}return e},HighlightLayer.Parse=function(e,t,r){var n,o=i["SerializationHelper"].Parse((function(){return new HighlightLayer(e.name,t,e.options)}),e,t,r);for(n=0;n<e.excludedMeshes.length;n++){var s=t.getMeshByID(e.excludedMeshes[n]);s&&o.addExcludedMesh(s)}for(n=0;n<e.meshes.length;n++){var a=e.meshes[n];s=t.getMeshByID(a.meshId);s&&o.addMesh(s,v["Color3"].FromArray(a.color),a.glowEmissiveOnly)}return o},HighlightLayer.EffectName="HighlightLayer",HighlightLayer.NeutralColor=new v["Color4"](0,0,0,0),HighlightLayer.GlowingMeshStencilReference=2,HighlightLayer.NormalMeshStencilReference=1,Object(n["__decorate"])([Object(i["serialize"])()],HighlightLayer.prototype,"innerGlow",void 0),Object(n["__decorate"])([Object(i["serialize"])()],HighlightLayer.prototype,"outerGlow",void 0),Object(n["__decorate"])([Object(i["serialize"])()],HighlightLayer.prototype,"blurHorizontalSize",null),Object(n["__decorate"])([Object(i["serialize"])()],HighlightLayer.prototype,"blurVerticalSize",null),Object(n["__decorate"])([Object(i["serialize"])("options")],HighlightLayer.prototype,"_options",void 0),HighlightLayer}(m["EffectLayer"]);b["_TypeStore"].RegisteredTypes["BABYLON.HighlightLayer"]=T},"./node_modules/@babylonjs/core/Lights/light.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Light",(function(){return l}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Maths/math.color.js"),a=r("./node_modules/@babylonjs/core/node.js"),u=r("./node_modules/@babylonjs/core/Materials/uniformBuffer.js"),c=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),l=function(e){function Light(t,r){var n=e.call(this,t,r)||this;return n.diffuse=new s["Color3"](1,1,1),n.specular=new s["Color3"](1,1,1),n.falloffType=Light.FALLOFF_DEFAULT,n.intensity=1,n._range=Number.MAX_VALUE,n._inverseSquaredRange=0,n._photometricScale=1,n._intensityMode=Light.INTENSITYMODE_AUTOMATIC,n._radius=1e-5,n.renderPriority=0,n._shadowEnabled=!0,n._excludeWithLayerMask=0,n._includeOnlyWithLayerMask=0,n._lightmapMode=0,n._excludedMeshesIds=new Array,n._includedOnlyMeshesIds=new Array,n._isLight=!0,n.getScene().addLight(n),n._uniformBuffer=new u["UniformBuffer"](n.getScene().getEngine()),n._buildUniformLayout(),n.includedOnlyMeshes=new Array,n.excludedMeshes=new Array,n._resyncMeshes(),n}return Object(n["__extends"])(Light,e),Object.defineProperty(Light.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this._inverseSquaredRange=1/(this.range*this.range)},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"intensityMode",{get:function(){return this._intensityMode},set:function(e){this._intensityMode=e,this._computePhotometricScale()},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._computePhotometricScale()},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"shadowEnabled",{get:function(){return this._shadowEnabled},set:function(e){this._shadowEnabled!==e&&(this._shadowEnabled=e,this._markMeshesAsLightDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"includedOnlyMeshes",{get:function(){return this._includedOnlyMeshes},set:function(e){this._includedOnlyMeshes=e,this._hookArrayForIncludedOnly(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"excludedMeshes",{get:function(){return this._excludedMeshes},set:function(e){this._excludedMeshes=e,this._hookArrayForExcluded(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"excludeWithLayerMask",{get:function(){return this._excludeWithLayerMask},set:function(e){this._excludeWithLayerMask=e,this._resyncMeshes()},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"includeOnlyWithLayerMask",{get:function(){return this._includeOnlyWithLayerMask},set:function(e){this._includeOnlyWithLayerMask=e,this._resyncMeshes()},enumerable:!1,configurable:!0}),Object.defineProperty(Light.prototype,"lightmapMode",{get:function(){return this._lightmapMode},set:function(e){this._lightmapMode!==e&&(this._lightmapMode=e,this._markMeshesAsLightDirty())},enumerable:!1,configurable:!0}),Light.prototype.transferTexturesToEffect=function(e,t){return this},Light.prototype._bindLight=function(e,t,r,n,i){void 0===i&&(i=!1);var o=e.toString(),a=!1;if(!i||!this._uniformBuffer._alreadyBound){if(this._uniformBuffer.bindToEffect(r,"Light"+o),this._renderId!==t.getRenderId()||!this._uniformBuffer.useUbo){this._renderId=t.getRenderId();var u=this.getScaledIntensity();this.transferToEffect(r,o),this.diffuse.scaleToRef(u,s["TmpColors"].Color3[0]),this._uniformBuffer.updateColor4("vLightDiffuse",s["TmpColors"].Color3[0],this.range,o),n&&(this.specular.scaleToRef(u,s["TmpColors"].Color3[1]),this._uniformBuffer.updateColor4("vLightSpecular",s["TmpColors"].Color3[1],this.radius,o)),a=!0}if(this.transferTexturesToEffect(r,o),t.shadowsEnabled&&this.shadowEnabled){var c=this.getShadowGenerator();c&&(c.bindShadowLight(o,r),a=!0)}a&&this._uniformBuffer.update()}},Light.prototype.getClassName=function(){return"Light"},Light.prototype.toString=function(e){var t="Name: "+this.name;if(t+=", type: "+["Point","Directional","Spot","Hemispheric"][this.getTypeID()],this.animations)for(var r=0;r<this.animations.length;r++)t+=", animation[0]: "+this.animations[r].toString(e);return t},Light.prototype._syncParentEnabledState=function(){e.prototype._syncParentEnabledState.call(this),this.isDisposed()||this._resyncMeshes()},Light.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._resyncMeshes()},Light.prototype.getShadowGenerator=function(){return this._shadowGenerator},Light.prototype.getAbsolutePosition=function(){return o["Vector3"].Zero()},Light.prototype.canAffectMesh=function(e){return!e||!(this.includedOnlyMeshes&&this.includedOnlyMeshes.length>0&&-1===this.includedOnlyMeshes.indexOf(e))&&(!(this.excludedMeshes&&this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(e))&&((0===this.includeOnlyWithLayerMask||0!==(this.includeOnlyWithLayerMask&e.layerMask))&&!(0!==this.excludeWithLayerMask&&this.excludeWithLayerMask&e.layerMask)))},Light.CompareLightsPriority=function(e,t){return e.shadowEnabled!==t.shadowEnabled?(t.shadowEnabled?1:0)-(e.shadowEnabled?1:0):t.renderPriority-e.renderPriority},Light.prototype.dispose=function(t,r){void 0===r&&(r=!1),this._shadowGenerator&&(this._shadowGenerator.dispose(),this._shadowGenerator=null),this.getScene().stopAnimation(this);for(var n=0,i=this.getScene().meshes;n<i.length;n++){var o=i[n];o._removeLightSource(this,!0)}this._uniformBuffer.dispose(),this.getScene().removeLight(this),e.prototype.dispose.call(this,t,r)},Light.prototype.getTypeID=function(){return 0},Light.prototype.getScaledIntensity=function(){return this._photometricScale*this.intensity},Light.prototype.clone=function(e,t){void 0===t&&(t=null);var r=Light.GetConstructorFromName(this.getTypeID(),e,this.getScene());if(!r)return null;var n=i["SerializationHelper"].Clone(r,this);return t&&(n.parent=t),n.setEnabled(this.isEnabled()),n},Light.prototype.serialize=function(){var e=i["SerializationHelper"].Serialize(this);return e.type=this.getTypeID(),this.parent&&(e.parentId=this.parent.id),this.excludedMeshes.length>0&&(e.excludedMeshesIds=[],this.excludedMeshes.forEach((function(t){e.excludedMeshesIds.push(t.id)}))),this.includedOnlyMeshes.length>0&&(e.includedOnlyMeshesIds=[],this.includedOnlyMeshes.forEach((function(t){e.includedOnlyMeshesIds.push(t.id)}))),i["SerializationHelper"].AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},Light.GetConstructorFromName=function(e,t,r){var n=a["Node"].Construct("Light_Type_"+e,t,r);return n||null},Light.Parse=function(e,t){var r=Light.GetConstructorFromName(e.type,e.name,t);if(!r)return null;var n=i["SerializationHelper"].Parse(r,e,t);if(e.excludedMeshesIds&&(n._excludedMeshesIds=e.excludedMeshesIds),e.includedOnlyMeshesIds&&(n._includedOnlyMeshesIds=e.includedOnlyMeshesIds),e.parentId&&(n._waitingParentId=e.parentId),void 0!==e.falloffType&&(n.falloffType=e.falloffType),void 0!==e.lightmapMode&&(n.lightmapMode=e.lightmapMode),e.animations){for(var o=0;o<e.animations.length;o++){var s=e.animations[o],u=c["_TypeStore"].GetClass("BABYLON.Animation");u&&n.animations.push(u.Parse(s))}a["Node"].ParseAnimationRanges(n,e,t)}return e.autoAnimate&&t.beginAnimation(n,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),n},Light.prototype._hookArrayForExcluded=function(e){var t=this,r=e.push;e.push=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=r.apply(e,n),s=0,a=n;s<a.length;s++){var u=a[s];u._resyncLightSource(t)}return o};var n=e.splice;e.splice=function(r,i){for(var o=n.apply(e,[r,i]),s=0,a=o;s<a.length;s++){var u=a[s];u._resyncLightSource(t)}return o};for(var i=0,o=e;i<o.length;i++){var s=o[i];s._resyncLightSource(this)}},Light.prototype._hookArrayForIncludedOnly=function(e){var t=this,r=e.push;e.push=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(e,n);return t._resyncMeshes(),o};var n=e.splice;e.splice=function(r,i){var o=n.apply(e,[r,i]);return t._resyncMeshes(),o},this._resyncMeshes()},Light.prototype._resyncMeshes=function(){for(var e=0,t=this.getScene().meshes;e<t.length;e++){var r=t[e];r._resyncLightSource(this)}},Light.prototype._markMeshesAsLightDirty=function(){for(var e=0,t=this.getScene().meshes;e<t.length;e++){var r=t[e];-1!==r.lightSources.indexOf(this)&&r._markSubMeshesAsLightDirty()}},Light.prototype._computePhotometricScale=function(){this._photometricScale=this._getPhotometricScale(),this.getScene().resetCachedMaterial()},Light.prototype._getPhotometricScale=function(){var e=0,t=this.getTypeID(),r=this.intensityMode;switch(r===Light.INTENSITYMODE_AUTOMATIC&&(r=t===Light.LIGHTTYPEID_DIRECTIONALLIGHT?Light.INTENSITYMODE_ILLUMINANCE:Light.INTENSITYMODE_LUMINOUSINTENSITY),t){case Light.LIGHTTYPEID_POINTLIGHT:case Light.LIGHTTYPEID_SPOTLIGHT:switch(r){case Light.INTENSITYMODE_LUMINOUSPOWER:e=1/(4*Math.PI);break;case Light.INTENSITYMODE_LUMINOUSINTENSITY:e=1;break;case Light.INTENSITYMODE_LUMINANCE:e=this.radius*this.radius;break}break;case Light.LIGHTTYPEID_DIRECTIONALLIGHT:switch(r){case Light.INTENSITYMODE_ILLUMINANCE:e=1;break;case Light.INTENSITYMODE_LUMINANCE:var n=this.radius;n=Math.max(n,.001);var i=2*Math.PI*(1-Math.cos(n));e=i;break}break;case Light.LIGHTTYPEID_HEMISPHERICLIGHT:e=1;break}return e},Light.prototype._reorderLightsInScene=function(){var e=this.getScene();0!=this._renderPriority&&(e.requireLightSorting=!0),this.getScene().sortLightsByPriority()},Light.FALLOFF_DEFAULT=0,Light.FALLOFF_PHYSICAL=1,Light.FALLOFF_GLTF=2,Light.FALLOFF_STANDARD=3,Light.LIGHTMAP_DEFAULT=0,Light.LIGHTMAP_SPECULAR=1,Light.LIGHTMAP_SHADOWSONLY=2,Light.INTENSITYMODE_AUTOMATIC=0,Light.INTENSITYMODE_LUMINOUSPOWER=1,Light.INTENSITYMODE_LUMINOUSINTENSITY=2,Light.INTENSITYMODE_ILLUMINANCE=3,Light.INTENSITYMODE_LUMINANCE=4,Light.LIGHTTYPEID_POINTLIGHT=0,Light.LIGHTTYPEID_DIRECTIONALLIGHT=1,Light.LIGHTTYPEID_SPOTLIGHT=2,Light.LIGHTTYPEID_HEMISPHERICLIGHT=3,Object(n["__decorate"])([Object(i["serializeAsColor3"])()],Light.prototype,"diffuse",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])()],Light.prototype,"specular",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"falloffType",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"intensity",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"range",null),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"intensityMode",null),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"radius",null),Object(n["__decorate"])([Object(i["serialize"])()],Light.prototype,"_renderPriority",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_reorderLightsInScene")],Light.prototype,"renderPriority",void 0),Object(n["__decorate"])([Object(i["serialize"])("shadowEnabled")],Light.prototype,"_shadowEnabled",void 0),Object(n["__decorate"])([Object(i["serialize"])("excludeWithLayerMask")],Light.prototype,"_excludeWithLayerMask",void 0),Object(n["__decorate"])([Object(i["serialize"])("includeOnlyWithLayerMask")],Light.prototype,"_includeOnlyWithLayerMask",void 0),Object(n["__decorate"])([Object(i["serialize"])("lightmapMode")],Light.prototype,"_lightmapMode",void 0),Light}(a["Node"])},"./node_modules/@babylonjs/core/Lights/pointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PointLight",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/node.js"),a=r("./node_modules/@babylonjs/core/Lights/light.js"),u=r("./node_modules/@babylonjs/core/Lights/shadowLight.js");s["Node"].AddNodeConstructor("Light_Type_0",(function(e,t){return function(){return new c(e,o["Vector3"].Zero(),t)}}));var c=function(e){function PointLight(t,r,n){var i=e.call(this,t,n)||this;return i._shadowAngle=Math.PI/2,i.position=r,i}return Object(n["__extends"])(PointLight,e),Object.defineProperty(PointLight.prototype,"shadowAngle",{get:function(){return this._shadowAngle},set:function(e){this._shadowAngle=e,this.forceProjectionMatrixCompute()},enumerable:!1,configurable:!0}),Object.defineProperty(PointLight.prototype,"direction",{get:function(){return this._direction},set:function(e){var t=this.needCube();this._direction=e,this.needCube()!==t&&this._shadowGenerator&&this._shadowGenerator.recreateShadowMap()},enumerable:!1,configurable:!0}),PointLight.prototype.getClassName=function(){return"PointLight"},PointLight.prototype.getTypeID=function(){return a["Light"].LIGHTTYPEID_POINTLIGHT},PointLight.prototype.needCube=function(){return!this.direction},PointLight.prototype.getShadowDirection=function(t){if(this.direction)return e.prototype.getShadowDirection.call(this,t);switch(t){case 0:return new o["Vector3"](1,0,0);case 1:return new o["Vector3"](-1,0,0);case 2:return new o["Vector3"](0,-1,0);case 3:return new o["Vector3"](0,1,0);case 4:return new o["Vector3"](0,0,1);case 5:return new o["Vector3"](0,0,-1)}return o["Vector3"].Zero()},PointLight.prototype._setDefaultShadowProjectionMatrix=function(e,t,r){var n=this.getScene().activeCamera;n&&o["Matrix"].PerspectiveFovLHToRef(this.shadowAngle,1,this.getDepthMinZ(n),this.getDepthMaxZ(n),e)},PointLight.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",4),this._uniformBuffer.addUniform("vLightFalloff",4),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},PointLight.prototype.transferToEffect=function(e,t){return this.computeTransformedInformation()?this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z,0,t):this._uniformBuffer.updateFloat4("vLightData",this.position.x,this.position.y,this.position.z,0,t),this._uniformBuffer.updateFloat4("vLightFalloff",this.range,this._inverseSquaredRange,0,0,t),this},PointLight.prototype.transferToNodeMaterialEffect=function(e,t){return this.computeTransformedInformation()?e.setFloat3(t,this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z):e.setFloat3(t,this.position.x,this.position.y,this.position.z),this},PointLight.prototype.prepareLightSpecificDefines=function(e,t){e["POINTLIGHT"+t]=!0},Object(n["__decorate"])([Object(i["serialize"])()],PointLight.prototype,"shadowAngle",null),PointLight}(u["ShadowLight"])},"./node_modules/@babylonjs/core/Lights/shadowLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShadowLight",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Lights/light.js"),a=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),u=function(e){function ShadowLight(){var t=null!==e&&e.apply(this,arguments)||this;return t._needProjectionMatrixCompute=!0,t}return Object(n["__extends"])(ShadowLight,e),ShadowLight.prototype._setPosition=function(e){this._position=e},Object.defineProperty(ShadowLight.prototype,"position",{get:function(){return this._position},set:function(e){this._setPosition(e)},enumerable:!1,configurable:!0}),ShadowLight.prototype._setDirection=function(e){this._direction=e},Object.defineProperty(ShadowLight.prototype,"direction",{get:function(){return this._direction},set:function(e){this._setDirection(e)},enumerable:!1,configurable:!0}),Object.defineProperty(ShadowLight.prototype,"shadowMinZ",{get:function(){return this._shadowMinZ},set:function(e){this._shadowMinZ=e,this.forceProjectionMatrixCompute()},enumerable:!1,configurable:!0}),Object.defineProperty(ShadowLight.prototype,"shadowMaxZ",{get:function(){return this._shadowMaxZ},set:function(e){this._shadowMaxZ=e,this.forceProjectionMatrixCompute()},enumerable:!1,configurable:!0}),ShadowLight.prototype.computeTransformedInformation=function(){return!(!this.parent||!this.parent.getWorldMatrix)&&(this.transformedPosition||(this.transformedPosition=o["Vector3"].Zero()),o["Vector3"].TransformCoordinatesToRef(this.position,this.parent.getWorldMatrix(),this.transformedPosition),this.direction&&(this.transformedDirection||(this.transformedDirection=o["Vector3"].Zero()),o["Vector3"].TransformNormalToRef(this.direction,this.parent.getWorldMatrix(),this.transformedDirection)),!0)},ShadowLight.prototype.getDepthScale=function(){return 50},ShadowLight.prototype.getShadowDirection=function(e){return this.transformedDirection?this.transformedDirection:this.direction},ShadowLight.prototype.getAbsolutePosition=function(){return this.transformedPosition?this.transformedPosition:this.position},ShadowLight.prototype.setDirectionToTarget=function(e){return this.direction=o["Vector3"].Normalize(e.subtract(this.position)),this.direction},ShadowLight.prototype.getRotation=function(){this.direction.normalize();var e=o["Vector3"].Cross(this.direction,a["Axis"].Y),t=o["Vector3"].Cross(e,this.direction);return o["Vector3"].RotationFromAxis(e,t,this.direction)},ShadowLight.prototype.needCube=function(){return!1},ShadowLight.prototype.needProjectionMatrixCompute=function(){return this._needProjectionMatrixCompute},ShadowLight.prototype.forceProjectionMatrixCompute=function(){this._needProjectionMatrixCompute=!0},ShadowLight.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.position=o["Vector3"].Zero()},ShadowLight.prototype._isSynchronized=function(){return!!this._cache.position.equals(this.position)},ShadowLight.prototype.computeWorldMatrix=function(e){return!e&&this.isSynchronized()?(this._currentRenderId=this.getScene().getRenderId(),this._worldMatrix):(this._updateCache(),this._cache.position.copyFrom(this.position),this._worldMatrix||(this._worldMatrix=o["Matrix"].Identity()),o["Matrix"].TranslationToRef(this.position.x,this.position.y,this.position.z,this._worldMatrix),this.parent&&this.parent.getWorldMatrix&&(this._worldMatrix.multiplyToRef(this.parent.getWorldMatrix(),this._worldMatrix),this._markSyncedWithParent()),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix)},ShadowLight.prototype.getDepthMinZ=function(e){return void 0!==this.shadowMinZ?this.shadowMinZ:e.minZ},ShadowLight.prototype.getDepthMaxZ=function(e){return void 0!==this.shadowMaxZ?this.shadowMaxZ:e.maxZ},ShadowLight.prototype.setShadowProjectionMatrix=function(e,t,r){return this.customProjectionMatrixBuilder?this.customProjectionMatrixBuilder(t,r,e):this._setDefaultShadowProjectionMatrix(e,t,r),this},Object(n["__decorate"])([Object(i["serializeAsVector3"])()],ShadowLight.prototype,"position",null),Object(n["__decorate"])([Object(i["serializeAsVector3"])()],ShadowLight.prototype,"direction",null),Object(n["__decorate"])([Object(i["serialize"])()],ShadowLight.prototype,"shadowMinZ",null),Object(n["__decorate"])([Object(i["serialize"])()],ShadowLight.prototype,"shadowMaxZ",null),ShadowLight}(s["Light"])},"./node_modules/@babylonjs/core/Loading/sceneLoaderFlags.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SceneLoaderFlags",(function(){return n}));var n=function(){function SceneLoaderFlags(){}return Object.defineProperty(SceneLoaderFlags,"ForceFullSceneLoadingForIncremental",{get:function(){return SceneLoaderFlags._ForceFullSceneLoadingForIncremental},set:function(e){SceneLoaderFlags._ForceFullSceneLoadingForIncremental=e},enumerable:!1,configurable:!0}),Object.defineProperty(SceneLoaderFlags,"ShowLoadingScreen",{get:function(){return SceneLoaderFlags._ShowLoadingScreen},set:function(e){SceneLoaderFlags._ShowLoadingScreen=e},enumerable:!1,configurable:!0}),Object.defineProperty(SceneLoaderFlags,"loggingLevel",{get:function(){return SceneLoaderFlags._loggingLevel},set:function(e){SceneLoaderFlags._loggingLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(SceneLoaderFlags,"CleanBoneMatrixWeights",{get:function(){return SceneLoaderFlags._CleanBoneMatrixWeights},set:function(e){SceneLoaderFlags._CleanBoneMatrixWeights=e},enumerable:!1,configurable:!0}),SceneLoaderFlags._ForceFullSceneLoadingForIncremental=!1,SceneLoaderFlags._ShowLoadingScreen=!0,SceneLoaderFlags._CleanBoneMatrixWeights=!1,SceneLoaderFlags._loggingLevel=0,SceneLoaderFlags}()},"./node_modules/@babylonjs/core/Materials/Textures/baseTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BaseTexture",(function(){return l}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),u=r("./node_modules/@babylonjs/core/Misc/guid.js"),c=(r("./node_modules/@babylonjs/core/Misc/fileTools.js"),r("./node_modules/@babylonjs/core/Materials/Textures/thinTexture.js")),l=function(e){function BaseTexture(t){var r=e.call(this,null)||this;return r.metadata=null,r.reservedDataStore=null,r._hasAlpha=!1,r.getAlphaFromRGB=!1,r.level=1,r.coordinatesIndex=0,r._coordinatesMode=0,r.wrapR=1,r.anisotropicFilteringLevel=BaseTexture.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,r._isCube=!1,r._gammaSpace=!0,r.invertZ=!1,r.lodLevelInAlpha=!1,r.isRenderTarget=!1,r._prefiltered=!1,r.animations=new Array,r.onDisposeObservable=new o["Observable"],r._onDisposeObserver=null,r._scene=null,r._texture=null,r._uid=null,t?BaseTexture._isScene(t)?r._scene=t:r._engine=t:r._scene=a["EngineStore"].LastCreatedScene,r._scene&&(r.uniqueId=r._scene.getUniqueId(),r._scene.addTexture(r),r._engine=r._scene.getEngine()),r._uid=null,r}return Object(n["__extends"])(BaseTexture,e),Object.defineProperty(BaseTexture.prototype,"hasAlpha",{get:function(){return this._hasAlpha},set:function(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(17))},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"coordinatesMode",{get:function(){return this._coordinatesMode},set:function(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"wrapU",{get:function(){return this._wrapU},set:function(e){this._wrapU=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"wrapV",{get:function(){return this._wrapV},set:function(e){this._wrapV=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"isCube",{get:function(){return this._texture?this._texture.isCube:this._isCube},set:function(e){this._texture?this._texture.isCube=e:this._isCube=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"is3D",{get:function(){return!!this._texture&&this._texture.is3D},set:function(e){this._texture&&(this._texture.is3D=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"is2DArray",{get:function(){return!!this._texture&&this._texture.is2DArray},set:function(e){this._texture&&(this._texture.is2DArray=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"gammaSpace",{get:function(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace):this._gammaSpace},set:function(e){if(this._texture){if(this._texture._gammaSpace===e)return;this._texture._gammaSpace=e}else{if(this._gammaSpace===e)return;this._gammaSpace=e}this._markAllSubMeshesAsTexturesDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"isRGBD",{get:function(){return null!=this._texture&&this._texture._isRGBD},set:function(e){this._texture&&(this._texture._isRGBD=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"noMipmap",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"lodGenerationOffset",{get:function(){return this._texture?this._texture._lodGenerationOffset:0},set:function(e){this._texture&&(this._texture._lodGenerationOffset=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"lodGenerationScale",{get:function(){return this._texture?this._texture._lodGenerationScale:0},set:function(e){this._texture&&(this._texture._lodGenerationScale=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"linearSpecularLOD",{get:function(){return!!this._texture&&this._texture._linearSpecularLOD},set:function(e){this._texture&&(this._texture._linearSpecularLOD=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"irradianceTexture",{get:function(){return this._texture?this._texture._irradianceTexture:null},set:function(e){this._texture&&(this._texture._irradianceTexture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"uid",{get:function(){return this._uid||(this._uid=u["GUID"].RandomId()),this._uid},enumerable:!1,configurable:!0}),BaseTexture.prototype.toString=function(){return this.name},BaseTexture.prototype.getClassName=function(){return"BaseTexture"},Object.defineProperty(BaseTexture.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"isBlocking",{get:function(){return!0},enumerable:!1,configurable:!0}),BaseTexture.prototype.getScene=function(){return this._scene},BaseTexture.prototype._getEngine=function(){return this._engine},BaseTexture.prototype.checkTransformsAreIdentical=function(e){return null!==e},BaseTexture.prototype.getTextureMatrix=function(){return s["Matrix"].IdentityReadOnly},BaseTexture.prototype.getReflectionTextureMatrix=function(){return s["Matrix"].IdentityReadOnly},BaseTexture.prototype.isReadyOrNotBlocking=function(){return!this.isBlocking||this.isReady()},BaseTexture.prototype.scale=function(e){},Object.defineProperty(BaseTexture.prototype,"canRescale",{get:function(){return!1},enumerable:!1,configurable:!0}),BaseTexture.prototype._getFromCache=function(e,t,r,n){var i=this._getEngine();if(!i)return null;for(var o=i.getLoadedTexturesCache(),s=0;s<o.length;s++){var a=o[s];if((void 0===n||n===a.invertY)&&a.url===e&&a.generateMipMaps===!t&&(!r||r===a.samplingMode))return a.incrementReferences(),a}return null},BaseTexture.prototype._rebuild=function(){},BaseTexture.prototype.clone=function(){return null},Object.defineProperty(BaseTexture.prototype,"textureType",{get:function(){return this._texture&&void 0!==this._texture.type?this._texture.type:0},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"textureFormat",{get:function(){return this._texture&&void 0!==this._texture.format?this._texture.format:5},enumerable:!1,configurable:!0}),BaseTexture.prototype._markAllSubMeshesAsTexturesDirty=function(){var e=this.getScene();e&&e.markAllMaterialsAsDirty(1)},BaseTexture.prototype.readPixels=function(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=null),!this._texture)return null;var n=this.getSize(),i=n.width,o=n.height,s=this._getEngine();if(!s)return null;0!=t&&(i/=Math.pow(2,t),o/=Math.pow(2,t),i=Math.round(i),o=Math.round(o));try{return this._texture.isCube?s._readTexturePixels(this._texture,i,o,e,t,r):s._readTexturePixels(this._texture,i,o,-1,t,r)}catch(a){return null}},Object.defineProperty(BaseTexture.prototype,"_lodTextureHigh",{get:function(){return this._texture?this._texture._lodTextureHigh:null},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"_lodTextureMid",{get:function(){return this._texture?this._texture._lodTextureMid:null},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"_lodTextureLow",{get:function(){return this._texture?this._texture._lodTextureLow:null},enumerable:!1,configurable:!0}),BaseTexture.prototype.dispose=function(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene._removePendingData(this);var t=this._scene.textures.indexOf(this);t>=0&&this._scene.textures.splice(t,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),e.prototype.dispose.call(this)},BaseTexture.prototype.serialize=function(){if(!this.name)return null;var e=i["SerializationHelper"].Serialize(this);return i["SerializationHelper"].AppendSerializedAnimations(this,e),e},BaseTexture.WhenAllReady=function(e,t){var r=e.length;if(0!==r)for(var n=0;n<e.length;n++){var i=e[n];if(i.isReady())0===--r&&t();else{var o=i.onLoadObservable;o&&o.addOnce((function(){0===--r&&t()}))}}else t()},BaseTexture._isScene=function(e){return"Scene"===e.getClassName()},BaseTexture.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"uniqueId",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"name",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"metadata",void 0),Object(n["__decorate"])([Object(i["serialize"])("hasAlpha")],BaseTexture.prototype,"_hasAlpha",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"getAlphaFromRGB",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"level",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"coordinatesIndex",void 0),Object(n["__decorate"])([Object(i["serialize"])("coordinatesMode")],BaseTexture.prototype,"_coordinatesMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"wrapU",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"wrapV",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"wrapR",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"anisotropicFilteringLevel",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"isCube",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"is3D",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"is2DArray",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"gammaSpace",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"invertZ",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"lodLevelInAlpha",void 0),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"lodGenerationOffset",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"lodGenerationScale",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"linearSpecularLOD",null),Object(n["__decorate"])([Object(i["serializeAsTexture"])()],BaseTexture.prototype,"irradianceTexture",null),Object(n["__decorate"])([Object(i["serialize"])()],BaseTexture.prototype,"isRenderTarget",void 0),BaseTexture}(c["ThinTexture"])},"./node_modules/@babylonjs/core/Materials/Textures/dynamicTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DynamicTexture",(function(){return a}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/logger.js"),o=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),s=(r("./node_modules/@babylonjs/core/Engines/Extensions/engine.dynamicTexture.js"),r("./node_modules/@babylonjs/core/Misc/canvasGenerator.js")),a=function(e){function DynamicTexture(t,r,n,i,a,u,c){void 0===n&&(n=null),void 0===a&&(a=3),void 0===u&&(u=5);var l=e.call(this,null,n,!i,c,a,void 0,void 0,void 0,void 0,u)||this;l.name=t,l.wrapU=o["Texture"].CLAMP_ADDRESSMODE,l.wrapV=o["Texture"].CLAMP_ADDRESSMODE,l._generateMipMaps=i;var d=l._getEngine();if(!d)return l;r.getContext?(l._canvas=r,l._texture=d.createDynamicTexture(r.width,r.height,i,a)):(l._canvas=s["CanvasGenerator"].CreateCanvas(1,1),r.width||0===r.width?l._texture=d.createDynamicTexture(r.width,r.height,i,a):l._texture=d.createDynamicTexture(r,r,i,a));var h=l.getSize();return l._canvas.width=h.width,l._canvas.height=h.height,l._context=l._canvas.getContext("2d"),l}return Object(n["__extends"])(DynamicTexture,e),DynamicTexture.prototype.getClassName=function(){return"DynamicTexture"},Object.defineProperty(DynamicTexture.prototype,"canRescale",{get:function(){return!0},enumerable:!1,configurable:!0}),DynamicTexture.prototype._recreate=function(e){this._canvas.width=e.width,this._canvas.height=e.height,this.releaseInternalTexture(),this._texture=this._getEngine().createDynamicTexture(e.width,e.height,this._generateMipMaps,this.samplingMode)},DynamicTexture.prototype.scale=function(e){var t=this.getSize();t.width*=e,t.height*=e,this._recreate(t)},DynamicTexture.prototype.scaleTo=function(e,t){var r=this.getSize();r.width=e,r.height=t,this._recreate(r)},DynamicTexture.prototype.getContext=function(){return this._context},DynamicTexture.prototype.clear=function(){var e=this.getSize();this._context.fillRect(0,0,e.width,e.height)},DynamicTexture.prototype.update=function(e,t){void 0===t&&(t=!1),this._getEngine().updateDynamicTexture(this._texture,this._canvas,void 0===e||e,t,this._format||void 0)},DynamicTexture.prototype.drawText=function(e,t,r,n,i,o,s,a){void 0===a&&(a=!0);var u=this.getSize();if(o&&(this._context.fillStyle=o,this._context.fillRect(0,0,u.width,u.height)),this._context.font=n,null===t||void 0===t){var c=this._context.measureText(e);t=(u.width-c.width)/2}if(null===r||void 0===r){var l=parseInt(n.replace(/\D/g,""));r=u.height/2+l/3.65}this._context.fillStyle=i||"",this._context.fillText(e,t,r),a&&this.update(s)},DynamicTexture.prototype.clone=function(){var e=this.getScene();if(!e)return this;var t=this.getSize(),r=new DynamicTexture(this.name,t,e,this._generateMipMaps);return r.hasAlpha=this.hasAlpha,r.level=this.level,r.wrapU=this.wrapU,r.wrapV=this.wrapV,r},DynamicTexture.prototype.serialize=function(){var t=this.getScene();t&&!t.isReady()&&i["Logger"].Warn("The scene must be ready before serializing the dynamic texture");var r=e.prototype.serialize.call(this);return this._IsCanvasElement(this._canvas)&&(r.base64String=this._canvas.toDataURL()),r.invertY=this._invertY,r.samplingMode=this.samplingMode,r},DynamicTexture.prototype._IsCanvasElement=function(e){return void 0!==e.toDataURL},DynamicTexture.prototype._rebuild=function(){this.update()},DynamicTexture}(o["Texture"])},"./node_modules/@babylonjs/core/Materials/Textures/internalTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"InternalTextureSource",(function(){return n})),r.d(t,"InternalTexture",(function(){return a}));var n,i=r("./node_modules/@babylonjs/core/Misc/observable.js"),o=r("./node_modules/@babylonjs/core/Materials/Textures/renderTargetCreationOptions.js"),s=r("./node_modules/@babylonjs/core/Misc/devTools.js");(function(e){e[e["Unknown"]=0]="Unknown",e[e["Url"]=1]="Url",e[e["Temp"]=2]="Temp",e[e["Raw"]=3]="Raw",e[e["Dynamic"]=4]="Dynamic",e[e["RenderTarget"]=5]="RenderTarget",e[e["MultiRenderTarget"]=6]="MultiRenderTarget",e[e["Cube"]=7]="Cube",e[e["CubeRaw"]=8]="CubeRaw",e[e["CubePrefiltered"]=9]="CubePrefiltered",e[e["Raw3D"]=10]="Raw3D",e[e["Raw2DArray"]=11]="Raw2DArray",e[e["Depth"]=12]="Depth",e[e["CubeRawRGBD"]=13]="CubeRawRGBD"})(n||(n={}));var a=function(){function InternalTexture(e,t,r){void 0===r&&(r=!1),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.samplingMode=-1,this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new i["Observable"],this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=n.Unknown,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._framebuffer=null,this._depthStencilBuffer=null,this._MSAAFramebuffer=null,this._MSAARenderBuffer=null,this._attachments=null,this._textureArray=null,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._isDisabled=!1,this._compression=null,this._generateStencilBuffer=!1,this._generateDepthBuffer=!1,this._comparisonFunction=0,this._sphericalPolynomial=null,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._colorTextureArray=null,this._depthStencilTextureArray=null,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._webGLTexture=null,this._references=1,this._gammaSpace=null,this._engine=e,this._source=t,r||(this._webGLTexture=e._createTexture())}return InternalTexture.prototype.getEngine=function(){return this._engine},Object.defineProperty(InternalTexture.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),InternalTexture.prototype.incrementReferences=function(){this._references++},InternalTexture.prototype.updateSize=function(e,t,r){void 0===r&&(r=1),this.width=e,this.height=t,this.depth=r,this.baseWidth=e,this.baseHeight=t,this.baseDepth=r,this._size=e*t*r},InternalTexture.prototype._rebuild=function(){var e,t,r=this;switch(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedAnisotropicFilteringLevel=null,this.source){case n.Temp:return;case n.Url:return void(t=this._engine.createTexture(null!==(e=this._originalUrl)&&void 0!==e?e:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(function(){t._swapAndDie(r),r.isReady=!0}),null,this._buffer,void 0,this.format));case n.Raw:return t=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._swapAndDie(this),void(this.isReady=!0);case n.Raw3D:return t=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._swapAndDie(this),void(this.isReady=!0);case n.Raw2DArray:return t=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._swapAndDie(this),void(this.isReady=!0);case n.Dynamic:return t=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),t._swapAndDie(this),void this._engine.updateDynamicTexture(this,this._engine.getRenderingCanvas(),this.invertY,void 0,void 0,!0);case n.RenderTarget:var i=new o["RenderTargetCreationOptions"];if(i.generateDepthBuffer=this._generateDepthBuffer,i.generateMipMaps=this.generateMipMaps,i.generateStencilBuffer=this._generateStencilBuffer,i.samplingMode=this.samplingMode,i.type=this.type,this.isCube)t=this._engine.createRenderTargetCubeTexture(this.width,i);else{var s={width:this.width,height:this.height,layers:this.is2DArray?this.depth:void 0};t=this._engine.createRenderTargetTexture(s,i)}return t._swapAndDie(this),void(this.isReady=!0);case n.Depth:var a={bilinearFiltering:2!==this.samplingMode,comparisonFunction:this._comparisonFunction,generateStencil:this._generateStencilBuffer,isCube:this.isCube},u={width:this.width,height:this.height,layers:this.is2DArray?this.depth:void 0};return t=this._engine.createDepthStencilTexture(u,a),t._swapAndDie(this),void(this.isReady=!0);case n.Cube:return void(t=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(function(){t._swapAndDie(r),r.isReady=!0}),null,this.format,this._extension));case n.CubeRaw:return t=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._swapAndDie(this),void(this.isReady=!0);case n.CubeRawRGBD:return t=this._engine.createRawCubeTexture(null,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),void InternalTexture._UpdateRGBDAsync(t,this._bufferViewArrayArray,this._sphericalPolynomial,this._lodGenerationScale,this._lodGenerationOffset).then((function(){t._swapAndDie(r),r.isReady=!0}));case n.CubePrefiltered:return t=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(function(e){e&&e._swapAndDie(r),r.isReady=!0}),null,this.format,this._extension),void(t._sphericalPolynomial=this._sphericalPolynomial)}},InternalTexture.prototype._swapAndDie=function(e){e._webGLTexture=this._webGLTexture,e._isRGBD=this._isRGBD,this._framebuffer&&(e._framebuffer=this._framebuffer),this._depthStencilBuffer&&(e._depthStencilBuffer=this._depthStencilBuffer),e._depthStencilTexture=this._depthStencilTexture,this._lodTextureHigh&&(e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(e._lodTextureLow&&e._lodTextureLow.dispose(),e._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(e._irradianceTexture&&e._irradianceTexture.dispose(),e._irradianceTexture=this._irradianceTexture);var t=this._engine.getLoadedTexturesCache(),r=t.indexOf(this);-1!==r&&t.splice(r,1);r=t.indexOf(e);-1===r&&t.push(e)},InternalTexture.prototype.dispose=function(){this._webGLTexture&&(this._references--,0===this._references&&(this._engine._releaseTexture(this),this._webGLTexture=null))},InternalTexture._UpdateRGBDAsync=function(e,t,r,n,i){throw s["_DevTools"].WarnImport("environmentTextureTools")},InternalTexture}()},"./node_modules/@babylonjs/core/Materials/Textures/renderTargetCreationOptions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderTargetCreationOptions",(function(){return n}));var n=function(){function RenderTargetCreationOptions(){}return RenderTargetCreationOptions}()},"./node_modules/@babylonjs/core/Materials/Textures/renderTargetTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderTargetTexture",(function(){return d}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/observable.js"),o=r("./node_modules/@babylonjs/core/Misc/tools.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),u=r("./node_modules/@babylonjs/core/PostProcesses/postProcessManager.js"),c=r("./node_modules/@babylonjs/core/Rendering/renderingManager.js"),l=(r("./node_modules/@babylonjs/core/Engines/Extensions/engine.renderTarget.js"),r("./node_modules/@babylonjs/core/Engines/Extensions/engine.renderTargetCube.js"),r("./node_modules/@babylonjs/core/Engines/engine.js")),d=function(e){function RenderTargetTexture(t,r,n,o,u,l,d,h,f,p,m,_,g){void 0===u&&(u=!0),void 0===l&&(l=0),void 0===d&&(d=!1),void 0===h&&(h=a["Texture"].TRILINEAR_SAMPLINGMODE),void 0===f&&(f=!0),void 0===p&&(p=!1),void 0===m&&(m=!1),void 0===_&&(_=5),void 0===g&&(g=!1);var b=e.call(this,null,n,!o)||this;return b.renderParticles=!0,b.renderSprites=!1,b.ignoreCameraViewport=!1,b.onBeforeBindObservable=new i["Observable"],b.onAfterUnbindObservable=new i["Observable"],b.onBeforeRenderObservable=new i["Observable"],b.onAfterRenderObservable=new i["Observable"],b.onClearObservable=new i["Observable"],b.onResizeObservable=new i["Observable"],b._currentRefreshId=-1,b._refreshRate=1,b._samples=1,b.boundingBoxPosition=s["Vector3"].Zero(),n=b.getScene(),n?(b._coordinatesMode=a["Texture"].PROJECTION_MODE,b.renderList=new Array,b.name=t,b.isRenderTarget=!0,b._initialSizeParameter=r,b._processSizeParameter(r),b._resizeObserver=b.getScene().getEngine().onResizeObservable.add((function(){})),b._generateMipMaps=!!o,b._doNotChangeAspectRatio=u,b._renderingManager=new c["RenderingManager"](n),b._renderingManager._useSceneAutoClearSetup=!0,m||(b._renderTargetOptions={generateMipMaps:o,type:l,format:_,samplingMode:h,generateDepthBuffer:f,generateStencilBuffer:p},h===a["Texture"].NEAREST_SAMPLINGMODE&&(b.wrapU=a["Texture"].CLAMP_ADDRESSMODE,b.wrapV=a["Texture"].CLAMP_ADDRESSMODE),g||(d?(b._texture=n.getEngine().createRenderTargetCubeTexture(b.getRenderSize(),b._renderTargetOptions),b.coordinatesMode=a["Texture"].INVCUBIC_MODE,b._textureMatrix=s["Matrix"].Identity()):b._texture=n.getEngine().createRenderTargetTexture(b._size,b._renderTargetOptions))),b):b}return Object(n["__extends"])(RenderTargetTexture,e),Object.defineProperty(RenderTargetTexture.prototype,"renderList",{get:function(){return this._renderList},set:function(e){this._renderList=e,this._renderList&&this._hookArray(this._renderList)},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype._hookArray=function(e){var t=this,r=e.push;e.push=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=0===e.length,s=r.apply(e,n);return o&&t.getScene()&&t.getScene().meshes.forEach((function(e){e._markSubMeshesAsLightDirty()})),s};var n=e.splice;e.splice=function(r,i){var o=n.apply(e,[r,i]);return 0===e.length&&t.getScene().meshes.forEach((function(e){e._markSubMeshesAsLightDirty()})),o}},Object.defineProperty(RenderTargetTexture.prototype,"onAfterUnbind",{set:function(e){this._onAfterUnbindObserver&&this.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=this.onAfterUnbindObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(RenderTargetTexture.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(RenderTargetTexture.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(RenderTargetTexture.prototype,"onClear",{set:function(e){this._onClearObserver&&this.onClearObservable.remove(this._onClearObserver),this._onClearObserver=this.onClearObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(RenderTargetTexture.prototype,"renderTargetOptions",{get:function(){return this._renderTargetOptions},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype._onRatioRescale=function(){this._sizeRatio&&this.resize(this._initialSizeParameter)},Object.defineProperty(RenderTargetTexture.prototype,"boundingBoxSize",{get:function(){return this._boundingBoxSize},set:function(e){if(!this._boundingBoxSize||!this._boundingBoxSize.equals(e)){this._boundingBoxSize=e;var t=this.getScene();t&&t.markAllMaterialsAsDirty(1)}},enumerable:!1,configurable:!0}),Object.defineProperty(RenderTargetTexture.prototype,"depthStencilTexture",{get:function(){var e;return(null===(e=this.getInternalTexture())||void 0===e?void 0:e._depthStencilTexture)||null},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype.createDepthStencilTexture=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=!0),void 0===r&&(r=!1);var n=this.getInternalTexture();if(this.getScene()&&n){var i=this.getScene().getEngine();n._depthStencilTexture=i.createDepthStencilTexture(this._size,{bilinearFiltering:t,comparisonFunction:e,generateStencil:r,isCube:this.isCube})}},RenderTargetTexture.prototype._processSizeParameter=function(e){if(e.ratio){this._sizeRatio=e.ratio;var t=this._getEngine();this._size={width:this._bestReflectionRenderTargetDimension(t.getRenderWidth(),this._sizeRatio),height:this._bestReflectionRenderTargetDimension(t.getRenderHeight(),this._sizeRatio)}}else this._size=e},Object.defineProperty(RenderTargetTexture.prototype,"samples",{get:function(){return this._samples},set:function(e){if(this._samples!==e){var t=this.getScene();t&&(this._samples=t.getEngine().updateRenderTargetTextureSampleCount(this._texture,e))}},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},Object.defineProperty(RenderTargetTexture.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(e){this._refreshRate=e,this.resetRefreshCounter()},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype.addPostProcess=function(e){if(!this._postProcessManager){var t=this.getScene();if(!t)return;this._postProcessManager=new u["PostProcessManager"](t),this._postProcesses=new Array}this._postProcesses.push(e),this._postProcesses[0].autoClear=!1},RenderTargetTexture.prototype.clearPostProcesses=function(e){if(void 0===e&&(e=!1),this._postProcesses){if(e)for(var t=0,r=this._postProcesses;t<r.length;t++){var n=r[t];n.dispose()}this._postProcesses=[]}},RenderTargetTexture.prototype.removePostProcess=function(e){if(this._postProcesses){var t=this._postProcesses.indexOf(e);-1!==t&&(this._postProcesses.splice(t,1),this._postProcesses.length>0&&(this._postProcesses[0].autoClear=!1))}},RenderTargetTexture.prototype._shouldRender=function(){return-1===this._currentRefreshId||this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,!0):(this._currentRefreshId++,!1)},RenderTargetTexture.prototype.getRenderSize=function(){return this.getRenderWidth()},RenderTargetTexture.prototype.getRenderWidth=function(){return this._size.width?this._size.width:this._size},RenderTargetTexture.prototype.getRenderHeight=function(){return this._size.width?this._size.height:this._size},RenderTargetTexture.prototype.getRenderLayers=function(){var e=this._size.layers;return e||0},Object.defineProperty(RenderTargetTexture.prototype,"canRescale",{get:function(){return!0},enumerable:!1,configurable:!0}),RenderTargetTexture.prototype.scale=function(e){var t=Math.max(1,this.getRenderSize()*e);this.resize(t)},RenderTargetTexture.prototype.getReflectionTextureMatrix=function(){return this.isCube?this._textureMatrix:e.prototype.getReflectionTextureMatrix.call(this)},RenderTargetTexture.prototype.resize=function(e){var t=this.isCube;this.releaseInternalTexture();var r=this.getScene();r&&(this._processSizeParameter(e),this._texture=t?r.getEngine().createRenderTargetCubeTexture(this.getRenderSize(),this._renderTargetOptions):r.getEngine().createRenderTargetTexture(this._size,this._renderTargetOptions),this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this))},RenderTargetTexture.prototype.render=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=this.getScene();if(r){var n,i=r.getEngine();if(void 0!==this.useCameraPostProcesses&&(e=this.useCameraPostProcesses),this._waitingRenderList){this.renderList=[];for(var o=0;o<this._waitingRenderList.length;o++){var s=this._waitingRenderList[o],a=r.getMeshByID(s);a&&this.renderList.push(a)}this._waitingRenderList=void 0}if(this.renderListPredicate){this.renderList?this.renderList.length=0:this.renderList=[];r=this.getScene();if(!r)return;var u=r.meshes;for(o=0;o<u.length;o++){var c=u[o];this.renderListPredicate(c)&&this.renderList.push(c)}}if(this.onBeforeBindObservable.notifyObservers(this),this.activeCamera?(n=this.activeCamera,i.setViewport(this.activeCamera.viewport,this.getRenderWidth(),this.getRenderHeight()),this.activeCamera!==r.activeCamera&&r.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(!0))):(n=r.activeCamera,n&&i.setViewport(n.viewport,this.getRenderWidth(),this.getRenderHeight())),this._defaultRenderListPrepared=!1,this.is2DArray)for(var l=0;l<this.getRenderLayers();l++)this.renderToTarget(0,e,t,l,n),r.incrementRenderId(),r.resetCachedMaterial();else if(this.isCube)for(var d=0;d<6;d++)this.renderToTarget(d,e,t,void 0,n),r.incrementRenderId(),r.resetCachedMaterial();else this.renderToTarget(0,e,t,void 0,n);this.onAfterUnbindObservable.notifyObservers(this),r.activeCamera&&((r.getEngine().scenes.length>1||this.activeCamera&&this.activeCamera!==r.activeCamera)&&r.setTransformMatrix(r.activeCamera.getViewMatrix(),r.activeCamera.getProjectionMatrix(!0)),i.setViewport(r.activeCamera.viewport)),r.resetCachedMaterial()}},RenderTargetTexture.prototype._bestReflectionRenderTargetDimension=function(e,t){var r=128,n=e*t,i=l["Engine"].NearestPOT(n+r*r/(r+n));return Math.min(l["Engine"].FloorPOT(e),i)},RenderTargetTexture.prototype._prepareRenderingManager=function(e,t,r,n){var i=this.getScene();if(i){this._renderingManager.reset();for(var o=i.getRenderId(),s=0;s<t;s++){var a=e[s];if(a&&!a.isBlocked){if(this.customIsReadyFunction){if(!this.customIsReadyFunction(a,this.refreshRate)){this.resetRefreshCounter();continue}}else if(!a.isReady(0===this.refreshRate)){this.resetRefreshCounter();continue}if(!a._internalAbstractMeshDataInfo._currentLODIsUpToDate&&i.activeCamera&&(a._internalAbstractMeshDataInfo._currentLOD=i.customLODSelector?i.customLODSelector(a,i.activeCamera):a.getLOD(i.activeCamera),a._internalAbstractMeshDataInfo._currentLODIsUpToDate=!0),!a._internalAbstractMeshDataInfo._currentLOD)continue;var u=a._internalAbstractMeshDataInfo._currentLOD;u._preActivateForIntermediateRendering(o);var c=void 0;if(c=!(!n||!r)&&0===(a.layerMask&r.layerMask),a.isEnabled()&&a.isVisible&&a.subMeshes&&!c&&(u!==a&&u._activate(o,!0),a._activate(o,!0)&&a.subMeshes.length)){a.isAnInstance?a._internalAbstractMeshDataInfo._actAsRegularMesh&&(u=a):u._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!1,u._internalAbstractMeshDataInfo._isActiveIntermediate=!0;for(var l=0;l<u.subMeshes.length;l++){var d=u.subMeshes[l];this._renderingManager.dispatch(d,u)}}}}for(var h=0;h<i.particleSystems.length;h++){var f=i.particleSystems[h],p=f.emitter;f.isStarted()&&p&&p.position&&p.isEnabled()&&(e.indexOf(p)>=0&&this._renderingManager.dispatchParticles(f))}}},RenderTargetTexture.prototype._bindFrameBuffer=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var r=this.getScene();if(r){var n=r.getEngine();this._texture&&n.bindFramebuffer(this._texture,this.isCube?e:void 0,void 0,void 0,this.ignoreCameraViewport,0,t)}},RenderTargetTexture.prototype.unbindFrameBuffer=function(e,t){var r=this;this._texture&&e.unBindFramebuffer(this._texture,this.isCube,(function(){r.onAfterRenderObservable.notifyObservers(t)}))},RenderTargetTexture.prototype.renderToTarget=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=null);var s=this.getScene();if(s){var a=s.getEngine();if(this._texture){this._postProcessManager?this._postProcessManager._prepareFrame(this._texture,this._postProcesses):t&&s.postProcessManager._prepareFrame(this._texture)||this._bindFrameBuffer(e,n),this.is2DArray?this.onBeforeRenderObservable.notifyObservers(n):this.onBeforeRenderObservable.notifyObservers(e);var u=null,c=this.renderList?this.renderList:s.getActiveMeshes().data,l=this.renderList?this.renderList.length:s.getActiveMeshes().length;this.getCustomRenderList&&(u=this.getCustomRenderList(this.is2DArray?n:e,c,l)),u?this._prepareRenderingManager(u,u.length,i,!1):(this._defaultRenderListPrepared||(this._prepareRenderingManager(c,l,i,!this.renderList),this._defaultRenderListPrepared=!0),u=c),this.onClearObservable.hasObservers()?this.onClearObservable.notifyObservers(a):a.clear(this.clearColor||s.clearColor,!0,!0,!0),this._doNotChangeAspectRatio||s.updateTransformMatrix(!0);for(var d=0,h=s._beforeRenderTargetDrawStage;d<h.length;d++){var f=h[d];f.action(this)}this._renderingManager.render(this.customRenderFunction,u,this.renderParticles,this.renderSprites);for(var p=0,m=s._afterRenderTargetDrawStage;p<m.length;p++){f=m[p];f.action(this)}this._postProcessManager?this._postProcessManager._finalizeFrame(!1,this._texture,e,this._postProcesses,this.ignoreCameraViewport):t&&s.postProcessManager._finalizeFrame(!1,this._texture,e),this._doNotChangeAspectRatio||s.updateTransformMatrix(!0),r&&o["Tools"].DumpFramebuffer(this.getRenderWidth(),this.getRenderHeight(),a),this.isCube&&5!==e?this.onAfterRenderObservable.notifyObservers(e):(this.isCube&&5===e&&a.generateMipMapsForCubemap(this._texture),this.unbindFrameBuffer(a,e))}}},RenderTargetTexture.prototype.setRenderingOrder=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),this._renderingManager.setRenderingOrder(e,t,r,n)},RenderTargetTexture.prototype.setRenderingAutoClearDepthStencil=function(e,t){this._renderingManager.setRenderingAutoClearDepthStencil(e,t),this._renderingManager._useSceneAutoClearSetup=!1},RenderTargetTexture.prototype.clone=function(){var e=this.getSize(),t=new RenderTargetTexture(this.name,e,this.getScene(),this._renderTargetOptions.generateMipMaps,this._doNotChangeAspectRatio,this._renderTargetOptions.type,this.isCube,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer,this._renderTargetOptions.generateStencilBuffer);return t.hasAlpha=this.hasAlpha,t.level=this.level,t.coordinatesMode=this.coordinatesMode,this.renderList&&(t.renderList=this.renderList.slice(0)),t},RenderTargetTexture.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);if(t.renderTargetSize=this.getRenderSize(),t.renderList=[],this.renderList)for(var r=0;r<this.renderList.length;r++)t.renderList.push(this.renderList[r].id);return t},RenderTargetTexture.prototype.disposeFramebufferObjects=function(){var e=this.getInternalTexture(),t=this.getScene();e&&t&&t.getEngine()._releaseFramebufferObjects(e)},RenderTargetTexture.prototype.dispose=function(){this.onResizeObservable.clear(),this.onClearObservable.clear(),this.onAfterRenderObservable.clear(),this.onAfterUnbindObservable.clear(),this.onBeforeBindObservable.clear(),this.onBeforeRenderObservable.clear(),this._postProcessManager&&(this._postProcessManager.dispose(),this._postProcessManager=null),this.clearPostProcesses(!0),this._resizeObserver&&(this.getScene().getEngine().onResizeObservable.remove(this._resizeObserver),this._resizeObserver=null),this.renderList=null;var t=this.getScene();if(t){var r=t.customRenderTargets.indexOf(this);r>=0&&t.customRenderTargets.splice(r,1);for(var n=0,i=t.cameras;n<i.length;n++){var o=i[n];r=o.customRenderTargets.indexOf(this),r>=0&&o.customRenderTargets.splice(r,1)}this.depthStencilTexture&&this.getScene().getEngine()._releaseTexture(this.depthStencilTexture),e.prototype.dispose.call(this)}},RenderTargetTexture.prototype._rebuild=function(){this.refreshRate===RenderTargetTexture.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=RenderTargetTexture.REFRESHRATE_RENDER_ONCE),this._postProcessManager&&this._postProcessManager._rebuild()},RenderTargetTexture.prototype.freeRenderingGroups=function(){this._renderingManager&&this._renderingManager.freeRenderingGroups()},RenderTargetTexture.prototype.getViewCount=function(){return 1},RenderTargetTexture.REFRESHRATE_RENDER_ONCE=0,RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYFRAME=1,RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYTWOFRAMES=2,RenderTargetTexture}(a["Texture"]);a["Texture"]._CreateRenderTargetTexture=function(e,t,r,n){return new d(e,t,r,n)}},"./node_modules/@babylonjs/core/Materials/Textures/texture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Texture",(function(){return m}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Materials/Textures/baseTexture.js"),u=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),c=r("./node_modules/@babylonjs/core/Misc/devTools.js"),l=r("./node_modules/@babylonjs/core/Misc/timingTools.js"),d=r("./node_modules/@babylonjs/core/Misc/instantiationTools.js"),h=r("./node_modules/@babylonjs/core/Maths/math.plane.js"),f=r("./node_modules/@babylonjs/core/Misc/stringTools.js"),p=r("./node_modules/@babylonjs/core/Misc/copyTools.js"),m=function(e){function Texture(t,r,n,i,s,a,u,c,d,h,f,p){void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===s&&(s=Texture.TRILINEAR_SAMPLINGMODE),void 0===a&&(a=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===d&&(d=!1);var m=e.call(this,r)||this;m.url=null,m.uOffset=0,m.vOffset=0,m.uScale=1,m.vScale=1,m.uAng=0,m.vAng=0,m.wAng=0,m.uRotationCenter=.5,m.vRotationCenter=.5,m.wRotationCenter=.5,m.homogeneousRotationInUVTransform=!1,m.inspectableCustomProperties=null,m._noMipmap=!1,m._invertY=!1,m._rowGenerationMatrix=null,m._cachedTextureMatrix=null,m._projectionModeMatrix=null,m._t0=null,m._t1=null,m._t2=null,m._cachedUOffset=-1,m._cachedVOffset=-1,m._cachedUScale=0,m._cachedVScale=0,m._cachedUAng=-1,m._cachedVAng=-1,m._cachedWAng=-1,m._cachedProjectionMatrixId=-1,m._cachedURotationCenter=-1,m._cachedVRotationCenter=-1,m._cachedWRotationCenter=-1,m._cachedHomogeneousRotationInUVTransform=!1,m._cachedCoordinatesMode=-1,m._initialSamplingMode=Texture.BILINEAR_SAMPLINGMODE,m._buffer=null,m._deleteBuffer=!1,m._format=null,m._delayedOnLoad=null,m._delayedOnError=null,m.onLoadObservable=new o["Observable"],m._isBlocking=!0,m.name=t||"",m.url=t,m._noMipmap=n,m._invertY=i,m._initialSamplingMode=s,m._buffer=c,m._deleteBuffer=d,m._mimeType=f,m._loaderOptions=p,h&&(m._format=h);var _=m.getScene(),g=m._getEngine();if(!g)return m;g.onBeforeTextureInitObservable.notifyObservers(m);var load=function(){m._texture&&(m._texture._invertVScale&&(m.vScale*=-1,m.vOffset+=1),null!==m._texture._cachedWrapU&&(m.wrapU=m._texture._cachedWrapU,m._texture._cachedWrapU=null),null!==m._texture._cachedWrapV&&(m.wrapV=m._texture._cachedWrapV,m._texture._cachedWrapV=null),null!==m._texture._cachedWrapR&&(m.wrapR=m._texture._cachedWrapR,m._texture._cachedWrapR=null)),m.onLoadObservable.hasObservers()&&m.onLoadObservable.notifyObservers(m),a&&a(),!m.isBlocking&&_&&_.resetCachedMaterial()};return m.url?(m._texture=m._getFromCache(m.url,n,s,i),m._texture?m._texture.isReady?l["TimingTools"].SetImmediate((function(){return load()})):m._texture.onLoadedObservable.add(load):_&&_.useDelayedTextureLoading?(m.delayLoadState=4,m._delayedOnLoad=load,m._delayedOnError=u):(m._texture=g.createTexture(m.url,n,i,_,s,load,u,m._buffer,void 0,m._format,null,f,p),d&&(m._buffer=null)),m):(m._delayedOnLoad=load,m._delayedOnError=u,m)}return Object(n["__extends"])(Texture,e),Object.defineProperty(Texture.prototype,"noMipmap",{get:function(){return this._noMipmap},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"mimeType",{get:function(){return this._mimeType},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"isBlocking",{get:function(){return this._isBlocking},set:function(e){this._isBlocking=e},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"samplingMode",{get:function(){return this._texture?this._texture.samplingMode:this._initialSamplingMode},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"invertY",{get:function(){return this._invertY},enumerable:!1,configurable:!0}),Texture.prototype.updateURL=function(e,t,r){void 0===t&&(t=null),this.url&&(this.releaseInternalTexture(),this.getScene().markAllMaterialsAsDirty(1)),this.name&&!f["StringTools"].StartsWith(this.name,"data:")||(this.name=e),this.url=e,this._buffer=t,this.delayLoadState=4,r&&(this._delayedOnLoad=r),this.delayLoad()},Texture.prototype.delayLoad=function(){if(4===this.delayLoadState){var e=this.getScene();e&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY),this._texture?this._delayedOnLoad&&(this._texture.isReady?l["TimingTools"].SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=e.getEngine().createTexture(this.url,this._noMipmap,this._invertY,e,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,null,this._mimeType,this._loaderOptions),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}},Texture.prototype._prepareRowForTextureGeneration=function(e,t,r,n){e*=this._cachedUScale,t*=this._cachedVScale,e-=this.uRotationCenter*this._cachedUScale,t-=this.vRotationCenter*this._cachedVScale,r-=this.wRotationCenter,s["Vector3"].TransformCoordinatesFromFloatsToRef(e,t,r,this._rowGenerationMatrix,n),n.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,n.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,n.z+=this.wRotationCenter},Texture.prototype.checkTransformsAreIdentical=function(e){return null!==e&&this.uOffset===e.uOffset&&this.vOffset===e.vOffset&&this.uScale===e.uScale&&this.vScale===e.vScale&&this.uAng===e.uAng&&this.vAng===e.vAng&&this.wAng===e.wAng},Texture.prototype.getTextureMatrix=function(e){var t=this;if(void 0===e&&(e=1),this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*e===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*e,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=s["Matrix"].Zero(),this._rowGenerationMatrix=new s["Matrix"],this._t0=s["Vector3"].Zero(),this._t1=s["Vector3"].Zero(),this._t2=s["Vector3"].Zero()),s["Matrix"].RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(s["Matrix"].TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,s["TmpVectors"].Matrix[0]),s["Matrix"].TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,s["TmpVectors"].Matrix[1]),s["Matrix"].ScalingToRef(this._cachedUScale,this._cachedVScale,0,s["TmpVectors"].Matrix[2]),s["Matrix"].TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,s["TmpVectors"].Matrix[3]),s["TmpVectors"].Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(s["TmpVectors"].Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(s["TmpVectors"].Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(s["TmpVectors"].Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.subtractInPlace(this._t0),this._t2.subtractInPlace(this._t0),s["Matrix"].FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));var r=this.getScene();return r?(r.markAllMaterialsAsDirty(1,(function(e){return e.hasTexture(t)})),this._cachedTextureMatrix):this._cachedTextureMatrix},Texture.prototype.getReflectionTextureMatrix=function(){var e=this,t=this.getScene();if(!t)return this._cachedTextureMatrix;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale===this._cachedUScale&&this.vScale===this._cachedVScale&&this.coordinatesMode===this._cachedCoordinatesMode){if(this.coordinatesMode!==Texture.PROJECTION_MODE)return this._cachedTextureMatrix;if(this._cachedProjectionMatrixId===t.getProjectionMatrix().updateFlag)return this._cachedTextureMatrix}switch(this._cachedTextureMatrix||(this._cachedTextureMatrix=s["Matrix"].Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=s["Matrix"].Zero()),this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale,this._cachedVScale=this.vScale,this._cachedCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case Texture.PLANAR_MODE:s["Matrix"].IdentityToRef(this._cachedTextureMatrix),this._cachedTextureMatrix[0]=this.uScale,this._cachedTextureMatrix[5]=this.vScale,this._cachedTextureMatrix[12]=this.uOffset,this._cachedTextureMatrix[13]=this.vOffset;break;case Texture.PROJECTION_MODE:s["Matrix"].FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);var r=t.getProjectionMatrix();this._cachedProjectionMatrixId=r.updateFlag,r.multiplyToRef(this._projectionModeMatrix,this._cachedTextureMatrix);break;default:s["Matrix"].IdentityToRef(this._cachedTextureMatrix);break}return t.markAllMaterialsAsDirty(1,(function(t){return-1!==t.getActiveTextures().indexOf(e)})),this._cachedTextureMatrix},Texture.prototype.clone=function(){var e=this;return i["SerializationHelper"].Clone((function(){return new Texture(e._texture?e._texture.url:null,e.getScene(),e._noMipmap,e._invertY,e.samplingMode,void 0,void 0,e._texture?e._texture._buffer:void 0)}),this)},Texture.prototype.serialize=function(){var t=this.name;Texture.SerializeBuffers||f["StringTools"].StartsWith(this.name,"data:")&&(this.name=""),f["StringTools"].StartsWith(this.name,"data:")&&this.url===this.name&&(this.url="");var r=e.prototype.serialize.call(this);return r?((Texture.SerializeBuffers||Texture.ForceSerializeBuffers)&&("string"===typeof this._buffer&&"data:"===this._buffer.substr(0,5)?(r.base64String=this._buffer,r.name=r.name.replace("data:","")):this.url&&f["StringTools"].StartsWith(this.url,"data:")&&this._buffer instanceof Uint8Array?r.base64String="data:image/png;base64,"+f["StringTools"].EncodeArrayBufferToBase64(this._buffer):Texture.ForceSerializeBuffers&&(r.base64String=p["CopyTools"].GenerateBase64StringFromTexture(this))),r.invertY=this._invertY,r.samplingMode=this.samplingMode,this.name=t,r):null},Texture.prototype.getClassName=function(){return"Texture"},Texture.prototype.dispose=function(){e.prototype.dispose.call(this),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null},Texture.Parse=function(e,t,r){if(e.customType){var n=d["InstantiationTools"].Instantiate(e.customType),o=n.Parse(e,t,r);return e.samplingMode&&o.updateSamplingMode&&o._samplingMode&&o._samplingMode!==e.samplingMode&&o.updateSamplingMode(e.samplingMode),o}if(e.isCube&&!e.isRenderTarget)return Texture._CubeTextureParser(e,t,r);if(!e.name&&!e.isRenderTarget)return null;var onLoaded=function(){if(s&&s._texture&&(s._texture._cachedWrapU=null,s._texture._cachedWrapV=null,s._texture._cachedWrapR=null),e.samplingMode){var t=e.samplingMode;s&&s.samplingMode!==t&&s.updateSamplingMode(t)}if(s&&e.animations)for(var r=0;r<e.animations.length;r++){var n=e.animations[r],i=u["_TypeStore"].GetClass("BABYLON.Animation");i&&s.animations.push(i.Parse(n))}},s=i["SerializationHelper"].Parse((function(){var n,i=!0;if(e.noMipmap&&(i=!1),e.mirrorPlane){var o=Texture._CreateMirror(e.name,e.renderTargetSize,t,i);return o._waitingRenderList=e.renderList,o.mirrorPlane=h["Plane"].FromArray(e.mirrorPlane),onLoaded(),o}if(e.isRenderTarget){var s=null;if(e.isCube){if(t.reflectionProbes)for(var a=0;a<t.reflectionProbes.length;a++){var u=t.reflectionProbes[a];if(u.name===e.name)return u.cubeTexture}}else s=Texture._CreateRenderTargetTexture(e.name,e.renderTargetSize,t,i),s._waitingRenderList=e.renderList;return onLoaded(),s}if(e.base64String)n=Texture.CreateFromBase64String(e.base64String,e.name,t,!i,e.invertY,void 0,onLoaded);else{var c=void 0;c=e.name&&e.name.indexOf("://")>0?e.name:r+e.name,(f["StringTools"].StartsWith(e.url,"data:")||Texture.UseSerializedUrlIfAny&&e.url)&&(c=e.url),n=new Texture(c,t,!i,e.invertY,void 0,onLoaded)}return n}),e,t);return s},Texture.CreateFromBase64String=function(e,t,r,n,i,o,s,a,u){return void 0===o&&(o=Texture.TRILINEAR_SAMPLINGMODE),void 0===s&&(s=null),void 0===a&&(a=null),void 0===u&&(u=5),new Texture("data:"+t,r,n,i,o,s,a,e,!1,u)},Texture.LoadFromDataString=function(e,t,r,n,i,o,s,a,u,c){return void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===o&&(o=!0),void 0===s&&(s=Texture.TRILINEAR_SAMPLINGMODE),void 0===a&&(a=null),void 0===u&&(u=null),void 0===c&&(c=5),"data:"!==e.substr(0,5)&&(e="data:"+e),new Texture(e,r,i,o,s,a,u,t,n,c)},Texture.SerializeBuffers=!0,Texture.ForceSerializeBuffers=!1,Texture._CubeTextureParser=function(e,t,r){throw c["_DevTools"].WarnImport("CubeTexture")},Texture._CreateMirror=function(e,t,r,n){throw c["_DevTools"].WarnImport("MirrorTexture")},Texture._CreateRenderTargetTexture=function(e,t,r,n){throw c["_DevTools"].WarnImport("RenderTargetTexture")},Texture.NEAREST_SAMPLINGMODE=1,Texture.NEAREST_NEAREST_MIPLINEAR=8,Texture.BILINEAR_SAMPLINGMODE=2,Texture.LINEAR_LINEAR_MIPNEAREST=11,Texture.TRILINEAR_SAMPLINGMODE=3,Texture.LINEAR_LINEAR_MIPLINEAR=3,Texture.NEAREST_NEAREST_MIPNEAREST=4,Texture.NEAREST_LINEAR_MIPNEAREST=5,Texture.NEAREST_LINEAR_MIPLINEAR=6,Texture.NEAREST_LINEAR=7,Texture.NEAREST_NEAREST=1,Texture.LINEAR_NEAREST_MIPNEAREST=9,Texture.LINEAR_NEAREST_MIPLINEAR=10,Texture.LINEAR_LINEAR=2,Texture.LINEAR_NEAREST=12,Texture.EXPLICIT_MODE=0,Texture.SPHERICAL_MODE=1,Texture.PLANAR_MODE=2,Texture.CUBIC_MODE=3,Texture.PROJECTION_MODE=4,Texture.SKYBOX_MODE=5,Texture.INVCUBIC_MODE=6,Texture.EQUIRECTANGULAR_MODE=7,Texture.FIXED_EQUIRECTANGULAR_MODE=8,Texture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,Texture.CLAMP_ADDRESSMODE=0,Texture.WRAP_ADDRESSMODE=1,Texture.MIRROR_ADDRESSMODE=2,Texture.UseSerializedUrlIfAny=!1,Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"url",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"uOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"vOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"uScale",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"vScale",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"uAng",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"vAng",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"wAng",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"uRotationCenter",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"vRotationCenter",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"wRotationCenter",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"homogeneousRotationInUVTransform",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Texture.prototype,"isBlocking",null),Texture}(a["BaseTexture"]);u["_TypeStore"].RegisteredTypes["BABYLON.Texture"]=m,i["SerializationHelper"]._TextureParser=m.Parse},"./node_modules/@babylonjs/core/Materials/Textures/thinTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ThinTexture",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Maths/math.size.js"),i=function(){function ThinTexture(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=n["Size"].Zero(),this._cachedBaseSize=n["Size"].Zero(),this._texture=e,this._texture&&(this._engine=this._texture.getEngine())}return Object.defineProperty(ThinTexture.prototype,"wrapU",{get:function(){return this._wrapU},set:function(e){this._wrapU=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinTexture.prototype,"wrapV",{get:function(){return this._wrapV},set:function(e){this._wrapV=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThinTexture.prototype,"coordinatesMode",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(ThinTexture.prototype,"isCube",{get:function(){return!!this._texture&&this._texture.isCube},set:function(e){this._texture&&(this._texture.isCube=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ThinTexture.prototype,"is3D",{get:function(){return!!this._texture&&this._texture.is3D},set:function(e){this._texture&&(this._texture.is3D=e)},enumerable:!1,configurable:!0}),Object.defineProperty(ThinTexture.prototype,"is2DArray",{get:function(){return!!this._texture&&this._texture.is2DArray},set:function(e){this._texture&&(this._texture.is2DArray=e)},enumerable:!1,configurable:!0}),ThinTexture.prototype.getClassName=function(){return"ThinTexture"},ThinTexture.prototype.isReady=function(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady},ThinTexture.prototype.delayLoad=function(){},ThinTexture.prototype.getInternalTexture=function(){return this._texture},ThinTexture.prototype.getSize=function(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize},ThinTexture.prototype.getBaseSize=function(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)},ThinTexture.prototype.updateSamplingMode=function(e){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture)},ThinTexture.prototype.releaseInternalTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null)},ThinTexture.prototype.dispose=function(){this._texture&&(this.releaseInternalTexture(),this._engine=null)},ThinTexture}()},"./node_modules/@babylonjs/core/Materials/colorCurves.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ColorCurves",(function(){return s}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.color.js"),s=function(){function ColorCurves(){this._dirty=!0,this._tempColor=new o["Color4"](0,0,0,0),this._globalCurve=new o["Color4"](0,0,0,0),this._highlightsCurve=new o["Color4"](0,0,0,0),this._midtonesCurve=new o["Color4"](0,0,0,0),this._shadowsCurve=new o["Color4"](0,0,0,0),this._positiveCurve=new o["Color4"](0,0,0,0),this._negativeCurve=new o["Color4"](0,0,0,0),this._globalHue=30,this._globalDensity=0,this._globalSaturation=0,this._globalExposure=0,this._highlightsHue=30,this._highlightsDensity=0,this._highlightsSaturation=0,this._highlightsExposure=0,this._midtonesHue=30,this._midtonesDensity=0,this._midtonesSaturation=0,this._midtonesExposure=0,this._shadowsHue=30,this._shadowsDensity=0,this._shadowsSaturation=0,this._shadowsExposure=0}return Object.defineProperty(ColorCurves.prototype,"globalHue",{get:function(){return this._globalHue},set:function(e){this._globalHue=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"globalDensity",{get:function(){return this._globalDensity},set:function(e){this._globalDensity=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"globalSaturation",{get:function(){return this._globalSaturation},set:function(e){this._globalSaturation=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"globalExposure",{get:function(){return this._globalExposure},set:function(e){this._globalExposure=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"highlightsHue",{get:function(){return this._highlightsHue},set:function(e){this._highlightsHue=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"highlightsDensity",{get:function(){return this._highlightsDensity},set:function(e){this._highlightsDensity=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"highlightsSaturation",{get:function(){return this._highlightsSaturation},set:function(e){this._highlightsSaturation=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"highlightsExposure",{get:function(){return this._highlightsExposure},set:function(e){this._highlightsExposure=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"midtonesHue",{get:function(){return this._midtonesHue},set:function(e){this._midtonesHue=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"midtonesDensity",{get:function(){return this._midtonesDensity},set:function(e){this._midtonesDensity=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"midtonesSaturation",{get:function(){return this._midtonesSaturation},set:function(e){this._midtonesSaturation=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"midtonesExposure",{get:function(){return this._midtonesExposure},set:function(e){this._midtonesExposure=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"shadowsHue",{get:function(){return this._shadowsHue},set:function(e){this._shadowsHue=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"shadowsDensity",{get:function(){return this._shadowsDensity},set:function(e){this._shadowsDensity=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"shadowsSaturation",{get:function(){return this._shadowsSaturation},set:function(e){this._shadowsSaturation=e,this._dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ColorCurves.prototype,"shadowsExposure",{get:function(){return this._shadowsExposure},set:function(e){this._shadowsExposure=e,this._dirty=!0},enumerable:!1,configurable:!0}),ColorCurves.prototype.getClassName=function(){return"ColorCurves"},ColorCurves.Bind=function(e,t,r,n,i){void 0===r&&(r="vCameraColorCurvePositive"),void 0===n&&(n="vCameraColorCurveNeutral"),void 0===i&&(i="vCameraColorCurveNegative"),e._dirty&&(e._dirty=!1,e.getColorGradingDataToRef(e._globalHue,e._globalDensity,e._globalSaturation,e._globalExposure,e._globalCurve),e.getColorGradingDataToRef(e._highlightsHue,e._highlightsDensity,e._highlightsSaturation,e._highlightsExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._highlightsCurve),e.getColorGradingDataToRef(e._midtonesHue,e._midtonesDensity,e._midtonesSaturation,e._midtonesExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._midtonesCurve),e.getColorGradingDataToRef(e._shadowsHue,e._shadowsDensity,e._shadowsSaturation,e._shadowsExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._shadowsCurve),e._highlightsCurve.subtractToRef(e._midtonesCurve,e._positiveCurve),e._midtonesCurve.subtractToRef(e._shadowsCurve,e._negativeCurve)),t&&(t.setFloat4(r,e._positiveCurve.r,e._positiveCurve.g,e._positiveCurve.b,e._positiveCurve.a),t.setFloat4(n,e._midtonesCurve.r,e._midtonesCurve.g,e._midtonesCurve.b,e._midtonesCurve.a),t.setFloat4(i,e._negativeCurve.r,e._negativeCurve.g,e._negativeCurve.b,e._negativeCurve.a))},ColorCurves.PrepareUniforms=function(e){e.push("vCameraColorCurveNeutral","vCameraColorCurvePositive","vCameraColorCurveNegative")},ColorCurves.prototype.getColorGradingDataToRef=function(e,t,r,n,i){null!=e&&(e=ColorCurves.clamp(e,0,360),t=ColorCurves.clamp(t,-100,100),r=ColorCurves.clamp(r,-100,100),n=ColorCurves.clamp(n,-100,100),t=ColorCurves.applyColorGradingSliderNonlinear(t),t*=.5,n=ColorCurves.applyColorGradingSliderNonlinear(n),t<0&&(t*=-1,e=(e+180)%360),ColorCurves.fromHSBToRef(e,t,50+.25*n,i),i.scaleToRef(2,i),i.a=1+.01*r)},ColorCurves.applyColorGradingSliderNonlinear=function(e){e/=100;var t=Math.abs(e);return t=Math.pow(t,2),e<0&&(t*=-1),t*=100,t},ColorCurves.fromHSBToRef=function(e,t,r,n){var i=ColorCurves.clamp(e,0,360),o=ColorCurves.clamp(t/100,0,1),s=ColorCurves.clamp(r/100,0,1);if(0===o)n.r=s,n.g=s,n.b=s;else{i/=60;var a=Math.floor(i),u=i-a,c=s*(1-o),l=s*(1-o*u),d=s*(1-o*(1-u));switch(a){case 0:n.r=s,n.g=d,n.b=c;break;case 1:n.r=l,n.g=s,n.b=c;break;case 2:n.r=c,n.g=s,n.b=d;break;case 3:n.r=c,n.g=l,n.b=s;break;case 4:n.r=d,n.g=c,n.b=s;break;default:n.r=s,n.g=c,n.b=l;break}}n.a=1},ColorCurves.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},ColorCurves.prototype.clone=function(){return i["SerializationHelper"].Clone((function(){return new ColorCurves}),this)},ColorCurves.prototype.serialize=function(){return i["SerializationHelper"].Serialize(this)},ColorCurves.Parse=function(e){return i["SerializationHelper"].Parse((function(){return new ColorCurves}),e,null,null)},Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_globalHue",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_globalDensity",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_globalSaturation",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_globalExposure",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_highlightsHue",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_highlightsDensity",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_highlightsSaturation",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_highlightsExposure",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_midtonesHue",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_midtonesDensity",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_midtonesSaturation",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ColorCurves.prototype,"_midtonesExposure",void 0),ColorCurves}();i["SerializationHelper"]._ColorCurvesParser=s.Parse},"./node_modules/@babylonjs/core/Materials/effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Effect",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Misc/observable.js"),i=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),o=r("./node_modules/@babylonjs/core/Misc/logger.js"),s=r("./node_modules/@babylonjs/core/Engines/Processors/shaderProcessor.js"),a=function(){function Effect(e,t,r,o,a,u,c,l,d,h){var f,p=this;void 0===o&&(o=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===l&&(l=null),void 0===d&&(d=null),this.name=null,this.defines="",this.onCompiled=null,this.onError=null,this.onBind=null,this.uniqueId=0,this.onCompileObservable=new n["Observable"],this.onErrorObservable=new n["Observable"],this._onBindObservable=null,this._wasPreviouslyReady=!1,this._bonesComputationForcedToCPU=!1,this._multiTarget=!1,this._uniformBuffersNames={},this._samplers={},this._isReady=!1,this._compilationError="",this._allFallbacksProcessed=!1,this._uniforms={},this._key="",this._fallbacks=null,this._vertexSourceCode="",this._fragmentSourceCode="",this._vertexSourceCodeOverride="",this._fragmentSourceCodeOverride="",this._transformFeedbackVaryings=null,this._rawVertexSourceCode="",this._rawFragmentSourceCode="",this._pipelineContext=null,this._valueCache={},this.name=e;var m,_,g=null;if(t.attributes){var b=t;if(this._engine=r,this._attributesNames=b.attributes,this._uniformsNames=b.uniformsNames.concat(b.samplers),this._samplerList=b.samplers.slice(),this.defines=b.defines,this.onError=b.onError,this.onCompiled=b.onCompiled,this._fallbacks=b.fallbacks,this._indexParameters=b.indexParameters,this._transformFeedbackVaryings=b.transformFeedbackVaryings||null,this._multiTarget=!!b.multiTarget,b.uniformBuffersNames){this._uniformBuffersNamesList=b.uniformBuffersNames.slice();for(var v=0;v<b.uniformBuffersNames.length;v++)this._uniformBuffersNames[b.uniformBuffersNames[v]]=v}g=null!==(f=b.processFinalCode)&&void 0!==f?f:null}else this._engine=a,this.defines=null==u?"":u,this._uniformsNames=r.concat(o),this._samplerList=o?o.slice():[],this._attributesNames=t,this._uniformBuffersNamesList=[],this.onError=d,this.onCompiled=l,this._indexParameters=h,this._fallbacks=c;this._attributeLocationByName={},this.uniqueId=Effect._uniqueIdSeed++;var M=i["DomManagement"].IsWindowObjectExist()?this._engine.getHostDocument():null;e.vertexSource?m="source:"+e.vertexSource:e.vertexElement?(m=M?M.getElementById(e.vertexElement):null,m||(m=e.vertexElement)):m=e.vertex||e,e.fragmentSource?_="source:"+e.fragmentSource:e.fragmentElement?(_=M?M.getElementById(e.fragmentElement):null,_||(_=e.fragmentElement)):_=e.fragment||e;var T={defines:this.defines.split("\n"),indexParameters:this._indexParameters,isFragment:!1,shouldUseHighPrecisionShader:this._engine._shouldUseHighPrecisionShader,processor:this._engine._shaderProcessor,supportsUniformBuffers:this._engine.supportsUniformBuffers,shadersRepository:Effect.ShadersRepository,includesShadersStore:Effect.IncludesShadersStore,version:(100*this._engine.webGLVersion).toString(),platformName:this._engine.webGLVersion>=2?"WEBGL2":"WEBGL1"};this._loadShader(m,"Vertex","",(function(t){p._rawVertexSourceCode=t,p._loadShader(_,"Fragment","Pixel",(function(r){p._rawFragmentSourceCode=r,s["ShaderProcessor"].Process(t,T,(function(t){g&&(t=g("vertex",t)),T.isFragment=!0,s["ShaderProcessor"].Process(r,T,(function(r){g&&(r=g("fragment",r)),p._useFinalCode(t,r,e)}),p._engine)}),p._engine)}))}))}return Object.defineProperty(Effect.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new n["Observable"]),this._onBindObservable},enumerable:!1,configurable:!0}),Effect.prototype._useFinalCode=function(e,t,r){if(r){var n=r.vertexElement||r.vertex||r.spectorName||r,i=r.fragmentElement||r.fragment||r.spectorName||r;this._vertexSourceCode="#define SHADER_NAME vertex:"+n+"\n"+e,this._fragmentSourceCode="#define SHADER_NAME fragment:"+i+"\n"+t}else this._vertexSourceCode=e,this._fragmentSourceCode=t;this._prepareEffect()},Object.defineProperty(Effect.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Effect.prototype.isReady=function(){try{return this._isReadyInternal()}catch(e){return!1}},Effect.prototype._isReadyInternal=function(){return!!this._isReady||!!this._pipelineContext&&this._pipelineContext.isReady},Effect.prototype.getEngine=function(){return this._engine},Effect.prototype.getPipelineContext=function(){return this._pipelineContext},Effect.prototype.getAttributesNames=function(){return this._attributesNames},Effect.prototype.getAttributeLocation=function(e){return this._attributes[e]},Effect.prototype.getAttributeLocationByName=function(e){return this._attributeLocationByName[e]},Effect.prototype.getAttributesCount=function(){return this._attributes.length},Effect.prototype.getUniformIndex=function(e){return this._uniformsNames.indexOf(e)},Effect.prototype.getUniform=function(e){return this._uniforms[e]},Effect.prototype.getSamplers=function(){return this._samplerList},Effect.prototype.getUniformNames=function(){return this._uniformsNames},Effect.prototype.getUniformBuffersNames=function(){return this._uniformBuffersNamesList},Effect.prototype.getIndexParameters=function(){return this._indexParameters},Effect.prototype.getCompilationError=function(){return this._compilationError},Effect.prototype.allFallbacksProcessed=function(){return this._allFallbacksProcessed},Effect.prototype.executeWhenCompiled=function(e){var t=this;this.isReady()?e(this):(this.onCompileObservable.add((function(t){e(t)})),this._pipelineContext&&!this._pipelineContext.isAsync||setTimeout((function(){t._checkIsReady(null)}),16))},Effect.prototype._checkIsReady=function(e){var t=this;try{if(this._isReadyInternal())return}catch(r){return void this._processCompilationErrors(r,e)}setTimeout((function(){t._checkIsReady(e)}),16)},Effect.prototype._loadShader=function(e,t,r,n){if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement){var o=i["DomManagement"].GetDOMTextContent(e);n(o)}else if("source:"!==e.substr(0,7))if("base64:"!==e.substr(0,7)){var s;if(Effect.ShadersStore[e+t+"Shader"])n(Effect.ShadersStore[e+t+"Shader"]);else if(r&&Effect.ShadersStore[e+r+"Shader"])n(Effect.ShadersStore[e+r+"Shader"]);else s="."===e[0]||"/"===e[0]||e.indexOf("http")>-1?e:Effect.ShadersRepository+e,this._engine._loadFile(s+"."+t.toLowerCase()+".fx",n)}else{var a=window.atob(e.substr(7));n(a)}else n(e.substr(7))},Object.defineProperty(Effect.prototype,"vertexSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._vertexSourceCodeOverride:this._vertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(Effect.prototype,"fragmentSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._fragmentSourceCodeOverride:this._fragmentSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(Effect.prototype,"rawVertexSourceCode",{get:function(){return this._rawVertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(Effect.prototype,"rawFragmentSourceCode",{get:function(){return this._rawFragmentSourceCode},enumerable:!1,configurable:!0}),Effect.prototype._rebuildProgram=function(e,t,r,n){var i=this;this._isReady=!1,this._vertexSourceCodeOverride=e,this._fragmentSourceCodeOverride=t,this.onError=function(e,t){n&&n(t)},this.onCompiled=function(){var e=i.getEngine().scenes;if(e)for(var t=0;t<e.length;t++)e[t].markAllMaterialsAsDirty(63);i._pipelineContext._handlesSpectorRebuildCallback(r)},this._fallbacks=null,this._prepareEffect()},Effect.prototype._prepareEffect=function(){var e=this,t=this._attributesNames,r=this.defines;this._valueCache={};var n=this._pipelineContext;try{var i=this._engine;this._pipelineContext=i.createPipelineContext();var o=this._rebuildProgram.bind(this);this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?i._preparePipelineContext(this._pipelineContext,this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,!0,o,null,this._transformFeedbackVaryings):i._preparePipelineContext(this._pipelineContext,this._vertexSourceCode,this._fragmentSourceCode,!1,o,r,this._transformFeedbackVaryings),i._executeWhenRenderingStateIsCompiled(this._pipelineContext,(function(){if(i.supportsUniformBuffers)for(var r in e._uniformBuffersNames)e.bindUniformBlock(r,e._uniformBuffersNames[r]);var o,s=i.getUniforms(e._pipelineContext,e._uniformsNames);if(s.forEach((function(t,r){e._uniforms[e._uniformsNames[r]]=t})),e._attributes=i.getAttributes(e._pipelineContext,t),t)for(var a=0;a<t.length;a++){var u=t[a];e._attributeLocationByName[u]=e._attributes[a]}for(o=0;o<e._samplerList.length;o++){var c=e.getUniform(e._samplerList[o]);null==c&&(e._samplerList.splice(o,1),o--)}e._samplerList.forEach((function(t,r){e._samplers[t]=r})),i.bindSamplers(e),e._compilationError="",e._isReady=!0,e.onCompiled&&e.onCompiled(e),e.onCompileObservable.notifyObservers(e),e.onCompileObservable.clear(),e._fallbacks&&e._fallbacks.unBindMesh(),n&&e.getEngine()._deletePipelineContext(n)})),this._pipelineContext.isAsync&&this._checkIsReady(n)}catch(s){this._processCompilationErrors(s,n)}},Effect.prototype._getShaderCodeAndErrorLine=function(e,t,r){var n=r?/FRAGMENT SHADER ERROR: 0:(\d+?):/:/VERTEX SHADER ERROR: 0:(\d+?):/,i=null;if(t&&e){var o=t.match(n);if(o&&2===o.length){var s=parseInt(o[1]),a=e.split("\n",-1);a.length>=s&&(i="Offending line ["+s+"] in "+(r?"fragment":"vertex")+" code: "+a[s-1])}}return[e,i]},Effect.prototype._processCompilationErrors=function(e,t){var r,n,i,s,a;void 0===t&&(t=null),this._compilationError=e.message;var u=this._attributesNames,c=this._fallbacks;if(o["Logger"].Error("Unable to compile effect:"),o["Logger"].Error("Uniforms: "+this._uniformsNames.map((function(e){return" "+e}))),o["Logger"].Error("Attributes: "+u.map((function(e){return" "+e}))),o["Logger"].Error("Defines:\r\n"+this.defines),Effect.LogShaderCodeOnCompilationError){var l=null,d=null,h=null;(null===(i=this._pipelineContext)||void 0===i?void 0:i._getVertexShaderCode())&&(r=this._getShaderCodeAndErrorLine(this._pipelineContext._getVertexShaderCode(),this._compilationError,!1),h=r[0],l=r[1],h&&(o["Logger"].Error("Vertex code:"),o["Logger"].Error(h))),(null===(s=this._pipelineContext)||void 0===s?void 0:s._getFragmentShaderCode())&&(n=this._getShaderCodeAndErrorLine(null===(a=this._pipelineContext)||void 0===a?void 0:a._getFragmentShaderCode(),this._compilationError,!0),h=n[0],d=n[1],h&&(o["Logger"].Error("Fragment code:"),o["Logger"].Error(h))),l&&o["Logger"].Error(l),d&&o["Logger"].Error(d)}o["Logger"].Error("Error: "+this._compilationError),t&&(this._pipelineContext=t,this._isReady=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this)),c?(this._pipelineContext=null,c.hasMoreFallbacks?(this._allFallbacksProcessed=!1,o["Logger"].Error("Trying next fallback."),this.defines=c.reduce(this.defines,this),this._prepareEffect()):(this._allFallbacksProcessed=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this),this.onErrorObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh())):this._allFallbacksProcessed=!0},Object.defineProperty(Effect.prototype,"isSupported",{get:function(){return""===this._compilationError},enumerable:!1,configurable:!0}),Effect.prototype._bindTexture=function(e,t){this._engine._bindTexture(this._samplers[e],t)},Effect.prototype.setTexture=function(e,t){this._engine.setTexture(this._samplers[e],this._uniforms[e],t)},Effect.prototype.setDepthStencilTexture=function(e,t){this._engine.setDepthStencilTexture(this._samplers[e],this._uniforms[e],t)},Effect.prototype.setTextureArray=function(e,t){var r=e+"Ex";if(-1===this._samplerList.indexOf(r+"0")){for(var n=this._samplerList.indexOf(e),i=1;i<t.length;i++){var o=r+(i-1).toString();this._samplerList.splice(n+i,0,o)}for(var s=0,a=0,u=this._samplerList;a<u.length;a++){var c=u[a];this._samplers[c]=s,s+=1}}this._engine.setTextureArray(this._samplers[e],this._uniforms[e],t)},Effect.prototype.setTextureFromPostProcess=function(e,t){this._engine.setTextureFromPostProcess(this._samplers[e],t)},Effect.prototype.setTextureFromPostProcessOutput=function(e,t){this._engine.setTextureFromPostProcessOutput(this._samplers[e],t)},Effect.prototype._cacheMatrix=function(e,t){var r=this._valueCache[e],n=t.updateFlag;return(void 0===r||r!==n)&&(this._valueCache[e]=n,!0)},Effect.prototype._cacheFloat2=function(e,t,r){var n=this._valueCache[e];if(!n||2!==n.length)return n=[t,r],this._valueCache[e]=n,!0;var i=!1;return n[0]!==t&&(n[0]=t,i=!0),n[1]!==r&&(n[1]=r,i=!0),i},Effect.prototype._cacheFloat3=function(e,t,r,n){var i=this._valueCache[e];if(!i||3!==i.length)return i=[t,r,n],this._valueCache[e]=i,!0;var o=!1;return i[0]!==t&&(i[0]=t,o=!0),i[1]!==r&&(i[1]=r,o=!0),i[2]!==n&&(i[2]=n,o=!0),o},Effect.prototype._cacheFloat4=function(e,t,r,n,i){var o=this._valueCache[e];if(!o||4!==o.length)return o=[t,r,n,i],this._valueCache[e]=o,!0;var s=!1;return o[0]!==t&&(o[0]=t,s=!0),o[1]!==r&&(o[1]=r,s=!0),o[2]!==n&&(o[2]=n,s=!0),o[3]!==i&&(o[3]=i,s=!0),s},Effect.prototype.bindUniformBuffer=function(e,t){var r=this._uniformBuffersNames[t];void 0!==r&&Effect._baseCache[r]!==e&&(Effect._baseCache[r]=e,this._engine.bindUniformBufferBase(e,r))},Effect.prototype.bindUniformBlock=function(e,t){this._engine.bindUniformBlock(this._pipelineContext,e,t)},Effect.prototype.setInt=function(e,t){var r=this._valueCache[e];return void 0!==r&&r===t||this._engine.setInt(this._uniforms[e],t)&&(this._valueCache[e]=t),this},Effect.prototype.setIntArray=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray(this._uniforms[e],t),this},Effect.prototype.setIntArray2=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray2(this._uniforms[e],t),this},Effect.prototype.setIntArray3=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray3(this._uniforms[e],t),this},Effect.prototype.setIntArray4=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray4(this._uniforms[e],t),this},Effect.prototype.setFloatArray=function(e,t){return this._valueCache[e]=null,this._engine.setArray(this._uniforms[e],t),this},Effect.prototype.setFloatArray2=function(e,t){return this._valueCache[e]=null,this._engine.setArray2(this._uniforms[e],t),this},Effect.prototype.setFloatArray3=function(e,t){return this._valueCache[e]=null,this._engine.setArray3(this._uniforms[e],t),this},Effect.prototype.setFloatArray4=function(e,t){return this._valueCache[e]=null,this._engine.setArray4(this._uniforms[e],t),this},Effect.prototype.setArray=function(e,t){return this._valueCache[e]=null,this._engine.setArray(this._uniforms[e],t),this},Effect.prototype.setArray2=function(e,t){return this._valueCache[e]=null,this._engine.setArray2(this._uniforms[e],t),this},Effect.prototype.setArray3=function(e,t){return this._valueCache[e]=null,this._engine.setArray3(this._uniforms[e],t),this},Effect.prototype.setArray4=function(e,t){return this._valueCache[e]=null,this._engine.setArray4(this._uniforms[e],t),this},Effect.prototype.setMatrices=function(e,t){return t?(this._valueCache[e]=null,this._engine.setMatrices(this._uniforms[e],t),this):this},Effect.prototype.setMatrix=function(e,t){return this._cacheMatrix(e,t)&&(this._engine.setMatrices(this._uniforms[e],t.toArray())||(this._valueCache[e]=null)),this},Effect.prototype.setMatrix3x3=function(e,t){return this._valueCache[e]=null,this._engine.setMatrix3x3(this._uniforms[e],t),this},Effect.prototype.setMatrix2x2=function(e,t){return this._valueCache[e]=null,this._engine.setMatrix2x2(this._uniforms[e],t),this},Effect.prototype.setFloat=function(e,t){var r=this._valueCache[e];return void 0!==r&&r===t||this._engine.setFloat(this._uniforms[e],t)&&(this._valueCache[e]=t),this},Effect.prototype.setBool=function(e,t){var r=this._valueCache[e];return void 0!==r&&r===t||this._engine.setInt(this._uniforms[e],t?1:0)&&(this._valueCache[e]=t),this},Effect.prototype.setVector2=function(e,t){return this._cacheFloat2(e,t.x,t.y)&&(this._engine.setFloat2(this._uniforms[e],t.x,t.y)||(this._valueCache[e]=null)),this},Effect.prototype.setFloat2=function(e,t,r){return this._cacheFloat2(e,t,r)&&(this._engine.setFloat2(this._uniforms[e],t,r)||(this._valueCache[e]=null)),this},Effect.prototype.setVector3=function(e,t){return this._cacheFloat3(e,t.x,t.y,t.z)&&(this._engine.setFloat3(this._uniforms[e],t.x,t.y,t.z)||(this._valueCache[e]=null)),this},Effect.prototype.setFloat3=function(e,t,r,n){return this._cacheFloat3(e,t,r,n)&&(this._engine.setFloat3(this._uniforms[e],t,r,n)||(this._valueCache[e]=null)),this},Effect.prototype.setVector4=function(e,t){return this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&(this._engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)||(this._valueCache[e]=null)),this},Effect.prototype.setFloat4=function(e,t,r,n,i){return this._cacheFloat4(e,t,r,n,i)&&(this._engine.setFloat4(this._uniforms[e],t,r,n,i)||(this._valueCache[e]=null)),this},Effect.prototype.setColor3=function(e,t){return this._cacheFloat3(e,t.r,t.g,t.b)&&(this._engine.setFloat3(this._uniforms[e],t.r,t.g,t.b)||(this._valueCache[e]=null)),this},Effect.prototype.setColor4=function(e,t,r){return this._cacheFloat4(e,t.r,t.g,t.b,r)&&(this._engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,r)||(this._valueCache[e]=null)),this},Effect.prototype.setDirectColor4=function(e,t){return this._cacheFloat4(e,t.r,t.g,t.b,t.a)&&(this._engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,t.a)||(this._valueCache[e]=null)),this},Effect.prototype.dispose=function(){this._engine._releaseEffect(this)},Effect.RegisterShader=function(e,t,r){t&&(Effect.ShadersStore[e+"PixelShader"]=t),r&&(Effect.ShadersStore[e+"VertexShader"]=r)},Effect.ResetCache=function(){Effect._baseCache={}},Effect.ShadersRepository="src/Shaders/",Effect.LogShaderCodeOnCompilationError=!0,Effect._uniqueIdSeed=0,Effect._baseCache={},Effect.ShadersStore={},Effect.IncludesShadersStore={},Effect}()},"./node_modules/@babylonjs/core/Materials/effectFallbacks.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EffectFallbacks",(function(){return n}));var n=function(){function EffectFallbacks(){this._defines={},this._currentRank=32,this._maxRank=-1,this._mesh=null}return EffectFallbacks.prototype.unBindMesh=function(){this._mesh=null},EffectFallbacks.prototype.addFallback=function(e,t){this._defines[e]||(e<this._currentRank&&(this._currentRank=e),e>this._maxRank&&(this._maxRank=e),this._defines[e]=new Array),this._defines[e].push(t)},EffectFallbacks.prototype.addCPUSkinningFallback=function(e,t){this._mesh=t,e<this._currentRank&&(this._currentRank=e),e>this._maxRank&&(this._maxRank=e)},Object.defineProperty(EffectFallbacks.prototype,"hasMoreFallbacks",{get:function(){return this._currentRank<=this._maxRank},enumerable:!1,configurable:!0}),EffectFallbacks.prototype.reduce=function(e,t){if(this._mesh&&this._mesh.computeBonesUsingShaders&&this._mesh.numBoneInfluencers>0){this._mesh.computeBonesUsingShaders=!1,e=e.replace("#define NUM_BONE_INFLUENCERS "+this._mesh.numBoneInfluencers,"#define NUM_BONE_INFLUENCERS 0"),t._bonesComputationForcedToCPU=!0;for(var r=this._mesh.getScene(),n=0;n<r.meshes.length;n++){var i=r.meshes[n];if(i.material){if(i.computeBonesUsingShaders&&0!==i.numBoneInfluencers)if(i.material.getEffect()===t)i.computeBonesUsingShaders=!1;else if(i.subMeshes)for(var o=0,s=i.subMeshes;o<s.length;o++){var a=s[o],u=a.effect;if(u===t){i.computeBonesUsingShaders=!1;break}}}else!this._mesh.material&&i.computeBonesUsingShaders&&i.numBoneInfluencers>0&&(i.computeBonesUsingShaders=!1)}}else{var c=this._defines[this._currentRank];if(c)for(n=0;n<c.length;n++)e=e.replace("#define "+c[n],"");this._currentRank++}return e},EffectFallbacks}()},"./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ImageProcessingConfigurationDefines",(function(){return l})),r.d(t,"ImageProcessingConfiguration",(function(){return d}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Misc/tools.js"),a=r("./node_modules/@babylonjs/core/Maths/math.color.js"),u=r("./node_modules/@babylonjs/core/Materials/materialDefines.js"),c=r("./node_modules/@babylonjs/core/Materials/colorCurves.js"),l=function(e){function ImageProcessingConfigurationDefines(){var t=e.call(this)||this;return t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.EXPOSURE=!1,t.rebuild(),t}return Object(n["__extends"])(ImageProcessingConfigurationDefines,e),ImageProcessingConfigurationDefines}(u["MaterialDefines"]),d=function(){function ImageProcessingConfiguration(){this.colorCurves=new c["ColorCurves"],this._colorCurvesEnabled=!1,this._colorGradingEnabled=!1,this._colorGradingWithGreenDepth=!0,this._colorGradingBGR=!0,this._exposure=1,this._toneMappingEnabled=!1,this._toneMappingType=ImageProcessingConfiguration.TONEMAPPING_STANDARD,this._contrast=1,this.vignetteStretch=0,this.vignetteCentreX=0,this.vignetteCentreY=0,this.vignetteWeight=1.5,this.vignetteColor=new a["Color4"](0,0,0,0),this.vignetteCameraFov=.5,this._vignetteBlendMode=ImageProcessingConfiguration.VIGNETTEMODE_MULTIPLY,this._vignetteEnabled=!1,this._applyByPostProcess=!1,this._isEnabled=!0,this.onUpdateParameters=new o["Observable"]}return Object.defineProperty(ImageProcessingConfiguration.prototype,"colorCurvesEnabled",{get:function(){return this._colorCurvesEnabled},set:function(e){this._colorCurvesEnabled!==e&&(this._colorCurvesEnabled=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"colorGradingTexture",{get:function(){return this._colorGradingTexture},set:function(e){this._colorGradingTexture!==e&&(this._colorGradingTexture=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"colorGradingEnabled",{get:function(){return this._colorGradingEnabled},set:function(e){this._colorGradingEnabled!==e&&(this._colorGradingEnabled=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"colorGradingWithGreenDepth",{get:function(){return this._colorGradingWithGreenDepth},set:function(e){this._colorGradingWithGreenDepth!==e&&(this._colorGradingWithGreenDepth=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"colorGradingBGR",{get:function(){return this._colorGradingBGR},set:function(e){this._colorGradingBGR!==e&&(this._colorGradingBGR=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"exposure",{get:function(){return this._exposure},set:function(e){this._exposure!==e&&(this._exposure=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"toneMappingEnabled",{get:function(){return this._toneMappingEnabled},set:function(e){this._toneMappingEnabled!==e&&(this._toneMappingEnabled=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"toneMappingType",{get:function(){return this._toneMappingType},set:function(e){this._toneMappingType!==e&&(this._toneMappingType=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"contrast",{get:function(){return this._contrast},set:function(e){this._contrast!==e&&(this._contrast=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"vignetteBlendMode",{get:function(){return this._vignetteBlendMode},set:function(e){this._vignetteBlendMode!==e&&(this._vignetteBlendMode=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"vignetteEnabled",{get:function(){return this._vignetteEnabled},set:function(e){this._vignetteEnabled!==e&&(this._vignetteEnabled=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"applyByPostProcess",{get:function(){return this._applyByPostProcess},set:function(e){this._applyByPostProcess!==e&&(this._applyByPostProcess=e,this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._updateParameters())},enumerable:!1,configurable:!0}),ImageProcessingConfiguration.prototype._updateParameters=function(){this.onUpdateParameters.notifyObservers(this)},ImageProcessingConfiguration.prototype.getClassName=function(){return"ImageProcessingConfiguration"},ImageProcessingConfiguration.PrepareUniforms=function(e,t){t.EXPOSURE&&e.push("exposureLinear"),t.CONTRAST&&e.push("contrast"),t.COLORGRADING&&e.push("colorTransformSettings"),t.VIGNETTE&&(e.push("vInverseScreenSize"),e.push("vignetteSettings1"),e.push("vignetteSettings2")),t.COLORCURVES&&c["ColorCurves"].PrepareUniforms(e)},ImageProcessingConfiguration.PrepareSamplers=function(e,t){t.COLORGRADING&&e.push("txColorTransform")},ImageProcessingConfiguration.prototype.prepareDefines=function(e,t){if(void 0===t&&(t=!1),t!==this.applyByPostProcess||!this._isEnabled)return e.VIGNETTE=!1,e.TONEMAPPING=!1,e.TONEMAPPING_ACES=!1,e.CONTRAST=!1,e.EXPOSURE=!1,e.COLORCURVES=!1,e.COLORGRADING=!1,e.COLORGRADING3D=!1,e.IMAGEPROCESSING=!1,void(e.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess&&this._isEnabled);switch(e.VIGNETTE=this.vignetteEnabled,e.VIGNETTEBLENDMODEMULTIPLY=this.vignetteBlendMode===ImageProcessingConfiguration._VIGNETTEMODE_MULTIPLY,e.VIGNETTEBLENDMODEOPAQUE=!e.VIGNETTEBLENDMODEMULTIPLY,e.TONEMAPPING=this.toneMappingEnabled,this._toneMappingType){case ImageProcessingConfiguration.TONEMAPPING_ACES:e.TONEMAPPING_ACES=!0;break;default:e.TONEMAPPING_ACES=!1;break}e.CONTRAST=1!==this.contrast,e.EXPOSURE=1!==this.exposure,e.COLORCURVES=this.colorCurvesEnabled&&!!this.colorCurves,e.COLORGRADING=this.colorGradingEnabled&&!!this.colorGradingTexture,e.COLORGRADING?e.COLORGRADING3D=this.colorGradingTexture.is3D:e.COLORGRADING3D=!1,e.SAMPLER3DGREENDEPTH=this.colorGradingWithGreenDepth,e.SAMPLER3DBGRMAP=this.colorGradingBGR,e.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess,e.IMAGEPROCESSING=e.VIGNETTE||e.TONEMAPPING||e.CONTRAST||e.EXPOSURE||e.COLORCURVES||e.COLORGRADING},ImageProcessingConfiguration.prototype.isReady=function(){return!this.colorGradingEnabled||!this.colorGradingTexture||this.colorGradingTexture.isReady()},ImageProcessingConfiguration.prototype.bind=function(e,t){if(this._colorCurvesEnabled&&this.colorCurves&&c["ColorCurves"].Bind(this.colorCurves,e),this._vignetteEnabled){var r=1/e.getEngine().getRenderWidth(),n=1/e.getEngine().getRenderHeight();e.setFloat2("vInverseScreenSize",r,n);var i=null!=t?t:n/r,o=Math.tan(.5*this.vignetteCameraFov),a=o*i,u=Math.sqrt(a*o);a=s["Tools"].Mix(a,u,this.vignetteStretch),o=s["Tools"].Mix(o,u,this.vignetteStretch),e.setFloat4("vignetteSettings1",a,o,-a*this.vignetteCentreX,-o*this.vignetteCentreY);var l=-2*this.vignetteWeight;e.setFloat4("vignetteSettings2",this.vignetteColor.r,this.vignetteColor.g,this.vignetteColor.b,l)}if(e.setFloat("exposureLinear",this.exposure),e.setFloat("contrast",this.contrast),this.colorGradingTexture){e.setTexture("txColorTransform",this.colorGradingTexture);var d=this.colorGradingTexture.getSize().height;e.setFloat4("colorTransformSettings",(d-1)/d,.5/d,d,this.colorGradingTexture.level)}},ImageProcessingConfiguration.prototype.clone=function(){return i["SerializationHelper"].Clone((function(){return new ImageProcessingConfiguration}),this)},ImageProcessingConfiguration.prototype.serialize=function(){return i["SerializationHelper"].Serialize(this)},ImageProcessingConfiguration.Parse=function(e){return i["SerializationHelper"].Parse((function(){return new ImageProcessingConfiguration}),e,null,null)},Object.defineProperty(ImageProcessingConfiguration,"VIGNETTEMODE_MULTIPLY",{get:function(){return this._VIGNETTEMODE_MULTIPLY},enumerable:!1,configurable:!0}),Object.defineProperty(ImageProcessingConfiguration,"VIGNETTEMODE_OPAQUE",{get:function(){return this._VIGNETTEMODE_OPAQUE},enumerable:!1,configurable:!0}),ImageProcessingConfiguration.TONEMAPPING_STANDARD=0,ImageProcessingConfiguration.TONEMAPPING_ACES=1,ImageProcessingConfiguration._VIGNETTEMODE_MULTIPLY=0,ImageProcessingConfiguration._VIGNETTEMODE_OPAQUE=1,Object(n["__decorate"])([Object(i["serializeAsColorCurves"])()],ImageProcessingConfiguration.prototype,"colorCurves",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_colorCurvesEnabled",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("colorGradingTexture")],ImageProcessingConfiguration.prototype,"_colorGradingTexture",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_colorGradingEnabled",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_colorGradingWithGreenDepth",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_colorGradingBGR",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_exposure",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_toneMappingEnabled",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_toneMappingType",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_contrast",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"vignetteStretch",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"vignetteCentreX",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"vignetteCentreY",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"vignetteWeight",void 0),Object(n["__decorate"])([Object(i["serializeAsColor4"])()],ImageProcessingConfiguration.prototype,"vignetteColor",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"vignetteCameraFov",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_vignetteBlendMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_vignetteEnabled",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_applyByPostProcess",void 0),Object(n["__decorate"])([Object(i["serialize"])()],ImageProcessingConfiguration.prototype,"_isEnabled",void 0),ImageProcessingConfiguration}();i["SerializationHelper"]._ImageProcessingConfigurationParser=d.Parse},"./node_modules/@babylonjs/core/Materials/material.detailMapConfiguration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DetailMapConfiguration",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Materials/material.js"),o=r("./node_modules/@babylonjs/core/Misc/decorators.js"),s=r("./node_modules/@babylonjs/core/Materials/materialFlags.js"),a=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),u=function(){function DetailMapConfiguration(e){this._texture=null,this.diffuseBlendLevel=1,this.roughnessBlendLevel=1,this.bumpLevel=1,this._normalBlendMethod=i["Material"].MATERIAL_NORMALBLENDMETHOD_WHITEOUT,this._isEnabled=!1,this.isEnabled=!1,this._internalMarkAllSubMeshesAsTexturesDirty=e}return DetailMapConfiguration.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()},DetailMapConfiguration.prototype.isReadyForSubMesh=function(e,t){var r=t.getEngine();return!(e._areTexturesDirty&&t.texturesEnabled&&r.getCaps().standardDerivatives&&this._texture&&s["MaterialFlags"].DetailTextureEnabled&&!this._texture.isReady())},DetailMapConfiguration.prototype.prepareDefines=function(e,t){if(this._isEnabled){e.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod;var r=t.getEngine();e._areTexturesDirty&&(r.getCaps().standardDerivatives&&this._texture&&s["MaterialFlags"].DetailTextureEnabled&&this._isEnabled?(a["MaterialHelper"].PrepareDefinesForMergedUV(this._texture,e,"DETAIL"),e.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod):e.DETAIL=!1)}else e.DETAIL=!1},DetailMapConfiguration.prototype.bindForSubMesh=function(e,t,r){this._isEnabled&&(e.useUbo&&r&&e.isSync||this._texture&&s["MaterialFlags"].DetailTextureEnabled&&(e.updateFloat4("vDetailInfos",this._texture.coordinatesIndex,this.diffuseBlendLevel,this.bumpLevel,this.roughnessBlendLevel),a["MaterialHelper"].BindTextureMatrix(this._texture,e,"detail")),t.texturesEnabled&&this._texture&&s["MaterialFlags"].DetailTextureEnabled&&e.setTexture("detailSampler",this._texture))},DetailMapConfiguration.prototype.hasTexture=function(e){return this._texture===e},DetailMapConfiguration.prototype.getActiveTextures=function(e){this._texture&&e.push(this._texture)},DetailMapConfiguration.prototype.getAnimatables=function(e){this._texture&&this._texture.animations&&this._texture.animations.length>0&&e.push(this._texture)},DetailMapConfiguration.prototype.dispose=function(e){var t;e&&(null===(t=this._texture)||void 0===t||t.dispose())},DetailMapConfiguration.prototype.getClassName=function(){return"DetailMap"},DetailMapConfiguration.AddUniforms=function(e){e.push("vDetailInfos")},DetailMapConfiguration.AddSamplers=function(e){e.push("detailSampler")},DetailMapConfiguration.PrepareUniformBuffer=function(e){e.addUniform("vDetailInfos",4),e.addUniform("detailMatrix",16)},DetailMapConfiguration.prototype.copyTo=function(e){o["SerializationHelper"].Clone((function(){return e}),this)},DetailMapConfiguration.prototype.serialize=function(){return o["SerializationHelper"].Serialize(this)},DetailMapConfiguration.prototype.parse=function(e,t,r){var n=this;o["SerializationHelper"].Parse((function(){return n}),e,t,r)},Object(n["__decorate"])([Object(o["serializeAsTexture"])("detailTexture"),Object(o["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],DetailMapConfiguration.prototype,"texture",void 0),Object(n["__decorate"])([Object(o["serialize"])()],DetailMapConfiguration.prototype,"diffuseBlendLevel",void 0),Object(n["__decorate"])([Object(o["serialize"])()],DetailMapConfiguration.prototype,"roughnessBlendLevel",void 0),Object(n["__decorate"])([Object(o["serialize"])()],DetailMapConfiguration.prototype,"bumpLevel",void 0),Object(n["__decorate"])([Object(o["serialize"])(),Object(o["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],DetailMapConfiguration.prototype,"normalBlendMethod",void 0),Object(n["__decorate"])([Object(o["serialize"])(),Object(o["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],DetailMapConfiguration.prototype,"isEnabled",void 0),DetailMapConfiguration}()},"./node_modules/@babylonjs/core/Materials/material.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Material",(function(){return h}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/tools.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),u=r("./node_modules/@babylonjs/core/Meshes/subMesh.js"),c=r("./node_modules/@babylonjs/core/Materials/uniformBuffer.js"),l=r("./node_modules/@babylonjs/core/Misc/logger.js"),d=r("./node_modules/@babylonjs/core/Maths/math.plane.js"),h=function(){function Material(e,t,r){this.shadowDepthWrapper=null,this.allowShaderHotSwapping=!0,this.metadata=null,this.reservedDataStore=null,this.checkReadyOnEveryCall=!1,this.checkReadyOnlyOnce=!1,this.state="",this._alpha=1,this._backFaceCulling=!0,this.onCompiled=null,this.onError=null,this.getRenderTargetTextures=null,this.doNotSerialize=!1,this._storeEffectOnSubMeshes=!1,this.animations=null,this.onDisposeObservable=new s["Observable"],this._onDisposeObserver=null,this._onUnBindObservable=null,this._onBindObserver=null,this._alphaMode=2,this._needDepthPrePass=!1,this.disableDepthWrite=!1,this.disableColorWrite=!1,this.forceDepthWrite=!1,this.depthFunction=0,this.separateCullingPass=!1,this._fogEnabled=!0,this.pointSize=1,this.zOffset=0,this._effect=null,this._useUBO=!1,this._fillMode=Material.TriangleFillMode,this._cachedDepthWriteState=!1,this._cachedColorWriteState=!1,this._cachedDepthFunctionState=0,this._indexInSceneMaterialArray=-1,this.meshMap=null,this._forceAlphaTest=!1,this._transparencyMode=null,this.name=e;var n=1;this._scene=t||a["EngineStore"].LastCreatedScene,this.id=e||o["Tools"].RandomId();while(this._scene.getMaterialByID(this.id))this.id=e+" "+n++;this.uniqueId=this._scene.getUniqueId(),this._scene.useRightHandedSystem?this.sideOrientation=Material.ClockWiseSideOrientation:this.sideOrientation=Material.CounterClockWiseSideOrientation,this._uniformBuffer=new c["UniformBuffer"](this._scene.getEngine()),this._useUBO=this.getScene().getEngine().supportsUniformBuffers,r||this._scene.addMaterial(this),this._scene.useMaterialMeshMap&&(this.meshMap={})}return Object.defineProperty(Material.prototype,"canRenderToMRT",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha!==e&&(this._alpha=e,this.markAsDirty(Material.MiscDirtyFlag))},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"backFaceCulling",{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,this.markAsDirty(Material.TextureDirtyFlag))},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"hasRenderTargetTextures",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new s["Observable"]),this._onBindObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"onBind",{set:function(e){this._onBindObserver&&this.onBindObservable.remove(this._onBindObserver),this._onBindObserver=this.onBindObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"onUnBindObservable",{get:function(){return this._onUnBindObservable||(this._onUnBindObservable=new s["Observable"]),this._onUnBindObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"onEffectCreatedObservable",{get:function(){return this._onEffectCreatedObservable||(this._onEffectCreatedObservable=new s["Observable"]),this._onEffectCreatedObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"alphaMode",{get:function(){return this._alphaMode},set:function(e){this._alphaMode!==e&&(this._alphaMode=e,this.markAsDirty(Material.TextureDirtyFlag))},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"needDepthPrePass",{get:function(){return this._needDepthPrePass},set:function(e){this._needDepthPrePass!==e&&(this._needDepthPrePass=e,this._needDepthPrePass&&(this.checkReadyOnEveryCall=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(e){this._fogEnabled!==e&&(this._fogEnabled=e,this.markAsDirty(Material.MiscDirtyFlag))},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"wireframe",{get:function(){switch(this._fillMode){case Material.WireFrameFillMode:case Material.LineListDrawMode:case Material.LineLoopDrawMode:case Material.LineStripDrawMode:return!0}return this._scene.forceWireframe},set:function(e){this.fillMode=e?Material.WireFrameFillMode:Material.TriangleFillMode},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"pointsCloud",{get:function(){switch(this._fillMode){case Material.PointFillMode:case Material.PointListDrawMode:return!0}return this._scene.forcePointsCloud},set:function(e){this.fillMode=e?Material.PointFillMode:Material.TriangleFillMode},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"fillMode",{get:function(){return this._fillMode},set:function(e){this._fillMode!==e&&(this._fillMode=e,this.markAsDirty(Material.MiscDirtyFlag))},enumerable:!1,configurable:!0}),Material.prototype.toString=function(e){var t="Name: "+this.name;return t},Material.prototype.getClassName=function(){return"Material"},Object.defineProperty(Material.prototype,"isFrozen",{get:function(){return this.checkReadyOnlyOnce},enumerable:!1,configurable:!0}),Material.prototype.freeze=function(){this.markDirty(),this.checkReadyOnlyOnce=!0},Material.prototype.unfreeze=function(){this.markDirty(),this.checkReadyOnlyOnce=!1},Material.prototype.isReady=function(e,t){return!0},Material.prototype.isReadyForSubMesh=function(e,t,r){return!1},Material.prototype.getEffect=function(){return this._effect},Material.prototype.getScene=function(){return this._scene},Object.defineProperty(Material.prototype,"transparencyMode",{get:function(){return this._transparencyMode},set:function(e){this._transparencyMode!==e&&(this._transparencyMode=e,this._forceAlphaTest=e===Material.MATERIAL_ALPHATESTANDBLEND,this._markAllSubMeshesAsTexturesAndMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(Material.prototype,"_disableAlphaBlending",{get:function(){return this._transparencyMode===Material.MATERIAL_OPAQUE||this._transparencyMode===Material.MATERIAL_ALPHATEST},enumerable:!1,configurable:!0}),Material.prototype.needAlphaBlending=function(){return!this._disableAlphaBlending&&this.alpha<1},Material.prototype.needAlphaBlendingForMesh=function(e){return!(this._disableAlphaBlending&&e.visibility>=1)&&(this.needAlphaBlending()||e.visibility<1||e.hasVertexAlpha)},Material.prototype.needAlphaTesting=function(){return!!this._forceAlphaTest},Material.prototype._shouldTurnAlphaTestOn=function(e){return!this.needAlphaBlendingForMesh(e)&&this.needAlphaTesting()},Material.prototype.getAlphaTestTexture=function(){return null},Material.prototype.markDirty=function(){for(var e=this.getScene().meshes,t=0,r=e;t<r.length;t++){var n=r[t];if(n.subMeshes)for(var i=0,o=n.subMeshes;i<o.length;i++){var s=o[i];s.getMaterial()===this&&(s.effect&&(s.effect._wasPreviouslyReady=!1))}}},Material.prototype._preBind=function(e,t){void 0===t&&(t=null);var r=this._scene.getEngine(),n=null==t?this.sideOrientation:t,i=n===Material.ClockWiseSideOrientation;return r.enableEffect(e||this._effect),r.setState(this.backFaceCulling,this.zOffset,!1,i),i},Material.prototype.bind=function(e,t){},Material.prototype.bindForSubMesh=function(e,t,r){},Material.prototype.bindOnlyWorldMatrix=function(e){},Material.prototype.bindSceneUniformBuffer=function(e,t){t.bindToEffect(e,"Scene")},Material.prototype.bindView=function(e){this._useUBO?this.bindSceneUniformBuffer(e,this.getScene().getSceneUniformBuffer()):e.setMatrix("view",this.getScene().getViewMatrix())},Material.prototype.bindViewProjection=function(e){this._useUBO?this.bindSceneUniformBuffer(e,this.getScene().getSceneUniformBuffer()):e.setMatrix("viewProjection",this.getScene().getTransformMatrix())},Material.prototype._afterBind=function(e){if(this._scene._cachedMaterial=this,this._scene._cachedVisibility=e?e.visibility:1,this._onBindObservable&&e&&this._onBindObservable.notifyObservers(e),this.disableDepthWrite){var t=this._scene.getEngine();this._cachedDepthWriteState=t.getDepthWrite(),t.setDepthWrite(!1)}if(this.disableColorWrite){t=this._scene.getEngine();this._cachedColorWriteState=t.getColorWrite(),t.setColorWrite(!1)}if(0!==this.depthFunction){t=this._scene.getEngine();this._cachedDepthFunctionState=t.getDepthFunction()||0,t.setDepthFunction(this.depthFunction)}},Material.prototype.unbind=function(){if(this._onUnBindObservable&&this._onUnBindObservable.notifyObservers(this),0!==this.depthFunction){var e=this._scene.getEngine();e.setDepthFunction(this._cachedDepthFunctionState)}if(this.disableDepthWrite){e=this._scene.getEngine();e.setDepthWrite(this._cachedDepthWriteState)}if(this.disableColorWrite){e=this._scene.getEngine();e.setColorWrite(this._cachedColorWriteState)}},Material.prototype.getActiveTextures=function(){return[]},Material.prototype.hasTexture=function(e){return!1},Material.prototype.clone=function(e){return null},Material.prototype.getBindedMeshes=function(){var e=this;if(this.meshMap){var t=new Array;for(var r in this.meshMap){var n=this.meshMap[r];n&&t.push(n)}return t}var i=this._scene.meshes;return i.filter((function(t){return t.material===e}))},Material.prototype.forceCompilation=function(e,t,r,i){var o=this,s=Object(n["__assign"])({clipPlane:!1,useInstances:!1},r),a=this.getScene(),c=this.allowShaderHotSwapping;this.allowShaderHotSwapping=!1;var checkReady=function(){if(o._scene&&o._scene.getEngine()){var r=a.clipPlane;if(s.clipPlane&&(a.clipPlane=new d["Plane"](0,0,0,1)),o._storeEffectOnSubMeshes){var n=!0,l=null;if(e.subMeshes){var h=new u["SubMesh"](0,0,0,0,0,e,void 0,!1,!1);h._materialDefines&&(h._materialDefines._renderId=-1),o.isReadyForSubMesh(e,h,s.useInstances)||(h.effect&&h.effect.getCompilationError()&&h.effect.allFallbacksProcessed()?l=h.effect.getCompilationError():(n=!1,setTimeout(checkReady,16)))}n&&(o.allowShaderHotSwapping=c,l&&i&&i(l),t&&t(o))}else o.isReady()?(o.allowShaderHotSwapping=c,t&&t(o)):setTimeout(checkReady,16);s.clipPlane&&(a.clipPlane=r)}};checkReady()},Material.prototype.forceCompilationAsync=function(e,t){var r=this;return new Promise((function(n,i){r.forceCompilation(e,(function(){n()}),t,(function(e){i(e)}))}))},Material.prototype.markAsDirty=function(e){this.getScene().blockMaterialDirtyMechanism||(Material._DirtyCallbackArray.length=0,e&Material.TextureDirtyFlag&&Material._DirtyCallbackArray.push(Material._TextureDirtyCallBack),e&Material.LightDirtyFlag&&Material._DirtyCallbackArray.push(Material._LightsDirtyCallBack),e&Material.FresnelDirtyFlag&&Material._DirtyCallbackArray.push(Material._FresnelDirtyCallBack),e&Material.AttributesDirtyFlag&&Material._DirtyCallbackArray.push(Material._AttributeDirtyCallBack),e&Material.MiscDirtyFlag&&Material._DirtyCallbackArray.push(Material._MiscDirtyCallBack),e&Material.PrePassDirtyFlag&&Material._DirtyCallbackArray.push(Material._PrePassDirtyCallBack),Material._DirtyCallbackArray.length&&this._markAllSubMeshesAsDirty(Material._RunDirtyCallBacks),this.getScene().resetCachedMaterial())},Material.prototype._markAllSubMeshesAsDirty=function(e){if(!this.getScene().blockMaterialDirtyMechanism)for(var t=this.getScene().meshes,r=0,n=t;r<n.length;r++){var i=n[r];if(i.subMeshes)for(var o=0,s=i.subMeshes;o<s.length;o++){var a=s[o];a.getMaterial()===this&&(a._materialDefines&&e(a._materialDefines))}}},Material.prototype._markScenePrePassDirty=function(){if(!this.getScene().blockMaterialDirtyMechanism){var e=this.getScene().enablePrePassRenderer();e&&e.markAsDirty()}},Material.prototype._markAllSubMeshesAsAllDirty=function(){this._markAllSubMeshesAsDirty(Material._AllDirtyCallBack)},Material.prototype._markAllSubMeshesAsImageProcessingDirty=function(){this._markAllSubMeshesAsDirty(Material._ImageProcessingDirtyCallBack)},Material.prototype._markAllSubMeshesAsTexturesDirty=function(){this._markAllSubMeshesAsDirty(Material._TextureDirtyCallBack)},Material.prototype._markAllSubMeshesAsFresnelDirty=function(){this._markAllSubMeshesAsDirty(Material._FresnelDirtyCallBack)},Material.prototype._markAllSubMeshesAsFresnelAndMiscDirty=function(){this._markAllSubMeshesAsDirty(Material._FresnelAndMiscDirtyCallBack)},Material.prototype._markAllSubMeshesAsLightsDirty=function(){this._markAllSubMeshesAsDirty(Material._LightsDirtyCallBack)},Material.prototype._markAllSubMeshesAsAttributesDirty=function(){this._markAllSubMeshesAsDirty(Material._AttributeDirtyCallBack)},Material.prototype._markAllSubMeshesAsMiscDirty=function(){this._markAllSubMeshesAsDirty(Material._MiscDirtyCallBack)},Material.prototype._markAllSubMeshesAsPrePassDirty=function(){this._markAllSubMeshesAsDirty(Material._MiscDirtyCallBack)},Material.prototype._markAllSubMeshesAsTexturesAndMiscDirty=function(){this._markAllSubMeshesAsDirty(Material._TextureAndMiscDirtyCallBack)},Material.prototype.setPrePassRenderer=function(e){return!1},Material.prototype.dispose=function(e,t,r){var n=this.getScene();if(n.stopAnimation(this),n.freeProcessedMaterials(),n.removeMaterial(this),!0!==r)if(this.meshMap)for(var i in this.meshMap){var o=this.meshMap[i];o&&(o.material=null,this.releaseVertexArrayObject(o,e))}else for(var s=n.meshes,a=0,u=s;a<u.length;a++){o=u[a];o.material!==this||o.sourceMesh||(o.material=null,this.releaseVertexArrayObject(o,e))}this._uniformBuffer.dispose(),e&&this._effect&&(this._storeEffectOnSubMeshes||this._effect.dispose(),this._effect=null),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this._onBindObservable&&this._onBindObservable.clear(),this._onUnBindObservable&&this._onUnBindObservable.clear(),this._onEffectCreatedObservable&&this._onEffectCreatedObservable.clear()},Material.prototype.releaseVertexArrayObject=function(e,t){if(e.geometry){var r=e.geometry;if(this._storeEffectOnSubMeshes)for(var n=0,i=e.subMeshes;n<i.length;n++){var o=i[n];r._releaseVertexArrayObject(o._materialEffect),t&&o._materialEffect&&o._materialEffect.dispose()}else r._releaseVertexArrayObject(this._effect)}},Material.prototype.serialize=function(){return i["SerializationHelper"].Serialize(this)},Material.Parse=function(e,t,r){if(e.customType){if("BABYLON.PBRMaterial"===e.customType&&e.overloadedAlbedo&&(e.customType="BABYLON.LegacyPBRMaterial",!BABYLON.LegacyPBRMaterial))return l["Logger"].Error("Your scene is trying to load a legacy version of the PBRMaterial, please, include it from the materials library."),null}else e.customType="BABYLON.StandardMaterial";var n=o["Tools"].Instantiate(e.customType);return n.Parse(e,t,r)},Material.TriangleFillMode=0,Material.WireFrameFillMode=1,Material.PointFillMode=2,Material.PointListDrawMode=3,Material.LineListDrawMode=4,Material.LineLoopDrawMode=5,Material.LineStripDrawMode=6,Material.TriangleStripDrawMode=7,Material.TriangleFanDrawMode=8,Material.ClockWiseSideOrientation=0,Material.CounterClockWiseSideOrientation=1,Material.TextureDirtyFlag=1,Material.LightDirtyFlag=2,Material.FresnelDirtyFlag=4,Material.AttributesDirtyFlag=8,Material.MiscDirtyFlag=16,Material.PrePassDirtyFlag=32,Material.AllDirtyFlag=63,Material.MATERIAL_OPAQUE=0,Material.MATERIAL_ALPHATEST=1,Material.MATERIAL_ALPHABLEND=2,Material.MATERIAL_ALPHATESTANDBLEND=3,Material.MATERIAL_NORMALBLENDMETHOD_WHITEOUT=0,Material.MATERIAL_NORMALBLENDMETHOD_RNM=1,Material._AllDirtyCallBack=function(e){return e.markAllAsDirty()},Material._ImageProcessingDirtyCallBack=function(e){return e.markAsImageProcessingDirty()},Material._TextureDirtyCallBack=function(e){return e.markAsTexturesDirty()},Material._FresnelDirtyCallBack=function(e){return e.markAsFresnelDirty()},Material._MiscDirtyCallBack=function(e){return e.markAsMiscDirty()},Material._PrePassDirtyCallBack=function(e){return e.markAsPrePassDirty()},Material._LightsDirtyCallBack=function(e){return e.markAsLightDirty()},Material._AttributeDirtyCallBack=function(e){return e.markAsAttributesDirty()},Material._FresnelAndMiscDirtyCallBack=function(e){Material._FresnelDirtyCallBack(e),Material._MiscDirtyCallBack(e)},Material._TextureAndMiscDirtyCallBack=function(e){Material._TextureDirtyCallBack(e),Material._MiscDirtyCallBack(e)},Material._DirtyCallbackArray=[],Material._RunDirtyCallBacks=function(e){for(var t=0,r=Material._DirtyCallbackArray;t<r.length;t++){var n=r[t];n(e)}},Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"id",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"uniqueId",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"name",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"checkReadyOnEveryCall",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"checkReadyOnlyOnce",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"state",void 0),Object(n["__decorate"])([Object(i["serialize"])("alpha")],Material.prototype,"_alpha",void 0),Object(n["__decorate"])([Object(i["serialize"])("backFaceCulling")],Material.prototype,"_backFaceCulling",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"sideOrientation",void 0),Object(n["__decorate"])([Object(i["serialize"])("alphaMode")],Material.prototype,"_alphaMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"_needDepthPrePass",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"disableDepthWrite",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"disableColorWrite",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"forceDepthWrite",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"depthFunction",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"separateCullingPass",void 0),Object(n["__decorate"])([Object(i["serialize"])("fogEnabled")],Material.prototype,"_fogEnabled",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"pointSize",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"zOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"pointsCloud",null),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"fillMode",null),Object(n["__decorate"])([Object(i["serialize"])()],Material.prototype,"transparencyMode",null),Material}()},"./node_modules/@babylonjs/core/Materials/materialDefines.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MaterialDefines",(function(){return n}));var n=function(){function MaterialDefines(){this._isDirty=!0,this._areLightsDirty=!0,this._areLightsDisposed=!1,this._areAttributesDirty=!0,this._areTexturesDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._arePrePassDirty=!0,this._areImageProcessingDirty=!0,this._normals=!1,this._uvs=!1,this._needNormals=!1,this._needUVs=!1}return Object.defineProperty(MaterialDefines.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0}),MaterialDefines.prototype.markAsProcessed=function(){this._isDirty=!1,this._areAttributesDirty=!1,this._areTexturesDirty=!1,this._areFresnelDirty=!1,this._areLightsDirty=!1,this._areLightsDisposed=!1,this._areMiscDirty=!1,this._arePrePassDirty=!1,this._areImageProcessingDirty=!1},MaterialDefines.prototype.markAsUnprocessed=function(){this._isDirty=!0},MaterialDefines.prototype.markAllAsDirty=function(){this._areTexturesDirty=!0,this._areAttributesDirty=!0,this._areLightsDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._areImageProcessingDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsImageProcessingDirty=function(){this._areImageProcessingDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsLightDirty=function(e){void 0===e&&(e=!1),this._areLightsDirty=!0,this._areLightsDisposed=this._areLightsDisposed||e,this._isDirty=!0},MaterialDefines.prototype.markAsAttributesDirty=function(){this._areAttributesDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsTexturesDirty=function(){this._areTexturesDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsFresnelDirty=function(){this._areFresnelDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsMiscDirty=function(){this._areMiscDirty=!0,this._isDirty=!0},MaterialDefines.prototype.markAsPrePassDirty=function(){this._arePrePassDirty=!0,this._isDirty=!0},MaterialDefines.prototype.rebuild=function(){this._keys=[];for(var e=0,t=Object.keys(this);e<t.length;e++){var r=t[e];"_"!==r[0]&&this._keys.push(r)}},MaterialDefines.prototype.isEqual=function(e){if(this._keys.length!==e._keys.length)return!1;for(var t=0;t<this._keys.length;t++){var r=this._keys[t];if(this[r]!==e[r])return!1}return!0},MaterialDefines.prototype.cloneTo=function(e){this._keys.length!==e._keys.length&&(e._keys=this._keys.slice(0));for(var t=0;t<this._keys.length;t++){var r=this._keys[t];e[r]=this[r]}},MaterialDefines.prototype.reset=function(){for(var e=0;e<this._keys.length;e++){var t=this._keys[e],r=typeof this[t];switch(r){case"number":this[t]=0;break;case"string":this[t]="";break;default:this[t]=!1;break}}},MaterialDefines.prototype.toString=function(){for(var e="",t=0;t<this._keys.length;t++){var r=this._keys[t],n=this[r],i=typeof n;switch(i){case"number":case"string":e+="#define "+r+" "+n+"\n";break;default:n&&(e+="#define "+r+"\n");break}}return e},MaterialDefines}()},"./node_modules/@babylonjs/core/Materials/materialFlags.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MaterialFlags",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Engines/engine.js"),i=function(){function MaterialFlags(){}return Object.defineProperty(MaterialFlags,"DiffuseTextureEnabled",{get:function(){return this._DiffuseTextureEnabled},set:function(e){this._DiffuseTextureEnabled!==e&&(this._DiffuseTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"DetailTextureEnabled",{get:function(){return this._DetailTextureEnabled},set:function(e){this._DetailTextureEnabled!==e&&(this._DetailTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"AmbientTextureEnabled",{get:function(){return this._AmbientTextureEnabled},set:function(e){this._AmbientTextureEnabled!==e&&(this._AmbientTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"OpacityTextureEnabled",{get:function(){return this._OpacityTextureEnabled},set:function(e){this._OpacityTextureEnabled!==e&&(this._OpacityTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ReflectionTextureEnabled",{get:function(){return this._ReflectionTextureEnabled},set:function(e){this._ReflectionTextureEnabled!==e&&(this._ReflectionTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"EmissiveTextureEnabled",{get:function(){return this._EmissiveTextureEnabled},set:function(e){this._EmissiveTextureEnabled!==e&&(this._EmissiveTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"SpecularTextureEnabled",{get:function(){return this._SpecularTextureEnabled},set:function(e){this._SpecularTextureEnabled!==e&&(this._SpecularTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"BumpTextureEnabled",{get:function(){return this._BumpTextureEnabled},set:function(e){this._BumpTextureEnabled!==e&&(this._BumpTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"LightmapTextureEnabled",{get:function(){return this._LightmapTextureEnabled},set:function(e){this._LightmapTextureEnabled!==e&&(this._LightmapTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"RefractionTextureEnabled",{get:function(){return this._RefractionTextureEnabled},set:function(e){this._RefractionTextureEnabled!==e&&(this._RefractionTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ColorGradingTextureEnabled",{get:function(){return this._ColorGradingTextureEnabled},set:function(e){this._ColorGradingTextureEnabled!==e&&(this._ColorGradingTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"FresnelEnabled",{get:function(){return this._FresnelEnabled},set:function(e){this._FresnelEnabled!==e&&(this._FresnelEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(4))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ClearCoatTextureEnabled",{get:function(){return this._ClearCoatTextureEnabled},set:function(e){this._ClearCoatTextureEnabled!==e&&(this._ClearCoatTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ClearCoatBumpTextureEnabled",{get:function(){return this._ClearCoatBumpTextureEnabled},set:function(e){this._ClearCoatBumpTextureEnabled!==e&&(this._ClearCoatBumpTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ClearCoatTintTextureEnabled",{get:function(){return this._ClearCoatTintTextureEnabled},set:function(e){this._ClearCoatTintTextureEnabled!==e&&(this._ClearCoatTintTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"SheenTextureEnabled",{get:function(){return this._SheenTextureEnabled},set:function(e){this._SheenTextureEnabled!==e&&(this._SheenTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"AnisotropicTextureEnabled",{get:function(){return this._AnisotropicTextureEnabled},set:function(e){this._AnisotropicTextureEnabled!==e&&(this._AnisotropicTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(MaterialFlags,"ThicknessTextureEnabled",{get:function(){return this._ThicknessTextureEnabled},set:function(e){this._ThicknessTextureEnabled!==e&&(this._ThicknessTextureEnabled=e,n["Engine"].MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),MaterialFlags._DiffuseTextureEnabled=!0,MaterialFlags._DetailTextureEnabled=!0,MaterialFlags._AmbientTextureEnabled=!0,MaterialFlags._OpacityTextureEnabled=!0,MaterialFlags._ReflectionTextureEnabled=!0,MaterialFlags._EmissiveTextureEnabled=!0,MaterialFlags._SpecularTextureEnabled=!0,MaterialFlags._BumpTextureEnabled=!0,MaterialFlags._LightmapTextureEnabled=!0,MaterialFlags._RefractionTextureEnabled=!0,MaterialFlags._ColorGradingTextureEnabled=!0,MaterialFlags._FresnelEnabled=!0,MaterialFlags._ClearCoatTextureEnabled=!0,MaterialFlags._ClearCoatBumpTextureEnabled=!0,MaterialFlags._ClearCoatTintTextureEnabled=!0,MaterialFlags._SheenTextureEnabled=!0,MaterialFlags._AnisotropicTextureEnabled=!0,MaterialFlags._ThicknessTextureEnabled=!0,MaterialFlags}()},"./node_modules/@babylonjs/core/Materials/materialHelper.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MaterialHelper",(function(){return l}));var n=r("./node_modules/@babylonjs/core/Misc/logger.js"),i=r("./node_modules/@babylonjs/core/scene.js"),o=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),s=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),a=r("./node_modules/@babylonjs/core/Lights/light.js"),u=r("./node_modules/@babylonjs/core/Maths/math.color.js"),c=r("./node_modules/@babylonjs/core/Materials/thinMaterialHelper.js"),l=function(){function MaterialHelper(){}return MaterialHelper.BindEyePosition=function(e,t,r){if(void 0===r&&(r="vEyePosition"),t._forcedViewPosition)e.setVector3(r,t._forcedViewPosition);else{var n=t.activeCamera.globalPosition;n||(n=t.activeCamera.devicePosition),e.setVector3(r,t._mirroredCameraPosition?t._mirroredCameraPosition:n)}},MaterialHelper.PrepareDefinesForMergedUV=function(e,t,r){t._needUVs=!0,t[r]=!0,e.getTextureMatrix().isIdentityAs3x2()?(t[r+"DIRECTUV"]=e.coordinatesIndex+1,0===e.coordinatesIndex?t["MAINUV1"]=!0:t["MAINUV2"]=!0):t[r+"DIRECTUV"]=0},MaterialHelper.BindTextureMatrix=function(e,t,r){var n=e.getTextureMatrix();t.updateMatrix(r+"Matrix",n)},MaterialHelper.GetFogState=function(e,t){return t.fogEnabled&&e.applyFog&&t.fogMode!==i["Scene"].FOGMODE_NONE},MaterialHelper.PrepareDefinesForMisc=function(e,t,r,n,i,o,s){s._areMiscDirty&&(s["LOGARITHMICDEPTH"]=r,s["POINTSIZE"]=n,s["FOG"]=i&&this.GetFogState(e,t),s["NONUNIFORMSCALING"]=e.nonUniformScaling,s["ALPHATEST"]=o)},MaterialHelper.PrepareDefinesForFrameBoundValues=function(e,t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!1);var s=!1,a=!1,u=!1,c=!1,l=!1,d=!1,h=!1;a=null==i?void 0!==e.clipPlane&&null!==e.clipPlane:i,u=null==i?void 0!==e.clipPlane2&&null!==e.clipPlane2:i,c=null==i?void 0!==e.clipPlane3&&null!==e.clipPlane3:i,l=null==i?void 0!==e.clipPlane4&&null!==e.clipPlane4:i,d=null==i?void 0!==e.clipPlane5&&null!==e.clipPlane5:i,h=null==i?void 0!==e.clipPlane6&&null!==e.clipPlane6:i,r["CLIPPLANE"]!==a&&(r["CLIPPLANE"]=a,s=!0),r["CLIPPLANE2"]!==u&&(r["CLIPPLANE2"]=u,s=!0),r["CLIPPLANE3"]!==c&&(r["CLIPPLANE3"]=c,s=!0),r["CLIPPLANE4"]!==l&&(r["CLIPPLANE4"]=l,s=!0),r["CLIPPLANE5"]!==d&&(r["CLIPPLANE5"]=d,s=!0),r["CLIPPLANE6"]!==h&&(r["CLIPPLANE6"]=h,s=!0),r["DEPTHPREPASS"]!==!t.getColorWrite()&&(r["DEPTHPREPASS"]=!r["DEPTHPREPASS"],s=!0),r["INSTANCES"]!==n&&(r["INSTANCES"]=n,s=!0),r["THIN_INSTANCES"]!==o&&(r["THIN_INSTANCES"]=o,s=!0),s&&r.markAsUnprocessed()},MaterialHelper.PrepareDefinesForBones=function(e,t){if(e.useBones&&e.computeBonesUsingShaders&&e.skeleton){t["NUM_BONE_INFLUENCERS"]=e.numBoneInfluencers;var r=void 0!==t["BONETEXTURE"];if(e.skeleton.isUsingTextureForMatrices&&r)t["BONETEXTURE"]=!0;else{t["BonesPerMesh"]=e.skeleton.bones.length+1,t["BONETEXTURE"]=!r&&void 0;var n=e.getScene().prePassRenderer;if(n&&n.enabled){var i=-1===n.excludedSkinnedMesh.indexOf(e);t["BONES_VELOCITY_ENABLED"]=i}}}else t["NUM_BONE_INFLUENCERS"]=0,t["BonesPerMesh"]=0},MaterialHelper.PrepareDefinesForMorphTargets=function(e,t){var r=e.morphTargetManager;r?(t["MORPHTARGETS_UV"]=r.supportsUVs&&t["UV1"],t["MORPHTARGETS_TANGENT"]=r.supportsTangents&&t["TANGENT"],t["MORPHTARGETS_NORMAL"]=r.supportsNormals&&t["NORMAL"],t["MORPHTARGETS"]=r.numInfluencers>0,t["NUM_MORPH_INFLUENCERS"]=r.numInfluencers):(t["MORPHTARGETS_UV"]=!1,t["MORPHTARGETS_TANGENT"]=!1,t["MORPHTARGETS_NORMAL"]=!1,t["MORPHTARGETS"]=!1,t["NUM_MORPH_INFLUENCERS"]=0)},MaterialHelper.PrepareDefinesForAttributes=function(e,t,r,n,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!0),!t._areAttributesDirty&&t._needNormals===t._normals&&t._needUVs===t._uvs)return!1;if(t._normals=t._needNormals,t._uvs=t._needUVs,t["NORMAL"]=t._needNormals&&e.isVerticesDataPresent(s["VertexBuffer"].NormalKind),t._needNormals&&e.isVerticesDataPresent(s["VertexBuffer"].TangentKind)&&(t["TANGENT"]=!0),t._needUVs?(t["UV1"]=e.isVerticesDataPresent(s["VertexBuffer"].UVKind),t["UV2"]=e.isVerticesDataPresent(s["VertexBuffer"].UV2Kind)):(t["UV1"]=!1,t["UV2"]=!1),r){var a=e.useVertexColors&&e.isVerticesDataPresent(s["VertexBuffer"].ColorKind);t["VERTEXCOLOR"]=a,t["VERTEXALPHA"]=e.hasVertexAlpha&&a&&o}return n&&this.PrepareDefinesForBones(e,t),i&&this.PrepareDefinesForMorphTargets(e,t),!0},MaterialHelper.PrepareDefinesForMultiview=function(e,t){if(e.activeCamera){var r=t.MULTIVIEW;t.MULTIVIEW=null!==e.activeCamera.outputRenderTarget&&e.activeCamera.outputRenderTarget.getViewCount()>1,t.MULTIVIEW!=r&&t.markAsUnprocessed()}},MaterialHelper.PrepareDefinesForPrePass=function(e,t,r){var n=t.PREPASS;if(t._arePrePassDirty){var i=[{type:1,define:"PREPASS_POSITION",index:"PREPASS_POSITION_INDEX"},{type:2,define:"PREPASS_VELOCITY",index:"PREPASS_VELOCITY_INDEX"},{type:3,define:"PREPASS_REFLECTIVITY",index:"PREPASS_REFLECTIVITY_INDEX"},{type:0,define:"PREPASS_IRRADIANCE",index:"PREPASS_IRRADIANCE_INDEX"},{type:6,define:"PREPASS_ALBEDO",index:"PREPASS_ALBEDO_INDEX"},{type:5,define:"PREPASS_DEPTHNORMAL",index:"PREPASS_DEPTHNORMAL_INDEX"}];if(e.prePassRenderer&&e.prePassRenderer.enabled&&r){t.PREPASS=!0,t.SCENE_MRT_COUNT=e.prePassRenderer.mrtCount;for(var o=0;o<i.length;o++){var s=e.prePassRenderer.getIndex(i[o].type);-1!==s?(t[i[o].define]=!0,t[i[o].index]=s):t[i[o].define]=!1}}else{t.PREPASS=!1;for(o=0;o<i.length;o++)t[i[o].define]=!1}t.PREPASS!=n&&(t.markAsUnprocessed(),t.markAsImageProcessingDirty())}},MaterialHelper.PrepareDefinesForLight=function(e,t,r,n,i,o,s){switch(s.needNormals=!0,void 0===i["LIGHT"+n]&&(s.needRebuild=!0),i["LIGHT"+n]=!0,i["SPOTLIGHT"+n]=!1,i["HEMILIGHT"+n]=!1,i["POINTLIGHT"+n]=!1,i["DIRLIGHT"+n]=!1,r.prepareLightSpecificDefines(i,n),i["LIGHT_FALLOFF_PHYSICAL"+n]=!1,i["LIGHT_FALLOFF_GLTF"+n]=!1,i["LIGHT_FALLOFF_STANDARD"+n]=!1,r.falloffType){case a["Light"].FALLOFF_GLTF:i["LIGHT_FALLOFF_GLTF"+n]=!0;break;case a["Light"].FALLOFF_PHYSICAL:i["LIGHT_FALLOFF_PHYSICAL"+n]=!0;break;case a["Light"].FALLOFF_STANDARD:i["LIGHT_FALLOFF_STANDARD"+n]=!0;break}if(o&&!r.specular.equalsFloats(0,0,0)&&(s.specularEnabled=!0),i["SHADOW"+n]=!1,i["SHADOWCSM"+n]=!1,i["SHADOWCSMDEBUG"+n]=!1,i["SHADOWCSMNUM_CASCADES"+n]=!1,i["SHADOWCSMUSESHADOWMAXZ"+n]=!1,i["SHADOWCSMNOBLEND"+n]=!1,i["SHADOWCSM_RIGHTHANDED"+n]=!1,i["SHADOWPCF"+n]=!1,i["SHADOWPCSS"+n]=!1,i["SHADOWPOISSON"+n]=!1,i["SHADOWESM"+n]=!1,i["SHADOWCLOSEESM"+n]=!1,i["SHADOWCUBE"+n]=!1,i["SHADOWLOWQUALITY"+n]=!1,i["SHADOWMEDIUMQUALITY"+n]=!1,t&&t.receiveShadows&&e.shadowsEnabled&&r.shadowEnabled){var u=r.getShadowGenerator();if(u){var c=u.getShadowMap();c&&c.renderList&&c.renderList.length>0&&(s.shadowEnabled=!0,u.prepareDefines(i,n))}}r.lightmapMode!=a["Light"].LIGHTMAP_DEFAULT?(s.lightmapMode=!0,i["LIGHTMAPEXCLUDED"+n]=!0,i["LIGHTMAPNOSPECULAR"+n]=r.lightmapMode==a["Light"].LIGHTMAP_SHADOWSONLY):(i["LIGHTMAPEXCLUDED"+n]=!1,i["LIGHTMAPNOSPECULAR"+n]=!1)},MaterialHelper.PrepareDefinesForLights=function(e,t,r,n,i,o){if(void 0===i&&(i=4),void 0===o&&(o=!1),!r._areLightsDirty)return r._needNormals;var s=0,a={needNormals:!1,needRebuild:!1,lightmapMode:!1,shadowEnabled:!1,specularEnabled:!1};if(e.lightsEnabled&&!o)for(var u=0,c=t.lightSources;u<c.length;u++){var l=c[u];if(this.PrepareDefinesForLight(e,t,l,s,r,n,a),s++,s===i)break}r["SPECULARTERM"]=a.specularEnabled,r["SHADOWS"]=a.shadowEnabled;for(var d=s;d<i;d++)void 0!==r["LIGHT"+d]&&(r["LIGHT"+d]=!1,r["HEMILIGHT"+d]=!1,r["POINTLIGHT"+d]=!1,r["DIRLIGHT"+d]=!1,r["SPOTLIGHT"+d]=!1,r["SHADOW"+d]=!1,r["SHADOWCSM"+d]=!1,r["SHADOWCSMDEBUG"+d]=!1,r["SHADOWCSMNUM_CASCADES"+d]=!1,r["SHADOWCSMUSESHADOWMAXZ"+d]=!1,r["SHADOWCSMNOBLEND"+d]=!1,r["SHADOWCSM_RIGHTHANDED"+d]=!1,r["SHADOWPCF"+d]=!1,r["SHADOWPCSS"+d]=!1,r["SHADOWPOISSON"+d]=!1,r["SHADOWESM"+d]=!1,r["SHADOWCLOSEESM"+d]=!1,r["SHADOWCUBE"+d]=!1,r["SHADOWLOWQUALITY"+d]=!1,r["SHADOWMEDIUMQUALITY"+d]=!1);var h=e.getEngine().getCaps();return void 0===r["SHADOWFLOAT"]&&(a.needRebuild=!0),r["SHADOWFLOAT"]=a.shadowEnabled&&(h.textureFloatRender&&h.textureFloatLinearFiltering||h.textureHalfFloatRender&&h.textureHalfFloatLinearFiltering),r["LIGHTMAPEXCLUDED"]=a.lightmapMode,a.needRebuild&&r.rebuild(),a.needNormals},MaterialHelper.PrepareUniformsAndSamplersForLight=function(e,t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!1),i&&i.push("Light"+e),o||(t.push("vLightData"+e,"vLightDiffuse"+e,"vLightSpecular"+e,"vLightDirection"+e,"vLightFalloff"+e,"vLightGround"+e,"lightMatrix"+e,"shadowsInfo"+e,"depthValues"+e),r.push("shadowSampler"+e),r.push("depthSampler"+e),t.push("viewFrustumZ"+e,"cascadeBlendFactor"+e,"lightSizeUVCorrection"+e,"depthCorrection"+e,"penumbraDarkness"+e,"frustumLengths"+e),n&&(r.push("projectionLightSampler"+e),t.push("textureProjectionMatrix"+e)))},MaterialHelper.PrepareUniformsAndSamplersList=function(e,t,r,n){var i;void 0===n&&(n=4);var o=null;if(e.uniformsNames){var s=e;i=s.uniformsNames,o=s.uniformBuffersNames,t=s.samplers,r=s.defines,n=s.maxSimultaneousLights||0}else i=e,t||(t=[]);for(var a=0;a<n;a++){if(!r["LIGHT"+a])break;this.PrepareUniformsAndSamplersForLight(a,i,t,r["PROJECTEDLIGHTTEXTURE"+a],o)}r["NUM_MORPH_INFLUENCERS"]&&i.push("morphTargetInfluences")},MaterialHelper.HandleFallbacksForShadows=function(e,t,r,n){void 0===r&&(r=4),void 0===n&&(n=0);for(var i=0,o=0;o<r;o++){if(!e["LIGHT"+o])break;o>0&&(i=n+o,t.addFallback(i,"LIGHT"+o)),e["SHADOWS"]||(e["SHADOW"+o]&&t.addFallback(n,"SHADOW"+o),e["SHADOWPCF"+o]&&t.addFallback(n,"SHADOWPCF"+o),e["SHADOWPCSS"+o]&&t.addFallback(n,"SHADOWPCSS"+o),e["SHADOWPOISSON"+o]&&t.addFallback(n,"SHADOWPOISSON"+o),e["SHADOWESM"+o]&&t.addFallback(n,"SHADOWESM"+o),e["SHADOWCLOSEESM"+o]&&t.addFallback(n,"SHADOWCLOSEESM"+o))}return i++},MaterialHelper.PrepareAttributesForMorphTargetsInfluencers=function(e,t,r){this._TmpMorphInfluencers.NUM_MORPH_INFLUENCERS=r,this.PrepareAttributesForMorphTargets(e,t,this._TmpMorphInfluencers)},MaterialHelper.PrepareAttributesForMorphTargets=function(e,t,r){var i=r["NUM_MORPH_INFLUENCERS"];if(i>0&&o["EngineStore"].LastCreatedEngine)for(var a=o["EngineStore"].LastCreatedEngine.getCaps().maxVertexAttribs,u=t.morphTargetManager,c=u&&u.supportsNormals&&r["NORMAL"],l=u&&u.supportsTangents&&r["TANGENT"],d=u&&u.supportsUVs&&r["UV1"],h=0;h<i;h++)e.push(s["VertexBuffer"].PositionKind+h),c&&e.push(s["VertexBuffer"].NormalKind+h),l&&e.push(s["VertexBuffer"].TangentKind+h),d&&e.push(s["VertexBuffer"].UVKind+"_"+h),e.length>a&&n["Logger"].Error("Cannot add more vertex attributes for mesh "+t.name)},MaterialHelper.PrepareAttributesForBones=function(e,t,r,n){r["NUM_BONE_INFLUENCERS"]>0&&(n.addCPUSkinningFallback(0,t),e.push(s["VertexBuffer"].MatricesIndicesKind),e.push(s["VertexBuffer"].MatricesWeightsKind),r["NUM_BONE_INFLUENCERS"]>4&&(e.push(s["VertexBuffer"].MatricesIndicesExtraKind),e.push(s["VertexBuffer"].MatricesWeightsExtraKind)))},MaterialHelper.PrepareAttributesForInstances=function(e,t){(t["INSTANCES"]||t["THIN_INSTANCES"])&&this.PushAttributesForInstances(e)},MaterialHelper.PushAttributesForInstances=function(e){e.push("world0"),e.push("world1"),e.push("world2"),e.push("world3")},MaterialHelper.BindLightProperties=function(e,t,r){e.transferToEffect(t,r+"")},MaterialHelper.BindLight=function(e,t,r,n,i,o){void 0===o&&(o=!1),e._bindLight(t,r,n,i,o)},MaterialHelper.BindLights=function(e,t,r,n,i,o){void 0===i&&(i=4),void 0===o&&(o=!1);for(var s=Math.min(t.lightSources.length,i),a=0;a<s;a++){var u=t.lightSources[a];this.BindLight(u,a,e,r,"boolean"===typeof n?n:n["SPECULARTERM"],o)}},MaterialHelper.BindFogParameters=function(e,t,r,n){void 0===n&&(n=!1),e.fogEnabled&&t.applyFog&&e.fogMode!==i["Scene"].FOGMODE_NONE&&(r.setFloat4("vFogInfos",e.fogMode,e.fogStart,e.fogEnd,e.fogDensity),n?(e.fogColor.toLinearSpaceToRef(this._tempFogColor),r.setColor3("vFogColor",this._tempFogColor)):r.setColor3("vFogColor",e.fogColor))},MaterialHelper.BindBonesParameters=function(e,t,r){if(t&&e&&(e.computeBonesUsingShaders&&t._bonesComputationForcedToCPU&&(e.computeBonesUsingShaders=!1),e.useBones&&e.computeBonesUsingShaders&&e.skeleton)){var n=e.skeleton;if(n.isUsingTextureForMatrices&&t.getUniformIndex("boneTextureWidth")>-1){var i=n.getTransformMatrixTexture(e);t.setTexture("boneSampler",i),t.setFloat("boneTextureWidth",4*(n.bones.length+1))}else{var o=n.getTransformMatrices(e);o&&(t.setMatrices("mBones",o),r&&e.getScene().prePassRenderer&&e.getScene().prePassRenderer.getIndex(2)&&(r.previousBones[e.uniqueId]&&t.setMatrices("mPreviousBones",r.previousBones[e.uniqueId]),MaterialHelper._CopyBonesTransformationMatrices(o,r.previousBones[e.uniqueId])))}}},MaterialHelper._CopyBonesTransformationMatrices=function(e,t){return t.set(e),t},MaterialHelper.BindMorphTargetParameters=function(e,t){var r=e.morphTargetManager;e&&r&&t.setFloatArray("morphTargetInfluences",r.influences)},MaterialHelper.BindLogDepth=function(e,t,r){e["LOGARITHMICDEPTH"]&&t.setFloat("logarithmicDepthConstant",2/(Math.log(r.activeCamera.maxZ+1)/Math.LN2))},MaterialHelper.BindClipPlane=function(e,t){c["ThinMaterialHelper"].BindClipPlane(e,t)},MaterialHelper._TmpMorphInfluencers={NUM_MORPH_INFLUENCERS:0},MaterialHelper._tempFogColor=u["Color3"].Black(),MaterialHelper}()},"./node_modules/@babylonjs/core/Materials/multiMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MultiMaterial",(function(){return a}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Materials/material.js"),o=r("./node_modules/@babylonjs/core/Misc/tags.js"),s=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),a=function(e){function MultiMaterial(t,r){var n=e.call(this,t,r,!0)||this;return r.multiMaterials.push(n),n.subMaterials=new Array,n._storeEffectOnSubMeshes=!0,n}return Object(n["__extends"])(MultiMaterial,e),Object.defineProperty(MultiMaterial.prototype,"subMaterials",{get:function(){return this._subMaterials},set:function(e){this._subMaterials=e,this._hookArray(e)},enumerable:!1,configurable:!0}),MultiMaterial.prototype.getChildren=function(){return this.subMaterials},MultiMaterial.prototype._hookArray=function(e){var t=this,r=e.push;e.push=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(e,n);return t._markAllSubMeshesAsTexturesDirty(),o};var n=e.splice;e.splice=function(r,i){var o=n.apply(e,[r,i]);return t._markAllSubMeshesAsTexturesDirty(),o}},MultiMaterial.prototype.getSubMaterial=function(e){return e<0||e>=this.subMaterials.length?this.getScene().defaultMaterial:this.subMaterials[e]},MultiMaterial.prototype.getActiveTextures=function(){var t;return(t=e.prototype.getActiveTextures.call(this)).concat.apply(t,this.subMaterials.map((function(e){return e?e.getActiveTextures():[]})))},MultiMaterial.prototype.hasTexture=function(t){var r;if(e.prototype.hasTexture.call(this,t))return!0;for(var n=0;n<this.subMaterials.length;n++)if(null===(r=this.subMaterials[n])||void 0===r?void 0:r.hasTexture(t))return!0;return!1},MultiMaterial.prototype.getClassName=function(){return"MultiMaterial"},MultiMaterial.prototype.isReadyForSubMesh=function(e,t,r){for(var n=0;n<this.subMaterials.length;n++){var i=this.subMaterials[n];if(i){if(i._storeEffectOnSubMeshes){if(!i.isReadyForSubMesh(e,t,r))return!1;continue}if(!i.isReady(e))return!1}}return!0},MultiMaterial.prototype.clone=function(e,t){for(var r=new MultiMaterial(e,this.getScene()),n=0;n<this.subMaterials.length;n++){var i=null,o=this.subMaterials[n];i=t&&o?o.clone(e+"-"+o.name):this.subMaterials[n],r.subMaterials.push(i)}return r},MultiMaterial.prototype.serialize=function(){var e={};e.name=this.name,e.id=this.id,o["Tags"]&&(e.tags=o["Tags"].GetTags(this)),e.materials=[];for(var t=0;t<this.subMaterials.length;t++){var r=this.subMaterials[t];r?e.materials.push(r.id):e.materials.push(null)}return e},MultiMaterial.prototype.dispose=function(t,r,n){var i=this.getScene();if(i){if(n)for(var o=0;o<this.subMaterials.length;o++){var s=this.subMaterials[o];s&&s.dispose(t,r)}o=i.multiMaterials.indexOf(this);o>=0&&i.multiMaterials.splice(o,1),e.prototype.dispose.call(this,t,r)}},MultiMaterial.ParseMultiMaterial=function(e,t){var r=new MultiMaterial(e.name,t);r.id=e.id,o["Tags"]&&o["Tags"].AddTagsTo(r,e.tags);for(var n=0;n<e.materials.length;n++){var i=e.materials[n];i?r.subMaterials.push(t.getLastMaterialByID(i)):r.subMaterials.push(null)}return r},MultiMaterial}(i["Material"]);s["_TypeStore"].RegisteredTypes["BABYLON.MultiMaterial"]=a},"./node_modules/@babylonjs/core/Materials/prePassConfiguration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PrePassConfiguration",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=function(){function PrePassConfiguration(){this.previousWorldMatrices={},this.previousBones={}}return PrePassConfiguration.AddUniforms=function(e){e.push("previousWorld","previousViewProjection")},PrePassConfiguration.AddSamplers=function(e){},PrePassConfiguration.prototype.bindForSubMesh=function(e,t,r,i,o){t.prePassRenderer&&t.prePassRenderer.enabled&&-1!==t.prePassRenderer.getIndex(2)&&(this.previousWorldMatrices[r.uniqueId]||(this.previousWorldMatrices[r.uniqueId]=n["Matrix"].Identity()),this.previousViewProjection||(this.previousViewProjection=t.getTransformMatrix()),e.setMatrix("previousWorld",this.previousWorldMatrices[r.uniqueId]),e.setMatrix("previousViewProjection",this.previousViewProjection),this.previousWorldMatrices[r.uniqueId]=i.clone(),this.previousViewProjection=t.getTransformMatrix().clone())},PrePassConfiguration}()},"./node_modules/@babylonjs/core/Materials/pushMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PushMaterial",(function(){return s}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Materials/material.js"),s=function(e){function PushMaterial(t,r){var n=e.call(this,t,r)||this;return n._normalMatrix=new i["Matrix"],n._storeEffectOnSubMeshes=!0,n}return Object(n["__extends"])(PushMaterial,e),PushMaterial.prototype.getEffect=function(){return this._activeEffect},PushMaterial.prototype.isReady=function(e,t){return!!e&&(!e.subMeshes||0===e.subMeshes.length||this.isReadyForSubMesh(e,e.subMeshes[0],t))},PushMaterial.prototype._isReadyForSubMesh=function(e){var t=e._materialDefines;return!(this.checkReadyOnEveryCall||!e.effect||!t||t._renderId!==this.getScene().getRenderId())},PushMaterial.prototype.bindOnlyWorldMatrix=function(e){this._activeEffect.setMatrix("world",e)},PushMaterial.prototype.bindOnlyNormalMatrix=function(e){this._activeEffect.setMatrix("normalMatrix",e)},PushMaterial.prototype.bind=function(e,t){t&&this.bindForSubMesh(e,t,t.subMeshes[0])},PushMaterial.prototype._afterBind=function(t,r){void 0===r&&(r=null),e.prototype._afterBind.call(this,t),this.getScene()._cachedEffect=r},PushMaterial.prototype._mustRebind=function(e,t,r){return void 0===r&&(r=1),e.isCachedMaterialInvalid(this,t,r)},PushMaterial}(o["Material"])},"./node_modules/@babylonjs/core/Materials/shaderMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderMaterial",(function(){return _}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),a=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),u=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),c=r("./node_modules/@babylonjs/core/Materials/material.js"),l=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),d=r("./node_modules/@babylonjs/core/Maths/math.color.js"),h=r("./node_modules/@babylonjs/core/Materials/effectFallbacks.js"),f=r("./node_modules/@babylonjs/core/Misc/webRequest.js"),p=r("./node_modules/@babylonjs/core/Engines/engine.js"),m={effect:null,subMesh:null},_=function(e){function ShaderMaterial(t,r,i,s){void 0===s&&(s={});var a=e.call(this,t,r)||this;return a._textures={},a._textureArrays={},a._floats={},a._ints={},a._floatsArrays={},a._colors3={},a._colors3Arrays={},a._colors4={},a._colors4Arrays={},a._vectors2={},a._vectors3={},a._vectors4={},a._matrices={},a._matrixArrays={},a._matrices3x3={},a._matrices2x2={},a._vectors2Arrays={},a._vectors3Arrays={},a._vectors4Arrays={},a._cachedWorldViewMatrix=new o["Matrix"],a._cachedWorldViewProjectionMatrix=new o["Matrix"],a._multiview=!1,a._shaderPath=i,a._options=Object(n["__assign"])({needAlphaBlending:!1,needAlphaTesting:!1,attributes:["position","normal","uv"],uniforms:["worldViewProjection"],uniformBuffers:[],samplers:[],defines:[]},s),a}return Object(n["__extends"])(ShaderMaterial,e),Object.defineProperty(ShaderMaterial.prototype,"shaderPath",{get:function(){return this._shaderPath},set:function(e){this._shaderPath=e},enumerable:!1,configurable:!0}),Object.defineProperty(ShaderMaterial.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),ShaderMaterial.prototype.getClassName=function(){return"ShaderMaterial"},ShaderMaterial.prototype.needAlphaBlending=function(){return this.alpha<1||this._options.needAlphaBlending},ShaderMaterial.prototype.needAlphaTesting=function(){return this._options.needAlphaTesting},ShaderMaterial.prototype._checkUniform=function(e){-1===this._options.uniforms.indexOf(e)&&this._options.uniforms.push(e)},ShaderMaterial.prototype.setTexture=function(e,t){return-1===this._options.samplers.indexOf(e)&&this._options.samplers.push(e),this._textures[e]=t,this},ShaderMaterial.prototype.setTextureArray=function(e,t){return-1===this._options.samplers.indexOf(e)&&this._options.samplers.push(e),this._checkUniform(e),this._textureArrays[e]=t,this},ShaderMaterial.prototype.setFloat=function(e,t){return this._checkUniform(e),this._floats[e]=t,this},ShaderMaterial.prototype.setInt=function(e,t){return this._checkUniform(e),this._ints[e]=t,this},ShaderMaterial.prototype.setFloats=function(e,t){return this._checkUniform(e),this._floatsArrays[e]=t,this},ShaderMaterial.prototype.setColor3=function(e,t){return this._checkUniform(e),this._colors3[e]=t,this},ShaderMaterial.prototype.setColor3Array=function(e,t){return this._checkUniform(e),this._colors3Arrays[e]=t.reduce((function(e,t){return t.toArray(e,e.length),e}),[]),this},ShaderMaterial.prototype.setColor4=function(e,t){return this._checkUniform(e),this._colors4[e]=t,this},ShaderMaterial.prototype.setColor4Array=function(e,t){return this._checkUniform(e),this._colors4Arrays[e]=t.reduce((function(e,t){return t.toArray(e,e.length),e}),[]),this},ShaderMaterial.prototype.setVector2=function(e,t){return this._checkUniform(e),this._vectors2[e]=t,this},ShaderMaterial.prototype.setVector3=function(e,t){return this._checkUniform(e),this._vectors3[e]=t,this},ShaderMaterial.prototype.setVector4=function(e,t){return this._checkUniform(e),this._vectors4[e]=t,this},ShaderMaterial.prototype.setMatrix=function(e,t){return this._checkUniform(e),this._matrices[e]=t,this},ShaderMaterial.prototype.setMatrices=function(e,t){this._checkUniform(e);for(var r=new Float32Array(16*t.length),n=0;n<t.length;n++){var i=t[n];i.copyToArray(r,16*n)}return this._matrixArrays[e]=r,this},ShaderMaterial.prototype.setMatrix3x3=function(e,t){return this._checkUniform(e),this._matrices3x3[e]=t,this},ShaderMaterial.prototype.setMatrix2x2=function(e,t){return this._checkUniform(e),this._matrices2x2[e]=t,this},ShaderMaterial.prototype.setArray2=function(e,t){return this._checkUniform(e),this._vectors2Arrays[e]=t,this},ShaderMaterial.prototype.setArray3=function(e,t){return this._checkUniform(e),this._vectors3Arrays[e]=t,this},ShaderMaterial.prototype.setArray4=function(e,t){return this._checkUniform(e),this._vectors4Arrays[e]=t,this},ShaderMaterial.prototype._checkCache=function(e,t){return!e||(!this._effect||-1!==this._effect.defines.indexOf("#define INSTANCES")===t)},ShaderMaterial.prototype.isReadyForSubMesh=function(e,t,r){return this.isReady(e,r)},ShaderMaterial.prototype.isReady=function(e,t){var r,n;if(this._effect&&this.isFrozen&&this._effect._wasPreviouslyReady)return!0;var i=this.getScene(),o=i.getEngine();if(!this.checkReadyOnEveryCall&&this._renderId===i.getRenderId()&&this._checkCache(e,t))return!0;var a=[],c=[],l=new h["EffectFallbacks"];o.getCaps().multiview&&i.activeCamera&&i.activeCamera.outputRenderTarget&&i.activeCamera.outputRenderTarget.getViewCount()>1&&(this._multiview=!0,a.push("#define MULTIVIEW"),-1!==this._options.uniforms.indexOf("viewProjection")&&-1===this._options.uniforms.push("viewProjectionR")&&this._options.uniforms.push("viewProjectionR"));for(var d=0;d<this._options.defines.length;d++)a.push(this._options.defines[d]);for(d=0;d<this._options.attributes.length;d++)c.push(this._options.attributes[d]);e&&e.isVerticesDataPresent(s["VertexBuffer"].ColorKind)&&(c.push(s["VertexBuffer"].ColorKind),a.push("#define VERTEXCOLOR")),t&&(a.push("#define INSTANCES"),u["MaterialHelper"].PushAttributesForInstances(c),(null===e||void 0===e?void 0:e.hasThinInstances)&&a.push("#define THIN_INSTANCES"));var f=0;if(e&&e.useBones&&e.computeBonesUsingShaders&&e.skeleton){c.push(s["VertexBuffer"].MatricesIndicesKind),c.push(s["VertexBuffer"].MatricesWeightsKind),e.numBoneInfluencers>4&&(c.push(s["VertexBuffer"].MatricesIndicesExtraKind),c.push(s["VertexBuffer"].MatricesWeightsExtraKind));var p=e.skeleton;f=e.numBoneInfluencers,a.push("#define NUM_BONE_INFLUENCERS "+f),l.addCPUSkinningFallback(0,e),p.isUsingTextureForMatrices?(a.push("#define BONETEXTURE"),-1===this._options.uniforms.indexOf("boneTextureWidth")&&this._options.uniforms.push("boneTextureWidth"),-1===this._options.samplers.indexOf("boneSampler")&&this._options.samplers.push("boneSampler")):(a.push("#define BonesPerMesh "+(p.bones.length+1)),-1===this._options.uniforms.indexOf("mBones")&&this._options.uniforms.push("mBones"))}else a.push("#define NUM_BONE_INFLUENCERS 0");for(var _ in this._textures)if(!this._textures[_].isReady())return!1;e&&this._shouldTurnAlphaTestOn(e)&&a.push("#define ALPHATEST");var g=this._shaderPath,b=this._options.uniforms,v=this._options.uniformBuffers,M=this._options.samplers;this.customShaderNameResolve&&(b=b.slice(),v=v.slice(),M=M.slice(),g=this.customShaderNameResolve(g,b,v,M,a,c));var T=this._effect,S=a.join("\n");return this._cachedDefines!==S&&(this._cachedDefines=S,this._effect=o.createEffect(g,{attributes:c,uniformsNames:b,uniformBuffersNames:v,samplers:M,defines:S,fallbacks:l,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousMorphTargets:f}},o),this._onEffectCreatedObservable&&(m.effect=this._effect,this._onEffectCreatedObservable.notifyObservers(m))),null!==(n=!(null===(r=this._effect)||void 0===r?void 0:r.isReady()))&&void 0!==n&&!n&&(T!==this._effect&&i.resetCachedMaterial(),this._renderId=i.getRenderId(),this._effect._wasPreviouslyReady=!0,!0)},ShaderMaterial.prototype.bindOnlyWorldMatrix=function(e,t){var r=this.getScene(),n=null!==t&&void 0!==t?t:this._effect;n&&(-1!==this._options.uniforms.indexOf("world")&&n.setMatrix("world",e),-1!==this._options.uniforms.indexOf("worldView")&&(e.multiplyToRef(r.getViewMatrix(),this._cachedWorldViewMatrix),n.setMatrix("worldView",this._cachedWorldViewMatrix)),-1!==this._options.uniforms.indexOf("worldViewProjection")&&(e.multiplyToRef(r.getTransformMatrix(),this._cachedWorldViewProjectionMatrix),n.setMatrix("worldViewProjection",this._cachedWorldViewProjectionMatrix)))},ShaderMaterial.prototype.bindForSubMesh=function(e,t,r){this.bind(e,t,r._effectOverride)},ShaderMaterial.prototype.bind=function(e,t,r){this.bindOnlyWorldMatrix(e,r);var n=null!==r&&void 0!==r?r:this._effect;if(n&&this.getScene().getCachedMaterial()!==this){var i;for(i in-1!==this._options.uniforms.indexOf("view")&&n.setMatrix("view",this.getScene().getViewMatrix()),-1!==this._options.uniforms.indexOf("projection")&&n.setMatrix("projection",this.getScene().getProjectionMatrix()),-1!==this._options.uniforms.indexOf("viewProjection")&&(n.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._multiview&&n.setMatrix("viewProjectionR",this.getScene()._transformMatrixR)),this.getScene().activeCamera&&-1!==this._options.uniforms.indexOf("cameraPosition")&&n.setVector3("cameraPosition",this.getScene().activeCamera.globalPosition),u["MaterialHelper"].BindBonesParameters(t,n),this._textures)n.setTexture(i,this._textures[i]);for(i in this._textureArrays)n.setTextureArray(i,this._textureArrays[i]);for(i in this._ints)n.setInt(i,this._ints[i]);for(i in this._floats)n.setFloat(i,this._floats[i]);for(i in this._floatsArrays)n.setArray(i,this._floatsArrays[i]);for(i in this._colors3)n.setColor3(i,this._colors3[i]);for(i in this._colors3Arrays)n.setArray3(i,this._colors3Arrays[i]);for(i in this._colors4){var o=this._colors4[i];n.setFloat4(i,o.r,o.g,o.b,o.a)}for(i in this._colors4Arrays)n.setArray4(i,this._colors4Arrays[i]);for(i in this._vectors2)n.setVector2(i,this._vectors2[i]);for(i in this._vectors3)n.setVector3(i,this._vectors3[i]);for(i in this._vectors4)n.setVector4(i,this._vectors4[i]);for(i in this._matrices)n.setMatrix(i,this._matrices[i]);for(i in this._matrixArrays)n.setMatrices(i,this._matrixArrays[i]);for(i in this._matrices3x3)n.setMatrix3x3(i,this._matrices3x3[i]);for(i in this._matrices2x2)n.setMatrix2x2(i,this._matrices2x2[i]);for(i in this._vectors2Arrays)n.setArray2(i,this._vectors2Arrays[i]);for(i in this._vectors3Arrays)n.setArray3(i,this._vectors3Arrays[i]);for(i in this._vectors4Arrays)n.setArray4(i,this._vectors4Arrays[i])}var s=this._effect;this._effect=n,this._afterBind(t),this._effect=s},ShaderMaterial.prototype._afterBind=function(t){e.prototype._afterBind.call(this,t),this.getScene()._cachedEffect=this._effect},ShaderMaterial.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);for(var r in this._textures)t.push(this._textures[r]);for(var r in this._textureArrays)for(var n=this._textureArrays[r],i=0;i<n.length;i++)t.push(n[i]);return t},ShaderMaterial.prototype.hasTexture=function(t){if(e.prototype.hasTexture.call(this,t))return!0;for(var r in this._textures)if(this._textures[r]===t)return!0;for(var r in this._textureArrays)for(var n=this._textureArrays[r],i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},ShaderMaterial.prototype.clone=function(e){var t=this,r=i["SerializationHelper"].Clone((function(){return new ShaderMaterial(e,t.getScene(),t._shaderPath,t._options)}),this);for(var o in r.name=e,r.id=e,"object"===typeof r._shaderPath&&(r._shaderPath=Object(n["__assign"])({},r._shaderPath)),this._options=Object(n["__assign"])({},this._options),Object.keys(this._options).forEach((function(e){var r=t._options[e];Array.isArray(r)&&(t._options[e]=r.slice(0))})),this._textures)r.setTexture(o,this._textures[o]);for(var o in this._floats)r.setFloat(o,this._floats[o]);for(var o in this._floatsArrays)r.setFloats(o,this._floatsArrays[o]);for(var o in this._colors3)r.setColor3(o,this._colors3[o]);for(var o in this._colors4)r.setColor4(o,this._colors4[o]);for(var o in this._vectors2)r.setVector2(o,this._vectors2[o]);for(var o in this._vectors3)r.setVector3(o,this._vectors3[o]);for(var o in this._vectors4)r.setVector4(o,this._vectors4[o]);for(var o in this._matrices)r.setMatrix(o,this._matrices[o]);for(var o in this._matrices3x3)r.setMatrix3x3(o,this._matrices3x3[o]);for(var o in this._matrices2x2)r.setMatrix2x2(o,this._matrices2x2[o]);return r},ShaderMaterial.prototype.dispose=function(t,r,n){if(r){var i;for(i in this._textures)this._textures[i].dispose();for(i in this._textureArrays)for(var o=this._textureArrays[i],s=0;s<o.length;s++)o[s].dispose()}this._textures={},e.prototype.dispose.call(this,t,r,n)},ShaderMaterial.prototype.serialize=function(){var e,t=i["SerializationHelper"].Serialize(this);for(e in t.customType="BABYLON.ShaderMaterial",t.options=this._options,t.shaderPath=this._shaderPath,t.textures={},this._textures)t.textures[e]=this._textures[e].serialize();for(e in t.textureArrays={},this._textureArrays){t.textureArrays[e]=[];for(var r=this._textureArrays[e],n=0;n<r.length;n++)t.textureArrays[e].push(r[n].serialize())}for(e in t.floats={},this._floats)t.floats[e]=this._floats[e];for(e in t.FloatArrays={},this._floatsArrays)t.FloatArrays[e]=this._floatsArrays[e];for(e in t.colors3={},this._colors3)t.colors3[e]=this._colors3[e].asArray();for(e in t.colors3Arrays={},this._colors3Arrays)t.colors3Arrays[e]=this._colors3Arrays[e];for(e in t.colors4={},this._colors4)t.colors4[e]=this._colors4[e].asArray();for(e in t.colors4Arrays={},this._colors4Arrays)t.colors4Arrays[e]=this._colors4Arrays[e];for(e in t.vectors2={},this._vectors2)t.vectors2[e]=this._vectors2[e].asArray();for(e in t.vectors3={},this._vectors3)t.vectors3[e]=this._vectors3[e].asArray();for(e in t.vectors4={},this._vectors4)t.vectors4[e]=this._vectors4[e].asArray();for(e in t.matrices={},this._matrices)t.matrices[e]=this._matrices[e].asArray();for(e in t.matrixArray={},this._matrixArrays)t.matrixArray[e]=this._matrixArrays[e];for(e in t.matrices3x3={},this._matrices3x3)t.matrices3x3[e]=this._matrices3x3[e];for(e in t.matrices2x2={},this._matrices2x2)t.matrices2x2[e]=this._matrices2x2[e];for(e in t.vectors2Arrays={},this._vectors2Arrays)t.vectors2Arrays[e]=this._vectors2Arrays[e];for(e in t.vectors3Arrays={},this._vectors3Arrays)t.vectors3Arrays[e]=this._vectors3Arrays[e];for(e in t.vectors4Arrays={},this._vectors4Arrays)t.vectors4Arrays[e]=this._vectors4Arrays[e];return t},ShaderMaterial.Parse=function(e,t,r){var n,s=i["SerializationHelper"].Parse((function(){return new ShaderMaterial(e.name,t,e.shaderPath,e.options)}),e,t,r);for(n in e.textures)s.setTexture(n,a["Texture"].Parse(e.textures[n],t,r));for(n in e.textureArrays){for(var u=e.textureArrays[n],c=new Array,l=0;l<u.length;l++)c.push(a["Texture"].Parse(u[l],t,r));s.setTextureArray(n,c)}for(n in e.floats)s.setFloat(n,e.floats[n]);for(n in e.floatsArrays)s.setFloats(n,e.floatsArrays[n]);for(n in e.colors3)s.setColor3(n,d["Color3"].FromArray(e.colors3[n]));for(n in e.colors3Arrays){var h=e.colors3Arrays[n].reduce((function(e,t,r){return r%3===0?e.push([t]):e[e.length-1].push(t),e}),[]).map((function(e){return d["Color3"].FromArray(e)}));s.setColor3Array(n,h)}for(n in e.colors4)s.setColor4(n,d["Color4"].FromArray(e.colors4[n]));for(n in e.colors4Arrays){h=e.colors4Arrays[n].reduce((function(e,t,r){return r%4===0?e.push([t]):e[e.length-1].push(t),e}),[]).map((function(e){return d["Color4"].FromArray(e)}));s.setColor4Array(n,h)}for(n in e.vectors2)s.setVector2(n,o["Vector2"].FromArray(e.vectors2[n]));for(n in e.vectors3)s.setVector3(n,o["Vector3"].FromArray(e.vectors3[n]));for(n in e.vectors4)s.setVector4(n,o["Vector4"].FromArray(e.vectors4[n]));for(n in e.matrices)s.setMatrix(n,o["Matrix"].FromArray(e.matrices[n]));for(n in e.matrixArray)s._matrixArrays[n]=new Float32Array(e.matrixArray[n]);for(n in e.matrices3x3)s.setMatrix3x3(n,e.matrices3x3[n]);for(n in e.matrices2x2)s.setMatrix2x2(n,e.matrices2x2[n]);for(n in e.vectors2Arrays)s.setArray2(n,e.vectors2Arrays[n]);for(n in e.vectors3Arrays)s.setArray3(n,e.vectors3Arrays[n]);for(n in e.vectors4Arrays)s.setArray4(n,e.vectors4Arrays[n]);return s},ShaderMaterial.ParseFromFileAsync=function(e,t,r,n){var i=this;return void 0===n&&(n=""),new Promise((function(o,s){var a=new f["WebRequest"];a.addEventListener("readystatechange",(function(){if(4==a.readyState)if(200==a.status){var t=JSON.parse(a.responseText),u=i.Parse(t,r||p["Engine"].LastCreatedScene,n);e&&(u.name=e),o(u)}else s("Unable to load the ShaderMaterial")})),a.open("GET",t),a.send()}))},ShaderMaterial.CreateFromSnippetAsync=function(e,t,r){var n=this;return void 0===r&&(r=""),new Promise((function(i,o){var s=new f["WebRequest"];s.addEventListener("readystatechange",(function(){if(4==s.readyState)if(200==s.status){var a=JSON.parse(JSON.parse(s.responseText).jsonPayload),u=JSON.parse(a.shaderMaterial),c=n.Parse(u,t||p["Engine"].LastCreatedScene,r);c.snippetId=e,i(c)}else o("Unable to load the snippet "+e)})),s.open("GET",n.SnippetUrl+"/"+e.replace(/#/g,"/")),s.send()}))},ShaderMaterial.SnippetUrl="https://snippet.babylonjs.com",ShaderMaterial}(c["Material"]);l["_TypeStore"].RegisteredTypes["BABYLON.ShaderMaterial"]=_},"./node_modules/@babylonjs/core/Materials/standardMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"StandardMaterialDefines",(function(){return S})),r.d(t,"StandardMaterial",(function(){return C}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/smartArray.js"),s=r("./node_modules/@babylonjs/core/scene.js"),a=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),u=r("./node_modules/@babylonjs/core/Maths/math.color.js"),c=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),l=r("./node_modules/@babylonjs/core/Materials/prePassConfiguration.js"),d=r("./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js"),h=r("./node_modules/@babylonjs/core/Materials/material.js"),f=r("./node_modules/@babylonjs/core/Materials/materialDefines.js"),p=r("./node_modules/@babylonjs/core/Materials/pushMaterial.js"),m=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),_=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),g=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),b=r("./node_modules/@babylonjs/core/Materials/materialFlags.js"),v=(r("./node_modules/@babylonjs/core/Shaders/default.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/default.vertex.js"),r("./node_modules/@babylonjs/core/Materials/effectFallbacks.js")),M=r("./node_modules/@babylonjs/core/Materials/material.detailMapConfiguration.js"),T={effect:null,subMesh:null},S=function(e){function StandardMaterialDefines(){var t=e.call(this)||this;return t.MAINUV1=!1,t.MAINUV2=!1,t.DIFFUSE=!1,t.DIFFUSEDIRECTUV=0,t.DETAIL=!1,t.DETAILDIRECTUV=0,t.DETAIL_NORMALBLENDMETHOD=0,t.AMBIENT=!1,t.AMBIENTDIRECTUV=0,t.OPACITY=!1,t.OPACITYDIRECTUV=0,t.OPACITYRGB=!1,t.REFLECTION=!1,t.EMISSIVE=!1,t.EMISSIVEDIRECTUV=0,t.SPECULAR=!1,t.SPECULARDIRECTUV=0,t.BUMP=!1,t.BUMPDIRECTUV=0,t.PARALLAX=!1,t.PARALLAXOCCLUSION=!1,t.SPECULAROVERALPHA=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.ALPHAFROMDIFFUSE=!1,t.POINTSIZE=!1,t.FOG=!1,t.SPECULARTERM=!1,t.DIFFUSEFRESNEL=!1,t.OPACITYFRESNEL=!1,t.REFLECTIONFRESNEL=!1,t.REFRACTIONFRESNEL=!1,t.EMISSIVEFRESNEL=!1,t.FRESNEL=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.BONETEXTURE=!1,t.BONES_VELOCITY_ENABLED=!1,t.INSTANCES=!1,t.THIN_INSTANCES=!1,t.GLOSSINESS=!1,t.ROUGHNESS=!1,t.EMISSIVEASILLUMINATION=!1,t.LINKEMISSIVEWITHDIFFUSE=!1,t.REFLECTIONFRESNELFROMSPECULAR=!1,t.LIGHTMAP=!1,t.LIGHTMAPDIRECTUV=0,t.OBJECTSPACE_NORMALMAP=!1,t.USELIGHTMAPASSHADOWMAP=!1,t.REFLECTIONMAP_3D=!1,t.REFLECTIONMAP_SPHERICAL=!1,t.REFLECTIONMAP_PLANAR=!1,t.REFLECTIONMAP_CUBIC=!1,t.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,t.REFLECTIONMAP_PROJECTION=!1,t.REFLECTIONMAP_SKYBOX=!1,t.REFLECTIONMAP_EXPLICIT=!1,t.REFLECTIONMAP_EQUIRECTANGULAR=!1,t.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,t.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,t.INVERTCUBICMAP=!1,t.LOGARITHMICDEPTH=!1,t.REFRACTION=!1,t.REFRACTIONMAP_3D=!1,t.REFLECTIONOVERALPHA=!1,t.TWOSIDEDLIGHTING=!1,t.SHADOWFLOAT=!1,t.MORPHTARGETS=!1,t.MORPHTARGETS_NORMAL=!1,t.MORPHTARGETS_TANGENT=!1,t.MORPHTARGETS_UV=!1,t.NUM_MORPH_INFLUENCERS=0,t.NONUNIFORMSCALING=!1,t.PREMULTIPLYALPHA=!1,t.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1,t.ALPHABLEND=!0,t.PREPASS=!1,t.PREPASS_IRRADIANCE=!1,t.PREPASS_IRRADIANCE_INDEX=-1,t.PREPASS_ALBEDO=!1,t.PREPASS_ALBEDO_INDEX=-1,t.PREPASS_DEPTHNORMAL=!1,t.PREPASS_DEPTHNORMAL_INDEX=-1,t.PREPASS_POSITION=!1,t.PREPASS_POSITION_INDEX=-1,t.PREPASS_VELOCITY=!1,t.PREPASS_VELOCITY_INDEX=-1,t.PREPASS_REFLECTIVITY=!1,t.PREPASS_REFLECTIVITY_INDEX=-1,t.SCENE_MRT_COUNT=0,t.RGBDLIGHTMAP=!1,t.RGBDREFLECTION=!1,t.RGBDREFRACTION=!1,t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.MULTIVIEW=!1,t.IS_REFLECTION_LINEAR=!1,t.IS_REFRACTION_LINEAR=!1,t.EXPOSURE=!1,t.rebuild(),t}return Object(n["__extends"])(StandardMaterialDefines,e),StandardMaterialDefines.prototype.setReflectionMode=function(e){for(var t=["REFLECTIONMAP_CUBIC","REFLECTIONMAP_EXPLICIT","REFLECTIONMAP_PLANAR","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_SKYBOX","REFLECTIONMAP_SPHERICAL","REFLECTIONMAP_EQUIRECTANGULAR","REFLECTIONMAP_EQUIRECTANGULAR_FIXED","REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED"],r=0,n=t;r<n.length;r++){var i=n[r];this[i]=i===e}},StandardMaterialDefines}(f["MaterialDefines"]),C=function(e){function StandardMaterial(t,r){var n=e.call(this,t,r)||this;return n._diffuseTexture=null,n._ambientTexture=null,n._opacityTexture=null,n._reflectionTexture=null,n._emissiveTexture=null,n._specularTexture=null,n._bumpTexture=null,n._lightmapTexture=null,n._refractionTexture=null,n.ambientColor=new u["Color3"](0,0,0),n.diffuseColor=new u["Color3"](1,1,1),n.specularColor=new u["Color3"](1,1,1),n.emissiveColor=new u["Color3"](0,0,0),n.specularPower=64,n._useAlphaFromDiffuseTexture=!1,n._useEmissiveAsIllumination=!1,n._linkEmissiveWithDiffuse=!1,n._useSpecularOverAlpha=!1,n._useReflectionOverAlpha=!1,n._disableLighting=!1,n._useObjectSpaceNormalMap=!1,n._useParallax=!1,n._useParallaxOcclusion=!1,n.parallaxScaleBias=.05,n._roughness=0,n.indexOfRefraction=.98,n.invertRefractionY=!0,n.alphaCutOff=.4,n._useLightmapAsShadowmap=!1,n._useReflectionFresnelFromSpecular=!1,n._useGlossinessFromSpecularMapAlpha=!1,n._maxSimultaneousLights=4,n._invertNormalMapX=!1,n._invertNormalMapY=!1,n._twoSidedLighting=!1,n.detailMap=new M["DetailMapConfiguration"](n._markAllSubMeshesAsTexturesDirty.bind(n)),n._renderTargets=new o["SmartArray"](16),n._worldViewProjectionMatrix=a["Matrix"].Zero(),n._globalAmbientColor=new u["Color3"](0,0,0),n._rebuildInParallel=!1,n._attachImageProcessingConfiguration(null),n.prePassConfiguration=new l["PrePassConfiguration"],n.getRenderTargetTextures=function(){return n._renderTargets.reset(),StandardMaterial.ReflectionTextureEnabled&&n._reflectionTexture&&n._reflectionTexture.isRenderTarget&&n._renderTargets.push(n._reflectionTexture),StandardMaterial.RefractionTextureEnabled&&n._refractionTexture&&n._refractionTexture.isRenderTarget&&n._renderTargets.push(n._refractionTexture),n._renderTargets},n}return Object(n["__extends"])(StandardMaterial,e),Object.defineProperty(StandardMaterial.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()},enumerable:!1,configurable:!0}),StandardMaterial.prototype._attachImageProcessingConfiguration=function(e){var t=this;e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((function(){t._markAllSubMeshesAsImageProcessingDirty()}))))},Object.defineProperty(StandardMaterial.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(e){this.imageProcessingConfiguration.colorCurvesEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(e){this.imageProcessingConfiguration.colorGradingEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(e){this._imageProcessingConfiguration.toneMappingEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(e){this._imageProcessingConfiguration.exposure=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(e){this._imageProcessingConfiguration.contrast=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(e){this._imageProcessingConfiguration.colorGradingTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(e){this._imageProcessingConfiguration.colorCurves=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"canRenderToMRT",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial.prototype,"hasRenderTargetTextures",{get:function(){return!!(StandardMaterial.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget)||!!(StandardMaterial.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget)},enumerable:!1,configurable:!0}),StandardMaterial.prototype.getClassName=function(){return"StandardMaterial"},Object.defineProperty(StandardMaterial.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(e){this._useLogarithmicDepth=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported,this._markAllSubMeshesAsMiscDirty()},enumerable:!1,configurable:!0}),StandardMaterial.prototype.needAlphaBlending=function(){return!this._disableAlphaBlending&&(this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromDiffuseTexture()||this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled)},StandardMaterial.prototype.needAlphaTesting=function(){return!!this._forceAlphaTest||this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===h["Material"].MATERIAL_ALPHATEST)},StandardMaterial.prototype._shouldUseAlphaFromDiffuseTexture=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==h["Material"].MATERIAL_OPAQUE},StandardMaterial.prototype._hasAlphaChannel=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha||null!=this._opacityTexture},StandardMaterial.prototype.getAlphaTestTexture=function(){return this._diffuseTexture},StandardMaterial.prototype.isReadyForSubMesh=function(e,t,r){if(void 0===r&&(r=!1),t.effect&&this.isFrozen&&t.effect._wasPreviouslyReady)return!0;t._materialDefines||(t._materialDefines=new S);var n=this.getScene(),i=t._materialDefines;if(this._isReadyForSubMesh(t))return!0;var o=n.getEngine();if(i._needNormals=m["MaterialHelper"].PrepareDefinesForLights(n,e,i,!0,this._maxSimultaneousLights,this._disableLighting),m["MaterialHelper"].PrepareDefinesForMultiview(n,i),m["MaterialHelper"].PrepareDefinesForPrePass(n,i,this.canRenderToMRT),i._areTexturesDirty){if(i._needUVs=!1,i.MAINUV1=!1,i.MAINUV2=!1,n.texturesEnabled){if(this._diffuseTexture&&StandardMaterial.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._diffuseTexture,i,"DIFFUSE")}else i.DIFFUSE=!1;if(this._ambientTexture&&StandardMaterial.AmbientTextureEnabled){if(!this._ambientTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._ambientTexture,i,"AMBIENT")}else i.AMBIENT=!1;if(this._opacityTexture&&StandardMaterial.OpacityTextureEnabled){if(!this._opacityTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._opacityTexture,i,"OPACITY"),i.OPACITYRGB=this._opacityTexture.getAlphaFromRGB}else i.OPACITY=!1;if(this._reflectionTexture&&StandardMaterial.ReflectionTextureEnabled){if(!this._reflectionTexture.isReadyOrNotBlocking())return!1;switch(i._needNormals=!0,i.REFLECTION=!0,i.ROUGHNESS=this._roughness>0,i.REFLECTIONOVERALPHA=this._useReflectionOverAlpha,i.INVERTCUBICMAP=this._reflectionTexture.coordinatesMode===_["Texture"].INVCUBIC_MODE,i.REFLECTIONMAP_3D=this._reflectionTexture.isCube,i.RGBDREFLECTION=this._reflectionTexture.isRGBD,this._reflectionTexture.coordinatesMode){case _["Texture"].EXPLICIT_MODE:i.setReflectionMode("REFLECTIONMAP_EXPLICIT");break;case _["Texture"].PLANAR_MODE:i.setReflectionMode("REFLECTIONMAP_PLANAR");break;case _["Texture"].PROJECTION_MODE:i.setReflectionMode("REFLECTIONMAP_PROJECTION");break;case _["Texture"].SKYBOX_MODE:i.setReflectionMode("REFLECTIONMAP_SKYBOX");break;case _["Texture"].SPHERICAL_MODE:i.setReflectionMode("REFLECTIONMAP_SPHERICAL");break;case _["Texture"].EQUIRECTANGULAR_MODE:i.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");break;case _["Texture"].FIXED_EQUIRECTANGULAR_MODE:i.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");break;case _["Texture"].FIXED_EQUIRECTANGULAR_MIRRORED_MODE:i.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED");break;case _["Texture"].CUBIC_MODE:case _["Texture"].INVCUBIC_MODE:default:i.setReflectionMode("REFLECTIONMAP_CUBIC");break}i.USE_LOCAL_REFLECTIONMAP_CUBIC=!!this._reflectionTexture.boundingBoxSize}else i.REFLECTION=!1;if(this._emissiveTexture&&StandardMaterial.EmissiveTextureEnabled){if(!this._emissiveTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._emissiveTexture,i,"EMISSIVE")}else i.EMISSIVE=!1;if(this._lightmapTexture&&StandardMaterial.LightmapTextureEnabled){if(!this._lightmapTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._lightmapTexture,i,"LIGHTMAP"),i.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap,i.RGBDLIGHTMAP=this._lightmapTexture.isRGBD}else i.LIGHTMAP=!1;if(this._specularTexture&&StandardMaterial.SpecularTextureEnabled){if(!this._specularTexture.isReadyOrNotBlocking())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._specularTexture,i,"SPECULAR"),i.GLOSSINESS=this._useGlossinessFromSpecularMapAlpha}else i.SPECULAR=!1;if(n.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&StandardMaterial.BumpTextureEnabled){if(!this._bumpTexture.isReady())return!1;m["MaterialHelper"].PrepareDefinesForMergedUV(this._bumpTexture,i,"BUMP"),i.PARALLAX=this._useParallax,i.PARALLAXOCCLUSION=this._useParallaxOcclusion,i.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap}else i.BUMP=!1;if(this._refractionTexture&&StandardMaterial.RefractionTextureEnabled){if(!this._refractionTexture.isReadyOrNotBlocking())return!1;i._needUVs=!0,i.REFRACTION=!0,i.REFRACTIONMAP_3D=this._refractionTexture.isCube,i.RGBDREFRACTION=this._refractionTexture.isRGBD}else i.REFRACTION=!1;i.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else i.DIFFUSE=!1,i.AMBIENT=!1,i.OPACITY=!1,i.REFLECTION=!1,i.EMISSIVE=!1,i.LIGHTMAP=!1,i.BUMP=!1,i.REFRACTION=!1;i.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),i.EMISSIVEASILLUMINATION=this._useEmissiveAsIllumination,i.LINKEMISSIVEWITHDIFFUSE=this._linkEmissiveWithDiffuse,i.SPECULAROVERALPHA=this._useSpecularOverAlpha,i.PREMULTIPLYALPHA=7===this.alphaMode||8===this.alphaMode,i.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode,i.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(e)}if(!this.detailMap.isReadyForSubMesh(i,n))return!1;if(i._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(i),i.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace,i.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}if(i._areFresnelDirty&&(StandardMaterial.FresnelEnabled?(this._diffuseFresnelParameters||this._opacityFresnelParameters||this._emissiveFresnelParameters||this._refractionFresnelParameters||this._reflectionFresnelParameters)&&(i.DIFFUSEFRESNEL=this._diffuseFresnelParameters&&this._diffuseFresnelParameters.isEnabled,i.OPACITYFRESNEL=this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled,i.REFLECTIONFRESNEL=this._reflectionFresnelParameters&&this._reflectionFresnelParameters.isEnabled,i.REFLECTIONFRESNELFROMSPECULAR=this._useReflectionFresnelFromSpecular,i.REFRACTIONFRESNEL=this._refractionFresnelParameters&&this._refractionFresnelParameters.isEnabled,i.EMISSIVEFRESNEL=this._emissiveFresnelParameters&&this._emissiveFresnelParameters.isEnabled,i._needNormals=!0,i.FRESNEL=!0):i.FRESNEL=!1),m["MaterialHelper"].PrepareDefinesForMisc(e,n,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e)||this._forceAlphaTest,i),m["MaterialHelper"].PrepareDefinesForAttributes(e,i,!0,!0,!0),m["MaterialHelper"].PrepareDefinesForFrameBoundValues(n,o,i,r,null,t.getRenderingMesh().hasThinInstances),this.detailMap.prepareDefines(i,n),i.isDirty){var s=i._areLightsDisposed;i.markAsProcessed();var a=new v["EffectFallbacks"];i.REFLECTION&&a.addFallback(0,"REFLECTION"),i.SPECULAR&&a.addFallback(0,"SPECULAR"),i.BUMP&&a.addFallback(0,"BUMP"),i.PARALLAX&&a.addFallback(1,"PARALLAX"),i.PARALLAXOCCLUSION&&a.addFallback(0,"PARALLAXOCCLUSION"),i.SPECULAROVERALPHA&&a.addFallback(0,"SPECULAROVERALPHA"),i.FOG&&a.addFallback(1,"FOG"),i.POINTSIZE&&a.addFallback(0,"POINTSIZE"),i.LOGARITHMICDEPTH&&a.addFallback(0,"LOGARITHMICDEPTH"),m["MaterialHelper"].HandleFallbacksForShadows(i,a,this._maxSimultaneousLights),i.SPECULARTERM&&a.addFallback(0,"SPECULARTERM"),i.DIFFUSEFRESNEL&&a.addFallback(1,"DIFFUSEFRESNEL"),i.OPACITYFRESNEL&&a.addFallback(2,"OPACITYFRESNEL"),i.REFLECTIONFRESNEL&&a.addFallback(3,"REFLECTIONFRESNEL"),i.EMISSIVEFRESNEL&&a.addFallback(4,"EMISSIVEFRESNEL"),i.FRESNEL&&a.addFallback(4,"FRESNEL"),i.MULTIVIEW&&a.addFallback(0,"MULTIVIEW");var u=[c["VertexBuffer"].PositionKind];i.NORMAL&&u.push(c["VertexBuffer"].NormalKind),i.UV1&&u.push(c["VertexBuffer"].UVKind),i.UV2&&u.push(c["VertexBuffer"].UV2Kind),i.VERTEXCOLOR&&u.push(c["VertexBuffer"].ColorKind),m["MaterialHelper"].PrepareAttributesForBones(u,e,i,a),m["MaterialHelper"].PrepareAttributesForInstances(u,i),m["MaterialHelper"].PrepareAttributesForMorphTargets(u,e,i);var h="default",f=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vDiffuseColor","vSpecularColor","vEmissiveColor","visibility","vFogInfos","vFogColor","pointSize","vDiffuseInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vEmissiveInfos","vSpecularInfos","vBumpInfos","vLightmapInfos","vRefractionInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","specularMatrix","bumpMatrix","normalMatrix","lightmapMatrix","refractionMatrix","diffuseLeftColor","diffuseRightColor","opacityParts","reflectionLeftColor","reflectionRightColor","emissiveLeftColor","emissiveRightColor","refractionLeftColor","refractionRightColor","vReflectionPosition","vReflectionSize","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth"],p=["diffuseSampler","ambientSampler","opacitySampler","reflectionCubeSampler","reflection2DSampler","emissiveSampler","specularSampler","bumpSampler","lightmapSampler","refractionCubeSampler","refraction2DSampler","boneSampler"],g=["Material","Scene"];M["DetailMapConfiguration"].AddUniforms(f),M["DetailMapConfiguration"].AddSamplers(p),l["PrePassConfiguration"].AddUniforms(f),l["PrePassConfiguration"].AddSamplers(f),d["ImageProcessingConfiguration"]&&(d["ImageProcessingConfiguration"].PrepareUniforms(f,i),d["ImageProcessingConfiguration"].PrepareSamplers(p,i)),m["MaterialHelper"].PrepareUniformsAndSamplersList({uniformsNames:f,uniformBuffersNames:g,samplers:p,defines:i,maxSimultaneousLights:this._maxSimultaneousLights});var b={};this.customShaderNameResolve&&(h=this.customShaderNameResolve(h,f,g,p,i,u,b));var C=i.toString(),E=t.effect,P=n.getEngine().createEffect(h,{attributes:u,uniformsNames:f,uniformBuffersNames:g,samplers:p,defines:C,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:i.NUM_MORPH_INFLUENCERS},processFinalCode:b.processFinalCode,multiTarget:i.PREPASS},o);if(P)if(this._onEffectCreatedObservable&&(T.effect=P,T.subMesh=t,this._onEffectCreatedObservable.notifyObservers(T)),this.allowShaderHotSwapping&&E&&!P.isReady()){if(P=E,this._rebuildInParallel=!0,i.markAsUnprocessed(),s)return i._areLightsDisposed=!0,!1}else this._rebuildInParallel=!1,n.resetCachedMaterial(),t.setEffect(P,i),this.buildUniformLayout()}return!(!t.effect||!t.effect.isReady())&&(i._renderId=n.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},StandardMaterial.prototype.buildUniformLayout=function(){var e=this._uniformBuffer;e.addUniform("diffuseLeftColor",4),e.addUniform("diffuseRightColor",4),e.addUniform("opacityParts",4),e.addUniform("reflectionLeftColor",4),e.addUniform("reflectionRightColor",4),e.addUniform("refractionLeftColor",4),e.addUniform("refractionRightColor",4),e.addUniform("emissiveLeftColor",4),e.addUniform("emissiveRightColor",4),e.addUniform("vDiffuseInfos",2),e.addUniform("vAmbientInfos",2),e.addUniform("vOpacityInfos",2),e.addUniform("vReflectionInfos",2),e.addUniform("vReflectionPosition",3),e.addUniform("vReflectionSize",3),e.addUniform("vEmissiveInfos",2),e.addUniform("vLightmapInfos",2),e.addUniform("vSpecularInfos",2),e.addUniform("vBumpInfos",3),e.addUniform("diffuseMatrix",16),e.addUniform("ambientMatrix",16),e.addUniform("opacityMatrix",16),e.addUniform("reflectionMatrix",16),e.addUniform("emissiveMatrix",16),e.addUniform("lightmapMatrix",16),e.addUniform("specularMatrix",16),e.addUniform("bumpMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("pointSize",1),e.addUniform("refractionMatrix",16),e.addUniform("vRefractionInfos",4),e.addUniform("vSpecularColor",4),e.addUniform("vEmissiveColor",3),e.addUniform("visibility",1),e.addUniform("vDiffuseColor",4),M["DetailMapConfiguration"].PrepareUniformBuffer(e),e.create()},StandardMaterial.prototype.unbind=function(){if(this._activeEffect){var t=!1;this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&(this._activeEffect.setTexture("reflection2DSampler",null),t=!0),this._refractionTexture&&this._refractionTexture.isRenderTarget&&(this._activeEffect.setTexture("refraction2DSampler",null),t=!0),t&&this._markAllSubMeshesAsTexturesDirty()}e.prototype.unbind.call(this)},StandardMaterial.prototype.bindForSubMesh=function(e,t,r){var n=this.getScene(),i=r._materialDefines;if(i){var o=r.effect;if(o){this._activeEffect=o,i.INSTANCES&&!i.THIN_INSTANCES||this.bindOnlyWorldMatrix(e),this.prePassConfiguration.bindForSubMesh(this._activeEffect,n,t,e,this.isFrozen),i.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));var a=this._mustRebind(n,o,t.visibility);m["MaterialHelper"].BindBonesParameters(t,o);var c=this._uniformBuffer;if(a){if(c.bindToEffect(o,"Material"),this.bindViewProjection(o),!c.useUbo||!this.isFrozen||!c.isSync){if(StandardMaterial.FresnelEnabled&&i.FRESNEL&&(this.diffuseFresnelParameters&&this.diffuseFresnelParameters.isEnabled&&(c.updateColor4("diffuseLeftColor",this.diffuseFresnelParameters.leftColor,this.diffuseFresnelParameters.power),c.updateColor4("diffuseRightColor",this.diffuseFresnelParameters.rightColor,this.diffuseFresnelParameters.bias)),this.opacityFresnelParameters&&this.opacityFresnelParameters.isEnabled&&c.updateColor4("opacityParts",new u["Color3"](this.opacityFresnelParameters.leftColor.toLuminance(),this.opacityFresnelParameters.rightColor.toLuminance(),this.opacityFresnelParameters.bias),this.opacityFresnelParameters.power),this.reflectionFresnelParameters&&this.reflectionFresnelParameters.isEnabled&&(c.updateColor4("reflectionLeftColor",this.reflectionFresnelParameters.leftColor,this.reflectionFresnelParameters.power),c.updateColor4("reflectionRightColor",this.reflectionFresnelParameters.rightColor,this.reflectionFresnelParameters.bias)),this.refractionFresnelParameters&&this.refractionFresnelParameters.isEnabled&&(c.updateColor4("refractionLeftColor",this.refractionFresnelParameters.leftColor,this.refractionFresnelParameters.power),c.updateColor4("refractionRightColor",this.refractionFresnelParameters.rightColor,this.refractionFresnelParameters.bias)),this.emissiveFresnelParameters&&this.emissiveFresnelParameters.isEnabled&&(c.updateColor4("emissiveLeftColor",this.emissiveFresnelParameters.leftColor,this.emissiveFresnelParameters.power),c.updateColor4("emissiveRightColor",this.emissiveFresnelParameters.rightColor,this.emissiveFresnelParameters.bias))),n.texturesEnabled){if(this._diffuseTexture&&StandardMaterial.DiffuseTextureEnabled&&(c.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),m["MaterialHelper"].BindTextureMatrix(this._diffuseTexture,c,"diffuse")),this._ambientTexture&&StandardMaterial.AmbientTextureEnabled&&(c.updateFloat2("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level),m["MaterialHelper"].BindTextureMatrix(this._ambientTexture,c,"ambient")),this._opacityTexture&&StandardMaterial.OpacityTextureEnabled&&(c.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),m["MaterialHelper"].BindTextureMatrix(this._opacityTexture,c,"opacity")),this._hasAlphaChannel()&&o.setFloat("alphaCutOff",this.alphaCutOff),this._reflectionTexture&&StandardMaterial.ReflectionTextureEnabled&&(c.updateFloat2("vReflectionInfos",this._reflectionTexture.level,this.roughness),c.updateMatrix("reflectionMatrix",this._reflectionTexture.getReflectionTextureMatrix()),this._reflectionTexture.boundingBoxSize)){var l=this._reflectionTexture;c.updateVector3("vReflectionPosition",l.boundingBoxPosition),c.updateVector3("vReflectionSize",l.boundingBoxSize)}if(this._emissiveTexture&&StandardMaterial.EmissiveTextureEnabled&&(c.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),m["MaterialHelper"].BindTextureMatrix(this._emissiveTexture,c,"emissive")),this._lightmapTexture&&StandardMaterial.LightmapTextureEnabled&&(c.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),m["MaterialHelper"].BindTextureMatrix(this._lightmapTexture,c,"lightmap")),this._specularTexture&&StandardMaterial.SpecularTextureEnabled&&(c.updateFloat2("vSpecularInfos",this._specularTexture.coordinatesIndex,this._specularTexture.level),m["MaterialHelper"].BindTextureMatrix(this._specularTexture,c,"specular")),this._bumpTexture&&n.getEngine().getCaps().standardDerivatives&&StandardMaterial.BumpTextureEnabled&&(c.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this.parallaxScaleBias),m["MaterialHelper"].BindTextureMatrix(this._bumpTexture,c,"bump"),n._mirroredCameraPosition?c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this._refractionTexture&&StandardMaterial.RefractionTextureEnabled){var d=1;this._refractionTexture.isCube||(c.updateMatrix("refractionMatrix",this._refractionTexture.getReflectionTextureMatrix()),this._refractionTexture.depth&&(d=this._refractionTexture.depth)),c.updateFloat4("vRefractionInfos",this._refractionTexture.level,this.indexOfRefraction,d,this.invertRefractionY?-1:1)}}this.pointsCloud&&c.updateFloat("pointSize",this.pointSize),i.SPECULARTERM&&c.updateColor4("vSpecularColor",this.specularColor,this.specularPower),c.updateColor3("vEmissiveColor",StandardMaterial.EmissiveTextureEnabled?this.emissiveColor:u["Color3"].BlackReadOnly),c.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha)}if(c.updateFloat("visibility",t.visibility),n.texturesEnabled&&(this._diffuseTexture&&StandardMaterial.DiffuseTextureEnabled&&o.setTexture("diffuseSampler",this._diffuseTexture),this._ambientTexture&&StandardMaterial.AmbientTextureEnabled&&o.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&StandardMaterial.OpacityTextureEnabled&&o.setTexture("opacitySampler",this._opacityTexture),this._reflectionTexture&&StandardMaterial.ReflectionTextureEnabled&&(this._reflectionTexture.isCube?o.setTexture("reflectionCubeSampler",this._reflectionTexture):o.setTexture("reflection2DSampler",this._reflectionTexture)),this._emissiveTexture&&StandardMaterial.EmissiveTextureEnabled&&o.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&StandardMaterial.LightmapTextureEnabled&&o.setTexture("lightmapSampler",this._lightmapTexture),this._specularTexture&&StandardMaterial.SpecularTextureEnabled&&o.setTexture("specularSampler",this._specularTexture),this._bumpTexture&&n.getEngine().getCaps().standardDerivatives&&StandardMaterial.BumpTextureEnabled&&o.setTexture("bumpSampler",this._bumpTexture),this._refractionTexture&&StandardMaterial.RefractionTextureEnabled)){d=1;this._refractionTexture.isCube?o.setTexture("refractionCubeSampler",this._refractionTexture):o.setTexture("refraction2DSampler",this._refractionTexture)}this.detailMap.bindForSubMesh(c,n,this.isFrozen),m["MaterialHelper"].BindClipPlane(o,n),n.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),m["MaterialHelper"].BindEyePosition(o,n),o.setColor3("vAmbientColor",this._globalAmbientColor)}!a&&this.isFrozen||(n.lightsEnabled&&!this._disableLighting&&m["MaterialHelper"].BindLights(n,t,o,i,this._maxSimultaneousLights,this._rebuildInParallel),(n.fogEnabled&&t.applyFog&&n.fogMode!==s["Scene"].FOGMODE_NONE||this._reflectionTexture||this._refractionTexture)&&this.bindView(o),m["MaterialHelper"].BindFogParameters(n,t,o),i.NUM_MORPH_INFLUENCERS&&m["MaterialHelper"].BindMorphTargetParameters(t,o),this.useLogarithmicDepth&&m["MaterialHelper"].BindLogDepth(i,o,n),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect)),c.update(),this._afterBind(t,this._activeEffect)}}},StandardMaterial.prototype.getAnimatables=function(){var e=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&e.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&e.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&e.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&e.push(this._emissiveTexture),this._specularTexture&&this._specularTexture.animations&&this._specularTexture.animations.length>0&&e.push(this._specularTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&e.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&e.push(this._lightmapTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&e.push(this._refractionTexture),this.detailMap.getAnimatables(e),e},StandardMaterial.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),this._ambientTexture&&t.push(this._ambientTexture),this._opacityTexture&&t.push(this._opacityTexture),this._reflectionTexture&&t.push(this._reflectionTexture),this._emissiveTexture&&t.push(this._emissiveTexture),this._specularTexture&&t.push(this._specularTexture),this._bumpTexture&&t.push(this._bumpTexture),this._lightmapTexture&&t.push(this._lightmapTexture),this._refractionTexture&&t.push(this._refractionTexture),this.detailMap.getActiveTextures(t),t},StandardMaterial.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this._diffuseTexture===t||(this._ambientTexture===t||(this._opacityTexture===t||(this._reflectionTexture===t||(this._emissiveTexture===t||(this._specularTexture===t||(this._bumpTexture===t||(this._lightmapTexture===t||(this._refractionTexture===t||this.detailMap.hasTexture(t))))))))))},StandardMaterial.prototype.dispose=function(t,r){var n,i,o,s,a,u,c,l,d;r&&(null===(n=this._diffuseTexture)||void 0===n||n.dispose(),null===(i=this._ambientTexture)||void 0===i||i.dispose(),null===(o=this._opacityTexture)||void 0===o||o.dispose(),null===(s=this._reflectionTexture)||void 0===s||s.dispose(),null===(a=this._emissiveTexture)||void 0===a||a.dispose(),null===(u=this._specularTexture)||void 0===u||u.dispose(),null===(c=this._bumpTexture)||void 0===c||c.dispose(),null===(l=this._lightmapTexture)||void 0===l||l.dispose(),null===(d=this._refractionTexture)||void 0===d||d.dispose()),this.detailMap.dispose(r),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e.prototype.dispose.call(this,t,r)},StandardMaterial.prototype.clone=function(e){var t=this,r=i["SerializationHelper"].Clone((function(){return new StandardMaterial(e,t.getScene())}),this);return r.name=e,r.id=e,r},StandardMaterial.prototype.serialize=function(){return i["SerializationHelper"].Serialize(this)},StandardMaterial.Parse=function(e,t,r){return i["SerializationHelper"].Parse((function(){return new StandardMaterial(e.name,t)}),e,t,r)},Object.defineProperty(StandardMaterial,"DiffuseTextureEnabled",{get:function(){return b["MaterialFlags"].DiffuseTextureEnabled},set:function(e){b["MaterialFlags"].DiffuseTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"DetailTextureEnabled",{get:function(){return b["MaterialFlags"].DetailTextureEnabled},set:function(e){b["MaterialFlags"].DetailTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"AmbientTextureEnabled",{get:function(){return b["MaterialFlags"].AmbientTextureEnabled},set:function(e){b["MaterialFlags"].AmbientTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"OpacityTextureEnabled",{get:function(){return b["MaterialFlags"].OpacityTextureEnabled},set:function(e){b["MaterialFlags"].OpacityTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"ReflectionTextureEnabled",{get:function(){return b["MaterialFlags"].ReflectionTextureEnabled},set:function(e){b["MaterialFlags"].ReflectionTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"EmissiveTextureEnabled",{get:function(){return b["MaterialFlags"].EmissiveTextureEnabled},set:function(e){b["MaterialFlags"].EmissiveTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"SpecularTextureEnabled",{get:function(){return b["MaterialFlags"].SpecularTextureEnabled},set:function(e){b["MaterialFlags"].SpecularTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"BumpTextureEnabled",{get:function(){return b["MaterialFlags"].BumpTextureEnabled},set:function(e){b["MaterialFlags"].BumpTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"LightmapTextureEnabled",{get:function(){return b["MaterialFlags"].LightmapTextureEnabled},set:function(e){b["MaterialFlags"].LightmapTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"RefractionTextureEnabled",{get:function(){return b["MaterialFlags"].RefractionTextureEnabled},set:function(e){b["MaterialFlags"].RefractionTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"ColorGradingTextureEnabled",{get:function(){return b["MaterialFlags"].ColorGradingTextureEnabled},set:function(e){b["MaterialFlags"].ColorGradingTextureEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(StandardMaterial,"FresnelEnabled",{get:function(){return b["MaterialFlags"].FresnelEnabled},set:function(e){b["MaterialFlags"].FresnelEnabled=e},enumerable:!1,configurable:!0}),Object(n["__decorate"])([Object(i["serializeAsTexture"])("diffuseTexture")],StandardMaterial.prototype,"_diffuseTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesAndMiscDirty")],StandardMaterial.prototype,"diffuseTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("ambientTexture")],StandardMaterial.prototype,"_ambientTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"ambientTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("opacityTexture")],StandardMaterial.prototype,"_opacityTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesAndMiscDirty")],StandardMaterial.prototype,"opacityTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("reflectionTexture")],StandardMaterial.prototype,"_reflectionTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"reflectionTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("emissiveTexture")],StandardMaterial.prototype,"_emissiveTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"emissiveTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("specularTexture")],StandardMaterial.prototype,"_specularTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"specularTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("bumpTexture")],StandardMaterial.prototype,"_bumpTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"bumpTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("lightmapTexture")],StandardMaterial.prototype,"_lightmapTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"lightmapTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("refractionTexture")],StandardMaterial.prototype,"_refractionTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"refractionTexture",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])("ambient")],StandardMaterial.prototype,"ambientColor",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])("diffuse")],StandardMaterial.prototype,"diffuseColor",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])("specular")],StandardMaterial.prototype,"specularColor",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])("emissive")],StandardMaterial.prototype,"emissiveColor",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"specularPower",void 0),Object(n["__decorate"])([Object(i["serialize"])("useAlphaFromDiffuseTexture")],StandardMaterial.prototype,"_useAlphaFromDiffuseTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesAndMiscDirty")],StandardMaterial.prototype,"useAlphaFromDiffuseTexture",void 0),Object(n["__decorate"])([Object(i["serialize"])("useEmissiveAsIllumination")],StandardMaterial.prototype,"_useEmissiveAsIllumination",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useEmissiveAsIllumination",void 0),Object(n["__decorate"])([Object(i["serialize"])("linkEmissiveWithDiffuse")],StandardMaterial.prototype,"_linkEmissiveWithDiffuse",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"linkEmissiveWithDiffuse",void 0),Object(n["__decorate"])([Object(i["serialize"])("useSpecularOverAlpha")],StandardMaterial.prototype,"_useSpecularOverAlpha",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useSpecularOverAlpha",void 0),Object(n["__decorate"])([Object(i["serialize"])("useReflectionOverAlpha")],StandardMaterial.prototype,"_useReflectionOverAlpha",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useReflectionOverAlpha",void 0),Object(n["__decorate"])([Object(i["serialize"])("disableLighting")],StandardMaterial.prototype,"_disableLighting",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsLightsDirty")],StandardMaterial.prototype,"disableLighting",void 0),Object(n["__decorate"])([Object(i["serialize"])("useObjectSpaceNormalMap")],StandardMaterial.prototype,"_useObjectSpaceNormalMap",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useObjectSpaceNormalMap",void 0),Object(n["__decorate"])([Object(i["serialize"])("useParallax")],StandardMaterial.prototype,"_useParallax",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useParallax",void 0),Object(n["__decorate"])([Object(i["serialize"])("useParallaxOcclusion")],StandardMaterial.prototype,"_useParallaxOcclusion",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useParallaxOcclusion",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"parallaxScaleBias",void 0),Object(n["__decorate"])([Object(i["serialize"])("roughness")],StandardMaterial.prototype,"_roughness",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"roughness",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"indexOfRefraction",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"invertRefractionY",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"alphaCutOff",void 0),Object(n["__decorate"])([Object(i["serialize"])("useLightmapAsShadowmap")],StandardMaterial.prototype,"_useLightmapAsShadowmap",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useLightmapAsShadowmap",void 0),Object(n["__decorate"])([Object(i["serializeAsFresnelParameters"])("diffuseFresnelParameters")],StandardMaterial.prototype,"_diffuseFresnelParameters",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelDirty")],StandardMaterial.prototype,"diffuseFresnelParameters",void 0),Object(n["__decorate"])([Object(i["serializeAsFresnelParameters"])("opacityFresnelParameters")],StandardMaterial.prototype,"_opacityFresnelParameters",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelAndMiscDirty")],StandardMaterial.prototype,"opacityFresnelParameters",void 0),Object(n["__decorate"])([Object(i["serializeAsFresnelParameters"])("reflectionFresnelParameters")],StandardMaterial.prototype,"_reflectionFresnelParameters",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelDirty")],StandardMaterial.prototype,"reflectionFresnelParameters",void 0),Object(n["__decorate"])([Object(i["serializeAsFresnelParameters"])("refractionFresnelParameters")],StandardMaterial.prototype,"_refractionFresnelParameters",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelDirty")],StandardMaterial.prototype,"refractionFresnelParameters",void 0),Object(n["__decorate"])([Object(i["serializeAsFresnelParameters"])("emissiveFresnelParameters")],StandardMaterial.prototype,"_emissiveFresnelParameters",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelDirty")],StandardMaterial.prototype,"emissiveFresnelParameters",void 0),Object(n["__decorate"])([Object(i["serialize"])("useReflectionFresnelFromSpecular")],StandardMaterial.prototype,"_useReflectionFresnelFromSpecular",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsFresnelDirty")],StandardMaterial.prototype,"useReflectionFresnelFromSpecular",void 0),Object(n["__decorate"])([Object(i["serialize"])("useGlossinessFromSpecularMapAlpha")],StandardMaterial.prototype,"_useGlossinessFromSpecularMapAlpha",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"useGlossinessFromSpecularMapAlpha",void 0),Object(n["__decorate"])([Object(i["serialize"])("maxSimultaneousLights")],StandardMaterial.prototype,"_maxSimultaneousLights",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsLightsDirty")],StandardMaterial.prototype,"maxSimultaneousLights",void 0),Object(n["__decorate"])([Object(i["serialize"])("invertNormalMapX")],StandardMaterial.prototype,"_invertNormalMapX",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"invertNormalMapX",void 0),Object(n["__decorate"])([Object(i["serialize"])("invertNormalMapY")],StandardMaterial.prototype,"_invertNormalMapY",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"invertNormalMapY",void 0),Object(n["__decorate"])([Object(i["serialize"])("twoSidedLighting")],StandardMaterial.prototype,"_twoSidedLighting",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],StandardMaterial.prototype,"twoSidedLighting",void 0),Object(n["__decorate"])([Object(i["serialize"])()],StandardMaterial.prototype,"useLogarithmicDepth",null),StandardMaterial}(p["PushMaterial"]);g["_TypeStore"].RegisteredTypes["BABYLON.StandardMaterial"]=C,s["Scene"].DefaultMaterialFactory=function(e){return new C("default material",e)}},"./node_modules/@babylonjs/core/Materials/thinMaterialHelper.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ThinMaterialHelper",(function(){return n}));var n=function(){function ThinMaterialHelper(){}return ThinMaterialHelper.BindClipPlane=function(e,t){if(t.clipPlane){var r=t.clipPlane;e.setFloat4("vClipPlane",r.normal.x,r.normal.y,r.normal.z,r.d)}if(t.clipPlane2){r=t.clipPlane2;e.setFloat4("vClipPlane2",r.normal.x,r.normal.y,r.normal.z,r.d)}if(t.clipPlane3){r=t.clipPlane3;e.setFloat4("vClipPlane3",r.normal.x,r.normal.y,r.normal.z,r.d)}if(t.clipPlane4){r=t.clipPlane4;e.setFloat4("vClipPlane4",r.normal.x,r.normal.y,r.normal.z,r.d)}if(t.clipPlane5){r=t.clipPlane5;e.setFloat4("vClipPlane5",r.normal.x,r.normal.y,r.normal.z,r.d)}if(t.clipPlane6){r=t.clipPlane6;e.setFloat4("vClipPlane6",r.normal.x,r.normal.y,r.normal.z,r.d)}},ThinMaterialHelper}()},"./node_modules/@babylonjs/core/Materials/uniformBuffer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"UniformBuffer",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/logger.js"),i=(r("./node_modules/@babylonjs/core/Engines/Extensions/engine.uniformBuffer.js"),function(){function UniformBuffer(e,t,r){this._alreadyBound=!1,this._valueCache={},this._engine=e,this._noUBO=!e.supportsUniformBuffers,this._dynamic=r,this._data=t||[],this._uniformLocations={},this._uniformSizes={},this._uniformLocationPointer=0,this._needSync=!1,this._noUBO?(this.updateMatrix3x3=this._updateMatrix3x3ForEffect,this.updateMatrix2x2=this._updateMatrix2x2ForEffect,this.updateFloat=this._updateFloatForEffect,this.updateFloat2=this._updateFloat2ForEffect,this.updateFloat3=this._updateFloat3ForEffect,this.updateFloat4=this._updateFloat4ForEffect,this.updateMatrix=this._updateMatrixForEffect,this.updateVector3=this._updateVector3ForEffect,this.updateVector4=this._updateVector4ForEffect,this.updateColor3=this._updateColor3ForEffect,this.updateColor4=this._updateColor4ForEffect):(this._engine._uniformBuffers.push(this),this.updateMatrix3x3=this._updateMatrix3x3ForUniform,this.updateMatrix2x2=this._updateMatrix2x2ForUniform,this.updateFloat=this._updateFloatForUniform,this.updateFloat2=this._updateFloat2ForUniform,this.updateFloat3=this._updateFloat3ForUniform,this.updateFloat4=this._updateFloat4ForUniform,this.updateMatrix=this._updateMatrixForUniform,this.updateVector3=this._updateVector3ForUniform,this.updateVector4=this._updateVector4ForUniform,this.updateColor3=this._updateColor3ForUniform,this.updateColor4=this._updateColor4ForUniform)}return Object.defineProperty(UniformBuffer.prototype,"useUbo",{get:function(){return!this._noUBO},enumerable:!1,configurable:!0}),Object.defineProperty(UniformBuffer.prototype,"isSync",{get:function(){return!this._needSync},enumerable:!1,configurable:!0}),UniformBuffer.prototype.isDynamic=function(){return void 0!==this._dynamic},UniformBuffer.prototype.getData=function(){return this._bufferData},UniformBuffer.prototype.getBuffer=function(){return this._buffer},UniformBuffer.prototype._fillAlignment=function(e){var t;if(t=e<=2?e:4,this._uniformLocationPointer%t!==0){var r=this._uniformLocationPointer;this._uniformLocationPointer+=t-this._uniformLocationPointer%t;for(var n=this._uniformLocationPointer-r,i=0;i<n;i++)this._data.push(0)}},UniformBuffer.prototype.addUniform=function(e,t){if(!this._noUBO&&void 0===this._uniformLocations[e]){var r;if(t instanceof Array)r=t,t=r.length;else{t=t,r=[];for(var n=0;n<t;n++)r.push(0)}this._fillAlignment(t),this._uniformSizes[e]=t,this._uniformLocations[e]=this._uniformLocationPointer,this._uniformLocationPointer+=t;for(n=0;n<t;n++)this._data.push(r[n]);this._needSync=!0}},UniformBuffer.prototype.addMatrix=function(e,t){this.addUniform(e,Array.prototype.slice.call(t.toArray()))},UniformBuffer.prototype.addFloat2=function(e,t,r){var n=[t,r];this.addUniform(e,n)},UniformBuffer.prototype.addFloat3=function(e,t,r,n){var i=[t,r,n];this.addUniform(e,i)},UniformBuffer.prototype.addColor3=function(e,t){var r=new Array;t.toArray(r),this.addUniform(e,r)},UniformBuffer.prototype.addColor4=function(e,t,r){var n=new Array;t.toArray(n),n.push(r),this.addUniform(e,n)},UniformBuffer.prototype.addVector3=function(e,t){var r=new Array;t.toArray(r),this.addUniform(e,r)},UniformBuffer.prototype.addMatrix3x3=function(e){this.addUniform(e,12)},UniformBuffer.prototype.addMatrix2x2=function(e){this.addUniform(e,8)},UniformBuffer.prototype.create=function(){this._noUBO||this._buffer||(this._fillAlignment(4),this._bufferData=new Float32Array(this._data),this._rebuild(),this._needSync=!0)},UniformBuffer.prototype._rebuild=function(){!this._noUBO&&this._bufferData&&(this._dynamic?this._buffer=this._engine.createDynamicUniformBuffer(this._bufferData):this._buffer=this._engine.createUniformBuffer(this._bufferData))},UniformBuffer.prototype.update=function(){this._buffer?(this._dynamic||this._needSync)&&(this._engine.updateUniformBuffer(this._buffer,this._bufferData),this._needSync=!1):this.create()},UniformBuffer.prototype.updateUniform=function(e,t,r){var i=this._uniformLocations[e];if(void 0===i){if(this._buffer)return void n["Logger"].Error("Cannot add an uniform after UBO has been created.");this.addUniform(e,r),i=this._uniformLocations[e]}if(this._buffer||this.create(),this._dynamic)for(s=0;s<r;s++)this._bufferData[i+s]=t[s];else{for(var o=!1,s=0;s<r;s++)16!==r&&this._bufferData[i+s]===t[s]||(o=!0,this._bufferData[i+s]=t[s]);this._needSync=this._needSync||o}},UniformBuffer.prototype._cacheMatrix=function(e,t){var r=this._valueCache[e],n=t.updateFlag;return(void 0===r||r!==n)&&(this._valueCache[e]=n,!0)},UniformBuffer.prototype._updateMatrix3x3ForUniform=function(e,t){for(var r=0;r<3;r++)UniformBuffer._tempBuffer[4*r]=t[3*r],UniformBuffer._tempBuffer[4*r+1]=t[3*r+1],UniformBuffer._tempBuffer[4*r+2]=t[3*r+2],UniformBuffer._tempBuffer[4*r+3]=0;this.updateUniform(e,UniformBuffer._tempBuffer,12)},UniformBuffer.prototype._updateMatrix3x3ForEffect=function(e,t){this._currentEffect.setMatrix3x3(e,t)},UniformBuffer.prototype._updateMatrix2x2ForEffect=function(e,t){this._currentEffect.setMatrix2x2(e,t)},UniformBuffer.prototype._updateMatrix2x2ForUniform=function(e,t){for(var r=0;r<2;r++)UniformBuffer._tempBuffer[4*r]=t[2*r],UniformBuffer._tempBuffer[4*r+1]=t[2*r+1],UniformBuffer._tempBuffer[4*r+2]=0,UniformBuffer._tempBuffer[4*r+3]=0;this.updateUniform(e,UniformBuffer._tempBuffer,8)},UniformBuffer.prototype._updateFloatForEffect=function(e,t){this._currentEffect.setFloat(e,t)},UniformBuffer.prototype._updateFloatForUniform=function(e,t){UniformBuffer._tempBuffer[0]=t,this.updateUniform(e,UniformBuffer._tempBuffer,1)},UniformBuffer.prototype._updateFloat2ForEffect=function(e,t,r,n){void 0===n&&(n=""),this._currentEffect.setFloat2(e+n,t,r)},UniformBuffer.prototype._updateFloat2ForUniform=function(e,t,r){UniformBuffer._tempBuffer[0]=t,UniformBuffer._tempBuffer[1]=r,this.updateUniform(e,UniformBuffer._tempBuffer,2)},UniformBuffer.prototype._updateFloat3ForEffect=function(e,t,r,n,i){void 0===i&&(i=""),this._currentEffect.setFloat3(e+i,t,r,n)},UniformBuffer.prototype._updateFloat3ForUniform=function(e,t,r,n){UniformBuffer._tempBuffer[0]=t,UniformBuffer._tempBuffer[1]=r,UniformBuffer._tempBuffer[2]=n,this.updateUniform(e,UniformBuffer._tempBuffer,3)},UniformBuffer.prototype._updateFloat4ForEffect=function(e,t,r,n,i,o){void 0===o&&(o=""),this._currentEffect.setFloat4(e+o,t,r,n,i)},UniformBuffer.prototype._updateFloat4ForUniform=function(e,t,r,n,i){UniformBuffer._tempBuffer[0]=t,UniformBuffer._tempBuffer[1]=r,UniformBuffer._tempBuffer[2]=n,UniformBuffer._tempBuffer[3]=i,this.updateUniform(e,UniformBuffer._tempBuffer,4)},UniformBuffer.prototype._updateMatrixForEffect=function(e,t){this._currentEffect.setMatrix(e,t)},UniformBuffer.prototype._updateMatrixForUniform=function(e,t){this._cacheMatrix(e,t)&&this.updateUniform(e,t.toArray(),16)},UniformBuffer.prototype._updateVector3ForEffect=function(e,t){this._currentEffect.setVector3(e,t)},UniformBuffer.prototype._updateVector3ForUniform=function(e,t){t.toArray(UniformBuffer._tempBuffer),this.updateUniform(e,UniformBuffer._tempBuffer,3)},UniformBuffer.prototype._updateVector4ForEffect=function(e,t){this._currentEffect.setVector4(e,t)},UniformBuffer.prototype._updateVector4ForUniform=function(e,t){t.toArray(UniformBuffer._tempBuffer),this.updateUniform(e,UniformBuffer._tempBuffer,4)},UniformBuffer.prototype._updateColor3ForEffect=function(e,t,r){void 0===r&&(r=""),this._currentEffect.setColor3(e+r,t)},UniformBuffer.prototype._updateColor3ForUniform=function(e,t){t.toArray(UniformBuffer._tempBuffer),this.updateUniform(e,UniformBuffer._tempBuffer,3)},UniformBuffer.prototype._updateColor4ForEffect=function(e,t,r,n){void 0===n&&(n=""),this._currentEffect.setColor4(e+n,t,r)},UniformBuffer.prototype._updateColor4ForUniform=function(e,t,r){t.toArray(UniformBuffer._tempBuffer),UniformBuffer._tempBuffer[3]=r,this.updateUniform(e,UniformBuffer._tempBuffer,4)},UniformBuffer.prototype.setTexture=function(e,t){this._currentEffect.setTexture(e,t)},UniformBuffer.prototype.updateUniformDirectly=function(e,t){this.updateUniform(e,t,t.length),this.update()},UniformBuffer.prototype.bindToEffect=function(e,t){this._currentEffect=e,!this._noUBO&&this._buffer&&(this._alreadyBound=!0,e.bindUniformBuffer(this._buffer,t))},UniformBuffer.prototype.dispose=function(){if(!this._noUBO){var e=this._engine._uniformBuffers,t=e.indexOf(this);-1!==t&&(e[t]=e[e.length-1],e.pop()),this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)}},UniformBuffer._MAX_UNIFORM_SIZE=256,UniformBuffer._tempBuffer=new Float32Array(UniformBuffer._MAX_UNIFORM_SIZE),UniformBuffer}())},"./node_modules/@babylonjs/core/Maths/math.axis.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Space",(function(){return n})),r.d(t,"Axis",(function(){return s})),r.d(t,"Coordinate",(function(){return o}));var n,i=r("./node_modules/@babylonjs/core/Maths/math.vector.js");(function(e){e[e["LOCAL"]=0]="LOCAL",e[e["WORLD"]=1]="WORLD",e[e["BONE"]=2]="BONE"})(n||(n={}));var o,s=function(){function Axis(){}return Axis.X=new i["Vector3"](1,0,0),Axis.Y=new i["Vector3"](0,1,0),Axis.Z=new i["Vector3"](0,0,1),Axis}();(function(e){e[e["X"]=0]="X",e[e["Y"]=1]="Y",e[e["Z"]=2]="Z"})(o||(o={}))},"./node_modules/@babylonjs/core/Maths/math.color.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Color3",(function(){return a})),r.d(t,"Color4",(function(){return u})),r.d(t,"TmpColors",(function(){return c}));var n=r("./node_modules/@babylonjs/core/Maths/math.scalar.js"),i=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),o=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),s=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),a=function(){function Color3(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.r=e,this.g=t,this.b=r}return Color3.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},Color3.prototype.getClassName=function(){return"Color3"},Color3.prototype.getHashCode=function(){var e=255*this.r|0;return e=397*e^(255*this.g|0),e=397*e^(255*this.b|0),e},Color3.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,this},Color3.prototype.fromArray=function(e,t){return void 0===t&&(t=0),Color3.FromArrayToRef(e,t,this),this},Color3.prototype.toColor4=function(e){return void 0===e&&(e=1),new u(this.r,this.g,this.b,e)},Color3.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},Color3.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},Color3.prototype.multiply=function(e){return new Color3(this.r*e.r,this.g*e.g,this.b*e.b)},Color3.prototype.multiplyToRef=function(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,this},Color3.prototype.equals=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b},Color3.prototype.equalsFloats=function(e,t,r){return this.r===e&&this.g===t&&this.b===r},Color3.prototype.scale=function(e){return new Color3(this.r*e,this.g*e,this.b*e)},Color3.prototype.scaleToRef=function(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,this},Color3.prototype.scaleAndAddToRef=function(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,this},Color3.prototype.clampToRef=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=1),r.r=n["Scalar"].Clamp(this.r,e,t),r.g=n["Scalar"].Clamp(this.g,e,t),r.b=n["Scalar"].Clamp(this.b,e,t),this},Color3.prototype.add=function(e){return new Color3(this.r+e.r,this.g+e.g,this.b+e.b)},Color3.prototype.addToRef=function(e,t){return t.r=this.r+e.r,t.g=this.g+e.g,t.b=this.b+e.b,this},Color3.prototype.subtract=function(e){return new Color3(this.r-e.r,this.g-e.g,this.b-e.b)},Color3.prototype.subtractToRef=function(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,this},Color3.prototype.clone=function(){return new Color3(this.r,this.g,this.b)},Color3.prototype.copyFrom=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},Color3.prototype.copyFromFloats=function(e,t,r){return this.r=e,this.g=t,this.b=r,this},Color3.prototype.set=function(e,t,r){return this.copyFromFloats(e,t,r)},Color3.prototype.toHexString=function(){var e=255*this.r|0,t=255*this.g|0,r=255*this.b|0;return"#"+n["Scalar"].ToHex(e)+n["Scalar"].ToHex(t)+n["Scalar"].ToHex(r)},Color3.prototype.toLinearSpace=function(){var e=new Color3;return this.toLinearSpaceToRef(e),e},Color3.prototype.toHSV=function(){var e=new Color3;return this.toHSVToRef(e),e},Color3.prototype.toHSVToRef=function(e){var t=this.r,r=this.g,n=this.b,i=Math.max(t,r,n),o=Math.min(t,r,n),s=0,a=0,u=i,c=i-o;0!==i&&(a=c/i),i!=o&&(i==t?(s=(r-n)/c,r<n&&(s+=6)):i==r?s=(n-t)/c+2:i==n&&(s=(t-r)/c+4),s*=60),e.r=s,e.g=a,e.b=u},Color3.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,i["ToLinearSpace"]),e.g=Math.pow(this.g,i["ToLinearSpace"]),e.b=Math.pow(this.b,i["ToLinearSpace"]),this},Color3.prototype.toGammaSpace=function(){var e=new Color3;return this.toGammaSpaceToRef(e),e},Color3.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,i["ToGammaSpace"]),e.g=Math.pow(this.g,i["ToGammaSpace"]),e.b=Math.pow(this.b,i["ToGammaSpace"]),this},Color3.HSVtoRGBToRef=function(e,t,r,n){var i=r*t,o=e/60,s=i*(1-Math.abs(o%2-1)),a=0,u=0,c=0;o>=0&&o<=1?(a=i,u=s):o>=1&&o<=2?(a=s,u=i):o>=2&&o<=3?(u=i,c=s):o>=3&&o<=4?(u=s,c=i):o>=4&&o<=5?(a=s,c=i):o>=5&&o<=6&&(a=i,c=s);var l=r-i;n.set(a+l,u+l,c+l)},Color3.FromHexString=function(e){if("#"!==e.substring(0,1)||7!==e.length)return new Color3(0,0,0);var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Color3.FromInts(t,r,n)},Color3.FromArray=function(e,t){return void 0===t&&(t=0),new Color3(e[t],e[t+1],e[t+2])},Color3.FromArrayToRef=function(e,t,r){void 0===t&&(t=0),r.r=e[t],r.g=e[t+1],r.b=e[t+2]},Color3.FromInts=function(e,t,r){return new Color3(e/255,t/255,r/255)},Color3.Lerp=function(e,t,r){var n=new Color3(0,0,0);return Color3.LerpToRef(e,t,r,n),n},Color3.LerpToRef=function(e,t,r,n){n.r=e.r+(t.r-e.r)*r,n.g=e.g+(t.g-e.g)*r,n.b=e.b+(t.b-e.b)*r},Color3.Red=function(){return new Color3(1,0,0)},Color3.Green=function(){return new Color3(0,1,0)},Color3.Blue=function(){return new Color3(0,0,1)},Color3.Black=function(){return new Color3(0,0,0)},Object.defineProperty(Color3,"BlackReadOnly",{get:function(){return Color3._BlackReadOnly},enumerable:!1,configurable:!0}),Color3.White=function(){return new Color3(1,1,1)},Color3.Purple=function(){return new Color3(.5,0,.5)},Color3.Magenta=function(){return new Color3(1,0,1)},Color3.Yellow=function(){return new Color3(1,1,0)},Color3.Gray=function(){return new Color3(.5,.5,.5)},Color3.Teal=function(){return new Color3(0,1,1)},Color3.Random=function(){return new Color3(Math.random(),Math.random(),Math.random())},Color3._BlackReadOnly=Color3.Black(),Color3}(),u=function(){function Color4(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n}return Color4.prototype.addInPlace=function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this},Color4.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},Color4.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e[t+3]=this.a,this},Color4.prototype.fromArray=function(e,t){return void 0===t&&(t=0),Color4.FromArrayToRef(e,t,this),this},Color4.prototype.equals=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a},Color4.prototype.add=function(e){return new Color4(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)},Color4.prototype.subtract=function(e){return new Color4(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)},Color4.prototype.subtractToRef=function(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,t.a=this.a-e.a,this},Color4.prototype.scale=function(e){return new Color4(this.r*e,this.g*e,this.b*e,this.a*e)},Color4.prototype.scaleToRef=function(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,t.a=this.a*e,this},Color4.prototype.scaleAndAddToRef=function(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,t.a+=this.a*e,this},Color4.prototype.clampToRef=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=1),r.r=n["Scalar"].Clamp(this.r,e,t),r.g=n["Scalar"].Clamp(this.g,e,t),r.b=n["Scalar"].Clamp(this.b,e,t),r.a=n["Scalar"].Clamp(this.a,e,t),this},Color4.prototype.multiply=function(e){return new Color4(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)},Color4.prototype.multiplyToRef=function(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,t.a=this.a*e.a,t},Color4.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},Color4.prototype.getClassName=function(){return"Color4"},Color4.prototype.getHashCode=function(){var e=255*this.r|0;return e=397*e^(255*this.g|0),e=397*e^(255*this.b|0),e=397*e^(255*this.a|0),e},Color4.prototype.clone=function(){return new Color4(this.r,this.g,this.b,this.a)},Color4.prototype.copyFrom=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},Color4.prototype.copyFromFloats=function(e,t,r,n){return this.r=e,this.g=t,this.b=r,this.a=n,this},Color4.prototype.set=function(e,t,r,n){return this.copyFromFloats(e,t,r,n)},Color4.prototype.toHexString=function(e){void 0===e&&(e=!1);var t=255*this.r|0,r=255*this.g|0,i=255*this.b|0;if(e)return"#"+n["Scalar"].ToHex(t)+n["Scalar"].ToHex(r)+n["Scalar"].ToHex(i);var o=255*this.a|0;return"#"+n["Scalar"].ToHex(t)+n["Scalar"].ToHex(r)+n["Scalar"].ToHex(i)+n["Scalar"].ToHex(o)},Color4.prototype.toLinearSpace=function(){var e=new Color4;return this.toLinearSpaceToRef(e),e},Color4.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,i["ToLinearSpace"]),e.g=Math.pow(this.g,i["ToLinearSpace"]),e.b=Math.pow(this.b,i["ToLinearSpace"]),e.a=this.a,this},Color4.prototype.toGammaSpace=function(){var e=new Color4;return this.toGammaSpaceToRef(e),e},Color4.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,i["ToGammaSpace"]),e.g=Math.pow(this.g,i["ToGammaSpace"]),e.b=Math.pow(this.b,i["ToGammaSpace"]),e.a=this.a,this},Color4.FromHexString=function(e){if("#"!==e.substring(0,1)||9!==e.length)return new Color4(0,0,0,0);var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16),i=parseInt(e.substring(7,9),16);return Color4.FromInts(t,r,n,i)},Color4.Lerp=function(e,t,r){var n=new Color4(0,0,0,0);return Color4.LerpToRef(e,t,r,n),n},Color4.LerpToRef=function(e,t,r,n){n.r=e.r+(t.r-e.r)*r,n.g=e.g+(t.g-e.g)*r,n.b=e.b+(t.b-e.b)*r,n.a=e.a+(t.a-e.a)*r},Color4.FromColor3=function(e,t){return void 0===t&&(t=1),new Color4(e.r,e.g,e.b,t)},Color4.FromArray=function(e,t){return void 0===t&&(t=0),new Color4(e[t],e[t+1],e[t+2],e[t+3])},Color4.FromArrayToRef=function(e,t,r){void 0===t&&(t=0),r.r=e[t],r.g=e[t+1],r.b=e[t+2],r.a=e[t+3]},Color4.FromInts=function(e,t,r,n){return new Color4(e/255,t/255,r/255,n/255)},Color4.CheckColors4=function(e,t){if(e.length===3*t){for(var r=[],n=0;n<e.length;n+=3){var i=n/3*4;r[i]=e[n],r[i+1]=e[n+1],r[i+2]=e[n+2],r[i+3]=1}return r}return e},Color4}(),c=function(){function TmpColors(){}return TmpColors.Color3=o["ArrayTools"].BuildArray(3,a.Black),TmpColors.Color4=o["ArrayTools"].BuildArray(3,(function(){return new u(0,0,0,0)})),TmpColors}();s["_TypeStore"].RegisteredTypes["BABYLON.Color3"]=a,s["_TypeStore"].RegisteredTypes["BABYLON.Color4"]=u},"./node_modules/@babylonjs/core/Maths/math.constants.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ToGammaSpace",(function(){return n})),r.d(t,"ToLinearSpace",(function(){return i})),r.d(t,"Epsilon",(function(){return o}));var n=1/2.2,i=2.2,o=.001},"./node_modules/@babylonjs/core/Maths/math.frustum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Frustum",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Maths/math.plane.js"),i=function(){function Frustum(){}return Frustum.GetPlanes=function(e){for(var t=[],r=0;r<6;r++)t.push(new n["Plane"](0,0,0,0));return Frustum.GetPlanesToRef(e,t),t},Frustum.GetNearPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]+r[2],t.normal.y=r[7]+r[6],t.normal.z=r[11]+r[10],t.d=r[15]+r[14],t.normalize()},Frustum.GetFarPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]-r[2],t.normal.y=r[7]-r[6],t.normal.z=r[11]-r[10],t.d=r[15]-r[14],t.normalize()},Frustum.GetLeftPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]+r[0],t.normal.y=r[7]+r[4],t.normal.z=r[11]+r[8],t.d=r[15]+r[12],t.normalize()},Frustum.GetRightPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]-r[0],t.normal.y=r[7]-r[4],t.normal.z=r[11]-r[8],t.d=r[15]-r[12],t.normalize()},Frustum.GetTopPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]-r[1],t.normal.y=r[7]-r[5],t.normal.z=r[11]-r[9],t.d=r[15]-r[13],t.normalize()},Frustum.GetBottomPlaneToRef=function(e,t){var r=e.m;t.normal.x=r[3]+r[1],t.normal.y=r[7]+r[5],t.normal.z=r[11]+r[9],t.d=r[15]+r[13],t.normalize()},Frustum.GetPlanesToRef=function(e,t){Frustum.GetNearPlaneToRef(e,t[0]),Frustum.GetFarPlaneToRef(e,t[1]),Frustum.GetLeftPlaneToRef(e,t[2]),Frustum.GetRightPlaneToRef(e,t[3]),Frustum.GetTopPlaneToRef(e,t[4]),Frustum.GetBottomPlaneToRef(e,t[5])},Frustum}()},"./node_modules/@babylonjs/core/Maths/math.functions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"extractMinAndMaxIndexed",(function(){return extractMinAndMaxIndexed})),r.d(t,"extractMinAndMax",(function(){return extractMinAndMax}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js");function extractMinAndMaxIndexed(e,t,r,i,o){void 0===o&&(o=null);for(var s=new n["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new n["Vector3"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u=r;u<r+i;u++){var c=3*t[u],l=e[c],d=e[c+1],h=e[c+2];s.minimizeInPlaceFromFloats(l,d,h),a.maximizeInPlaceFromFloats(l,d,h)}return o&&(s.x-=s.x*o.x+o.y,s.y-=s.y*o.x+o.y,s.z-=s.z*o.x+o.y,a.x+=a.x*o.x+o.y,a.y+=a.y*o.x+o.y,a.z+=a.z*o.x+o.y),{minimum:s,maximum:a}}function extractMinAndMax(e,t,r,i,o){void 0===i&&(i=null);var s=new n["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new n["Vector3"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);o||(o=3);for(var u=t,c=t*o;u<t+r;u++,c+=o){var l=e[c],d=e[c+1],h=e[c+2];s.minimizeInPlaceFromFloats(l,d,h),a.maximizeInPlaceFromFloats(l,d,h)}return i&&(s.x-=s.x*i.x+i.y,s.y-=s.y*i.x+i.y,s.z-=s.z*i.x+i.y,a.x+=a.x*i.x+i.y,a.y+=a.y*i.x+i.y,a.z+=a.z*i.x+i.y),{minimum:s,maximum:a}}},"./node_modules/@babylonjs/core/Maths/math.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babylonjs/core/Maths/math.axis.js");r.d(t,"Space",(function(){return n["Space"]})),r.d(t,"Axis",(function(){return n["Axis"]})),r.d(t,"Coordinate",(function(){return n["Coordinate"]}));var i=r("./node_modules/@babylonjs/core/Maths/math.color.js");r.d(t,"Color3",(function(){return i["Color3"]})),r.d(t,"Color4",(function(){return i["Color4"]})),r.d(t,"TmpColors",(function(){return i["TmpColors"]}));var o=r("./node_modules/@babylonjs/core/Maths/math.constants.js");r.d(t,"ToGammaSpace",(function(){return o["ToGammaSpace"]})),r.d(t,"ToLinearSpace",(function(){return o["ToLinearSpace"]})),r.d(t,"Epsilon",(function(){return o["Epsilon"]}));var s=r("./node_modules/@babylonjs/core/Maths/math.frustum.js");r.d(t,"Frustum",(function(){return s["Frustum"]}));var a=r("./node_modules/@babylonjs/core/Maths/math.path.js");r.d(t,"Orientation",(function(){return a["Orientation"]})),r.d(t,"BezierCurve",(function(){return a["BezierCurve"]})),r.d(t,"Angle",(function(){return a["Angle"]})),r.d(t,"Arc2",(function(){return a["Arc2"]})),r.d(t,"Path2",(function(){return a["Path2"]})),r.d(t,"Path3D",(function(){return a["Path3D"]})),r.d(t,"Curve3",(function(){return a["Curve3"]}));var u=r("./node_modules/@babylonjs/core/Maths/math.plane.js");r.d(t,"Plane",(function(){return u["Plane"]}));var c=r("./node_modules/@babylonjs/core/Maths/math.size.js");r.d(t,"Size",(function(){return c["Size"]}));var l=r("./node_modules/@babylonjs/core/Maths/math.vector.js");r.d(t,"Vector2",(function(){return l["Vector2"]})),r.d(t,"Vector3",(function(){return l["Vector3"]})),r.d(t,"Vector4",(function(){return l["Vector4"]})),r.d(t,"Quaternion",(function(){return l["Quaternion"]})),r.d(t,"Matrix",(function(){return l["Matrix"]})),r.d(t,"TmpVectors",(function(){return l["TmpVectors"]}));var d=r("./node_modules/@babylonjs/core/Maths/math.vertexFormat.js");r.d(t,"PositionNormalVertex",(function(){return d["PositionNormalVertex"]})),r.d(t,"PositionNormalTextureVertex",(function(){return d["PositionNormalTextureVertex"]}));var h=r("./node_modules/@babylonjs/core/Maths/math.viewport.js");r.d(t,"Viewport",(function(){return h["Viewport"]}))},"./node_modules/@babylonjs/core/Maths/math.path.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Orientation",(function(){return n})),r.d(t,"BezierCurve",(function(){return a})),r.d(t,"Angle",(function(){return u})),r.d(t,"Arc2",(function(){return c})),r.d(t,"Path2",(function(){return l})),r.d(t,"Path3D",(function(){return d})),r.d(t,"Curve3",(function(){return h}));var n,i=r("./node_modules/@babylonjs/core/Maths/math.scalar.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Maths/math.constants.js");(function(e){e[e["CW"]=0]="CW",e[e["CCW"]=1]="CCW"})(n||(n={}));var a=function(){function BezierCurve(){}return BezierCurve.Interpolate=function(e,t,r,n,i){for(var o=1-3*n+3*t,s=3*n-6*t,a=3*t,u=e,c=0;c<5;c++){var l=u*u,d=l*u,h=o*d+s*l+a*u,f=1/(3*o*l+2*s*u+a);u-=(h-e)*f,u=Math.min(1,Math.max(0,u))}return 3*Math.pow(1-u,2)*u*r+3*(1-u)*Math.pow(u,2)*i+Math.pow(u,3)},BezierCurve}(),u=function(){function Angle(e){this._radians=e,this._radians<0&&(this._radians+=2*Math.PI)}return Angle.prototype.degrees=function(){return 180*this._radians/Math.PI},Angle.prototype.radians=function(){return this._radians},Angle.BetweenTwoPoints=function(e,t){var r=t.subtract(e),n=Math.atan2(r.y,r.x);return new Angle(n)},Angle.FromRadians=function(e){return new Angle(e)},Angle.FromDegrees=function(e){return new Angle(e*Math.PI/180)},Angle}(),c=function(){function Arc2(e,t,r){this.startPoint=e,this.midPoint=t,this.endPoint=r;var i=Math.pow(t.x,2)+Math.pow(t.y,2),s=(Math.pow(e.x,2)+Math.pow(e.y,2)-i)/2,a=(i-Math.pow(r.x,2)-Math.pow(r.y,2))/2,c=(e.x-t.x)*(t.y-r.y)-(t.x-r.x)*(e.y-t.y);this.centerPoint=new o["Vector2"]((s*(t.y-r.y)-a*(e.y-t.y))/c,((e.x-t.x)*a-(t.x-r.x)*s)/c),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=u.BetweenTwoPoints(this.centerPoint,this.startPoint);var l=this.startAngle.degrees(),d=u.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),h=u.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();d-l>180&&(d-=360),d-l<-180&&(d+=360),h-d>180&&(h-=360),h-d<-180&&(h+=360),this.orientation=d-l<0?n.CW:n.CCW,this.angle=u.FromDegrees(this.orientation===n.CW?l-h:h-l)}return Arc2}(),l=function(){function Path2(e,t){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new o["Vector2"](e,t))}return Path2.prototype.addLineTo=function(e,t){if(this.closed)return this;var r=new o["Vector2"](e,t),n=this._points[this._points.length-1];return this._points.push(r),this._length+=r.subtract(n).length(),this},Path2.prototype.addArcTo=function(e,t,r,i,s){if(void 0===s&&(s=36),this.closed)return this;var a=this._points[this._points.length-1],u=new o["Vector2"](e,t),l=new o["Vector2"](r,i),d=new c(a,u,l),h=d.angle.radians()/s;d.orientation===n.CW&&(h*=-1);for(var f=d.startAngle.radians()+h,p=0;p<s;p++){var m=Math.cos(f)*d.radius+d.centerPoint.x,_=Math.sin(f)*d.radius+d.centerPoint.y;this.addLineTo(m,_),f+=h}return this},Path2.prototype.close=function(){return this.closed=!0,this},Path2.prototype.length=function(){var e=this._length;if(this.closed){var t=this._points[this._points.length-1],r=this._points[0];e+=r.subtract(t).length()}return e},Path2.prototype.getPoints=function(){return this._points},Path2.prototype.getPointAtLengthPosition=function(e){if(e<0||e>1)return o["Vector2"].Zero();for(var t=e*this.length(),r=0,n=0;n<this._points.length;n++){var i=(n+1)%this._points.length,s=this._points[n],a=this._points[i],u=a.subtract(s),c=u.length()+r;if(t>=r&&t<=c){var l=u.normalize(),d=t-r;return new o["Vector2"](s.x+l.x*d,s.y+l.y*d)}r=c}return o["Vector2"].Zero()},Path2.StartingAt=function(e,t){return new Path2(e,t)},Path2}(),d=function(){function Path3D(e,t,r,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.path=e,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array,this._pointAtData={id:0,point:o["Vector3"].Zero(),previousPointArrayIndex:0,position:0,subPosition:0,interpolateReady:!1,interpolationMatrix:o["Matrix"].Identity()};for(var i=0;i<e.length;i++)this._curve[i]=e[i].clone();this._raw=r||!1,this._alignTangentsWithPath=n,this._compute(t,n)}return Path3D.prototype.getCurve=function(){return this._curve},Path3D.prototype.getPoints=function(){return this._curve},Path3D.prototype.length=function(){return this._distances[this._distances.length-1]},Path3D.prototype.getTangents=function(){return this._tangents},Path3D.prototype.getNormals=function(){return this._normals},Path3D.prototype.getBinormals=function(){return this._binormals},Path3D.prototype.getDistances=function(){return this._distances},Path3D.prototype.getPointAt=function(e){return this._updatePointAtData(e).point},Path3D.prototype.getTangentAt=function(e,t){return void 0===t&&(t=!1),this._updatePointAtData(e,t),t?o["Vector3"].TransformCoordinates(o["Vector3"].Forward(),this._pointAtData.interpolationMatrix):this._tangents[this._pointAtData.previousPointArrayIndex]},Path3D.prototype.getNormalAt=function(e,t){return void 0===t&&(t=!1),this._updatePointAtData(e,t),t?o["Vector3"].TransformCoordinates(o["Vector3"].Right(),this._pointAtData.interpolationMatrix):this._normals[this._pointAtData.previousPointArrayIndex]},Path3D.prototype.getBinormalAt=function(e,t){return void 0===t&&(t=!1),this._updatePointAtData(e,t),t?o["Vector3"].TransformCoordinates(o["Vector3"].UpReadOnly,this._pointAtData.interpolationMatrix):this._binormals[this._pointAtData.previousPointArrayIndex]},Path3D.prototype.getDistanceAt=function(e){return this.length()*e},Path3D.prototype.getPreviousPointIndexAt=function(e){return this._updatePointAtData(e),this._pointAtData.previousPointArrayIndex},Path3D.prototype.getSubPositionAt=function(e){return this._updatePointAtData(e),this._pointAtData.subPosition},Path3D.prototype.getClosestPositionTo=function(e){for(var t=Number.MAX_VALUE,r=0,n=0;n<this._curve.length-1;n++){var i=this._curve[n+0],s=this._curve[n+1].subtract(i).normalize(),a=this._distances[n+1]-this._distances[n+0],u=Math.min(Math.max(o["Vector3"].Dot(s,e.subtract(i).normalize()),0)*o["Vector3"].Distance(i,e)/a,1),c=o["Vector3"].Distance(i.add(s.scale(u*a)),e);c<t&&(t=c,r=(this._distances[n+0]+a*u)/this.length())}return r},Path3D.prototype.slice=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e<0&&(e=1- -1*e%1),t<0&&(t=1- -1*t%1),e>t){var r=e;e=t,t=r}var n=this.getCurve(),i=this.getPointAt(e),o=this.getPreviousPointIndexAt(e),s=this.getPointAt(t),a=this.getPreviousPointIndexAt(t)+1,u=[];return 0!==e&&(o++,u.push(i)),u.push.apply(u,n.slice(o,a)),1===t&&1!==e||u.push(s),new Path3D(u,this.getNormalAt(e),this._raw,this._alignTangentsWithPath)},Path3D.prototype.update=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1);for(var n=0;n<e.length;n++)this._curve[n].x=e[n].x,this._curve[n].y=e[n].y,this._curve[n].z=e[n].z;return this._compute(t,r),this},Path3D.prototype._compute=function(e,t){void 0===t&&(t=!1);var r=this._curve.length;if(!(r<2)){this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[r-1]=this._curve[r-1].subtract(this._curve[r-2]),this._raw||this._tangents[r-1].normalize();var n,i,s,a,u,c=this._tangents[0],l=this._normalVector(c,e);this._normals[0]=l,this._raw||this._normals[0].normalize(),this._binormals[0]=o["Vector3"].Cross(c,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var d=1;d<r;d++)n=this._getLastNonNullVector(d),d<r-1&&(i=this._getFirstNonNullVector(d),this._tangents[d]=t?i:n.add(i),this._tangents[d].normalize()),this._distances[d]=this._distances[d-1]+this._curve[d].subtract(this._curve[d-1]).length(),s=this._tangents[d],u=this._binormals[d-1],this._normals[d]=o["Vector3"].Cross(u,s),this._raw||(0===this._normals[d].length()?(a=this._normals[d-1],this._normals[d]=a.clone()):this._normals[d].normalize()),this._binormals[d]=o["Vector3"].Cross(s,this._normals[d]),this._raw||this._binormals[d].normalize();this._pointAtData.id=NaN}},Path3D.prototype._getFirstNonNullVector=function(e){var t=1,r=this._curve[e+t].subtract(this._curve[e]);while(0===r.length()&&e+t+1<this._curve.length)t++,r=this._curve[e+t].subtract(this._curve[e]);return r},Path3D.prototype._getLastNonNullVector=function(e){var t=1,r=this._curve[e].subtract(this._curve[e-t]);while(0===r.length()&&e>t+1)t++,r=this._curve[e].subtract(this._curve[e-t]);return r},Path3D.prototype._normalVector=function(e,t){var r,n,a=e.length();(0===a&&(a=1),void 0===t||null===t)?(n=i["Scalar"].WithinEpsilon(Math.abs(e.y)/a,1,s["Epsilon"])?i["Scalar"].WithinEpsilon(Math.abs(e.x)/a,1,s["Epsilon"])?i["Scalar"].WithinEpsilon(Math.abs(e.z)/a,1,s["Epsilon"])?o["Vector3"].Zero():new o["Vector3"](0,0,1):new o["Vector3"](1,0,0):new o["Vector3"](0,-1,0),r=o["Vector3"].Cross(e,n)):(r=o["Vector3"].Cross(e,t),o["Vector3"].CrossToRef(r,e,r));return r.normalize(),r},Path3D.prototype._updatePointAtData=function(e,t){if(void 0===t&&(t=!1),this._pointAtData.id===e)return this._pointAtData.interpolateReady||this._updateInterpolationMatrix(),this._pointAtData;this._pointAtData.id=e;var r=this.getPoints();if(e<=0)return this._setPointAtData(0,0,r[0],0,t);if(e>=1)return this._setPointAtData(1,1,r[r.length-1],r.length-1,t);for(var n,i=r[0],s=0,a=e*this.length(),u=1;u<r.length;u++){n=r[u];var c=o["Vector3"].Distance(i,n);if(s+=c,s===a)return this._setPointAtData(e,1,n,u,t);if(s>a){var l=s-a,d=l/c,h=i.subtract(n),f=n.add(h.scaleInPlace(d));return this._setPointAtData(e,1-d,f,u-1,t)}i=n}return this._pointAtData},Path3D.prototype._setPointAtData=function(e,t,r,n,i){return this._pointAtData.point=r,this._pointAtData.position=e,this._pointAtData.subPosition=t,this._pointAtData.previousPointArrayIndex=n,this._pointAtData.interpolateReady=i,i&&this._updateInterpolationMatrix(),this._pointAtData},Path3D.prototype._updateInterpolationMatrix=function(){this._pointAtData.interpolationMatrix=o["Matrix"].Identity();var e=this._pointAtData.previousPointArrayIndex;if(e!==this._tangents.length-1){var t=e+1,r=this._tangents[e].clone(),n=this._normals[e].clone(),i=this._binormals[e].clone(),s=this._tangents[t].clone(),a=this._normals[t].clone(),u=this._binormals[t].clone(),c=o["Quaternion"].RotationQuaternionFromAxis(n,i,r),l=o["Quaternion"].RotationQuaternionFromAxis(a,u,s),d=o["Quaternion"].Slerp(c,l,this._pointAtData.subPosition);d.toRotationMatrix(this._pointAtData.interpolationMatrix)}},Path3D}(),h=function(){function Curve3(e){this._length=0,this._points=e,this._length=this._computeLength(e)}return Curve3.CreateQuadraticBezier=function(e,t,r,n){n=n>2?n:3;for(var i=new Array,equation=function(e,t,r,n){var i=(1-e)*(1-e)*t+2*e*(1-e)*r+e*e*n;return i},s=0;s<=n;s++)i.push(new o["Vector3"](equation(s/n,e.x,t.x,r.x),equation(s/n,e.y,t.y,r.y),equation(s/n,e.z,t.z,r.z)));return new Curve3(i)},Curve3.CreateCubicBezier=function(e,t,r,n,i){i=i>3?i:4;for(var s=new Array,equation=function(e,t,r,n,i){var o=(1-e)*(1-e)*(1-e)*t+3*e*(1-e)*(1-e)*r+3*e*e*(1-e)*n+e*e*e*i;return o},a=0;a<=i;a++)s.push(new o["Vector3"](equation(a/i,e.x,t.x,r.x,n.x),equation(a/i,e.y,t.y,r.y,n.y),equation(a/i,e.z,t.z,r.z,n.z)));return new Curve3(s)},Curve3.CreateHermiteSpline=function(e,t,r,n,i){for(var s=new Array,a=1/i,u=0;u<=i;u++)s.push(o["Vector3"].Hermite(e,t,r,n,u*a));return new Curve3(s)},Curve3.CreateCatmullRomSpline=function(e,t,r){var n=new Array,i=1/t,s=0;if(r){for(var a=e.length,u=0;u<a;u++){s=0;for(var c=0;c<t;c++)n.push(o["Vector3"].CatmullRom(e[u%a],e[(u+1)%a],e[(u+2)%a],e[(u+3)%a],s)),s+=i}n.push(n[0])}else{var l=new Array;l.push(e[0].clone()),Array.prototype.push.apply(l,e),l.push(e[e.length-1].clone());for(u=0;u<l.length-3;u++){s=0;for(c=0;c<t;c++)n.push(o["Vector3"].CatmullRom(l[u],l[u+1],l[u+2],l[u+3],s)),s+=i}u--,n.push(o["Vector3"].CatmullRom(l[u],l[u+1],l[u+2],l[u+3],s))}return new Curve3(n)},Curve3.prototype.getPoints=function(){return this._points},Curve3.prototype.length=function(){return this._length},Curve3.prototype.continue=function(e){for(var t=this._points[this._points.length-1],r=this._points.slice(),n=e.getPoints(),i=1;i<n.length;i++)r.push(n[i].subtract(n[0]).add(t));var o=new Curve3(r);return o},Curve3.prototype._computeLength=function(e){for(var t=0,r=1;r<e.length;r++)t+=e[r].subtract(e[r-1]).length();return t},Curve3}()},"./node_modules/@babylonjs/core/Maths/math.plane.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Plane",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=function(){function Plane(e,t,r,i){this.normal=new n["Vector3"](e,t,r),this.d=i}return Plane.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},Plane.prototype.clone=function(){return new Plane(this.normal.x,this.normal.y,this.normal.z,this.d)},Plane.prototype.getClassName=function(){return"Plane"},Plane.prototype.getHashCode=function(){var e=this.normal.getHashCode();return e=397*e^(0|this.d),e},Plane.prototype.normalize=function(){var e=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),t=0;return 0!==e&&(t=1/e),this.normal.x*=t,this.normal.y*=t,this.normal.z*=t,this.d*=t,this},Plane.prototype.transform=function(e){var t=Plane._TmpMatrix;e.invertToRef(t);var r=t.m,n=this.normal.x,i=this.normal.y,o=this.normal.z,s=this.d,a=n*r[0]+i*r[1]+o*r[2]+s*r[3],u=n*r[4]+i*r[5]+o*r[6]+s*r[7],c=n*r[8]+i*r[9]+o*r[10]+s*r[11],l=n*r[12]+i*r[13]+o*r[14]+s*r[15];return new Plane(a,u,c,l)},Plane.prototype.dotCoordinate=function(e){return this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z+this.d},Plane.prototype.copyFromPoints=function(e,t,r){var n,i=t.x-e.x,o=t.y-e.y,s=t.z-e.z,a=r.x-e.x,u=r.y-e.y,c=r.z-e.z,l=o*c-s*u,d=s*a-i*c,h=i*u-o*a,f=Math.sqrt(l*l+d*d+h*h);return n=0!==f?1/f:0,this.normal.x=l*n,this.normal.y=d*n,this.normal.z=h*n,this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),this},Plane.prototype.isFrontFacingTo=function(e,t){var r=n["Vector3"].Dot(this.normal,e);return r<=t},Plane.prototype.signedDistanceTo=function(e){return n["Vector3"].Dot(e,this.normal)+this.d},Plane.FromArray=function(e){return new Plane(e[0],e[1],e[2],e[3])},Plane.FromPoints=function(e,t,r){var n=new Plane(0,0,0,0);return n.copyFromPoints(e,t,r),n},Plane.FromPositionAndNormal=function(e,t){var r=new Plane(0,0,0,0);return t.normalize(),r.normal=t,r.d=-(t.x*e.x+t.y*e.y+t.z*e.z),r},Plane.SignedDistanceToPlaneFromPositionAndNormal=function(e,t,r){var i=-(t.x*e.x+t.y*e.y+t.z*e.z);return n["Vector3"].Dot(r,t)+i},Plane._TmpMatrix=n["Matrix"].Identity(),Plane}()},"./node_modules/@babylonjs/core/Maths/math.scalar.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Scalar",(function(){return n}));var n=function(){function Scalar(){}return Scalar.WithinEpsilon=function(e,t,r){void 0===r&&(r=1401298e-51);var n=e-t;return-r<=n&&n<=r},Scalar.ToHex=function(e){var t=e.toString(16);return e<=15?("0"+t).toUpperCase():t.toUpperCase()},Scalar.Sign=function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},Scalar.Clamp=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(r,Math.max(t,e))},Scalar.Log2=function(e){return Math.log(e)*Math.LOG2E},Scalar.Repeat=function(e,t){return e-Math.floor(e/t)*t},Scalar.Normalize=function(e,t,r){return(e-t)/(r-t)},Scalar.Denormalize=function(e,t,r){return e*(r-t)+t},Scalar.DeltaAngle=function(e,t){var r=Scalar.Repeat(t-e,360);return r>180&&(r-=360),r},Scalar.PingPong=function(e,t){var r=Scalar.Repeat(e,2*t);return t-Math.abs(r-t)},Scalar.SmoothStep=function(e,t,r){var n=Scalar.Clamp(r);return n=-2*n*n*n+3*n*n,t*n+e*(1-n)},Scalar.MoveTowards=function(e,t,r){var n=0;return n=Math.abs(t-e)<=r?t:e+Scalar.Sign(t-e)*r,n},Scalar.MoveTowardsAngle=function(e,t,r){var n=Scalar.DeltaAngle(e,t),i=0;return-r<n&&n<r?i=t:(t=e+n,i=Scalar.MoveTowards(e,t,r)),i},Scalar.Lerp=function(e,t,r){return e+(t-e)*r},Scalar.LerpAngle=function(e,t,r){var n=Scalar.Repeat(t-e,360);return n>180&&(n-=360),e+n*Scalar.Clamp(r)},Scalar.InverseLerp=function(e,t,r){var n=0;return n=e!=t?Scalar.Clamp((r-e)/(t-e)):0,n},Scalar.Hermite=function(e,t,r,n,i){var o=i*i,s=i*o,a=2*s-3*o+1,u=-2*s+3*o,c=s-2*o+i,l=s-o;return e*a+r*u+t*c+n*l},Scalar.RandomRange=function(e,t){return e===t?e:Math.random()*(t-e)+e},Scalar.RangeToPercent=function(e,t,r){return(e-t)/(r-t)},Scalar.PercentToRange=function(e,t,r){return(r-t)*e+t},Scalar.NormalizeRadians=function(e){return e-=Scalar.TwoPi*Math.floor((e+Math.PI)/Scalar.TwoPi),e},Scalar.TwoPi=2*Math.PI,Scalar}()},"./node_modules/@babylonjs/core/Maths/math.size.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Size",(function(){return n}));var n=function(){function Size(e,t){this.width=e,this.height=t}return Size.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},Size.prototype.getClassName=function(){return"Size"},Size.prototype.getHashCode=function(){var e=0|this.width;return e=397*e^(0|this.height),e},Size.prototype.copyFrom=function(e){this.width=e.width,this.height=e.height},Size.prototype.copyFromFloats=function(e,t){return this.width=e,this.height=t,this},Size.prototype.set=function(e,t){return this.copyFromFloats(e,t)},Size.prototype.multiplyByFloats=function(e,t){return new Size(this.width*e,this.height*t)},Size.prototype.clone=function(){return new Size(this.width,this.height)},Size.prototype.equals=function(e){return!!e&&(this.width===e.width&&this.height===e.height)},Object.defineProperty(Size.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),Size.Zero=function(){return new Size(0,0)},Size.prototype.add=function(e){var t=new Size(this.width+e.width,this.height+e.height);return t},Size.prototype.subtract=function(e){var t=new Size(this.width-e.width,this.height-e.height);return t},Size.Lerp=function(e,t,r){var n=e.width+(t.width-e.width)*r,i=e.height+(t.height-e.height)*r;return new Size(n,i)},Size}()},"./node_modules/@babylonjs/core/Maths/math.vector.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Vector2",(function(){return u})),r.d(t,"Vector3",(function(){return c})),r.d(t,"Vector4",(function(){return l})),r.d(t,"Quaternion",(function(){return d})),r.d(t,"Matrix",(function(){return h})),r.d(t,"TmpVectors",(function(){return p}));var n=r("./node_modules/@babylonjs/core/Maths/math.scalar.js"),i=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),o=r("./node_modules/@babylonjs/core/Misc/arrayTools.js"),s=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),a=r("./node_modules/@babylonjs/core/Engines/performanceConfigurator.js"),u=function(){function Vector2(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return Vector2.prototype.toString=function(){return"{X: "+this.x+" Y: "+this.y+"}"},Vector2.prototype.getClassName=function(){return"Vector2"},Vector2.prototype.getHashCode=function(){var e=0|this.x;return e=397*e^(0|this.y),e},Vector2.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,this},Vector2.prototype.fromArray=function(e,t){return void 0===t&&(t=0),Vector2.FromArrayToRef(e,t,this),this},Vector2.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},Vector2.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this},Vector2.prototype.copyFromFloats=function(e,t){return this.x=e,this.y=t,this},Vector2.prototype.set=function(e,t){return this.copyFromFloats(e,t)},Vector2.prototype.add=function(e){return new Vector2(this.x+e.x,this.y+e.y)},Vector2.prototype.addToRef=function(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,this},Vector2.prototype.addInPlace=function(e){return this.x+=e.x,this.y+=e.y,this},Vector2.prototype.addVector3=function(e){return new Vector2(this.x+e.x,this.y+e.y)},Vector2.prototype.subtract=function(e){return new Vector2(this.x-e.x,this.y-e.y)},Vector2.prototype.subtractToRef=function(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,this},Vector2.prototype.subtractInPlace=function(e){return this.x-=e.x,this.y-=e.y,this},Vector2.prototype.multiplyInPlace=function(e){return this.x*=e.x,this.y*=e.y,this},Vector2.prototype.multiply=function(e){return new Vector2(this.x*e.x,this.y*e.y)},Vector2.prototype.multiplyToRef=function(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,this},Vector2.prototype.multiplyByFloats=function(e,t){return new Vector2(this.x*e,this.y*t)},Vector2.prototype.divide=function(e){return new Vector2(this.x/e.x,this.y/e.y)},Vector2.prototype.divideToRef=function(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,this},Vector2.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},Vector2.prototype.negate=function(){return new Vector2(-this.x,-this.y)},Vector2.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this},Vector2.prototype.negateToRef=function(e){return e.copyFromFloats(-1*this.x,-1*this.y)},Vector2.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this},Vector2.prototype.scale=function(e){var t=new Vector2(0,0);return this.scaleToRef(e,t),t},Vector2.prototype.scaleToRef=function(e,t){return t.x=this.x*e,t.y=this.y*e,this},Vector2.prototype.scaleAndAddToRef=function(e,t){return t.x+=this.x*e,t.y+=this.y*e,this},Vector2.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y},Vector2.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=i["Epsilon"]),e&&n["Scalar"].WithinEpsilon(this.x,e.x,t)&&n["Scalar"].WithinEpsilon(this.y,e.y,t)},Vector2.prototype.floor=function(){return new Vector2(Math.floor(this.x),Math.floor(this.y))},Vector2.prototype.fract=function(){return new Vector2(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},Vector2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vector2.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},Vector2.prototype.normalize=function(){var e=this.length();return 0===e||(this.x/=e,this.y/=e),this},Vector2.prototype.clone=function(){return new Vector2(this.x,this.y)},Vector2.Zero=function(){return new Vector2(0,0)},Vector2.One=function(){return new Vector2(1,1)},Vector2.FromArray=function(e,t){return void 0===t&&(t=0),new Vector2(e[t],e[t+1])},Vector2.FromArrayToRef=function(e,t,r){r.x=e[t],r.y=e[t+1]},Vector2.CatmullRom=function(e,t,r,n,i){var o=i*i,s=i*o,a=.5*(2*t.x+(-e.x+r.x)*i+(2*e.x-5*t.x+4*r.x-n.x)*o+(-e.x+3*t.x-3*r.x+n.x)*s),u=.5*(2*t.y+(-e.y+r.y)*i+(2*e.y-5*t.y+4*r.y-n.y)*o+(-e.y+3*t.y-3*r.y+n.y)*s);return new Vector2(a,u)},Vector2.Clamp=function(e,t,r){var n=e.x;n=n>r.x?r.x:n,n=n<t.x?t.x:n;var i=e.y;return i=i>r.y?r.y:i,i=i<t.y?t.y:i,new Vector2(n,i)},Vector2.Hermite=function(e,t,r,n,i){var o=i*i,s=i*o,a=2*s-3*o+1,u=-2*s+3*o,c=s-2*o+i,l=s-o,d=e.x*a+r.x*u+t.x*c+n.x*l,h=e.y*a+r.y*u+t.y*c+n.y*l;return new Vector2(d,h)},Vector2.Lerp=function(e,t,r){var n=e.x+(t.x-e.x)*r,i=e.y+(t.y-e.y)*r;return new Vector2(n,i)},Vector2.Dot=function(e,t){return e.x*t.x+e.y*t.y},Vector2.Normalize=function(e){var t=e.clone();return t.normalize(),t},Vector2.Minimize=function(e,t){var r=e.x<t.x?e.x:t.x,n=e.y<t.y?e.y:t.y;return new Vector2(r,n)},Vector2.Maximize=function(e,t){var r=e.x>t.x?e.x:t.x,n=e.y>t.y?e.y:t.y;return new Vector2(r,n)},Vector2.Transform=function(e,t){var r=Vector2.Zero();return Vector2.TransformToRef(e,t,r),r},Vector2.TransformToRef=function(e,t,r){var n=t.m,i=e.x*n[0]+e.y*n[4]+n[12],o=e.x*n[1]+e.y*n[5]+n[13];r.x=i,r.y=o},Vector2.PointInTriangle=function(e,t,r,n){var i=.5*(-r.y*n.x+t.y*(-r.x+n.x)+t.x*(r.y-n.y)+r.x*n.y),o=i<0?-1:1,s=(t.y*n.x-t.x*n.y+(n.y-t.y)*e.x+(t.x-n.x)*e.y)*o,a=(t.x*r.y-t.y*r.x+(t.y-r.y)*e.x+(r.x-t.x)*e.y)*o;return s>0&&a>0&&s+a<2*i*o},Vector2.Distance=function(e,t){return Math.sqrt(Vector2.DistanceSquared(e,t))},Vector2.DistanceSquared=function(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n},Vector2.Center=function(e,t){var r=e.add(t);return r.scaleInPlace(.5),r},Vector2.DistanceOfPointFromSegment=function(e,t,r){var n=Vector2.DistanceSquared(t,r);if(0===n)return Vector2.Distance(e,t);var i=r.subtract(t),o=Math.max(0,Math.min(1,Vector2.Dot(e.subtract(t),i)/n)),s=t.add(i.multiplyByFloats(o,o));return Vector2.Distance(e,s)},Vector2}(),c=function(){function Vector3(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this._isDirty=!0,this._x=e,this._y=t,this._z=r}return Object.defineProperty(Vector3.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Vector3.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Vector3.prototype,"z",{get:function(){return this._z},set:function(e){this._z=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Vector3.prototype.toString=function(){return"{X: "+this._x+" Y:"+this._y+" Z:"+this._z+"}"},Vector3.prototype.getClassName=function(){return"Vector3"},Vector3.prototype.getHashCode=function(){var e=0|this._x;return e=397*e^(0|this._y),e=397*e^(0|this._z),e},Vector3.prototype.asArray=function(){var e=[];return this.toArray(e,0),e},Vector3.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,this},Vector3.prototype.fromArray=function(e,t){return void 0===t&&(t=0),Vector3.FromArrayToRef(e,t,this),this},Vector3.prototype.toQuaternion=function(){return d.RotationYawPitchRoll(this._y,this._x,this._z)},Vector3.prototype.addInPlace=function(e){return this.addInPlaceFromFloats(e._x,e._y,e._z)},Vector3.prototype.addInPlaceFromFloats=function(e,t,r){return this.x+=e,this.y+=t,this.z+=r,this},Vector3.prototype.add=function(e){return new Vector3(this._x+e._x,this._y+e._y,this._z+e._z)},Vector3.prototype.addToRef=function(e,t){return t.copyFromFloats(this._x+e._x,this._y+e._y,this._z+e._z)},Vector3.prototype.subtractInPlace=function(e){return this.x-=e._x,this.y-=e._y,this.z-=e._z,this},Vector3.prototype.subtract=function(e){return new Vector3(this._x-e._x,this._y-e._y,this._z-e._z)},Vector3.prototype.subtractToRef=function(e,t){return this.subtractFromFloatsToRef(e._x,e._y,e._z,t)},Vector3.prototype.subtractFromFloats=function(e,t,r){return new Vector3(this._x-e,this._y-t,this._z-r)},Vector3.prototype.subtractFromFloatsToRef=function(e,t,r,n){return n.copyFromFloats(this._x-e,this._y-t,this._z-r)},Vector3.prototype.negate=function(){return new Vector3(-this._x,-this._y,-this._z)},Vector3.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},Vector3.prototype.negateToRef=function(e){return e.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)},Vector3.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this},Vector3.prototype.scale=function(e){return new Vector3(this._x*e,this._y*e,this._z*e)},Vector3.prototype.scaleToRef=function(e,t){return t.copyFromFloats(this._x*e,this._y*e,this._z*e)},Vector3.prototype.scaleAndAddToRef=function(e,t){return t.addInPlaceFromFloats(this._x*e,this._y*e,this._z*e)},Vector3.prototype.projectOnPlane=function(e,t){var r=Vector3.Zero();return this.projectOnPlaneToRef(e,t,r),r},Vector3.prototype.projectOnPlaneToRef=function(e,t,r){var n=e.normal,i=e.d,o=f.Vector3[0];this.subtractToRef(t,o),o.normalize();var s=Vector3.Dot(o,n),a=-(Vector3.Dot(t,n)+i)/s,u=o.scaleInPlace(a);t.addToRef(u,r)},Vector3.prototype.equals=function(e){return e&&this._x===e._x&&this._y===e._y&&this._z===e._z},Vector3.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=i["Epsilon"]),e&&n["Scalar"].WithinEpsilon(this._x,e._x,t)&&n["Scalar"].WithinEpsilon(this._y,e._y,t)&&n["Scalar"].WithinEpsilon(this._z,e._z,t)},Vector3.prototype.equalsToFloats=function(e,t,r){return this._x===e&&this._y===t&&this._z===r},Vector3.prototype.multiplyInPlace=function(e){return this.x*=e._x,this.y*=e._y,this.z*=e._z,this},Vector3.prototype.multiply=function(e){return this.multiplyByFloats(e._x,e._y,e._z)},Vector3.prototype.multiplyToRef=function(e,t){return t.copyFromFloats(this._x*e._x,this._y*e._y,this._z*e._z)},Vector3.prototype.multiplyByFloats=function(e,t,r){return new Vector3(this._x*e,this._y*t,this._z*r)},Vector3.prototype.divide=function(e){return new Vector3(this._x/e._x,this._y/e._y,this._z/e._z)},Vector3.prototype.divideToRef=function(e,t){return t.copyFromFloats(this._x/e._x,this._y/e._y,this._z/e._z)},Vector3.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},Vector3.prototype.minimizeInPlace=function(e){return this.minimizeInPlaceFromFloats(e._x,e._y,e._z)},Vector3.prototype.maximizeInPlace=function(e){return this.maximizeInPlaceFromFloats(e._x,e._y,e._z)},Vector3.prototype.minimizeInPlaceFromFloats=function(e,t,r){return e<this._x&&(this.x=e),t<this._y&&(this.y=t),r<this._z&&(this.z=r),this},Vector3.prototype.maximizeInPlaceFromFloats=function(e,t,r){return e>this._x&&(this.x=e),t>this._y&&(this.y=t),r>this._z&&(this.z=r),this},Vector3.prototype.isNonUniformWithinEpsilon=function(e){var t=Math.abs(this._x),r=Math.abs(this._y);if(!n["Scalar"].WithinEpsilon(t,r,e))return!0;var i=Math.abs(this._z);return!n["Scalar"].WithinEpsilon(t,i,e)||!n["Scalar"].WithinEpsilon(r,i,e)},Object.defineProperty(Vector3.prototype,"isNonUniform",{get:function(){var e=Math.abs(this._x),t=Math.abs(this._y);if(e!==t)return!0;var r=Math.abs(this._z);return e!==r},enumerable:!1,configurable:!0}),Vector3.prototype.floor=function(){return new Vector3(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))},Vector3.prototype.fract=function(){return new Vector3(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))},Vector3.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)},Vector3.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z},Vector3.prototype.normalize=function(){return this.normalizeFromLength(this.length())},Vector3.prototype.reorderInPlace=function(e){var t=this;return e=e.toLowerCase(),"xyz"===e||(f.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(r,n){t[r]=f.Vector3[0][e[n]]}))),this},Vector3.prototype.rotateByQuaternionToRef=function(e,t){return e.toRotationMatrix(f.Matrix[0]),Vector3.TransformCoordinatesToRef(this,f.Matrix[0],t),t},Vector3.prototype.rotateByQuaternionAroundPointToRef=function(e,t,r){return this.subtractToRef(t,f.Vector3[0]),f.Vector3[0].rotateByQuaternionToRef(e,f.Vector3[0]),t.addToRef(f.Vector3[0],r),r},Vector3.prototype.cross=function(e){return Vector3.Cross(this,e)},Vector3.prototype.normalizeFromLength=function(e){return 0===e||1===e?this:this.scaleInPlace(1/e)},Vector3.prototype.normalizeToNew=function(){var e=new Vector3(0,0,0);return this.normalizeToRef(e),e},Vector3.prototype.normalizeToRef=function(e){var t=this.length();return 0===t||1===t?e.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/t,e)},Vector3.prototype.clone=function(){return new Vector3(this._x,this._y,this._z)},Vector3.prototype.copyFrom=function(e){return this.copyFromFloats(e._x,e._y,e._z)},Vector3.prototype.copyFromFloats=function(e,t,r){return this.x=e,this.y=t,this.z=r,this},Vector3.prototype.set=function(e,t,r){return this.copyFromFloats(e,t,r)},Vector3.prototype.setAll=function(e){return this.x=this.y=this.z=e,this},Vector3.GetClipFactor=function(e,t,r,n){var i=Vector3.Dot(e,r)-n,o=Vector3.Dot(t,r)-n,s=i/(i-o);return s},Vector3.GetAngleBetweenVectors=function(e,t,r){var n=e.normalizeToRef(f.Vector3[1]),i=t.normalizeToRef(f.Vector3[2]),o=Vector3.Dot(n,i),s=f.Vector3[3];return Vector3.CrossToRef(n,i,s),Vector3.Dot(s,r)>0?Math.acos(o):-Math.acos(o)},Vector3.FromArray=function(e,t){return void 0===t&&(t=0),new Vector3(e[t],e[t+1],e[t+2])},Vector3.FromFloatArray=function(e,t){return Vector3.FromArray(e,t)},Vector3.FromArrayToRef=function(e,t,r){r.x=e[t],r.y=e[t+1],r.z=e[t+2]},Vector3.FromFloatArrayToRef=function(e,t,r){return Vector3.FromArrayToRef(e,t,r)},Vector3.FromFloatsToRef=function(e,t,r,n){n.copyFromFloats(e,t,r)},Vector3.Zero=function(){return new Vector3(0,0,0)},Vector3.One=function(){return new Vector3(1,1,1)},Vector3.Up=function(){return new Vector3(0,1,0)},Object.defineProperty(Vector3,"UpReadOnly",{get:function(){return Vector3._UpReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(Vector3,"ZeroReadOnly",{get:function(){return Vector3._ZeroReadOnly},enumerable:!1,configurable:!0}),Vector3.Down=function(){return new Vector3(0,-1,0)},Vector3.Forward=function(e){return void 0===e&&(e=!1),new Vector3(0,0,e?-1:1)},Vector3.Backward=function(e){return void 0===e&&(e=!1),new Vector3(0,0,e?1:-1)},Vector3.Right=function(){return new Vector3(1,0,0)},Vector3.Left=function(){return new Vector3(-1,0,0)},Vector3.TransformCoordinates=function(e,t){var r=Vector3.Zero();return Vector3.TransformCoordinatesToRef(e,t,r),r},Vector3.TransformCoordinatesToRef=function(e,t,r){Vector3.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,t,r)},Vector3.TransformCoordinatesFromFloatsToRef=function(e,t,r,n,i){var o=n.m,s=e*o[0]+t*o[4]+r*o[8]+o[12],a=e*o[1]+t*o[5]+r*o[9]+o[13],u=e*o[2]+t*o[6]+r*o[10]+o[14],c=1/(e*o[3]+t*o[7]+r*o[11]+o[15]);i.x=s*c,i.y=a*c,i.z=u*c},Vector3.TransformNormal=function(e,t){var r=Vector3.Zero();return Vector3.TransformNormalToRef(e,t,r),r},Vector3.TransformNormalToRef=function(e,t,r){this.TransformNormalFromFloatsToRef(e._x,e._y,e._z,t,r)},Vector3.TransformNormalFromFloatsToRef=function(e,t,r,n,i){var o=n.m;i.x=e*o[0]+t*o[4]+r*o[8],i.y=e*o[1]+t*o[5]+r*o[9],i.z=e*o[2]+t*o[6]+r*o[10]},Vector3.CatmullRom=function(e,t,r,n,i){var o=i*i,s=i*o,a=.5*(2*t._x+(-e._x+r._x)*i+(2*e._x-5*t._x+4*r._x-n._x)*o+(-e._x+3*t._x-3*r._x+n._x)*s),u=.5*(2*t._y+(-e._y+r._y)*i+(2*e._y-5*t._y+4*r._y-n._y)*o+(-e._y+3*t._y-3*r._y+n._y)*s),c=.5*(2*t._z+(-e._z+r._z)*i+(2*e._z-5*t._z+4*r._z-n._z)*o+(-e._z+3*t._z-3*r._z+n._z)*s);return new Vector3(a,u,c)},Vector3.Clamp=function(e,t,r){var n=new Vector3;return Vector3.ClampToRef(e,t,r,n),n},Vector3.ClampToRef=function(e,t,r,n){var i=e._x;i=i>r._x?r._x:i,i=i<t._x?t._x:i;var o=e._y;o=o>r._y?r._y:o,o=o<t._y?t._y:o;var s=e._z;s=s>r._z?r._z:s,s=s<t._z?t._z:s,n.copyFromFloats(i,o,s)},Vector3.CheckExtends=function(e,t,r){t.minimizeInPlace(e),r.maximizeInPlace(e)},Vector3.Hermite=function(e,t,r,n,i){var o=i*i,s=i*o,a=2*s-3*o+1,u=-2*s+3*o,c=s-2*o+i,l=s-o,d=e._x*a+r._x*u+t._x*c+n._x*l,h=e._y*a+r._y*u+t._y*c+n._y*l,f=e._z*a+r._z*u+t._z*c+n._z*l;return new Vector3(d,h,f)},Vector3.Lerp=function(e,t,r){var n=new Vector3(0,0,0);return Vector3.LerpToRef(e,t,r,n),n},Vector3.LerpToRef=function(e,t,r,n){n.x=e._x+(t._x-e._x)*r,n.y=e._y+(t._y-e._y)*r,n.z=e._z+(t._z-e._z)*r},Vector3.Dot=function(e,t){return e._x*t._x+e._y*t._y+e._z*t._z},Vector3.Cross=function(e,t){var r=Vector3.Zero();return Vector3.CrossToRef(e,t,r),r},Vector3.CrossToRef=function(e,t,r){var n=e._y*t._z-e._z*t._y,i=e._z*t._x-e._x*t._z,o=e._x*t._y-e._y*t._x;r.copyFromFloats(n,i,o)},Vector3.Normalize=function(e){var t=Vector3.Zero();return Vector3.NormalizeToRef(e,t),t},Vector3.NormalizeToRef=function(e,t){e.normalizeToRef(t)},Vector3.Project=function(e,t,r,n){var i=new Vector3;return Vector3.ProjectToRef(e,t,r,n,i),i},Vector3.ProjectToRef=function(e,t,r,n,i){var o=n.width,s=n.height,a=n.x,u=n.y,c=f.Matrix[1];h.FromValuesToRef(o/2,0,0,0,0,-s/2,0,0,0,0,.5,0,a+o/2,s/2+u,.5,1,c);var l=f.Matrix[0];return t.multiplyToRef(r,l),l.multiplyToRef(c,l),Vector3.TransformCoordinatesToRef(e,l,i),i},Vector3._UnprojectFromInvertedMatrixToRef=function(e,t,r){Vector3.TransformCoordinatesToRef(e,t,r);var i=t.m,o=e._x*i[3]+e._y*i[7]+e._z*i[11]+i[15];n["Scalar"].WithinEpsilon(o,1)&&r.scaleInPlace(1/o)},Vector3.UnprojectFromTransform=function(e,t,r,n,i){var o=f.Matrix[0];n.multiplyToRef(i,o),o.invert(),e.x=e._x/t*2-1,e.y=-(e._y/r*2-1);var s=new Vector3;return Vector3._UnprojectFromInvertedMatrixToRef(e,o,s),s},Vector3.Unproject=function(e,t,r,n,i,o){var s=Vector3.Zero();return Vector3.UnprojectToRef(e,t,r,n,i,o,s),s},Vector3.UnprojectToRef=function(e,t,r,n,i,o,s){Vector3.UnprojectFloatsToRef(e._x,e._y,e._z,t,r,n,i,o,s)},Vector3.UnprojectFloatsToRef=function(e,t,r,n,i,o,s,a,u){var c=f.Matrix[0];o.multiplyToRef(s,c),c.multiplyToRef(a,c),c.invert();var l=f.Vector3[0];l.x=e/n*2-1,l.y=-(t/i*2-1),l.z=2*r-1,Vector3._UnprojectFromInvertedMatrixToRef(l,c,u)},Vector3.Minimize=function(e,t){var r=e.clone();return r.minimizeInPlace(t),r},Vector3.Maximize=function(e,t){var r=e.clone();return r.maximizeInPlace(t),r},Vector3.Distance=function(e,t){return Math.sqrt(Vector3.DistanceSquared(e,t))},Vector3.DistanceSquared=function(e,t){var r=e._x-t._x,n=e._y-t._y,i=e._z-t._z;return r*r+n*n+i*i},Vector3.Center=function(e,t){var r=e.add(t);return r.scaleInPlace(.5),r},Vector3.RotationFromAxis=function(e,t,r){var n=Vector3.Zero();return Vector3.RotationFromAxisToRef(e,t,r,n),n},Vector3.RotationFromAxisToRef=function(e,t,r,n){var i=f.Quaternion[0];d.RotationQuaternionFromAxisToRef(e,t,r,i),i.toEulerAnglesToRef(n)},Vector3._UpReadOnly=Vector3.Up(),Vector3._ZeroReadOnly=Vector3.Zero(),Vector3}(),l=function(){function Vector4(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}return Vector4.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},Vector4.prototype.getClassName=function(){return"Vector4"},Vector4.prototype.getHashCode=function(){var e=0|this.x;return e=397*e^(0|this.y),e=397*e^(0|this.z),e=397*e^(0|this.w),e},Vector4.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},Vector4.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,this},Vector4.prototype.fromArray=function(e,t){return void 0===t&&(t=0),Vector4.FromArrayToRef(e,t,this),this},Vector4.prototype.addInPlace=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},Vector4.prototype.add=function(e){return new Vector4(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},Vector4.prototype.addToRef=function(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,t.z=this.z+e.z,t.w=this.w+e.w,this},Vector4.prototype.subtractInPlace=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},Vector4.prototype.subtract=function(e){return new Vector4(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)},Vector4.prototype.subtractToRef=function(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z,t.w=this.w-e.w,this},Vector4.prototype.subtractFromFloats=function(e,t,r,n){return new Vector4(this.x-e,this.y-t,this.z-r,this.w-n)},Vector4.prototype.subtractFromFloatsToRef=function(e,t,r,n,i){return i.x=this.x-e,i.y=this.y-t,i.z=this.z-r,i.w=this.w-n,this},Vector4.prototype.negate=function(){return new Vector4(-this.x,-this.y,-this.z,-this.w)},Vector4.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},Vector4.prototype.negateToRef=function(e){return e.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)},Vector4.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},Vector4.prototype.scale=function(e){return new Vector4(this.x*e,this.y*e,this.z*e,this.w*e)},Vector4.prototype.scaleToRef=function(e,t){return t.x=this.x*e,t.y=this.y*e,t.z=this.z*e,t.w=this.w*e,this},Vector4.prototype.scaleAndAddToRef=function(e,t){return t.x+=this.x*e,t.y+=this.y*e,t.z+=this.z*e,t.w+=this.w*e,this},Vector4.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},Vector4.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=i["Epsilon"]),e&&n["Scalar"].WithinEpsilon(this.x,e.x,t)&&n["Scalar"].WithinEpsilon(this.y,e.y,t)&&n["Scalar"].WithinEpsilon(this.z,e.z,t)&&n["Scalar"].WithinEpsilon(this.w,e.w,t)},Vector4.prototype.equalsToFloats=function(e,t,r,n){return this.x===e&&this.y===t&&this.z===r&&this.w===n},Vector4.prototype.multiplyInPlace=function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this},Vector4.prototype.multiply=function(e){return new Vector4(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)},Vector4.prototype.multiplyToRef=function(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,t.z=this.z*e.z,t.w=this.w*e.w,this},Vector4.prototype.multiplyByFloats=function(e,t,r,n){return new Vector4(this.x*e,this.y*t,this.z*r,this.w*n)},Vector4.prototype.divide=function(e){return new Vector4(this.x/e.x,this.y/e.y,this.z/e.z,this.w/e.w)},Vector4.prototype.divideToRef=function(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,t.z=this.z/e.z,t.w=this.w/e.w,this},Vector4.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},Vector4.prototype.minimizeInPlace=function(e){return e.x<this.x&&(this.x=e.x),e.y<this.y&&(this.y=e.y),e.z<this.z&&(this.z=e.z),e.w<this.w&&(this.w=e.w),this},Vector4.prototype.maximizeInPlace=function(e){return e.x>this.x&&(this.x=e.x),e.y>this.y&&(this.y=e.y),e.z>this.z&&(this.z=e.z),e.w>this.w&&(this.w=e.w),this},Vector4.prototype.floor=function(){return new Vector4(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},Vector4.prototype.fract=function(){return new Vector4(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},Vector4.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},Vector4.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Vector4.prototype.normalize=function(){var e=this.length();return 0===e?this:this.scaleInPlace(1/e)},Vector4.prototype.toVector3=function(){return new c(this.x,this.y,this.z)},Vector4.prototype.clone=function(){return new Vector4(this.x,this.y,this.z,this.w)},Vector4.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},Vector4.prototype.copyFromFloats=function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},Vector4.prototype.set=function(e,t,r,n){return this.copyFromFloats(e,t,r,n)},Vector4.prototype.setAll=function(e){return this.x=this.y=this.z=this.w=e,this},Vector4.FromArray=function(e,t){return t||(t=0),new Vector4(e[t],e[t+1],e[t+2],e[t+3])},Vector4.FromArrayToRef=function(e,t,r){r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3]},Vector4.FromFloatArrayToRef=function(e,t,r){Vector4.FromArrayToRef(e,t,r)},Vector4.FromFloatsToRef=function(e,t,r,n,i){i.x=e,i.y=t,i.z=r,i.w=n},Vector4.Zero=function(){return new Vector4(0,0,0,0)},Vector4.One=function(){return new Vector4(1,1,1,1)},Vector4.Normalize=function(e){var t=Vector4.Zero();return Vector4.NormalizeToRef(e,t),t},Vector4.NormalizeToRef=function(e,t){t.copyFrom(e),t.normalize()},Vector4.Minimize=function(e,t){var r=e.clone();return r.minimizeInPlace(t),r},Vector4.Maximize=function(e,t){var r=e.clone();return r.maximizeInPlace(t),r},Vector4.Distance=function(e,t){return Math.sqrt(Vector4.DistanceSquared(e,t))},Vector4.DistanceSquared=function(e,t){var r=e.x-t.x,n=e.y-t.y,i=e.z-t.z,o=e.w-t.w;return r*r+n*n+i*i+o*o},Vector4.Center=function(e,t){var r=e.add(t);return r.scaleInPlace(.5),r},Vector4.TransformNormal=function(e,t){var r=Vector4.Zero();return Vector4.TransformNormalToRef(e,t,r),r},Vector4.TransformNormalToRef=function(e,t,r){var n=t.m,i=e.x*n[0]+e.y*n[4]+e.z*n[8],o=e.x*n[1]+e.y*n[5]+e.z*n[9],s=e.x*n[2]+e.y*n[6]+e.z*n[10];r.x=i,r.y=o,r.z=s,r.w=e.w},Vector4.TransformNormalFromFloatsToRef=function(e,t,r,n,i,o){var s=i.m;o.x=e*s[0]+t*s[4]+r*s[8],o.y=e*s[1]+t*s[5]+r*s[9],o.z=e*s[2]+t*s[6]+r*s[10],o.w=n},Vector4.FromVector3=function(e,t){return void 0===t&&(t=0),new Vector4(e._x,e._y,e._z,t)},Vector4}(),d=function(){function Quaternion(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),this._isDirty=!0,this._x=e,this._y=t,this._z=r,this._w=n}return Object.defineProperty(Quaternion.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Quaternion.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Quaternion.prototype,"z",{get:function(){return this._z},set:function(e){this._z=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Quaternion.prototype,"w",{get:function(){return this._w},set:function(e){this._w=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Quaternion.prototype.toString=function(){return"{X: "+this._x+" Y:"+this._y+" Z:"+this._z+" W:"+this._w+"}"},Quaternion.prototype.getClassName=function(){return"Quaternion"},Quaternion.prototype.getHashCode=function(){var e=0|this._x;return e=397*e^(0|this._y),e=397*e^(0|this._z),e=397*e^(0|this._w),e},Quaternion.prototype.asArray=function(){return[this._x,this._y,this._z,this._w]},Quaternion.prototype.equals=function(e){return e&&this._x===e._x&&this._y===e._y&&this._z===e._z&&this._w===e._w},Quaternion.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=i["Epsilon"]),e&&n["Scalar"].WithinEpsilon(this._x,e._x,t)&&n["Scalar"].WithinEpsilon(this._y,e._y,t)&&n["Scalar"].WithinEpsilon(this._z,e._z,t)&&n["Scalar"].WithinEpsilon(this._w,e._w,t)},Quaternion.prototype.clone=function(){return new Quaternion(this._x,this._y,this._z,this._w)},Quaternion.prototype.copyFrom=function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this.w=e._w,this},Quaternion.prototype.copyFromFloats=function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},Quaternion.prototype.set=function(e,t,r,n){return this.copyFromFloats(e,t,r,n)},Quaternion.prototype.add=function(e){return new Quaternion(this._x+e._x,this._y+e._y,this._z+e._z,this._w+e._w)},Quaternion.prototype.addInPlace=function(e){return this._x+=e._x,this._y+=e._y,this._z+=e._z,this._w+=e._w,this},Quaternion.prototype.subtract=function(e){return new Quaternion(this._x-e._x,this._y-e._y,this._z-e._z,this._w-e._w)},Quaternion.prototype.scale=function(e){return new Quaternion(this._x*e,this._y*e,this._z*e,this._w*e)},Quaternion.prototype.scaleToRef=function(e,t){return t.x=this._x*e,t.y=this._y*e,t.z=this._z*e,t.w=this._w*e,this},Quaternion.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},Quaternion.prototype.scaleAndAddToRef=function(e,t){return t.x+=this._x*e,t.y+=this._y*e,t.z+=this._z*e,t.w+=this._w*e,this},Quaternion.prototype.multiply=function(e){var t=new Quaternion(0,0,0,1);return this.multiplyToRef(e,t),t},Quaternion.prototype.multiplyToRef=function(e,t){var r=this._x*e._w+this._y*e._z-this._z*e._y+this._w*e._x,n=-this._x*e._z+this._y*e._w+this._z*e._x+this._w*e._y,i=this._x*e._y-this._y*e._x+this._z*e._w+this._w*e._z,o=-this._x*e._x-this._y*e._y-this._z*e._z+this._w*e._w;return t.copyFromFloats(r,n,i,o),this},Quaternion.prototype.multiplyInPlace=function(e){return this.multiplyToRef(e,this),this},Quaternion.prototype.conjugateToRef=function(e){return e.copyFromFloats(-this._x,-this._y,-this._z,this._w),this},Quaternion.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},Quaternion.prototype.conjugate=function(){var e=new Quaternion(-this._x,-this._y,-this._z,this._w);return e},Quaternion.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},Quaternion.prototype.normalize=function(){var e=this.length();if(0===e)return this;var t=1/e;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},Quaternion.prototype.toEulerAngles=function(e){void 0===e&&(e="YZX");var t=c.Zero();return this.toEulerAnglesToRef(t),t},Quaternion.prototype.toEulerAnglesToRef=function(e){var t=this._z,r=this._x,n=this._y,i=this._w,o=i*i,s=t*t,a=r*r,u=n*n,c=n*t-r*i,l=.4999999;return c<-l?(e.y=2*Math.atan2(n,i),e.x=Math.PI/2,e.z=0):c>l?(e.y=2*Math.atan2(n,i),e.x=-Math.PI/2,e.z=0):(e.z=Math.atan2(2*(r*n+t*i),-s-a+u+o),e.x=Math.asin(-2*(t*n-r*i)),e.y=Math.atan2(2*(t*r+n*i),s-a-u+o)),this},Quaternion.prototype.toRotationMatrix=function(e){return h.FromQuaternionToRef(this,e),this},Quaternion.prototype.fromRotationMatrix=function(e){return Quaternion.FromRotationMatrixToRef(e,this),this},Quaternion.FromRotationMatrix=function(e){var t=new Quaternion;return Quaternion.FromRotationMatrixToRef(e,t),t},Quaternion.FromRotationMatrixToRef=function(e,t){var r,n=e.m,i=n[0],o=n[4],s=n[8],a=n[1],u=n[5],c=n[9],l=n[2],d=n[6],h=n[10],f=i+u+h;f>0?(r=.5/Math.sqrt(f+1),t.w=.25/r,t.x=(d-c)*r,t.y=(s-l)*r,t.z=(a-o)*r):i>u&&i>h?(r=2*Math.sqrt(1+i-u-h),t.w=(d-c)/r,t.x=.25*r,t.y=(o+a)/r,t.z=(s+l)/r):u>h?(r=2*Math.sqrt(1+u-i-h),t.w=(s-l)/r,t.x=(o+a)/r,t.y=.25*r,t.z=(c+d)/r):(r=2*Math.sqrt(1+h-i-u),t.w=(a-o)/r,t.x=(s+l)/r,t.y=(c+d)/r,t.z=.25*r)},Quaternion.Dot=function(e,t){return e._x*t._x+e._y*t._y+e._z*t._z+e._w*t._w},Quaternion.AreClose=function(e,t){var r=Quaternion.Dot(e,t);return r>=0},Quaternion.Zero=function(){return new Quaternion(0,0,0,0)},Quaternion.Inverse=function(e){return new Quaternion(-e._x,-e._y,-e._z,e._w)},Quaternion.InverseToRef=function(e,t){return t.set(-e._x,-e._y,-e._z,e._w),t},Quaternion.Identity=function(){return new Quaternion(0,0,0,1)},Quaternion.IsIdentity=function(e){return e&&0===e._x&&0===e._y&&0===e._z&&1===e._w},Quaternion.RotationAxis=function(e,t){return Quaternion.RotationAxisToRef(e,t,new Quaternion)},Quaternion.RotationAxisToRef=function(e,t,r){var n=Math.sin(t/2);return e.normalize(),r.w=Math.cos(t/2),r.x=e._x*n,r.y=e._y*n,r.z=e._z*n,r},Quaternion.FromArray=function(e,t){return t||(t=0),new Quaternion(e[t],e[t+1],e[t+2],e[t+3])},Quaternion.FromArrayToRef=function(e,t,r){r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3]},Quaternion.FromEulerAngles=function(e,t,r){var n=new Quaternion;return Quaternion.RotationYawPitchRollToRef(t,e,r,n),n},Quaternion.FromEulerAnglesToRef=function(e,t,r,n){return Quaternion.RotationYawPitchRollToRef(t,e,r,n),n},Quaternion.FromEulerVector=function(e){var t=new Quaternion;return Quaternion.RotationYawPitchRollToRef(e._y,e._x,e._z,t),t},Quaternion.FromEulerVectorToRef=function(e,t){return Quaternion.RotationYawPitchRollToRef(e._y,e._x,e._z,t),t},Quaternion.RotationYawPitchRoll=function(e,t,r){var n=new Quaternion;return Quaternion.RotationYawPitchRollToRef(e,t,r,n),n},Quaternion.RotationYawPitchRollToRef=function(e,t,r,n){var i=.5*r,o=.5*t,s=.5*e,a=Math.sin(i),u=Math.cos(i),c=Math.sin(o),l=Math.cos(o),d=Math.sin(s),h=Math.cos(s);n.x=h*c*u+d*l*a,n.y=d*l*u-h*c*a,n.z=h*l*a-d*c*u,n.w=h*l*u+d*c*a},Quaternion.RotationAlphaBetaGamma=function(e,t,r){var n=new Quaternion;return Quaternion.RotationAlphaBetaGammaToRef(e,t,r,n),n},Quaternion.RotationAlphaBetaGammaToRef=function(e,t,r,n){var i=.5*(r+e),o=.5*(r-e),s=.5*t;n.x=Math.cos(o)*Math.sin(s),n.y=Math.sin(o)*Math.sin(s),n.z=Math.sin(i)*Math.cos(s),n.w=Math.cos(i)*Math.cos(s)},Quaternion.RotationQuaternionFromAxis=function(e,t,r){var n=new Quaternion(0,0,0,0);return Quaternion.RotationQuaternionFromAxisToRef(e,t,r,n),n},Quaternion.RotationQuaternionFromAxisToRef=function(e,t,r,n){var i=f.Matrix[0];h.FromXYZAxesToRef(e.normalize(),t.normalize(),r.normalize(),i),Quaternion.FromRotationMatrixToRef(i,n)},Quaternion.Slerp=function(e,t,r){var n=Quaternion.Identity();return Quaternion.SlerpToRef(e,t,r,n),n},Quaternion.SlerpToRef=function(e,t,r,n){var i,o,s=e._x*t._x+e._y*t._y+e._z*t._z+e._w*t._w,a=!1;if(s<0&&(a=!0,s=-s),s>.999999)o=1-r,i=a?-r:r;else{var u=Math.acos(s),c=1/Math.sin(u);o=Math.sin((1-r)*u)*c,i=a?-Math.sin(r*u)*c:Math.sin(r*u)*c}n.x=o*e._x+i*t._x,n.y=o*e._y+i*t._y,n.z=o*e._z+i*t._z,n.w=o*e._w+i*t._w},Quaternion.Hermite=function(e,t,r,n,i){var o=i*i,s=i*o,a=2*s-3*o+1,u=-2*s+3*o,c=s-2*o+i,l=s-o,d=e._x*a+r._x*u+t._x*c+n._x*l,h=e._y*a+r._y*u+t._y*c+n._y*l,f=e._z*a+r._z*u+t._z*c+n._z*l,p=e._w*a+r._w*u+t._w*c+n._w*l;return new Quaternion(d,h,f,p)},Quaternion}(),h=function(){function Matrix(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,a["PerformanceConfigurator"].MatrixTrackPrecisionChange&&a["PerformanceConfigurator"].MatrixTrackedMatrices.push(this),this._m=new a["PerformanceConfigurator"].MatrixCurrentType(16),this._updateIdentityStatus(!1)}return Object.defineProperty(Matrix,"Use64Bits",{get:function(){return a["PerformanceConfigurator"].MatrixUse64Bits},enumerable:!1,configurable:!0}),Object.defineProperty(Matrix.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),Matrix.prototype._markAsUpdated=function(){this.updateFlag=Matrix._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},Matrix.prototype._updateIdentityStatus=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=!0),this.updateFlag=Matrix._updateFlagSeed++,this._isIdentity=e,this._isIdentity3x2=e||r,this._isIdentityDirty=!this._isIdentity&&t,this._isIdentity3x2Dirty=!this._isIdentity3x2&&n},Matrix.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var e=this._m;this._isIdentity=1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}return this._isIdentity},Matrix.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},Matrix.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var e=this._m,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],_=e[15],g=d*_-m*h,b=l*_-p*h,v=l*m-p*d,M=c*_-f*h,T=c*m-d*f,S=c*p-f*l,C=+(s*g-a*b+u*v),E=-(o*g-a*M+u*T),P=+(o*b-s*M+u*S),A=-(o*v-s*T+a*S);return t*C+r*E+n*P+i*A},Matrix.prototype.toArray=function(){return this._m},Matrix.prototype.asArray=function(){return this._m},Matrix.prototype.invert=function(){return this.invertToRef(this),this},Matrix.prototype.reset=function(){return Matrix.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},Matrix.prototype.add=function(e){var t=new Matrix;return this.addToRef(e,t),t},Matrix.prototype.addToRef=function(e,t){for(var r=this._m,n=t._m,i=e.m,o=0;o<16;o++)n[o]=r[o]+i[o];return t._markAsUpdated(),this},Matrix.prototype.addToSelf=function(e){for(var t=this._m,r=e.m,n=0;n<16;n++)t[n]+=r[n];return this._markAsUpdated(),this},Matrix.prototype.invertToRef=function(e){if(!0===this._isIdentity)return Matrix.IdentityToRef(e),this;var t=this._m,r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],_=t[14],g=t[15],b=h*g-_*f,v=d*g-m*f,M=d*_-m*h,T=l*g-p*f,S=l*_-h*p,C=l*m-p*d,E=+(a*b-u*v+c*M),P=-(s*b-u*T+c*S),A=+(s*v-a*T+c*C),j=-(s*M-a*S+u*C),O=r*E+n*P+i*A+o*j;if(0===O)return e.copyFrom(this),this;var R=1/O,I=u*g-_*c,w=a*g-m*c,D=a*_-m*u,F=s*g-p*c,B=s*_-p*u,L=s*m-p*a,V=u*f-h*c,N=a*f-d*c,k=a*h-d*u,U=s*f-l*c,z=s*h-l*u,G=s*d-l*a,W=-(n*b-i*v+o*M),H=+(r*b-i*T+o*S),X=-(r*v-n*T+o*C),q=+(r*M-n*S+i*C),K=+(n*I-i*w+o*D),Y=-(r*I-i*F+o*B),Q=+(r*w-n*F+o*L),Z=-(r*D-n*B+i*L),$=-(n*V-i*N+o*k),J=+(r*V-i*U+o*z),ee=-(r*N-n*U+o*G),te=+(r*k-n*z+i*G);return Matrix.FromValuesToRef(E*R,W*R,K*R,$*R,P*R,H*R,Y*R,J*R,A*R,X*R,Q*R,ee*R,j*R,q*R,Z*R,te*R,e),this},Matrix.prototype.addAtIndex=function(e,t){return this._m[e]+=t,this._markAsUpdated(),this},Matrix.prototype.multiplyAtIndex=function(e,t){return this._m[e]*=t,this._markAsUpdated(),this},Matrix.prototype.setTranslationFromFloats=function(e,t,r){return this._m[12]=e,this._m[13]=t,this._m[14]=r,this._markAsUpdated(),this},Matrix.prototype.addTranslationFromFloats=function(e,t,r){return this._m[12]+=e,this._m[13]+=t,this._m[14]+=r,this._markAsUpdated(),this},Matrix.prototype.setTranslation=function(e){return this.setTranslationFromFloats(e._x,e._y,e._z)},Matrix.prototype.getTranslation=function(){return new c(this._m[12],this._m[13],this._m[14])},Matrix.prototype.getTranslationToRef=function(e){return e.x=this._m[12],e.y=this._m[13],e.z=this._m[14],this},Matrix.prototype.removeRotationAndScaling=function(){var e=this.m;return Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this},Matrix.prototype.multiply=function(e){var t=new Matrix;return this.multiplyToRef(e,t),t},Matrix.prototype.copyFrom=function(e){e.copyToArray(this._m);var t=e;return this._updateIdentityStatus(t._isIdentity,t._isIdentityDirty,t._isIdentity3x2,t._isIdentity3x2Dirty),this},Matrix.prototype.copyToArray=function(e,t){void 0===t&&(t=0);var r=this._m;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],this},Matrix.prototype.multiplyToRef=function(e,t){return this._isIdentity?(t.copyFrom(e),this):e._isIdentity?(t.copyFrom(this),this):(this.multiplyToArray(e,t._m,0),t._markAsUpdated(),this)},Matrix.prototype.multiplyToArray=function(e,t,r){var n=this._m,i=e.m,o=n[0],s=n[1],a=n[2],u=n[3],c=n[4],l=n[5],d=n[6],h=n[7],f=n[8],p=n[9],m=n[10],_=n[11],g=n[12],b=n[13],v=n[14],M=n[15],T=i[0],S=i[1],C=i[2],E=i[3],P=i[4],A=i[5],j=i[6],O=i[7],R=i[8],I=i[9],w=i[10],D=i[11],F=i[12],B=i[13],L=i[14],V=i[15];return t[r]=o*T+s*P+a*R+u*F,t[r+1]=o*S+s*A+a*I+u*B,t[r+2]=o*C+s*j+a*w+u*L,t[r+3]=o*E+s*O+a*D+u*V,t[r+4]=c*T+l*P+d*R+h*F,t[r+5]=c*S+l*A+d*I+h*B,t[r+6]=c*C+l*j+d*w+h*L,t[r+7]=c*E+l*O+d*D+h*V,t[r+8]=f*T+p*P+m*R+_*F,t[r+9]=f*S+p*A+m*I+_*B,t[r+10]=f*C+p*j+m*w+_*L,t[r+11]=f*E+p*O+m*D+_*V,t[r+12]=g*T+b*P+v*R+M*F,t[r+13]=g*S+b*A+v*I+M*B,t[r+14]=g*C+b*j+v*w+M*L,t[r+15]=g*E+b*O+v*D+M*V,this},Matrix.prototype.equals=function(e){var t=e;if(!t)return!1;if((this._isIdentity||t._isIdentity)&&!this._isIdentityDirty&&!t._isIdentityDirty)return this._isIdentity&&t._isIdentity;var r=this.m,n=t.m;return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&r[4]===n[4]&&r[5]===n[5]&&r[6]===n[6]&&r[7]===n[7]&&r[8]===n[8]&&r[9]===n[9]&&r[10]===n[10]&&r[11]===n[11]&&r[12]===n[12]&&r[13]===n[13]&&r[14]===n[14]&&r[15]===n[15]},Matrix.prototype.clone=function(){var e=new Matrix;return e.copyFrom(this),e},Matrix.prototype.getClassName=function(){return"Matrix"},Matrix.prototype.getHashCode=function(){for(var e=0|this._m[0],t=1;t<16;t++)e=397*e^(0|this._m[t]);return e},Matrix.prototype.decompose=function(e,t,r){if(this._isIdentity)return r&&r.setAll(0),e&&e.setAll(1),t&&t.copyFromFloats(0,0,0,1),!0;var n=this._m;if(r&&r.copyFromFloats(n[12],n[13],n[14]),e=e||f.Vector3[0],e.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),e.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),e.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),this.determinant()<=0&&(e.y*=-1),0===e._x||0===e._y||0===e._z)return t&&t.copyFromFloats(0,0,0,1),!1;if(t){var i=1/e._x,o=1/e._y,s=1/e._z;Matrix.FromValuesToRef(n[0]*i,n[1]*i,n[2]*i,0,n[4]*o,n[5]*o,n[6]*o,0,n[8]*s,n[9]*s,n[10]*s,0,0,0,0,1,f.Matrix[0]),d.FromRotationMatrixToRef(f.Matrix[0],t)}return!0},Matrix.prototype.getRow=function(e){if(e<0||e>3)return null;var t=4*e;return new l(this._m[t+0],this._m[t+1],this._m[t+2],this._m[t+3])},Matrix.prototype.setRow=function(e,t){return this.setRowFromFloats(e,t.x,t.y,t.z,t.w)},Matrix.prototype.transpose=function(){return Matrix.Transpose(this)},Matrix.prototype.transposeToRef=function(e){return Matrix.TransposeToRef(this,e),this},Matrix.prototype.setRowFromFloats=function(e,t,r,n,i){if(e<0||e>3)return this;var o=4*e;return this._m[o+0]=t,this._m[o+1]=r,this._m[o+2]=n,this._m[o+3]=i,this._markAsUpdated(),this},Matrix.prototype.scale=function(e){var t=new Matrix;return this.scaleToRef(e,t),t},Matrix.prototype.scaleToRef=function(e,t){for(var r=0;r<16;r++)t._m[r]=this._m[r]*e;return t._markAsUpdated(),this},Matrix.prototype.scaleAndAddToRef=function(e,t){for(var r=0;r<16;r++)t._m[r]+=this._m[r]*e;return t._markAsUpdated(),this},Matrix.prototype.toNormalMatrix=function(e){var t=f.Matrix[0];this.invertToRef(t),t.transposeToRef(e);var r=e._m;Matrix.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,e)},Matrix.prototype.getRotationMatrix=function(){var e=new Matrix;return this.getRotationMatrixToRef(e),e},Matrix.prototype.getRotationMatrixToRef=function(e){var t=f.Vector3[0];if(!this.decompose(t))return Matrix.IdentityToRef(e),this;var r=this._m,n=1/t._x,i=1/t._y,o=1/t._z;return Matrix.FromValuesToRef(r[0]*n,r[1]*n,r[2]*n,0,r[4]*i,r[5]*i,r[6]*i,0,r[8]*o,r[9]*o,r[10]*o,0,0,0,0,1,e),this},Matrix.prototype.toggleModelMatrixHandInPlace=function(){var e=this._m;e[2]*=-1,e[6]*=-1,e[8]*=-1,e[9]*=-1,e[14]*=-1,this._markAsUpdated()},Matrix.prototype.toggleProjectionMatrixHandInPlace=function(){var e=this._m;e[8]*=-1,e[9]*=-1,e[10]*=-1,e[11]*=-1,this._markAsUpdated()},Matrix.FromArray=function(e,t){void 0===t&&(t=0);var r=new Matrix;return Matrix.FromArrayToRef(e,t,r),r},Matrix.FromArrayToRef=function(e,t,r){for(var n=0;n<16;n++)r._m[n]=e[n+t];r._markAsUpdated()},Matrix.FromFloat32ArrayToRefScaled=function(e,t,r,n){for(var i=0;i<16;i++)n._m[i]=e[i+t]*r;n._markAsUpdated()},Object.defineProperty(Matrix,"IdentityReadOnly",{get:function(){return Matrix._identityReadOnly},enumerable:!1,configurable:!0}),Matrix.FromValuesToRef=function(e,t,r,n,i,o,s,a,u,c,l,d,h,f,p,m,_){var g=_._m;g[0]=e,g[1]=t,g[2]=r,g[3]=n,g[4]=i,g[5]=o,g[6]=s,g[7]=a,g[8]=u,g[9]=c,g[10]=l,g[11]=d,g[12]=h,g[13]=f,g[14]=p,g[15]=m,_._markAsUpdated()},Matrix.FromValues=function(e,t,r,n,i,o,s,a,u,c,l,d,h,f,p,m){var _=new Matrix,g=_._m;return g[0]=e,g[1]=t,g[2]=r,g[3]=n,g[4]=i,g[5]=o,g[6]=s,g[7]=a,g[8]=u,g[9]=c,g[10]=l,g[11]=d,g[12]=h,g[13]=f,g[14]=p,g[15]=m,_._markAsUpdated(),_},Matrix.Compose=function(e,t,r){var n=new Matrix;return Matrix.ComposeToRef(e,t,r,n),n},Matrix.ComposeToRef=function(e,t,r,n){var i=n._m,o=t._x,s=t._y,a=t._z,u=t._w,c=o+o,l=s+s,d=a+a,h=o*c,f=o*l,p=o*d,m=s*l,_=s*d,g=a*d,b=u*c,v=u*l,M=u*d,T=e._x,S=e._y,C=e._z;i[0]=(1-(m+g))*T,i[1]=(f+M)*T,i[2]=(p-v)*T,i[3]=0,i[4]=(f-M)*S,i[5]=(1-(h+g))*S,i[6]=(_+b)*S,i[7]=0,i[8]=(p+v)*C,i[9]=(_-b)*C,i[10]=(1-(h+m))*C,i[11]=0,i[12]=r._x,i[13]=r._y,i[14]=r._z,i[15]=1,n._markAsUpdated()},Matrix.Identity=function(){var e=Matrix.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e},Matrix.IdentityToRef=function(e){Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0)},Matrix.Zero=function(){var e=Matrix.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e},Matrix.RotationX=function(e){var t=new Matrix;return Matrix.RotationXToRef(e,t),t},Matrix.Invert=function(e){var t=new Matrix;return e.invertToRef(t),t},Matrix.RotationXToRef=function(e,t){var r=Math.sin(e),n=Math.cos(e);Matrix.FromValuesToRef(1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)},Matrix.RotationY=function(e){var t=new Matrix;return Matrix.RotationYToRef(e,t),t},Matrix.RotationYToRef=function(e,t){var r=Math.sin(e),n=Math.cos(e);Matrix.FromValuesToRef(n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)},Matrix.RotationZ=function(e){var t=new Matrix;return Matrix.RotationZToRef(e,t),t},Matrix.RotationZToRef=function(e,t){var r=Math.sin(e),n=Math.cos(e);Matrix.FromValuesToRef(n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)},Matrix.RotationAxis=function(e,t){var r=new Matrix;return Matrix.RotationAxisToRef(e,t,r),r},Matrix.RotationAxisToRef=function(e,t,r){var n=Math.sin(-t),i=Math.cos(-t),o=1-i;e.normalize();var s=r._m;s[0]=e._x*e._x*o+i,s[1]=e._x*e._y*o-e._z*n,s[2]=e._x*e._z*o+e._y*n,s[3]=0,s[4]=e._y*e._x*o+e._z*n,s[5]=e._y*e._y*o+i,s[6]=e._y*e._z*o-e._x*n,s[7]=0,s[8]=e._z*e._x*o-e._y*n,s[9]=e._z*e._y*o+e._x*n,s[10]=e._z*e._z*o+i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,r._markAsUpdated()},Matrix.RotationAlignToRef=function(e,t,r){var n=c.Cross(t,e),i=c.Dot(t,e),o=1/(1+i),s=r._m;s[0]=n._x*n._x*o+i,s[1]=n._y*n._x*o-n._z,s[2]=n._z*n._x*o+n._y,s[3]=0,s[4]=n._x*n._y*o+n._z,s[5]=n._y*n._y*o+i,s[6]=n._z*n._y*o-n._x,s[7]=0,s[8]=n._x*n._z*o-n._y,s[9]=n._y*n._z*o+n._x,s[10]=n._z*n._z*o+i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,r._markAsUpdated()},Matrix.RotationYawPitchRoll=function(e,t,r){var n=new Matrix;return Matrix.RotationYawPitchRollToRef(e,t,r,n),n},Matrix.RotationYawPitchRollToRef=function(e,t,r,n){d.RotationYawPitchRollToRef(e,t,r,f.Quaternion[0]),f.Quaternion[0].toRotationMatrix(n)},Matrix.Scaling=function(e,t,r){var n=new Matrix;return Matrix.ScalingToRef(e,t,r,n),n},Matrix.ScalingToRef=function(e,t,r,n){Matrix.FromValuesToRef(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1,n),n._updateIdentityStatus(1===e&&1===t&&1===r)},Matrix.Translation=function(e,t,r){var n=new Matrix;return Matrix.TranslationToRef(e,t,r,n),n},Matrix.TranslationToRef=function(e,t,r,n){Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1,n),n._updateIdentityStatus(0===e&&0===t&&0===r)},Matrix.Lerp=function(e,t,r){var n=new Matrix;return Matrix.LerpToRef(e,t,r,n),n},Matrix.LerpToRef=function(e,t,r,n){for(var i=n._m,o=e.m,s=t.m,a=0;a<16;a++)i[a]=o[a]*(1-r)+s[a]*r;n._markAsUpdated()},Matrix.DecomposeLerp=function(e,t,r){var n=new Matrix;return Matrix.DecomposeLerpToRef(e,t,r,n),n},Matrix.DecomposeLerpToRef=function(e,t,r,n){var i=f.Vector3[0],o=f.Quaternion[0],s=f.Vector3[1];e.decompose(i,o,s);var a=f.Vector3[2],u=f.Quaternion[1],l=f.Vector3[3];t.decompose(a,u,l);var h=f.Vector3[4];c.LerpToRef(i,a,r,h);var p=f.Quaternion[2];d.SlerpToRef(o,u,r,p);var m=f.Vector3[5];c.LerpToRef(s,l,r,m),Matrix.ComposeToRef(h,p,m,n)},Matrix.LookAtLH=function(e,t,r){var n=new Matrix;return Matrix.LookAtLHToRef(e,t,r,n),n},Matrix.LookAtLHToRef=function(e,t,r,n){var i=f.Vector3[0],o=f.Vector3[1],s=f.Vector3[2];t.subtractToRef(e,s),s.normalize(),c.CrossToRef(r,s,i);var a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),c.CrossToRef(s,i,o),o.normalize();var u=-c.Dot(i,e),l=-c.Dot(o,e),d=-c.Dot(s,e);Matrix.FromValuesToRef(i._x,o._x,s._x,0,i._y,o._y,s._y,0,i._z,o._z,s._z,0,u,l,d,1,n)},Matrix.LookAtRH=function(e,t,r){var n=new Matrix;return Matrix.LookAtRHToRef(e,t,r,n),n},Matrix.LookAtRHToRef=function(e,t,r,n){var i=f.Vector3[0],o=f.Vector3[1],s=f.Vector3[2];e.subtractToRef(t,s),s.normalize(),c.CrossToRef(r,s,i);var a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),c.CrossToRef(s,i,o),o.normalize();var u=-c.Dot(i,e),l=-c.Dot(o,e),d=-c.Dot(s,e);Matrix.FromValuesToRef(i._x,o._x,s._x,0,i._y,o._y,s._y,0,i._z,o._z,s._z,0,u,l,d,1,n)},Matrix.OrthoLH=function(e,t,r,n){var i=new Matrix;return Matrix.OrthoLHToRef(e,t,r,n,i),i},Matrix.OrthoLHToRef=function(e,t,r,n,i){var o=r,s=n,a=2/e,u=2/t,c=2/(s-o),l=-(s+o)/(s-o);Matrix.FromValuesToRef(a,0,0,0,0,u,0,0,0,0,c,0,0,0,l,1,i),i._updateIdentityStatus(1===a&&1===u&&1===c&&0===l)},Matrix.OrthoOffCenterLH=function(e,t,r,n,i,o){var s=new Matrix;return Matrix.OrthoOffCenterLHToRef(e,t,r,n,i,o,s),s},Matrix.OrthoOffCenterLHToRef=function(e,t,r,n,i,o,s){var a=i,u=o,c=2/(t-e),l=2/(n-r),d=2/(u-a),h=-(u+a)/(u-a),f=(e+t)/(e-t),p=(n+r)/(r-n);Matrix.FromValuesToRef(c,0,0,0,0,l,0,0,0,0,d,0,f,p,h,1,s),s._markAsUpdated()},Matrix.OrthoOffCenterRH=function(e,t,r,n,i,o){var s=new Matrix;return Matrix.OrthoOffCenterRHToRef(e,t,r,n,i,o,s),s},Matrix.OrthoOffCenterRHToRef=function(e,t,r,n,i,o,s){Matrix.OrthoOffCenterLHToRef(e,t,r,n,i,o,s),s._m[10]*=-1},Matrix.PerspectiveLH=function(e,t,r,n){var i=new Matrix,o=r,s=n,a=2*o/e,u=2*o/t,c=(s+o)/(s-o),l=-2*s*o/(s-o);return Matrix.FromValuesToRef(a,0,0,0,0,u,0,0,0,0,c,1,0,0,l,0,i),i._updateIdentityStatus(!1),i},Matrix.PerspectiveFovLH=function(e,t,r,n){var i=new Matrix;return Matrix.PerspectiveFovLHToRef(e,t,r,n,i),i},Matrix.PerspectiveFovLHToRef=function(e,t,r,n,i,o){void 0===o&&(o=!0);var s=r,a=n,u=1/Math.tan(.5*e),c=o?u/t:u,l=o?u:u*t,d=(a+s)/(a-s),h=-2*a*s/(a-s);Matrix.FromValuesToRef(c,0,0,0,0,l,0,0,0,0,d,1,0,0,h,0,i),i._updateIdentityStatus(!1)},Matrix.PerspectiveFovReverseLHToRef=function(e,t,r,n,i,o){void 0===o&&(o=!0);var s=1/Math.tan(.5*e),a=o?s/t:s,u=o?s:s*t;Matrix.FromValuesToRef(a,0,0,0,0,u,0,0,0,0,-r,1,0,0,1,0,i),i._updateIdentityStatus(!1)},Matrix.PerspectiveFovRH=function(e,t,r,n){var i=new Matrix;return Matrix.PerspectiveFovRHToRef(e,t,r,n,i),i},Matrix.PerspectiveFovRHToRef=function(e,t,r,n,i,o){void 0===o&&(o=!0);var s=r,a=n,u=1/Math.tan(.5*e),c=o?u/t:u,l=o?u:u*t,d=-(a+s)/(a-s),h=-2*a*s/(a-s);Matrix.FromValuesToRef(c,0,0,0,0,l,0,0,0,0,d,-1,0,0,h,0,i),i._updateIdentityStatus(!1)},Matrix.PerspectiveFovReverseRHToRef=function(e,t,r,n,i,o){void 0===o&&(o=!0);var s=1/Math.tan(.5*e),a=o?s/t:s,u=o?s:s*t;Matrix.FromValuesToRef(a,0,0,0,0,u,0,0,0,0,-r,-1,0,0,-1,0,i),i._updateIdentityStatus(!1)},Matrix.PerspectiveFovWebVRToRef=function(e,t,r,n,i){void 0===i&&(i=!1);var o=i?-1:1,s=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),l=2/(u+c),d=2/(s+a),h=n._m;h[0]=l,h[1]=h[2]=h[3]=h[4]=0,h[5]=d,h[6]=h[7]=0,h[8]=(u-c)*l*.5,h[9]=-(s-a)*d*.5,h[10]=-r/(t-r),h[11]=1*o,h[12]=h[13]=h[15]=0,h[14]=-2*r*t/(r-t),n._markAsUpdated()},Matrix.GetFinalMatrix=function(e,t,r,n,i,o){var s=e.width,a=e.height,u=e.x,c=e.y,l=Matrix.FromValues(s/2,0,0,0,0,-a/2,0,0,0,0,o-i,0,u+s/2,a/2+c,i,1),d=f.Matrix[0];return t.multiplyToRef(r,d),d.multiplyToRef(n,d),d.multiply(l)},Matrix.GetAsMatrix2x2=function(e){var t=e.m,r=[t[0],t[1],t[4],t[5]];return a["PerformanceConfigurator"].MatrixUse64Bits?r:new Float32Array(r)},Matrix.GetAsMatrix3x3=function(e){var t=e.m,r=[t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]];return a["PerformanceConfigurator"].MatrixUse64Bits?r:new Float32Array(r)},Matrix.Transpose=function(e){var t=new Matrix;return Matrix.TransposeToRef(e,t),t},Matrix.TransposeToRef=function(e,t){var r=t._m,n=e.m;r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15],t._updateIdentityStatus(e._isIdentity,e._isIdentityDirty)},Matrix.Reflection=function(e){var t=new Matrix;return Matrix.ReflectionToRef(e,t),t},Matrix.ReflectionToRef=function(e,t){e.normalize();var r=e.normal.x,n=e.normal.y,i=e.normal.z,o=-2*r,s=-2*n,a=-2*i;Matrix.FromValuesToRef(o*r+1,s*r,a*r,0,o*n,s*n+1,a*n,0,o*i,s*i,a*i+1,0,o*e.d,s*e.d,a*e.d,1,t)},Matrix.FromXYZAxesToRef=function(e,t,r,n){Matrix.FromValuesToRef(e._x,e._y,e._z,0,t._x,t._y,t._z,0,r._x,r._y,r._z,0,0,0,0,1,n)},Matrix.FromQuaternionToRef=function(e,t){var r=e._x*e._x,n=e._y*e._y,i=e._z*e._z,o=e._x*e._y,s=e._z*e._w,a=e._z*e._x,u=e._y*e._w,c=e._y*e._z,l=e._x*e._w;t._m[0]=1-2*(n+i),t._m[1]=2*(o+s),t._m[2]=2*(a-u),t._m[3]=0,t._m[4]=2*(o-s),t._m[5]=1-2*(i+r),t._m[6]=2*(c+l),t._m[7]=0,t._m[8]=2*(a+u),t._m[9]=2*(c-l),t._m[10]=1-2*(n+r),t._m[11]=0,t._m[12]=0,t._m[13]=0,t._m[14]=0,t._m[15]=1,t._markAsUpdated()},Matrix._updateFlagSeed=0,Matrix._identityReadOnly=Matrix.Identity(),Matrix}(),f=function(){function MathTmp(){}return MathTmp.Vector3=o["ArrayTools"].BuildArray(6,c.Zero),MathTmp.Matrix=o["ArrayTools"].BuildArray(2,h.Identity),MathTmp.Quaternion=o["ArrayTools"].BuildArray(3,d.Zero),MathTmp}(),p=function(){function TmpVectors(){}return TmpVectors.Vector2=o["ArrayTools"].BuildArray(3,u.Zero),TmpVectors.Vector3=o["ArrayTools"].BuildArray(13,c.Zero),TmpVectors.Vector4=o["ArrayTools"].BuildArray(3,l.Zero),TmpVectors.Quaternion=o["ArrayTools"].BuildArray(2,d.Zero),TmpVectors.Matrix=o["ArrayTools"].BuildArray(8,h.Identity),TmpVectors}();s["_TypeStore"].RegisteredTypes["BABYLON.Vector2"]=u,s["_TypeStore"].RegisteredTypes["BABYLON.Vector3"]=c,s["_TypeStore"].RegisteredTypes["BABYLON.Vector4"]=l,s["_TypeStore"].RegisteredTypes["BABYLON.Matrix"]=h},"./node_modules/@babylonjs/core/Maths/math.vertexFormat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PositionNormalVertex",(function(){return i})),r.d(t,"PositionNormalTextureVertex",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=function(){function PositionNormalVertex(e,t){void 0===e&&(e=n["Vector3"].Zero()),void 0===t&&(t=n["Vector3"].Up()),this.position=e,this.normal=t}return PositionNormalVertex.prototype.clone=function(){return new PositionNormalVertex(this.position.clone(),this.normal.clone())},PositionNormalVertex}(),o=function(){function PositionNormalTextureVertex(e,t,r){void 0===e&&(e=n["Vector3"].Zero()),void 0===t&&(t=n["Vector3"].Up()),void 0===r&&(r=n["Vector2"].Zero()),this.position=e,this.normal=t,this.uv=r}return PositionNormalTextureVertex.prototype.clone=function(){return new PositionNormalTextureVertex(this.position.clone(),this.normal.clone(),this.uv.clone())},PositionNormalTextureVertex}()},"./node_modules/@babylonjs/core/Maths/math.viewport.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Viewport",(function(){return n}));var n=function(){function Viewport(e,t,r,n){this.x=e,this.y=t,this.width=r,this.height=n}return Viewport.prototype.toGlobal=function(e,t){return new Viewport(this.x*e,this.y*t,this.width*e,this.height*t)},Viewport.prototype.toGlobalToRef=function(e,t,r){return r.x=this.x*e,r.y=this.y*t,r.width=this.width*e,r.height=this.height*t,this},Viewport.prototype.clone=function(){return new Viewport(this.x,this.y,this.width,this.height)},Viewport}()},"./node_modules/@babylonjs/core/Meshes/Builders/boxBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BoxBuilder",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");s["VertexData"].CreateBox=function(e){var t=6,r=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],a=[],u=[],c=e.width||e.size||1,l=e.height||e.size||1,d=e.depth||e.size||1,h=e.wrap||!1,f=void 0===e.topBaseAt?1:e.topBaseAt,p=void 0===e.bottomBaseAt?0:e.bottomBaseAt;f=(f+4)%4,p=(p+4)%4;var m=[2,0,3,1],_=[2,0,1,3],g=m[f],b=_[p],v=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(h){r=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],v=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];var M=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],T=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]],S=[17,18,19,16],C=[22,23,20,21];while(g>0)M.unshift(M.pop()),S.unshift(S.pop()),g--;while(b>0)T.unshift(T.pop()),C.unshift(C.pop()),b--;M=M.flat(),T=T.flat(),v=v.concat(M).concat(T),r.push(S[0],S[2],S[3],S[0],S[1],S[2]),r.push(C[0],C[2],C[3],C[0],C[1],C[2])}var E=[c/2,l/2,d/2];u=v.reduce((function(e,t,r){return e.concat(t*E[r%3])}),[]);for(var P=0===e.sideOrientation?0:e.sideOrientation||s["VertexData"].DEFAULTSIDE,A=e.faceUV||new Array(6),j=e.faceColors,O=[],R=0;R<6;R++)void 0===A[R]&&(A[R]=new n["Vector4"](0,0,1,1)),j&&void 0===j[R]&&(j[R]=new i["Color4"](1,1,1,1));for(var I=0;I<t;I++)if(a.push(A[I].z,A[I].w),a.push(A[I].x,A[I].w),a.push(A[I].x,A[I].y),a.push(A[I].z,A[I].y),j)for(var w=0;w<4;w++)O.push(j[I].r,j[I].g,j[I].b,j[I].a);s["VertexData"]._ComputeSides(P,u,r,o,a,e.frontUVs,e.backUVs);var D=new s["VertexData"];if(D.indices=r,D.positions=u,D.normals=o,D.uvs=a,j){var F=P===s["VertexData"].DOUBLESIDE?O.concat(O):O;D.colors=F}return D},o["Mesh"].CreateBox=function(e,t,r,n,i){void 0===r&&(r=null);var o={size:t,sideOrientation:i,updatable:n};return a.CreateBox(e,o,r)};var a=function(){function BoxBuilder(){}return BoxBuilder.CreateBox=function(e,t,r){void 0===r&&(r=null);var n=new o["Mesh"](e,r);t.sideOrientation=o["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var i=s["VertexData"].CreateBox(t);return i.applyToMesh(n,t.updatable),n},BoxBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/capsuleBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CapsuleBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js");n["VertexData"].CreateCapsule=function(e){void 0===e&&(e={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6});var t,r,o=Math.max(e.subdivisions?e.subdivisions:2,1),s=Math.max(e.tessellation?e.tessellation:16,3),a=Math.max(e.height?e.height:1,0),u=Math.max(e.radius?e.radius:.25,0),c=Math.max(e.capSubdivisions?e.capSubdivisions:6,1),l=s,d=o,h=Math.max(e.radiusTop?e.radiusTop:u,0),f=Math.max(e.radiusBottom?e.radiusBottom:u,0),p=a-(h+f),m=0,_=2*Math.PI,g=Math.max(e.topCapSubdivisions?e.topCapSubdivisions:c,1),b=Math.max(e.bottomCapSubdivisions?e.bottomCapSubdivisions:c,1),v=Math.acos((f-h)/a),M=[],T=[],S=[],C=[],E=0,P=[],A=.5*p,j=.5*Math.PI,O=i["Vector3"].Zero(),R=i["Vector3"].Zero(),I=Math.cos(v),w=Math.sin(v),D=new i["Vector2"](h*w,A+h*I).subtract(new i["Vector2"](f*w,f*I-A)).length(),F=h*v+D+f*(j-v),B=0;for(r=0;r<=g;r++){var L=[],V=j-v*(r/g);B+=h*v/g;var N=Math.cos(V),k=Math.sin(V),U=N*h;for(t=0;t<=l;t++){var z=t/l,G=z*_+m,W=Math.sin(G),H=Math.cos(G);R.x=U*W,R.y=A+k*h,R.z=U*H,T.push(R.x,R.y,R.z),O.set(N*W,k,N*H),S.push(O.x,O.y,O.z),C.push(z,1-B/F),L.push(E),E++}P.push(L)}var X=a-h-f+I*h-I*f,q=w*(f-h)/X;for(r=1;r<=d;r++){L=[];B+=D/d;U=w*(r*(f-h)/d+h);for(t=0;t<=l;t++){z=t/l,G=z*_+m,W=Math.sin(G),H=Math.cos(G);R.x=U*W,R.y=A+I*h-r*X/d,R.z=U*H,T.push(R.x,R.y,R.z),O.set(W,q,H).normalize(),S.push(O.x,O.y,O.z),C.push(z,1-B/F),L.push(E),E++}P.push(L)}for(r=1;r<=b;r++){L=[],V=j-v-(Math.PI-v)*(r/b);B+=f*v/b;N=Math.cos(V),k=Math.sin(V),U=N*f;for(t=0;t<=l;t++){z=t/l,G=z*_+m,W=Math.sin(G),H=Math.cos(G);R.x=U*W,R.y=k*f-A,R.z=U*H,T.push(R.x,R.y,R.z),O.set(N*W,k,N*H),S.push(O.x,O.y,O.z),C.push(z,1-B/F),L.push(E),E++}P.push(L)}for(t=0;t<l;t++)for(r=0;r<g+d+b;r++){var K=P[r][t],Y=P[r+1][t],Q=P[r+1][t+1],Z=P[r][t+1];M.push(K),M.push(Y),M.push(Z),M.push(Y),M.push(Q),M.push(Z)}if(M=M.reverse(),e.orientation&&!e.orientation.equals(i["Vector3"].Up())){var $=new i["Matrix"];e.orientation.clone().scale(.5*Math.PI).cross(i["Vector3"].Up()).toQuaternion().toRotationMatrix($);for(var J=i["Vector3"].Zero(),ee=0;ee<T.length;ee+=3)J.set(T[ee],T[ee+1],T[ee+2]),i["Vector3"].TransformCoordinatesToRef(J.clone(),$,J),T[ee]=J.x,T[ee+1]=J.y,T[ee+2]=J.z}var te=new n["VertexData"];return te.positions=T,te.normals=S,te.uvs=C,te.indices=M,te},o["Mesh"].CreateCapsule=function(e,t,r){return s.CreateCapsule(e,t,r)};var s=function(){function CapsuleBuilder(){}return CapsuleBuilder.CreateCapsule=function(e,t,r){void 0===t&&(t={orientation:i["Vector3"].Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6});var s=new o["Mesh"](e,r),a=n["VertexData"].CreateCapsule(t);return a.applyToMesh(s),s},CapsuleBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/cylinderBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CylinderBuilder",(function(){return c}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/scene.js"),u=r("./node_modules/@babylonjs/core/Maths/math.axis.js");s["VertexData"].CreateCylinder=function(e){var t=e.height||2,r=0===e.diameterTop?0:e.diameterTop||e.diameter||1,a=0===e.diameterBottom?0:e.diameterBottom||e.diameter||1;r=r||1e-5,a=a||1e-5;var c,l=e.tessellation||24,d=e.subdivisions||1,h=!!e.hasRings,f=!!e.enclose,p=0===e.cap?0:e.cap||o["Mesh"].CAP_ALL,m=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,_=0===e.sideOrientation?0:e.sideOrientation||s["VertexData"].DEFAULTSIDE,g=e.faceUV||new Array(3),b=e.faceColors,v=1!==m&&f?2:0,M=h?d:1,T=2+(1+v)*M;for(c=0;c<T;c++)b&&void 0===b[c]&&(b[c]=new i["Color4"](1,1,1,1));for(c=0;c<T;c++)g&&void 0===g[c]&&(g[c]=new n["Vector4"](0,0,1,1));var S,C,E,P,A,j,O=new Array,R=new Array,I=new Array,w=new Array,D=new Array,F=2*Math.PI*m/l,B=(a-r)/2/t,L=n["Vector3"].Zero(),V=n["Vector3"].Zero(),N=n["Vector3"].Zero(),k=n["Vector3"].Zero(),U=n["Vector3"].Zero(),z=u["Axis"].Y,G=1,W=1,H=0,X=0;for(P=0;P<=d;P++)for(C=P/d,E=(C*(r-a)+a)/2,G=h&&0!==P&&P!==d?2:1,j=0;j<G;j++){for(h&&(W+=j),f&&(W+=2*j),A=0;A<=l;A++)S=A*F,L.x=Math.cos(-S)*E,L.y=-t/2+C*t,L.z=Math.sin(-S)*E,0===r&&P===d?(V.x=I[I.length-3*(l+1)],V.y=I[I.length-3*(l+1)+1],V.z=I[I.length-3*(l+1)+2]):(V.x=L.x,V.z=L.z,V.y=Math.sqrt(V.x*V.x+V.z*V.z)*B,V.normalize()),0===A&&(N.copyFrom(L),k.copyFrom(V)),R.push(L.x,L.y,L.z),I.push(V.x,V.y,V.z),X=h?H!==W?g[W].y:g[W].w:g[W].y+(g[W].w-g[W].y)*C,w.push(g[W].x+(g[W].z-g[W].x)*A/l,X),b&&D.push(b[W].r,b[W].g,b[W].b,b[W].a);1!==m&&f&&(R.push(L.x,L.y,L.z),R.push(0,L.y,0),R.push(0,L.y,0),R.push(N.x,N.y,N.z),n["Vector3"].CrossToRef(z,V,U),U.normalize(),I.push(U.x,U.y,U.z,U.x,U.y,U.z),n["Vector3"].CrossToRef(k,z,U),U.normalize(),I.push(U.x,U.y,U.z,U.x,U.y,U.z),X=h?H!==W?g[W+1].y:g[W+1].w:g[W+1].y+(g[W+1].w-g[W+1].y)*C,w.push(g[W+1].x,X),w.push(g[W+1].z,X),X=h?H!==W?g[W+2].y:g[W+2].w:g[W+2].y+(g[W+2].w-g[W+2].y)*C,w.push(g[W+2].x,X),w.push(g[W+2].z,X),b&&(D.push(b[W+1].r,b[W+1].g,b[W+1].b,b[W+1].a),D.push(b[W+1].r,b[W+1].g,b[W+1].b,b[W+1].a),D.push(b[W+2].r,b[W+2].g,b[W+2].b,b[W+2].a),D.push(b[W+2].r,b[W+2].g,b[W+2].b,b[W+2].a))),H!==W&&(H=W)}var q=1!==m&&f?l+4:l;for(P=0,W=0;W<d;W++){var K=0,Y=0,Q=0,Z=0;for(A=0;A<l;A++)K=P*(q+1)+A,Y=(P+1)*(q+1)+A,Q=P*(q+1)+(A+1),Z=(P+1)*(q+1)+(A+1),O.push(K,Y,Q),O.push(Z,Q,Y);1!==m&&f&&(O.push(K+2,Y+2,Q+2),O.push(Z+2,Q+2,Y+2),O.push(K+4,Y+4,Q+4),O.push(Z+4,Q+4,Y+4)),P=h?P+2:P+1}var createCylinderCap=function(e){var i=e?r/2:a/2;if(0!==i){var o,s,u,c=e?g[T-1]:g[0],d=null;b&&(d=e?b[T-1]:b[0]);var h=R.length/3,f=e?t/2:-t/2,p=new n["Vector3"](0,f,0);R.push(p.x,p.y,p.z),I.push(0,e?1:-1,0),w.push(c.x+.5*(c.z-c.x),c.y+.5*(c.w-c.y)),d&&D.push(d.r,d.g,d.b,d.a);var _=new n["Vector2"](.5,.5);for(u=0;u<=l;u++){o=2*Math.PI*u*m/l;var v=Math.cos(-o),M=Math.sin(-o);s=new n["Vector3"](v*i,f,M*i);var S=new n["Vector2"](v*_.x+.5,M*_.y+.5);R.push(s.x,s.y,s.z),I.push(0,e?1:-1,0),w.push(c.x+(c.z-c.x)*S.x,c.y+(c.w-c.y)*S.y),d&&D.push(d.r,d.g,d.b,d.a)}for(u=0;u<l;u++)e?(O.push(h),O.push(h+(u+2)),O.push(h+(u+1))):(O.push(h),O.push(h+(u+1)),O.push(h+(u+2)))}};p!==o["Mesh"].CAP_START&&p!==o["Mesh"].CAP_ALL||createCylinderCap(!1),p!==o["Mesh"].CAP_END&&p!==o["Mesh"].CAP_ALL||createCylinderCap(!0),s["VertexData"]._ComputeSides(_,R,O,I,w,e.frontUVs,e.backUVs);var $=new s["VertexData"];return $.indices=O,$.positions=R,$.normals=I,$.uvs=w,b&&($.colors=D),$},o["Mesh"].CreateCylinder=function(e,t,r,n,i,s,u,l,d){void 0!==u&&u instanceof a["Scene"]||(void 0!==u&&(d=l||o["Mesh"].DEFAULTSIDE,l=u),u=s,s=1);var h={height:t,diameterTop:r,diameterBottom:n,tessellation:i,subdivisions:s,sideOrientation:d,updatable:l};return c.CreateCylinder(e,h,u)};var c=function(){function CylinderBuilder(){}return CylinderBuilder.CreateCylinder=function(e,t,r){var n=new o["Mesh"](e,r);t.sideOrientation=o["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var i=s["VertexData"].CreateCylinder(t);return i.applyToMesh(n,t.updatable),n},CylinderBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/decalBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DecalBuilder",(function(){return u}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/Maths/math.vertexFormat.js");i["Mesh"].CreateDecal=function(e,t,r,n,i,o){var s={position:r,normal:n,size:i,angle:o};return u.CreateDecal(e,t,s)};var u=function(){function DecalBuilder(){}return DecalBuilder.CreateDecal=function(e,t,r){var u=t.getIndices(),c=t.getVerticesData(o["VertexBuffer"].PositionKind),l=t.getVerticesData(o["VertexBuffer"].NormalKind),d=r.position||n["Vector3"].Zero(),h=r.normal||n["Vector3"].Up(),f=r.size||n["Vector3"].One(),p=r.angle||0;if(!h){var m=new n["Vector3"](0,0,1),_=t.getScene().activeCamera,g=n["Vector3"].TransformCoordinates(m,_.getWorldMatrix());h=_.globalPosition.subtract(g)}var b=-Math.atan2(h.z,h.x)-Math.PI/2,v=Math.sqrt(h.x*h.x+h.z*h.z),M=Math.atan2(h.y,v),T=n["Matrix"].RotationYawPitchRoll(b,M,p).multiply(n["Matrix"].Translation(d.x,d.y,d.z)),S=n["Matrix"].Invert(T),C=t.getWorldMatrix(),E=C.multiply(S),P=new s["VertexData"];P.indices=[],P.positions=[],P.normals=[],P.uvs=[];for(var A=0,extractDecalVector3=function(e){var t=new a["PositionNormalVertex"];if(!u||!c||!l)return t;var r=u[e];return t.position=new n["Vector3"](c[3*r],c[3*r+1],c[3*r+2]),t.position=n["Vector3"].TransformCoordinates(t.position,E),t.normal=new n["Vector3"](l[3*r],l[3*r+1],l[3*r+2]),t.normal=n["Vector3"].TransformNormal(t.normal,E),t},clip=function(e,t){if(0===e.length)return e;for(var r=.5*Math.abs(n["Vector3"].Dot(f,t)),clipVertices=function(e,i){var o=n["Vector3"].GetClipFactor(e.position,i.position,t,r);return new a["PositionNormalVertex"](n["Vector3"].Lerp(e.position,i.position,o),n["Vector3"].Lerp(e.normal,i.normal,o))},i=new Array,o=0;o<e.length;o+=3){var s,u,c,l=0,d=null,h=null,p=null,m=null,_=n["Vector3"].Dot(e[o].position,t)-r,g=n["Vector3"].Dot(e[o+1].position,t)-r,b=n["Vector3"].Dot(e[o+2].position,t)-r;switch(s=_>0,u=g>0,c=b>0,l=(s?1:0)+(u?1:0)+(c?1:0),l){case 0:i.push(e[o]),i.push(e[o+1]),i.push(e[o+2]);break;case 1:if(s&&(d=e[o+1],h=e[o+2],p=clipVertices(e[o],d),m=clipVertices(e[o],h)),u){d=e[o],h=e[o+2],p=clipVertices(e[o+1],d),m=clipVertices(e[o+1],h),i.push(p),i.push(h.clone()),i.push(d.clone()),i.push(h.clone()),i.push(p.clone()),i.push(m);break}c&&(d=e[o],h=e[o+1],p=clipVertices(e[o+2],d),m=clipVertices(e[o+2],h)),d&&h&&p&&m&&(i.push(d.clone()),i.push(h.clone()),i.push(p),i.push(m),i.push(p.clone()),i.push(h.clone()));break;case 2:s||(d=e[o].clone(),h=clipVertices(d,e[o+1]),p=clipVertices(d,e[o+2]),i.push(d),i.push(h),i.push(p)),u||(d=e[o+1].clone(),h=clipVertices(d,e[o+2]),p=clipVertices(d,e[o]),i.push(d),i.push(h),i.push(p)),c||(d=e[o+2].clone(),h=clipVertices(d,e[o]),p=clipVertices(d,e[o+1]),i.push(d),i.push(h),i.push(p));break;case 3:break}}return i},j=0;j<u.length;j+=3){var O=new Array;if(O.push(extractDecalVector3(j)),O.push(extractDecalVector3(j+1)),O.push(extractDecalVector3(j+2)),O=clip(O,new n["Vector3"](1,0,0)),O=clip(O,new n["Vector3"](-1,0,0)),O=clip(O,new n["Vector3"](0,1,0)),O=clip(O,new n["Vector3"](0,-1,0)),O=clip(O,new n["Vector3"](0,0,1)),O=clip(O,new n["Vector3"](0,0,-1)),0!==O.length)for(var R=0;R<O.length;R++){var I=O[R];P.indices.push(A),I.position.toArray(P.positions,3*A),I.normal.toArray(P.normals,3*A),P.uvs.push(.5+I.position.x/f.x),P.uvs.push(.5+I.position.y/f.y),A++}}var w=new i["Mesh"](e,t.getScene());return P.applyToMesh(w),w.position=d.clone(),w.rotation=new n["Vector3"](M,b,p),w},DecalBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/discBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DiscBuilder",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");i["VertexData"].CreateDisc=function(e){var t=new Array,r=new Array,n=new Array,o=new Array,s=e.radius||.5,a=e.tessellation||64,u=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,c=0===e.sideOrientation?0:e.sideOrientation||i["VertexData"].DEFAULTSIDE;t.push(0,0,0),o.push(.5,.5);for(var l=2*Math.PI*u,d=1===u?l/a:l/(a-1),h=0,f=0;f<a;f++){var p=Math.cos(h),m=Math.sin(h),_=(p+1)/2,g=(1-m)/2;t.push(s*p,s*m,0),o.push(_,g),h+=d}1===u&&(t.push(t[3],t[4],t[5]),o.push(o[2],o[3]));for(var b=t.length/3,v=1;v<b-1;v++)r.push(v+1,0,v);i["VertexData"].ComputeNormals(t,r,n),i["VertexData"]._ComputeSides(c,t,r,n,o,e.frontUVs,e.backUVs);var M=new i["VertexData"];return M.indices=r,M.positions=t,M.normals=n,M.uvs=o,M},n["Mesh"].CreateDisc=function(e,t,r,n,i,s){void 0===n&&(n=null);var a={radius:t,tessellation:r,sideOrientation:s,updatable:i};return o.CreateDisc(e,a,n)};var o=function(){function DiscBuilder(){}return DiscBuilder.CreateDisc=function(e,t,r){void 0===r&&(r=null);var o=new n["Mesh"](e,r);t.sideOrientation=n["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),o._originalBuilderSideOrientation=t.sideOrientation;var s=i["VertexData"].CreateDisc(t);return s.applyToMesh(o,t.updatable),o},DiscBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/groundBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GroundBuilder",(function(){return h}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/Meshes/groundMesh.js"),u=r("./node_modules/@babylonjs/core/Misc/tools.js"),c=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),l=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),d=r("./node_modules/@babylonjs/core/Misc/canvasGenerator.js");s["VertexData"].CreateGround=function(e){var t,r,i=[],o=[],a=[],u=[],c=e.width||1,l=e.height||1,d=e.subdivisionsX||e.subdivisions||1,h=e.subdivisionsY||e.subdivisions||1;for(t=0;t<=h;t++)for(r=0;r<=d;r++){var f=new n["Vector3"](r*c/d-c/2,0,(h-t)*l/h-l/2),p=new n["Vector3"](0,1,0);o.push(f.x,f.y,f.z),a.push(p.x,p.y,p.z),u.push(r/d,1-t/h)}for(t=0;t<h;t++)for(r=0;r<d;r++)i.push(r+1+(t+1)*(d+1)),i.push(r+1+t*(d+1)),i.push(r+t*(d+1)),i.push(r+(t+1)*(d+1)),i.push(r+1+(t+1)*(d+1)),i.push(r+t*(d+1));var m=new s["VertexData"];return m.indices=i,m.positions=o,m.normals=a,m.uvs=u,m},s["VertexData"].CreateTiledGround=function(e){var t,r,i,o,a=void 0!==e.xmin&&null!==e.xmin?e.xmin:-1,u=void 0!==e.zmin&&null!==e.zmin?e.zmin:-1,c=void 0!==e.xmax&&null!==e.xmax?e.xmax:1,l=void 0!==e.zmax&&null!==e.zmax?e.zmax:1,d=e.subdivisions||{w:1,h:1},h=e.precision||{w:1,h:1},f=new Array,p=new Array,m=new Array,_=new Array;d.h=d.h<1?1:d.h,d.w=d.w<1?1:d.w,h.w=h.w<1?1:h.w,h.h=h.h<1?1:h.h;var g={w:(c-a)/d.w,h:(l-u)/d.h};function applyTile(e,i,o,s){var a=p.length/3,u=h.w+1;for(t=0;t<h.h;t++)for(r=0;r<h.w;r++){var c=[a+r+t*u,a+(r+1)+t*u,a+(r+1)+(t+1)*u,a+r+(t+1)*u];f.push(c[1]),f.push(c[2]),f.push(c[3]),f.push(c[0]),f.push(c[1]),f.push(c[3])}var l=n["Vector3"].Zero(),d=new n["Vector3"](0,1,0);for(t=0;t<=h.h;t++)for(l.z=t*(s-i)/h.h+i,r=0;r<=h.w;r++)l.x=r*(o-e)/h.w+e,l.y=0,p.push(l.x,l.y,l.z),m.push(d.x,d.y,d.z),_.push(r/h.w,t/h.h)}for(i=0;i<d.h;i++)for(o=0;o<d.w;o++)applyTile(a+o*g.w,u+i*g.h,a+(o+1)*g.w,u+(i+1)*g.h);var b=new s["VertexData"];return b.indices=f,b.positions=p,b.normals=m,b.uvs=_,b},s["VertexData"].CreateGroundFromHeightMap=function(e){var t,r,o=[],a=[],u=[],c=[],d=e.colorFilter||new i["Color3"](.3,.59,.11),h=e.alphaFilter||0,f=!1;if(e.minHeight>e.maxHeight){f=!0;var p=e.maxHeight;e.maxHeight=e.minHeight,e.minHeight=p}for(t=0;t<=e.subdivisions;t++)for(r=0;r<=e.subdivisions;r++){var m=new n["Vector3"](r*e.width/e.subdivisions-e.width/2,0,(e.subdivisions-t)*e.height/e.subdivisions-e.height/2),_=(m.x+e.width/2)/e.width*(e.bufferWidth-1)|0,g=(1-(m.z+e.height/2)/e.height)*(e.bufferHeight-1)|0,b=4*(_+g*e.bufferWidth),v=e.buffer[b]/255,M=e.buffer[b+1]/255,T=e.buffer[b+2]/255,S=e.buffer[b+3]/255;f&&(v=1-v,M=1-M,T=1-T);var C=v*d.r+M*d.g+T*d.b;m.y=S>=h?e.minHeight+(e.maxHeight-e.minHeight)*C:e.minHeight-l["Epsilon"],a.push(m.x,m.y,m.z),u.push(0,0,0),c.push(r/e.subdivisions,1-t/e.subdivisions)}for(t=0;t<e.subdivisions;t++)for(r=0;r<e.subdivisions;r++){var E=r+1+(t+1)*(e.subdivisions+1),P=r+1+t*(e.subdivisions+1),A=r+t*(e.subdivisions+1),j=r+(t+1)*(e.subdivisions+1),O=a[3*E+1]>=e.minHeight,R=a[3*P+1]>=e.minHeight,I=a[3*A+1]>=e.minHeight;O&&R&&I&&(o.push(E),o.push(P),o.push(A));var w=a[3*j+1]>=e.minHeight;w&&O&&I&&(o.push(j),o.push(E),o.push(A))}s["VertexData"].ComputeNormals(a,o,u);var D=new s["VertexData"];return D.indices=o,D.positions=a,D.normals=u,D.uvs=c,D},o["Mesh"].CreateGround=function(e,t,r,n,i,o){var s={width:t,height:r,subdivisions:n,updatable:o};return h.CreateGround(e,s,i)},o["Mesh"].CreateTiledGround=function(e,t,r,n,i,o,s,a,u){var c={xmin:t,zmin:r,xmax:n,zmax:i,subdivisions:o,precision:s,updatable:u};return h.CreateTiledGround(e,c,a)},o["Mesh"].CreateGroundFromHeightMap=function(e,t,r,n,i,o,s,a,u,c,l){var d={width:r,height:n,subdivisions:i,minHeight:o,maxHeight:s,updatable:u,onReady:c,alphaFilter:l};return h.CreateGroundFromHeightMap(e,t,d,a)};var h=function(){function GroundBuilder(){}return GroundBuilder.CreateGround=function(e,t,r){var n=new a["GroundMesh"](e,r);n._setReady(!1),n._subdivisionsX=t.subdivisionsX||t.subdivisions||1,n._subdivisionsY=t.subdivisionsY||t.subdivisions||1,n._width=t.width||1,n._height=t.height||1,n._maxX=n._width/2,n._maxZ=n._height/2,n._minX=-n._maxX,n._minZ=-n._maxZ;var i=s["VertexData"].CreateGround(t);return i.applyToMesh(n,t.updatable),n._setReady(!0),n},GroundBuilder.CreateTiledGround=function(e,t,r){void 0===r&&(r=null);var n=new o["Mesh"](e,r),i=s["VertexData"].CreateTiledGround(t);return i.applyToMesh(n,t.updatable),n},GroundBuilder.CreateGroundFromHeightMap=function(e,t,r,n){void 0===n&&(n=null);var o=r.width||10,l=r.height||10,h=r.subdivisions||1,f=r.minHeight||0,p=r.maxHeight||1,m=r.colorFilter||new i["Color3"](.3,.59,.11),_=r.alphaFilter||0,g=r.updatable,b=r.onReady;n=n||c["EngineStore"].LastCreatedScene;var v=new a["GroundMesh"](e,n);v._subdivisionsX=h,v._subdivisionsY=h,v._width=o,v._height=l,v._maxX=v._width/2,v._maxZ=v._height/2,v._minX=-v._maxX,v._minZ=-v._maxZ,v._setReady(!1);var onload=function(e){var t=e.width,r=e.height,i=d["CanvasGenerator"].CreateCanvas(t,r),a=i.getContext("2d");if(!a)throw new Error("Unable to get 2d context for CreateGroundFromHeightMap");if(!n.isDisposed){a.drawImage(e,0,0);var u=a.getImageData(0,0,t,r).data,c=s["VertexData"].CreateGroundFromHeightMap({width:o,height:l,subdivisions:h,minHeight:f,maxHeight:p,colorFilter:m,buffer:u,bufferWidth:t,bufferHeight:r,alphaFilter:_});c.applyToMesh(v,g),b&&b(v),v._setReady(!0)}};return u["Tools"].LoadImage(t,onload,(function(){}),n.offlineProvider),v},GroundBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/icoSphereBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"IcoSphereBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");o["VertexData"].CreateIcoSphere=function(e){var t,r=e.sideOrientation||o["VertexData"].DEFAULTSIDE,i=e.radius||1,s=void 0===e.flat||e.flat,a=e.subdivisions||4,u=e.radiusX||i,c=e.radiusY||i,l=e.radiusZ||i,d=(1+Math.sqrt(5))/2,h=[-1,d,-0,1,d,0,-1,-d,0,1,-d,0,0,-1,-d,0,1,-d,0,-1,d,0,1,d,d,0,1,d,0,-1,-d,0,1,-d,0,-1],f=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],p=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],m=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],_=138/1024,g=239/1024,b=60/1024,v=26/1024,M=-40/1024,T=20/1024,S=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],C=new Array,E=new Array,P=new Array,A=new Array,j=0,O=new Array(3),R=new Array(3);for(t=0;t<3;t++)O[t]=n["Vector3"].Zero(),R[t]=n["Vector2"].Zero();for(var I=0;I<20;I++){for(t=0;t<3;t++){var w=f[3*I+t];O[t].copyFromFloats(h[3*p[w]],h[3*p[w]+1],h[3*p[w]+2]),O[t].normalize().scaleInPlace(i),R[t].copyFromFloats(m[2*w]*_+b+S[I]*M,m[2*w+1]*g+v+S[I]*T)}for(var interp_vertex=function(e,t,r,i){var o,d=n["Vector3"].Lerp(O[0],O[2],t/a),h=n["Vector3"].Lerp(O[1],O[2],t/a),f=a===t?O[2]:n["Vector3"].Lerp(d,h,e/(a-t));if(f.normalize(),s){var p=n["Vector3"].Lerp(O[0],O[2],i/a),m=n["Vector3"].Lerp(O[1],O[2],i/a);o=n["Vector3"].Lerp(p,m,r/(a-i))}else o=new n["Vector3"](f.x,f.y,f.z);o.x/=u,o.y/=c,o.z/=l,o.normalize();var _=n["Vector2"].Lerp(R[0],R[2],t/a),g=n["Vector2"].Lerp(R[1],R[2],t/a),b=a===t?R[2]:n["Vector2"].Lerp(_,g,e/(a-t));E.push(f.x*u,f.y*c,f.z*l),P.push(o.x,o.y,o.z),A.push(b.x,b.y),C.push(j),j++},D=0;D<a;D++)for(var F=0;F+D<a;F++)interp_vertex(F,D,F+1/3,D+1/3),interp_vertex(F+1,D,F+1/3,D+1/3),interp_vertex(F,D+1,F+1/3,D+1/3),F+D+1<a&&(interp_vertex(F+1,D,F+2/3,D+2/3),interp_vertex(F+1,D+1,F+2/3,D+2/3),interp_vertex(F,D+1,F+2/3,D+2/3))}o["VertexData"]._ComputeSides(r,E,C,P,A,e.frontUVs,e.backUVs);var B=new o["VertexData"];return B.indices=C,B.positions=E,B.normals=P,B.uvs=A,B},i["Mesh"].CreateIcoSphere=function(e,t,r){return s.CreateIcoSphere(e,t,r)};var s=function(){function IcoSphereBuilder(){}return IcoSphereBuilder.CreateIcoSphere=function(e,t,r){void 0===r&&(r=null);var n=new i["Mesh"](e,r);t.sideOrientation=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var s=o["VertexData"].CreateIcoSphere(t);return s.applyToMesh(n,t.updatable),n},IcoSphereBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/latheBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"LatheBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/Builders/ribbonBuilder.js");i["Mesh"].CreateLathe=function(e,t,r,n,i,o,a){var u={shape:t,radius:r,tessellation:n,sideOrientation:a,updatable:o};return s.CreateLathe(e,u,i)};var s=function(){function LatheBuilder(){}return LatheBuilder.CreateLathe=function(e,t,r){void 0===r&&(r=null);var s,a=t.arc?t.arc<=0||t.arc>1?1:t.arc:1,u=void 0===t.closed||t.closed,c=t.shape,l=t.radius||1,d=t.tessellation||64,h=t.clip||0,f=t.updatable,p=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),m=t.cap||i["Mesh"].NO_CAP,_=2*Math.PI,g=new Array,b=t.invertUV||!1,v=0,M=0,T=_/d*a,S=new Array;for(v=0;v<=d-h;v++){S=[];for(m!=i["Mesh"].CAP_START&&m!=i["Mesh"].CAP_ALL||(S.push(new n["Vector3"](0,c[0].y,0)),S.push(new n["Vector3"](Math.cos(v*T)*c[0].x*l,c[0].y,Math.sin(v*T)*c[0].x*l))),M=0;M<c.length;M++)s=new n["Vector3"](Math.cos(v*T)*c[M].x*l,c[M].y,Math.sin(v*T)*c[M].x*l),S.push(s);m!=i["Mesh"].CAP_END&&m!=i["Mesh"].CAP_ALL||(S.push(new n["Vector3"](Math.cos(v*T)*c[c.length-1].x*l,c[c.length-1].y,Math.sin(v*T)*c[c.length-1].x*l)),S.push(new n["Vector3"](0,c[c.length-1].y,0))),g.push(S)}var C=o["RibbonBuilder"].CreateRibbon(e,{pathArray:g,closeArray:u,sideOrientation:p,updatable:f,invertUV:b,frontUVs:t.frontUVs,backUVs:t.backUVs},r);return C},LatheBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/linesBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"LinesBuilder",(function(){return u}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),s=r("./node_modules/@babylonjs/core/Meshes/linesMesh.js"),a=r("./node_modules/@babylonjs/core/Meshes/buffer.js");o["VertexData"].CreateLineSystem=function(e){for(var t=[],r=[],n=e.lines,i=e.colors,s=[],a=0,u=0;u<n.length;u++)for(var c=n[u],l=0;l<c.length;l++){if(r.push(c[l].x,c[l].y,c[l].z),i){var d=i[u];s.push(d[l].r,d[l].g,d[l].b,d[l].a)}l>0&&(t.push(a-1),t.push(a)),a++}var h=new o["VertexData"];return h.indices=t,h.positions=r,i&&(h.colors=s),h},o["VertexData"].CreateDashedLines=function(e){var t=e.dashSize||3,r=e.gapSize||1,i=e.dashNb||200,s=e.points,a=new Array,u=new Array,c=n["Vector3"].Zero(),l=0,d=0,h=0,f=0,p=0,m=0,_=0;for(_=0;_<s.length-1;_++)s[_+1].subtractToRef(s[_],c),l+=c.length();for(h=l/i,f=t*h/(t+r),_=0;_<s.length-1;_++){s[_+1].subtractToRef(s[_],c),d=Math.floor(c.length()/h),c.normalize();for(var g=0;g<d;g++)p=h*g,a.push(s[_].x+p*c.x,s[_].y+p*c.y,s[_].z+p*c.z),a.push(s[_].x+(p+f)*c.x,s[_].y+(p+f)*c.y,s[_].z+(p+f)*c.z),u.push(m,m+1),m+=2}var b=new o["VertexData"];return b.positions=a,b.indices=u,b},i["Mesh"].CreateLines=function(e,t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=!1),void 0===i&&(i=null);var o={points:t,updatable:n,instance:i};return u.CreateLines(e,o,r)},i["Mesh"].CreateDashedLines=function(e,t,r,n,i,o,s,a){void 0===o&&(o=null);var c={points:t,dashSize:r,gapSize:n,dashNb:i,updatable:s,instance:a};return u.CreateDashedLines(e,c,o)};var u=function(){function LinesBuilder(){}return LinesBuilder.CreateLineSystem=function(e,t,r){var n=t.instance,i=t.lines,u=t.colors;if(n){var c,l,d=n.getVerticesData(a["VertexBuffer"].PositionKind);u&&(c=n.getVerticesData(a["VertexBuffer"].ColorKind));for(var h=0,f=0,p=0;p<i.length;p++)for(var m=i[p],_=0;_<m.length;_++)d[h]=m[_].x,d[h+1]=m[_].y,d[h+2]=m[_].z,u&&c&&(l=u[p],c[f]=l[_].r,c[f+1]=l[_].g,c[f+2]=l[_].b,c[f+3]=l[_].a,f+=4),h+=3;return n.updateVerticesData(a["VertexBuffer"].PositionKind,d,!1,!1),u&&c&&n.updateVerticesData(a["VertexBuffer"].ColorKind,c,!1,!1),n}var g=!!u,b=new s["LinesMesh"](e,r,null,void 0,void 0,g,t.useVertexAlpha),v=o["VertexData"].CreateLineSystem(t);return v.applyToMesh(b,t.updatable),b},LinesBuilder.CreateLines=function(e,t,r){void 0===r&&(r=null);var n=t.colors?[t.colors]:null,i=LinesBuilder.CreateLineSystem(e,{lines:[t.points],updatable:t.updatable,instance:t.instance,colors:n,useVertexAlpha:t.useVertexAlpha},r);return i},LinesBuilder.CreateDashedLines=function(e,t,r){void 0===r&&(r=null);var a=t.points,u=t.instance,c=t.gapSize||1,l=t.dashSize||3;if(u){var positionFunction=function(e){var t=n["Vector3"].Zero(),r=e.length/6,i=0,o=0,s=0,c=0,l=0,d=0,h=0,f=0;for(h=0;h<a.length-1;h++)a[h+1].subtractToRef(a[h],t),i+=t.length();s=i/r;var p=u._creationDataStorage.dashSize,m=u._creationDataStorage.gapSize;for(c=p*s/(p+m),h=0;h<a.length-1;h++){a[h+1].subtractToRef(a[h],t),o=Math.floor(t.length()/s),t.normalize(),f=0;while(f<o&&d<e.length)l=s*f,e[d]=a[h].x+l*t.x,e[d+1]=a[h].y+l*t.y,e[d+2]=a[h].z+l*t.z,e[d+3]=a[h].x+(l+c)*t.x,e[d+4]=a[h].y+(l+c)*t.y,e[d+5]=a[h].z+(l+c)*t.z,d+=6,f++}while(d<e.length)e[d]=a[h].x,e[d+1]=a[h].y,e[d+2]=a[h].z,d+=3};return u.updateMeshPositions(positionFunction,!1),u}var d=new s["LinesMesh"](e,r,null,void 0,void 0,void 0,t.useVertexAlpha),h=o["VertexData"].CreateDashedLines(t);return h.applyToMesh(d,t.updatable),d._creationDataStorage=new i["_CreationDataStorage"],d._creationDataStorage.dashSize=l,d._creationDataStorage.gapSize=c,d},LinesBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/planeBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PlaneBuilder",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");i["VertexData"].CreatePlane=function(e){var t=[],r=[],n=[],o=[],s=e.width||e.size||1,a=e.height||e.size||1,u=0===e.sideOrientation?0:e.sideOrientation||i["VertexData"].DEFAULTSIDE,c=s/2,l=a/2;r.push(-c,-l,0),n.push(0,0,-1),o.push(0,0),r.push(c,-l,0),n.push(0,0,-1),o.push(1,0),r.push(c,l,0),n.push(0,0,-1),o.push(1,1),r.push(-c,l,0),n.push(0,0,-1),o.push(0,1),t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),i["VertexData"]._ComputeSides(u,r,t,n,o,e.frontUVs,e.backUVs);var d=new i["VertexData"];return d.indices=t,d.positions=r,d.normals=n,d.uvs=o,d},n["Mesh"].CreatePlane=function(e,t,r,n,i){var s={size:t,width:t,height:t,sideOrientation:i,updatable:n};return o.CreatePlane(e,s,r)};var o=function(){function PlaneBuilder(){}return PlaneBuilder.CreatePlane=function(e,t,r){void 0===r&&(r=null);var o=new n["Mesh"](e,r);t.sideOrientation=n["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),o._originalBuilderSideOrientation=t.sideOrientation;var s=i["VertexData"].CreatePlane(t);return s.applyToMesh(o,t.updatable),t.sourcePlane&&(o.translate(t.sourcePlane.normal,-t.sourcePlane.d),o.setDirection(t.sourcePlane.normal.scale(-1))),o},PlaneBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/polygonBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PolygonBuilder",(function(){return l}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/Meshes/polygonMesh.js"),u=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),c=r("./node_modules/@babylonjs/core/Engines/engineStore.js");s["VertexData"].CreatePolygon=function(e,t,r,o,a,c,l){for(var d=r||new Array(3),h=o,f=[],p=l||!1,m=0;m<3;m++)void 0===d[m]&&(d[m]=new n["Vector4"](0,0,1,1)),h&&void 0===h[m]&&(h[m]=new i["Color4"](1,1,1,1));var _=e.getVerticesData(u["VertexBuffer"].PositionKind),g=e.getVerticesData(u["VertexBuffer"].NormalKind),b=e.getVerticesData(u["VertexBuffer"].UVKind),v=e.getIndices(),M=_.length/9,T=0,S=0,C=0,E=0,P=0,A=[0];if(p)for(var j=M;j<_.length/3;j+=4)S=_[3*(j+2)]-_[3*j],C=_[3*(j+2)+2]-_[3*j+2],E=Math.sqrt(S*S+C*C),P+=E,A.push(P);j=0;for(var O=0,R=0;R<g.length;R+=3)Math.abs(g[R+1])<.001&&(O=1),Math.abs(g[R+1]-1)<.001&&(O=0),Math.abs(g[R+1]+1)<.001&&(O=2),j=R/3,1===O?(T=j-M,b[2*j]=T%4<1.5?p?d[O].x+(d[O].z-d[O].x)*A[Math.floor(T/4)]/P:d[O].x:p?d[O].x+(d[O].z-d[O].x)*A[Math.floor(T/4)+1]/P:d[O].z,b[2*j+1]=T%2===0?d[O].w:d[O].y):(b[2*j]=(1-b[2*j])*d[O].x+b[2*j]*d[O].z,b[2*j+1]=(1-b[2*j+1])*d[O].y+b[2*j+1]*d[O].w),h&&f.push(h[O].r,h[O].g,h[O].b,h[O].a);s["VertexData"]._ComputeSides(t,_,v,g,b,a,c);var I=new s["VertexData"];if(I.indices=v,I.positions=_,I.normals=g,I.uvs=b,h){var w=t===s["VertexData"].DOUBLESIDE?f.concat(f):f;I.colors=w}return I},o["Mesh"].CreatePolygon=function(e,t,r,n,i,o,s){void 0===s&&(s=earcut);var a={shape:t,holes:n,updatable:i,sideOrientation:o};return l.CreatePolygon(e,a,r,s)},o["Mesh"].ExtrudePolygon=function(e,t,r,n,i,o,s,a){void 0===a&&(a=earcut);var u={shape:t,holes:i,depth:r,updatable:o,sideOrientation:s};return l.ExtrudePolygon(e,u,n,a)};var l=function(){function PolygonBuilder(){}return PolygonBuilder.CreatePolygon=function(e,t,r,i){void 0===r&&(r=null),void 0===i&&(i=earcut),t.sideOrientation=o["Mesh"]._GetDefaultSideOrientation(t.sideOrientation);for(var u=t.shape,l=t.holes||[],d=t.depth||0,h=[],f=[],p=0;p<u.length;p++)h[p]=new n["Vector2"](u[p].x,u[p].z);var m=1e-8;h[0].equalsWithEpsilon(h[h.length-1],m)&&h.pop();for(var _=new a["PolygonMeshBuilder"](e,h,r||c["EngineStore"].LastCreatedScene,i),g=0;g<l.length;g++){f=[];for(var b=0;b<l[g].length;b++)f.push(new n["Vector2"](l[g][b].x,l[g][b].z));_.addHole(f)}var v=_.build(t.updatable,d);v._originalBuilderSideOrientation=t.sideOrientation;var M=s["VertexData"].CreatePolygon(v,t.sideOrientation,t.faceUV,t.faceColors,t.frontUVs,t.backUVs,t.wrap);return M.applyToMesh(v,t.updatable),v},PolygonBuilder.ExtrudePolygon=function(e,t,r,n){return void 0===r&&(r=null),void 0===n&&(n=earcut),PolygonBuilder.CreatePolygon(e,t,r,n)},PolygonBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/polyhedronBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PolyhedronBuilder",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");s["VertexData"].CreatePolyhedron=function(e){var t=[];t[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},t[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},t[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},t[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},t[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},t[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},t[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},t[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},t[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},t[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},t[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},t[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},t[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},t[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},t[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};var r,o,a,u,c,l,d=e.type&&(e.type<0||e.type>=t.length)?0:e.type||0,h=e.size,f=e.sizeX||h||1,p=e.sizeY||h||1,m=e.sizeZ||h||1,_=e.custom||t[d],g=_.face.length,b=e.faceUV||new Array(g),v=e.faceColors,M=void 0===e.flat||e.flat,T=0===e.sideOrientation?0:e.sideOrientation||s["VertexData"].DEFAULTSIDE,S=new Array,C=new Array,E=new Array,P=new Array,A=new Array,j=0,O=0,R=new Array,I=0,w=0;if(M)for(w=0;w<g;w++)v&&void 0===v[w]&&(v[w]=new i["Color4"](1,1,1,1)),b&&void 0===b[w]&&(b[w]=new n["Vector4"](0,0,1,1));if(M)for(w=0;w<g;w++){var D=_.face[w].length;for(a=2*Math.PI/D,u=.5*Math.tan(a/2),c=.5,I=0;I<D;I++)S.push(_.vertex[_.face[w][I]][0]*f,_.vertex[_.face[w][I]][1]*p,_.vertex[_.face[w][I]][2]*m),R.push(j),j++,r=b[w].x+(b[w].z-b[w].x)*(.5+u),o=b[w].y+(b[w].w-b[w].y)*(c-.5),P.push(r,o),l=u*Math.cos(a)-c*Math.sin(a),c=u*Math.sin(a)+c*Math.cos(a),u=l,v&&A.push(v[w].r,v[w].g,v[w].b,v[w].a);for(I=0;I<D-2;I++)C.push(R[0+O],R[I+2+O],R[I+1+O]);O+=D}else{for(I=0;I<_.vertex.length;I++)S.push(_.vertex[I][0]*f,_.vertex[I][1]*p,_.vertex[I][2]*m),P.push(0,0);for(w=0;w<g;w++)for(I=0;I<_.face[w].length-2;I++)C.push(_.face[w][0],_.face[w][I+2],_.face[w][I+1])}s["VertexData"].ComputeNormals(S,C,E),s["VertexData"]._ComputeSides(T,S,C,E,P,e.frontUVs,e.backUVs);var F=new s["VertexData"];return F.positions=S,F.indices=C,F.normals=E,F.uvs=P,v&&M&&(F.colors=A),F},o["Mesh"].CreatePolyhedron=function(e,t,r){return a.CreatePolyhedron(e,t,r)};var a=function(){function PolyhedronBuilder(){}return PolyhedronBuilder.CreatePolyhedron=function(e,t,r){void 0===r&&(r=null);var n=new o["Mesh"](e,r);t.sideOrientation=o["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var i=s["VertexData"].CreatePolyhedron(t);return i.applyToMesh(n,t.updatable),n},PolyhedronBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/ribbonBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RibbonBuilder",(function(){return u}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js");s["VertexData"].CreateRibbon=function(e){var t=e.pathArray,r=e.closeArray||!1,n=e.closePath||!1,i=e.invertUV||!1,a=Math.floor(t[0].length/2),u=e.offset||a;u=u>a?a:Math.floor(u);var c,l,d,h,f=0===e.sideOrientation?0:e.sideOrientation||s["VertexData"].DEFAULTSIDE,p=e.uvs,m=e.colors,_=[],g=[],b=[],v=[],M=[],T=[],S=[],C=[],E=[],P=[];if(t.length<2){var A=[],j=[];for(d=0;d<t[0].length-u;d++)A.push(t[0][d]),j.push(t[0][d+u]);t=[A,j]}var O,R,I,w,D,F,B=0,L=n?1:0;for(c=t[0].length,l=0;l<t.length;l++){S[l]=0,M[l]=[0],O=t[l],R=O.length,c=c<R?c:R,h=0;while(h<R)_.push(O[h].x,O[h].y,O[h].z),h>0&&(I=O[h].subtract(O[h-1]).length(),w=I+S[l],M[l].push(w),S[l]=w),h++;n&&(h--,_.push(O[0].x,O[0].y,O[0].z),I=O[h].subtract(O[0]).length(),w=I+S[l],M[l].push(w),S[l]=w),E[l]=R+L,P[l]=B,B+=R+L}var V,N,k=null,U=null;for(d=0;d<c+L;d++){for(C[d]=0,T[d]=[0],l=0;l<t.length-1;l++)D=t[l],F=t[l+1],d===c?(k=D[0],U=F[0]):(k=D[d],U=F[d]),I=U.subtract(k).length(),w=I+C[d],T[d].push(w),C[d]=w;r&&U&&k&&(D=t[l],F=t[0],d===c&&(U=F[0]),I=U.subtract(k).length(),w=I+C[d],C[d]=w)}if(p)for(l=0;l<p.length;l++)v.push(p[l].x,p[l].y);else for(l=0;l<t.length;l++)for(d=0;d<c+L;d++)V=0!=S[l]?M[l][d]/S[l]:0,N=0!=C[d]?T[d][l]/C[d]:0,i?v.push(N,V):v.push(V,N);l=0;var z=0,G=E[l]-1,W=E[l+1]-1,H=G<W?G:W,X=P[1]-P[0],q=r?E.length:E.length-1;while(z<=H&&l<q)g.push(z,z+X,z+1),g.push(z+X+1,z+1,z+X),z+=1,z===H&&(l++,l===E.length-1?(X=P[0]-P[l],G=E[l]-1,W=E[0]-1):(X=P[l+1]-P[l],G=E[l]-1,W=E[l+1]-1),z=P[l],H=G<W?G+z:W+z);if(s["VertexData"].ComputeNormals(_,g,b),n){var K=0,Y=0;for(l=0;l<t.length;l++)K=3*P[l],Y=l+1<t.length?3*(P[l+1]-1):b.length-3,b[K]=.5*(b[K]+b[Y]),b[K+1]=.5*(b[K+1]+b[Y+1]),b[K+2]=.5*(b[K+2]+b[Y+2]),b[Y]=b[K],b[Y+1]=b[K+1],b[Y+2]=b[K+2]}s["VertexData"]._ComputeSides(f,_,g,b,v,e.frontUVs,e.backUVs);var Q=null;if(m){Q=new Float32Array(4*m.length);for(var Z=0;Z<m.length;Z++)Q[4*Z]=m[Z].r,Q[4*Z+1]=m[Z].g,Q[4*Z+2]=m[Z].b,Q[4*Z+3]=m[Z].a}var $=new s["VertexData"],J=new Float32Array(_),ee=new Float32Array(b),te=new Float32Array(v);return $.indices=g,$.positions=J,$.normals=ee,$.uvs=te,Q&&$.set(Q,o["VertexBuffer"].ColorKind),n&&($._idx=P),$},i["Mesh"].CreateRibbon=function(e,t,r,n,i,o,s,a,c){return void 0===r&&(r=!1),void 0===s&&(s=!1),u.CreateRibbon(e,{pathArray:t,closeArray:r,closePath:n,offset:i,updatable:s,sideOrientation:a,instance:c},o)};var u=function(){function RibbonBuilder(){}return RibbonBuilder.CreateRibbon=function(e,t,r){void 0===r&&(r=null);var u=t.pathArray,c=t.closeArray,l=t.closePath,d=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),h=t.instance,f=t.updatable;if(h){var p=n["TmpVectors"].Vector3[0].setAll(Number.MAX_VALUE),m=n["TmpVectors"].Vector3[1].setAll(-Number.MAX_VALUE),positionFunction=function(e){for(var t=u[0].length,r=h,n=0,o=r._originalBuilderSideOrientation===i["Mesh"].DOUBLESIDE?2:1,s=1;s<=o;++s)for(var a=0;a<u.length;++a){var c=u[a],l=c.length;t=t<l?t:l;for(var d=0;d<t;++d){var f=c[d];e[n]=f.x,e[n+1]=f.y,e[n+2]=f.z,p.minimizeInPlaceFromFloats(f.x,f.y,f.z),m.maximizeInPlaceFromFloats(f.x,f.y,f.z),n+=3}if(r._creationDataStorage&&r._creationDataStorage.closePath){f=c[0];e[n]=f.x,e[n+1]=f.y,e[n+2]=f.z,n+=3}}},_=h.getVerticesData(o["VertexBuffer"].PositionKind);if(positionFunction(_),h._boundingInfo?h._boundingInfo.reConstruct(p,m,h._worldMatrix):h._boundingInfo=new a["BoundingInfo"](p,m,h._worldMatrix),h.updateVerticesData(o["VertexBuffer"].PositionKind,_,!1,!1),t.colors){for(var g=h.getVerticesData(o["VertexBuffer"].ColorKind),b=0,v=0;b<t.colors.length;b++,v+=4){var M=t.colors[b];g[v]=M.r,g[v+1]=M.g,g[v+2]=M.b,g[v+3]=M.a}h.updateVerticesData(o["VertexBuffer"].ColorKind,g,!1,!1)}if(t.uvs){for(var T=h.getVerticesData(o["VertexBuffer"].UVKind),S=0;S<t.uvs.length;S++)T[2*S]=t.uvs[S].x,T[2*S+1]=t.uvs[S].y;h.updateVerticesData(o["VertexBuffer"].UVKind,T,!1,!1)}if(!h.areNormalsFrozen||h.isFacetDataEnabled){var C=h.getIndices(),E=h.getVerticesData(o["VertexBuffer"].NormalKind),P=h.isFacetDataEnabled?h.getFacetDataParameters():null;if(s["VertexData"].ComputeNormals(_,C,E,P),h._creationDataStorage&&h._creationDataStorage.closePath)for(var A=0,j=0,O=0;O<u.length;O++)A=3*h._creationDataStorage.idx[O],j=O+1<u.length?3*(h._creationDataStorage.idx[O+1]-1):E.length-3,E[A]=.5*(E[A]+E[j]),E[A+1]=.5*(E[A+1]+E[j+1]),E[A+2]=.5*(E[A+2]+E[j+2]),E[j]=E[A],E[j+1]=E[A+1],E[j+2]=E[A+2];h.areNormalsFrozen||h.updateVerticesData(o["VertexBuffer"].NormalKind,E,!1,!1)}return h}var R=new i["Mesh"](e,r);R._originalBuilderSideOrientation=d,R._creationDataStorage=new i["_CreationDataStorage"];var I=s["VertexData"].CreateRibbon(t);return l&&(R._creationDataStorage.idx=I._idx),R._creationDataStorage.closePath=l,R._creationDataStorage.closeArray=c,I.applyToMesh(R,f),R},RibbonBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/shapeBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ShapeBuilder",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/Builders/ribbonBuilder.js"),s=r("./node_modules/@babylonjs/core/Maths/math.path.js");i["Mesh"].ExtrudeShape=function(e,t,r,n,o,s,u,c,l,d){void 0===u&&(u=null);var h={shape:t,path:r,scale:n,rotation:o,cap:0===s?0:s||i["Mesh"].NO_CAP,sideOrientation:l,instance:d,updatable:c};return a.ExtrudeShape(e,h,u)},i["Mesh"].ExtrudeShapeCustom=function(e,t,r,n,o,s,u,c,l,d,h,f){var p={shape:t,path:r,scaleFunction:n,rotationFunction:o,ribbonCloseArray:s,ribbonClosePath:u,cap:0===c?0:c||i["Mesh"].NO_CAP,sideOrientation:h,instance:f,updatable:d};return a.ExtrudeShapeCustom(e,p,l)};var a=function(){function ShapeBuilder(){}return ShapeBuilder.ExtrudeShape=function(e,t,r){void 0===r&&(r=null);var n=t.path,o=t.shape,s=t.scale||1,a=t.rotation||0,u=0===t.cap?0:t.cap||i["Mesh"].NO_CAP,c=t.updatable,l=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),d=t.instance||null,h=t.invertUV||!1;return ShapeBuilder._ExtrudeShapeGeneric(e,o,n,s,a,null,null,!1,!1,u,!1,r,!!c,l,d,h,t.frontUVs||null,t.backUVs||null)},ShapeBuilder.ExtrudeShapeCustom=function(e,t,r){void 0===r&&(r=null);var n=t.path,o=t.shape,s=t.scaleFunction||function(){return 1},a=t.rotationFunction||function(){return 0},u=t.ribbonCloseArray||!1,c=t.ribbonClosePath||!1,l=0===t.cap?0:t.cap||i["Mesh"].NO_CAP,d=t.updatable,h=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),f=t.instance,p=t.invertUV||!1;return ShapeBuilder._ExtrudeShapeGeneric(e,o,n,null,null,s,a,u,c,l,!0,r,!!d,h,f||null,p,t.frontUVs||null,t.backUVs||null)},ShapeBuilder._ExtrudeShapeGeneric=function(e,t,r,a,u,c,l,d,h,f,p,m,_,g,b,v,M,T){var S,C,extrusionPathArray=function(e,t,r,o,s,a,u,c,l,d){for(var h=r.getTangents(),f=r.getNormals(),p=r.getBinormals(),m=r.getDistances(),_=0,returnScale=function(){return null!==s?s:1},returnRotation=function(){return null!==a?a:0},g=d&&c?c:returnRotation,b=d&&u?u:returnScale,v=l===i["Mesh"].NO_CAP||l===i["Mesh"].CAP_END?0:2,M=n["TmpVectors"].Matrix[0],T=0;T<t.length;T++){for(var S=new Array,C=g(T,m[T]),E=b(T,m[T]),P=0;P<e.length;P++){n["Matrix"].RotationAxisToRef(h[T],_,M);var A=h[T].scale(e[P].z).add(f[T].scale(e[P].x)).add(p[T].scale(e[P].y)),j=S[P]?S[P]:n["Vector3"].Zero();n["Vector3"].TransformCoordinatesToRef(A,M,j),j.scaleInPlace(E).addInPlace(t[T]),S[P]=j}o[v]=S,_+=C,v++}var capPath=function(e){var t,r=Array(),i=n["Vector3"].Zero();for(t=0;t<e.length;t++)i.addInPlace(e[t]);for(i.scaleInPlace(1/e.length),t=0;t<e.length;t++)r.push(i);return r};switch(l){case i["Mesh"].NO_CAP:break;case i["Mesh"].CAP_START:o[0]=capPath(o[2]),o[1]=o[2];break;case i["Mesh"].CAP_END:o[v]=o[v-1],o[v+1]=capPath(o[v-1]);break;case i["Mesh"].CAP_ALL:o[0]=capPath(o[2]),o[1]=o[2],o[v]=o[v-1],o[v+1]=capPath(o[v-1]);break;default:break}return o};if(b){var E=b._creationDataStorage;return S=E.path3D.update(r),C=extrusionPathArray(t,r,E.path3D,E.pathArray,a,u,c,l,E.cap,p),b=i["Mesh"].CreateRibbon("",C,!1,!1,0,m||void 0,!1,0,b),b}S=new s["Path3D"](r);var P=new Array;f=f<0||f>3?0:f,C=extrusionPathArray(t,r,S,P,a,u,c,l,f,p);var A=o["RibbonBuilder"].CreateRibbon(e,{pathArray:C,closeArray:d,closePath:h,updatable:_,sideOrientation:g,invertUV:v,frontUVs:M||void 0,backUVs:T||void 0},m);return A._creationDataStorage.pathArray=C,A._creationDataStorage.path3D=S,A._creationDataStorage.cap=f,A},ShapeBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/sphereBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SphereBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");o["VertexData"].CreateSphere=function(e){for(var t=e.segments||32,r=e.diameterX||e.diameter||1,i=e.diameterY||e.diameter||1,s=e.diameterZ||e.diameter||1,a=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,u=e.slice&&e.slice<=0?1:e.slice||1,c=0===e.sideOrientation?0:e.sideOrientation||o["VertexData"].DEFAULTSIDE,l=!!e.dedupTopBottomIndices,d=new n["Vector3"](r/2,i/2,s/2),h=2+t,f=2*h,p=[],m=[],_=[],g=[],b=0;b<=h;b++){for(var v=b/h,M=v*Math.PI*u,T=0;T<=f;T++){var S=T/f,C=S*Math.PI*2*a,E=n["Matrix"].RotationZ(-M),P=n["Matrix"].RotationY(C),A=n["Vector3"].TransformCoordinates(n["Vector3"].Up(),E),j=n["Vector3"].TransformCoordinates(A,P),O=j.multiply(d),R=j.divide(d).normalize();m.push(O.x,O.y,O.z),_.push(R.x,R.y,R.z),g.push(S,v)}if(b>0)for(var I=m.length/3,w=I-2*(f+1);w+f+2<I;w++)l?(b>1&&(p.push(w),p.push(w+1),p.push(w+f+1)),(b<h||u<1)&&(p.push(w+f+1),p.push(w+1),p.push(w+f+2))):(p.push(w),p.push(w+1),p.push(w+f+1),p.push(w+f+1),p.push(w+1),p.push(w+f+2))}o["VertexData"]._ComputeSides(c,m,p,_,g,e.frontUVs,e.backUVs);var D=new o["VertexData"];return D.indices=p,D.positions=m,D.normals=_,D.uvs=g,D},i["Mesh"].CreateSphere=function(e,t,r,n,i,o){var a={segments:t,diameterX:r,diameterY:r,diameterZ:r,sideOrientation:o,updatable:i};return s.CreateSphere(e,a,n)};var s=function(){function SphereBuilder(){}return SphereBuilder.CreateSphere=function(e,t,r){void 0===r&&(r=null);var n=new i["Mesh"](e,r);t.sideOrientation=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var s=o["VertexData"].CreateSphere(t);return s.applyToMesh(n,t.updatable),n},SphereBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/tiledBoxBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TiledBoxBuilder",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");s["VertexData"].CreateTiledBox=function(e){for(var t=6,r=e.faceUV||new Array(6),a=e.faceColors,u=e.pattern||o["Mesh"].NO_FLIP,c=e.width||e.size||1,l=e.height||e.size||1,d=e.depth||e.size||1,h=e.tileWidth||e.tileSize||1,f=e.tileHeight||e.tileSize||1,p=e.alignHorizontal||0,m=e.alignVertical||0,_=0===e.sideOrientation?0:e.sideOrientation||s["VertexData"].DEFAULTSIDE,g=0;g<t;g++)void 0===r[g]&&(r[g]=new n["Vector4"](0,0,1,1)),a&&void 0===a[g]&&(a[g]=new i["Color4"](1,1,1,1));var b=c/2,v=l/2,M=d/2,T=[];for(g=0;g<2;g++)T[g]=s["VertexData"].CreateTiledPlane({pattern:u,tileWidth:h,tileHeight:f,width:c,height:l,alignVertical:m,alignHorizontal:p,sideOrientation:_});for(g=2;g<4;g++)T[g]=s["VertexData"].CreateTiledPlane({pattern:u,tileWidth:h,tileHeight:f,width:d,height:l,alignVertical:m,alignHorizontal:p,sideOrientation:_});var S=m;m===o["Mesh"].BOTTOM?S=o["Mesh"].TOP:m===o["Mesh"].TOP&&(S=o["Mesh"].BOTTOM);for(g=4;g<6;g++)T[g]=s["VertexData"].CreateTiledPlane({pattern:u,tileWidth:h,tileHeight:f,width:c,height:d,alignVertical:S,alignHorizontal:p,sideOrientation:_});var C=[],E=[],P=[],A=[],j=[],O=[],R=[],I=[],w=0,D=0,F=0;for(g=0;g<t;g++){w=T[g].positions.length;O[g]=[],R[g]=[];for(var B=0;B<w/3;B++)O[g].push(new n["Vector3"](T[g].positions[3*B],T[g].positions[3*B+1],T[g].positions[3*B+2])),R[g].push(new n["Vector3"](T[g].normals[3*B],T[g].normals[3*B+1],T[g].normals[3*B+2]));D=T[g].uvs.length,I[g]=[];for(var L=0;L<D;L+=2)I[g][L]=r[g].x+(r[g].z-r[g].x)*T[g].uvs[L],I[g][L+1]=r[g].y+(r[g].w-r[g].y)*T[g].uvs[L+1];if(P=P.concat(I[g]),A=A.concat(T[g].indices.map((function(e){return e+F}))),F+=O[g].length,a)for(var V=0;V<4;V++)j.push(a[g].r,a[g].g,a[g].b,a[g].a)}var N=new n["Vector3"](0,0,M),k=n["Matrix"].RotationY(Math.PI);C=O[0].map((function(e){return n["Vector3"].TransformNormal(e,k).add(N)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]),E=R[0].map((function(e){return n["Vector3"].TransformNormal(e,k)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]),C=C.concat(O[1].map((function(e){return e.subtract(N)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),E=E.concat(R[1].map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]));var U=new n["Vector3"](b,0,0),z=n["Matrix"].RotationY(-Math.PI/2);C=C.concat(O[2].map((function(e){return n["Vector3"].TransformNormal(e,z).add(U)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),E=E.concat(R[2].map((function(e){return n["Vector3"].TransformNormal(e,z)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]));var G=n["Matrix"].RotationY(Math.PI/2);C=C.concat(O[3].map((function(e){return n["Vector3"].TransformNormal(e,G).subtract(U)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),E=E.concat(R[3].map((function(e){return n["Vector3"].TransformNormal(e,G)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]));var W=new n["Vector3"](0,v,0),H=n["Matrix"].RotationX(Math.PI/2);C=C.concat(O[4].map((function(e){return n["Vector3"].TransformNormal(e,H).add(W)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),E=E.concat(R[4].map((function(e){return n["Vector3"].TransformNormal(e,H)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[]));var X=n["Matrix"].RotationX(-Math.PI/2);C=C.concat(O[5].map((function(e){return n["Vector3"].TransformNormal(e,X).subtract(W)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),E=E.concat(R[5].map((function(e){return n["Vector3"].TransformNormal(e,X)})).map((function(e){return[e.x,e.y,e.z]})).reduce((function(e,t){return e.concat(t)}),[])),s["VertexData"]._ComputeSides(_,C,A,E,P);var q=new s["VertexData"];if(q.indices=A,q.positions=C,q.normals=E,q.uvs=P,a){var K=_===s["VertexData"].DOUBLESIDE?j.concat(j):j;q.colors=K}return q};var a=function(){function TiledBoxBuilder(){}return TiledBoxBuilder.CreateTiledBox=function(e,t,r){void 0===r&&(r=null);var n=new o["Mesh"](e,r);t.sideOrientation=o["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var i=s["VertexData"].CreateTiledBox(t);return i.applyToMesh(n,t.updatable),n},TiledBoxBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/tiledPlaneBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TiledPlaneBuilder",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");i["VertexData"].CreateTiledPlane=function(e){var t=e.pattern||n["Mesh"].NO_FLIP,r=e.tileWidth||e.tileSize||1,o=e.tileHeight||e.tileSize||1,s=e.alignHorizontal||0,a=e.alignVertical||0,u=e.width||e.size||1,c=Math.floor(u/r),l=u-c*r,d=e.height||e.size||1,h=Math.floor(d/o),f=d-h*o,p=r*c/2,m=o*h/2,_=0,g=0,b=0,v=0,M=0,T=0;if(l>0||f>0){b=-p,v=-m;M=p,T=m;switch(s){case n["Mesh"].CENTER:l/=2,b-=l,M+=l;break;case n["Mesh"].LEFT:M+=l,_=-l/2;break;case n["Mesh"].RIGHT:b-=l,_=l/2;break}switch(a){case n["Mesh"].CENTER:f/=2,v-=f,T+=f;break;case n["Mesh"].BOTTOM:T+=f,g=-f/2;break;case n["Mesh"].TOP:v-=f,g=f/2;break}}var S=[],C=[],E=[];E[0]=[0,0,1,0,1,1,0,1],E[1]=[0,0,1,0,1,1,0,1],t!==n["Mesh"].ROTATE_TILE&&t!==n["Mesh"].ROTATE_ROW||(E[1]=[1,1,0,1,0,0,1,0]),t!==n["Mesh"].FLIP_TILE&&t!==n["Mesh"].FLIP_ROW||(E[1]=[1,0,0,0,0,1,1,1]),t!==n["Mesh"].FLIP_N_ROTATE_TILE&&t!==n["Mesh"].FLIP_N_ROTATE_ROW||(E[1]=[0,1,1,1,1,0,0,0]);for(var P=[],A=[],j=[],O=0,R=0;R<h;R++)for(var I=0;I<c;I++)S.push(I*r-p+_,R*o-m+g,0),S.push((I+1)*r-p+_,R*o-m+g,0),S.push((I+1)*r-p+_,(R+1)*o-m+g,0),S.push(I*r-p+_,(R+1)*o-m+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),P=t===n["Mesh"].FLIP_TILE||t===n["Mesh"].ROTATE_TILE||t===n["Mesh"].FLIP_N_ROTATE_TILE?P.concat(E[(I%2+R%2)%2]):t===n["Mesh"].FLIP_ROW||t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_ROW?P.concat(E[R%2]):P.concat(E[0]),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1),O+=4;if(l>0||f>0){var w,D,F,B,L=f>0&&(a===n["Mesh"].CENTER||a===n["Mesh"].TOP),V=f>0&&(a===n["Mesh"].CENTER||a===n["Mesh"].BOTTOM),N=l>0&&(s===n["Mesh"].CENTER||s===n["Mesh"].RIGHT),k=l>0&&(s===n["Mesh"].CENTER||s===n["Mesh"].LEFT),U=[];if(L&&N&&(S.push(b+_,v+g,0),S.push(-p+_,v+g,0),S.push(-p+_,v+f+g,0),S.push(b+_,v+f+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,w=1-l/r,D=1-f/o,F=1,B=1,U=[w,D,F,D,F,B,w,B],t===n["Mesh"].ROTATE_ROW&&(U=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),t===n["Mesh"].FLIP_ROW&&(U=[1-w,D,1-F,D,1-F,B,1-w,B]),t===n["Mesh"].FLIP_N_ROTATE_ROW&&(U=[w,1-D,F,1-D,F,1-B,w,1-B]),P=P.concat(U),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),L&&k&&(S.push(p+_,v+g,0),S.push(M+_,v+g,0),S.push(M+_,v+f+g,0),S.push(p+_,v+f+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,w=0,D=1-f/o,F=l/r,B=1,U=[w,D,F,D,F,B,w,B],(t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].ROTATE_TILE&&c%2===0)&&(U=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),(t===n["Mesh"].FLIP_ROW||t===n["Mesh"].FLIP_TILE&&c%2===0)&&(U=[1-w,D,1-F,D,1-F,B,1-w,B]),(t===n["Mesh"].FLIP_N_ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_TILE&&c%2===0)&&(U=[w,1-D,F,1-D,F,1-B,w,1-B]),P=P.concat(U),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),V&&N&&(S.push(b+_,m+g,0),S.push(-p+_,m+g,0),S.push(-p+_,T+g,0),S.push(b+_,T+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,w=1-l/r,D=0,F=1,B=f/o,U=[w,D,F,D,F,B,w,B],(t===n["Mesh"].ROTATE_ROW&&h%2===1||t===n["Mesh"].ROTATE_TILE&&h%1===0)&&(U=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),(t===n["Mesh"].FLIP_ROW&&h%2===1||t===n["Mesh"].FLIP_TILE&&h%2===0)&&(U=[1-w,D,1-F,D,1-F,B,1-w,B]),(t===n["Mesh"].FLIP_N_ROTATE_ROW&&h%2===1||t===n["Mesh"].FLIP_N_ROTATE_TILE&&h%2===0)&&(U=[w,1-D,F,1-D,F,1-B,w,1-B]),P=P.concat(U),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),V&&k&&(S.push(p+_,m+g,0),S.push(M+_,m+g,0),S.push(M+_,T+g,0),S.push(p+_,T+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,w=0,D=0,F=l/r,B=f/o,U=[w,D,F,D,F,B,w,B],(t===n["Mesh"].ROTATE_ROW&&h%2===1||t===n["Mesh"].ROTATE_TILE&&(h+c)%2===1)&&(U=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),(t===n["Mesh"].FLIP_ROW&&h%2===1||t===n["Mesh"].FLIP_TILE&&(h+c)%2===1)&&(U=[1-w,D,1-F,D,1-F,B,1-w,B]),(t===n["Mesh"].FLIP_N_ROTATE_ROW&&h%2===1||t===n["Mesh"].FLIP_N_ROTATE_TILE&&(h+c)%2===1)&&(U=[w,1-D,F,1-D,F,1-B,w,1-B]),P=P.concat(U),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),L){var z=[];w=0,D=1-f/o,F=1,B=1,z[0]=[w,D,F,D,F,B,w,B],z[1]=[w,D,F,D,F,B,w,B],t!==n["Mesh"].ROTATE_TILE&&t!==n["Mesh"].ROTATE_ROW||(z[1]=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),t!==n["Mesh"].FLIP_TILE&&t!==n["Mesh"].FLIP_ROW||(z[1]=[1-w,D,1-F,D,1-F,B,1-w,B]),t!==n["Mesh"].FLIP_N_ROTATE_TILE&&t!==n["Mesh"].FLIP_N_ROTATE_ROW||(z[1]=[w,1-D,F,1-D,F,1-B,w,1-B]);for(I=0;I<c;I++)S.push(I*r-p+_,v+g,0),S.push((I+1)*r-p+_,v+g,0),S.push((I+1)*r-p+_,v+f+g,0),S.push(I*r-p+_,v+f+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,P=t===n["Mesh"].FLIP_TILE||t===n["Mesh"].ROTATE_TILE||t===n["Mesh"].FLIP_N_ROTATE_TILE?P.concat(z[(I+1)%2]):t===n["Mesh"].FLIP_ROW||t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_ROW?P.concat(z[1]):P.concat(z[0]),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(V){var G=[];w=0,D=0,F=1,B=f/o,G[0]=[w,D,F,D,F,B,w,B],G[1]=[w,D,F,D,F,B,w,B],t!==n["Mesh"].ROTATE_TILE&&t!==n["Mesh"].ROTATE_ROW||(G[1]=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),t!==n["Mesh"].FLIP_TILE&&t!==n["Mesh"].FLIP_ROW||(G[1]=[1-w,D,1-F,D,1-F,B,1-w,B]),t!==n["Mesh"].FLIP_N_ROTATE_TILE&&t!==n["Mesh"].FLIP_N_ROTATE_ROW||(G[1]=[w,1-D,F,1-D,F,1-B,w,1-B]);for(I=0;I<c;I++)S.push(I*r-p+_,T-f+g,0),S.push((I+1)*r-p+_,T-f+g,0),S.push((I+1)*r-p+_,T+g,0),S.push(I*r-p+_,T+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,P=t===n["Mesh"].FLIP_TILE||t===n["Mesh"].ROTATE_TILE||t===n["Mesh"].FLIP_N_ROTATE_TILE?P.concat(G[(I+h)%2]):t===n["Mesh"].FLIP_ROW||t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_ROW?P.concat(G[h%2]):P.concat(G[0]),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(N){var W=[];w=1-l/r,D=0,F=1,B=1,W[0]=[w,D,F,D,F,B,w,B],W[1]=[w,D,F,D,F,B,w,B],t!==n["Mesh"].ROTATE_TILE&&t!==n["Mesh"].ROTATE_ROW||(W[1]=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),t!==n["Mesh"].FLIP_TILE&&t!==n["Mesh"].FLIP_ROW||(W[1]=[1-w,D,1-F,D,1-F,B,1-w,B]),t!==n["Mesh"].FLIP_N_ROTATE_TILE&&t!==n["Mesh"].FLIP_N_ROTATE_ROW||(W[1]=[w,1-D,F,1-D,F,1-B,w,1-B]);for(R=0;R<h;R++)S.push(b+_,R*o-m+g,0),S.push(b+l+_,R*o-m+g,0),S.push(b+l+_,(R+1)*o-m+g,0),S.push(b+_,(R+1)*o-m+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,P=t===n["Mesh"].FLIP_TILE||t===n["Mesh"].ROTATE_TILE||t===n["Mesh"].FLIP_N_ROTATE_TILE?P.concat(W[(R+1)%2]):t===n["Mesh"].FLIP_ROW||t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_ROW?P.concat(W[R%2]):P.concat(W[0]),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(k){var H=[];w=0,D=0,F=l/o,B=1,H[0]=[w,D,F,D,F,B,w,B],H[1]=[w,D,F,D,F,B,w,B],t!==n["Mesh"].ROTATE_TILE&&t!==n["Mesh"].ROTATE_ROW||(H[1]=[1-w,1-D,1-F,1-D,1-F,1-B,1-w,1-B]),t!==n["Mesh"].FLIP_TILE&&t!==n["Mesh"].FLIP_ROW||(H[1]=[1-w,D,1-F,D,1-F,B,1-w,B]),t!==n["Mesh"].FLIP_N_ROTATE_TILE&&t!==n["Mesh"].FLIP_N_ROTATE_ROW||(H[1]=[w,1-D,F,1-D,F,1-B,w,1-B]);for(R=0;R<h;R++)S.push(M-l+_,R*o-m+g,0),S.push(M+_,R*o-m+g,0),S.push(M+_,(R+1)*o-m+g,0),S.push(M-l+_,(R+1)*o-m+g,0),j.push(O,O+1,O+3,O+1,O+2,O+3),O+=4,P=t===n["Mesh"].FLIP_TILE||t===n["Mesh"].ROTATE_TILE||t===n["Mesh"].FLIP_N_ROTATE_TILE?P.concat(H[(R+c)%2]):t===n["Mesh"].FLIP_ROW||t===n["Mesh"].ROTATE_ROW||t===n["Mesh"].FLIP_N_ROTATE_ROW?P.concat(H[R%2]):P.concat(H[0]),A.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),C.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}}var X=0===e.sideOrientation?0:e.sideOrientation||i["VertexData"].DEFAULTSIDE;i["VertexData"]._ComputeSides(X,S,j,C,P,e.frontUVs,e.backUVs);var q=new i["VertexData"];q.indices=j,q.positions=S,q.normals=C,q.uvs=P;var K=X===i["VertexData"].DOUBLESIDE?A.concat(A):A;return q.colors=K,q};var o=function(){function TiledPlaneBuilder(){}return TiledPlaneBuilder.CreateTiledPlane=function(e,t,r){void 0===r&&(r=null);var o=new n["Mesh"](e,r);t.sideOrientation=n["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),o._originalBuilderSideOrientation=t.sideOrientation;var s=i["VertexData"].CreateTiledPlane(t);return s.applyToMesh(o,t.updatable),o},TiledPlaneBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/torusBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TorusBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");o["VertexData"].CreateTorus=function(e){for(var t=[],r=[],i=[],s=[],a=e.diameter||1,u=e.thickness||.5,c=e.tessellation||16,l=0===e.sideOrientation?0:e.sideOrientation||o["VertexData"].DEFAULTSIDE,d=c+1,h=0;h<=c;h++)for(var f=h/c,p=h*Math.PI*2/c-Math.PI/2,m=n["Matrix"].Translation(a/2,0,0).multiply(n["Matrix"].RotationY(p)),_=0;_<=c;_++){var g=1-_/c,b=_*Math.PI*2/c+Math.PI,v=Math.cos(b),M=Math.sin(b),T=new n["Vector3"](v,M,0),S=T.scale(u/2),C=new n["Vector2"](f,g);S=n["Vector3"].TransformCoordinates(S,m),T=n["Vector3"].TransformNormal(T,m),r.push(S.x,S.y,S.z),i.push(T.x,T.y,T.z),s.push(C.x,C.y);var E=(h+1)%d,P=(_+1)%d;t.push(h*d+_),t.push(h*d+P),t.push(E*d+_),t.push(h*d+P),t.push(E*d+P),t.push(E*d+_)}o["VertexData"]._ComputeSides(l,r,t,i,s,e.frontUVs,e.backUVs);var A=new o["VertexData"];return A.indices=t,A.positions=r,A.normals=i,A.uvs=s,A},i["Mesh"].CreateTorus=function(e,t,r,n,i,o,a){var u={diameter:t,thickness:r,tessellation:n,sideOrientation:a,updatable:o};return s.CreateTorus(e,u,i)};var s=function(){function TorusBuilder(){}return TorusBuilder.CreateTorus=function(e,t,r){var n=new i["Mesh"](e,r);t.sideOrientation=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var s=o["VertexData"].CreateTorus(t);return s.applyToMesh(n,t.updatable),n},TorusBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/torusKnotBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TorusKnotBuilder",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js");o["VertexData"].CreateTorusKnot=function(e){var t,r,i=new Array,s=new Array,a=new Array,u=new Array,c=e.radius||2,l=e.tube||.5,d=e.radialSegments||32,h=e.tubularSegments||32,f=e.p||2,p=e.q||3,m=0===e.sideOrientation?0:e.sideOrientation||o["VertexData"].DEFAULTSIDE,getPos=function(e){var t=Math.cos(e),r=Math.sin(e),i=p/f*e,o=Math.cos(i),s=c*(2+o)*.5*t,a=c*(2+o)*r*.5,u=c*Math.sin(i)*.5;return new n["Vector3"](s,a,u)};for(t=0;t<=d;t++){var _=t%d,g=_/d*2*f*Math.PI,b=getPos(g),v=getPos(g+.01),M=v.subtract(b),T=v.add(b),S=n["Vector3"].Cross(M,T);for(T=n["Vector3"].Cross(S,M),S.normalize(),T.normalize(),r=0;r<h;r++){var C=r%h,E=C/h*2*Math.PI,P=-l*Math.cos(E),A=l*Math.sin(E);s.push(b.x+P*T.x+A*S.x),s.push(b.y+P*T.y+A*S.y),s.push(b.z+P*T.z+A*S.z),u.push(t/d),u.push(r/h)}}for(t=0;t<d;t++)for(r=0;r<h;r++){var j=(r+1)%h,O=t*h+r,R=(t+1)*h+r,I=(t+1)*h+j,w=t*h+j;i.push(w),i.push(R),i.push(O),i.push(w),i.push(I),i.push(R)}o["VertexData"].ComputeNormals(s,i,a),o["VertexData"]._ComputeSides(m,s,i,a,u,e.frontUVs,e.backUVs);var D=new o["VertexData"];return D.indices=i,D.positions=s,D.normals=a,D.uvs=u,D},i["Mesh"].CreateTorusKnot=function(e,t,r,n,i,o,a,u,c,l){var d={radius:t,tube:r,radialSegments:n,tubularSegments:i,p:o,q:a,sideOrientation:l,updatable:c};return s.CreateTorusKnot(e,d,u)};var s=function(){function TorusKnotBuilder(){}return TorusKnotBuilder.CreateTorusKnot=function(e,t,r){var n=new i["Mesh"](e,r);t.sideOrientation=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation;var s=o["VertexData"].CreateTorusKnot(t);return s.applyToMesh(n,t.updatable),n},TorusKnotBuilder}()},"./node_modules/@babylonjs/core/Meshes/Builders/tubeBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TubeBuilder",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),o=r("./node_modules/@babylonjs/core/Meshes/Builders/ribbonBuilder.js"),s=r("./node_modules/@babylonjs/core/Maths/math.path.js");i["Mesh"].CreateTube=function(e,t,r,n,i,o,s,u,c,l){var d={path:t,radius:r,tessellation:n,radiusFunction:i,arc:1,cap:o,updatable:u,sideOrientation:c,instance:l};return a.CreateTube(e,d,s)};var a=function(){function TubeBuilder(){}return TubeBuilder.CreateTube=function(e,t,r){void 0===r&&(r=null);var a=t.path,u=t.instance,c=1;void 0!==t.radius?c=t.radius:u&&(c=u._creationDataStorage.radius);var l=t.tessellation||64,d=t.radiusFunction||null,h=t.cap||i["Mesh"].NO_CAP,f=t.invertUV||!1,p=t.updatable,m=i["Mesh"]._GetDefaultSideOrientation(t.sideOrientation);t.arc=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1;var _,g,tubePathArray=function(e,t,r,o,s,a,u,c){for(var l,d,h,f,p=t.getTangents(),m=t.getNormals(),_=t.getDistances(),g=2*Math.PI,b=g/s*c,returnRadius=function(){return o},v=a||returnRadius,M=n["TmpVectors"].Matrix[0],T=u===i["Mesh"].NO_CAP||u===i["Mesh"].CAP_END?0:2,S=0;S<e.length;S++){d=v(S,_[S]),l=Array(),h=m[S];for(var C=0;C<s;C++)n["Matrix"].RotationAxisToRef(p[S],b*C,M),f=l[C]?l[C]:n["Vector3"].Zero(),n["Vector3"].TransformCoordinatesToRef(h,M,f),f.scaleInPlace(d).addInPlace(e[S]),l[C]=f;r[T]=l,T++}var capPath=function(t,r){for(var n=Array(),i=0;i<t;i++)n.push(e[r]);return n};switch(u){case i["Mesh"].NO_CAP:break;case i["Mesh"].CAP_START:r[0]=capPath(s,0),r[1]=r[2].slice(0);break;case i["Mesh"].CAP_END:r[T]=r[T-1].slice(0),r[T+1]=capPath(s,e.length-1);break;case i["Mesh"].CAP_ALL:r[0]=capPath(s,0),r[1]=r[2].slice(0),r[T]=r[T-1].slice(0),r[T+1]=capPath(s,e.length-1);break;default:break}return r};if(u){var b=u._creationDataStorage,v=t.arc||b.arc;return _=b.path3D.update(a),g=tubePathArray(a,_,b.pathArray,c,b.tessellation,d,b.cap,v),u=o["RibbonBuilder"].CreateRibbon("",{pathArray:g,instance:u}),b.path3D=_,b.pathArray=g,b.arc=v,b.radius=c,u}_=new s["Path3D"](a);var M=new Array;h=h<0||h>3?0:h,g=tubePathArray(a,_,M,c,l,d,h,t.arc);var T=o["RibbonBuilder"].CreateRibbon(e,{pathArray:g,closePath:!0,closeArray:!1,updatable:p,sideOrientation:m,invertUV:f,frontUVs:t.frontUVs,backUVs:t.backUVs},r);return T._creationDataStorage.pathArray=g,T._creationDataStorage.path3D=_,T._creationDataStorage.tessellation=l,T._creationDataStorage.cap=h,T._creationDataStorage.arc=t.arc,T._creationDataStorage.radius=c,T},TubeBuilder}()},"./node_modules/@babylonjs/core/Meshes/WebGL/webGLDataBuffer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WebGLDataBuffer",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Meshes/dataBuffer.js"),o=function(e){function WebGLDataBuffer(t){var r=e.call(this)||this;return r._buffer=t,r}return Object(n["__extends"])(WebGLDataBuffer,e),Object.defineProperty(WebGLDataBuffer.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),WebGLDataBuffer}(i["DataBuffer"])},"./node_modules/@babylonjs/core/Meshes/abstractMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AbstractMesh",(function(){return S}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/tools.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Engines/engine.js"),u=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),c=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),l=r("./node_modules/@babylonjs/core/Meshes/transformNode.js"),d=r("./node_modules/@babylonjs/core/Collisions/pickingInfo.js"),h=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),f=r("./node_modules/@babylonjs/core/Collisions/meshCollisionData.js"),p=r("./node_modules/@babylonjs/core/Misc/devTools.js"),m=r("./node_modules/@babylonjs/core/Maths/math.functions.js"),_=r("./node_modules/@babylonjs/core/Maths/math.color.js"),g=r("./node_modules/@babylonjs/core/Maths/math.constants.js"),b=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),v=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),M=function(){function _FacetDataStorage(){this.facetNb=0,this.partitioningSubdivisions=10,this.partitioningBBoxRatio=1.01,this.facetDataEnabled=!1,this.facetParameters={},this.bbSize=s["Vector3"].Zero(),this.subDiv={max:1,X:1,Y:1,Z:1},this.facetDepthSort=!1,this.facetDepthSortEnabled=!1}return _FacetDataStorage}(),T=function(){function _InternalAbstractMeshDataInfo(){this._hasVertexAlpha=!1,this._useVertexColors=!0,this._numBoneInfluencers=4,this._applyFog=!0,this._receiveShadows=!1,this._facetData=new M,this._visibility=1,this._skeleton=null,this._layerMask=268435455,this._computeBonesUsingShaders=!0,this._isActive=!1,this._onlyForInstances=!1,this._isActiveIntermediate=!1,this._onlyForInstancesIntermediate=!1,this._actAsRegularMesh=!1,this._currentLOD=null,this._currentLODIsUpToDate=!1}return _InternalAbstractMeshDataInfo}(),S=function(e){function AbstractMesh(t,r){void 0===r&&(r=null);var n=e.call(this,t,r,!1)||this;return n._internalAbstractMeshDataInfo=new T,n.cullingStrategy=AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,n.onCollideObservable=new o["Observable"],n.onCollisionPositionChangeObservable=new o["Observable"],n.onMaterialChangedObservable=new o["Observable"],n.definedFacingForward=!0,n._occlusionQuery=null,n._renderingGroup=null,n.alphaIndex=Number.MAX_VALUE,n.isVisible=!0,n.isPickable=!0,n.showSubMeshesBoundingBox=!1,n.isBlocker=!1,n.enablePointerMoveEvents=!1,n._renderingGroupId=0,n._material=null,n.outlineColor=_["Color3"].Red(),n.outlineWidth=.02,n.overlayColor=_["Color3"].Red(),n.overlayAlpha=.5,n.useOctreeForRenderingSelection=!0,n.useOctreeForPicking=!0,n.useOctreeForCollisions=!0,n.alwaysSelectAsActiveMesh=!1,n.doNotSyncBoundingInfo=!1,n.actionManager=null,n._meshCollisionData=new f["_MeshCollisionData"],n.ellipsoid=new s["Vector3"](.5,1,.5),n.ellipsoidOffset=new s["Vector3"](0,0,0),n.edgesWidth=1,n.edgesColor=new _["Color4"](1,0,0,1),n._edgesRenderer=null,n._masterMesh=null,n._boundingInfo=null,n._renderId=0,n._intersectionsInProgress=new Array,n._unIndexed=!1,n._lightSources=new Array,n._waitingData={lods:null,actions:null,freezeWorldMatrix:null},n._bonesTransformMatrices=null,n._transformMatrixTexture=null,n.onRebuildObservable=new o["Observable"],n._onCollisionPositionChange=function(e,t,r){void 0===r&&(r=null),t.subtractToRef(n._meshCollisionData._oldPositionForCollisions,n._meshCollisionData._diffPositionForCollisions),n._meshCollisionData._diffPositionForCollisions.length()>a["Engine"].CollisionsEpsilon&&n.position.addInPlace(n._meshCollisionData._diffPositionForCollisions),r&&n.onCollideObservable.notifyObservers(r),n.onCollisionPositionChangeObservable.notifyObservers(n.position)},n.getScene().addMesh(n),n._resyncLightSources(),n}return Object(n["__extends"])(AbstractMesh,e),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_NONE",{get:function(){return l["TransformNode"].BILLBOARDMODE_NONE},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_X",{get:function(){return l["TransformNode"].BILLBOARDMODE_X},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_Y",{get:function(){return l["TransformNode"].BILLBOARDMODE_Y},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_Z",{get:function(){return l["TransformNode"].BILLBOARDMODE_Z},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_ALL",{get:function(){return l["TransformNode"].BILLBOARDMODE_ALL},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh,"BILLBOARDMODE_USE_POSITION",{get:function(){return l["TransformNode"].BILLBOARDMODE_USE_POSITION},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"facetNb",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetNb},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"partitioningSubdivisions",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions},set:function(e){this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"partitioningBBoxRatio",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio},set:function(e){this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"mustDepthSortFacets",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSort},set:function(e){this._internalAbstractMeshDataInfo._facetData.facetDepthSort=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"facetDepthSortFrom",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom},set:function(e){this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"isFacetDataEnabled",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDataEnabled},enumerable:!1,configurable:!0}),AbstractMesh.prototype._updateNonUniformScalingState=function(t){return!!e.prototype._updateNonUniformScalingState.call(this,t)&&(this._markSubMeshesAsMiscDirty(),!0)},Object.defineProperty(AbstractMesh.prototype,"onCollide",{set:function(e){this._meshCollisionData._onCollideObserver&&this.onCollideObservable.remove(this._meshCollisionData._onCollideObserver),this._meshCollisionData._onCollideObserver=this.onCollideObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"onCollisionPositionChange",{set:function(e){this._meshCollisionData._onCollisionPositionChangeObserver&&this.onCollisionPositionChangeObservable.remove(this._meshCollisionData._onCollisionPositionChangeObserver),this._meshCollisionData._onCollisionPositionChangeObserver=this.onCollisionPositionChangeObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"visibility",{get:function(){return this._internalAbstractMeshDataInfo._visibility},set:function(e){this._internalAbstractMeshDataInfo._visibility!==e&&(this._internalAbstractMeshDataInfo._visibility=e,this._markSubMeshesAsMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"renderingGroupId",{get:function(){return this._renderingGroupId},set:function(e){this._renderingGroupId=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"material",{get:function(){return this._material},set:function(e){this._material!==e&&(this._material&&this._material.meshMap&&(this._material.meshMap[this.uniqueId]=void 0),this._material=e,e&&e.meshMap&&(e.meshMap[this.uniqueId]=this),this.onMaterialChangedObservable.hasObservers()&&this.onMaterialChangedObservable.notifyObservers(this),this.subMeshes&&this._unBindEffect())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"receiveShadows",{get:function(){return this._internalAbstractMeshDataInfo._receiveShadows},set:function(e){this._internalAbstractMeshDataInfo._receiveShadows!==e&&(this._internalAbstractMeshDataInfo._receiveShadows=e,this._markSubMeshesAsLightDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"hasVertexAlpha",{get:function(){return this._internalAbstractMeshDataInfo._hasVertexAlpha},set:function(e){this._internalAbstractMeshDataInfo._hasVertexAlpha!==e&&(this._internalAbstractMeshDataInfo._hasVertexAlpha=e,this._markSubMeshesAsAttributesDirty(),this._markSubMeshesAsMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"useVertexColors",{get:function(){return this._internalAbstractMeshDataInfo._useVertexColors},set:function(e){this._internalAbstractMeshDataInfo._useVertexColors!==e&&(this._internalAbstractMeshDataInfo._useVertexColors=e,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"computeBonesUsingShaders",{get:function(){return this._internalAbstractMeshDataInfo._computeBonesUsingShaders},set:function(e){this._internalAbstractMeshDataInfo._computeBonesUsingShaders!==e&&(this._internalAbstractMeshDataInfo._computeBonesUsingShaders=e,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"numBoneInfluencers",{get:function(){return this._internalAbstractMeshDataInfo._numBoneInfluencers},set:function(e){this._internalAbstractMeshDataInfo._numBoneInfluencers!==e&&(this._internalAbstractMeshDataInfo._numBoneInfluencers=e,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"applyFog",{get:function(){return this._internalAbstractMeshDataInfo._applyFog},set:function(e){this._internalAbstractMeshDataInfo._applyFog!==e&&(this._internalAbstractMeshDataInfo._applyFog=e,this._markSubMeshesAsMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"layerMask",{get:function(){return this._internalAbstractMeshDataInfo._layerMask},set:function(e){e!==this._internalAbstractMeshDataInfo._layerMask&&(this._internalAbstractMeshDataInfo._layerMask=e,this._resyncLightSources())},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"collisionMask",{get:function(){return this._meshCollisionData._collisionMask},set:function(e){this._meshCollisionData._collisionMask=isNaN(e)?-1:e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"collisionResponse",{get:function(){return this._meshCollisionData._collisionResponse},set:function(e){this._meshCollisionData._collisionResponse=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"collisionGroup",{get:function(){return this._meshCollisionData._collisionGroup},set:function(e){this._meshCollisionData._collisionGroup=isNaN(e)?-1:e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"surroundingMeshes",{get:function(){return this._meshCollisionData._surroundingMeshes},set:function(e){this._meshCollisionData._surroundingMeshes=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"lightSources",{get:function(){return this._lightSources},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"_positions",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"skeleton",{get:function(){return this._internalAbstractMeshDataInfo._skeleton},set:function(e){var t=this._internalAbstractMeshDataInfo._skeleton;t&&t.needInitialSkinMatrix&&t._unregisterMeshWithPoseMatrix(this),e&&e.needInitialSkinMatrix&&e._registerMeshWithPoseMatrix(this),this._internalAbstractMeshDataInfo._skeleton=e,this._internalAbstractMeshDataInfo._skeleton||(this._bonesTransformMatrices=null),this._markSubMeshesAsAttributesDirty()},enumerable:!1,configurable:!0}),AbstractMesh.prototype.getClassName=function(){return"AbstractMesh"},AbstractMesh.prototype.toString=function(e){var t="Name: "+this.name+", isInstance: "+("InstancedMesh"!==this.getClassName()?"YES":"NO");t+=", # of submeshes: "+(this.subMeshes?this.subMeshes.length:0);var r=this._internalAbstractMeshDataInfo._skeleton;return r&&(t+=", skeleton: "+r.name),e&&(t+=", billboard mode: "+["NONE","X","Y",null,"Z",null,null,"ALL"][this.billboardMode],t+=", freeze wrld mat: "+(this._isWorldMatrixFrozen||this._waitingData.freezeWorldMatrix?"YES":"NO")),t},AbstractMesh.prototype._getEffectiveParent=function(){return this._masterMesh&&this.billboardMode!==l["TransformNode"].BILLBOARDMODE_NONE?this._masterMesh:e.prototype._getEffectiveParent.call(this)},AbstractMesh.prototype._getActionManagerForTrigger=function(e,t){if(void 0===t&&(t=!0),this.actionManager&&(t||this.actionManager.isRecursive)){if(!e)return this.actionManager;if(this.actionManager.hasSpecificTrigger(e))return this.actionManager}return this.parent?this.parent._getActionManagerForTrigger(e,!1):null},AbstractMesh.prototype._rebuild=function(){if(this.onRebuildObservable.notifyObservers(this),this._occlusionQuery&&(this._occlusionQuery=null),this.subMeshes)for(var e=0,t=this.subMeshes;e<t.length;e++){var r=t[e];r._rebuild()}},AbstractMesh.prototype._resyncLightSources=function(){this._lightSources.length=0;for(var e=0,t=this.getScene().lights;e<t.length;e++){var r=t[e];r.isEnabled()&&(r.canAffectMesh(this)&&this._lightSources.push(r))}this._markSubMeshesAsLightDirty()},AbstractMesh.prototype._resyncLightSource=function(e){var t=e.isEnabled()&&e.canAffectMesh(this),r=this._lightSources.indexOf(e),n=!1;if(-1===r){if(!t)return;this._lightSources.push(e)}else{if(t)return;n=!0,this._lightSources.splice(r,1)}this._markSubMeshesAsLightDirty(n)},AbstractMesh.prototype._unBindEffect=function(){for(var e=0,t=this.subMeshes;e<t.length;e++){var r=t[e];r.setEffect(null)}},AbstractMesh.prototype._removeLightSource=function(e,t){var r=this._lightSources.indexOf(e);-1!==r&&(this._lightSources.splice(r,1),this._markSubMeshesAsLightDirty(t))},AbstractMesh.prototype._markSubMeshesAsDirty=function(e){if(this.subMeshes)for(var t=0,r=this.subMeshes;t<r.length;t++){var n=r[t];n._materialDefines&&e(n._materialDefines)}},AbstractMesh.prototype._markSubMeshesAsLightDirty=function(e){void 0===e&&(e=!1),this._markSubMeshesAsDirty((function(t){return t.markAsLightDirty(e)}))},AbstractMesh.prototype._markSubMeshesAsAttributesDirty=function(){this._markSubMeshesAsDirty((function(e){return e.markAsAttributesDirty()}))},AbstractMesh.prototype._markSubMeshesAsMiscDirty=function(){this._markSubMeshesAsDirty((function(e){return e.markAsMiscDirty()}))},Object.defineProperty(AbstractMesh.prototype,"scaling",{get:function(){return this._scaling},set:function(e){this._scaling=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"isBlocked",{get:function(){return!1},enumerable:!1,configurable:!0}),AbstractMesh.prototype.getLOD=function(e){return this},AbstractMesh.prototype.getTotalVertices=function(){return 0},AbstractMesh.prototype.getTotalIndices=function(){return 0},AbstractMesh.prototype.getIndices=function(){return null},AbstractMesh.prototype.getVerticesData=function(e){return null},AbstractMesh.prototype.setVerticesData=function(e,t,r,n){return this},AbstractMesh.prototype.updateVerticesData=function(e,t,r,n){return this},AbstractMesh.prototype.setIndices=function(e,t){return this},AbstractMesh.prototype.isVerticesDataPresent=function(e){return!1},AbstractMesh.prototype.getBoundingInfo=function(){return this._masterMesh?this._masterMesh.getBoundingInfo():(this._boundingInfo||this._updateBoundingInfo(),this._boundingInfo)},AbstractMesh.prototype.normalizeToUnitCube=function(t,r,n){return void 0===t&&(t=!0),void 0===r&&(r=!1),e.prototype.normalizeToUnitCube.call(this,t,r,n)},AbstractMesh.prototype.setBoundingInfo=function(e){return this._boundingInfo=e,this},Object.defineProperty(AbstractMesh.prototype,"useBones",{get:function(){return this.skeleton&&this.getScene().skeletonsEnabled&&this.isVerticesDataPresent(u["VertexBuffer"].MatricesIndicesKind)&&this.isVerticesDataPresent(u["VertexBuffer"].MatricesWeightsKind)},enumerable:!1,configurable:!0}),AbstractMesh.prototype._preActivate=function(){},AbstractMesh.prototype._preActivateForIntermediateRendering=function(e){},AbstractMesh.prototype._activate=function(e,t){return this._renderId=e,!0},AbstractMesh.prototype._postActivate=function(){},AbstractMesh.prototype._freeze=function(){},AbstractMesh.prototype._unFreeze=function(){},AbstractMesh.prototype.getWorldMatrix=function(){return this._masterMesh&&this.billboardMode===l["TransformNode"].BILLBOARDMODE_NONE?this._masterMesh.getWorldMatrix():e.prototype.getWorldMatrix.call(this)},AbstractMesh.prototype._getWorldMatrixDeterminant=function(){return this._masterMesh?this._masterMesh._getWorldMatrixDeterminant():e.prototype._getWorldMatrixDeterminant.call(this)},Object.defineProperty(AbstractMesh.prototype,"isAnInstance",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"hasInstances",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"hasThinInstances",{get:function(){return!1},enumerable:!1,configurable:!0}),AbstractMesh.prototype.movePOV=function(e,t,r){return this.position.addInPlace(this.calcMovePOV(e,t,r)),this},AbstractMesh.prototype.calcMovePOV=function(e,t,r){var n=new s["Matrix"],i=this.rotationQuaternion?this.rotationQuaternion:s["Quaternion"].RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z);i.toRotationMatrix(n);var o=s["Vector3"].Zero(),a=this.definedFacingForward?-1:1;return s["Vector3"].TransformCoordinatesFromFloatsToRef(e*a,t,r*a,n,o),o},AbstractMesh.prototype.rotatePOV=function(e,t,r){return this.rotation.addInPlace(this.calcRotatePOV(e,t,r)),this},AbstractMesh.prototype.calcRotatePOV=function(e,t,r){var n=this.definedFacingForward?1:-1;return new s["Vector3"](e*n,t,r*n)},AbstractMesh.prototype.refreshBoundingInfo=function(e){return void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked||this._refreshBoundingInfo(this._getPositionData(e),null),this},AbstractMesh.prototype._refreshBoundingInfo=function(e,t){if(e){var r=Object(m["extractMinAndMax"])(e,0,this.getTotalVertices(),t);this._boundingInfo?this._boundingInfo.reConstruct(r.minimum,r.maximum):this._boundingInfo=new h["BoundingInfo"](r.minimum,r.maximum)}if(this.subMeshes)for(var n=0;n<this.subMeshes.length;n++)this.subMeshes[n].refreshBoundingInfo(e);this._updateBoundingInfo()},AbstractMesh.prototype._getPositionData=function(e){var t=this.getVerticesData(u["VertexBuffer"].PositionKind);if(t&&e&&this.skeleton){t=i["Tools"].Slice(t),this._generatePointsArray();var r=this.getVerticesData(u["VertexBuffer"].MatricesIndicesKind),n=this.getVerticesData(u["VertexBuffer"].MatricesWeightsKind);if(n&&r){var o=this.numBoneInfluencers>4,a=o?this.getVerticesData(u["VertexBuffer"].MatricesIndicesExtraKind):null,c=o?this.getVerticesData(u["VertexBuffer"].MatricesWeightsExtraKind):null;this.skeleton.prepare();for(var l=this.skeleton.getTransformMatrices(this),d=s["TmpVectors"].Vector3[0],h=s["TmpVectors"].Matrix[0],f=s["TmpVectors"].Matrix[1],p=0,m=0;m<t.length;m+=3,p+=4){var _,g;for(h.reset(),_=0;_<4;_++)g=n[p+_],g>0&&(s["Matrix"].FromFloat32ArrayToRefScaled(l,Math.floor(16*r[p+_]),g,f),h.addToSelf(f));if(o)for(_=0;_<4;_++)g=c[p+_],g>0&&(s["Matrix"].FromFloat32ArrayToRefScaled(l,Math.floor(16*a[p+_]),g,f),h.addToSelf(f));s["Vector3"].TransformCoordinatesFromFloatsToRef(t[m],t[m+1],t[m+2],h,d),d.toArray(t,m),this._positions&&this._positions[m/3].copyFrom(d)}}}return t},AbstractMesh.prototype._updateBoundingInfo=function(){var e=this._effectiveMesh;return this._boundingInfo?this._boundingInfo.update(e.worldMatrixFromCache):this._boundingInfo=new h["BoundingInfo"](this.absolutePosition,this.absolutePosition,e.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(e.worldMatrixFromCache),this},AbstractMesh.prototype._updateSubMeshesBoundingInfo=function(e){if(!this.subMeshes)return this;for(var t=this.subMeshes.length,r=0;r<t;r++){var n=this.subMeshes[r];(t>1||!n.IsGlobal)&&n.updateBoundingInfo(e)}return this},AbstractMesh.prototype._afterComputeWorldMatrix=function(){this.doNotSyncBoundingInfo||this._updateBoundingInfo()},Object.defineProperty(AbstractMesh.prototype,"_effectiveMesh",{get:function(){return this.skeleton&&this.skeleton.overrideMesh||this},enumerable:!1,configurable:!0}),AbstractMesh.prototype.isInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isInFrustum(e,this.cullingStrategy)},AbstractMesh.prototype.isCompletelyInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isCompletelyInFrustum(e)},AbstractMesh.prototype.intersectsMesh=function(e,t,r){if(void 0===t&&(t=!1),!this._boundingInfo||!e._boundingInfo)return!1;if(this._boundingInfo.intersects(e._boundingInfo,t))return!0;if(r)for(var n=0,i=this.getChildMeshes();n<i.length;n++){var o=i[n];if(o.intersectsMesh(e,t,!0))return!0}return!1},AbstractMesh.prototype.intersectsPoint=function(e){return!!this._boundingInfo&&this._boundingInfo.intersectsPoint(e)},Object.defineProperty(AbstractMesh.prototype,"checkCollisions",{get:function(){return this._meshCollisionData._checkCollisions},set:function(e){this._meshCollisionData._checkCollisions=e},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractMesh.prototype,"collider",{get:function(){return this._meshCollisionData._collider},enumerable:!1,configurable:!0}),AbstractMesh.prototype.moveWithCollisions=function(e){var t=this.getAbsolutePosition();t.addToRef(this.ellipsoidOffset,this._meshCollisionData._oldPositionForCollisions);var r=this.getScene().collisionCoordinator;return this._meshCollisionData._collider||(this._meshCollisionData._collider=r.createCollider()),this._meshCollisionData._collider._radius=this.ellipsoid,r.getNewPosition(this._meshCollisionData._oldPositionForCollisions,e,this._meshCollisionData._collider,3,this,this._onCollisionPositionChange,this.uniqueId),this},AbstractMesh.prototype._collideForSubMesh=function(e,t,r){if(this._generatePointsArray(),!this._positions)return this;if(!e._lastColliderWorldVertices||!e._lastColliderTransformMatrix.equals(t)){e._lastColliderTransformMatrix=t.clone(),e._lastColliderWorldVertices=[],e._trianglePlanes=[];for(var n=e.verticesStart,i=e.verticesStart+e.verticesCount,o=n;o<i;o++)e._lastColliderWorldVertices.push(s["Vector3"].TransformCoordinates(this._positions[o],t))}return r._collide(e._trianglePlanes,e._lastColliderWorldVertices,this.getIndices(),e.indexStart,e.indexStart+e.indexCount,e.verticesStart,!!e.getMaterial(),this),this},AbstractMesh.prototype._processCollisionsForSubMeshes=function(e,t){for(var r=this._scene.getCollidingSubMeshCandidates(this,e),n=r.length,i=0;i<n;i++){var o=r.data[i];n>1&&!o._checkCollision(e)||this._collideForSubMesh(o,t,e)}return this},AbstractMesh.prototype._checkCollision=function(e){if(!this._boundingInfo||!this._boundingInfo._checkCollision(e))return this;var t=s["TmpVectors"].Matrix[0],r=s["TmpVectors"].Matrix[1];return s["Matrix"].ScalingToRef(1/e._radius.x,1/e._radius.y,1/e._radius.z,t),this.worldMatrixFromCache.multiplyToRef(t,r),this._processCollisionsForSubMeshes(e,r),this},AbstractMesh.prototype._generatePointsArray=function(){return!1},AbstractMesh.prototype.intersects=function(e,t,r,n,i,o){var a;void 0===n&&(n=!1),void 0===o&&(o=!1);var u=new d["PickingInfo"],c="InstancedLinesMesh"===this.getClassName()||"LinesMesh"===this.getClassName()?this.intersectionThreshold:0,l=this._boundingInfo;if(!this.subMeshes||!l)return u;if(!o&&(!e.intersectsSphere(l.boundingSphere,c)||!e.intersectsBox(l.boundingBox,c)))return u;if(n)return u.hit=!o,u.pickedMesh=o?null:this,u.distance=o?0:s["Vector3"].Distance(e.origin,l.boundingSphere.center),u.subMeshId=0,u;if(!this._generatePointsArray())return u;for(var h=null,f=this._scene.getIntersectingSubMeshCandidates(this,e),p=f.length,m=!1,_=0;_<p;_++){var g=f.data[_],b=g.getMaterial();if(b&&((null===(a=this.getIndices())||void 0===a?void 0:a.length)&&(7==b.fillMode||0==b.fillMode||1==b.fillMode||2==b.fillMode))){m=!0;break}}if(!m)return u.hit=!0,u.pickedMesh=this,u.distance=s["Vector3"].Distance(e.origin,l.boundingSphere.center),u.subMeshId=-1,u;for(_=0;_<p;_++){g=f.data[_];if(!(p>1)||g.canIntersects(e)){var v=g.intersects(e,this._positions,this.getIndices(),t,r);if(v&&(t||!h||v.distance<h.distance)&&(h=v,h.subMeshId=_,t))break}}if(h){var M=null!==i&&void 0!==i?i:this.skeleton&&this.skeleton.overrideMesh?this.skeleton.overrideMesh.getWorldMatrix():this.getWorldMatrix(),T=s["TmpVectors"].Vector3[0],S=s["TmpVectors"].Vector3[1];s["Vector3"].TransformCoordinatesToRef(e.origin,M,T),e.direction.scaleToRef(h.distance,S);var C=s["Vector3"].TransformNormal(S,M),E=C.addInPlace(T);return u.hit=!0,u.distance=s["Vector3"].Distance(T,E),u.pickedPoint=E,u.pickedMesh=this,u.bu=h.bu||0,u.bv=h.bv||0,u.subMeshFaceId=h.faceId,u.faceId=h.faceId+f.data[h.subMeshId].indexStart/(-1!==this.getClassName().indexOf("LinesMesh")?2:3),u.subMeshId=h.subMeshId,u}return u},AbstractMesh.prototype.clone=function(e,t,r){return null},AbstractMesh.prototype.releaseSubMeshes=function(){if(this.subMeshes)while(this.subMeshes.length)this.subMeshes[0].dispose();else this.subMeshes=new Array;return this},AbstractMesh.prototype.dispose=function(t,r){var n,i=this;for(void 0===r&&(r=!1),this._scene.useMaterialMeshMap&&this._material&&this._material.meshMap&&(this._material.meshMap[this.uniqueId]=void 0),this.getScene().freeActiveMeshes(),this.getScene().freeRenderingGroups(),void 0!==this.actionManager&&null!==this.actionManager&&(this.actionManager.dispose(),this.actionManager=null),this._internalAbstractMeshDataInfo._skeleton=null,this._transformMatrixTexture&&(this._transformMatrixTexture.dispose(),this._transformMatrixTexture=null),n=0;n<this._intersectionsInProgress.length;n++){var o=this._intersectionsInProgress[n],s=o._intersectionsInProgress.indexOf(this);o._intersectionsInProgress.splice(s,1)}this._intersectionsInProgress=[];var a=this.getScene().lights;a.forEach((function(e){var t=e.includedOnlyMeshes.indexOf(i);-1!==t&&e.includedOnlyMeshes.splice(t,1),t=e.excludedMeshes.indexOf(i),-1!==t&&e.excludedMeshes.splice(t,1);var r=e.getShadowGenerator();if(r){var n=r.getShadowMap();n&&n.renderList&&(t=n.renderList.indexOf(i),-1!==t&&n.renderList.splice(t,1))}})),"InstancedMesh"===this.getClassName()&&"InstancedLinesMesh"===this.getClassName()||this.releaseSubMeshes();var u=this.getScene().getEngine();if(this._occlusionQuery&&(this.isOcclusionQueryInProgress=!1,u.deleteQuery(this._occlusionQuery),this._occlusionQuery=null),u.wipeCaches(),this.getScene().removeMesh(this),r&&this.material&&("MultiMaterial"===this.material.getClassName()?this.material.dispose(!1,!0,!0):this.material.dispose(!1,!0)),!t)for(n=0;n<this.getScene().particleSystems.length;n++)this.getScene().particleSystems[n].emitter===this&&(this.getScene().particleSystems[n].dispose(),n--);this._internalAbstractMeshDataInfo._facetData.facetDataEnabled&&this.disableFacetData(),this.onAfterWorldMatrixUpdateObservable.clear(),this.onCollideObservable.clear(),this.onCollisionPositionChangeObservable.clear(),this.onRebuildObservable.clear(),e.prototype.dispose.call(this,t,r)},AbstractMesh.prototype.addChild=function(e){return e.setParent(this),this},AbstractMesh.prototype.removeChild=function(e){return e.setParent(null),this},AbstractMesh.prototype._initFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;e.facetNormals||(e.facetNormals=new Array),e.facetPositions||(e.facetPositions=new Array),e.facetPartitioning||(e.facetPartitioning=new Array),e.facetNb=this.getIndices().length/3|0,e.partitioningSubdivisions=e.partitioningSubdivisions?e.partitioningSubdivisions:10,e.partitioningBBoxRatio=e.partitioningBBoxRatio?e.partitioningBBoxRatio:1.01;for(var t=0;t<e.facetNb;t++)e.facetNormals[t]=s["Vector3"].Zero(),e.facetPositions[t]=s["Vector3"].Zero();return e.facetDataEnabled=!0,this},AbstractMesh.prototype.updateFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;e.facetDataEnabled||this._initFacetData();var t=this.getVerticesData(u["VertexBuffer"].PositionKind),r=this.getIndices(),n=this.getVerticesData(u["VertexBuffer"].NormalKind),i=this.getBoundingInfo();if(e.facetDepthSort&&!e.facetDepthSortEnabled){if(e.facetDepthSortEnabled=!0,r instanceof Uint16Array)e.depthSortedIndices=new Uint16Array(r);else if(r instanceof Uint32Array)e.depthSortedIndices=new Uint32Array(r);else{for(var o=!1,a=0;a<r.length;a++)if(r[a]>65535){o=!0;break}e.depthSortedIndices=o?new Uint32Array(r):new Uint16Array(r)}if(e.facetDepthSortFunction=function(e,t){return t.sqDistance-e.sqDistance},!e.facetDepthSortFrom){var l=this.getScene().activeCamera;e.facetDepthSortFrom=l?l.position:s["Vector3"].Zero()}e.depthSortedFacets=[];for(var d=0;d<e.facetNb;d++){var h={ind:3*d,sqDistance:0};e.depthSortedFacets.push(h)}e.invertedMatrix=s["Matrix"].Identity(),e.facetDepthSortOrigin=s["Vector3"].Zero()}e.bbSize.x=i.maximum.x-i.minimum.x>g["Epsilon"]?i.maximum.x-i.minimum.x:g["Epsilon"],e.bbSize.y=i.maximum.y-i.minimum.y>g["Epsilon"]?i.maximum.y-i.minimum.y:g["Epsilon"],e.bbSize.z=i.maximum.z-i.minimum.z>g["Epsilon"]?i.maximum.z-i.minimum.z:g["Epsilon"];var f=e.bbSize.x>e.bbSize.y?e.bbSize.x:e.bbSize.y;if(f=f>e.bbSize.z?f:e.bbSize.z,e.subDiv.max=e.partitioningSubdivisions,e.subDiv.X=Math.floor(e.subDiv.max*e.bbSize.x/f),e.subDiv.Y=Math.floor(e.subDiv.max*e.bbSize.y/f),e.subDiv.Z=Math.floor(e.subDiv.max*e.bbSize.z/f),e.subDiv.X=e.subDiv.X<1?1:e.subDiv.X,e.subDiv.Y=e.subDiv.Y<1?1:e.subDiv.Y,e.subDiv.Z=e.subDiv.Z<1?1:e.subDiv.Z,e.facetParameters.facetNormals=this.getFacetLocalNormals(),e.facetParameters.facetPositions=this.getFacetLocalPositions(),e.facetParameters.facetPartitioning=this.getFacetLocalPartitioning(),e.facetParameters.bInfo=i,e.facetParameters.bbSize=e.bbSize,e.facetParameters.subDiv=e.subDiv,e.facetParameters.ratio=this.partitioningBBoxRatio,e.facetParameters.depthSort=e.facetDepthSort,e.facetDepthSort&&e.facetDepthSortEnabled&&(this.computeWorldMatrix(!0),this._worldMatrix.invertToRef(e.invertedMatrix),s["Vector3"].TransformCoordinatesToRef(e.facetDepthSortFrom,e.invertedMatrix,e.facetDepthSortOrigin),e.facetParameters.distanceTo=e.facetDepthSortOrigin),e.facetParameters.depthSortedFacets=e.depthSortedFacets,c["VertexData"].ComputeNormals(t,r,n,e.facetParameters),e.facetDepthSort&&e.facetDepthSortEnabled){e.depthSortedFacets.sort(e.facetDepthSortFunction);var p=e.depthSortedIndices.length/3|0;for(d=0;d<p;d++){var m=e.depthSortedFacets[d].ind;e.depthSortedIndices[3*d]=r[m],e.depthSortedIndices[3*d+1]=r[m+1],e.depthSortedIndices[3*d+2]=r[m+2]}this.updateIndices(e.depthSortedIndices,void 0,!0)}return this},AbstractMesh.prototype.getFacetLocalNormals=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetNormals||this.updateFacetData(),e.facetNormals},AbstractMesh.prototype.getFacetLocalPositions=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetPositions||this.updateFacetData(),e.facetPositions},AbstractMesh.prototype.getFacetLocalPartitioning=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetPartitioning||this.updateFacetData(),e.facetPartitioning},AbstractMesh.prototype.getFacetPosition=function(e){var t=s["Vector3"].Zero();return this.getFacetPositionToRef(e,t),t},AbstractMesh.prototype.getFacetPositionToRef=function(e,t){var r=this.getFacetLocalPositions()[e],n=this.getWorldMatrix();return s["Vector3"].TransformCoordinatesToRef(r,n,t),this},AbstractMesh.prototype.getFacetNormal=function(e){var t=s["Vector3"].Zero();return this.getFacetNormalToRef(e,t),t},AbstractMesh.prototype.getFacetNormalToRef=function(e,t){var r=this.getFacetLocalNormals()[e];return s["Vector3"].TransformNormalToRef(r,this.getWorldMatrix(),t),this},AbstractMesh.prototype.getFacetsAtLocalCoordinates=function(e,t,r){var n=this.getBoundingInfo(),i=this._internalAbstractMeshDataInfo._facetData,o=Math.floor((e-n.minimum.x*i.partitioningBBoxRatio)*i.subDiv.X*i.partitioningBBoxRatio/i.bbSize.x),s=Math.floor((t-n.minimum.y*i.partitioningBBoxRatio)*i.subDiv.Y*i.partitioningBBoxRatio/i.bbSize.y),a=Math.floor((r-n.minimum.z*i.partitioningBBoxRatio)*i.subDiv.Z*i.partitioningBBoxRatio/i.bbSize.z);return o<0||o>i.subDiv.max||s<0||s>i.subDiv.max||a<0||a>i.subDiv.max?null:i.facetPartitioning[o+i.subDiv.max*s+i.subDiv.max*i.subDiv.max*a]},AbstractMesh.prototype.getClosestFacetAtCoordinates=function(e,t,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var a=this.getWorldMatrix(),u=s["TmpVectors"].Matrix[5];a.invertToRef(u);var c=s["TmpVectors"].Vector3[8];s["Vector3"].TransformCoordinatesFromFloatsToRef(e,t,r,u,c);var l=this.getClosestFacetAtLocalCoordinates(c.x,c.y,c.z,n,i,o);return n&&s["Vector3"].TransformCoordinatesFromFloatsToRef(n.x,n.y,n.z,a,n),l},AbstractMesh.prototype.getClosestFacetAtLocalCoordinates=function(e,t,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var s=null,a=0,u=0,c=0,l=0,d=0,h=0,f=0,p=0,m=this.getFacetLocalPositions(),_=this.getFacetLocalNormals(),g=this.getFacetsAtLocalCoordinates(e,t,r);if(!g)return null;for(var b,v,M,T=Number.MAX_VALUE,S=T,C=0;C<g.length;C++)b=g[C],v=_[b],M=m[b],l=(e-M.x)*v.x+(t-M.y)*v.y+(r-M.z)*v.z,(!i||i&&o&&l>=0||i&&!o&&l<=0)&&(l=v.x*M.x+v.y*M.y+v.z*M.z,d=-(v.x*e+v.y*t+v.z*r-l)/(v.x*v.x+v.y*v.y+v.z*v.z),h=e+v.x*d,f=t+v.y*d,p=r+v.z*d,a=h-e,u=f-t,c=p-r,S=a*a+u*u+c*c,S<T&&(T=S,s=b,n&&(n.x=h,n.y=f,n.z=p)));return s},AbstractMesh.prototype.getFacetDataParameters=function(){return this._internalAbstractMeshDataInfo._facetData.facetParameters},AbstractMesh.prototype.disableFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetDataEnabled&&(e.facetDataEnabled=!1,e.facetPositions=new Array,e.facetNormals=new Array,e.facetPartitioning=new Array,e.facetParameters=null,e.depthSortedIndices=new Uint32Array(0)),this},AbstractMesh.prototype.updateIndices=function(e,t,r){return void 0===r&&(r=!1),this},AbstractMesh.prototype.createNormals=function(e){var t,r=this.getVerticesData(u["VertexBuffer"].PositionKind),n=this.getIndices();return t=this.isVerticesDataPresent(u["VertexBuffer"].NormalKind)?this.getVerticesData(u["VertexBuffer"].NormalKind):[],c["VertexData"].ComputeNormals(r,n,t,{useRightHandedSystem:this.getScene().useRightHandedSystem}),this.setVerticesData(u["VertexBuffer"].NormalKind,t,e),this},AbstractMesh.prototype.alignWithNormal=function(e,t){t||(t=b["Axis"].Y);var r=s["TmpVectors"].Vector3[0],n=s["TmpVectors"].Vector3[1];return s["Vector3"].CrossToRef(t,e,n),s["Vector3"].CrossToRef(e,n,r),this.rotationQuaternion?s["Quaternion"].RotationQuaternionFromAxisToRef(r,e,n,this.rotationQuaternion):s["Vector3"].RotationFromAxisToRef(r,e,n,this.rotation),this},AbstractMesh.prototype._checkOcclusionQuery=function(){return!1},AbstractMesh.prototype.disableEdgesRendering=function(){throw p["_DevTools"].WarnImport("EdgesRenderer")},AbstractMesh.prototype.enableEdgesRendering=function(e,t,r){throw p["_DevTools"].WarnImport("EdgesRenderer")},AbstractMesh.prototype.getConnectedParticleSystems=function(){var e=this;return this._scene.particleSystems.filter((function(t){return t.emitter===e}))},AbstractMesh.OCCLUSION_TYPE_NONE=0,AbstractMesh.OCCLUSION_TYPE_OPTIMISTIC=1,AbstractMesh.OCCLUSION_TYPE_STRICT=2,AbstractMesh.OCCLUSION_ALGORITHM_TYPE_ACCURATE=0,AbstractMesh.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE=1,AbstractMesh.CULLINGSTRATEGY_STANDARD=0,AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,AbstractMesh.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,AbstractMesh.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,AbstractMesh}(l["TransformNode"]);v["_TypeStore"].RegisteredTypes["BABYLON.AbstractMesh"]=S},"./node_modules/@babylonjs/core/Meshes/buffer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Buffer",(function(){return n})),r.d(t,"VertexBuffer",(function(){return i}));var n=function(){function Buffer(e,t,r,n,i,o,s,a){void 0===n&&(n=0),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),this._isAlreadyOwned=!1,e.getScene?this._engine=e.getScene().getEngine():this._engine=e,this._updatable=r,this._instanced=o,this._divisor=a||1,this._data=t,this.byteStride=s?n:n*Float32Array.BYTES_PER_ELEMENT,i||this.create()}return Buffer.prototype.createVertexBuffer=function(e,t,r,n,o,s,a){void 0===s&&(s=!1);var u=s?t:t*Float32Array.BYTES_PER_ELEMENT,c=n?s?n:n*Float32Array.BYTES_PER_ELEMENT:this.byteStride;return new i(this._engine,this,e,this._updatable,!0,c,void 0===o?this._instanced:o,u,r,void 0,void 0,!0,this._divisor||a)},Buffer.prototype.isUpdatable=function(){return this._updatable},Buffer.prototype.getData=function(){return this._data},Buffer.prototype.getBuffer=function(){return this._buffer},Buffer.prototype.getStrideSize=function(){return this.byteStride/Float32Array.BYTES_PER_ELEMENT},Buffer.prototype.create=function(e){void 0===e&&(e=null),!e&&this._buffer||(e=e||this._data,e&&(this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e),this._data=e):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(e),this._data=e):this._buffer=this._engine.createVertexBuffer(e)))},Buffer.prototype._rebuild=function(){this._buffer=null,this.create(this._data)},Buffer.prototype.update=function(e){this.create(e)},Buffer.prototype.updateDirectly=function(e,t,r,n){void 0===n&&(n=!1),this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e,n?t:t*Float32Array.BYTES_PER_ELEMENT,r?r*this.byteStride:void 0),this._data=null)},Buffer.prototype._increaseReferences=function(){this._buffer&&(this._isAlreadyOwned?this._buffer.references++:this._isAlreadyOwned=!0)},Buffer.prototype.dispose=function(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)},Buffer}(),i=function(){function VertexBuffer(e,t,r,i,o,s,a,u,c,l,d,h,f,p){if(void 0===d&&(d=!1),void 0===h&&(h=!1),void 0===f&&(f=1),void 0===p&&(p=!1),t instanceof n?(this._buffer=t,this._ownsBuffer=p,p&&this._buffer._increaseReferences()):(this._buffer=new n(e,t,i,s,o,a,h),this._ownsBuffer=!0),this._kind=r,void 0==l){var m=this.getData();this.type=VertexBuffer.FLOAT,m instanceof Int8Array?this.type=VertexBuffer.BYTE:m instanceof Uint8Array?this.type=VertexBuffer.UNSIGNED_BYTE:m instanceof Int16Array?this.type=VertexBuffer.SHORT:m instanceof Uint16Array?this.type=VertexBuffer.UNSIGNED_SHORT:m instanceof Int32Array?this.type=VertexBuffer.INT:m instanceof Uint32Array&&(this.type=VertexBuffer.UNSIGNED_INT)}else this.type=l;var _=VertexBuffer.GetTypeByteLength(this.type);h?(this._size=c||(s?s/_:VertexBuffer.DeduceStride(r)),this.byteStride=s||this._buffer.byteStride||this._size*_,this.byteOffset=u||0):(this._size=c||s||VertexBuffer.DeduceStride(r),this.byteStride=s?s*_:this._buffer.byteStride||this._size*_,this.byteOffset=(u||0)*_),this.normalized=d,this._instanced=void 0!==a&&a,this._instanceDivisor=a?f:0}return Object.defineProperty(VertexBuffer.prototype,"instanceDivisor",{get:function(){return this._instanceDivisor},set:function(e){this._instanceDivisor=e,this._instanced=0!=e},enumerable:!1,configurable:!0}),VertexBuffer.prototype._rebuild=function(){this._buffer&&this._buffer._rebuild()},VertexBuffer.prototype.getKind=function(){return this._kind},VertexBuffer.prototype.isUpdatable=function(){return this._buffer.isUpdatable()},VertexBuffer.prototype.getData=function(){return this._buffer.getData()},VertexBuffer.prototype.getBuffer=function(){return this._buffer.getBuffer()},VertexBuffer.prototype.getStrideSize=function(){return this.byteStride/VertexBuffer.GetTypeByteLength(this.type)},VertexBuffer.prototype.getOffset=function(){return this.byteOffset/VertexBuffer.GetTypeByteLength(this.type)},VertexBuffer.prototype.getSize=function(){return this._size},VertexBuffer.prototype.getIsInstanced=function(){return this._instanced},VertexBuffer.prototype.getInstanceDivisor=function(){return this._instanceDivisor},VertexBuffer.prototype.create=function(e){this._buffer.create(e)},VertexBuffer.prototype.update=function(e){this._buffer.update(e)},VertexBuffer.prototype.updateDirectly=function(e,t,r){void 0===r&&(r=!1),this._buffer.updateDirectly(e,t,void 0,r)},VertexBuffer.prototype.dispose=function(){this._ownsBuffer&&this._buffer.dispose()},VertexBuffer.prototype.forEach=function(e,t){VertexBuffer.ForEach(this._buffer.getData(),this.byteOffset,this.byteStride,this._size,this.type,e,this.normalized,t)},VertexBuffer.DeduceStride=function(e){switch(e){case VertexBuffer.UVKind:case VertexBuffer.UV2Kind:case VertexBuffer.UV3Kind:case VertexBuffer.UV4Kind:case VertexBuffer.UV5Kind:case VertexBuffer.UV6Kind:return 2;case VertexBuffer.NormalKind:case VertexBuffer.PositionKind:return 3;case VertexBuffer.ColorKind:case VertexBuffer.MatricesIndicesKind:case VertexBuffer.MatricesIndicesExtraKind:case VertexBuffer.MatricesWeightsKind:case VertexBuffer.MatricesWeightsExtraKind:case VertexBuffer.TangentKind:return 4;default:throw new Error("Invalid kind '"+e+"'")}},VertexBuffer.GetTypeByteLength=function(e){switch(e){case VertexBuffer.BYTE:case VertexBuffer.UNSIGNED_BYTE:return 1;case VertexBuffer.SHORT:case VertexBuffer.UNSIGNED_SHORT:return 2;case VertexBuffer.INT:case VertexBuffer.UNSIGNED_INT:case VertexBuffer.FLOAT:return 4;default:throw new Error("Invalid type '"+e+"'")}},VertexBuffer.ForEach=function(e,t,r,n,i,o,s,a){if(e instanceof Array)for(var u=t/4,c=r/4,l=0;l<o;l+=n){for(var d=0;d<n;d++)a(e[u+d],l+d);u+=c}else{var h=e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),f=VertexBuffer.GetTypeByteLength(i);for(l=0;l<o;l+=n){var p=t;for(d=0;d<n;d++){var m=VertexBuffer._GetFloatValue(h,i,p,s);a(m,l+d),p+=f}t+=r}}},VertexBuffer._GetFloatValue=function(e,t,r,n){switch(t){case VertexBuffer.BYTE:var i=e.getInt8(r);return n&&(i=Math.max(i/127,-1)),i;case VertexBuffer.UNSIGNED_BYTE:i=e.getUint8(r);return n&&(i/=255),i;case VertexBuffer.SHORT:i=e.getInt16(r,!0);return n&&(i=Math.max(i/32767,-1)),i;case VertexBuffer.UNSIGNED_SHORT:i=e.getUint16(r,!0);return n&&(i/=65535),i;case VertexBuffer.INT:return e.getInt32(r,!0);case VertexBuffer.UNSIGNED_INT:return e.getUint32(r,!0);case VertexBuffer.FLOAT:return e.getFloat32(r,!0);default:throw new Error("Invalid component type "+t)}},VertexBuffer.BYTE=5120,VertexBuffer.UNSIGNED_BYTE=5121,VertexBuffer.SHORT=5122,VertexBuffer.UNSIGNED_SHORT=5123,VertexBuffer.INT=5124,VertexBuffer.UNSIGNED_INT=5125,VertexBuffer.FLOAT=5126,VertexBuffer.PositionKind="position",VertexBuffer.NormalKind="normal",VertexBuffer.TangentKind="tangent",VertexBuffer.UVKind="uv",VertexBuffer.UV2Kind="uv2",VertexBuffer.UV3Kind="uv3",VertexBuffer.UV4Kind="uv4",VertexBuffer.UV5Kind="uv5",VertexBuffer.UV6Kind="uv6",VertexBuffer.ColorKind="color",VertexBuffer.MatricesIndicesKind="matricesIndices",VertexBuffer.MatricesWeightsKind="matricesWeights",VertexBuffer.MatricesIndicesExtraKind="matricesIndicesExtra",VertexBuffer.MatricesWeightsExtraKind="matricesWeightsExtra",VertexBuffer}()},"./node_modules/@babylonjs/core/Meshes/dataBuffer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DataBuffer",(function(){return n}));var n=function(){function DataBuffer(){this.references=0,this.capacity=0,this.is32Bits=!1}return Object.defineProperty(DataBuffer.prototype,"underlyingResource",{get:function(){return null},enumerable:!1,configurable:!0}),DataBuffer}()},"./node_modules/@babylonjs/core/Meshes/geometry.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Geometry",(function(){return f}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),s=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),a=r("./node_modules/@babylonjs/core/Meshes/subMesh.js"),u=r("./node_modules/@babylonjs/core/Loading/sceneLoaderFlags.js"),c=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),l=r("./node_modules/@babylonjs/core/Misc/tools.js"),d=r("./node_modules/@babylonjs/core/Misc/tags.js"),h=r("./node_modules/@babylonjs/core/Maths/math.functions.js"),f=function(){function Geometry(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=null),this.delayLoadState=0,this._totalVertices=0,this._isDisposed=!1,this._indexBufferIsUpdatable=!1,this._positionsCache=[],this.useBoundingInfoFromGeometry=!1,this.id=e,this.uniqueId=t.getUniqueId(),this._engine=t.getEngine(),this._meshes=[],this._scene=t,this._vertexBuffers={},this._indices=[],this._updatable=n,r?this.setAllVerticesData(r,n):(this._totalVertices=0,this._indices=[]),this._engine.getCaps().vertexArrayObject&&(this._vertexArrayObjects={}),i&&(this.applyToMesh(i),i.computeWorldMatrix(!0))}return Object.defineProperty(Geometry.prototype,"boundingBias",{get:function(){return this._boundingBias},set:function(e){this._boundingBias?this._boundingBias.copyFrom(e):this._boundingBias=e.clone(),this._updateBoundingInfo(!0,null)},enumerable:!1,configurable:!0}),Geometry.CreateGeometryForMesh=function(e){var t=new Geometry(Geometry.RandomId(),e.getScene());return t.applyToMesh(e),t},Object.defineProperty(Geometry.prototype,"meshes",{get:function(){return this._meshes},enumerable:!1,configurable:!0}),Object.defineProperty(Geometry.prototype,"extend",{get:function(){return this._extend},enumerable:!1,configurable:!0}),Geometry.prototype.getScene=function(){return this._scene},Geometry.prototype.getEngine=function(){return this._engine},Geometry.prototype.isReady=function(){return 1===this.delayLoadState||0===this.delayLoadState},Object.defineProperty(Geometry.prototype,"doNotSerialize",{get:function(){for(var e=0;e<this._meshes.length;e++)if(!this._meshes[e].doNotSerialize)return!1;return!0},enumerable:!1,configurable:!0}),Geometry.prototype._rebuild=function(){for(var e in this._vertexArrayObjects&&(this._vertexArrayObjects={}),0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._vertexBuffers){var t=this._vertexBuffers[e];t._rebuild()}},Geometry.prototype.setAllVerticesData=function(e,t){e.applyToGeometry(this,t),this.notifyUpdate()},Geometry.prototype.setVerticesData=function(e,t,r,n){void 0===r&&(r=!1),r&&Array.isArray(t)&&(t=new Float32Array(t));var i=new s["VertexBuffer"](this._engine,t,e,r,0===this._meshes.length,n);this.setVerticesBuffer(i)},Geometry.prototype.removeVerticesData=function(e){this._vertexBuffers[e]&&(this._vertexBuffers[e].dispose(),delete this._vertexBuffers[e])},Geometry.prototype.setVerticesBuffer=function(e,t){void 0===t&&(t=null);var r=e.getKind();if(this._vertexBuffers[r]&&this._vertexBuffers[r].dispose(),this._vertexBuffers[r]=e,r===s["VertexBuffer"].PositionKind){var n=e.getData();null!=t?this._totalVertices=t:null!=n&&(this._totalVertices=n.length/(e.byteStride/4)),this._updateExtend(n),this._resetPointsArrayCache();for(var i=this._meshes,o=i.length,a=0;a<o;a++){var u=i[a];u._boundingInfo=new c["BoundingInfo"](this._extend.minimum,this._extend.maximum),u._createGlobalSubMesh(!1),u.computeWorldMatrix(!0)}}this.notifyUpdate(r),this._vertexArrayObjects&&(this._disposeVertexArrayObjects(),this._vertexArrayObjects={})},Geometry.prototype.updateVerticesDataDirectly=function(e,t,r,n){void 0===n&&(n=!1);var i=this.getVertexBuffer(e);i&&(i.updateDirectly(t,r,n),this.notifyUpdate(e))},Geometry.prototype.updateVerticesData=function(e,t,r){void 0===r&&(r=!1);var n=this.getVertexBuffer(e);n&&(n.update(t),e===s["VertexBuffer"].PositionKind&&this._updateBoundingInfo(r,t),this.notifyUpdate(e))},Geometry.prototype._updateBoundingInfo=function(e,t){if(e&&this._updateExtend(t),this._resetPointsArrayCache(),e)for(var r=this._meshes,n=0,i=r;n<i.length;n++){var o=i[n];o._boundingInfo?o._boundingInfo.reConstruct(this._extend.minimum,this._extend.maximum):o._boundingInfo=new c["BoundingInfo"](this._extend.minimum,this._extend.maximum);for(var s=o.subMeshes,a=0,u=s;a<u.length;a++){var l=u[a];l.refreshBoundingInfo()}}},Geometry.prototype._bind=function(e,t){if(e){void 0===t&&(t=this._indexBuffer);var r=this.getVertexBuffers();r&&(t==this._indexBuffer&&this._vertexArrayObjects?(this._vertexArrayObjects[e.key]||(this._vertexArrayObjects[e.key]=this._engine.recordVertexArrayObject(r,t,e)),this._engine.bindVertexArrayObject(this._vertexArrayObjects[e.key],t)):this._engine.bindBuffers(r,t,e))}},Geometry.prototype.getTotalVertices=function(){return this.isReady()?this._totalVertices:0},Geometry.prototype.getVerticesData=function(e,t,r){var n=this.getVertexBuffer(e);if(!n)return null;var i=n.getData();if(!i)return null;var o=n.getSize()*s["VertexBuffer"].GetTypeByteLength(n.type),a=this._totalVertices*n.getSize();if(n.type!==s["VertexBuffer"].FLOAT||n.byteStride!==o){var u=[];return n.forEach(a,(function(e){return u.push(e)})),u}if(!(i instanceof Array||i instanceof Float32Array)||0!==n.byteOffset||i.length!==a){if(i instanceof Array){var c=n.byteOffset/4;return l["Tools"].Slice(i,c,c+a)}if(i instanceof ArrayBuffer)return new Float32Array(i,n.byteOffset,a);c=i.byteOffset+n.byteOffset;if(r||t&&1!==this._meshes.length){var d=new Float32Array(a),h=new Float32Array(i.buffer,c,a);return d.set(h),d}var f=c%4;return f&&(c=Math.max(0,c-f)),new Float32Array(i.buffer,c,a)}return r||t&&1!==this._meshes.length?l["Tools"].Slice(i):i},Geometry.prototype.isVertexBufferUpdatable=function(e){var t=this._vertexBuffers[e];return!!t&&t.isUpdatable()},Geometry.prototype.getVertexBuffer=function(e){return this.isReady()?this._vertexBuffers[e]:null},Geometry.prototype.getVertexBuffers=function(){return this.isReady()?this._vertexBuffers:null},Geometry.prototype.isVerticesDataPresent=function(e){return this._vertexBuffers?void 0!==this._vertexBuffers[e]:!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},Geometry.prototype.getVerticesDataKinds=function(){var e,t=[];if(!this._vertexBuffers&&this._delayInfo)for(e in this._delayInfo)t.push(e);else for(e in this._vertexBuffers)t.push(e);return t},Geometry.prototype.updateIndices=function(e,t,r){if(void 0===r&&(r=!1),this._indexBuffer)if(this._indexBufferIsUpdatable){var n=e.length!==this._indices.length;if(r||(this._indices=e.slice()),this._engine.updateDynamicIndexBuffer(this._indexBuffer,e,t),n)for(var i=0,o=this._meshes;i<o.length;i++){var s=o[i];s._createGlobalSubMesh(!0)}}else this.setIndices(e,null,!0)},Geometry.prototype.setIndices=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._disposeVertexArrayObjects(),this._indices=e,this._indexBufferIsUpdatable=r,0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices,r)),void 0!=t&&(this._totalVertices=t);for(var n=0,i=this._meshes;n<i.length;n++){var o=i[n];o._createGlobalSubMesh(!0)}this.notifyUpdate()},Geometry.prototype.getTotalIndices=function(){return this.isReady()?this._indices.length:0},Geometry.prototype.getIndices=function(e,t){if(!this.isReady())return null;var r=this._indices;if(t||e&&1!==this._meshes.length){for(var n=r.length,i=[],o=0;o<n;o++)i.push(r[o]);return i}return r},Geometry.prototype.getIndexBuffer=function(){return this.isReady()?this._indexBuffer:null},Geometry.prototype._releaseVertexArrayObject=function(e){void 0===e&&(e=null),e&&this._vertexArrayObjects&&this._vertexArrayObjects[e.key]&&(this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e.key]),delete this._vertexArrayObjects[e.key])},Geometry.prototype.releaseForMesh=function(e,t){var r=this._meshes,n=r.indexOf(e);-1!==n&&(r.splice(n,1),e._geometry=null,0===r.length&&t&&this.dispose())},Geometry.prototype.applyToMesh=function(e){if(e._geometry!==this){var t=e._geometry;t&&t.releaseForMesh(e);var r=this._meshes;e._geometry=this,this._scene.pushGeometry(this),r.push(e),this.isReady()?this._applyToMesh(e):e._boundingInfo=this._boundingInfo}},Geometry.prototype._updateExtend=function(e){void 0===e&&(e=null),this.useBoundingInfoFromGeometry&&this._boundingInfo?this._extend={minimum:this._boundingInfo.minimum.clone(),maximum:this._boundingInfo.maximum.clone()}:(e||(e=this.getVerticesData(s["VertexBuffer"].PositionKind)),this._extend=Object(h["extractMinAndMax"])(e,0,this._totalVertices,this.boundingBias,3))},Geometry.prototype._applyToMesh=function(e){var t=this._meshes.length;for(var r in this._vertexBuffers){1===t&&this._vertexBuffers[r].create();var n=this._vertexBuffers[r].getBuffer();n&&(n.references=t),r===s["VertexBuffer"].PositionKind&&(this._extend||this._updateExtend(),e._boundingInfo=new c["BoundingInfo"](this._extend.minimum,this._extend.maximum),e._createGlobalSubMesh(!1),e._updateBoundingInfo())}1===t&&this._indices&&this._indices.length>0&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._indexBuffer&&(this._indexBuffer.references=t),e._syncGeometryWithMorphTargetManager(),e.synchronizeInstances()},Geometry.prototype.notifyUpdate=function(e){this.onGeometryUpdated&&this.onGeometryUpdated(this,e);for(var t=0,r=this._meshes;t<r.length;t++){var n=r[t];n._markSubMeshesAsAttributesDirty()}},Geometry.prototype.load=function(e,t){2!==this.delayLoadState&&(this.isReady()?t&&t():(this.delayLoadState=2,this._queueLoad(e,t)))},Geometry.prototype._queueLoad=function(e,t){var r=this;this.delayLoadingFile&&(e._addPendingData(this),e._loadFile(this.delayLoadingFile,(function(n){if(r._delayLoadingFunction){r._delayLoadingFunction(JSON.parse(n),r),r.delayLoadState=1,r._delayInfo=[],e._removePendingData(r);for(var i=r._meshes,o=i.length,s=0;s<o;s++)r._applyToMesh(i[s]);t&&t()}}),void 0,!0))},Geometry.prototype.toLeftHanded=function(){var e=this.getIndices(!1);if(null!=e&&e.length>0){for(var t=0;t<e.length;t+=3){var r=e[t+0];e[t+0]=e[t+2],e[t+2]=r}this.setIndices(e)}var n=this.getVerticesData(s["VertexBuffer"].PositionKind,!1);if(null!=n&&n.length>0){for(t=0;t<n.length;t+=3)n[t+2]=-n[t+2];this.setVerticesData(s["VertexBuffer"].PositionKind,n,!1)}var i=this.getVerticesData(s["VertexBuffer"].NormalKind,!1);if(null!=i&&i.length>0){for(t=0;t<i.length;t+=3)i[t+2]=-i[t+2];this.setVerticesData(s["VertexBuffer"].NormalKind,i,!1)}},Geometry.prototype._resetPointsArrayCache=function(){this._positions=null},Geometry.prototype._generatePointsArray=function(){if(this._positions)return!0;var e=this.getVerticesData(s["VertexBuffer"].PositionKind);if(!e||0===e.length)return!1;for(var t=3*this._positionsCache.length,r=this._positionsCache.length;t<e.length;t+=3,++r)this._positionsCache[r]=n["Vector3"].FromArray(e,t);for(t=0,r=0;t<e.length;t+=3,++r)this._positionsCache[r].set(e[0+t],e[1+t],e[2+t]);return this._positionsCache.length=e.length/3,this._positions=this._positionsCache,!0},Geometry.prototype.isDisposed=function(){return this._isDisposed},Geometry.prototype._disposeVertexArrayObjects=function(){if(this._vertexArrayObjects){for(var e in this._vertexArrayObjects)this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e]);this._vertexArrayObjects={}}},Geometry.prototype.dispose=function(){var e,t=this._meshes,r=t.length;for(e=0;e<r;e++)this.releaseForMesh(t[e]);for(var n in this._meshes=[],this._disposeVertexArrayObjects(),this._vertexBuffers)this._vertexBuffers[n].dispose();this._vertexBuffers={},this._totalVertices=0,this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._indexBuffer=null,this._indices=[],this.delayLoadState=0,this.delayLoadingFile=null,this._delayLoadingFunction=null,this._delayInfo=[],this._boundingInfo=null,this._scene.removeGeometry(this),this._isDisposed=!0},Geometry.prototype.copy=function(e){var t=new o["VertexData"];t.indices=[];var r=this.getIndices();if(r)for(var n=0;n<r.length;n++)t.indices.push(r[n]);var i,s=!1,a=!1;for(i in this._vertexBuffers){var u=this.getVerticesData(i);if(u&&(u instanceof Float32Array?t.set(new Float32Array(u),i):t.set(u.slice(0),i),!a)){var l=this.getVertexBuffer(i);l&&(s=l.isUpdatable(),a=!s)}}var d=new Geometry(e,this._scene,t,s);for(i in d.delayLoadState=this.delayLoadState,d.delayLoadingFile=this.delayLoadingFile,d._delayLoadingFunction=this._delayLoadingFunction,this._delayInfo)d._delayInfo=d._delayInfo||[],d._delayInfo.push(i);return d._boundingInfo=new c["BoundingInfo"](this._extend.minimum,this._extend.maximum),d},Geometry.prototype.serialize=function(){var e={};return e.id=this.id,e.updatable=this._updatable,d["Tags"]&&d["Tags"].HasTags(this)&&(e.tags=d["Tags"].GetTags(this)),e},Geometry.prototype.toNumberArray=function(e){return Array.isArray(e)?e:Array.prototype.slice.call(e)},Geometry.prototype.serializeVerticeData=function(){var e=this.serialize();return this.isVerticesDataPresent(s["VertexBuffer"].PositionKind)&&(e.positions=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].PositionKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].PositionKind)&&(e.positions._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].NormalKind)&&(e.normals=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].NormalKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].NormalKind)&&(e.normals._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].TangentKind)&&(e.tangets=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].TangentKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].TangentKind)&&(e.tangets._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UVKind)&&(e.uvs=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UVKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UVKind)&&(e.uvs._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UV2Kind)&&(e.uv2s=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UV2Kind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UV2Kind)&&(e.uv2s._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UV3Kind)&&(e.uv3s=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UV3Kind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UV3Kind)&&(e.uv3s._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UV4Kind)&&(e.uv4s=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UV4Kind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UV4Kind)&&(e.uv4s._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UV5Kind)&&(e.uv5s=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UV5Kind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UV5Kind)&&(e.uv5s._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].UV6Kind)&&(e.uv6s=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].UV6Kind)),this.isVertexBufferUpdatable(s["VertexBuffer"].UV6Kind)&&(e.uv6s._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].ColorKind)&&(e.colors=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].ColorKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].ColorKind)&&(e.colors._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].MatricesIndicesKind)&&(e.matricesIndices=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].MatricesIndicesKind)),e.matricesIndices._isExpanded=!0,this.isVertexBufferUpdatable(s["VertexBuffer"].MatricesIndicesKind)&&(e.matricesIndices._updatable=!0)),this.isVerticesDataPresent(s["VertexBuffer"].MatricesWeightsKind)&&(e.matricesWeights=this.toNumberArray(this.getVerticesData(s["VertexBuffer"].MatricesWeightsKind)),this.isVertexBufferUpdatable(s["VertexBuffer"].MatricesWeightsKind)&&(e.matricesWeights._updatable=!0)),e.indices=this.toNumberArray(this.getIndices()),e},Geometry.ExtractFromMesh=function(e,t){var r=e._geometry;return r?r.copy(t):null},Geometry.RandomId=function(){return l["Tools"].RandomId()},Geometry._ImportGeometry=function(e,t){var r=t.getScene(),n=e.geometryId;if(n){var o=r.getGeometryByID(n);o&&o.applyToMesh(t)}else if(e instanceof ArrayBuffer){var u=t._binaryInfo;if(u.positionsAttrDesc&&u.positionsAttrDesc.count>0){var c=new Float32Array(e,u.positionsAttrDesc.offset,u.positionsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].PositionKind,c,!1)}if(u.normalsAttrDesc&&u.normalsAttrDesc.count>0){var l=new Float32Array(e,u.normalsAttrDesc.offset,u.normalsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].NormalKind,l,!1)}if(u.tangetsAttrDesc&&u.tangetsAttrDesc.count>0){var d=new Float32Array(e,u.tangetsAttrDesc.offset,u.tangetsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].TangentKind,d,!1)}if(u.uvsAttrDesc&&u.uvsAttrDesc.count>0){var h=new Float32Array(e,u.uvsAttrDesc.offset,u.uvsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].UVKind,h,!1)}if(u.uvs2AttrDesc&&u.uvs2AttrDesc.count>0){var f=new Float32Array(e,u.uvs2AttrDesc.offset,u.uvs2AttrDesc.count);t.setVerticesData(s["VertexBuffer"].UV2Kind,f,!1)}if(u.uvs3AttrDesc&&u.uvs3AttrDesc.count>0){var p=new Float32Array(e,u.uvs3AttrDesc.offset,u.uvs3AttrDesc.count);t.setVerticesData(s["VertexBuffer"].UV3Kind,p,!1)}if(u.uvs4AttrDesc&&u.uvs4AttrDesc.count>0){var m=new Float32Array(e,u.uvs4AttrDesc.offset,u.uvs4AttrDesc.count);t.setVerticesData(s["VertexBuffer"].UV4Kind,m,!1)}if(u.uvs5AttrDesc&&u.uvs5AttrDesc.count>0){var _=new Float32Array(e,u.uvs5AttrDesc.offset,u.uvs5AttrDesc.count);t.setVerticesData(s["VertexBuffer"].UV5Kind,_,!1)}if(u.uvs6AttrDesc&&u.uvs6AttrDesc.count>0){var g=new Float32Array(e,u.uvs6AttrDesc.offset,u.uvs6AttrDesc.count);t.setVerticesData(s["VertexBuffer"].UV6Kind,g,!1)}if(u.colorsAttrDesc&&u.colorsAttrDesc.count>0){var b=new Float32Array(e,u.colorsAttrDesc.offset,u.colorsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].ColorKind,b,!1,u.colorsAttrDesc.stride)}if(u.matricesIndicesAttrDesc&&u.matricesIndicesAttrDesc.count>0){for(var v=new Int32Array(e,u.matricesIndicesAttrDesc.offset,u.matricesIndicesAttrDesc.count),M=[],T=0;T<v.length;T++){var S=v[T];M.push(255&S),M.push((65280&S)>>8),M.push((16711680&S)>>16),M.push(S>>24&255)}t.setVerticesData(s["VertexBuffer"].MatricesIndicesKind,M,!1)}if(u.matricesIndicesExtraAttrDesc&&u.matricesIndicesExtraAttrDesc.count>0){for(v=new Int32Array(e,u.matricesIndicesExtraAttrDesc.offset,u.matricesIndicesExtraAttrDesc.count),M=[],T=0;T<v.length;T++){S=v[T];M.push(255&S),M.push((65280&S)>>8),M.push((16711680&S)>>16),M.push(S>>24&255)}t.setVerticesData(s["VertexBuffer"].MatricesIndicesExtraKind,M,!1)}if(u.matricesWeightsAttrDesc&&u.matricesWeightsAttrDesc.count>0){var C=new Float32Array(e,u.matricesWeightsAttrDesc.offset,u.matricesWeightsAttrDesc.count);t.setVerticesData(s["VertexBuffer"].MatricesWeightsKind,C,!1)}if(u.indicesAttrDesc&&u.indicesAttrDesc.count>0){var E=new Int32Array(e,u.indicesAttrDesc.offset,u.indicesAttrDesc.count);t.setIndices(E,null)}if(u.subMeshesAttrDesc&&u.subMeshesAttrDesc.count>0){var P=new Int32Array(e,u.subMeshesAttrDesc.offset,5*u.subMeshesAttrDesc.count);t.subMeshes=[];for(T=0;T<u.subMeshesAttrDesc.count;T++){var A=P[5*T+0],j=P[5*T+1],O=P[5*T+2],R=P[5*T+3],I=P[5*T+4];a["SubMesh"].AddToMesh(A,j,O,R,I,t)}}}else if(e.positions&&e.normals&&e.indices){if(t.setVerticesData(s["VertexBuffer"].PositionKind,e.positions,e.positions._updatable),t.setVerticesData(s["VertexBuffer"].NormalKind,e.normals,e.normals._updatable),e.tangents&&t.setVerticesData(s["VertexBuffer"].TangentKind,e.tangents,e.tangents._updatable),e.uvs&&t.setVerticesData(s["VertexBuffer"].UVKind,e.uvs,e.uvs._updatable),e.uvs2&&t.setVerticesData(s["VertexBuffer"].UV2Kind,e.uvs2,e.uvs2._updatable),e.uvs3&&t.setVerticesData(s["VertexBuffer"].UV3Kind,e.uvs3,e.uvs3._updatable),e.uvs4&&t.setVerticesData(s["VertexBuffer"].UV4Kind,e.uvs4,e.uvs4._updatable),e.uvs5&&t.setVerticesData(s["VertexBuffer"].UV5Kind,e.uvs5,e.uvs5._updatable),e.uvs6&&t.setVerticesData(s["VertexBuffer"].UV6Kind,e.uvs6,e.uvs6._updatable),e.colors&&t.setVerticesData(s["VertexBuffer"].ColorKind,i["Color4"].CheckColors4(e.colors,e.positions.length/3),e.colors._updatable),e.matricesIndices)if(e.matricesIndices._isExpanded)delete e.matricesIndices._isExpanded,t.setVerticesData(s["VertexBuffer"].MatricesIndicesKind,e.matricesIndices,e.matricesIndices._updatable);else{for(M=[],T=0;T<e.matricesIndices.length;T++){var w=e.matricesIndices[T];M.push(255&w),M.push((65280&w)>>8),M.push((16711680&w)>>16),M.push(w>>24&255)}t.setVerticesData(s["VertexBuffer"].MatricesIndicesKind,M,e.matricesIndices._updatable)}if(e.matricesIndicesExtra)if(e.matricesIndicesExtra._isExpanded)delete e.matricesIndices._isExpanded,t.setVerticesData(s["VertexBuffer"].MatricesIndicesExtraKind,e.matricesIndicesExtra,e.matricesIndicesExtra._updatable);else{for(M=[],T=0;T<e.matricesIndicesExtra.length;T++){w=e.matricesIndicesExtra[T];M.push(255&w),M.push((65280&w)>>8),M.push((16711680&w)>>16),M.push(w>>24&255)}t.setVerticesData(s["VertexBuffer"].MatricesIndicesExtraKind,M,e.matricesIndicesExtra._updatable)}e.matricesWeights&&(Geometry._CleanMatricesWeights(e,t),t.setVerticesData(s["VertexBuffer"].MatricesWeightsKind,e.matricesWeights,e.matricesWeights._updatable)),e.matricesWeightsExtra&&t.setVerticesData(s["VertexBuffer"].MatricesWeightsExtraKind,e.matricesWeightsExtra,e.matricesWeights._updatable),t.setIndices(e.indices,null)}if(e.subMeshes){t.subMeshes=[];for(var D=0;D<e.subMeshes.length;D++){var F=e.subMeshes[D];a["SubMesh"].AddToMesh(F.materialIndex,F.verticesStart,F.verticesCount,F.indexStart,F.indexCount,t)}}t._shouldGenerateFlatShading&&(t.convertToFlatShadedMesh(),t._shouldGenerateFlatShading=!1),t.computeWorldMatrix(!0),r.onMeshImportedObservable.notifyObservers(t)},Geometry._CleanMatricesWeights=function(e,t){var r=.001;if(u["SceneLoaderFlags"].CleanBoneMatrixWeights){var n=0;if(e.skeletonId>-1){var i=t.getScene().getLastSkeletonByID(e.skeletonId);if(i){n=i.bones.length;for(var o=t.getVerticesData(s["VertexBuffer"].MatricesIndicesKind),a=t.getVerticesData(s["VertexBuffer"].MatricesIndicesExtraKind),c=e.matricesWeights,l=e.matricesWeightsExtra,d=e.numBoneInfluencer,h=c.length,f=0;f<h;f+=4){for(var p=0,m=-1,_=0;_<4;_++){var g=c[f+_];p+=g,g<r&&m<0&&(m=_)}if(l)for(_=0;_<4;_++){g=l[f+_];p+=g,g<r&&m<0&&(m=_+4)}if((m<0||m>d-1)&&(m=d-1),p>r){var b=1/p;for(_=0;_<4;_++)c[f+_]*=b;if(l)for(_=0;_<4;_++)l[f+_]*=b}else m>=4?(l[f+m-4]=1-p,a[f+m-4]=n):(c[f+m]=1-p,o[f+m]=n)}t.setVerticesData(s["VertexBuffer"].MatricesIndicesKind,o),e.matricesWeightsExtra&&t.setVerticesData(s["VertexBuffer"].MatricesIndicesExtraKind,a)}}}},Geometry.Parse=function(e,t,r){if(t.getGeometryByID(e.id))return null;var i=new Geometry(e.id,t,void 0,e.updatable);return d["Tags"]&&d["Tags"].AddTagsTo(i,e.tags),e.delayLoadingFile?(i.delayLoadState=4,i.delayLoadingFile=r+e.delayLoadingFile,i._boundingInfo=new c["BoundingInfo"](n["Vector3"].FromArray(e.boundingBoxMinimum),n["Vector3"].FromArray(e.boundingBoxMaximum)),i._delayInfo=[],e.hasUVs&&i._delayInfo.push(s["VertexBuffer"].UVKind),e.hasUVs2&&i._delayInfo.push(s["VertexBuffer"].UV2Kind),e.hasUVs3&&i._delayInfo.push(s["VertexBuffer"].UV3Kind),e.hasUVs4&&i._delayInfo.push(s["VertexBuffer"].UV4Kind),e.hasUVs5&&i._delayInfo.push(s["VertexBuffer"].UV5Kind),e.hasUVs6&&i._delayInfo.push(s["VertexBuffer"].UV6Kind),e.hasColors&&i._delayInfo.push(s["VertexBuffer"].ColorKind),e.hasMatricesIndices&&i._delayInfo.push(s["VertexBuffer"].MatricesIndicesKind),e.hasMatricesWeights&&i._delayInfo.push(s["VertexBuffer"].MatricesWeightsKind),i._delayLoadingFunction=o["VertexData"].ImportVertexData):o["VertexData"].ImportVertexData(e,i),t.pushGeometry(i,!0),i},Geometry}()},"./node_modules/@babylonjs/core/Meshes/groundMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GroundMesh",(function(){return a}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.js");s["Mesh"]._GroundMeshParser=function(e,t){return a.Parse(e,t)};var a=function(e){function GroundMesh(t,r){var n=e.call(this,t,r)||this;return n.generateOctree=!1,n}return Object(n["__extends"])(GroundMesh,e),GroundMesh.prototype.getClassName=function(){return"GroundMesh"},Object.defineProperty(GroundMesh.prototype,"subdivisions",{get:function(){return Math.min(this._subdivisionsX,this._subdivisionsY)},enumerable:!1,configurable:!0}),Object.defineProperty(GroundMesh.prototype,"subdivisionsX",{get:function(){return this._subdivisionsX},enumerable:!1,configurable:!0}),Object.defineProperty(GroundMesh.prototype,"subdivisionsY",{get:function(){return this._subdivisionsY},enumerable:!1,configurable:!0}),GroundMesh.prototype.optimize=function(e,t){void 0===t&&(t=32),this._subdivisionsX=e,this._subdivisionsY=e,this.subdivide(e);var r=this;r.createOrUpdateSubmeshesOctree&&r.createOrUpdateSubmeshesOctree(t)},GroundMesh.prototype.getHeightAtCoordinates=function(e,t){var r=this.getWorldMatrix(),n=i["TmpVectors"].Matrix[5];r.invertToRef(n);var o=i["TmpVectors"].Vector3[8];if(i["Vector3"].TransformCoordinatesFromFloatsToRef(e,0,t,n,o),e=o.x,t=o.z,e<this._minX||e>this._maxX||t<this._minZ||t>this._maxZ)return this.position.y;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var s=this._getFacetAt(e,t),a=-(s.x*e+s.z*t+s.w)/s.y;return i["Vector3"].TransformCoordinatesFromFloatsToRef(0,a,0,r,o),o.y},GroundMesh.prototype.getNormalAtCoordinates=function(e,t){var r=new i["Vector3"](0,1,0);return this.getNormalAtCoordinatesToRef(e,t,r),r},GroundMesh.prototype.getNormalAtCoordinatesToRef=function(e,t,r){var n=this.getWorldMatrix(),o=i["TmpVectors"].Matrix[5];n.invertToRef(o);var s=i["TmpVectors"].Vector3[8];if(i["Vector3"].TransformCoordinatesFromFloatsToRef(e,0,t,o,s),e=s.x,t=s.z,e<this._minX||e>this._maxX||t<this._minZ||t>this._maxZ)return this;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var a=this._getFacetAt(e,t);return i["Vector3"].TransformNormalFromFloatsToRef(a.x,a.y,a.z,n,r),this},GroundMesh.prototype.updateCoordinateHeights=function(){return this._heightQuads&&0!=this._heightQuads.length||this._initHeightQuads(),this._computeHeightQuads(),this},GroundMesh.prototype._getFacetAt=function(e,t){var r,n=Math.floor((e+this._maxX)*this._subdivisionsX/this._width),i=Math.floor(-(t+this._maxZ)*this._subdivisionsY/this._height+this._subdivisionsY),o=this._heightQuads[i*this._subdivisionsX+n];return r=t<o.slope.x*e+o.slope.y?o.facet1:o.facet2,r},GroundMesh.prototype._initHeightQuads=function(){var e=this._subdivisionsX,t=this._subdivisionsY;this._heightQuads=new Array;for(var r=0;r<t;r++)for(var n=0;n<e;n++){var o={slope:i["Vector2"].Zero(),facet1:new i["Vector4"](0,0,0,0),facet2:new i["Vector4"](0,0,0,0)};this._heightQuads[r*e+n]=o}return this},GroundMesh.prototype._computeHeightQuads=function(){var e=this.getVerticesData(o["VertexBuffer"].PositionKind);if(!e)return this;for(var t=i["TmpVectors"].Vector3[3],r=i["TmpVectors"].Vector3[2],n=i["TmpVectors"].Vector3[1],s=i["TmpVectors"].Vector3[0],a=i["TmpVectors"].Vector3[4],u=i["TmpVectors"].Vector3[5],c=i["TmpVectors"].Vector3[6],l=i["TmpVectors"].Vector3[7],d=i["TmpVectors"].Vector3[8],h=0,f=0,p=0,m=0,_=0,g=0,b=0,v=this._subdivisionsX,M=this._subdivisionsY,T=0;T<M;T++)for(var S=0;S<v;S++){h=3*S,f=T*(v+1)*3,p=(T+1)*(v+1)*3,t.x=e[f+h],t.y=e[f+h+1],t.z=e[f+h+2],r.x=e[f+h+3],r.y=e[f+h+4],r.z=e[f+h+5],n.x=e[p+h],n.y=e[p+h+1],n.z=e[p+h+2],s.x=e[p+h+3],s.y=e[p+h+4],s.z=e[p+h+5],m=(s.z-t.z)/(s.x-t.x),_=t.z-m*t.x,r.subtractToRef(t,a),n.subtractToRef(t,u),s.subtractToRef(t,c),i["Vector3"].CrossToRef(c,u,l),i["Vector3"].CrossToRef(a,c,d),l.normalize(),d.normalize(),g=-(l.x*t.x+l.y*t.y+l.z*t.z),b=-(d.x*r.x+d.y*r.y+d.z*r.z);var C=this._heightQuads[T*v+S];C.slope.copyFromFloats(m,_),C.facet1.copyFromFloats(l.x,l.y,l.z,g),C.facet2.copyFromFloats(d.x,d.y,d.z,b)}return this},GroundMesh.prototype.serialize=function(t){e.prototype.serialize.call(this,t),t.subdivisionsX=this._subdivisionsX,t.subdivisionsY=this._subdivisionsY,t.minX=this._minX,t.maxX=this._maxX,t.minZ=this._minZ,t.maxZ=this._maxZ,t.width=this._width,t.height=this._height},GroundMesh.Parse=function(e,t){var r=new GroundMesh(e.name,t);return r._subdivisionsX=e.subdivisionsX||1,r._subdivisionsY=e.subdivisionsY||1,r._minX=e.minX,r._maxX=e.maxX,r._minZ=e.minZ,r._maxZ=e.maxZ,r._width=e.width,r._height=e.height,r},GroundMesh}(s["Mesh"])},"./node_modules/@babylonjs/core/Meshes/instancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"InstancedMesh",(function(){return f}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Misc/logger.js"),s=r("./node_modules/@babylonjs/core/Meshes/abstractMesh.js"),a=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),u=r("./node_modules/@babylonjs/core/Misc/deepCopier.js"),c=r("./node_modules/@babylonjs/core/Meshes/transformNode.js"),l=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),d=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),h=r("./node_modules/@babylonjs/core/Misc/tools.js");a["Mesh"]._instancedMeshFactory=function(e,t){var r=new f(e,t);if(t.instancedBuffers)for(var n in r.instancedBuffers={},t.instancedBuffers)r.instancedBuffers[n]=t.instancedBuffers[n];return r};var f=function(e){function InstancedMesh(t,r){var n=e.call(this,t,r.getScene())||this;n._indexInSourceMeshInstanceArray=-1,r.addInstance(n),n._sourceMesh=r,n._unIndexed=r._unIndexed,n.position.copyFrom(r.position),n.rotation.copyFrom(r.rotation),n.scaling.copyFrom(r.scaling),r.rotationQuaternion&&(n.rotationQuaternion=r.rotationQuaternion.clone()),n.animations=h["Tools"].Slice(r.animations);for(var i=0,o=r.getAnimationRanges();i<o.length;i++){var s=o[i];null!=s&&n.createAnimationRange(s.name,s.from,s.to)}return n.infiniteDistance=r.infiniteDistance,n.setPivotMatrix(r.getPivotMatrix()),n.refreshBoundingInfo(),n._syncSubMeshes(),n}return Object(n["__extends"])(InstancedMesh,e),InstancedMesh.prototype.getClassName=function(){return"InstancedMesh"},Object.defineProperty(InstancedMesh.prototype,"lightSources",{get:function(){return this._sourceMesh._lightSources},enumerable:!1,configurable:!0}),InstancedMesh.prototype._resyncLightSources=function(){},InstancedMesh.prototype._resyncLightSource=function(e){},InstancedMesh.prototype._removeLightSource=function(e,t){},Object.defineProperty(InstancedMesh.prototype,"receiveShadows",{get:function(){return this._sourceMesh.receiveShadows},enumerable:!1,configurable:!0}),Object.defineProperty(InstancedMesh.prototype,"material",{get:function(){return this._sourceMesh.material},enumerable:!1,configurable:!0}),Object.defineProperty(InstancedMesh.prototype,"visibility",{get:function(){return this._sourceMesh.visibility},enumerable:!1,configurable:!0}),Object.defineProperty(InstancedMesh.prototype,"skeleton",{get:function(){return this._sourceMesh.skeleton},enumerable:!1,configurable:!0}),Object.defineProperty(InstancedMesh.prototype,"renderingGroupId",{get:function(){return this._sourceMesh.renderingGroupId},set:function(e){this._sourceMesh&&e!==this._sourceMesh.renderingGroupId&&o["Logger"].Warn("Note - setting renderingGroupId of an instanced mesh has no effect on the scene")},enumerable:!1,configurable:!0}),InstancedMesh.prototype.getTotalVertices=function(){return this._sourceMesh?this._sourceMesh.getTotalVertices():0},InstancedMesh.prototype.getTotalIndices=function(){return this._sourceMesh.getTotalIndices()},Object.defineProperty(InstancedMesh.prototype,"sourceMesh",{get:function(){return this._sourceMesh},enumerable:!1,configurable:!0}),InstancedMesh.prototype.createInstance=function(e){return this._sourceMesh.createInstance(e)},InstancedMesh.prototype.isReady=function(e){return void 0===e&&(e=!1),this._sourceMesh.isReady(e,!0)},InstancedMesh.prototype.getVerticesData=function(e,t){return this._sourceMesh.getVerticesData(e,t)},InstancedMesh.prototype.setVerticesData=function(e,t,r,n){return this.sourceMesh&&this.sourceMesh.setVerticesData(e,t,r,n),this.sourceMesh},InstancedMesh.prototype.updateVerticesData=function(e,t,r,n){return this.sourceMesh&&this.sourceMesh.updateVerticesData(e,t,r,n),this.sourceMesh},InstancedMesh.prototype.setIndices=function(e,t){return void 0===t&&(t=null),this.sourceMesh&&this.sourceMesh.setIndices(e,t),this.sourceMesh},InstancedMesh.prototype.isVerticesDataPresent=function(e){return this._sourceMesh.isVerticesDataPresent(e)},InstancedMesh.prototype.getIndices=function(){return this._sourceMesh.getIndices()},Object.defineProperty(InstancedMesh.prototype,"_positions",{get:function(){return this._sourceMesh._positions},enumerable:!1,configurable:!0}),InstancedMesh.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked)return this;var t=this._sourceMesh.geometry?this._sourceMesh.geometry.boundingBias:null;return this._refreshBoundingInfo(this._sourceMesh._getPositionData(e),t),this},InstancedMesh.prototype._preActivate=function(){return this._currentLOD&&this._currentLOD._preActivate(),this},InstancedMesh.prototype._activate=function(e,t){if(this._sourceMesh.subMeshes||o["Logger"].Warn("Instances should only be created for meshes with geometry."),this._currentLOD){var r=this._currentLOD._getWorldMatrixDeterminant()>0!==this._getWorldMatrixDeterminant()>0;if(r)return this._internalAbstractMeshDataInfo._actAsRegularMesh=!0,!0;if(this._internalAbstractMeshDataInfo._actAsRegularMesh=!1,this._currentLOD._registerInstanceForRenderId(this,e),t){if(!this._currentLOD._internalAbstractMeshDataInfo._isActiveIntermediate)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!0,!0}else if(!this._currentLOD._internalAbstractMeshDataInfo._isActive)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstances=!0,!0}return!1},InstancedMesh.prototype._postActivate=function(){this._sourceMesh.edgesShareWithInstances&&this._sourceMesh._edgesRenderer&&this._sourceMesh._edgesRenderer.isEnabled&&this._sourceMesh._renderingGroup?(this._sourceMesh._renderingGroup._edgesRenderers.pushNoDuplicate(this._sourceMesh._edgesRenderer),this._sourceMesh._edgesRenderer.customInstances.push(this.getWorldMatrix())):this._edgesRenderer&&this._edgesRenderer.isEnabled&&this._sourceMesh._renderingGroup&&this._sourceMesh._renderingGroup._edgesRenderers.push(this._edgesRenderer)},InstancedMesh.prototype.getWorldMatrix=function(){if(this._currentLOD&&this._currentLOD.billboardMode!==c["TransformNode"].BILLBOARDMODE_NONE&&this._currentLOD._masterMesh!==this){var t=this._currentLOD._masterMesh;return this._currentLOD._masterMesh=this,i["TmpVectors"].Vector3[7].copyFrom(this._currentLOD.position),this._currentLOD.position.set(0,0,0),i["TmpVectors"].Matrix[0].copyFrom(this._currentLOD.computeWorldMatrix(!0)),this._currentLOD.position.copyFrom(i["TmpVectors"].Vector3[7]),this._currentLOD._masterMesh=t,i["TmpVectors"].Matrix[0]}return e.prototype.getWorldMatrix.call(this)},Object.defineProperty(InstancedMesh.prototype,"isAnInstance",{get:function(){return!0},enumerable:!1,configurable:!0}),InstancedMesh.prototype.getLOD=function(e){if(!e)return this;var t=this.getBoundingInfo();return this._currentLOD=this.sourceMesh.getLOD(e,t.boundingSphere),this._currentLOD===this.sourceMesh?this.sourceMesh:this._currentLOD},InstancedMesh.prototype._preActivateForIntermediateRendering=function(e){return this.sourceMesh._preActivateForIntermediateRendering(e)},InstancedMesh.prototype._syncSubMeshes=function(){if(this.releaseSubMeshes(),this._sourceMesh.subMeshes)for(var e=0;e<this._sourceMesh.subMeshes.length;e++)this._sourceMesh.subMeshes[e].clone(this,this._sourceMesh);return this},InstancedMesh.prototype._generatePointsArray=function(){return this._sourceMesh._generatePointsArray()},InstancedMesh.prototype._updateBoundingInfo=function(){var e=this;return this._boundingInfo?this._boundingInfo.update(e.worldMatrixFromCache):this._boundingInfo=new d["BoundingInfo"](this.absolutePosition,this.absolutePosition,e.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(e.worldMatrixFromCache),this},InstancedMesh.prototype.clone=function(e,t,r){void 0===t&&(t=null);var n=this._sourceMesh.createInstance(e);if(u["DeepCopier"].DeepCopy(this,n,["name","subMeshes","uniqueId","parent","lightSources","receiveShadows","material","visibility","skeleton","sourceMesh","isAnInstance","facetNb","isFacetDataEnabled","isBlocked","useBones","hasInstances","collider","edgesRenderer","forward","up","right","absolutePosition","absoluteScaling","absoluteRotationQuaternion","isWorldMatrixFrozen","nonUniformScaling","behaviors","worldMatrixFromCache","hasThinInstances"],[]),this.refreshBoundingInfo(),t&&(n.parent=t),!r)for(var i=0;i<this.getScene().meshes.length;i++){var o=this.getScene().meshes[i];o.parent===this&&o.clone(o.name,n)}return n.computeWorldMatrix(!0),n},InstancedMesh.prototype.dispose=function(t,r){void 0===r&&(r=!1),this._sourceMesh.removeInstance(this),e.prototype.dispose.call(this,t,r)},InstancedMesh}(s["AbstractMesh"]);a["Mesh"].prototype.edgesShareWithInstances=!1,a["Mesh"].prototype.registerInstancedBuffer=function(e,t){if(this.removeVerticesData(e),!this.instancedBuffers){this.instancedBuffers={};for(var r=0,n=this.instances;r<n.length;r++){var i=n[r];i.instancedBuffers={}}this._userInstancedBuffersStorage={data:{},vertexBuffers:{},strides:{},sizes:{}}}this.instancedBuffers[e]=null,this._userInstancedBuffersStorage.strides[e]=t,this._userInstancedBuffersStorage.sizes[e]=32*t,this._userInstancedBuffersStorage.data[e]=new Float32Array(this._userInstancedBuffersStorage.sizes[e]),this._userInstancedBuffersStorage.vertexBuffers[e]=new l["VertexBuffer"](this.getEngine(),this._userInstancedBuffersStorage.data[e],e,!0,!1,t,!0),this.setVerticesBuffer(this._userInstancedBuffersStorage.vertexBuffers[e]);for(var o=0,s=this.instances;o<s.length;o++){i=s[o];i.instancedBuffers[e]=null}},a["Mesh"].prototype._processInstancedBuffers=function(e,t){var r=e.length;for(var n in this.instancedBuffers){var i=this._userInstancedBuffersStorage.sizes[n],o=this._userInstancedBuffersStorage.strides[n],s=(r+1)*o;while(i<s)i*=2;this._userInstancedBuffersStorage.data[n].length!=i&&(this._userInstancedBuffersStorage.data[n]=new Float32Array(i),this._userInstancedBuffersStorage.sizes[n]=i,this._userInstancedBuffersStorage.vertexBuffers[n]&&(this._userInstancedBuffersStorage.vertexBuffers[n].dispose(),this._userInstancedBuffersStorage.vertexBuffers[n]=null));var a=this._userInstancedBuffersStorage.data[n],u=0;if(t){var c=this.instancedBuffers[n];c.toArray?c.toArray(a,u):c.copyToArray(a,u),u+=o}for(var d=0;d<r;d++){var h=e[d];c=h.instancedBuffers[n];c.toArray?c.toArray(a,u):c.copyToArray(a,u),u+=o}this._userInstancedBuffersStorage.vertexBuffers[n]?this._userInstancedBuffersStorage.vertexBuffers[n].updateDirectly(a,0):(this._userInstancedBuffersStorage.vertexBuffers[n]=new l["VertexBuffer"](this.getEngine(),this._userInstancedBuffersStorage.data[n],n,!0,!1,o,!0),this.setVerticesBuffer(this._userInstancedBuffersStorage.vertexBuffers[n]))}},a["Mesh"].prototype._disposeInstanceSpecificData=function(){this._instanceDataStorage.instancesBuffer&&(this._instanceDataStorage.instancesBuffer.dispose(),this._instanceDataStorage.instancesBuffer=null);while(this.instances.length)this.instances[0].dispose();for(var e in this.instancedBuffers)this._userInstancedBuffersStorage.vertexBuffers[e]&&this._userInstancedBuffersStorage.vertexBuffers[e].dispose();this.instancedBuffers={}}},"./node_modules/@babylonjs/core/Meshes/linesMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"LinesMesh",(function(){return d})),r.d(t,"InstancedLinesMesh",(function(){return h}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),a=r("./node_modules/@babylonjs/core/Meshes/instancedMesh.js"),u=r("./node_modules/@babylonjs/core/Materials/material.js"),c=r("./node_modules/@babylonjs/core/Materials/shaderMaterial.js"),l=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),d=(r("./node_modules/@babylonjs/core/Shaders/color.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/color.vertex.js"),function(e){function LinesMesh(t,r,n,s,a,u,l){void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=null);var d=e.call(this,t,r,n,s,a)||this;d.useVertexColor=u,d.useVertexAlpha=l,d.color=new i["Color3"](1,1,1),d.alpha=1,s&&(d.color=s.color.clone(),d.alpha=s.alpha,d.useVertexColor=s.useVertexColor,d.useVertexAlpha=s.useVertexAlpha),d.intersectionThreshold=.1;var h=[],f={attributes:[o["VertexBuffer"].PositionKind,"world0","world1","world2","world3"],uniforms:["vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","world","viewProjection"],needAlphaBlending:!0,defines:h};return!1===l&&(f.needAlphaBlending=!1),u?(f.defines.push("#define VERTEXCOLOR"),f.attributes.push(o["VertexBuffer"].ColorKind)):(f.uniforms.push("color"),d.color4=new i["Color4"]),d._colorShader=new c["ShaderMaterial"]("colorShader",d.getScene(),"color",f),d}return Object(n["__extends"])(LinesMesh,e),LinesMesh.prototype._addClipPlaneDefine=function(e){var t="#define "+e,r=this._colorShader.options.defines.indexOf(t);-1===r&&this._colorShader.options.defines.push(t)},LinesMesh.prototype._removeClipPlaneDefine=function(e){var t="#define "+e,r=this._colorShader.options.defines.indexOf(t);-1!==r&&this._colorShader.options.defines.splice(r,1)},LinesMesh.prototype.isReady=function(){var t=this.getScene();return t.clipPlane?this._addClipPlaneDefine("CLIPPLANE"):this._removeClipPlaneDefine("CLIPPLANE"),t.clipPlane2?this._addClipPlaneDefine("CLIPPLANE2"):this._removeClipPlaneDefine("CLIPPLANE2"),t.clipPlane3?this._addClipPlaneDefine("CLIPPLANE3"):this._removeClipPlaneDefine("CLIPPLANE3"),t.clipPlane4?this._addClipPlaneDefine("CLIPPLANE4"):this._removeClipPlaneDefine("CLIPPLANE4"),t.clipPlane5?this._addClipPlaneDefine("CLIPPLANE5"):this._removeClipPlaneDefine("CLIPPLANE5"),t.clipPlane6?this._addClipPlaneDefine("CLIPPLANE6"):this._removeClipPlaneDefine("CLIPPLANE6"),!!this._colorShader.isReady(this)&&e.prototype.isReady.call(this)},LinesMesh.prototype.getClassName=function(){return"LinesMesh"},Object.defineProperty(LinesMesh.prototype,"material",{get:function(){return this._colorShader},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(LinesMesh.prototype,"checkCollisions",{get:function(){return!1},enumerable:!1,configurable:!0}),LinesMesh.prototype._bind=function(e,t,r){if(!this._geometry)return this;var n=this._colorShader.getEffect(),i=this.isUnIndexed?null:this._geometry.getIndexBuffer();if(this._geometry._bind(n,i),!this.useVertexColor){var o=this.color,s=o.r,a=o.g,u=o.b;this.color4.set(s,a,u,this.alpha),this._colorShader.setColor4("color",this.color4)}return l["MaterialHelper"].BindClipPlane(n,this.getScene()),this},LinesMesh.prototype._draw=function(e,t,r){if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;var n=this.getScene().getEngine();return this._unIndexed?n.drawArraysType(u["Material"].LineListDrawMode,e.verticesStart,e.verticesCount,r):n.drawElementsType(u["Material"].LineListDrawMode,e.indexStart,e.indexCount,r),this},LinesMesh.prototype.dispose=function(t){this._colorShader.dispose(!1,!1,!0),e.prototype.dispose.call(this,t)},LinesMesh.prototype.clone=function(e,t,r){return void 0===t&&(t=null),new LinesMesh(e,this.getScene(),t,this,r)},LinesMesh.prototype.createInstance=function(e){return new h(e,this)},LinesMesh}(s["Mesh"])),h=function(e){function InstancedLinesMesh(t,r){var n=e.call(this,t,r)||this;return n.intersectionThreshold=r.intersectionThreshold,n}return Object(n["__extends"])(InstancedLinesMesh,e),InstancedLinesMesh.prototype.getClassName=function(){return"InstancedLinesMesh"},InstancedLinesMesh}(a["InstancedMesh"])},"./node_modules/@babylonjs/core/Meshes/mesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"_CreationDataStorage",(function(){return j})),r.d(t,"_InstancesBatch",(function(){return R})),r.d(t,"Mesh",(function(){return D}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/observable.js"),o=r("./node_modules/@babylonjs/core/Misc/tools.js"),s=r("./node_modules/@babylonjs/core/Misc/deepCopier.js"),a=r("./node_modules/@babylonjs/core/Misc/tags.js"),u=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),c=r("./node_modules/@babylonjs/core/Maths/math.color.js"),l=r("./node_modules/@babylonjs/core/node.js"),d=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),h=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),f=r("./node_modules/@babylonjs/core/Meshes/geometry.js"),p=r("./node_modules/@babylonjs/core/Meshes/abstractMesh.js"),m=r("./node_modules/@babylonjs/core/Meshes/subMesh.js"),_=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),g=r("./node_modules/@babylonjs/core/Materials/material.js"),b=r("./node_modules/@babylonjs/core/Materials/multiMaterial.js"),v=r("./node_modules/@babylonjs/core/Loading/sceneLoaderFlags.js"),M=r("./node_modules/@babylonjs/core/Misc/decorators.js"),T=r("./node_modules/@babylonjs/core/Misc/logger.js"),S=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),C=r("./node_modules/@babylonjs/core/Misc/devTools.js"),E=r("./node_modules/@babylonjs/core/sceneComponent.js"),P=r("./node_modules/@babylonjs/core/Meshes/meshLODLevel.js"),A=r("./node_modules/@babylonjs/core/Misc/canvasGenerator.js"),j=function(){function _CreationDataStorage(){}return _CreationDataStorage}(),O=function(){function _InstanceDataStorage(){this.visibleInstances={},this.batchCache=new R,this.instancesBufferSize=2048}return _InstanceDataStorage}(),R=function(){function _InstancesBatch(){this.mustReturn=!1,this.visibleInstances=new Array,this.renderSelf=new Array,this.hardwareInstancedRendering=new Array}return _InstancesBatch}(),I=function(){function _ThinInstanceDataStorage(){this.instancesCount=0,this.matrixBuffer=null,this.matrixBufferSize=512,this.boundingVectors=[],this.worldMatrices=null}return _ThinInstanceDataStorage}(),w=function(){function _InternalMeshDataInfo(){this._areNormalsFrozen=!1,this._source=null,this.meshMap=null,this._preActivateId=-1,this._LODLevels=new Array,this._morphTargetManager=null}return _InternalMeshDataInfo}(),D=function(e){function Mesh(t,r,n,i,o,u){void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===u&&(u=!0);var c=e.call(this,t,r)||this;if(c._internalMeshDataInfo=new w,c.delayLoadState=0,c.instances=new Array,c._creationDataStorage=null,c._geometry=null,c._instanceDataStorage=new O,c._thinInstanceDataStorage=new I,c._effectiveMaterial=null,c._shouldGenerateFlatShading=!1,c._originalBuilderSideOrientation=Mesh.DEFAULTSIDE,c.overrideMaterialSideOrientation=null,r=c.getScene(),i){if(i._geometry&&i._geometry.applyToMesh(c),s["DeepCopier"].DeepCopy(i,c,["name","material","skeleton","instances","parent","uniqueId","source","metadata","morphTargetManager","hasInstances","source","worldMatrixInstancedBuffer","hasLODLevels","geometry","isBlocked","areNormalsFrozen","facetNb","isFacetDataEnabled","lightSources","useBones","isAnInstance","collider","edgesRenderer","forward","up","right","absolutePosition","absoluteScaling","absoluteRotationQuaternion","isWorldMatrixFrozen","nonUniformScaling","behaviors","worldMatrixFromCache","hasThinInstances","cloneMeshMap"],["_poseMatrix"]),c._internalMeshDataInfo._source=i,r.useClonedMeshMap&&(i._internalMeshDataInfo.meshMap||(i._internalMeshDataInfo.meshMap={}),i._internalMeshDataInfo.meshMap[c.uniqueId]=c),c._originalBuilderSideOrientation=i._originalBuilderSideOrientation,c._creationDataStorage=i._creationDataStorage,i._ranges){var l=i._ranges;for(var t in l)l.hasOwnProperty(t)&&l[t]&&c.createAnimationRange(t,l[t].from,l[t].to)}var d;if(i.metadata&&i.metadata.clone?c.metadata=i.metadata.clone():c.metadata=i.metadata,a["Tags"]&&a["Tags"].HasTags(i)&&a["Tags"].AddTagsTo(c,a["Tags"].GetTags(i,!0)),c.setEnabled(i.isEnabled()),c.parent=i.parent,c.setPivotMatrix(i.getPivotMatrix()),c.id=t+"."+i.id,c.material=i.material,!o)for(var h=i.getDescendants(!0),f=0;f<h.length;f++){var p=h[f];p.clone&&p.clone(t+"."+p.name,c)}if(i.morphTargetManager&&(c.morphTargetManager=i.morphTargetManager),r.getPhysicsEngine){var m=r.getPhysicsEngine();if(u&&m){var _=m.getImpostorForPhysicsObject(i);_&&(c.physicsImpostor=_.clone(c))}}for(d=0;d<r.particleSystems.length;d++){var g=r.particleSystems[d];g.emitter===i&&g.clone(g.name,c)}c.refreshBoundingInfo(),c.computeWorldMatrix(!0)}return null!==n&&(c.parent=n),c._instanceDataStorage.hardwareInstancedRendering=c.getEngine().getCaps().instancedArrays,c}return Object(n["__extends"])(Mesh,e),Mesh._GetDefaultSideOrientation=function(e){return e||Mesh.FRONTSIDE},Object.defineProperty(Mesh.prototype,"computeBonesUsingShaders",{get:function(){return this._internalAbstractMeshDataInfo._computeBonesUsingShaders},set:function(e){this._internalAbstractMeshDataInfo._computeBonesUsingShaders!==e&&(e&&this._internalMeshDataInfo._sourcePositions&&(this.setVerticesData(d["VertexBuffer"].PositionKind,this._internalMeshDataInfo._sourcePositions.slice(),!0),this._internalMeshDataInfo._sourceNormals&&this.setVerticesData(d["VertexBuffer"].NormalKind,this._internalMeshDataInfo._sourceNormals.slice(),!0)),this._internalAbstractMeshDataInfo._computeBonesUsingShaders=e,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"onBeforeRenderObservable",{get:function(){return this._internalMeshDataInfo._onBeforeRenderObservable||(this._internalMeshDataInfo._onBeforeRenderObservable=new i["Observable"]),this._internalMeshDataInfo._onBeforeRenderObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"onBeforeBindObservable",{get:function(){return this._internalMeshDataInfo._onBeforeBindObservable||(this._internalMeshDataInfo._onBeforeBindObservable=new i["Observable"]),this._internalMeshDataInfo._onBeforeBindObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"onAfterRenderObservable",{get:function(){return this._internalMeshDataInfo._onAfterRenderObservable||(this._internalMeshDataInfo._onAfterRenderObservable=new i["Observable"]),this._internalMeshDataInfo._onAfterRenderObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"onBeforeDrawObservable",{get:function(){return this._internalMeshDataInfo._onBeforeDrawObservable||(this._internalMeshDataInfo._onBeforeDrawObservable=new i["Observable"]),this._internalMeshDataInfo._onBeforeDrawObservable},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"onBeforeDraw",{set:function(e){this._onBeforeDrawObserver&&this.onBeforeDrawObservable.remove(this._onBeforeDrawObserver),this._onBeforeDrawObserver=this.onBeforeDrawObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"hasInstances",{get:function(){return this.instances.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"hasThinInstances",{get:function(){var e;return(null!==(e=this._thinInstanceDataStorage.instancesCount)&&void 0!==e?e:0)>0},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"morphTargetManager",{get:function(){return this._internalMeshDataInfo._morphTargetManager},set:function(e){this._internalMeshDataInfo._morphTargetManager!==e&&(this._internalMeshDataInfo._morphTargetManager=e,this._syncGeometryWithMorphTargetManager())},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"source",{get:function(){return this._internalMeshDataInfo._source},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"cloneMeshMap",{get:function(){return this._internalMeshDataInfo.meshMap},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"isUnIndexed",{get:function(){return this._unIndexed},set:function(e){this._unIndexed!==e&&(this._unIndexed=e,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"worldMatrixInstancedBuffer",{get:function(){return this._instanceDataStorage.instancesData},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"manualUpdateOfWorldMatrixInstancedBuffer",{get:function(){return this._instanceDataStorage.manualUpdate},set:function(e){this._instanceDataStorage.manualUpdate=e},enumerable:!1,configurable:!0}),Mesh.prototype.instantiateHierarchy=function(e,t,r){void 0===e&&(e=null);var n=!(this.getTotalVertices()>0)||t&&t.doNotInstantiate?this.clone("Clone of "+(this.name||this.id),e||this.parent,!0):this.createInstance("instance of "+(this.name||this.id));n&&(n.parent=e||this.parent,n.position=this.position.clone(),n.scaling=this.scaling.clone(),this.rotationQuaternion?n.rotationQuaternion=this.rotationQuaternion.clone():n.rotation=this.rotation.clone(),r&&r(this,n));for(var i=0,o=this.getChildTransformNodes(!0);i<o.length;i++){var s=o[i];s.instantiateHierarchy(n,t,r)}return n},Mesh.prototype.getClassName=function(){return"Mesh"},Object.defineProperty(Mesh.prototype,"_isMesh",{get:function(){return!0},enumerable:!1,configurable:!0}),Mesh.prototype.toString=function(t){var r=e.prototype.toString.call(this,t);if(r+=", n vertices: "+this.getTotalVertices(),r+=", parent: "+(this._waitingParentId?this._waitingParentId:this.parent?this.parent.name:"NONE"),this.animations)for(var n=0;n<this.animations.length;n++)r+=", animation[0]: "+this.animations[n].toString(t);if(t)if(this._geometry){var i=this.getIndices(),o=this.getVerticesData(d["VertexBuffer"].PositionKind);o&&i&&(r+=", flat shading: "+(o.length/3===i.length?"YES":"NO"))}else r+=", flat shading: UNKNOWN";return r},Mesh.prototype._unBindEffect=function(){e.prototype._unBindEffect.call(this);for(var t=0,r=this.instances;t<r.length;t++){var n=r[t];n._unBindEffect()}},Object.defineProperty(Mesh.prototype,"hasLODLevels",{get:function(){return this._internalMeshDataInfo._LODLevels.length>0},enumerable:!1,configurable:!0}),Mesh.prototype.getLODLevels=function(){return this._internalMeshDataInfo._LODLevels},Mesh.prototype._sortLODLevels=function(){this._internalMeshDataInfo._LODLevels.sort((function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}))},Mesh.prototype.addLODLevel=function(e,t){if(t&&t._masterMesh)return T["Logger"].Warn("You cannot use a mesh as LOD level twice"),this;var r=new P["MeshLODLevel"](e,t);return this._internalMeshDataInfo._LODLevels.push(r),t&&(t._masterMesh=this),this._sortLODLevels(),this},Mesh.prototype.getLODLevelAtDistance=function(e){for(var t=this._internalMeshDataInfo,r=0;r<t._LODLevels.length;r++){var n=t._LODLevels[r];if(n.distance===e)return n.mesh}return null},Mesh.prototype.removeLODLevel=function(e){for(var t=this._internalMeshDataInfo,r=0;r<t._LODLevels.length;r++)t._LODLevels[r].mesh===e&&(t._LODLevels.splice(r,1),e&&(e._masterMesh=null));return this._sortLODLevels(),this},Mesh.prototype.getLOD=function(e,t){var r,n=this._internalMeshDataInfo;if(!n._LODLevels||0===n._LODLevels.length)return this;if(t)r=t;else{var i=this.getBoundingInfo();r=i.boundingSphere}var o=r.centerWorld.subtract(e.globalPosition).length();if(n._LODLevels[n._LODLevels.length-1].distance>o)return this.onLODLevelSelection&&this.onLODLevelSelection(o,this,this),this;for(var s=0;s<n._LODLevels.length;s++){var a=n._LODLevels[s];if(a.distance<o){if(a.mesh){if(4===a.mesh.delayLoadState)return a.mesh._checkDelayState(),this;if(2===a.mesh.delayLoadState)return this;a.mesh._preActivate(),a.mesh._updateSubMeshesBoundingInfo(this.worldMatrixFromCache)}return this.onLODLevelSelection&&this.onLODLevelSelection(o,this,a.mesh),a.mesh}}return this.onLODLevelSelection&&this.onLODLevelSelection(o,this,this),this},Object.defineProperty(Mesh.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Mesh.prototype.getTotalVertices=function(){return null===this._geometry||void 0===this._geometry?0:this._geometry.getTotalVertices()},Mesh.prototype.getVerticesData=function(e,t,r){return this._geometry?this._geometry.getVerticesData(e,t,r):null},Mesh.prototype.getVertexBuffer=function(e){return this._geometry?this._geometry.getVertexBuffer(e):null},Mesh.prototype.isVerticesDataPresent=function(e){return this._geometry?this._geometry.isVerticesDataPresent(e):!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},Mesh.prototype.isVertexBufferUpdatable=function(e){return this._geometry?this._geometry.isVertexBufferUpdatable(e):!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},Mesh.prototype.getVerticesDataKinds=function(){if(!this._geometry){var e=new Array;return this._delayInfo&&this._delayInfo.forEach((function(t){e.push(t)})),e}return this._geometry.getVerticesDataKinds()},Mesh.prototype.getTotalIndices=function(){return this._geometry?this._geometry.getTotalIndices():0},Mesh.prototype.getIndices=function(e,t){return this._geometry?this._geometry.getIndices(e,t):[]},Object.defineProperty(Mesh.prototype,"isBlocked",{get:function(){return null!==this._masterMesh&&void 0!==this._masterMesh},enumerable:!1,configurable:!0}),Mesh.prototype.isReady=function(t,r){var n,i,o,s,a,u;if(void 0===t&&(t=!1),void 0===r&&(r=!1),2===this.delayLoadState)return!1;if(!e.prototype.isReady.call(this,t))return!1;if(!this.subMeshes||0===this.subMeshes.length)return!0;if(!t)return!0;var c=this.getEngine(),l=this.getScene(),d=r||c.getCaps().instancedArrays&&(this.instances.length>0||this.hasThinInstances);this.computeWorldMatrix();var h=this.material||l.defaultMaterial;if(h)if(h._storeEffectOnSubMeshes)for(var f=0,p=this.subMeshes;f<p.length;f++){var m=p[f],_=m.getMaterial();if(_)if(_._storeEffectOnSubMeshes){if(!_.isReadyForSubMesh(this,m,d))return!1}else if(!_.isReady(this,d))return!1}else if(!h.isReady(this,d))return!1;for(var g=0,b=this.lightSources;g<b.length;g++){var v=b[g],M=v.getShadowGenerator();if(M&&(!(null===(n=M.getShadowMap())||void 0===n?void 0:n.renderList)||(null===(i=M.getShadowMap())||void 0===i?void 0:i.renderList)&&-1!==(null===(s=null===(o=M.getShadowMap())||void 0===o?void 0:o.renderList)||void 0===s?void 0:s.indexOf(this))))for(var T=0,S=this.subMeshes;T<S.length;T++){m=S[T];if(!M.isReady(m,d,null!==(u=null===(a=m.getMaterial())||void 0===a?void 0:a.needAlphaBlendingForMesh(this))&&void 0!==u&&u))return!1}}for(var C=0,E=this._internalMeshDataInfo._LODLevels;C<E.length;C++){var P=E[C];if(P.mesh&&!P.mesh.isReady(d))return!1}return!0},Object.defineProperty(Mesh.prototype,"areNormalsFrozen",{get:function(){return this._internalMeshDataInfo._areNormalsFrozen},enumerable:!1,configurable:!0}),Mesh.prototype.freezeNormals=function(){return this._internalMeshDataInfo._areNormalsFrozen=!0,this},Mesh.prototype.unfreezeNormals=function(){return this._internalMeshDataInfo._areNormalsFrozen=!1,this},Object.defineProperty(Mesh.prototype,"overridenInstanceCount",{set:function(e){this._instanceDataStorage.overridenInstanceCount=e},enumerable:!1,configurable:!0}),Mesh.prototype._preActivate=function(){var e=this._internalMeshDataInfo,t=this.getScene().getRenderId();return e._preActivateId===t||(e._preActivateId=t,this._instanceDataStorage.visibleInstances=null),this},Mesh.prototype._preActivateForIntermediateRendering=function(e){return this._instanceDataStorage.visibleInstances&&(this._instanceDataStorage.visibleInstances.intermediateDefaultRenderId=e),this},Mesh.prototype._registerInstanceForRenderId=function(e,t){return this._instanceDataStorage.visibleInstances||(this._instanceDataStorage.visibleInstances={defaultRenderId:t,selfDefaultRenderId:this._renderId}),this._instanceDataStorage.visibleInstances[t]||(void 0!==this._instanceDataStorage.previousRenderId&&this._instanceDataStorage.isFrozen&&(this._instanceDataStorage.visibleInstances[this._instanceDataStorage.previousRenderId]=null),this._instanceDataStorage.previousRenderId=t,this._instanceDataStorage.visibleInstances[t]=new Array),this._instanceDataStorage.visibleInstances[t].push(e),this},Mesh.prototype._afterComputeWorldMatrix=function(){e.prototype._afterComputeWorldMatrix.call(this),this.hasThinInstances&&(this.doNotSyncBoundingInfo||this.thinInstanceRefreshBoundingInfo(!1))},Mesh.prototype._postActivate=function(){this.edgesShareWithInstances&&this.edgesRenderer&&this.edgesRenderer.isEnabled&&this._renderingGroup&&(this._renderingGroup._edgesRenderers.pushNoDuplicate(this.edgesRenderer),this.edgesRenderer.customInstances.push(this.getWorldMatrix()))},Mesh.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked)return this;var t=this.geometry?this.geometry.boundingBias:null;return this._refreshBoundingInfo(this._getPositionData(e),t),this},Mesh.prototype._createGlobalSubMesh=function(e){var t=this.getTotalVertices();if(!t||!this.getIndices())return null;if(this.subMeshes&&this.subMeshes.length>0){var r=this.getIndices();if(!r)return null;var n=r.length,i=!1;if(e)i=!0;else for(var o=0,s=this.subMeshes;o<s.length;o++){var a=s[o];if(a.indexStart+a.indexCount>n){i=!0;break}if(a.verticesStart+a.verticesCount>t){i=!0;break}}if(!i)return this.subMeshes[0]}return this.releaseSubMeshes(),new m["SubMesh"](0,0,t,0,this.getTotalIndices(),this)},Mesh.prototype.subdivide=function(e){if(!(e<1)){var t=this.getTotalIndices(),r=t/e|0,n=0;while(r%3!==0)r++;this.releaseSubMeshes();for(var i=0;i<e;i++){if(n>=t)break;m["SubMesh"].CreateFromIndices(0,n,i===e-1?t-n:r,this),n+=r}this.synchronizeInstances()}},Mesh.prototype.setVerticesData=function(e,t,r,n){if(void 0===r&&(r=!1),this._geometry)this._geometry.setVerticesData(e,t,r,n);else{var i=new h["VertexData"];i.set(t,e);var o=this.getScene();new f["Geometry"](f["Geometry"].RandomId(),o,i,r,this)}return this},Mesh.prototype.removeVerticesData=function(e){this._geometry&&this._geometry.removeVerticesData(e)},Mesh.prototype.markVerticesDataAsUpdatable=function(e,t){void 0===t&&(t=!0);var r=this.getVertexBuffer(e);r&&r.isUpdatable()!==t&&this.setVerticesData(e,this.getVerticesData(e),t)},Mesh.prototype.setVerticesBuffer=function(e){return this._geometry||(this._geometry=f["Geometry"].CreateGeometryForMesh(this)),this._geometry.setVerticesBuffer(e),this},Mesh.prototype.updateVerticesData=function(e,t,r,n){return this._geometry?(n?(this.makeGeometryUnique(),this.updateVerticesData(e,t,r,!1)):this._geometry.updateVerticesData(e,t,r),this):this},Mesh.prototype.updateMeshPositions=function(e,t){void 0===t&&(t=!0);var r=this.getVerticesData(d["VertexBuffer"].PositionKind);if(!r)return this;if(e(r),this.updateVerticesData(d["VertexBuffer"].PositionKind,r,!1,!1),t){var n=this.getIndices(),i=this.getVerticesData(d["VertexBuffer"].NormalKind);if(!i)return this;h["VertexData"].ComputeNormals(r,n,i),this.updateVerticesData(d["VertexBuffer"].NormalKind,i,!1,!1)}return this},Mesh.prototype.makeGeometryUnique=function(){if(!this._geometry)return this;if(1===this._geometry.meshes.length)return this;var e=this._geometry,t=this._geometry.copy(f["Geometry"].RandomId());return e.releaseForMesh(this,!0),t.applyToMesh(this),this},Mesh.prototype.setIndices=function(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=!1),this._geometry)this._geometry.setIndices(e,t,r);else{var n=new h["VertexData"];n.indices=e;var i=this.getScene();new f["Geometry"](f["Geometry"].RandomId(),i,n,r,this)}return this},Mesh.prototype.updateIndices=function(e,t,r){return void 0===r&&(r=!1),this._geometry?(this._geometry.updateIndices(e,t,r),this):this},Mesh.prototype.toLeftHanded=function(){return this._geometry?(this._geometry.toLeftHanded(),this):this},Mesh.prototype._bind=function(e,t,r){if(!this._geometry)return this;var n,i=this.getScene().getEngine();if(this._unIndexed)n=null;else switch(r){case g["Material"].PointFillMode:n=null;break;case g["Material"].WireFrameFillMode:n=e._getLinesIndexBuffer(this.getIndices(),i);break;default:case g["Material"].TriangleFillMode:n=this._geometry.getIndexBuffer();break}return this._geometry._bind(t,n),this},Mesh.prototype._draw=function(e,t,r){if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;this._internalMeshDataInfo._onBeforeDrawObservable&&this._internalMeshDataInfo._onBeforeDrawObservable.notifyObservers(this);var n=this.getScene(),i=n.getEngine();return this._unIndexed||t==g["Material"].PointFillMode?i.drawArraysType(t,e.verticesStart,e.verticesCount,r):t==g["Material"].WireFrameFillMode?i.drawElementsType(t,0,e._linesIndexCount,r):i.drawElementsType(t,e.indexStart,e.indexCount,r),this},Mesh.prototype.registerBeforeRender=function(e){return this.onBeforeRenderObservable.add(e),this},Mesh.prototype.unregisterBeforeRender=function(e){return this.onBeforeRenderObservable.removeCallback(e),this},Mesh.prototype.registerAfterRender=function(e){return this.onAfterRenderObservable.add(e),this},Mesh.prototype.unregisterAfterRender=function(e){return this.onAfterRenderObservable.removeCallback(e),this},Mesh.prototype._getInstancesRenderList=function(e,t){if(void 0===t&&(t=!1),this._instanceDataStorage.isFrozen&&this._instanceDataStorage.previousBatch)return this._instanceDataStorage.previousBatch;var r=this.getScene(),n=r._isInIntermediateRendering(),i=n?this._internalAbstractMeshDataInfo._onlyForInstancesIntermediate:this._internalAbstractMeshDataInfo._onlyForInstances,o=this._instanceDataStorage.batchCache;if(o.mustReturn=!1,o.renderSelf[e]=t||!i&&this.isEnabled()&&this.isVisible,o.visibleInstances[e]=null,this._instanceDataStorage.visibleInstances&&!t){var s=this._instanceDataStorage.visibleInstances,a=r.getRenderId(),u=n?s.intermediateDefaultRenderId:s.defaultRenderId;o.visibleInstances[e]=s[a],!o.visibleInstances[e]&&u&&(o.visibleInstances[e]=s[u])}return o.hardwareInstancedRendering[e]=!t&&this._instanceDataStorage.hardwareInstancedRendering&&null!==o.visibleInstances[e]&&void 0!==o.visibleInstances[e],this._instanceDataStorage.previousBatch=o,o},Mesh.prototype._renderWithInstances=function(e,t,r,n,i){var o=r.visibleInstances[e._id];if(!o)return this;var s=this._instanceDataStorage,a=s.instancesBufferSize,u=s.instancesBuffer,c=o.length+1,l=16*c*4;while(s.instancesBufferSize<l)s.instancesBufferSize*=2;s.instancesData&&a==s.instancesBufferSize||(s.instancesData=new Float32Array(s.instancesBufferSize/4));var h=0,f=0,p=r.renderSelf[e._id],m=!u||a!==s.instancesBufferSize;if(this._instanceDataStorage.manualUpdate||s.isFrozen&&!m)f=(p?1:0)+o.length;else{var _=this._effectiveMesh.getWorldMatrix();if(p&&(_.copyToArray(s.instancesData,h),h+=16,f++),o)for(var g=0;g<o.length;g++){var b=o[g];b.getWorldMatrix().copyToArray(s.instancesData,h),h+=16,f++}}return m?(u&&u.dispose(),u=new d["Buffer"](i,s.instancesData,!0,16,!1,!0),s.instancesBuffer=u,this.setVerticesBuffer(u.createVertexBuffer("world0",0,4)),this.setVerticesBuffer(u.createVertexBuffer("world1",4,4)),this.setVerticesBuffer(u.createVertexBuffer("world2",8,4)),this.setVerticesBuffer(u.createVertexBuffer("world3",12,4))):this._instanceDataStorage.isFrozen||u.updateDirectly(s.instancesData,0,f),this._processInstancedBuffers(o,p),this.getScene()._activeIndices.addCount(e.indexCount*f,!1),this._bind(e,n,t),this._draw(e,t,f),i.unbindInstanceAttributes(),this},Mesh.prototype._renderWithThinInstances=function(e,t,r,n){var i,o,s=null!==(o=null===(i=this._thinInstanceDataStorage)||void 0===i?void 0:i.instancesCount)&&void 0!==o?o:0;this.getScene()._activeIndices.addCount(e.indexCount*s,!1),this._bind(e,r,t),this._draw(e,t,s),n.unbindInstanceAttributes()},Mesh.prototype._processInstancedBuffers=function(e,t){},Mesh.prototype._processRendering=function(e,t,r,n,i,o,s,a){var u=this.getScene(),c=u.getEngine();if(o&&t.getRenderingMesh().hasThinInstances)return this._renderWithThinInstances(t,n,r,c),this;if(o)this._renderWithInstances(t,n,i,r,c);else{var l=0;i.renderSelf[t._id]&&(s&&s(!1,e._effectiveMesh.getWorldMatrix(),a),l++,this._draw(t,n,this._instanceDataStorage.overridenInstanceCount));var d=i.visibleInstances[t._id];if(d){var h=d.length;l+=h;for(var f=0;f<h;f++){var p=d[f],m=p.getWorldMatrix();s&&s(!0,m,a),this._draw(t,n)}}u._activeIndices.addCount(t.indexCount*l,!1)}return this},Mesh.prototype._rebuild=function(){this._instanceDataStorage.instancesBuffer&&(this._instanceDataStorage.instancesBuffer.dispose(),this._instanceDataStorage.instancesBuffer=null),e.prototype._rebuild.call(this)},Mesh.prototype._freeze=function(){if(this.subMeshes){for(var e=0;e<this.subMeshes.length;e++)this._getInstancesRenderList(e);this._effectiveMaterial=null,this._instanceDataStorage.isFrozen=!0}},Mesh.prototype._unFreeze=function(){this._instanceDataStorage.isFrozen=!1,this._instanceDataStorage.previousBatch=null},Mesh.prototype.render=function(e,t,r){var n=this.getScene();if(this._internalAbstractMeshDataInfo._isActiveIntermediate?this._internalAbstractMeshDataInfo._isActiveIntermediate=!1:this._internalAbstractMeshDataInfo._isActive=!1,this._checkOcclusionQuery())return this;var i=this._getInstancesRenderList(e._id,!!r);if(i.mustReturn)return this;if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;this._internalMeshDataInfo._onBeforeRenderObservable&&this._internalMeshDataInfo._onBeforeRenderObservable.notifyObservers(this);var o,s=n.getEngine(),a=i.hardwareInstancedRendering[e._id]||e.getRenderingMesh().hasThinInstances,u=this._instanceDataStorage,c=e.getMaterial();if(!c)return this;if(!u.isFrozen||!this._effectiveMaterial||this._effectiveMaterial!==c){if(c._storeEffectOnSubMeshes){if(!c.isReadyForSubMesh(this,e,a))return this}else if(!c.isReady(this,a))return this;this._effectiveMaterial=c}t&&s.setAlphaMode(this._effectiveMaterial.alphaMode),o=this._effectiveMaterial._storeEffectOnSubMeshes?e.effect:this._effectiveMaterial.getEffect();for(var l=0,d=n._beforeRenderingMeshStage;l<d.length;l++){var h=d[l];h.action(this,e,i,o)}if(!o)return this;var f,p=r||this._effectiveMesh;if(u.isFrozen||!this._effectiveMaterial.backFaceCulling&&null===this.overrideMaterialSideOrientation)f=u.sideOrientation;else{var m=p._getWorldMatrixDeterminant();f=this.overrideMaterialSideOrientation,null==f&&(f=this._effectiveMaterial.sideOrientation),m<0&&(f=f===g["Material"].ClockWiseSideOrientation?g["Material"].CounterClockWiseSideOrientation:g["Material"].ClockWiseSideOrientation),u.sideOrientation=f}var _=this._effectiveMaterial._preBind(o,f);this._effectiveMaterial.forceDepthWrite&&s.setDepthWrite(!0);var b=n.forcePointsCloud?g["Material"].PointFillMode:n.forceWireframe?g["Material"].WireFrameFillMode:this._effectiveMaterial.fillMode;this._internalMeshDataInfo._onBeforeBindObservable&&this._internalMeshDataInfo._onBeforeBindObservable.notifyObservers(this),a||this._bind(e,o,b);var v=p.getWorldMatrix();this._effectiveMaterial._storeEffectOnSubMeshes?this._effectiveMaterial.bindForSubMesh(v,this,e):this._effectiveMaterial.bind(v,this),!this._effectiveMaterial.backFaceCulling&&this._effectiveMaterial.separateCullingPass&&(s.setState(!0,this._effectiveMaterial.zOffset,!1,!_),this._processRendering(this,e,o,b,i,a,this._onBeforeDraw,this._effectiveMaterial),s.setState(!0,this._effectiveMaterial.zOffset,!1,_)),this._processRendering(this,e,o,b,i,a,this._onBeforeDraw,this._effectiveMaterial),this._effectiveMaterial.unbind();for(var M=0,T=n._afterRenderingMeshStage;M<T.length;M++){h=T[M];h.action(this,e,i,o)}return this._internalMeshDataInfo._onAfterRenderObservable&&this._internalMeshDataInfo._onAfterRenderObservable.notifyObservers(this),this},Mesh.prototype._onBeforeDraw=function(e,t,r){e&&r&&r.bindOnlyWorldMatrix(t)},Mesh.prototype.cleanMatrixWeights=function(){this.isVerticesDataPresent(d["VertexBuffer"].MatricesWeightsKind)&&(this.isVerticesDataPresent(d["VertexBuffer"].MatricesWeightsExtraKind)?this.normalizeSkinWeightsAndExtra():this.normalizeSkinFourWeights())},Mesh.prototype.normalizeSkinFourWeights=function(){for(var e=this.getVerticesData(d["VertexBuffer"].MatricesWeightsKind),t=e.length,r=0;r<t;r+=4){var n=e[r]+e[r+1]+e[r+2]+e[r+3];if(0===n)e[r]=1;else{var i=1/n;e[r]*=i,e[r+1]*=i,e[r+2]*=i,e[r+3]*=i}}this.setVerticesData(d["VertexBuffer"].MatricesWeightsKind,e)},Mesh.prototype.normalizeSkinWeightsAndExtra=function(){for(var e=this.getVerticesData(d["VertexBuffer"].MatricesWeightsExtraKind),t=this.getVerticesData(d["VertexBuffer"].MatricesWeightsKind),r=t.length,n=0;n<r;n+=4){var i=t[n]+t[n+1]+t[n+2]+t[n+3];if(i+=e[n]+e[n+1]+e[n+2]+e[n+3],0===i)t[n]=1;else{var o=1/i;t[n]*=o,t[n+1]*=o,t[n+2]*=o,t[n+3]*=o,e[n]*=o,e[n+1]*=o,e[n+2]*=o,e[n+3]*=o}}this.setVerticesData(d["VertexBuffer"].MatricesWeightsKind,t),this.setVerticesData(d["VertexBuffer"].MatricesWeightsKind,e)},Mesh.prototype.validateSkinning=function(){var e=this.getVerticesData(d["VertexBuffer"].MatricesWeightsExtraKind),t=this.getVerticesData(d["VertexBuffer"].MatricesWeightsKind);if(null===t||null==this.skeleton)return{skinned:!1,valid:!0,report:"not skinned"};for(var r=t.length,n=0,i=0,o=0,s=0,a=null===e?4:8,u=new Array,c=0;c<=a;c++)u[c]=0;var l=.001;for(c=0;c<r;c+=4){for(var h=t[c],f=h,p=0===f?0:1,m=1;m<a;m++){var _=m<4?t[c+m]:e[c+m-4];_>h&&n++,0!==_&&p++,f+=_,h=_}if(u[p]++,p>o&&(o=p),0===f)i++;else{var g=1/f,b=0;for(m=0;m<a;m++)b+=m<4?Math.abs(t[c+m]-t[c+m]*g):Math.abs(e[c+m-4]-e[c+m-4]*g);b>l&&s++}}var v=this.skeleton.bones.length,M=this.getVerticesData(d["VertexBuffer"].MatricesIndicesKind),T=this.getVerticesData(d["VertexBuffer"].MatricesIndicesExtraKind),S=0;for(c=0;c<r;c+=4)for(m=0;m<a;m++){var C=m<4?M[c+m]:T[c+m-4];(C>=v||C<0)&&S++}var E="Number of Weights = "+r/4+"\nMaximum influences = "+o+"\nMissing Weights = "+i+"\nNot Sorted = "+n+"\nNot Normalized = "+s+"\nWeightCounts = ["+u+"]\nNumber of bones = "+v+"\nBad Bone Indices = "+S;return{skinned:!0,valid:0===i&&0===s&&0===S,report:E}},Mesh.prototype._checkDelayState=function(){var e=this.getScene();return this._geometry?this._geometry.load(e):4===this.delayLoadState&&(this.delayLoadState=2,this._queueLoad(e)),this},Mesh.prototype._queueLoad=function(e){var t=this;e._addPendingData(this);var r=-1!==this.delayLoadingFile.indexOf(".babylonbinarymeshdata");return o["Tools"].LoadFile(this.delayLoadingFile,(function(r){r instanceof ArrayBuffer?t._delayLoadingFunction(r,t):t._delayLoadingFunction(JSON.parse(r),t),t.instances.forEach((function(e){e.refreshBoundingInfo(),e._syncSubMeshes()})),t.delayLoadState=1,e._removePendingData(t)}),(function(){}),e.offlineProvider,r),this},Mesh.prototype.isInFrustum=function(t){return 2!==this.delayLoadState&&(!!e.prototype.isInFrustum.call(this,t)&&(this._checkDelayState(),!0))},Mesh.prototype.setMaterialByID=function(e){var t,r=this.getScene().materials;for(t=r.length-1;t>-1;t--)if(r[t].id===e)return this.material=r[t],this;var n=this.getScene().multiMaterials;for(t=n.length-1;t>-1;t--)if(n[t].id===e)return this.material=n[t],this;return this},Mesh.prototype.getAnimatables=function(){var e=new Array;return this.material&&e.push(this.material),this.skeleton&&e.push(this.skeleton),e},Mesh.prototype.bakeTransformIntoVertices=function(e){if(!this.isVerticesDataPresent(d["VertexBuffer"].PositionKind))return this;var t=this.subMeshes.splice(0);this._resetPointsArrayCache();var r,n=this.getVerticesData(d["VertexBuffer"].PositionKind),i=new Array;for(r=0;r<n.length;r+=3)u["Vector3"].TransformCoordinates(u["Vector3"].FromArray(n,r),e).toArray(i,r);if(this.setVerticesData(d["VertexBuffer"].PositionKind,i,this.getVertexBuffer(d["VertexBuffer"].PositionKind).isUpdatable()),this.isVerticesDataPresent(d["VertexBuffer"].NormalKind)){for(n=this.getVerticesData(d["VertexBuffer"].NormalKind),i=[],r=0;r<n.length;r+=3)u["Vector3"].TransformNormal(u["Vector3"].FromArray(n,r),e).normalize().toArray(i,r);this.setVerticesData(d["VertexBuffer"].NormalKind,i,this.getVertexBuffer(d["VertexBuffer"].NormalKind).isUpdatable())}return e.m[0]*e.m[5]*e.m[10]<0&&this.flipFaces(),this.releaseSubMeshes(),this.subMeshes=t,this},Mesh.prototype.bakeCurrentTransformIntoVertices=function(e){return void 0===e&&(e=!0),this.bakeTransformIntoVertices(this.computeWorldMatrix(!0)),this.resetLocalMatrix(e),this},Object.defineProperty(Mesh.prototype,"_positions",{get:function(){return this._geometry?this._geometry._positions:null},enumerable:!1,configurable:!0}),Mesh.prototype._resetPointsArrayCache=function(){return this._geometry&&this._geometry._resetPointsArrayCache(),this},Mesh.prototype._generatePointsArray=function(){return!!this._geometry&&this._geometry._generatePointsArray()},Mesh.prototype.clone=function(e,t,r,n){return void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=!0),new Mesh(e,this.getScene(),t,this,r,n)},Mesh.prototype.dispose=function(t,r){void 0===r&&(r=!1),this.morphTargetManager=null,this._geometry&&this._geometry.releaseForMesh(this,!0);var n=this._internalMeshDataInfo;if(n._onBeforeDrawObservable&&n._onBeforeDrawObservable.clear(),n._onBeforeBindObservable&&n._onBeforeBindObservable.clear(),n._onBeforeRenderObservable&&n._onBeforeRenderObservable.clear(),n._onAfterRenderObservable&&n._onAfterRenderObservable.clear(),this._scene.useClonedMeshMap){if(n.meshMap)for(var i in n.meshMap){var o=n.meshMap[i];o&&(o._internalMeshDataInfo._source=null,n.meshMap[i]=void 0)}n._source&&n._source._internalMeshDataInfo.meshMap&&(n._source._internalMeshDataInfo.meshMap[this.uniqueId]=void 0)}else for(var s=this.getScene().meshes,a=0,u=s;a<u.length;a++){var c=u[a];o=c;o._internalMeshDataInfo&&o._internalMeshDataInfo._source&&o._internalMeshDataInfo._source===this&&(o._internalMeshDataInfo._source=null)}n._source=null,this._disposeInstanceSpecificData(),this._disposeThinInstanceSpecificData(),e.prototype.dispose.call(this,t,r)},Mesh.prototype._disposeInstanceSpecificData=function(){},Mesh.prototype._disposeThinInstanceSpecificData=function(){},Mesh.prototype.applyDisplacementMap=function(e,t,r,n,i,s,a){var u=this;void 0===a&&(a=!1);var c=this.getScene(),onload=function(e){var o=e.width,c=e.height,l=A["CanvasGenerator"].CreateCanvas(o,c),d=l.getContext("2d");d.drawImage(e,0,0);var h=d.getImageData(0,0,o,c).data;u.applyDisplacementMapFromBuffer(h,o,c,t,r,i,s,a),n&&n(u)};return o["Tools"].LoadImage(e,onload,(function(){}),c.offlineProvider),this},Mesh.prototype.applyDisplacementMapFromBuffer=function(e,t,r,n,i,o,s,a){if(void 0===a&&(a=!1),!this.isVerticesDataPresent(d["VertexBuffer"].PositionKind)||!this.isVerticesDataPresent(d["VertexBuffer"].NormalKind)||!this.isVerticesDataPresent(d["VertexBuffer"].UVKind))return T["Logger"].Warn("Cannot call applyDisplacementMap: Given mesh is not complete. Position, Normal or UV are missing"),this;var c=this.getVerticesData(d["VertexBuffer"].PositionKind,!0,!0),l=this.getVerticesData(d["VertexBuffer"].NormalKind),f=this.getVerticesData(d["VertexBuffer"].UVKind),p=u["Vector3"].Zero(),m=u["Vector3"].Zero(),_=u["Vector2"].Zero();o=o||u["Vector2"].Zero(),s=s||new u["Vector2"](1,1);for(var g=0;g<c.length;g+=3){u["Vector3"].FromArrayToRef(c,g,p),u["Vector3"].FromArrayToRef(l,g,m),u["Vector2"].FromArrayToRef(f,g/3*2,_);var b=Math.abs(_.x*s.x+o.x%1)*(t-1)%t|0,v=Math.abs(_.y*s.y+o.y%1)*(r-1)%r|0,M=4*(b+v*t),S=e[M]/255,C=e[M+1]/255,E=e[M+2]/255,P=.3*S+.59*C+.11*E;m.normalize(),m.scaleInPlace(n+(i-n)*P),p=p.add(m),p.toArray(c,g)}return h["VertexData"].ComputeNormals(c,this.getIndices(),l),a?(this.setVerticesData(d["VertexBuffer"].PositionKind,c),this.setVerticesData(d["VertexBuffer"].NormalKind,l)):(this.updateVerticesData(d["VertexBuffer"].PositionKind,c),this.updateVerticesData(d["VertexBuffer"].NormalKind,l)),this},Mesh.prototype.convertToFlatShadedMesh=function(){var e,t,r=this.getVerticesDataKinds(),n={},i={},o={},s=!1;for(e=0;e<r.length;e++){t=r[e];var a=this.getVertexBuffer(t);t!==d["VertexBuffer"].NormalKind?(n[t]=a,i[t]=n[t].getData(),o[t]=[]):(s=a.isUpdatable(),r.splice(e,1),e--)}var c,l=this.subMeshes.slice(0),h=this.getIndices(),f=this.getTotalIndices();for(c=0;c<f;c++){var p=h[c];for(e=0;e<r.length;e++){t=r[e];for(var _=n[t].getStrideSize(),g=0;g<_;g++)o[t].push(i[t][p*_+g])}}var b=[],v=o[d["VertexBuffer"].PositionKind];for(c=0;c<f;c+=3){h[c]=c,h[c+1]=c+1,h[c+2]=c+2;for(var M=u["Vector3"].FromArray(v,3*c),T=u["Vector3"].FromArray(v,3*(c+1)),S=u["Vector3"].FromArray(v,3*(c+2)),C=M.subtract(T),E=S.subtract(T),P=u["Vector3"].Normalize(u["Vector3"].Cross(C,E)),A=0;A<3;A++)b.push(P.x),b.push(P.y),b.push(P.z)}for(this.setIndices(h),this.setVerticesData(d["VertexBuffer"].NormalKind,b,s),e=0;e<r.length;e++)t=r[e],this.setVerticesData(t,o[t],n[t].isUpdatable());this.releaseSubMeshes();for(var j=0;j<l.length;j++){var O=l[j];m["SubMesh"].AddToMesh(O.materialIndex,O.indexStart,O.indexCount,O.indexStart,O.indexCount,this)}return this.synchronizeInstances(),this},Mesh.prototype.convertToUnIndexedMesh=function(){var e,t,r=this.getVerticesDataKinds(),n={},i={},o={};for(e=0;e<r.length;e++){t=r[e];var s=this.getVertexBuffer(t);n[t]=s,i[t]=n[t].getData(),o[t]=[]}var a,u=this.subMeshes.slice(0),c=this.getIndices(),l=this.getTotalIndices();for(a=0;a<l;a++){var d=c[a];for(e=0;e<r.length;e++){t=r[e];for(var h=n[t].getStrideSize(),f=0;f<h;f++)o[t].push(i[t][d*h+f])}}for(a=0;a<l;a+=3)c[a]=a,c[a+1]=a+1,c[a+2]=a+2;for(this.setIndices(c),e=0;e<r.length;e++)t=r[e],this.setVerticesData(t,o[t],n[t].isUpdatable());this.releaseSubMeshes();for(var p=0;p<u.length;p++){var _=u[p];m["SubMesh"].AddToMesh(_.materialIndex,_.indexStart,_.indexCount,_.indexStart,_.indexCount,this)}return this._unIndexed=!0,this.synchronizeInstances(),this},Mesh.prototype.flipFaces=function(e){void 0===e&&(e=!1);var t,r,n=h["VertexData"].ExtractFromMesh(this);if(e&&this.isVerticesDataPresent(d["VertexBuffer"].NormalKind)&&n.normals)for(t=0;t<n.normals.length;t++)n.normals[t]*=-1;if(n.indices)for(t=0;t<n.indices.length;t+=3)r=n.indices[t+1],n.indices[t+1]=n.indices[t+2],n.indices[t+2]=r;return n.applyToMesh(this,this.isVertexBufferUpdatable(d["VertexBuffer"].PositionKind)),this},Mesh.prototype.increaseVertices=function(e){var t=h["VertexData"].ExtractFromMesh(this),r=t.uvs,n=t.indices,i=t.positions,o=t.normals;if(n&&i&&o&&r){for(var s,a,c=e+1,l=new Array,f=0;f<c+1;f++)l[f]=new Array;var p,m=new u["Vector3"](0,0,0),_=new u["Vector3"](0,0,0),g=new u["Vector2"](0,0),b=new Array,v=new Array,M=new Array,S=i.length,C=r.length;for(f=0;f<n.length;f+=3){v[0]=n[f],v[1]=n[f+1],v[2]=n[f+2];for(var E=0;E<3;E++)if(s=v[E],a=v[(E+1)%3],void 0===M[s]&&void 0===M[a]?(M[s]=new Array,M[a]=new Array):(void 0===M[s]&&(M[s]=new Array),void 0===M[a]&&(M[a]=new Array)),void 0===M[s][a]&&void 0===M[a][s]){M[s][a]=[],m.x=(i[3*a]-i[3*s])/c,m.y=(i[3*a+1]-i[3*s+1])/c,m.z=(i[3*a+2]-i[3*s+2])/c,_.x=(o[3*a]-o[3*s])/c,_.y=(o[3*a+1]-o[3*s+1])/c,_.z=(o[3*a+2]-o[3*s+2])/c,g.x=(r[2*a]-r[2*s])/c,g.y=(r[2*a+1]-r[2*s+1])/c,M[s][a].push(s);for(var P=1;P<c;P++)M[s][a].push(i.length/3),i[S]=i[3*s]+P*m.x,o[S++]=o[3*s]+P*_.x,i[S]=i[3*s+1]+P*m.y,o[S++]=o[3*s+1]+P*_.y,i[S]=i[3*s+2]+P*m.z,o[S++]=o[3*s+2]+P*_.z,r[C++]=r[2*s]+P*g.x,r[C++]=r[2*s+1]+P*g.y;M[s][a].push(a),M[a][s]=new Array,p=M[s][a].length;for(var A=0;A<p;A++)M[a][s][A]=M[s][a][p-1-A]}l[0][0]=n[f],l[1][0]=M[n[f]][n[f+1]][1],l[1][1]=M[n[f]][n[f+2]][1];for(P=2;P<c;P++){l[P][0]=M[n[f]][n[f+1]][P],l[P][P]=M[n[f]][n[f+2]][P],m.x=(i[3*l[P][P]]-i[3*l[P][0]])/P,m.y=(i[3*l[P][P]+1]-i[3*l[P][0]+1])/P,m.z=(i[3*l[P][P]+2]-i[3*l[P][0]+2])/P,_.x=(o[3*l[P][P]]-o[3*l[P][0]])/P,_.y=(o[3*l[P][P]+1]-o[3*l[P][0]+1])/P,_.z=(o[3*l[P][P]+2]-o[3*l[P][0]+2])/P,g.x=(r[2*l[P][P]]-r[2*l[P][0]])/P,g.y=(r[2*l[P][P]+1]-r[2*l[P][0]+1])/P;for(E=1;E<P;E++)l[P][E]=i.length/3,i[S]=i[3*l[P][0]]+E*m.x,o[S++]=o[3*l[P][0]]+E*_.x,i[S]=i[3*l[P][0]+1]+E*m.y,o[S++]=o[3*l[P][0]+1]+E*_.y,i[S]=i[3*l[P][0]+2]+E*m.z,o[S++]=o[3*l[P][0]+2]+E*_.z,r[C++]=r[2*l[P][0]]+E*g.x,r[C++]=r[2*l[P][0]+1]+E*g.y}l[c]=M[n[f+1]][n[f+2]],b.push(l[0][0],l[1][0],l[1][1]);for(P=1;P<c;P++){for(E=0;E<P;E++)b.push(l[P][E],l[P+1][E],l[P+1][E+1]),b.push(l[P][E],l[P+1][E+1],l[P][E+1]);b.push(l[P][E],l[P+1][E],l[P+1][E+1])}}t.indices=b,t.applyToMesh(this,this.isVertexBufferUpdatable(d["VertexBuffer"].PositionKind))}else T["Logger"].Warn("VertexData contains null entries")},Mesh.prototype.forceSharedVertices=function(){var e=h["VertexData"].ExtractFromMesh(this),t=e.uvs,r=e.indices,n=e.positions,i=e.colors;if(void 0===r||void 0===n||null===r||null===n)T["Logger"].Warn("VertexData contains empty entries");else{for(var o,s,a=new Array,u=new Array,c=new Array,l=new Array,f=new Array,p=0,m={},_=0;_<r.length;_+=3){s=[r[_],r[_+1],r[_+2]],f=new Array;for(var g=0;g<3;g++){f[g]="";for(var b=0;b<3;b++)Math.abs(n[3*s[g]+b])<1e-8&&(n[3*s[g]+b]=0),f[g]+=n[3*s[g]+b]+"|"}if(f[0]!=f[1]&&f[0]!=f[2]&&f[1]!=f[2])for(g=0;g<3;g++){if(o=m[f[g]],void 0===o){m[f[g]]=p,o=p++;for(b=0;b<3;b++)a.push(n[3*s[g]+b]);if(null!==i&&void 0!==i)for(b=0;b<4;b++)l.push(i[4*s[g]+b]);if(null!==t&&void 0!==t)for(b=0;b<2;b++)c.push(t[2*s[g]+b])}u.push(o)}}var v=new Array;h["VertexData"].ComputeNormals(a,u,v),e.positions=a,e.indices=u,e.normals=v,null!==t&&void 0!==t&&(e.uvs=c),null!==i&&void 0!==i&&(e.colors=l),e.applyToMesh(this,this.isVertexBufferUpdatable(d["VertexBuffer"].PositionKind))}},Mesh._instancedMeshFactory=function(e,t){throw C["_DevTools"].WarnImport("InstancedMesh")},Mesh._PhysicsImpostorParser=function(e,t,r){throw C["_DevTools"].WarnImport("PhysicsImpostor")},Mesh.prototype.createInstance=function(e){var t=this.geometry;if(t&&t.meshes.length>1)for(var r=t.meshes.slice(0),n=0,i=r;n<i.length;n++){var o=i[n];o!==this&&o.makeGeometryUnique()}return Mesh._instancedMeshFactory(e,this)},Mesh.prototype.synchronizeInstances=function(){this._geometry&&1!==this._geometry.meshes.length&&this.instances.length&&this.makeGeometryUnique();for(var e=0;e<this.instances.length;e++){var t=this.instances[e];t._syncSubMeshes()}return this},Mesh.prototype.optimizeIndices=function(e){var t=this,r=this.getIndices(),n=this.getVerticesData(d["VertexBuffer"].PositionKind);if(!n||!r)return this;for(var i=new Array,s=0;s<n.length;s+=3)i.push(u["Vector3"].FromArray(n,s));var a=new Array;return o["AsyncLoop"].SyncAsyncForLoop(i.length,40,(function(e){for(var t=i.length-1-e,r=i[t],n=0;n<t;++n){var o=i[n];if(r.equals(o)){a[t]=n;break}}}),(function(){for(var n=0;n<r.length;++n)r[n]=a[r[n]]||r[n];var i=t.subMeshes.slice(0);t.setIndices(r),t.subMeshes=i,e&&e(t)})),this},Mesh.prototype.serialize=function(e){e.name=this.name,e.id=this.id,e.uniqueId=this.uniqueId,e.type=this.getClassName(),a["Tags"]&&a["Tags"].HasTags(this)&&(e.tags=a["Tags"].GetTags(this)),e.position=this.position.asArray(),this.rotationQuaternion?e.rotationQuaternion=this.rotationQuaternion.asArray():this.rotation&&(e.rotation=this.rotation.asArray()),e.scaling=this.scaling.asArray(),this._postMultiplyPivotMatrix?e.pivotMatrix=this.getPivotMatrix().asArray():e.localMatrix=this.getPivotMatrix().asArray(),e.isEnabled=this.isEnabled(!1),e.isVisible=this.isVisible,e.infiniteDistance=this.infiniteDistance,e.pickable=this.isPickable,e.receiveShadows=this.receiveShadows,e.billboardMode=this.billboardMode,e.visibility=this.visibility,e.checkCollisions=this.checkCollisions,e.isBlocker=this.isBlocker,e.overrideMaterialSideOrientation=this.overrideMaterialSideOrientation,this.parent&&(e.parentId=this.parent.id),e.isUnIndexed=this.isUnIndexed;var t=this._geometry;if(t){var r=t.id;e.geometryId=r,e.subMeshes=[];for(var n=0;n<this.subMeshes.length;n++){var i=this.subMeshes[n];e.subMeshes.push({materialIndex:i.materialIndex,verticesStart:i.verticesStart,verticesCount:i.verticesCount,indexStart:i.indexStart,indexCount:i.indexCount})}}if(this.material?this.material.doNotSerialize||(e.materialId=this.material.id):this.material=null,this.morphTargetManager&&(e.morphTargetManagerId=this.morphTargetManager.uniqueId),this.skeleton&&(e.skeletonId=this.skeleton.id,e.numBoneInfluencers=this.numBoneInfluencers),this.getScene()._getComponent(E["SceneComponentConstants"].NAME_PHYSICSENGINE)){var s=this.getPhysicsImpostor();s&&(e.physicsMass=s.getParam("mass"),e.physicsFriction=s.getParam("friction"),e.physicsRestitution=s.getParam("mass"),e.physicsImpostor=s.type)}this.metadata&&(e.metadata=this.metadata),e.instances=[];for(var u=0;u<this.instances.length;u++){var c=this.instances[u];if(!c.doNotSerialize){var l={name:c.name,id:c.id,isEnabled:c.isEnabled(!1),isVisible:c.isVisible,isPickable:c.isPickable,checkCollisions:c.checkCollisions,position:c.position.asArray(),scaling:c.scaling.asArray()};if(c.parent&&(l.parentId=c.parent.id),c.rotationQuaternion?l.rotationQuaternion=c.rotationQuaternion.asArray():c.rotation&&(l.rotation=c.rotation.asArray()),this.getScene()._getComponent(E["SceneComponentConstants"].NAME_PHYSICSENGINE)){s=c.getPhysicsImpostor();s&&(l.physicsMass=s.getParam("mass"),l.physicsFriction=s.getParam("friction"),l.physicsRestitution=s.getParam("mass"),l.physicsImpostor=s.type)}c.metadata&&(l.metadata=c.metadata),e.instances.push(l),M["SerializationHelper"].AppendSerializedAnimations(c,l),l.ranges=c.serializeAnimationRanges()}}if(this._thinInstanceDataStorage.instancesCount&&this._thinInstanceDataStorage.matrixData&&(e.thinInstances={instancesCount:this._thinInstanceDataStorage.instancesCount,matrixData:o["Tools"].SliceToArray(this._thinInstanceDataStorage.matrixData),matrixBufferSize:this._thinInstanceDataStorage.matrixBufferSize},this._userThinInstanceBuffersStorage)){var d={data:{},sizes:{},strides:{}};for(var h in this._userThinInstanceBuffersStorage.data)d.data[h]=o["Tools"].SliceToArray(this._userThinInstanceBuffersStorage.data[h]),d.sizes[h]=this._userThinInstanceBuffersStorage.sizes[h],d.strides[h]=this._userThinInstanceBuffersStorage.strides[h];e.thinInstances.userThinInstance=d}M["SerializationHelper"].AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e.layerMask=this.layerMask,e.alphaIndex=this.alphaIndex,e.hasVertexAlpha=this.hasVertexAlpha,e.overlayAlpha=this.overlayAlpha,e.overlayColor=this.overlayColor.asArray(),e.renderOverlay=this.renderOverlay,e.applyFog=this.applyFog,this.actionManager&&(e.actions=this.actionManager.serialize(this.name))},Mesh.prototype._syncGeometryWithMorphTargetManager=function(){if(this.geometry){this._markSubMeshesAsAttributesDirty();var e=this._internalMeshDataInfo._morphTargetManager;if(e&&e.vertexCount){if(e.vertexCount!==this.getTotalVertices())return T["Logger"].Error("Mesh is incompatible with morph targets. Targets and mesh must all have the same vertices count."),void(this.morphTargetManager=null);for(var t=0;t<e.numInfluencers;t++){var r=e.getActiveTarget(t),n=r.getPositions();if(!n)return void T["Logger"].Error("Invalid morph target. Target must have positions.");this.geometry.setVerticesData(d["VertexBuffer"].PositionKind+t,n,!1,3);var i=r.getNormals();i&&this.geometry.setVerticesData(d["VertexBuffer"].NormalKind+t,i,!1,3);var o=r.getTangents();o&&this.geometry.setVerticesData(d["VertexBuffer"].TangentKind+t,o,!1,3);var s=r.getUVs();s&&this.geometry.setVerticesData(d["VertexBuffer"].UVKind+"_"+t,s,!1,2)}}else{t=0;while(this.geometry.isVerticesDataPresent(d["VertexBuffer"].PositionKind+t))this.geometry.removeVerticesData(d["VertexBuffer"].PositionKind+t),this.geometry.isVerticesDataPresent(d["VertexBuffer"].NormalKind+t)&&this.geometry.removeVerticesData(d["VertexBuffer"].NormalKind+t),this.geometry.isVerticesDataPresent(d["VertexBuffer"].TangentKind+t)&&this.geometry.removeVerticesData(d["VertexBuffer"].TangentKind+t),this.geometry.isVerticesDataPresent(d["VertexBuffer"].UVKind+t)&&this.geometry.removeVerticesData(d["VertexBuffer"].UVKind+"_"+t),t++}}},Mesh.Parse=function(e,t,r){var n;if(n=e.type&&"GroundMesh"===e.type?Mesh._GroundMeshParser(e,t):new Mesh(e.name,t),n.id=e.id,a["Tags"]&&a["Tags"].AddTagsTo(n,e.tags),n.position=u["Vector3"].FromArray(e.position),void 0!==e.metadata&&(n.metadata=e.metadata),e.rotationQuaternion?n.rotationQuaternion=u["Quaternion"].FromArray(e.rotationQuaternion):e.rotation&&(n.rotation=u["Vector3"].FromArray(e.rotation)),n.scaling=u["Vector3"].FromArray(e.scaling),e.localMatrix?n.setPreTransformMatrix(u["Matrix"].FromArray(e.localMatrix)):e.pivotMatrix&&n.setPivotMatrix(u["Matrix"].FromArray(e.pivotMatrix)),n.setEnabled(e.isEnabled),n.isVisible=e.isVisible,n.infiniteDistance=e.infiniteDistance,n.showBoundingBox=e.showBoundingBox,n.showSubMeshesBoundingBox=e.showSubMeshesBoundingBox,void 0!==e.applyFog&&(n.applyFog=e.applyFog),void 0!==e.pickable&&(n.isPickable=e.pickable),void 0!==e.alphaIndex&&(n.alphaIndex=e.alphaIndex),n.receiveShadows=e.receiveShadows,n.billboardMode=e.billboardMode,void 0!==e.visibility&&(n.visibility=e.visibility),n.checkCollisions=e.checkCollisions,n.overrideMaterialSideOrientation=e.overrideMaterialSideOrientation,void 0!==e.isBlocker&&(n.isBlocker=e.isBlocker),n._shouldGenerateFlatShading=e.useFlatShading,e.freezeWorldMatrix&&(n._waitingData.freezeWorldMatrix=e.freezeWorldMatrix),e.parentId&&(n._waitingParentId=e.parentId),void 0!==e.actions&&(n._waitingData.actions=e.actions),void 0!==e.overlayAlpha&&(n.overlayAlpha=e.overlayAlpha),void 0!==e.overlayColor&&(n.overlayColor=c["Color3"].FromArray(e.overlayColor)),void 0!==e.renderOverlay&&(n.renderOverlay=e.renderOverlay),n.isUnIndexed=!!e.isUnIndexed,n.hasVertexAlpha=e.hasVertexAlpha,e.delayLoadingFile?(n.delayLoadState=4,n.delayLoadingFile=r+e.delayLoadingFile,n._boundingInfo=new _["BoundingInfo"](u["Vector3"].FromArray(e.boundingBoxMinimum),u["Vector3"].FromArray(e.boundingBoxMaximum)),e._binaryInfo&&(n._binaryInfo=e._binaryInfo),n._delayInfo=[],e.hasUVs&&n._delayInfo.push(d["VertexBuffer"].UVKind),e.hasUVs2&&n._delayInfo.push(d["VertexBuffer"].UV2Kind),e.hasUVs3&&n._delayInfo.push(d["VertexBuffer"].UV3Kind),e.hasUVs4&&n._delayInfo.push(d["VertexBuffer"].UV4Kind),e.hasUVs5&&n._delayInfo.push(d["VertexBuffer"].UV5Kind),e.hasUVs6&&n._delayInfo.push(d["VertexBuffer"].UV6Kind),e.hasColors&&n._delayInfo.push(d["VertexBuffer"].ColorKind),e.hasMatricesIndices&&n._delayInfo.push(d["VertexBuffer"].MatricesIndicesKind),e.hasMatricesWeights&&n._delayInfo.push(d["VertexBuffer"].MatricesWeightsKind),n._delayLoadingFunction=f["Geometry"]._ImportGeometry,v["SceneLoaderFlags"].ForceFullSceneLoadingForIncremental&&n._checkDelayState()):f["Geometry"]._ImportGeometry(e,n),e.materialId?n.setMaterialByID(e.materialId):n.material=null,e.morphTargetManagerId>-1&&(n.morphTargetManager=t.getMorphTargetManagerById(e.morphTargetManagerId)),void 0!==e.skeletonId&&null!==e.skeletonId&&(n.skeleton=t.getLastSkeletonByID(e.skeletonId),e.numBoneInfluencers&&(n.numBoneInfluencers=e.numBoneInfluencers)),e.animations){for(var i=0;i<e.animations.length;i++){var o=e.animations[i],s=S["_TypeStore"].GetClass("BABYLON.Animation");s&&n.animations.push(s.Parse(o))}l["Node"].ParseAnimationRanges(n,e,t)}if(e.autoAnimate&&t.beginAnimation(n,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),e.layerMask&&!isNaN(e.layerMask)?n.layerMask=Math.abs(parseInt(e.layerMask)):n.layerMask=268435455,e.physicsImpostor&&Mesh._PhysicsImpostorParser(t,n,e),e.lodMeshIds&&(n._waitingData.lods={ids:e.lodMeshIds,distances:e.lodDistances?e.lodDistances:null,coverages:e.lodCoverages?e.lodCoverages:null}),e.instances)for(var h=0;h<e.instances.length;h++){var p=e.instances[h],m=n.createInstance(p.name);if(p.id&&(m.id=p.id),a["Tags"]&&(p.tags?a["Tags"].AddTagsTo(m,p.tags):a["Tags"].AddTagsTo(m,e.tags)),m.position=u["Vector3"].FromArray(p.position),void 0!==p.metadata&&(m.metadata=p.metadata),p.parentId&&(m._waitingParentId=p.parentId),void 0!==p.isEnabled&&null!==p.isEnabled&&m.setEnabled(p.isEnabled),void 0!==p.isVisible&&null!==p.isVisible&&(m.isVisible=p.isVisible),void 0!==p.isPickable&&null!==p.isPickable&&(m.isPickable=p.isPickable),p.rotationQuaternion?m.rotationQuaternion=u["Quaternion"].FromArray(p.rotationQuaternion):p.rotation&&(m.rotation=u["Vector3"].FromArray(p.rotation)),m.scaling=u["Vector3"].FromArray(p.scaling),void 0!=p.checkCollisions&&null!=p.checkCollisions&&(m.checkCollisions=p.checkCollisions),void 0!=p.pickable&&null!=p.pickable&&(m.isPickable=p.pickable),void 0!=p.showBoundingBox&&null!=p.showBoundingBox&&(m.showBoundingBox=p.showBoundingBox),void 0!=p.showSubMeshesBoundingBox&&null!=p.showSubMeshesBoundingBox&&(m.showSubMeshesBoundingBox=p.showSubMeshesBoundingBox),void 0!=p.alphaIndex&&null!=p.showSubMeshesBoundingBox&&(m.alphaIndex=p.alphaIndex),p.physicsImpostor&&Mesh._PhysicsImpostorParser(t,m,p),p.animations){for(i=0;i<p.animations.length;i++){o=p.animations[i];s=S["_TypeStore"].GetClass("BABYLON.Animation");s&&m.animations.push(s.Parse(o))}l["Node"].ParseAnimationRanges(m,p,t),p.autoAnimate&&t.beginAnimation(m,p.autoAnimateFrom,p.autoAnimateTo,p.autoAnimateLoop,p.autoAnimateSpeed||1)}}if(e.thinInstances){var g=e.thinInstances;if(g.matrixData?(n.thinInstanceSetBuffer("matrix",new Float32Array(g.matrixData),16,!1),n._thinInstanceDataStorage.matrixBufferSize=g.matrixBufferSize,n._thinInstanceDataStorage.instancesCount=g.instancesCount):n._thinInstanceDataStorage.matrixBufferSize=g.matrixBufferSize,e.thinInstances.userThinInstance){var b=e.thinInstances.userThinInstance;for(var M in b.data)n.thinInstanceSetBuffer(M,new Float32Array(b.data[M]),b.strides[M],!1),n._userThinInstanceBuffersStorage.sizes[M]=b.sizes[M]}}return n},Mesh.CreateRibbon=function(e,t,r,n,i,o,s,a,u){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateDisc=function(e,t,r,n,i,o){throw void 0===n&&(n=null),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateBox=function(e,t,r,n,i){throw void 0===r&&(r=null),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateSphere=function(e,t,r,n,i,o){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateHemisphere=function(e,t,r,n){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateCylinder=function(e,t,r,n,i,o,s,a,u){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateTorus=function(e,t,r,n,i,o,s){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateTorusKnot=function(e,t,r,n,i,o,s,a,u,c){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateLines=function(e,t,r,n,i){throw void 0===r&&(r=null),void 0===n&&(n=!1),void 0===i&&(i=null),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateDashedLines=function(e,t,r,n,i,o,s,a){throw void 0===o&&(o=null),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreatePolygon=function(e,t,r,n,i,o,s){throw void 0===s&&(s=earcut),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.ExtrudePolygon=function(e,t,r,n,i,o,s,a){throw void 0===a&&(a=earcut),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.ExtrudeShape=function(e,t,r,n,i,o,s,a,u,c){throw void 0===s&&(s=null),C["_DevTools"].WarnImport("MeshBuilder")},Mesh.ExtrudeShapeCustom=function(e,t,r,n,i,o,s,a,u,c,l,d){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateLathe=function(e,t,r,n,i,o,s){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreatePlane=function(e,t,r,n,i){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateGround=function(e,t,r,n,i,o){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateTiledGround=function(e,t,r,n,i,o,s,a,u){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateGroundFromHeightMap=function(e,t,r,n,i,o,s,a,u,c,l){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateTube=function(e,t,r,n,i,o,s,a,u,c){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreatePolyhedron=function(e,t,r){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateIcoSphere=function(e,t,r){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateDecal=function(e,t,r,n,i,o){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.CreateCapsule=function(e,t,r){throw C["_DevTools"].WarnImport("MeshBuilder")},Mesh.prototype.setPositionsForCPUSkinning=function(){var e=this._internalMeshDataInfo;if(!e._sourcePositions){var t=this.getVerticesData(d["VertexBuffer"].PositionKind);if(!t)return e._sourcePositions;e._sourcePositions=new Float32Array(t),this.isVertexBufferUpdatable(d["VertexBuffer"].PositionKind)||this.setVerticesData(d["VertexBuffer"].PositionKind,t,!0)}return e._sourcePositions},Mesh.prototype.setNormalsForCPUSkinning=function(){var e=this._internalMeshDataInfo;if(!e._sourceNormals){var t=this.getVerticesData(d["VertexBuffer"].NormalKind);if(!t)return e._sourceNormals;e._sourceNormals=new Float32Array(t),this.isVertexBufferUpdatable(d["VertexBuffer"].NormalKind)||this.setVerticesData(d["VertexBuffer"].NormalKind,t,!0)}return e._sourceNormals},Mesh.prototype.applySkeleton=function(e){if(!this.geometry)return this;if(this.geometry._softwareSkinningFrameId==this.getScene().getFrameId())return this;if(this.geometry._softwareSkinningFrameId=this.getScene().getFrameId(),!this.isVerticesDataPresent(d["VertexBuffer"].PositionKind))return this;if(!this.isVerticesDataPresent(d["VertexBuffer"].MatricesIndicesKind))return this;if(!this.isVerticesDataPresent(d["VertexBuffer"].MatricesWeightsKind))return this;var t=this.isVerticesDataPresent(d["VertexBuffer"].NormalKind),r=this._internalMeshDataInfo;if(!r._sourcePositions){var n=this.subMeshes.slice();this.setPositionsForCPUSkinning(),this.subMeshes=n}t&&!r._sourceNormals&&this.setNormalsForCPUSkinning();var i=this.getVerticesData(d["VertexBuffer"].PositionKind);if(!i)return this;i instanceof Float32Array||(i=new Float32Array(i));var o=this.getVerticesData(d["VertexBuffer"].NormalKind);if(t){if(!o)return this;o instanceof Float32Array||(o=new Float32Array(o))}var s=this.getVerticesData(d["VertexBuffer"].MatricesIndicesKind),a=this.getVerticesData(d["VertexBuffer"].MatricesWeightsKind);if(!a||!s)return this;for(var c,l=this.numBoneInfluencers>4,h=l?this.getVerticesData(d["VertexBuffer"].MatricesIndicesExtraKind):null,f=l?this.getVerticesData(d["VertexBuffer"].MatricesWeightsExtraKind):null,p=e.getTransformMatrices(this),m=u["Vector3"].Zero(),_=new u["Matrix"],g=new u["Matrix"],b=0,v=0;v<i.length;v+=3,b+=4){var M;for(c=0;c<4;c++)M=a[b+c],M>0&&(u["Matrix"].FromFloat32ArrayToRefScaled(p,Math.floor(16*s[b+c]),M,g),_.addToSelf(g));if(l)for(c=0;c<4;c++)M=f[b+c],M>0&&(u["Matrix"].FromFloat32ArrayToRefScaled(p,Math.floor(16*h[b+c]),M,g),_.addToSelf(g));u["Vector3"].TransformCoordinatesFromFloatsToRef(r._sourcePositions[v],r._sourcePositions[v+1],r._sourcePositions[v+2],_,m),m.toArray(i,v),t&&(u["Vector3"].TransformNormalFromFloatsToRef(r._sourceNormals[v],r._sourceNormals[v+1],r._sourceNormals[v+2],_,m),m.toArray(o,v)),_.reset()}return this.updateVerticesData(d["VertexBuffer"].PositionKind,i),t&&this.updateVerticesData(d["VertexBuffer"].NormalKind,o),this},Mesh.MinMax=function(e){var t=null,r=null;return e.forEach((function(e){var n=e.getBoundingInfo(),i=n.boundingBox;t&&r?(t.minimizeInPlace(i.minimumWorld),r.maximizeInPlace(i.maximumWorld)):(t=i.minimumWorld,r=i.maximumWorld)})),t&&r?{min:t,max:r}:{min:u["Vector3"].Zero(),max:u["Vector3"].Zero()}},Mesh.Center=function(e){var t=e instanceof Array?Mesh.MinMax(e):e;return u["Vector3"].Center(t.min,t.max)},Mesh.MergeMeshes=function(e,t,r,n,i,o){var s;if(void 0===t&&(t=!0),!r){var a=0;for(s=0;s<e.length;s++)if(e[s]&&(a+=e[s].getTotalVertices(),a>=65536))return T["Logger"].Warn("Cannot merge meshes because resulting mesh will have more than 65536 vertices. Please use allow32BitsIndices = true to use 32 bits indices"),null}if(o){var u,c,l=null;i=!1}var d,f=new Array,p=new Array,_=null,g=new Array,v=null;for(s=0;s<e.length;s++)if(e[s]){var M=e[s];if(M.isAnInstance)return T["Logger"].Warn("Cannot merge instance meshes."),null;var S=M.computeWorldMatrix(!0);if(d=h["VertexData"].ExtractFromMesh(M,!0,!0),d.transform(S),_?_.merge(d,r):(_=d,v=M),i&&g.push(M.getTotalIndices()),o)if(M.material){var C=M.material;if(C instanceof b["MultiMaterial"]){for(c=0;c<C.subMaterials.length;c++)f.indexOf(C.subMaterials[c])<0&&f.push(C.subMaterials[c]);for(u=0;u<M.subMeshes.length;u++)p.push(f.indexOf(C.subMaterials[M.subMeshes[u].materialIndex])),g.push(M.subMeshes[u].indexCount)}else for(f.indexOf(C)<0&&f.push(C),u=0;u<M.subMeshes.length;u++)p.push(f.indexOf(C)),g.push(M.subMeshes[u].indexCount)}else for(u=0;u<M.subMeshes.length;u++)p.push(0),g.push(M.subMeshes[u].indexCount)}if(v=v,n||(n=new Mesh(v.name+"_merged",v.getScene())),_.applyToMesh(n),n.checkCollisions=v.checkCollisions,n.overrideMaterialSideOrientation=v.overrideMaterialSideOrientation,t)for(s=0;s<e.length;s++)e[s]&&e[s].dispose();if(i||o){n.releaseSubMeshes(),s=0;var E=0;while(s<g.length)m["SubMesh"].CreateFromIndices(0,E,g[s],n),E+=g[s],s++}if(o){for(l=new b["MultiMaterial"](v.name+"_merged",v.getScene()),l.subMaterials=f,u=0;u<n.subMeshes.length;u++)n.subMeshes[u].materialIndex=p[u];n.material=l}else n.material=v.material;return n},Mesh.prototype.addInstance=function(e){e._indexInSourceMeshInstanceArray=this.instances.length,this.instances.push(e)},Mesh.prototype.removeInstance=function(e){var t=e._indexInSourceMeshInstanceArray;if(-1!=t){if(t!==this.instances.length-1){var r=this.instances[this.instances.length-1];this.instances[t]=r,r._indexInSourceMeshInstanceArray=t}e._indexInSourceMeshInstanceArray=-1,this.instances.pop()}},Mesh.FRONTSIDE=h["VertexData"].FRONTSIDE,Mesh.BACKSIDE=h["VertexData"].BACKSIDE,Mesh.DOUBLESIDE=h["VertexData"].DOUBLESIDE,Mesh.DEFAULTSIDE=h["VertexData"].DEFAULTSIDE,Mesh.NO_CAP=0,Mesh.CAP_START=1,Mesh.CAP_END=2,Mesh.CAP_ALL=3,Mesh.NO_FLIP=0,Mesh.FLIP_TILE=1,Mesh.ROTATE_TILE=2,Mesh.FLIP_ROW=3,Mesh.ROTATE_ROW=4,Mesh.FLIP_N_ROTATE_TILE=5,Mesh.FLIP_N_ROTATE_ROW=6,Mesh.CENTER=0,Mesh.LEFT=1,Mesh.RIGHT=2,Mesh.TOP=3,Mesh.BOTTOM=4,Mesh._GroundMeshParser=function(e,t){throw C["_DevTools"].WarnImport("GroundMesh")},Mesh}(p["AbstractMesh"]);S["_TypeStore"].RegisteredTypes["BABYLON.Mesh"]=D},"./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"VertexData",(function(){return u}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),o=r("./node_modules/@babylonjs/core/Misc/devTools.js"),s=r("./node_modules/@babylonjs/core/Maths/math.color.js"),a=r("./node_modules/@babylonjs/core/Misc/logger.js"),u=function(){function VertexData(){}return VertexData.prototype.set=function(e,t){switch(e.length||a["Logger"].Warn("Setting vertex data kind '"+t+"' with an empty array"),t){case i["VertexBuffer"].PositionKind:this.positions=e;break;case i["VertexBuffer"].NormalKind:this.normals=e;break;case i["VertexBuffer"].TangentKind:this.tangents=e;break;case i["VertexBuffer"].UVKind:this.uvs=e;break;case i["VertexBuffer"].UV2Kind:this.uvs2=e;break;case i["VertexBuffer"].UV3Kind:this.uvs3=e;break;case i["VertexBuffer"].UV4Kind:this.uvs4=e;break;case i["VertexBuffer"].UV5Kind:this.uvs5=e;break;case i["VertexBuffer"].UV6Kind:this.uvs6=e;break;case i["VertexBuffer"].ColorKind:this.colors=e;break;case i["VertexBuffer"].MatricesIndicesKind:this.matricesIndices=e;break;case i["VertexBuffer"].MatricesWeightsKind:this.matricesWeights=e;break;case i["VertexBuffer"].MatricesIndicesExtraKind:this.matricesIndicesExtra=e;break;case i["VertexBuffer"].MatricesWeightsExtraKind:this.matricesWeightsExtra=e;break}},VertexData.prototype.applyToMesh=function(e,t){return this._applyTo(e,t),this},VertexData.prototype.applyToGeometry=function(e,t){return this._applyTo(e,t),this},VertexData.prototype.updateMesh=function(e){return this._update(e),this},VertexData.prototype.updateGeometry=function(e){return this._update(e),this},VertexData.prototype._applyTo=function(e,t){return void 0===t&&(t=!1),this.positions&&e.setVerticesData(i["VertexBuffer"].PositionKind,this.positions,t),this.normals&&e.setVerticesData(i["VertexBuffer"].NormalKind,this.normals,t),this.tangents&&e.setVerticesData(i["VertexBuffer"].TangentKind,this.tangents,t),this.uvs&&e.setVerticesData(i["VertexBuffer"].UVKind,this.uvs,t),this.uvs2&&e.setVerticesData(i["VertexBuffer"].UV2Kind,this.uvs2,t),this.uvs3&&e.setVerticesData(i["VertexBuffer"].UV3Kind,this.uvs3,t),this.uvs4&&e.setVerticesData(i["VertexBuffer"].UV4Kind,this.uvs4,t),this.uvs5&&e.setVerticesData(i["VertexBuffer"].UV5Kind,this.uvs5,t),this.uvs6&&e.setVerticesData(i["VertexBuffer"].UV6Kind,this.uvs6,t),this.colors&&e.setVerticesData(i["VertexBuffer"].ColorKind,this.colors,t),this.matricesIndices&&e.setVerticesData(i["VertexBuffer"].MatricesIndicesKind,this.matricesIndices,t),this.matricesWeights&&e.setVerticesData(i["VertexBuffer"].MatricesWeightsKind,this.matricesWeights,t),this.matricesIndicesExtra&&e.setVerticesData(i["VertexBuffer"].MatricesIndicesExtraKind,this.matricesIndicesExtra,t),this.matricesWeightsExtra&&e.setVerticesData(i["VertexBuffer"].MatricesWeightsExtraKind,this.matricesWeightsExtra,t),this.indices?e.setIndices(this.indices,null,t):e.setIndices([],null),this},VertexData.prototype._update=function(e,t,r){return this.positions&&e.updateVerticesData(i["VertexBuffer"].PositionKind,this.positions,t,r),this.normals&&e.updateVerticesData(i["VertexBuffer"].NormalKind,this.normals,t,r),this.tangents&&e.updateVerticesData(i["VertexBuffer"].TangentKind,this.tangents,t,r),this.uvs&&e.updateVerticesData(i["VertexBuffer"].UVKind,this.uvs,t,r),this.uvs2&&e.updateVerticesData(i["VertexBuffer"].UV2Kind,this.uvs2,t,r),this.uvs3&&e.updateVerticesData(i["VertexBuffer"].UV3Kind,this.uvs3,t,r),this.uvs4&&e.updateVerticesData(i["VertexBuffer"].UV4Kind,this.uvs4,t,r),this.uvs5&&e.updateVerticesData(i["VertexBuffer"].UV5Kind,this.uvs5,t,r),this.uvs6&&e.updateVerticesData(i["VertexBuffer"].UV6Kind,this.uvs6,t,r),this.colors&&e.updateVerticesData(i["VertexBuffer"].ColorKind,this.colors,t,r),this.matricesIndices&&e.updateVerticesData(i["VertexBuffer"].MatricesIndicesKind,this.matricesIndices,t,r),this.matricesWeights&&e.updateVerticesData(i["VertexBuffer"].MatricesWeightsKind,this.matricesWeights,t,r),this.matricesIndicesExtra&&e.updateVerticesData(i["VertexBuffer"].MatricesIndicesExtraKind,this.matricesIndicesExtra,t,r),this.matricesWeightsExtra&&e.updateVerticesData(i["VertexBuffer"].MatricesWeightsExtraKind,this.matricesWeightsExtra,t,r),this.indices&&e.setIndices(this.indices,null),this},VertexData.prototype.transform=function(e){var t,r=e.determinant()<0,i=n["Vector3"].Zero();if(this.positions){var o=n["Vector3"].Zero();for(t=0;t<this.positions.length;t+=3)n["Vector3"].FromArrayToRef(this.positions,t,o),n["Vector3"].TransformCoordinatesToRef(o,e,i),this.positions[t]=i.x,this.positions[t+1]=i.y,this.positions[t+2]=i.z}if(this.normals){var s=n["Vector3"].Zero();for(t=0;t<this.normals.length;t+=3)n["Vector3"].FromArrayToRef(this.normals,t,s),n["Vector3"].TransformNormalToRef(s,e,i),this.normals[t]=i.x,this.normals[t+1]=i.y,this.normals[t+2]=i.z}if(this.tangents){var a=n["Vector4"].Zero(),u=n["Vector4"].Zero();for(t=0;t<this.tangents.length;t+=4)n["Vector4"].FromArrayToRef(this.tangents,t,a),n["Vector4"].TransformNormalToRef(a,e,u),this.tangents[t]=u.x,this.tangents[t+1]=u.y,this.tangents[t+2]=u.z,this.tangents[t+3]=u.w}if(r&&this.indices)for(t=0;t<this.indices.length;t+=3){var c=this.indices[t+1];this.indices[t+1]=this.indices[t+2],this.indices[t+2]=c}return this},VertexData.prototype.merge=function(e,t){if(void 0===t&&(t=!1),this._validate(),e._validate(),!this.normals!==!e.normals||!this.tangents!==!e.tangents||!this.uvs!==!e.uvs||!this.uvs2!==!e.uvs2||!this.uvs3!==!e.uvs3||!this.uvs4!==!e.uvs4||!this.uvs5!==!e.uvs5||!this.uvs6!==!e.uvs6||!this.colors!==!e.colors||!this.matricesIndices!==!e.matricesIndices||!this.matricesWeights!==!e.matricesWeights||!this.matricesIndicesExtra!==!e.matricesIndicesExtra||!this.matricesWeightsExtra!==!e.matricesWeightsExtra)throw new Error("Cannot merge vertex data that do not have the same set of attributes");if(e.indices){this.indices||(this.indices=[]);var r=this.positions?this.positions.length/3:0,n=void 0!==this.indices.BYTES_PER_ELEMENT;if(n){var i=this.indices.length+e.indices.length,o=t||this.indices instanceof Uint32Array?new Uint32Array(i):new Uint16Array(i);o.set(this.indices);for(var s=this.indices.length,a=0;a<e.indices.length;a++)o[s+a]=e.indices[a]+r;this.indices=o}else for(a=0;a<e.indices.length;a++)this.indices.push(e.indices[a]+r)}return this.positions=this._mergeElement(this.positions,e.positions),this.normals=this._mergeElement(this.normals,e.normals),this.tangents=this._mergeElement(this.tangents,e.tangents),this.uvs=this._mergeElement(this.uvs,e.uvs),this.uvs2=this._mergeElement(this.uvs2,e.uvs2),this.uvs3=this._mergeElement(this.uvs3,e.uvs3),this.uvs4=this._mergeElement(this.uvs4,e.uvs4),this.uvs5=this._mergeElement(this.uvs5,e.uvs5),this.uvs6=this._mergeElement(this.uvs6,e.uvs6),this.colors=this._mergeElement(this.colors,e.colors),this.matricesIndices=this._mergeElement(this.matricesIndices,e.matricesIndices),this.matricesWeights=this._mergeElement(this.matricesWeights,e.matricesWeights),this.matricesIndicesExtra=this._mergeElement(this.matricesIndicesExtra,e.matricesIndicesExtra),this.matricesWeightsExtra=this._mergeElement(this.matricesWeightsExtra,e.matricesWeightsExtra),this},VertexData.prototype._mergeElement=function(e,t){if(!e)return t;if(!t)return e;var r=t.length+e.length,n=e instanceof Float32Array,i=t instanceof Float32Array;if(n){var o=new Float32Array(r);return o.set(e),o.set(t,e.length),o}if(i){var s=e.slice(0),a=0;for(r=t.length;a<r;a++)s.push(t[a]);return s}return e.concat(t)},VertexData.prototype._validate=function(){if(!this.positions)throw new Error("Positions are required");var getElementCount=function(e,t){var r=i["VertexBuffer"].DeduceStride(e);if(t.length%r!==0)throw new Error("The "+e+"s array count must be a multiple of "+r);return t.length/r},e=getElementCount(i["VertexBuffer"].PositionKind,this.positions),validateElementCount=function(t,r){var n=getElementCount(t,r);if(n!==e)throw new Error("The "+t+"s element count ("+n+") does not match the positions count ("+e+")")};this.normals&&validateElementCount(i["VertexBuffer"].NormalKind,this.normals),this.tangents&&validateElementCount(i["VertexBuffer"].TangentKind,this.tangents),this.uvs&&validateElementCount(i["VertexBuffer"].UVKind,this.uvs),this.uvs2&&validateElementCount(i["VertexBuffer"].UV2Kind,this.uvs2),this.uvs3&&validateElementCount(i["VertexBuffer"].UV3Kind,this.uvs3),this.uvs4&&validateElementCount(i["VertexBuffer"].UV4Kind,this.uvs4),this.uvs5&&validateElementCount(i["VertexBuffer"].UV5Kind,this.uvs5),this.uvs6&&validateElementCount(i["VertexBuffer"].UV6Kind,this.uvs6),this.colors&&validateElementCount(i["VertexBuffer"].ColorKind,this.colors),this.matricesIndices&&validateElementCount(i["VertexBuffer"].MatricesIndicesKind,this.matricesIndices),this.matricesWeights&&validateElementCount(i["VertexBuffer"].MatricesWeightsKind,this.matricesWeights),this.matricesIndicesExtra&&validateElementCount(i["VertexBuffer"].MatricesIndicesExtraKind,this.matricesIndicesExtra),this.matricesWeightsExtra&&validateElementCount(i["VertexBuffer"].MatricesWeightsExtraKind,this.matricesWeightsExtra)},VertexData.prototype.serialize=function(){var e=this.serialize();return this.positions&&(e.positions=this.positions),this.normals&&(e.normals=this.normals),this.tangents&&(e.tangents=this.tangents),this.uvs&&(e.uvs=this.uvs),this.uvs2&&(e.uvs2=this.uvs2),this.uvs3&&(e.uvs3=this.uvs3),this.uvs4&&(e.uvs4=this.uvs4),this.uvs5&&(e.uvs5=this.uvs5),this.uvs6&&(e.uvs6=this.uvs6),this.colors&&(e.colors=this.colors),this.matricesIndices&&(e.matricesIndices=this.matricesIndices,e.matricesIndices._isExpanded=!0),this.matricesWeights&&(e.matricesWeights=this.matricesWeights),this.matricesIndicesExtra&&(e.matricesIndicesExtra=this.matricesIndicesExtra,e.matricesIndicesExtra._isExpanded=!0),this.matricesWeightsExtra&&(e.matricesWeightsExtra=this.matricesWeightsExtra),e.indices=this.indices,e},VertexData.ExtractFromMesh=function(e,t,r){return VertexData._ExtractFrom(e,t,r)},VertexData.ExtractFromGeometry=function(e,t,r){return VertexData._ExtractFrom(e,t,r)},VertexData._ExtractFrom=function(e,t,r){var n=new VertexData;return e.isVerticesDataPresent(i["VertexBuffer"].PositionKind)&&(n.positions=e.getVerticesData(i["VertexBuffer"].PositionKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].NormalKind)&&(n.normals=e.getVerticesData(i["VertexBuffer"].NormalKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].TangentKind)&&(n.tangents=e.getVerticesData(i["VertexBuffer"].TangentKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UVKind)&&(n.uvs=e.getVerticesData(i["VertexBuffer"].UVKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UV2Kind)&&(n.uvs2=e.getVerticesData(i["VertexBuffer"].UV2Kind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UV3Kind)&&(n.uvs3=e.getVerticesData(i["VertexBuffer"].UV3Kind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UV4Kind)&&(n.uvs4=e.getVerticesData(i["VertexBuffer"].UV4Kind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UV5Kind)&&(n.uvs5=e.getVerticesData(i["VertexBuffer"].UV5Kind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].UV6Kind)&&(n.uvs6=e.getVerticesData(i["VertexBuffer"].UV6Kind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].ColorKind)&&(n.colors=e.getVerticesData(i["VertexBuffer"].ColorKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].MatricesIndicesKind)&&(n.matricesIndices=e.getVerticesData(i["VertexBuffer"].MatricesIndicesKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].MatricesWeightsKind)&&(n.matricesWeights=e.getVerticesData(i["VertexBuffer"].MatricesWeightsKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].MatricesIndicesExtraKind)&&(n.matricesIndicesExtra=e.getVerticesData(i["VertexBuffer"].MatricesIndicesExtraKind,t,r)),e.isVerticesDataPresent(i["VertexBuffer"].MatricesWeightsExtraKind)&&(n.matricesWeightsExtra=e.getVerticesData(i["VertexBuffer"].MatricesWeightsExtraKind,t,r)),n.indices=e.getIndices(t,r),n},VertexData.CreateRibbon=function(e){throw o["_DevTools"].WarnImport("ribbonBuilder")},VertexData.CreateBox=function(e){throw o["_DevTools"].WarnImport("boxBuilder")},VertexData.CreateTiledBox=function(e){throw o["_DevTools"].WarnImport("tiledBoxBuilder")},VertexData.CreateTiledPlane=function(e){throw o["_DevTools"].WarnImport("tiledPlaneBuilder")},VertexData.CreateSphere=function(e){throw o["_DevTools"].WarnImport("sphereBuilder")},VertexData.CreateCylinder=function(e){throw o["_DevTools"].WarnImport("cylinderBuilder")},VertexData.CreateTorus=function(e){throw o["_DevTools"].WarnImport("torusBuilder")},VertexData.CreateLineSystem=function(e){throw o["_DevTools"].WarnImport("linesBuilder")},VertexData.CreateDashedLines=function(e){throw o["_DevTools"].WarnImport("linesBuilder")},VertexData.CreateGround=function(e){throw o["_DevTools"].WarnImport("groundBuilder")},VertexData.CreateTiledGround=function(e){throw o["_DevTools"].WarnImport("groundBuilder")},VertexData.CreateGroundFromHeightMap=function(e){throw o["_DevTools"].WarnImport("groundBuilder")},VertexData.CreatePlane=function(e){throw o["_DevTools"].WarnImport("planeBuilder")},VertexData.CreateDisc=function(e){throw o["_DevTools"].WarnImport("discBuilder")},VertexData.CreatePolygon=function(e,t,r,n,i,s,a){throw o["_DevTools"].WarnImport("polygonBuilder")},VertexData.CreateIcoSphere=function(e){throw o["_DevTools"].WarnImport("icoSphereBuilder")},VertexData.CreatePolyhedron=function(e){throw o["_DevTools"].WarnImport("polyhedronBuilder")},VertexData.CreateCapsule=function(e){throw void 0===e&&(e={orientation:n["Vector3"].Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}),o["_DevTools"].WarnImport("capsuleBuilder")},VertexData.CreateTorusKnot=function(e){throw o["_DevTools"].WarnImport("torusKnotBuilder")},VertexData.ComputeNormals=function(e,t,r,i){var o=0,s=0,a=0,u=0,c=0,l=0,d=0,h=0,f=0,p=0,m=0,_=0,g=0,b=0,v=0,M=0,T=0,S=0,C=0,E=0,P=!1,A=!1,j=!1,O=!1,R=1,I=0,w=null;if(i&&(P=!!i.facetNormals,A=!!i.facetPositions,j=!!i.facetPartitioning,R=!0===i.useRightHandedSystem?-1:1,I=i.ratio||0,O=!!i.depthSort,w=i.distanceTo,O)){void 0===w&&(w=n["Vector3"].Zero());var D=i.depthSortedFacets}var F=0,B=0,L=0,V=0;if(j&&i&&i.bbSize){var N=0,k=0,U=0,z=0,G=0,W=0,H=0,X=0,q=0,K=0,Y=0,Q=0,Z=0,$=0,J=0,ee=0,te=i.bbSize.x>i.bbSize.y?i.bbSize.x:i.bbSize.y;te=te>i.bbSize.z?te:i.bbSize.z,F=i.subDiv.X*I/i.bbSize.x,B=i.subDiv.Y*I/i.bbSize.y,L=i.subDiv.Z*I/i.bbSize.z,V=i.subDiv.max*i.subDiv.max,i.facetPartitioning.length=0}for(o=0;o<e.length;o++)r[o]=0;var re=t.length/3|0;for(o=0;o<re;o++){if(_=3*t[3*o],g=_+1,b=_+2,v=3*t[3*o+1],M=v+1,T=v+2,S=3*t[3*o+2],C=S+1,E=S+2,s=e[_]-e[v],a=e[g]-e[M],u=e[b]-e[T],c=e[S]-e[v],l=e[C]-e[M],d=e[E]-e[T],h=R*(a*d-u*l),f=R*(u*c-s*d),p=R*(s*l-a*c),m=Math.sqrt(h*h+f*f+p*p),m=0===m?1:m,h/=m,f/=m,p/=m,P&&i&&(i.facetNormals[o].x=h,i.facetNormals[o].y=f,i.facetNormals[o].z=p),A&&i&&(i.facetPositions[o].x=(e[_]+e[v]+e[S])/3,i.facetPositions[o].y=(e[g]+e[M]+e[C])/3,i.facetPositions[o].z=(e[b]+e[T]+e[E])/3),j&&i&&(N=Math.floor((i.facetPositions[o].x-i.bInfo.minimum.x*I)*F),k=Math.floor((i.facetPositions[o].y-i.bInfo.minimum.y*I)*B),U=Math.floor((i.facetPositions[o].z-i.bInfo.minimum.z*I)*L),z=Math.floor((e[_]-i.bInfo.minimum.x*I)*F),G=Math.floor((e[g]-i.bInfo.minimum.y*I)*B),W=Math.floor((e[b]-i.bInfo.minimum.z*I)*L),H=Math.floor((e[v]-i.bInfo.minimum.x*I)*F),X=Math.floor((e[M]-i.bInfo.minimum.y*I)*B),q=Math.floor((e[T]-i.bInfo.minimum.z*I)*L),K=Math.floor((e[S]-i.bInfo.minimum.x*I)*F),Y=Math.floor((e[C]-i.bInfo.minimum.y*I)*B),Q=Math.floor((e[E]-i.bInfo.minimum.z*I)*L),$=z+i.subDiv.max*G+V*W,J=H+i.subDiv.max*X+V*q,ee=K+i.subDiv.max*Y+V*Q,Z=N+i.subDiv.max*k+V*U,i.facetPartitioning[Z]=i.facetPartitioning[Z]?i.facetPartitioning[Z]:new Array,i.facetPartitioning[$]=i.facetPartitioning[$]?i.facetPartitioning[$]:new Array,i.facetPartitioning[J]=i.facetPartitioning[J]?i.facetPartitioning[J]:new Array,i.facetPartitioning[ee]=i.facetPartitioning[ee]?i.facetPartitioning[ee]:new Array,i.facetPartitioning[$].push(o),J!=$&&i.facetPartitioning[J].push(o),ee!=J&&ee!=$&&i.facetPartitioning[ee].push(o),Z!=$&&Z!=J&&Z!=ee&&i.facetPartitioning[Z].push(o)),O&&i&&i.facetPositions){var ne=D[o];ne.ind=3*o,ne.sqDistance=n["Vector3"].DistanceSquared(i.facetPositions[o],w)}r[_]+=h,r[g]+=f,r[b]+=p,r[v]+=h,r[M]+=f,r[T]+=p,r[S]+=h,r[C]+=f,r[E]+=p}for(o=0;o<r.length/3;o++)h=r[3*o],f=r[3*o+1],p=r[3*o+2],m=Math.sqrt(h*h+f*f+p*p),m=0===m?1:m,h/=m,f/=m,p/=m,r[3*o]=h,r[3*o+1]=f,r[3*o+2]=p},VertexData._ComputeSides=function(e,t,r,i,o,s,a){var u,c,l=r.length,d=i.length;switch(e=e||VertexData.DEFAULTSIDE,e){case VertexData.FRONTSIDE:break;case VertexData.BACKSIDE:var h;for(u=0;u<l;u+=3)h=r[u],r[u]=r[u+2],r[u+2]=h;for(c=0;c<d;c++)i[c]=-i[c];break;case VertexData.DOUBLESIDE:for(var f=t.length,p=f/3,m=0;m<f;m++)t[f+m]=t[m];for(u=0;u<l;u+=3)r[u+l]=r[u+2]+p,r[u+1+l]=r[u+1]+p,r[u+2+l]=r[u]+p;for(c=0;c<d;c++)i[d+c]=-i[c];var _=o.length,g=0;for(g=0;g<_;g++)o[g+_]=o[g];for(s=s||new n["Vector4"](0,0,1,1),a=a||new n["Vector4"](0,0,1,1),g=0,u=0;u<_/2;u++)o[g]=s.x+(s.z-s.x)*o[g],o[g+1]=s.y+(s.w-s.y)*o[g+1],o[g+_]=a.x+(a.z-a.x)*o[g+_],o[g+_+1]=a.y+(a.w-a.y)*o[g+_+1],g+=2;break}},VertexData.ImportVertexData=function(e,t){var r=new VertexData,n=e.positions;n&&r.set(n,i["VertexBuffer"].PositionKind);var o=e.normals;o&&r.set(o,i["VertexBuffer"].NormalKind);var a=e.tangents;a&&r.set(a,i["VertexBuffer"].TangentKind);var u=e.uvs;u&&r.set(u,i["VertexBuffer"].UVKind);var c=e.uv2s;c&&r.set(c,i["VertexBuffer"].UV2Kind);var l=e.uv3s;l&&r.set(l,i["VertexBuffer"].UV3Kind);var d=e.uv4s;d&&r.set(d,i["VertexBuffer"].UV4Kind);var h=e.uv5s;h&&r.set(h,i["VertexBuffer"].UV5Kind);var f=e.uv6s;f&&r.set(f,i["VertexBuffer"].UV6Kind);var p=e.colors;p&&r.set(s["Color4"].CheckColors4(p,n.length/3),i["VertexBuffer"].ColorKind);var m=e.matricesIndices;m&&r.set(m,i["VertexBuffer"].MatricesIndicesKind);var _=e.matricesWeights;_&&r.set(_,i["VertexBuffer"].MatricesWeightsKind);var g=e.indices;g&&(r.indices=g),t.setAllVerticesData(r,e.updatable)},VertexData.FRONTSIDE=0,VertexData.BACKSIDE=1,VertexData.DOUBLESIDE=2,VertexData.DEFAULTSIDE=0,VertexData}()},"./node_modules/@babylonjs/core/Meshes/meshBuilder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MeshBuilder",(function(){return E}));var n=r("./node_modules/@babylonjs/core/Meshes/Builders/ribbonBuilder.js"),i=r("./node_modules/@babylonjs/core/Meshes/Builders/discBuilder.js"),o=r("./node_modules/@babylonjs/core/Meshes/Builders/boxBuilder.js"),s=r("./node_modules/@babylonjs/core/Meshes/Builders/tiledBoxBuilder.js"),a=r("./node_modules/@babylonjs/core/Meshes/Builders/sphereBuilder.js"),u=r("./node_modules/@babylonjs/core/Meshes/Builders/cylinderBuilder.js"),c=r("./node_modules/@babylonjs/core/Meshes/Builders/torusBuilder.js"),l=r("./node_modules/@babylonjs/core/Meshes/Builders/torusKnotBuilder.js"),d=r("./node_modules/@babylonjs/core/Meshes/Builders/linesBuilder.js"),h=r("./node_modules/@babylonjs/core/Meshes/Builders/polygonBuilder.js"),f=r("./node_modules/@babylonjs/core/Meshes/Builders/shapeBuilder.js"),p=r("./node_modules/@babylonjs/core/Meshes/Builders/latheBuilder.js"),m=r("./node_modules/@babylonjs/core/Meshes/Builders/planeBuilder.js"),_=r("./node_modules/@babylonjs/core/Meshes/Builders/tiledPlaneBuilder.js"),g=r("./node_modules/@babylonjs/core/Meshes/Builders/groundBuilder.js"),b=r("./node_modules/@babylonjs/core/Meshes/Builders/tubeBuilder.js"),v=r("./node_modules/@babylonjs/core/Meshes/Builders/polyhedronBuilder.js"),M=r("./node_modules/@babylonjs/core/Meshes/Builders/icoSphereBuilder.js"),T=r("./node_modules/@babylonjs/core/Meshes/Builders/decalBuilder.js"),S=r("./node_modules/@babylonjs/core/Meshes/Builders/capsuleBuilder.js"),C=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),E=function(){function MeshBuilder(){}return MeshBuilder.CreateBox=function(e,t,r){return void 0===r&&(r=null),o["BoxBuilder"].CreateBox(e,t,r)},MeshBuilder.CreateTiledBox=function(e,t,r){return void 0===r&&(r=null),s["TiledBoxBuilder"].CreateTiledBox(e,t,r)},MeshBuilder.CreateSphere=function(e,t,r){return void 0===r&&(r=null),a["SphereBuilder"].CreateSphere(e,t,r)},MeshBuilder.CreateDisc=function(e,t,r){return void 0===r&&(r=null),i["DiscBuilder"].CreateDisc(e,t,r)},MeshBuilder.CreateIcoSphere=function(e,t,r){return void 0===r&&(r=null),M["IcoSphereBuilder"].CreateIcoSphere(e,t,r)},MeshBuilder.CreateRibbon=function(e,t,r){return void 0===r&&(r=null),n["RibbonBuilder"].CreateRibbon(e,t,r)},MeshBuilder.CreateCylinder=function(e,t,r){return void 0===r&&(r=null),u["CylinderBuilder"].CreateCylinder(e,t,r)},MeshBuilder.CreateTorus=function(e,t,r){return void 0===r&&(r=null),c["TorusBuilder"].CreateTorus(e,t,r)},MeshBuilder.CreateTorusKnot=function(e,t,r){return void 0===r&&(r=null),l["TorusKnotBuilder"].CreateTorusKnot(e,t,r)},MeshBuilder.CreateLineSystem=function(e,t,r){return d["LinesBuilder"].CreateLineSystem(e,t,r)},MeshBuilder.CreateLines=function(e,t,r){return void 0===r&&(r=null),d["LinesBuilder"].CreateLines(e,t,r)},MeshBuilder.CreateDashedLines=function(e,t,r){return void 0===r&&(r=null),d["LinesBuilder"].CreateDashedLines(e,t,r)},MeshBuilder.ExtrudeShape=function(e,t,r){return void 0===r&&(r=null),f["ShapeBuilder"].ExtrudeShape(e,t,r)},MeshBuilder.ExtrudeShapeCustom=function(e,t,r){return void 0===r&&(r=null),f["ShapeBuilder"].ExtrudeShapeCustom(e,t,r)},MeshBuilder.CreateLathe=function(e,t,r){return void 0===r&&(r=null),p["LatheBuilder"].CreateLathe(e,t,r)},MeshBuilder.CreateTiledPlane=function(e,t,r){return void 0===r&&(r=null),_["TiledPlaneBuilder"].CreateTiledPlane(e,t,r)},MeshBuilder.CreatePlane=function(e,t,r){return void 0===r&&(r=null),m["PlaneBuilder"].CreatePlane(e,t,r)},MeshBuilder.CreateGround=function(e,t,r){return void 0===r&&(r=null),g["GroundBuilder"].CreateGround(e,t,r)},MeshBuilder.CreateTiledGround=function(e,t,r){return void 0===r&&(r=null),g["GroundBuilder"].CreateTiledGround(e,t,r)},MeshBuilder.CreateGroundFromHeightMap=function(e,t,r,n){return void 0===n&&(n=null),g["GroundBuilder"].CreateGroundFromHeightMap(e,t,r,n)},MeshBuilder.CreatePolygon=function(e,t,r,n){return void 0===r&&(r=null),void 0===n&&(n=earcut),h["PolygonBuilder"].CreatePolygon(e,t,r,n)},MeshBuilder.ExtrudePolygon=function(e,t,r,n){return void 0===r&&(r=null),void 0===n&&(n=earcut),h["PolygonBuilder"].ExtrudePolygon(e,t,r,n)},MeshBuilder.CreateTube=function(e,t,r){return void 0===r&&(r=null),b["TubeBuilder"].CreateTube(e,t,r)},MeshBuilder.CreatePolyhedron=function(e,t,r){return void 0===r&&(r=null),v["PolyhedronBuilder"].CreatePolyhedron(e,t,r)},MeshBuilder.CreateDecal=function(e,t,r){return T["DecalBuilder"].CreateDecal(e,t,r)},MeshBuilder.CreateCapsule=function(e,t,r){return void 0===t&&(t={orientation:C["Vector3"].Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}),void 0===r&&(r=null),S["CapsuleBuilder"].CreateCapsule(e,t,r)},MeshBuilder}()},"./node_modules/@babylonjs/core/Meshes/meshLODLevel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"MeshLODLevel",(function(){return n}));var n=function(){function MeshLODLevel(e,t){this.distance=e,this.mesh=t}return MeshLODLevel}()},"./node_modules/@babylonjs/core/Meshes/polygonMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Polygon",(function(){return f})),r.d(t,"PolygonMeshBuilder",(function(){return p}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/logger.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),a=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),u=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),c=r("./node_modules/@babylonjs/core/Engines/engine.js"),l=r("./node_modules/@babylonjs/core/Maths/math.path.js"),d=function(e){function IndexedVector2(t,r){var n=e.call(this,t.x,t.y)||this;return n.index=r,n}return Object(n["__extends"])(IndexedVector2,e),IndexedVector2}(o["Vector2"]),h=function(){function PolygonPoints(){this.elements=new Array}return PolygonPoints.prototype.add=function(e){var t=this,r=new Array;return e.forEach((function(e){var n=new d(e,t.elements.length);r.push(n),t.elements.push(n)})),r},PolygonPoints.prototype.computeBounds=function(){var e=new o["Vector2"](this.elements[0].x,this.elements[0].y),t=new o["Vector2"](this.elements[0].x,this.elements[0].y);return this.elements.forEach((function(r){r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y)})),{min:e,max:t,width:t.x-e.x,height:t.y-e.y}},PolygonPoints}(),f=function(){function Polygon(){}return Polygon.Rectangle=function(e,t,r,n){return[new o["Vector2"](e,t),new o["Vector2"](r,t),new o["Vector2"](r,n),new o["Vector2"](e,n)]},Polygon.Circle=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=32);for(var i=new Array,s=0,a=2*Math.PI/n,u=0;u<n;u++)i.push(new o["Vector2"](t+Math.cos(s)*e,r+Math.sin(s)*e)),s-=a;return i},Polygon.Parse=function(e){var t,r=e.split(/[^-+eE\.\d]+/).map(parseFloat).filter((function(e){return!isNaN(e)})),n=[];for(t=0;t<(2147483646&r.length);t+=2)n.push(new o["Vector2"](r[t],r[t+1]));return n},Polygon.StartingAt=function(e,t){return l["Path2"].StartingAt(e,t)},Polygon}(),p=function(){function PolygonMeshBuilder(e,t,r,n){var o;void 0===n&&(n=earcut),this._points=new h,this._outlinepoints=new h,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=n,this._name=e,this._scene=r||c["Engine"].LastCreatedScene,o=t instanceof l["Path2"]?t.getPoints():t,this._addToepoint(o),this._points.add(o),this._outlinepoints.add(o),"undefined"===typeof this.bjsEarcut&&i["Logger"].Warn("Earcut was not found, the polygon will not be built.")}return PolygonMeshBuilder.prototype._addToepoint=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._epoints.push(n.x,n.y)}},PolygonMeshBuilder.prototype.addHole=function(e){this._points.add(e);var t=new h;return t.add(e),this._holes.push(t),this._eholes.push(this._epoints.length/2),this._addToepoint(e),this},PolygonMeshBuilder.prototype.build=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var r=new a["Mesh"](this._name,this._scene),n=this.buildVertexData(t);return r.setVerticesData(s["VertexBuffer"].PositionKind,n.positions,e),r.setVerticesData(s["VertexBuffer"].NormalKind,n.normals,e),r.setVerticesData(s["VertexBuffer"].UVKind,n.uvs,e),r.setIndices(n.indices),r},PolygonMeshBuilder.prototype.buildVertexData=function(e){var t=this;void 0===e&&(e=0);var r=new u["VertexData"],n=new Array,i=new Array,o=new Array,s=this._points.computeBounds();this._points.elements.forEach((function(e){n.push(0,1,0),i.push(e.x,0,e.y),o.push((e.x-s.min.x)/s.width,(e.y-s.min.y)/s.height)}));for(var a=new Array,c=this.bjsEarcut(this._epoints,this._eholes,2),l=0;l<c.length;l++)a.push(c[l]);if(e>0){var d=i.length/3;this._points.elements.forEach((function(t){n.push(0,-1,0),i.push(t.x,-e,t.y),o.push(1-(t.x-s.min.x)/s.width,1-(t.y-s.min.y)/s.height)}));var h=a.length;for(l=0;l<h;l+=3){var f=a[l+0],p=a[l+1],m=a[l+2];a.push(m+d),a.push(p+d),a.push(f+d)}this.addSide(i,n,o,a,s,this._outlinepoints,e,!1),this._holes.forEach((function(r){t.addSide(i,n,o,a,s,r,e,!0)}))}return r.indices=a,r.positions=i,r.normals=n,r.uvs=o,r},PolygonMeshBuilder.prototype.addSide=function(e,t,r,n,i,s,a,u){for(var c=e.length/3,l=0,d=0;d<s.elements.length;d++){var h,f=s.elements[d];h=d+1>s.elements.length-1?s.elements[0]:s.elements[d+1],e.push(f.x,0,f.y),e.push(f.x,-a,f.y),e.push(h.x,0,h.y),e.push(h.x,-a,h.y);var p=new o["Vector3"](f.x,0,f.y),m=new o["Vector3"](h.x,0,h.y),_=m.subtract(p),g=new o["Vector3"](0,1,0),b=o["Vector3"].Cross(_,g);b=b.normalize(),r.push(l/i.width,0),r.push(l/i.width,1),l+=_.length(),r.push(l/i.width,0),r.push(l/i.width,1),u?(t.push(b.x,b.y,b.z),t.push(b.x,b.y,b.z),t.push(b.x,b.y,b.z),t.push(b.x,b.y,b.z),n.push(c),n.push(c+2),n.push(c+1),n.push(c+1),n.push(c+2),n.push(c+3)):(t.push(-b.x,-b.y,-b.z),t.push(-b.x,-b.y,-b.z),t.push(-b.x,-b.y,-b.z),t.push(-b.x,-b.y,-b.z),n.push(c),n.push(c+1),n.push(c+2),n.push(c+1),n.push(c+3),n.push(c+2)),c+=4}},PolygonMeshBuilder}()},"./node_modules/@babylonjs/core/Meshes/subMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SubMesh",(function(){return a}));var n=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),i=r("./node_modules/@babylonjs/core/Collisions/intersectionInfo.js"),o=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),s=r("./node_modules/@babylonjs/core/Maths/math.functions.js"),a=function(){function SubMesh(e,t,r,n,i,o,s,a,u){void 0===a&&(a=!0),void 0===u&&(u=!0),this.materialIndex=e,this.verticesStart=t,this.verticesCount=r,this.indexStart=n,this.indexCount=i,this._materialDefines=null,this._materialEffect=null,this._effectOverride=null,this._linesIndexCount=0,this._linesIndexBuffer=null,this._lastColliderWorldVertices=null,this._lastColliderTransformMatrix=null,this._renderId=0,this._alphaIndex=0,this._distanceToCamera=0,this._currentMaterial=null,this._mesh=o,this._renderingMesh=s||o,u&&o.subMeshes.push(this),this._trianglePlanes=[],this._id=o.subMeshes.length-1,a&&(this.refreshBoundingInfo(),o.computeWorldMatrix(!0))}return Object.defineProperty(SubMesh.prototype,"materialDefines",{get:function(){return this._materialDefines},set:function(e){this._materialDefines=e},enumerable:!1,configurable:!0}),Object.defineProperty(SubMesh.prototype,"effect",{get:function(){var e;return null!==(e=this._effectOverride)&&void 0!==e?e:this._materialEffect},enumerable:!1,configurable:!0}),SubMesh.prototype.setEffect=function(e,t){void 0===t&&(t=null),this._materialEffect!==e?(this._materialDefines=t,this._materialEffect=e):e||(this._materialDefines=null)},SubMesh.AddToMesh=function(e,t,r,n,i,o,s,a){return void 0===a&&(a=!0),new SubMesh(e,t,r,n,i,o,s,a)},Object.defineProperty(SubMesh.prototype,"IsGlobal",{get:function(){return 0===this.verticesStart&&this.verticesCount===this._mesh.getTotalVertices()},enumerable:!1,configurable:!0}),SubMesh.prototype.getBoundingInfo=function(){return this.IsGlobal?this._mesh.getBoundingInfo():this._boundingInfo},SubMesh.prototype.setBoundingInfo=function(e){return this._boundingInfo=e,this},SubMesh.prototype.getMesh=function(){return this._mesh},SubMesh.prototype.getRenderingMesh=function(){return this._renderingMesh},SubMesh.prototype.getReplacementMesh=function(){return this._mesh._internalAbstractMeshDataInfo._actAsRegularMesh?this._mesh:null},SubMesh.prototype.getEffectiveMesh=function(){var e=this._mesh._internalAbstractMeshDataInfo._actAsRegularMesh?this._mesh:null;return e||this._renderingMesh},SubMesh.prototype.getMaterial=function(){var e=this._renderingMesh.material;if(null===e||void 0===e)return this._mesh.getScene().defaultMaterial;if(this._IsMultiMaterial(e)){var t=e.getSubMaterial(this.materialIndex);return this._currentMaterial!==t&&(this._currentMaterial=t,this._materialDefines=null),t}return e},SubMesh.prototype._IsMultiMaterial=function(e){return void 0!==e.getSubMaterial},SubMesh.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=null),this._lastColliderWorldVertices=null,this.IsGlobal||!this._renderingMesh||!this._renderingMesh.geometry)return this;if(e||(e=this._renderingMesh.getVerticesData(n["VertexBuffer"].PositionKind)),!e)return this._boundingInfo=this._mesh.getBoundingInfo(),this;var t,r=this._renderingMesh.getIndices();if(0===this.indexStart&&this.indexCount===r.length){var i=this._renderingMesh.getBoundingInfo();t={minimum:i.minimum.clone(),maximum:i.maximum.clone()}}else t=Object(s["extractMinAndMaxIndexed"])(e,r,this.indexStart,this.indexCount,this._renderingMesh.geometry.boundingBias);return this._boundingInfo?this._boundingInfo.reConstruct(t.minimum,t.maximum):this._boundingInfo=new o["BoundingInfo"](t.minimum,t.maximum),this},SubMesh.prototype._checkCollision=function(e){var t=this.getBoundingInfo();return t._checkCollision(e)},SubMesh.prototype.updateBoundingInfo=function(e){var t=this.getBoundingInfo();return t||(this.refreshBoundingInfo(),t=this.getBoundingInfo()),t&&t.update(e),this},SubMesh.prototype.isInFrustum=function(e){var t=this.getBoundingInfo();return!!t&&t.isInFrustum(e,this._mesh.cullingStrategy)},SubMesh.prototype.isCompletelyInFrustum=function(e){var t=this.getBoundingInfo();return!!t&&t.isCompletelyInFrustum(e)},SubMesh.prototype.render=function(e){return this._renderingMesh.render(this,e,this._mesh._internalAbstractMeshDataInfo._actAsRegularMesh?this._mesh:void 0),this},SubMesh.prototype._getLinesIndexBuffer=function(e,t){if(!this._linesIndexBuffer){for(var r=[],n=this.indexStart;n<this.indexStart+this.indexCount;n+=3)r.push(e[n],e[n+1],e[n+1],e[n+2],e[n+2],e[n]);this._linesIndexBuffer=t.createIndexBuffer(r),this._linesIndexCount=r.length}return this._linesIndexBuffer},SubMesh.prototype.canIntersects=function(e){var t=this.getBoundingInfo();return!!t&&e.intersectsBox(t.boundingBox)},SubMesh.prototype.intersects=function(e,t,r,n,i){var o=this.getMaterial();if(!o)return null;var s=3,a=!1;switch(o.fillMode){case 3:case 4:case 5:case 6:case 8:return null;case 7:s=1,a=!0;break;default:break}return"InstancedLinesMesh"===this._mesh.getClassName()||"LinesMesh"===this._mesh.getClassName()?r.length?this._intersectLines(e,t,r,this._mesh.intersectionThreshold,n):this._intersectUnIndexedLines(e,t,r,this._mesh.intersectionThreshold,n):!r.length&&this._mesh._unIndexed?this._intersectUnIndexedTriangles(e,t,r,n,i):this._intersectTriangles(e,t,r,s,a,n,i)},SubMesh.prototype._intersectLines=function(e,t,r,n,o){for(var s=null,a=this.indexStart;a<this.indexStart+this.indexCount;a+=2){var u=t[r[a]],c=t[r[a+1]],l=e.intersectionSegment(u,c,n);if(!(l<0)&&((o||!s||l<s.distance)&&(s=new i["IntersectionInfo"](null,null,l),s.faceId=a/2,o)))break}return s},SubMesh.prototype._intersectUnIndexedLines=function(e,t,r,n,o){for(var s=null,a=this.verticesStart;a<this.verticesStart+this.verticesCount;a+=2){var u=t[a],c=t[a+1],l=e.intersectionSegment(u,c,n);if(!(l<0)&&((o||!s||l<s.distance)&&(s=new i["IntersectionInfo"](null,null,l),s.faceId=a/2,o)))break}return s},SubMesh.prototype._intersectTriangles=function(e,t,r,n,i,o,s){for(var a=null,u=-1,c=this.indexStart;c<this.indexStart+this.indexCount;c+=n){u++;var l=r[c],d=r[c+1],h=r[c+2];if(i&&4294967295===h)c+=2;else{var f=t[l],p=t[d],m=t[h];if(!s||s(f,p,m,e)){var _=e.intersectsTriangle(f,p,m);if(_){if(_.distance<0)continue;if((o||!a||_.distance<a.distance)&&(a=_,a.faceId=u,o))break}}}}return a},SubMesh.prototype._intersectUnIndexedTriangles=function(e,t,r,n,i){for(var o=null,s=this.verticesStart;s<this.verticesStart+this.verticesCount;s+=3){var a=t[s],u=t[s+1],c=t[s+2];if(!i||i(a,u,c,e)){var l=e.intersectsTriangle(a,u,c);if(l){if(l.distance<0)continue;if((n||!o||l.distance<o.distance)&&(o=l,o.faceId=s/3,n))break}}}return o},SubMesh.prototype._rebuild=function(){this._linesIndexBuffer&&(this._linesIndexBuffer=null)},SubMesh.prototype.clone=function(e,t){var r=new SubMesh(this.materialIndex,this.verticesStart,this.verticesCount,this.indexStart,this.indexCount,e,t,!1);if(!this.IsGlobal){var n=this.getBoundingInfo();if(!n)return r;r._boundingInfo=new o["BoundingInfo"](n.minimum,n.maximum)}return r},SubMesh.prototype.dispose=function(){this._linesIndexBuffer&&(this._mesh.getScene().getEngine()._releaseBuffer(this._linesIndexBuffer),this._linesIndexBuffer=null);var e=this._mesh.subMeshes.indexOf(this);this._mesh.subMeshes.splice(e,1)},SubMesh.prototype.getClassName=function(){return"SubMesh"},SubMesh.CreateFromIndices=function(e,t,r,n,i){for(var o=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=i||n,u=a.getIndices(),c=t;c<t+r;c++){var l=u[c];l<o&&(o=l),l>s&&(s=l)}return new SubMesh(e,o,s-o+1,t,r,n,i)},SubMesh}()},"./node_modules/@babylonjs/core/Meshes/transformNode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TransformNode",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/node.js"),u=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),c=function(e){function TransformNode(t,r,n){void 0===r&&(r=null),void 0===n&&(n=!0);var i=e.call(this,t,r)||this;return i._forward=new s["Vector3"](0,0,1),i._forwardInverted=new s["Vector3"](0,0,-1),i._up=new s["Vector3"](0,1,0),i._right=new s["Vector3"](1,0,0),i._rightInverted=new s["Vector3"](-1,0,0),i._position=s["Vector3"].Zero(),i._rotation=s["Vector3"].Zero(),i._rotationQuaternion=null,i._scaling=s["Vector3"].One(),i._isDirty=!1,i._transformToBoneReferal=null,i._isAbsoluteSynced=!1,i._billboardMode=TransformNode.BILLBOARDMODE_NONE,i._preserveParentRotationForBillboard=!1,i.scalingDeterminant=1,i._infiniteDistance=!1,i.ignoreNonUniformScaling=!1,i.reIntegrateRotationIntoRotationQuaternion=!1,i._poseMatrix=null,i._localMatrix=s["Matrix"].Zero(),i._usePivotMatrix=!1,i._absolutePosition=s["Vector3"].Zero(),i._absoluteScaling=s["Vector3"].Zero(),i._absoluteRotationQuaternion=s["Quaternion"].Identity(),i._pivotMatrix=s["Matrix"].Identity(),i._postMultiplyPivotMatrix=!1,i._isWorldMatrixFrozen=!1,i._indexInSceneTransformNodesArray=-1,i.onAfterWorldMatrixUpdateObservable=new o["Observable"],i._nonUniformScaling=!1,n&&i.getScene().addTransformNode(i),i}return Object(n["__extends"])(TransformNode,e),Object.defineProperty(TransformNode.prototype,"billboardMode",{get:function(){return this._billboardMode},set:function(e){this._billboardMode!==e&&(this._billboardMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"preserveParentRotationForBillboard",{get:function(){return this._preserveParentRotationForBillboard},set:function(e){e!==this._preserveParentRotationForBillboard&&(this._preserveParentRotationForBillboard=e)},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"infiniteDistance",{get:function(){return this._infiniteDistance},set:function(e){this._infiniteDistance!==e&&(this._infiniteDistance=e)},enumerable:!1,configurable:!0}),TransformNode.prototype.getClassName=function(){return"TransformNode"},Object.defineProperty(TransformNode.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this._rotationQuaternion=null,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"scaling",{get:function(){return this._scaling},set:function(e){this._scaling=e,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"rotationQuaternion",{get:function(){return this._rotationQuaternion},set:function(e){this._rotationQuaternion=e,e&&this._rotation.setAll(0),this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"forward",{get:function(){return s["Vector3"].Normalize(s["Vector3"].TransformNormal(this.getScene().useRightHandedSystem?this._forwardInverted:this._forward,this.getWorldMatrix()))},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"up",{get:function(){return s["Vector3"].Normalize(s["Vector3"].TransformNormal(this._up,this.getWorldMatrix()))},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"right",{get:function(){return s["Vector3"].Normalize(s["Vector3"].TransformNormal(this.getScene().useRightHandedSystem?this._rightInverted:this._right,this.getWorldMatrix()))},enumerable:!1,configurable:!0}),TransformNode.prototype.updatePoseMatrix=function(e){return this._poseMatrix?(this._poseMatrix.copyFrom(e),this):(this._poseMatrix=e.clone(),this)},TransformNode.prototype.getPoseMatrix=function(){return this._poseMatrix||(this._poseMatrix=s["Matrix"].Identity()),this._poseMatrix},TransformNode.prototype._isSynchronized=function(){var e=this._cache;return this.billboardMode===e.billboardMode&&this.billboardMode===TransformNode.BILLBOARDMODE_NONE&&(!e.pivotMatrixUpdated&&(!this.infiniteDistance&&(!this.position._isDirty&&(!this.scaling._isDirty&&!(this._rotationQuaternion&&this._rotationQuaternion._isDirty||this.rotation._isDirty)))))},TransformNode.prototype._initCache=function(){e.prototype._initCache.call(this);var t=this._cache;t.localMatrixUpdated=!1,t.billboardMode=-1,t.infiniteDistance=!1},TransformNode.prototype.markAsDirty=function(e){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this},Object.defineProperty(TransformNode.prototype,"absolutePosition",{get:function(){return this._absolutePosition},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"absoluteScaling",{get:function(){return this._syncAbsoluteScalingAndRotation(),this._absoluteScaling},enumerable:!1,configurable:!0}),Object.defineProperty(TransformNode.prototype,"absoluteRotationQuaternion",{get:function(){return this._syncAbsoluteScalingAndRotation(),this._absoluteRotationQuaternion},enumerable:!1,configurable:!0}),TransformNode.prototype.setPreTransformMatrix=function(e){return this.setPivotMatrix(e,!1)},TransformNode.prototype.setPivotMatrix=function(e,t){return void 0===t&&(t=!0),this._pivotMatrix.copyFrom(e),this._usePivotMatrix=!this._pivotMatrix.isIdentity(),this._cache.pivotMatrixUpdated=!0,this._postMultiplyPivotMatrix=t,this._postMultiplyPivotMatrix&&(this._pivotMatrixInverse?this._pivotMatrix.invertToRef(this._pivotMatrixInverse):this._pivotMatrixInverse=s["Matrix"].Invert(this._pivotMatrix)),this},TransformNode.prototype.getPivotMatrix=function(){return this._pivotMatrix},TransformNode.prototype.instantiateHierarchy=function(e,t,r){void 0===e&&(e=null);var n=this.clone("Clone of "+(this.name||this.id),e||this.parent,!0);n&&r&&r(this,n);for(var i=0,o=this.getChildTransformNodes(!0);i<o.length;i++){var s=o[i];s.instantiateHierarchy(n,t,r)}return n},TransformNode.prototype.freezeWorldMatrix=function(e){return void 0===e&&(e=null),e?this._worldMatrix=e:(this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0)),this._isDirty=!1,this._isWorldMatrixFrozen=!0,this},TransformNode.prototype.unfreezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this},Object.defineProperty(TransformNode.prototype,"isWorldMatrixFrozen",{get:function(){return this._isWorldMatrixFrozen},enumerable:!1,configurable:!0}),TransformNode.prototype.getAbsolutePosition=function(){return this.computeWorldMatrix(),this._absolutePosition},TransformNode.prototype.setAbsolutePosition=function(e){if(!e)return this;var t,r,n;if(void 0===e.x){if(arguments.length<3)return this;t=arguments[0],r=arguments[1],n=arguments[2]}else t=e.x,r=e.y,n=e.z;if(this.parent){var i=s["TmpVectors"].Matrix[0];this.parent.getWorldMatrix().invertToRef(i),s["Vector3"].TransformCoordinatesFromFloatsToRef(t,r,n,i,this.position)}else this.position.x=t,this.position.y=r,this.position.z=n;return this._absolutePosition.copyFrom(e),this},TransformNode.prototype.setPositionWithLocalVector=function(e){return this.computeWorldMatrix(),this.position=s["Vector3"].TransformNormal(e,this._localMatrix),this},TransformNode.prototype.getPositionExpressedInLocalSpace=function(){this.computeWorldMatrix();var e=s["TmpVectors"].Matrix[0];return this._localMatrix.invertToRef(e),s["Vector3"].TransformNormal(this.position,e)},TransformNode.prototype.locallyTranslate=function(e){return this.computeWorldMatrix(!0),this.position=s["Vector3"].TransformCoordinates(e,this._localMatrix),this},TransformNode.prototype.lookAt=function(e,t,r,n,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=u["Space"].LOCAL);var o=TransformNode._lookAtVectorCache,a=i===u["Space"].LOCAL?this.position:this.getAbsolutePosition();if(e.subtractToRef(a,o),this.setDirection(o,t,r,n),i===u["Space"].WORLD&&this.parent)if(this.rotationQuaternion){var c=s["TmpVectors"].Matrix[0];this.rotationQuaternion.toRotationMatrix(c);var l=s["TmpVectors"].Matrix[1];this.parent.getWorldMatrix().getRotationMatrixToRef(l),l.invert(),c.multiplyToRef(l,c),this.rotationQuaternion.fromRotationMatrix(c)}else{var d=s["TmpVectors"].Quaternion[0];s["Quaternion"].FromEulerVectorToRef(this.rotation,d);c=s["TmpVectors"].Matrix[0];d.toRotationMatrix(c);l=s["TmpVectors"].Matrix[1];this.parent.getWorldMatrix().getRotationMatrixToRef(l),l.invert(),c.multiplyToRef(l,c),d.fromRotationMatrix(c),d.toEulerAnglesToRef(this.rotation)}return this},TransformNode.prototype.getDirection=function(e){var t=s["Vector3"].Zero();return this.getDirectionToRef(e,t),t},TransformNode.prototype.getDirectionToRef=function(e,t){return s["Vector3"].TransformNormalToRef(e,this.getWorldMatrix(),t),this},TransformNode.prototype.setDirection=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0);var i=-Math.atan2(e.z,e.x)+Math.PI/2,o=Math.sqrt(e.x*e.x+e.z*e.z),a=-Math.atan2(e.y,o);return this.rotationQuaternion?s["Quaternion"].RotationYawPitchRollToRef(i+t,a+r,n,this.rotationQuaternion):(this.rotation.x=a+r,this.rotation.y=i+t,this.rotation.z=n),this},TransformNode.prototype.setPivotPoint=function(e,t){void 0===t&&(t=u["Space"].LOCAL),0==this.getScene().getRenderId()&&this.computeWorldMatrix(!0);var r=this.getWorldMatrix();if(t==u["Space"].WORLD){var n=s["TmpVectors"].Matrix[0];r.invertToRef(n),e=s["Vector3"].TransformCoordinates(e,n)}return this.setPivotMatrix(s["Matrix"].Translation(-e.x,-e.y,-e.z),!0)},TransformNode.prototype.getPivotPoint=function(){var e=s["Vector3"].Zero();return this.getPivotPointToRef(e),e},TransformNode.prototype.getPivotPointToRef=function(e){return e.x=-this._pivotMatrix.m[12],e.y=-this._pivotMatrix.m[13],e.z=-this._pivotMatrix.m[14],this},TransformNode.prototype.getAbsolutePivotPoint=function(){var e=s["Vector3"].Zero();return this.getAbsolutePivotPointToRef(e),e},TransformNode.prototype.getAbsolutePivotPointToRef=function(e){return this.getPivotPointToRef(e),s["Vector3"].TransformCoordinatesToRef(e,this.getWorldMatrix(),e),this},TransformNode.prototype.setParent=function(e){if(!e&&!this.parent)return this;var t=s["TmpVectors"].Quaternion[0],r=s["TmpVectors"].Vector3[0],n=s["TmpVectors"].Vector3[1];if(e){var i=s["TmpVectors"].Matrix[0],o=s["TmpVectors"].Matrix[1];this.computeWorldMatrix(!0),e.computeWorldMatrix(!0),e.getWorldMatrix().invertToRef(o),this.getWorldMatrix().multiplyToRef(o,i),i.decompose(n,t,r)}else this.computeWorldMatrix(!0),this.getWorldMatrix().decompose(n,t,r);return this.rotationQuaternion?this.rotationQuaternion.copyFrom(t):t.toEulerAnglesToRef(this.rotation),this.scaling.copyFrom(n),this.position.copyFrom(r),this.parent=e,this},Object.defineProperty(TransformNode.prototype,"nonUniformScaling",{get:function(){return this._nonUniformScaling},enumerable:!1,configurable:!0}),TransformNode.prototype._updateNonUniformScalingState=function(e){return this._nonUniformScaling!==e&&(this._nonUniformScaling=e,!0)},TransformNode.prototype.attachToBone=function(e,t){return this._transformToBoneReferal=t,this.parent=e,e.getSkeleton().prepare(),e.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this},TransformNode.prototype.detachFromBone=function(){return this.parent?(this.parent.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this._transformToBoneReferal=null,this.parent=null,this):this},TransformNode.prototype.rotate=function(e,t,r){var n;if(e.normalize(),this.rotationQuaternion||(this.rotationQuaternion=this.rotation.toQuaternion(),this.rotation.setAll(0)),r&&r!==u["Space"].LOCAL){if(this.parent){var i=s["TmpVectors"].Matrix[0];this.parent.getWorldMatrix().invertToRef(i),e=s["Vector3"].TransformNormal(e,i)}n=s["Quaternion"].RotationAxisToRef(e,t,TransformNode._rotationAxisCache),n.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)}else n=s["Quaternion"].RotationAxisToRef(e,t,TransformNode._rotationAxisCache),this.rotationQuaternion.multiplyToRef(n,this.rotationQuaternion);return this},TransformNode.prototype.rotateAround=function(e,t,r){t.normalize(),this.rotationQuaternion||(this.rotationQuaternion=s["Quaternion"].RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z),this.rotation.setAll(0));var n=s["TmpVectors"].Vector3[0],i=s["TmpVectors"].Vector3[1],o=s["TmpVectors"].Vector3[2],a=s["TmpVectors"].Quaternion[0],u=s["TmpVectors"].Matrix[0],c=s["TmpVectors"].Matrix[1],l=s["TmpVectors"].Matrix[2],d=s["TmpVectors"].Matrix[3];return e.subtractToRef(this.position,n),s["Matrix"].TranslationToRef(n.x,n.y,n.z,u),s["Matrix"].TranslationToRef(-n.x,-n.y,-n.z,c),s["Matrix"].RotationAxisToRef(t,r,l),c.multiplyToRef(l,d),d.multiplyToRef(u,d),d.decompose(i,a,o),this.position.addInPlace(o),a.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion),this},TransformNode.prototype.translate=function(e,t,r){var n=e.scale(t);if(r&&r!==u["Space"].LOCAL)this.setAbsolutePosition(this.getAbsolutePosition().add(n));else{var i=this.getPositionExpressedInLocalSpace().add(n);this.setPositionWithLocalVector(i)}return this},TransformNode.prototype.addRotation=function(e,t,r){var n;this.rotationQuaternion?n=this.rotationQuaternion:(n=s["TmpVectors"].Quaternion[1],s["Quaternion"].RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,n));var i=s["TmpVectors"].Quaternion[0];return s["Quaternion"].RotationYawPitchRollToRef(t,e,r,i),n.multiplyInPlace(i),this.rotationQuaternion||n.toEulerAnglesToRef(this.rotation),this},TransformNode.prototype._getEffectiveParent=function(){return this.parent},TransformNode.prototype.computeWorldMatrix=function(e){if(this._isWorldMatrixFrozen&&!this._isDirty)return this._worldMatrix;var t=this.getScene().getRenderId();if(!this._isDirty&&!e&&this.isSynchronized())return this._currentRenderId=t,this._worldMatrix;var r=this.getScene().activeCamera,n=0!==(this._billboardMode&TransformNode.BILLBOARDMODE_USE_POSITION),i=this._billboardMode!==TransformNode.BILLBOARDMODE_NONE&&!this.preserveParentRotationForBillboard;i&&r&&n&&(this.lookAt(r.position),(this.billboardMode&TransformNode.BILLBOARDMODE_X)!==TransformNode.BILLBOARDMODE_X&&(this.rotation.x=0),(this.billboardMode&TransformNode.BILLBOARDMODE_Y)!==TransformNode.BILLBOARDMODE_Y&&(this.rotation.y=0),(this.billboardMode&TransformNode.BILLBOARDMODE_Z)!==TransformNode.BILLBOARDMODE_Z&&(this.rotation.z=0)),this._updateCache();var o=this._cache;o.pivotMatrixUpdated=!1,o.billboardMode=this.billboardMode,o.infiniteDistance=this.infiniteDistance,this._currentRenderId=t,this._childUpdateId++,this._isDirty=!1,this._position._isDirty=!1,this._rotation._isDirty=!1,this._scaling._isDirty=!1;var a,u=this._getEffectiveParent(),c=TransformNode._TmpScaling,l=this._position;if(this._infiniteDistance&&!this.parent&&r){var d=r.getWorldMatrix(),h=new s["Vector3"](d.m[12],d.m[13],d.m[14]);l=TransformNode._TmpTranslation,l.copyFromFloats(this._position.x+h.x,this._position.y+h.y,this._position.z+h.z)}if(c.copyFromFloats(this._scaling.x*this.scalingDeterminant,this._scaling.y*this.scalingDeterminant,this._scaling.z*this.scalingDeterminant),this._rotationQuaternion){if(this._rotationQuaternion._isDirty=!1,a=this._rotationQuaternion,this.reIntegrateRotationIntoRotationQuaternion){var f=this.rotation.lengthSquared();f&&(this._rotationQuaternion.multiplyInPlace(s["Quaternion"].RotationYawPitchRoll(this._rotation.y,this._rotation.x,this._rotation.z)),this._rotation.copyFromFloats(0,0,0))}}else a=TransformNode._TmpRotation,s["Quaternion"].RotationYawPitchRollToRef(this._rotation.y,this._rotation.x,this._rotation.z,a);if(this._usePivotMatrix){var p=s["TmpVectors"].Matrix[1];s["Matrix"].ScalingToRef(c.x,c.y,c.z,p);var m=s["TmpVectors"].Matrix[0];a.toRotationMatrix(m),this._pivotMatrix.multiplyToRef(p,s["TmpVectors"].Matrix[4]),s["TmpVectors"].Matrix[4].multiplyToRef(m,this._localMatrix),this._postMultiplyPivotMatrix&&this._localMatrix.multiplyToRef(this._pivotMatrixInverse,this._localMatrix),this._localMatrix.addTranslationFromFloats(l.x,l.y,l.z)}else s["Matrix"].ComposeToRef(c,a,l,this._localMatrix);if(u&&u.getWorldMatrix){if(e&&u.computeWorldMatrix(),i){this._transformToBoneReferal?u.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),s["TmpVectors"].Matrix[7]):s["TmpVectors"].Matrix[7].copyFrom(u.getWorldMatrix());var _=s["TmpVectors"].Vector3[5],g=s["TmpVectors"].Vector3[6];s["TmpVectors"].Matrix[7].decompose(g,void 0,_),s["Matrix"].ScalingToRef(g.x,g.y,g.z,s["TmpVectors"].Matrix[7]),s["TmpVectors"].Matrix[7].setTranslation(_),this._localMatrix.multiplyToRef(s["TmpVectors"].Matrix[7],this._worldMatrix)}else this._transformToBoneReferal?(this._localMatrix.multiplyToRef(u.getWorldMatrix(),s["TmpVectors"].Matrix[6]),s["TmpVectors"].Matrix[6].multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),this._worldMatrix)):this._localMatrix.multiplyToRef(u.getWorldMatrix(),this._worldMatrix);this._markSyncedWithParent()}else this._worldMatrix.copyFrom(this._localMatrix);if(i&&r&&this.billboardMode&&!n){var b=s["TmpVectors"].Vector3[0];if(this._worldMatrix.getTranslationToRef(b),s["TmpVectors"].Matrix[1].copyFrom(r.getViewMatrix()),s["TmpVectors"].Matrix[1].setTranslationFromFloats(0,0,0),s["TmpVectors"].Matrix[1].invertToRef(s["TmpVectors"].Matrix[0]),(this.billboardMode&TransformNode.BILLBOARDMODE_ALL)!==TransformNode.BILLBOARDMODE_ALL){s["TmpVectors"].Matrix[0].decompose(void 0,s["TmpVectors"].Quaternion[0],void 0);var v=s["TmpVectors"].Vector3[1];s["TmpVectors"].Quaternion[0].toEulerAnglesToRef(v),(this.billboardMode&TransformNode.BILLBOARDMODE_X)!==TransformNode.BILLBOARDMODE_X&&(v.x=0),(this.billboardMode&TransformNode.BILLBOARDMODE_Y)!==TransformNode.BILLBOARDMODE_Y&&(v.y=0),(this.billboardMode&TransformNode.BILLBOARDMODE_Z)!==TransformNode.BILLBOARDMODE_Z&&(v.z=0),s["Matrix"].RotationYawPitchRollToRef(v.y,v.x,v.z,s["TmpVectors"].Matrix[0])}this._worldMatrix.setTranslationFromFloats(0,0,0),this._worldMatrix.multiplyToRef(s["TmpVectors"].Matrix[0],this._worldMatrix),this._worldMatrix.setTranslation(s["TmpVectors"].Vector3[0])}return this.ignoreNonUniformScaling?this._updateNonUniformScalingState(!1):this._scaling.isNonUniformWithinEpsilon(1e-6)?this._updateNonUniformScalingState(!0):u&&u._nonUniformScaling?this._updateNonUniformScalingState(u._nonUniformScaling):this._updateNonUniformScalingState(!1),this._afterComputeWorldMatrix(),this._absolutePosition.copyFromFloats(this._worldMatrix.m[12],this._worldMatrix.m[13],this._worldMatrix.m[14]),this._isAbsoluteSynced=!1,this.onAfterWorldMatrixUpdateObservable.notifyObservers(this),this._poseMatrix||(this._poseMatrix=s["Matrix"].Invert(this._worldMatrix)),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix},TransformNode.prototype.resetLocalMatrix=function(e){if(void 0===e&&(e=!0),this.computeWorldMatrix(),e)for(var t=this.getChildren(),r=0;r<t.length;++r){var n=t[r];if(n){n.computeWorldMatrix();var i=s["TmpVectors"].Matrix[0];n._localMatrix.multiplyToRef(this._localMatrix,i);var o=s["TmpVectors"].Quaternion[0];i.decompose(n.scaling,o,n.position),n.rotationQuaternion?n.rotationQuaternion=o:o.toEulerAnglesToRef(n.rotation)}}this.scaling.copyFromFloats(1,1,1),this.position.copyFromFloats(0,0,0),this.rotation.copyFromFloats(0,0,0),this.rotationQuaternion&&(this.rotationQuaternion=s["Quaternion"].Identity()),this._worldMatrix=s["Matrix"].Identity()},TransformNode.prototype._afterComputeWorldMatrix=function(){},TransformNode.prototype.registerAfterWorldMatrixUpdate=function(e){return this.onAfterWorldMatrixUpdateObservable.add(e),this},TransformNode.prototype.unregisterAfterWorldMatrixUpdate=function(e){return this.onAfterWorldMatrixUpdateObservable.removeCallback(e),this},TransformNode.prototype.getPositionInCameraSpace=function(e){return void 0===e&&(e=null),e||(e=this.getScene().activeCamera),s["Vector3"].TransformCoordinates(this.getAbsolutePosition(),e.getViewMatrix())},TransformNode.prototype.getDistanceToCamera=function(e){return void 0===e&&(e=null),e||(e=this.getScene().activeCamera),this.getAbsolutePosition().subtract(e.globalPosition).length()},TransformNode.prototype.clone=function(e,t,r){var n=this,o=i["SerializationHelper"].Clone((function(){return new TransformNode(e,n.getScene())}),this);if(o.name=e,o.id=e,t&&(o.parent=t),!r)for(var s=this.getDescendants(!0),a=0;a<s.length;a++){var u=s[a];u.clone&&u.clone(e+"."+u.name,o)}return o},TransformNode.prototype.serialize=function(e){var t=i["SerializationHelper"].Serialize(this,e);return t.type=this.getClassName(),this.parent&&(t.parentId=this.parent.id),t.localMatrix=this.getPivotMatrix().asArray(),t.isEnabled=this.isEnabled(),this.parent&&(t.parentId=this.parent.id),t},TransformNode.Parse=function(e,t,r){var n=i["SerializationHelper"].Parse((function(){return new TransformNode(e.name,t)}),e,t,r);return e.localMatrix?n.setPreTransformMatrix(s["Matrix"].FromArray(e.localMatrix)):e.pivotMatrix&&n.setPivotMatrix(s["Matrix"].FromArray(e.pivotMatrix)),n.setEnabled(e.isEnabled),e.parentId&&(n._waitingParentId=e.parentId),n},TransformNode.prototype.getChildTransformNodes=function(e,t){var r=[];return this._getDescendants(r,e,(function(e){return(!t||t(e))&&e instanceof TransformNode})),r},TransformNode.prototype.dispose=function(t,r){if(void 0===r&&(r=!1),this.getScene().stopAnimation(this),this.getScene().removeTransformNode(this),this.onAfterWorldMatrixUpdateObservable.clear(),t)for(var n=this.getChildTransformNodes(!0),i=0,o=n;i<o.length;i++){var s=o[i];s.parent=null,s.computeWorldMatrix(!0)}e.prototype.dispose.call(this,t,r)},TransformNode.prototype.normalizeToUnitCube=function(e,t,r){void 0===e&&(e=!0),void 0===t&&(t=!1);var n=null,i=null;t&&(this.rotationQuaternion?(i=this.rotationQuaternion.clone(),this.rotationQuaternion.copyFromFloats(0,0,0,1)):this.rotation&&(n=this.rotation.clone(),this.rotation.copyFromFloats(0,0,0)));var o=this.getHierarchyBoundingVectors(e,r),s=o.max.subtract(o.min),a=Math.max(s.x,s.y,s.z);if(0===a)return this;var u=1/a;return this.scaling.scaleInPlace(u),t&&(this.rotationQuaternion&&i?this.rotationQuaternion.copyFrom(i):this.rotation&&n&&this.rotation.copyFrom(n)),this},TransformNode.prototype._syncAbsoluteScalingAndRotation=function(){this._isAbsoluteSynced||(this._worldMatrix.decompose(this._absoluteScaling,this._absoluteRotationQuaternion),this._isAbsoluteSynced=!0)},TransformNode.BILLBOARDMODE_NONE=0,TransformNode.BILLBOARDMODE_X=1,TransformNode.BILLBOARDMODE_Y=2,TransformNode.BILLBOARDMODE_Z=4,TransformNode.BILLBOARDMODE_ALL=7,TransformNode.BILLBOARDMODE_USE_POSITION=128,TransformNode._TmpRotation=s["Quaternion"].Zero(),TransformNode._TmpScaling=s["Vector3"].Zero(),TransformNode._TmpTranslation=s["Vector3"].Zero(),TransformNode._lookAtVectorCache=new s["Vector3"](0,0,0),TransformNode._rotationAxisCache=new s["Quaternion"],Object(n["__decorate"])([Object(i["serializeAsVector3"])("position")],TransformNode.prototype,"_position",void 0),Object(n["__decorate"])([Object(i["serializeAsVector3"])("rotation")],TransformNode.prototype,"_rotation",void 0),Object(n["__decorate"])([Object(i["serializeAsQuaternion"])("rotationQuaternion")],TransformNode.prototype,"_rotationQuaternion",void 0),Object(n["__decorate"])([Object(i["serializeAsVector3"])("scaling")],TransformNode.prototype,"_scaling",void 0),Object(n["__decorate"])([Object(i["serialize"])("billboardMode")],TransformNode.prototype,"_billboardMode",void 0),Object(n["__decorate"])([Object(i["serialize"])()],TransformNode.prototype,"scalingDeterminant",void 0),Object(n["__decorate"])([Object(i["serialize"])("infiniteDistance")],TransformNode.prototype,"_infiniteDistance",void 0),Object(n["__decorate"])([Object(i["serialize"])()],TransformNode.prototype,"ignoreNonUniformScaling",void 0),Object(n["__decorate"])([Object(i["serialize"])()],TransformNode.prototype,"reIntegrateRotationIntoRotationQuaternion",void 0),TransformNode}(a["Node"])},"./node_modules/@babylonjs/core/Misc/andOrNotEvaluator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AndOrNotEvaluator",(function(){return n}));var n=function(){function AndOrNotEvaluator(){}return AndOrNotEvaluator.Eval=function(e,t){return e=e.match(/\([^\(\)]*\)/g)?e.replace(/\([^\(\)]*\)/g,(function(e){return e=e.slice(1,e.length-1),AndOrNotEvaluator._HandleParenthesisContent(e,t)})):AndOrNotEvaluator._HandleParenthesisContent(e,t),"true"===e||"false"!==e&&AndOrNotEvaluator.Eval(e,t)},AndOrNotEvaluator._HandleParenthesisContent=function(e,t){var r;t=t||function(e){return"true"===e};var n=e.split("||");for(var i in n)if(n.hasOwnProperty(i)){var o=AndOrNotEvaluator._SimplifyNegation(n[i].trim()),s=o.split("&&");if(s.length>1)for(var a=0;a<s.length;++a){var u=AndOrNotEvaluator._SimplifyNegation(s[a].trim());if(r="true"!==u&&"false"!==u?"!"===u[0]?!t(u.substring(1)):t(u):"true"===u,!r){o="false";break}}if(r||"true"===o){r=!0;break}r="true"!==o&&"false"!==o?"!"===o[0]?!t(o.substring(1)):t(o):"true"===o}return r?"true":"false"},AndOrNotEvaluator._SimplifyNegation=function(e){return e=e.replace(/^[\s!]+/,(function(e){return e=e.replace(/[\s]/g,(function(){return""})),e.length%2?"!":""})),e=e.trim(),"!true"===e?e="false":"!false"===e&&(e="true"),e},AndOrNotEvaluator}()},"./node_modules/@babylonjs/core/Misc/arrayTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArrayTools",(function(){return n}));var n=function(){function ArrayTools(){}return ArrayTools.BuildArray=function(e,t){for(var r=[],n=0;n<e;++n)r.push(t());return r},ArrayTools}()},"./node_modules/@babylonjs/core/Misc/baseError.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BaseError",(function(){return i}));var n=r("./node_modules/tslib/tslib.es6.js"),i=function(e){function BaseError(){return null!==e&&e.apply(this,arguments)||this}return Object(n["__extends"])(BaseError,e),BaseError._setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},BaseError}(Error)},"./node_modules/@babylonjs/core/Misc/canvasGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CanvasGenerator",(function(){return n}));var n=function(){function CanvasGenerator(){}return CanvasGenerator.CreateCanvas=function(e,t){if("undefined"===typeof document)return new OffscreenCanvas(e,t);var r=document.createElement("canvas");return r.width=e,r.height=t,r},CanvasGenerator}()},"./node_modules/@babylonjs/core/Misc/copyTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CopyTools",(function(){return n}));var n=function(){function CopyTools(){}return CopyTools.GenerateBase64StringFromTexture=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=e.getInternalTexture();if(!n)return null;var i=e.readPixels(t,r);if(!i)return null;var o=e.getSize(),s=o.width,a=o.height;if(i instanceof Float32Array){var u=i.byteLength/i.BYTES_PER_ELEMENT,c=new Uint8Array(u);while(--u>=0){var l=i[u];l<0?l=0:l>1&&(l=1),c[u]=255*l}i=c}var d=document.createElement("canvas");d.width=s,d.height=a;var h=d.getContext("2d");if(!h)return null;var f=h.createImageData(s,a),p=f.data;if(p.set(i),h.putImageData(f,0,0),n.invertY){var m=document.createElement("canvas");m.width=s,m.height=a;var _=m.getContext("2d");return _?(_.translate(0,a),_.scale(1,-1),_.drawImage(d,0,0),m.toDataURL("image/png")):null}return d.toDataURL("image/png")},CopyTools}()},"./node_modules/@babylonjs/core/Misc/decorators.js":function(e,t,r){"use strict";r.r(t),r.d(t,"expandToProperty",(function(){return expandToProperty})),r.d(t,"serialize",(function(){return serialize})),r.d(t,"serializeAsTexture",(function(){return serializeAsTexture})),r.d(t,"serializeAsColor3",(function(){return serializeAsColor3})),r.d(t,"serializeAsFresnelParameters",(function(){return serializeAsFresnelParameters})),r.d(t,"serializeAsVector2",(function(){return serializeAsVector2})),r.d(t,"serializeAsVector3",(function(){return serializeAsVector3})),r.d(t,"serializeAsMeshReference",(function(){return serializeAsMeshReference})),r.d(t,"serializeAsColorCurves",(function(){return serializeAsColorCurves})),r.d(t,"serializeAsColor4",(function(){return serializeAsColor4})),r.d(t,"serializeAsImageProcessingConfiguration",(function(){return serializeAsImageProcessingConfiguration})),r.d(t,"serializeAsQuaternion",(function(){return serializeAsQuaternion})),r.d(t,"serializeAsMatrix",(function(){return serializeAsMatrix})),r.d(t,"serializeAsCameraReference",(function(){return serializeAsCameraReference})),r.d(t,"SerializationHelper",(function(){return c}));var n=r("./node_modules/@babylonjs/core/Misc/tags.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Misc/devTools.js"),s=r("./node_modules/@babylonjs/core/Maths/math.color.js"),a={},u={},_copySource=function(e,t,r){var i=e();n["Tags"]&&n["Tags"].AddTagsTo(i,t.tags);var o=getMergedStore(i);for(var s in o){var a=o[s],u=t[s],c=a.type;if(void 0!==u&&null!==u&&"uniqueId"!==s)switch(c){case 0:case 6:case 11:i[s]=u;break;case 1:i[s]=r||u.isRenderTarget?u:u.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:i[s]=r?u:u.clone();break}}return i};function getDirectStore(e){var t=e.getClassName();return a[t]||(a[t]={}),a[t]}function getMergedStore(e){var t=e.getClassName();if(u[t])return u[t];u[t]={};var r=u[t],n=e,i=t;while(i){var o=a[i];for(var s in o)r[s]=o[s];var c=void 0,l=!1;do{if(c=Object.getPrototypeOf(n),!c.getClassName){l=!0;break}if(c.getClassName()!==i)break;n=c}while(c);if(l)break;i=c.getClassName(),n=c}return r}function generateSerializableMember(e,t){return function(r,n){var i=getDirectStore(r);i[n]||(i[n]={type:e,sourceName:t})}}function generateExpandMember(e,t){return void 0===t&&(t=null),function(r,n){var i=t||"_"+n;Object.defineProperty(r,n,{get:function(){return this[i]},set:function(t){this[i]!==t&&(this[i]=t,r[e].apply(this))},enumerable:!0,configurable:!0})}}function expandToProperty(e,t){return void 0===t&&(t=null),generateExpandMember(e,t)}function serialize(e){return generateSerializableMember(0,e)}function serializeAsTexture(e){return generateSerializableMember(1,e)}function serializeAsColor3(e){return generateSerializableMember(2,e)}function serializeAsFresnelParameters(e){return generateSerializableMember(3,e)}function serializeAsVector2(e){return generateSerializableMember(4,e)}function serializeAsVector3(e){return generateSerializableMember(5,e)}function serializeAsMeshReference(e){return generateSerializableMember(6,e)}function serializeAsColorCurves(e){return generateSerializableMember(7,e)}function serializeAsColor4(e){return generateSerializableMember(8,e)}function serializeAsImageProcessingConfiguration(e){return generateSerializableMember(9,e)}function serializeAsQuaternion(e){return generateSerializableMember(10,e)}function serializeAsMatrix(e){return generateSerializableMember(12,e)}function serializeAsCameraReference(e){return generateSerializableMember(11,e)}var c=function(){function SerializationHelper(){}return SerializationHelper.AppendSerializedAnimations=function(e,t){if(e.animations){t.animations=[];for(var r=0;r<e.animations.length;r++){var n=e.animations[r];t.animations.push(n.serialize())}}},SerializationHelper.Serialize=function(e,t){t||(t={}),n["Tags"]&&(t.tags=n["Tags"].GetTags(e));var r=getMergedStore(e);for(var i in r){var o=r[i],s=o.sourceName||i,a=o.type,u=e[i];if(void 0!==u&&null!==u&&"uniqueId"!==i)switch(a){case 0:t[s]=u;break;case 1:t[s]=u.serialize();break;case 2:t[s]=u.asArray();break;case 3:t[s]=u.serialize();break;case 4:t[s]=u.asArray();break;case 5:t[s]=u.asArray();break;case 6:t[s]=u.id;break;case 7:t[s]=u.serialize();break;case 8:t[s]=u.asArray();break;case 9:t[s]=u.serialize();break;case 10:t[s]=u.asArray();break;case 11:t[s]=u.id;case 12:t[s]=u.asArray();break}}return t},SerializationHelper.Parse=function(e,t,r,o){void 0===o&&(o=null);var a=e();o||(o=""),n["Tags"]&&n["Tags"].AddTagsTo(a,t.tags);var u=getMergedStore(a);for(var c in u){var l=u[c],d=t[l.sourceName||c],h=l.type;if(void 0!==d&&null!==d&&"uniqueId"!==c){var f=a;switch(h){case 0:f[c]=d;break;case 1:r&&(f[c]=SerializationHelper._TextureParser(d,r,o));break;case 2:f[c]=s["Color3"].FromArray(d);break;case 3:f[c]=SerializationHelper._FresnelParametersParser(d);break;case 4:f[c]=i["Vector2"].FromArray(d);break;case 5:f[c]=i["Vector3"].FromArray(d);break;case 6:r&&(f[c]=r.getLastMeshByID(d));break;case 7:f[c]=SerializationHelper._ColorCurvesParser(d);break;case 8:f[c]=s["Color4"].FromArray(d);break;case 9:f[c]=SerializationHelper._ImageProcessingConfigurationParser(d);break;case 10:f[c]=i["Quaternion"].FromArray(d);break;case 11:r&&(f[c]=r.getCameraByID(d));case 12:f[c]=i["Matrix"].FromArray(d);break}}}return a},SerializationHelper.Clone=function(e,t){return _copySource(e,t,!1)},SerializationHelper.Instanciate=function(e,t){return _copySource(e,t,!0)},SerializationHelper._ImageProcessingConfigurationParser=function(e){throw o["_DevTools"].WarnImport("ImageProcessingConfiguration")},SerializationHelper._FresnelParametersParser=function(e){throw o["_DevTools"].WarnImport("FresnelParameters")},SerializationHelper._ColorCurvesParser=function(e){throw o["_DevTools"].WarnImport("ColorCurves")},SerializationHelper._TextureParser=function(e,t,r){throw o["_DevTools"].WarnImport("Texture")},SerializationHelper}()},"./node_modules/@babylonjs/core/Misc/deepCopier.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DeepCopier",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Misc/stringTools.js"),i=r("./node_modules/@babylonjs/core/Misc/logger.js"),cloneValue=function(e,t){return e?e.getClassName&&"Mesh"===e.getClassName()?null:e.getClassName&&"SubMesh"===e.getClassName()?e.clone(t):e.clone?e.clone():null:null};function getAllPropertyNames(e){var t=[];do{Object.getOwnPropertyNames(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))}while(e=Object.getPrototypeOf(e));return t}var o=function(){function DeepCopier(){}return DeepCopier.DeepCopy=function(e,t,r,o){for(var s=getAllPropertyNames(e),a=0,u=s;a<u.length;a++){var c=u[a];if(("_"!==c[0]||o&&-1!==o.indexOf(c))&&(!n["StringTools"].EndsWith(c,"Observable")&&(!r||-1===r.indexOf(c)))){var l=e[c],d=typeof l;if("function"!==d)try{if("object"===d)if(l instanceof Array){if(t[c]=[],l.length>0)if("object"==typeof l[0])for(var h=0;h<l.length;h++){var f=cloneValue(l[h],t);-1===t[c].indexOf(f)&&t[c].push(f)}else t[c]=l.slice(0)}else t[c]=cloneValue(l,t);else t[c]=l}catch(p){i["Logger"].Warn(p.message)}}}},DeepCopier}()},"./node_modules/@babylonjs/core/Misc/devTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"_DevTools",(function(){return n}));var n=function(){function _DevTools(){}return _DevTools.WarnImport=function(e){return e+" needs to be imported before as it contains a side-effect required by your code."},_DevTools}()},"./node_modules/@babylonjs/core/Misc/domManagement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DomManagement",(function(){return n}));var n=function(){function DomManagement(){}return DomManagement.IsWindowObjectExist=function(){return"undefined"!==typeof window},DomManagement.IsNavigatorAvailable=function(){return"undefined"!==typeof navigator},DomManagement.IsDocumentAvailable=function(){return"undefined"!==typeof document},DomManagement.GetDOMTextContent=function(e){var t="",r=e.firstChild;while(r)3===r.nodeType&&(t+=r.textContent),r=r.nextSibling;return t},DomManagement}()},"./node_modules/@babylonjs/core/Misc/fileTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"LoadFileError",(function(){return f})),r.d(t,"RequestFileError",(function(){return p})),r.d(t,"ReadFileError",(function(){return m})),r.d(t,"FileTools",(function(){return _}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/webRequest.js"),o=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/Misc/filesInputStore.js"),u=r("./node_modules/@babylonjs/core/Misc/retryStrategy.js"),c=r("./node_modules/@babylonjs/core/Misc/baseError.js"),l=r("./node_modules/@babylonjs/core/Misc/stringTools.js"),d=r("./node_modules/@babylonjs/core/Engines/thinEngine.js"),h=r("./node_modules/@babylonjs/core/Engines/Processors/shaderProcessor.js"),f=function(e){function LoadFileError(t,r){var n=e.call(this,t)||this;return n.name="LoadFileError",c["BaseError"]._setPrototypeOf(n,LoadFileError.prototype),r instanceof i["WebRequest"]?n.request=r:n.file=r,n}return Object(n["__extends"])(LoadFileError,e),LoadFileError}(c["BaseError"]),p=function(e){function RequestFileError(t,r){var n=e.call(this,t)||this;return n.request=r,n.name="RequestFileError",c["BaseError"]._setPrototypeOf(n,RequestFileError.prototype),n}return Object(n["__extends"])(RequestFileError,e),RequestFileError}(c["BaseError"]),m=function(e){function ReadFileError(t,r){var n=e.call(this,t)||this;return n.file=r,n.name="ReadFileError",c["BaseError"]._setPrototypeOf(n,ReadFileError.prototype),n}return Object(n["__extends"])(ReadFileError,e),ReadFileError}(c["BaseError"]),_=function(){function FileTools(){}return FileTools._CleanUrl=function(e){return e=e.replace(/#/gm,"%23"),e},FileTools.SetCorsBehavior=function(e,t){if((!e||0!==e.indexOf("data:"))&&FileTools.CorsBehavior)if("string"===typeof FileTools.CorsBehavior||this.CorsBehavior instanceof String)t.crossOrigin=FileTools.CorsBehavior;else{var r=FileTools.CorsBehavior(e);r&&(t.crossOrigin=r)}},FileTools.LoadImage=function(e,t,r,n,i){var o;void 0===i&&(i="");var s=!1;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)?"undefined"!==typeof Blob?(o=URL.createObjectURL(new Blob([e],{type:i})),s=!0):o="data:"+i+";base64,"+l["StringTools"].EncodeArrayBufferToBase64(e):e instanceof Blob?(o=URL.createObjectURL(e),s=!0):(o=FileTools._CleanUrl(e),o=FileTools.PreprocessUrl(e)),"undefined"===typeof Image)return FileTools.LoadFile(o,(function(n){createImageBitmap(new Blob([n],{type:i})).then((function(e){t(e),s&&URL.revokeObjectURL(o)})).catch((function(t){r&&r("Error while trying to load image: "+e,t)}))}),void 0,n||void 0,!0,(function(t,n){r&&r("Error while trying to load image: "+e,n)})),null;var u=new Image;FileTools.SetCorsBehavior(o,u);var loadHandler=function(){u.removeEventListener("load",loadHandler),u.removeEventListener("error",errorHandler),t(u),s&&u.src&&URL.revokeObjectURL(u.src)},errorHandler=function(t){if(u.removeEventListener("load",loadHandler),u.removeEventListener("error",errorHandler),r){var n=e.toString();r("Error while trying to load image: "+(n.length<32?n:n.slice(0,32)+"..."),t)}s&&u.src&&URL.revokeObjectURL(u.src)};u.addEventListener("load",loadHandler),u.addEventListener("error",errorHandler);var noOfflineSupport=function(){u.src=o},loadFromOfflineSupport=function(){n&&n.loadImage(o,u)};if("data:"!==o.substr(0,5)&&n&&n.enableTexturesOffline)n.open(loadFromOfflineSupport,noOfflineSupport);else{if(-1!==o.indexOf("file:")){var c=decodeURIComponent(o.substring(5).toLowerCase());if(a["FilesInputStore"].FilesToLoad[c]){try{var d;try{d=URL.createObjectURL(a["FilesInputStore"].FilesToLoad[c])}catch(h){d=URL.createObjectURL(a["FilesInputStore"].FilesToLoad[c])}u.src=d,s=!0}catch(f){u.src=""}return u}}noOfflineSupport()}return u},FileTools.ReadFile=function(e,t,r,n,i){var o=new FileReader,a={onCompleteObservable:new s["Observable"],abort:function(){return o.abort()}};return o.onloadend=function(e){return a.onCompleteObservable.notifyObservers(a)},i&&(o.onerror=function(t){i(new m("Unable to read "+e.name,e))}),o.onload=function(e){t(e.target["result"])},r&&(o.onprogress=r),n?o.readAsArrayBuffer(e):o.readAsText(e),a},FileTools.LoadFile=function(e,t,r,n,i,o){if(-1!==e.indexOf("file:")){var s=decodeURIComponent(e.substring(5).toLowerCase());0===s.indexOf("./")&&(s=s.substring(2));var u=a["FilesInputStore"].FilesToLoad[s];if(u)return FileTools.ReadFile(u,t,r,i,o?function(e){return o(void 0,new f(e.message,e.file))}:void 0)}return FileTools.RequestFile(e,(function(e,r){t(e,r?r.responseURL:void 0)}),r,n,i,o?function(e){o(e.request,new f(e.message,e.request))}:void 0)},FileTools.RequestFile=function(e,t,r,n,a,u,c){e=FileTools._CleanUrl(e),e=FileTools.PreprocessUrl(e);var l=FileTools.BaseUrl+e,d=!1,h={onCompleteObservable:new s["Observable"],abort:function(){return d=!0}},requestFile=function(){var e=new i["WebRequest"],n=null;h.abort=function(){d=!0,e.readyState!==(XMLHttpRequest.DONE||4)&&e.abort(),null!==n&&(clearTimeout(n),n=null)};var retryLoop=function(s){e.open("GET",l),c&&c(e),a&&(e.responseType="arraybuffer"),r&&e.addEventListener("progress",r);var onLoadEnd=function(){e.removeEventListener("loadend",onLoadEnd),h.onCompleteObservable.notifyObservers(h),h.onCompleteObservable.clear()};e.addEventListener("loadend",onLoadEnd);var onReadyStateChange=function(){if(!d&&e.readyState===(XMLHttpRequest.DONE||4)){if(e.removeEventListener("readystatechange",onReadyStateChange),e.status>=200&&e.status<300||0===e.status&&(!o["DomManagement"].IsWindowObjectExist()||FileTools.IsFileURL()))return void t(a?e.response:e.responseText,e);var r=FileTools.DefaultRetryStrategy;if(r){var c=r(l,e,s);if(-1!==c)return e.removeEventListener("loadend",onLoadEnd),e=new i["WebRequest"],void(n=setTimeout((function(){return retryLoop(s+1)}),c))}var h=new p("Error status: "+e.status+" "+e.statusText+" - Unable to load "+l,e);u&&u(h)}};e.addEventListener("readystatechange",onReadyStateChange),e.send()};retryLoop(0)};if(n&&n.enableSceneOffline){var noOfflineSupport_1=function(e){e&&e.status>400?u&&u(e):requestFile()},loadFromOfflineSupport=function(){n&&n.loadFile(FileTools.BaseUrl+e,(function(e){d||t(e),h.onCompleteObservable.notifyObservers(h)}),r?function(e){d||r(e)}:void 0,noOfflineSupport_1,a)};n.open(loadFromOfflineSupport,noOfflineSupport_1)}else requestFile();return h},FileTools.IsFileURL=function(){return"undefined"!==typeof location&&"file:"===location.protocol},FileTools.DefaultRetryStrategy=u["RetryStrategy"].ExponentialBackoff(),FileTools.BaseUrl="",FileTools.CorsBehavior="anonymous",FileTools.PreprocessUrl=function(e){return e},FileTools}();d["ThinEngine"]._FileToolsLoadImage=_.LoadImage.bind(_),d["ThinEngine"]._FileToolsLoadFile=_.LoadFile.bind(_),h["ShaderProcessor"]._FileToolsLoadFile=_.LoadFile.bind(_)},"./node_modules/@babylonjs/core/Misc/filesInputStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"FilesInputStore",(function(){return n}));var n=function(){function FilesInputStore(){}return FilesInputStore.FilesToLoad={},FilesInputStore}()},"./node_modules/@babylonjs/core/Misc/guid.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GUID",(function(){return n}));var n=function(){function GUID(){}return GUID.RandomId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)}))},GUID}()},"./node_modules/@babylonjs/core/Misc/instantiationTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"InstantiationTools",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Misc/logger.js"),i=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),o=function(){function InstantiationTools(){}return InstantiationTools.Instantiate=function(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];var t=i["_TypeStore"].GetClass(e);if(t)return t;n["Logger"].Warn(e+" not found, you may have missed an import.");for(var r=e.split("."),o=window||this,s=0,a=r.length;s<a;s++)o=o[r[s]];return"function"!==typeof o?null:o},InstantiationTools.RegisteredExternalClasses={},InstantiationTools}()},"./node_modules/@babylonjs/core/Misc/logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Logger",(function(){return n}));var n=function(){function Logger(){}return Logger._AddLogEntry=function(e){Logger._LogCache=e+Logger._LogCache,Logger.OnNewCacheEntry&&Logger.OnNewCacheEntry(e)},Logger._FormatMessage=function(e){var padStr=function(e){return e<10?"0"+e:""+e},t=new Date;return"["+padStr(t.getHours())+":"+padStr(t.getMinutes())+":"+padStr(t.getSeconds())+"]: "+e},Logger._LogDisabled=function(e){},Logger._LogEnabled=function(e){var t=Logger._FormatMessage(e);console.log("BJS - "+t);var r="<div style='color:white'>"+t+"</div><br>";Logger._AddLogEntry(r)},Logger._WarnDisabled=function(e){},Logger._WarnEnabled=function(e){var t=Logger._FormatMessage(e);console.warn("BJS - "+t);var r="<div style='color:orange'>"+t+"</div><br>";Logger._AddLogEntry(r)},Logger._ErrorDisabled=function(e){},Logger._ErrorEnabled=function(e){Logger.errorsCount++;var t=Logger._FormatMessage(e);console.error("BJS - "+t);var r="<div style='color:red'>"+t+"</div><br>";Logger._AddLogEntry(r)},Object.defineProperty(Logger,"LogCache",{get:function(){return Logger._LogCache},enumerable:!1,configurable:!0}),Logger.ClearLogCache=function(){Logger._LogCache="",Logger.errorsCount=0},Object.defineProperty(Logger,"LogLevels",{set:function(e){(e&Logger.MessageLogLevel)===Logger.MessageLogLevel?Logger.Log=Logger._LogEnabled:Logger.Log=Logger._LogDisabled,(e&Logger.WarningLogLevel)===Logger.WarningLogLevel?Logger.Warn=Logger._WarnEnabled:Logger.Warn=Logger._WarnDisabled,(e&Logger.ErrorLogLevel)===Logger.ErrorLogLevel?Logger.Error=Logger._ErrorEnabled:Logger.Error=Logger._ErrorDisabled},enumerable:!1,configurable:!0}),Logger.NoneLogLevel=0,Logger.MessageLogLevel=1,Logger.WarningLogLevel=2,Logger.ErrorLogLevel=4,Logger.AllLogLevel=7,Logger._LogCache="",Logger.errorsCount=0,Logger.Log=Logger._LogEnabled,Logger.Warn=Logger._WarnEnabled,Logger.Error=Logger._ErrorEnabled,Logger}()},"./node_modules/@babylonjs/core/Misc/observable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EventState",(function(){return n})),r.d(t,"Observer",(function(){return i})),r.d(t,"MultiObserver",(function(){return o})),r.d(t,"Observable",(function(){return s}));var n=function(){function EventState(e,t,r,n){void 0===t&&(t=!1),this.initalize(e,t,r,n)}return EventState.prototype.initalize=function(e,t,r,n){return void 0===t&&(t=!1),this.mask=e,this.skipNextObservers=t,this.target=r,this.currentTarget=n,this},EventState}(),i=function(){function Observer(e,t,r){void 0===r&&(r=null),this.callback=e,this.mask=t,this.scope=r,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}return Observer}(),o=function(){function MultiObserver(){}return MultiObserver.prototype.dispose=function(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null},MultiObserver.Watch=function(e,t,r,n){void 0===r&&(r=-1),void 0===n&&(n=null);var i=new MultiObserver;i._observers=new Array,i._observables=e;for(var o=0,s=e;o<s.length;o++){var a=s[o],u=a.add(t,r,!1,n);u&&i._observers.push(u)}return i},MultiObserver}(),s=function(){function Observable(e){this._observers=new Array,this._eventState=new n(0),e&&(this._onObserverAdded=e)}return Object.defineProperty(Observable.prototype,"observers",{get:function(){return this._observers},enumerable:!1,configurable:!0}),Observable.prototype.add=function(e,t,r,n,o){if(void 0===t&&(t=-1),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===o&&(o=!1),!e)return null;var s=new i(e,t,n);return s.unregisterOnNextCall=o,r?this._observers.unshift(s):this._observers.push(s),this._onObserverAdded&&this._onObserverAdded(s),s},Observable.prototype.addOnce=function(e){return this.add(e,void 0,void 0,void 0,!0)},Observable.prototype.remove=function(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._deferUnregister(e),!0)},Observable.prototype.removeCallback=function(e,t){for(var r=0;r<this._observers.length;r++){var n=this._observers[r];if(!n._willBeUnregistered&&(n.callback===e&&(!t||t===n.scope)))return this._deferUnregister(n),!0}return!1},Observable.prototype._deferUnregister=function(e){var t=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout((function(){t._remove(e)}),0)},Observable.prototype._remove=function(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)},Observable.prototype.makeObserverTopPriority=function(e){this._remove(e),this._observers.unshift(e)},Observable.prototype.makeObserverBottomPriority=function(e){this._remove(e),this._observers.push(e)},Observable.prototype.notifyObservers=function(e,t,r,n,i){if(void 0===t&&(t=-1),!this._observers.length)return!0;var o=this._eventState;o.mask=t,o.target=r,o.currentTarget=n,o.skipNextObservers=!1,o.lastReturnValue=e,o.userInfo=i;for(var s=0,a=this._observers;s<a.length;s++){var u=a[s];if(!u._willBeUnregistered&&(u.mask&t&&(u.scope?o.lastReturnValue=u.callback.apply(u.scope,[e,o]):o.lastReturnValue=u.callback(e,o),u.unregisterOnNextCall&&this._deferUnregister(u)),o.skipNextObservers))return!1}return!0},Observable.prototype.notifyObserversWithPromise=function(e,t,r,n,i){var o=this;void 0===t&&(t=-1);var s=Promise.resolve(e);if(!this._observers.length)return s;var a=this._eventState;return a.mask=t,a.target=r,a.currentTarget=n,a.skipNextObservers=!1,a.userInfo=i,this._observers.forEach((function(r){a.skipNextObservers||r._willBeUnregistered||r.mask&t&&(s=r.scope?s.then((function(t){return a.lastReturnValue=t,r.callback.apply(r.scope,[e,a])})):s.then((function(t){return a.lastReturnValue=t,r.callback(e,a)})),r.unregisterOnNextCall&&o._deferUnregister(r))})),s.then((function(){return e}))},Observable.prototype.notifyObserver=function(e,t,r){void 0===r&&(r=-1);var n=this._eventState;n.mask=r,n.skipNextObservers=!1,e.callback(t,n)},Observable.prototype.hasObservers=function(){return this._observers.length>0},Observable.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},Observable.prototype.clone=function(){var e=new Observable;return e._observers=this._observers.slice(0),e},Observable.prototype.hasSpecificMask=function(e){void 0===e&&(e=-1);for(var t=0,r=this._observers;t<r.length;t++){var n=r[t];if(n.mask&e||n.mask===e)return!0}return!1},Observable}()},"./node_modules/@babylonjs/core/Misc/perfCounter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PerfCounter",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),i=function(){function PerfCounter(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(PerfCounter.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"average",{get:function(){return this._average},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!1,configurable:!0}),Object.defineProperty(PerfCounter.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!1,configurable:!0}),PerfCounter.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},PerfCounter.prototype.addCount=function(e,t){PerfCounter.Enabled&&(this._current+=e,t&&this._fetchResult())},PerfCounter.prototype.beginMonitoring=function(){PerfCounter.Enabled&&(this._startMonitoringTime=n["PrecisionDate"].Now)},PerfCounter.prototype.endMonitoring=function(e){if(void 0===e&&(e=!0),PerfCounter.Enabled){e&&this.fetchNewFrame();var t=n["PrecisionDate"].Now;this._current=t-this._startMonitoringTime,e&&this._fetchResult()}},PerfCounter.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var e=n["PrecisionDate"].Now;e-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=e,this._lastSecAccumulated=0,this._lastSecValueCount=0)},PerfCounter.Enabled=!0,PerfCounter}()},"./node_modules/@babylonjs/core/Misc/performanceMonitor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PerformanceMonitor",(function(){return i})),r.d(t,"RollingAverage",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),i=function(){function PerformanceMonitor(e){void 0===e&&(e=30),this._enabled=!0,this._rollingFrameTime=new o(e)}return PerformanceMonitor.prototype.sampleFrame=function(e){if(void 0===e&&(e=n["PrecisionDate"].Now),this._enabled){if(null!=this._lastFrameTimeMs){var t=e-this._lastFrameTimeMs;this._rollingFrameTime.add(t)}this._lastFrameTimeMs=e}},Object.defineProperty(PerformanceMonitor.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceMonitor.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceMonitor.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceMonitor.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceMonitor.prototype,"instantaneousFPS",{get:function(){var e=this._rollingFrameTime.history(0);return 0===e?0:1e3/e},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceMonitor.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!1,configurable:!0}),PerformanceMonitor.prototype.enable=function(){this._enabled=!0},PerformanceMonitor.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(PerformanceMonitor.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),PerformanceMonitor.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},PerformanceMonitor}(),o=function(){function RollingAverage(e){this._samples=new Array(e),this.reset()}return RollingAverage.prototype.add=function(e){var t;if(this.isSaturated()){var r=this._samples[this._pos];t=r-this.average,this.average-=t/(this._sampleCount-1),this._m2-=t*(r-this.average)}else this._sampleCount++;t=e-this.average,this.average+=t/this._sampleCount,this._m2+=t*(e-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=e,this._pos++,this._pos%=this._samples.length},RollingAverage.prototype.history=function(e){if(e>=this._sampleCount||e>=this._samples.length)return 0;var t=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(t-e)]},RollingAverage.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},RollingAverage.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},RollingAverage.prototype._wrapPosition=function(e){var t=this._samples.length;return(e%t+t)%t},RollingAverage}()},"./node_modules/@babylonjs/core/Misc/precisionDate.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PrecisionDate",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),i=function(){function PrecisionDate(){}return Object.defineProperty(PrecisionDate,"Now",{get:function(){return n["DomManagement"].IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0}),PrecisionDate}()},"./node_modules/@babylonjs/core/Misc/promise.js":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"PromisePolyfill",(function(){return s})),function(e){e[e["Pending"]=0]="Pending",e[e["Fulfilled"]=1]="Fulfilled",e[e["Rejected"]=2]="Rejected"}(n||(n={}));var i=function(){function FulFillmentAgregator(){this.count=0,this.target=0,this.results=[]}return FulFillmentAgregator}(),o=function(){function InternalPromise(e){var t=this;if(this._state=n.Pending,this._children=new Array,this._rejectWasConsumed=!1,e)try{e((function(e){t._resolve(e)}),(function(e){t._reject(e)}))}catch(r){this._reject(r)}}return Object.defineProperty(InternalPromise.prototype,"_result",{get:function(){return this._resultValue},set:function(e){this._resultValue=e,this._parent&&void 0===this._parent._result&&(this._parent._result=e)},enumerable:!1,configurable:!0}),InternalPromise.prototype.catch=function(e){return this.then(void 0,e)},InternalPromise.prototype.then=function(e,t){var r=this,i=new InternalPromise;return i._onFulfilled=e,i._onRejected=t,this._children.push(i),i._parent=this,this._state!==n.Pending&&setTimeout((function(){if(r._state===n.Fulfilled||r._rejectWasConsumed){var e=i._resolve(r._result);if(void 0!==e&&null!==e)if(void 0!==e._state){var t=e;i._children.push(t),t._parent=i,i=t}else i._result=e}else i._reject(r._reason)})),i},InternalPromise.prototype._moveChildren=function(e){var t,r=this;if((t=this._children).push.apply(t,e.splice(0,e.length)),this._children.forEach((function(e){e._parent=r})),this._state===n.Fulfilled)for(var i=0,o=this._children;i<o.length;i++){var s=o[i];s._resolve(this._result)}else if(this._state===n.Rejected)for(var a=0,u=this._children;a<u.length;a++){s=u[a];s._reject(this._reason)}},InternalPromise.prototype._resolve=function(e){try{this._state=n.Fulfilled;var t=null;if(this._onFulfilled&&(t=this._onFulfilled(e)),void 0!==t&&null!==t)if(void 0!==t._state){var r=t;r._parent=this,r._moveChildren(this._children),e=r._result}else e=t;this._result=e;for(var i=0,o=this._children;i<o.length;i++){var s=o[i];s._resolve(e)}this._children.length=0,delete this._onFulfilled,delete this._onRejected}catch(a){this._reject(a,!0)}},InternalPromise.prototype._reject=function(e,t){if(void 0===t&&(t=!1),this._state=n.Rejected,this._reason=e,this._onRejected&&!t)try{this._onRejected(e),this._rejectWasConsumed=!0}catch(s){e=s}for(var r=0,i=this._children;r<i.length;r++){var o=i[r];this._rejectWasConsumed?o._resolve(null):o._reject(e)}this._children.length=0,delete this._onFulfilled,delete this._onRejected},InternalPromise.resolve=function(e){var t=new InternalPromise;return t._resolve(e),t},InternalPromise._RegisterForFulfillment=function(e,t,r){e.then((function(e){return t.results[r]=e,t.count++,t.count===t.target&&t.rootPromise._resolve(t.results),null}),(function(e){t.rootPromise._state!==n.Rejected&&t.rootPromise._reject(e)}))},InternalPromise.all=function(e){var t=new InternalPromise,r=new i;if(r.target=e.length,r.rootPromise=t,e.length)for(var n=0;n<e.length;n++)InternalPromise._RegisterForFulfillment(e[n],r,n);else t._resolve([]);return t},InternalPromise.race=function(e){var t=new InternalPromise;if(e.length)for(var r=0,n=e;r<n.length;r++){var i=n[r];i.then((function(e){return t&&(t._resolve(e),t=null),null}),(function(e){t&&(t._reject(e),t=null)}))}return t},InternalPromise}(),s=function(){function PromisePolyfill(){}return PromisePolyfill.Apply=function(e){if(void 0===e&&(e=!1),e||"undefined"===typeof Promise){var t=window;t.Promise=o}},PromisePolyfill}()},"./node_modules/@babylonjs/core/Misc/retryStrategy.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RetryStrategy",(function(){return n}));var n=function(){function RetryStrategy(){}return RetryStrategy.ExponentialBackoff=function(e,t){return void 0===e&&(e=3),void 0===t&&(t=500),function(r,n,i){return 0!==n.status||i>=e||-1!==r.indexOf("file:")?-1:Math.pow(2,i)*t}},RetryStrategy}()},"./node_modules/@babylonjs/core/Misc/smartArray.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SmartArray",(function(){return i})),r.d(t,"SmartArrayNoDuplicate",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=function(){function SmartArray(e){this.length=0,this.data=new Array(e),this._id=SmartArray._GlobalId++}return SmartArray.prototype.push=function(e){this.data[this.length++]=e,this.length>this.data.length&&(this.data.length*=2)},SmartArray.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this.data[t])},SmartArray.prototype.sort=function(e){this.data.sort(e)},SmartArray.prototype.reset=function(){this.length=0},SmartArray.prototype.dispose=function(){this.reset(),this.data&&(this.data.length=0,this.data=[])},SmartArray.prototype.concat=function(e){if(0!==e.length){this.length+e.length>this.data.length&&(this.data.length=2*(this.length+e.length));for(var t=0;t<e.length;t++)this.data[this.length++]=(e.data||e)[t]}},SmartArray.prototype.indexOf=function(e){var t=this.data.indexOf(e);return t>=this.length?-1:t},SmartArray.prototype.contains=function(e){return-1!==this.indexOf(e)},SmartArray._GlobalId=0,SmartArray}(),o=function(e){function SmartArrayNoDuplicate(){var t=null!==e&&e.apply(this,arguments)||this;return t._duplicateId=0,t}return Object(n["__extends"])(SmartArrayNoDuplicate,e),SmartArrayNoDuplicate.prototype.push=function(t){e.prototype.push.call(this,t),t.__smartArrayFlags||(t.__smartArrayFlags={}),t.__smartArrayFlags[this._id]=this._duplicateId},SmartArrayNoDuplicate.prototype.pushNoDuplicate=function(e){return(!e.__smartArrayFlags||e.__smartArrayFlags[this._id]!==this._duplicateId)&&(this.push(e),!0)},SmartArrayNoDuplicate.prototype.reset=function(){e.prototype.reset.call(this),this._duplicateId++},SmartArrayNoDuplicate.prototype.concatWithNoDuplicate=function(e){if(0!==e.length){this.length+e.length>this.data.length&&(this.data.length=2*(this.length+e.length));for(var t=0;t<e.length;t++){var r=(e.data||e)[t];this.pushNoDuplicate(r)}}},SmartArrayNoDuplicate}(i)},"./node_modules/@babylonjs/core/Misc/stringDictionary.js":function(e,t,r){"use strict";r.r(t),r.d(t,"StringDictionary",(function(){return n}));var n=function(){function StringDictionary(){this._count=0,this._data={}}return StringDictionary.prototype.copyFrom=function(e){var t=this;this.clear(),e.forEach((function(e,r){return t.add(e,r)}))},StringDictionary.prototype.get=function(e){var t=this._data[e];if(void 0!==t)return t},StringDictionary.prototype.getOrAddWithFactory=function(e,t){var r=this.get(e);return void 0!==r||(r=t(e),r&&this.add(e,r)),r},StringDictionary.prototype.getOrAdd=function(e,t){var r=this.get(e);return void 0!==r?r:(this.add(e,t),t)},StringDictionary.prototype.contains=function(e){return void 0!==this._data[e]},StringDictionary.prototype.add=function(e,t){return void 0===this._data[e]&&(this._data[e]=t,++this._count,!0)},StringDictionary.prototype.set=function(e,t){return void 0!==this._data[e]&&(this._data[e]=t,!0)},StringDictionary.prototype.getAndRemove=function(e){var t=this.get(e);return void 0!==t?(delete this._data[e],--this._count,t):null},StringDictionary.prototype.remove=function(e){return!!this.contains(e)&&(delete this._data[e],--this._count,!0)},StringDictionary.prototype.clear=function(){this._data={},this._count=0},Object.defineProperty(StringDictionary.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),StringDictionary.prototype.forEach=function(e){for(var t in this._data){var r=this._data[t];e(t,r)}},StringDictionary.prototype.first=function(e){for(var t in this._data){var r=this._data[t],n=e(t,r);if(n)return n}return null},StringDictionary}()},"./node_modules/@babylonjs/core/Misc/stringTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"StringTools",(function(){return n}));var n=function(){function StringTools(){}return StringTools.EndsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},StringTools.StartsWith=function(e,t){return!!e&&0===e.indexOf(t)},StringTools.Decode=function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return t},StringTools.EncodeArrayBufferToBase64=function(e){var t,r,n,i,o,s,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0,d=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);while(l<d.length)t=d[l++],r=l<d.length?d[l++]:Number.NaN,n=l<d.length?d[l++]:Number.NaN,i=t>>2,o=(3&t)<<4|r>>4,s=(15&r)<<2|n>>6,a=63&n,isNaN(r)?s=a=64:isNaN(n)&&(a=64),c+=u.charAt(i)+u.charAt(o)+u.charAt(s)+u.charAt(a);return c},StringTools.PadNumber=function(e,t){var r=String(e);while(r.length<t)r="0"+r;return r},StringTools}()},"./node_modules/@babylonjs/core/Misc/tags.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tags",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/andOrNotEvaluator.js"),i=function(){function Tags(){}return Tags.EnableFor=function(e){e._tags=e._tags||{},e.hasTags=function(){return Tags.HasTags(e)},e.addTags=function(t){return Tags.AddTagsTo(e,t)},e.removeTags=function(t){return Tags.RemoveTagsFrom(e,t)},e.matchesTagsQuery=function(t){return Tags.MatchesQuery(e,t)}},Tags.DisableFor=function(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery},Tags.HasTags=function(e){if(!e._tags)return!1;var t=e._tags;for(var r in t)if(t.hasOwnProperty(r))return!0;return!1},Tags.GetTags=function(e,t){if(void 0===t&&(t=!0),!e._tags)return null;if(t){var r=[];for(var n in e._tags)e._tags.hasOwnProperty(n)&&!0===e._tags[n]&&r.push(n);return r.join(" ")}return e._tags},Tags.AddTagsTo=function(e,t){if(t&&"string"===typeof t){var r=t.split(" ");r.forEach((function(t,r,n){Tags._AddTagTo(e,t)}))}},Tags._AddTagTo=function(e,t){t=t.trim(),""!==t&&"true"!==t&&"false"!==t&&(t.match(/[\s]/)||t.match(/^([!]|([|]|[&]){2})/)||(Tags.EnableFor(e),e._tags[t]=!0))},Tags.RemoveTagsFrom=function(e,t){if(Tags.HasTags(e)){var r=t.split(" ");for(var n in r)Tags._RemoveTagFrom(e,r[n])}},Tags._RemoveTagFrom=function(e,t){delete e._tags[t]},Tags.MatchesQuery=function(e,t){return void 0===t||(""===t?Tags.HasTags(e):n["AndOrNotEvaluator"].Eval(t,(function(t){return Tags.HasTags(e)&&e._tags[t]})))},Tags}()},"./node_modules/@babylonjs/core/Misc/timingTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TimingTools",(function(){return i}));var n=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),i=function(){function TimingTools(){}return TimingTools.SetImmediate=function(e){n["DomManagement"].IsWindowObjectExist()&&window.setImmediate?window.setImmediate(e):setTimeout(e,1)},TimingTools}()},"./node_modules/@babylonjs/core/Misc/tools.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tools",(function(){return _})),r.d(t,"className",(function(){return className})),r.d(t,"AsyncLoop",(function(){return g}));var n=r("./node_modules/@babylonjs/core/Misc/observable.js"),i=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),o=r("./node_modules/@babylonjs/core/Misc/logger.js"),s=r("./node_modules/@babylonjs/core/Misc/deepCopier.js"),a=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),u=r("./node_modules/@babylonjs/core/Misc/devTools.js"),c=r("./node_modules/@babylonjs/core/Misc/webRequest.js"),l=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),d=r("./node_modules/@babylonjs/core/Misc/fileTools.js"),h=r("./node_modules/@babylonjs/core/Misc/promise.js"),f=r("./node_modules/@babylonjs/core/Misc/timingTools.js"),p=r("./node_modules/@babylonjs/core/Misc/instantiationTools.js"),m=r("./node_modules/@babylonjs/core/Misc/guid.js"),_=function(){function Tools(){}return Object.defineProperty(Tools,"BaseUrl",{get:function(){return d["FileTools"].BaseUrl},set:function(e){d["FileTools"].BaseUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"DefaultRetryStrategy",{get:function(){return d["FileTools"].DefaultRetryStrategy},set:function(e){d["FileTools"].DefaultRetryStrategy=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"CorsBehavior",{get:function(){return d["FileTools"].CorsBehavior},set:function(e){d["FileTools"].CorsBehavior=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"UseFallbackTexture",{get:function(){return l["EngineStore"].UseFallbackTexture},set:function(e){l["EngineStore"].UseFallbackTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"RegisteredExternalClasses",{get:function(){return p["InstantiationTools"].RegisteredExternalClasses},set:function(e){p["InstantiationTools"].RegisteredExternalClasses=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"fallbackTexture",{get:function(){return l["EngineStore"].FallbackTexture},set:function(e){l["EngineStore"].FallbackTexture=e},enumerable:!1,configurable:!0}),Tools.FetchToRef=function(e,t,r,n,i,o){var s=Math.abs(e)*r%r|0,a=Math.abs(t)*n%n|0,u=4*(s+a*r);o.r=i[u]/255,o.g=i[u+1]/255,o.b=i[u+2]/255,o.a=i[u+3]/255},Tools.Mix=function(e,t,r){return e*(1-r)+t*r},Tools.Instantiate=function(e){return p["InstantiationTools"].Instantiate(e)},Tools.Slice=function(e,t,r){return e.slice?e.slice(t,r):Array.prototype.slice.call(e,t,r)},Tools.SliceToArray=function(e,t,r){return Array.isArray(e)?e.slice(t,r):Array.prototype.slice.call(e,t,r)},Tools.SetImmediate=function(e){f["TimingTools"].SetImmediate(e)},Tools.IsExponentOfTwo=function(e){var t=1;do{t*=2}while(t<e);return t===e},Tools.FloatRound=function(e){return Math.fround?Math.fround(e):Tools._tmpFloatArray[0]=e},Tools.GetFilename=function(e){var t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)},Tools.GetFolderPath=function(e,t){void 0===t&&(t=!1);var r=e.lastIndexOf("/");return r<0?t?e:"":e.substring(0,r+1)},Tools.ToDegrees=function(e){return 180*e/Math.PI},Tools.ToRadians=function(e){return e*Math.PI/180},Tools.MakeArray=function(e,t){return!0===t||void 0!==e&&null!=e?Array.isArray(e)?e:[e]:null},Tools.GetPointerPrefix=function(e){var t="pointer";return i["DomManagement"].IsWindowObjectExist()&&!window.PointerEvent&&i["DomManagement"].IsNavigatorAvailable()&&!navigator.pointerEnabled&&(t="mouse"),!e._badDesktopOS||e._badOS||document&&"ontouchend"in document||(t="mouse"),t},Tools.SetCorsBehavior=function(e,t){d["FileTools"].SetCorsBehavior(e,t)},Tools.CleanUrl=function(e){return e=e.replace(/#/gm,"%23"),e},Object.defineProperty(Tools,"PreprocessUrl",{get:function(){return d["FileTools"].PreprocessUrl},set:function(e){d["FileTools"].PreprocessUrl=e},enumerable:!1,configurable:!0}),Tools.LoadImage=function(e,t,r,n,i){return d["FileTools"].LoadImage(e,t,r,n,i)},Tools.LoadFile=function(e,t,r,n,i,o){return d["FileTools"].LoadFile(e,t,r,n,i,o)},Tools.LoadFileAsync=function(e,t){return void 0===t&&(t=!0),new Promise((function(r,n){d["FileTools"].LoadFile(e,(function(e){r(e)}),void 0,void 0,t,(function(e,t){n(t)}))}))},Tools.LoadScript=function(e,t,r,n){if(i["DomManagement"].IsWindowObjectExist()){var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",e),n&&(s.id=n),s.onload=function(){t&&t()},s.onerror=function(t){r&&r("Unable to load script '"+e+"'",t)},o.appendChild(s)}},Tools.LoadScriptAsync=function(e,t){var r=this;return new Promise((function(t,n){r.LoadScript(e,(function(){t()}),(function(e,t){n(t)}))}))},Tools.ReadFileAsDataURL=function(e,t,r){var i=new FileReader,o={onCompleteObservable:new n["Observable"],abort:function(){return i.abort()}};return i.onloadend=function(e){o.onCompleteObservable.notifyObservers(o)},i.onload=function(e){t(e.target["result"])},i.onprogress=r,i.readAsDataURL(e),o},Tools.ReadFile=function(e,t,r,n,i){return d["FileTools"].ReadFile(e,t,r,n,i)},Tools.FileAsURL=function(e){var t=new Blob([e]),r=window.URL||window.webkitURL,n=r.createObjectURL(t);return n},Tools.Format=function(e,t){return void 0===t&&(t=2),e.toFixed(t)},Tools.DeepCopy=function(e,t,r,n){s["DeepCopier"].DeepCopy(e,t,r,n)},Tools.IsEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Tools.RegisterTopRootEvents=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.addEventListener(n.name,n.handler,!1);try{window.parent&&window.parent.addEventListener(n.name,n.handler,!1)}catch(i){}}},Tools.UnregisterTopRootEvents=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.removeEventListener(n.name,n.handler);try{e.parent&&e.parent.removeEventListener(n.name,n.handler)}catch(i){}}},Tools.DumpFramebuffer=function(e,t,r,n,i,o){void 0===i&&(i="image/png");for(var s=4*e,a=t/2,u=r.readPixels(0,0,e,t),c=0;c<a;c++)for(var l=0;l<s;l++){var d=l+c*s,h=t-c-1,f=l+h*s,p=u[d];u[d]=u[f],u[f]=p}Tools._ScreenshotCanvas||(Tools._ScreenshotCanvas=document.createElement("canvas")),Tools._ScreenshotCanvas.width=e,Tools._ScreenshotCanvas.height=t;var m=Tools._ScreenshotCanvas.getContext("2d");if(m){var _=m.createImageData(e,t),g=_.data;g.set(u),m.putImageData(_,0,0),Tools.EncodeScreenshotCanvasData(n,i,o)}},Tools.ToBlob=function(e,t,r){void 0===r&&(r="image/png"),e.toBlob||(e.toBlob=function(e,t,r){var n=this;setTimeout((function(){for(var i=atob(n.toDataURL(t,r).split(",")[1]),o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i.charCodeAt(a);e(new Blob([s]))}))}),e.toBlob((function(e){t(e)}),r)},Tools.EncodeScreenshotCanvasData=function(e,t,r){if(void 0===t&&(t="image/png"),e){var n=Tools._ScreenshotCanvas.toDataURL(t);e(n)}else this.ToBlob(Tools._ScreenshotCanvas,(function(e){if("download"in document.createElement("a")){if(!r){var t=new Date,n=(t.getFullYear()+"-"+(t.getMonth()+1)).slice(2)+"-"+t.getDate()+"_"+t.getHours()+"-"+("0"+t.getMinutes()).slice(-2);r="screenshot_"+n+".png"}Tools.Download(e,r)}else{var i=URL.createObjectURL(e),o=window.open("");if(!o)return;var s=o.document.createElement("img");s.onload=function(){URL.revokeObjectURL(i)},s.src=i,o.document.body.appendChild(s)}}),t)},Tools.Download=function(e,t){if(navigator&&navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var r=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=r,n.download=t,n.addEventListener("click",(function(){n.parentElement&&n.parentElement.removeChild(n)})),n.click(),window.URL.revokeObjectURL(r)}},Tools.BackCompatCameraNoPreventDefault=function(e){return"boolean"===typeof e[0]?e[0]:"boolean"===typeof e[1]&&e[1]},Tools.CreateScreenshot=function(e,t,r,n,i){throw void 0===i&&(i="image/png"),u["_DevTools"].WarnImport("ScreenshotTools")},Tools.CreateScreenshotAsync=function(e,t,r,n){throw void 0===n&&(n="image/png"),u["_DevTools"].WarnImport("ScreenshotTools")},Tools.CreateScreenshotUsingRenderTarget=function(e,t,r,n,i,o,s,a){throw void 0===i&&(i="image/png"),void 0===o&&(o=1),void 0===s&&(s=!1),u["_DevTools"].WarnImport("ScreenshotTools")},Tools.CreateScreenshotUsingRenderTargetAsync=function(e,t,r,n,i,o,s){throw void 0===n&&(n="image/png"),void 0===i&&(i=1),void 0===o&&(o=!1),u["_DevTools"].WarnImport("ScreenshotTools")},Tools.RandomId=function(){return m["GUID"].RandomId()},Tools.IsBase64=function(e){return!(e.length<5)&&"data:"===e.substr(0,5)},Tools.DecodeBase64=function(e){for(var t=atob(e.split(",")[1]),r=t.length,n=new Uint8Array(new ArrayBuffer(r)),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer},Tools.GetAbsoluteUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},Object.defineProperty(Tools,"errorsCount",{get:function(){return o["Logger"].errorsCount},enumerable:!1,configurable:!0}),Tools.Log=function(e){o["Logger"].Log(e)},Tools.Warn=function(e){o["Logger"].Warn(e)},Tools.Error=function(e){o["Logger"].Error(e)},Object.defineProperty(Tools,"LogCache",{get:function(){return o["Logger"].LogCache},enumerable:!1,configurable:!0}),Tools.ClearLogCache=function(){o["Logger"].ClearLogCache()},Object.defineProperty(Tools,"LogLevels",{set:function(e){o["Logger"].LogLevels=e},enumerable:!1,configurable:!0}),Object.defineProperty(Tools,"PerformanceLogLevel",{set:function(e){return(e&Tools.PerformanceUserMarkLogLevel)===Tools.PerformanceUserMarkLogLevel?(Tools.StartPerformanceCounter=Tools._StartUserMark,void(Tools.EndPerformanceCounter=Tools._EndUserMark)):(e&Tools.PerformanceConsoleLogLevel)===Tools.PerformanceConsoleLogLevel?(Tools.StartPerformanceCounter=Tools._StartPerformanceConsole,void(Tools.EndPerformanceCounter=Tools._EndPerformanceConsole)):(Tools.StartPerformanceCounter=Tools._StartPerformanceCounterDisabled,void(Tools.EndPerformanceCounter=Tools._EndPerformanceCounterDisabled))},enumerable:!1,configurable:!0}),Tools._StartPerformanceCounterDisabled=function(e,t){},Tools._EndPerformanceCounterDisabled=function(e,t){},Tools._StartUserMark=function(e,t){if(void 0===t&&(t=!0),!Tools._performance){if(!i["DomManagement"].IsWindowObjectExist())return;Tools._performance=window.performance}t&&Tools._performance.mark&&Tools._performance.mark(e+"-Begin")},Tools._EndUserMark=function(e,t){void 0===t&&(t=!0),t&&Tools._performance.mark&&(Tools._performance.mark(e+"-End"),Tools._performance.measure(e,e+"-Begin",e+"-End"))},Tools._StartPerformanceConsole=function(e,t){void 0===t&&(t=!0),t&&(Tools._StartUserMark(e,t),console.time&&console.time(e))},Tools._EndPerformanceConsole=function(e,t){void 0===t&&(t=!0),t&&(Tools._EndUserMark(e,t),console.timeEnd(e))},Object.defineProperty(Tools,"Now",{get:function(){return a["PrecisionDate"].Now},enumerable:!1,configurable:!0}),Tools.GetClassName=function(e,t){void 0===t&&(t=!1);var r=null;if(!t&&e.getClassName)r=e.getClassName();else{if(e instanceof Object){var n=t?e:Object.getPrototypeOf(e);r=n.constructor["__bjsclassName__"]}r||(r=typeof e)}return r},Tools.First=function(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(t(i))return i}return null},Tools.getFullClassName=function(e,t){void 0===t&&(t=!1);var r=null,n=null;if(!t&&e.getClassName)r=e.getClassName();else{if(e instanceof Object){var i=t?e:Object.getPrototypeOf(e);r=i.constructor["__bjsclassName__"],n=i.constructor["__bjsmoduleName__"]}r||(r=typeof e)}return r?(null!=n?n+".":"")+r:null},Tools.DelayAsync=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},Tools.IsSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Tools.UseCustomRequestHeaders=!1,Tools.CustomRequestHeaders=c["WebRequest"].CustomRequestHeaders,Tools._tmpFloatArray=new Float32Array(1),Tools.GetDOMTextContent=i["DomManagement"].GetDOMTextContent,Tools.NoneLogLevel=o["Logger"].NoneLogLevel,Tools.MessageLogLevel=o["Logger"].MessageLogLevel,Tools.WarningLogLevel=o["Logger"].WarningLogLevel,Tools.ErrorLogLevel=o["Logger"].ErrorLogLevel,Tools.AllLogLevel=o["Logger"].AllLogLevel,Tools.IsWindowObjectExist=i["DomManagement"].IsWindowObjectExist,Tools.PerformanceNoneLogLevel=0,Tools.PerformanceUserMarkLogLevel=1,Tools.PerformanceConsoleLogLevel=2,Tools.StartPerformanceCounter=Tools._StartPerformanceCounterDisabled,Tools.EndPerformanceCounter=Tools._EndPerformanceCounterDisabled,Tools}();function className(e,t){return function(r){r["__bjsclassName__"]=e,r["__bjsmoduleName__"]=null!=t?t:null}}var g=function(){function AsyncLoop(e,t,r,n){void 0===n&&(n=0),this.iterations=e,this.index=n-1,this._done=!1,this._fn=t,this._successCallback=r}return AsyncLoop.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},AsyncLoop.prototype.breakLoop=function(){this._done=!0,this._successCallback()},AsyncLoop.Run=function(e,t,r,n){void 0===n&&(n=0);var i=new AsyncLoop(e,t,r,n);return i.executeNext(),i},AsyncLoop.SyncAsyncForLoop=function(e,t,r,n,i,o){return void 0===o&&(o=0),AsyncLoop.Run(Math.ceil(e/t),(function(n){i&&i()?n.breakLoop():setTimeout((function(){for(var o=0;o<t;++o){var s=n.index*t+o;if(s>=e)break;if(r(s),i&&i()){n.breakLoop();break}}n.executeNext()}),o)}),n)},AsyncLoop}();l["EngineStore"].FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z",h["PromisePolyfill"].Apply()},"./node_modules/@babylonjs/core/Misc/typeStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"_TypeStore",(function(){return n}));var n=function(){function _TypeStore(){}return _TypeStore.GetClass=function(e){return this.RegisteredTypes&&this.RegisteredTypes[e]?this.RegisteredTypes[e]:null},_TypeStore.RegisteredTypes={},_TypeStore}()},"./node_modules/@babylonjs/core/Misc/uniqueIdGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"UniqueIdGenerator",(function(){return n}));var n=function(){function UniqueIdGenerator(){}return Object.defineProperty(UniqueIdGenerator,"UniqueId",{get:function(){var e=this._UniqueIdCounter;return this._UniqueIdCounter++,e},enumerable:!1,configurable:!0}),UniqueIdGenerator._UniqueIdCounter=0,UniqueIdGenerator}()},"./node_modules/@babylonjs/core/Misc/webRequest.js":function(e,t,r){"use strict";function createXMLHttpRequest(){return"undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest}r.r(t),r.d(t,"WebRequest",(function(){return n}));var n=function(){function WebRequest(){this._xhr=createXMLHttpRequest()}return WebRequest.prototype._injectCustomRequestHeaders=function(){for(var e in WebRequest.CustomRequestHeaders){var t=WebRequest.CustomRequestHeaders[e];t&&this._xhr.setRequestHeader(e,t)}},Object.defineProperty(WebRequest.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(e){this._xhr.onprogress=e},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"status",{get:function(){return this._xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"response",{get:function(){return this._xhr.response},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!1,configurable:!0}),Object.defineProperty(WebRequest.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(e){this._xhr.responseType=e},enumerable:!1,configurable:!0}),WebRequest.prototype.addEventListener=function(e,t,r){this._xhr.addEventListener(e,t,r)},WebRequest.prototype.removeEventListener=function(e,t,r){this._xhr.removeEventListener(e,t,r)},WebRequest.prototype.abort=function(){this._xhr.abort()},WebRequest.prototype.send=function(e){WebRequest.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(e)},WebRequest.prototype.open=function(e,t){for(var r=0,n=WebRequest.CustomRequestModifiers;r<n.length;r++){var i=n[r];i(this._xhr,t)}return t=t.replace("file:http:","http:"),t=t.replace("file:https:","https:"),this._xhr.open(e,t,!0)},WebRequest.prototype.setRequestHeader=function(e,t){this._xhr.setRequestHeader(e,t)},WebRequest.prototype.getResponseHeader=function(e){return this._xhr.getResponseHeader(e)},WebRequest.CustomRequestHeaders={},WebRequest.CustomRequestModifiers=new Array,WebRequest}()},"./node_modules/@babylonjs/core/Particles/cloudPoint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CloudPoint",(function(){return i})),r.d(t,"PointsGroup",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Maths/math.js"),i=function(){function CloudPoint(e,t,r,i,o){this.idx=0,this.color=new n["Color4"](1,1,1,1),this.position=n["Vector3"].Zero(),this.rotation=n["Vector3"].Zero(),this.uv=new n["Vector2"](0,0),this.velocity=n["Vector3"].Zero(),this.pivot=n["Vector3"].Zero(),this.translateFromPivot=!1,this._pos=0,this._ind=0,this.groupId=0,this.idxInGroup=0,this._stillInvisible=!1,this._rotationMatrix=[1,0,0,0,1,0,0,0,1],this.parentId=null,this._globalPosition=n["Vector3"].Zero(),this.idx=e,this._group=t,this.groupId=r,this.idxInGroup=i,this._pcs=o}return Object.defineProperty(CloudPoint.prototype,"size",{get:function(){return this.size},set:function(e){this.size=e},enumerable:!1,configurable:!0}),Object.defineProperty(CloudPoint.prototype,"quaternion",{get:function(){return this.rotationQuaternion},set:function(e){this.rotationQuaternion=e},enumerable:!1,configurable:!0}),CloudPoint.prototype.intersectsMesh=function(e,t){if(!e._boundingInfo)return!1;if(t=t||!1,t)return e.getBoundingInfo().boundingSphere.intersectsPoint(this.position.add(this._pcs.mesh.position));var r=0,n=0,i=0,o=0,s=0,a=0;r=e.getBoundingInfo().boundingBox.maximumWorld.x,n=e.getBoundingInfo().boundingBox.minimumWorld.x,i=e.getBoundingInfo().boundingBox.maximumWorld.y,o=e.getBoundingInfo().boundingBox.minimumWorld.y,s=e.getBoundingInfo().boundingBox.maximumWorld.z,a=e.getBoundingInfo().boundingBox.minimumWorld.z;var u=this.position.x+this._pcs.mesh.position.x,c=this.position.y+this._pcs.mesh.position.y,l=this.position.z+this._pcs.mesh.position.z;return n<=u&&u<=r&&o<=c&&c<=i&&a<=l&&l<=s},CloudPoint.prototype.getRotationMatrix=function(e){var t;if(this.rotationQuaternion)t=this.rotationQuaternion;else{t=n["TmpVectors"].Quaternion[0];var r=this.rotation;n["Quaternion"].RotationYawPitchRollToRef(r.y,r.x,r.z,t)}t.toRotationMatrix(e)},CloudPoint}(),o=function(){function PointsGroup(e,t){this.groupID=e,this._positionFunction=t}return PointsGroup}()},"./node_modules/@babylonjs/core/Particles/pointsCloudSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PointColor",(function(){return n})),r.d(t,"PointsCloudSystem",(function(){return g}));var n,i=r("./node_modules/@babylonjs/core/Maths/math.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Misc/logger.js"),a=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),u=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),c=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),l=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),d=r("./node_modules/@babylonjs/core/Particles/cloudPoint.js"),h=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),f=r("./node_modules/@babylonjs/core/Culling/ray.js"),p=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),m=r("./node_modules/@babylonjs/core/Materials/Textures/baseTexture.js"),_=r("./node_modules/@babylonjs/core/Maths/math.scalar.js");(function(e){e[e["Color"]=2]="Color",e[e["UV"]=1]="UV",e[e["Random"]=0]="Random",e[e["Stated"]=3]="Stated"})(n||(n={}));var g=function(){function PointsCloudSystem(e,t,r,n){this.particles=new Array,this.nbParticles=0,this.counter=0,this.vars={},this._promises=[],this._positions=new Array,this._indices=new Array,this._normals=new Array,this._colors=new Array,this._uvs=new Array,this._updatable=!0,this._isVisibilityBoxLocked=!1,this._alwaysVisible=!1,this._groups=new Array,this._groupCounter=0,this._computeParticleColor=!0,this._computeParticleTexture=!0,this._computeParticleRotation=!0,this._computeBoundingBox=!1,this._isReady=!1,this.name=e,this._size=t,this._scene=r||l["EngineStore"].LastCreatedScene,n&&void 0!==n.updatable?this._updatable=n.updatable:this._updatable=!0}return PointsCloudSystem.prototype.buildMeshAsync=function(){var e=this;return Promise.all(this._promises).then((function(){return e._isReady=!0,e._buildMesh()}))},PointsCloudSystem.prototype._buildMesh=function(){0===this.nbParticles&&this.addPoints(1),this._positions32=new Float32Array(this._positions),this._uvs32=new Float32Array(this._uvs),this._colors32=new Float32Array(this._colors);var e=new u["VertexData"];e.set(this._positions32,a["VertexBuffer"].PositionKind),this._uvs32.length>0&&e.set(this._uvs32,a["VertexBuffer"].UVKind);var t=0;this._colors32.length>0&&(t=1,e.set(this._colors32,a["VertexBuffer"].ColorKind));var r=new c["Mesh"](this.name,this._scene);e.applyToMesh(r,this._updatable),this.mesh=r,this._positions=null,this._uvs=null,this._colors=null,this._updatable||(this.particles.length=0);var n=new p["StandardMaterial"]("point cloud material",this._scene);return n.emissiveColor=new i["Color3"](t,t,t),n.disableLighting=!0,n.pointsCloud=!0,n.pointSize=this._size,r.material=n,new Promise((function(e){return e(r)}))},PointsCloudSystem.prototype._addParticle=function(e,t,r,n){var i=new d["CloudPoint"](e,t,r,n,this);return this.particles.push(i),i},PointsCloudSystem.prototype._randomUnitVector=function(e){e.position=new o["Vector3"](Math.random(),Math.random(),Math.random()),e.color=new i["Color4"](1,1,1,1)},PointsCloudSystem.prototype._getColorIndicesForCoord=function(e,t,r,n){var o=e._groupImageData,s=r*(4*n)+4*t,a=[s,s+1,s+2,s+3],u=a[0],c=a[1],l=a[2],d=a[3],h=o[u],f=o[c],p=o[l],m=o[d];return new i["Color4"](h/255,f/255,p/255,m)},PointsCloudSystem.prototype._setPointsColorOrUV=function(e,t,r,n,s,u,c){r&&e.updateFacetData();var l=e.getBoundingInfo(),d=2*l.boundingSphere.radius,h=e.getVerticesData(a["VertexBuffer"].PositionKind),p=e.getIndices(),m=e.getVerticesData(a["VertexBuffer"].UVKind),g=e.getVerticesData(a["VertexBuffer"].ColorKind),b=o["Vector3"].Zero();e.computeWorldMatrix();var v=e.getWorldMatrix();if(!v.isIdentity())for(var M=0;M<h.length/3;M++)o["Vector3"].TransformCoordinatesFromFloatsToRef(h[3*M],h[3*M+1],h[3*M+2],v,b),h[3*M]=b.x,h[3*M+1]=b.y,h[3*M+2]=b.z;var T,S,C=0,E=0,P=0,A=0,j=0,O=0,R=0,I=0,w=0,D=0,F=0,B=0,L=0,V=0,N=o["Vector3"].Zero(),k=o["Vector3"].Zero(),U=o["Vector3"].Zero(),z=o["Vector3"].Zero(),G=o["Vector3"].Zero(),W=0,H=0,X=0,q=0,K=0,Y=0,Q=o["Vector2"].Zero(),Z=o["Vector2"].Zero(),$=o["Vector2"].Zero(),J=o["Vector2"].Zero(),ee=o["Vector2"].Zero(),te=0,re=0,ne=0,ie=0,oe=0,se=0,ae=0,ue=0,ce=0,le=0,de=0,he=0,fe=o["Vector4"].Zero(),pe=o["Vector4"].Zero(),me=o["Vector4"].Zero(),_e=o["Vector4"].Zero(),ge=o["Vector4"].Zero(),be=0,ve=0;c=c||0;var ye,xe=new o["Vector4"](0,0,0,0),Me=o["Vector3"].Zero(),Te=o["Vector3"].Zero(),Se=o["Vector3"].Zero(),Ce=0,Ee=o["Vector3"].Zero(),Pe=0,Ae=0,je=new f["Ray"](o["Vector3"].Zero(),new o["Vector3"](1,0,0)),Oe=o["Vector3"].Zero();for(E=0;E<p.length/3;E++){var Re,Ie,we,De,Fe,Be,Le,Ve;P=p[3*E],A=p[3*E+1],j=p[3*E+2],O=h[3*P],R=h[3*P+1],I=h[3*P+2],w=h[3*A],D=h[3*A+1],F=h[3*A+2],B=h[3*j],L=h[3*j+1],V=h[3*j+2],N.set(O,R,I),k.set(w,D,F),U.set(B,L,V),k.subtractToRef(N,z),U.subtractToRef(k,G),m&&(W=m[2*P],H=m[2*P+1],X=m[2*A],q=m[2*A+1],K=m[2*j],Y=m[2*j+1],Q.set(W,H),Z.set(X,q),$.set(K,Y),Z.subtractToRef(Q,J),$.subtractToRef(Z,ee)),g&&n&&(te=g[4*P],re=g[4*P+1],ne=g[4*P+2],ie=g[4*P+3],oe=g[4*A],se=g[4*A+1],ae=g[4*A+2],ue=g[4*A+3],ce=g[4*j],le=g[4*j+1],de=g[4*j+2],he=g[4*j+3],fe.set(te,re,ne,ie),pe.set(oe,se,ae,ue),me.set(ce,le,de,he),pe.subtractToRef(fe,_e),me.subtractToRef(pe,ge));for(var Ne,ke,Ue=new i["Color3"](0,0,0),ze=new i["Color3"](0,0,0),Ge=0;Ge<t._groupDensity[E];Ge++)C=this.particles.length,this._addParticle(C,t,this._groupCounter,E+Ge),ke=this.particles[C],be=_["Scalar"].RandomRange(0,1),ve=_["Scalar"].RandomRange(0,1),T=N.add(z.scale(be)).add(G.scale(be*ve)),r&&(Me=e.getFacetNormal(E).normalize().scale(-1),Te=z.clone().normalize(),Se=o["Vector3"].Cross(Me,Te),Ce=_["Scalar"].RandomRange(0,2*Math.PI),Ee=Te.scale(Math.cos(Ce)).add(Se.scale(Math.sin(Ce))),Ce=_["Scalar"].RandomRange(.1,Math.PI/2),Oe=Ee.scale(Math.cos(Ce)).add(Me.scale(Math.sin(Ce))),je.origin=T.add(Oe.scale(1e-5)),je.direction=Oe,je.length=d,ye=je.intersectsMesh(e),ye.hit&&(Ae=ye.pickedPoint.subtract(T).length(),Pe=_["Scalar"].RandomRange(0,1)*Ae,T.addInPlace(Oe.scale(Pe)))),ke.position=T.clone(),this._positions.push(ke.position.x,ke.position.y,ke.position.z),void 0!==n?m&&(S=Q.add(J.scale(be)).add(ee.scale(be*ve)),n?s&&null!==t._groupImageData?(Re=t._groupImgWidth,Ie=t._groupImgHeight,Ne=this._getColorIndicesForCoord(t,Math.round(S.x*Re),Math.round(S.y*Ie),Re),ke.color=Ne,this._colors.push(Ne.r,Ne.g,Ne.b,Ne.a)):g?(xe=fe.add(_e.scale(be)).add(ge.scale(be*ve)),ke.color=new i["Color4"](xe.x,xe.y,xe.z,xe.w),this._colors.push(xe.x,xe.y,xe.z,xe.w)):(xe=fe.set(Math.random(),Math.random(),Math.random(),1),ke.color=new i["Color4"](xe.x,xe.y,xe.z,xe.w),this._colors.push(xe.x,xe.y,xe.z,xe.w)):(ke.uv=S.clone(),this._uvs.push(ke.uv.x,ke.uv.y))):(u?(Ue.set(u.r,u.g,u.b),we=_["Scalar"].RandomRange(-c,c),De=_["Scalar"].RandomRange(-c,c),Ve=Ue.toHSV(),Fe=Ve.r,Be=Ve.g+we,Le=Ve.b+De,Be<0&&(Be=0),Be>1&&(Be=1),Le<0&&(Le=0),Le>1&&(Le=1),i["Color3"].HSVtoRGBToRef(Fe,Be,Le,ze),xe.set(ze.r,ze.g,ze.b,1)):xe=fe.set(Math.random(),Math.random(),Math.random(),1),ke.color=new i["Color4"](xe.x,xe.y,xe.z,xe.w),this._colors.push(xe.x,xe.y,xe.z,xe.w))}},PointsCloudSystem.prototype._colorFromTexture=function(e,t,r){var n=this;if(null===e.material)return s["Logger"].Warn(e.name+"has no material."),t._groupImageData=null,void this._setPointsColorOrUV(e,t,r,!0,!1);var i=e.material,o=i.getActiveTextures();if(0===o.length)return s["Logger"].Warn(e.name+"has no useable texture."),t._groupImageData=null,void this._setPointsColorOrUV(e,t,r,!0,!1);var a=e.clone();a.setEnabled(!1),this._promises.push(new Promise((function(e){m["BaseTexture"].WhenAllReady(o,(function(){var i=t._textureNb;return i<0&&(i=0),i>o.length-1&&(i=o.length-1),t._groupImageData=o[i].readPixels(),t._groupImgWidth=o[i].getSize().width,t._groupImgHeight=o[i].getSize().height,n._setPointsColorOrUV(a,t,r,!0,!0),a.dispose(),e()}))})))},PointsCloudSystem.prototype._calculateDensity=function(e,t,r){for(var n,i,s,a,u,c,l,d,h,f,p,m,_,g,b,v,M,T=new Array,S=o["Vector3"].Zero(),C=o["Vector3"].Zero(),E=o["Vector3"].Zero(),P=o["Vector3"].Zero(),A=o["Vector3"].Zero(),j=o["Vector3"].Zero(),O=new Array,R=0,I=r.length/3,w=0;w<I;w++)n=r[3*w],i=r[3*w+1],s=r[3*w+2],a=t[3*n],u=t[3*n+1],c=t[3*n+2],l=t[3*i],d=t[3*i+1],h=t[3*i+2],f=t[3*s],p=t[3*s+1],m=t[3*s+2],S.set(a,u,c),C.set(l,d,h),E.set(f,p,m),C.subtractToRef(S,P),E.subtractToRef(C,A),E.subtractToRef(S,j),_=P.length(),g=A.length(),b=j.length(),v=(_+g+b)/2,M=Math.sqrt(v*(v-_)*(v-g)*(v-b)),R+=M,O[w]=M;var D=0;for(w=0;w<I;w++)T[w]=Math.floor(e*O[w]/R),D+=T[w];var F=e-D,B=Math.floor(F/I),L=F%I;B>0&&(T=T.map((function(e){return e+B})));for(w=0;w<L;w++)T[w]+=1;return T},PointsCloudSystem.prototype.addPoints=function(e,t){void 0===t&&(t=this._randomUnitVector);for(var r,n=new d["PointsGroup"](this._groupCounter,t),i=this.nbParticles,o=0;o<e;o++)r=this._addParticle(i,n,this._groupCounter,o),n&&n._positionFunction&&n._positionFunction(r,i,o),this._positions.push(r.position.x,r.position.y,r.position.z),r.color&&this._colors.push(r.color.r,r.color.g,r.color.b,r.color.a),r.uv&&this._uvs.push(r.uv.x,r.uv.y),i++;return this.nbParticles+=e,this._groupCounter++,this._groupCounter},PointsCloudSystem.prototype.addSurfacePoints=function(e,t,r,o,s){var u=r||n.Random;(isNaN(u)||u<0||u>3)&&(u=n.Random);var c=e.getVerticesData(a["VertexBuffer"].PositionKind),l=e.getIndices();this._groups.push(this._groupCounter);var h=new d["PointsGroup"](this._groupCounter,null);switch(h._groupDensity=this._calculateDensity(t,c,l),u===n.Color?h._textureNb=o||0:o=o||new i["Color4"](1,1,1,1),u){case n.Color:this._colorFromTexture(e,h,!1);break;case n.UV:this._setPointsColorOrUV(e,h,!1,!1,!1);break;case n.Random:this._setPointsColorOrUV(e,h,!1);break;case n.Stated:this._setPointsColorOrUV(e,h,!1,void 0,void 0,o,s);break}return this.nbParticles+=t,this._groupCounter++,this._groupCounter-1},PointsCloudSystem.prototype.addVolumePoints=function(e,t,r,o,s){var u=r||n.Random;(isNaN(u)||u<0||u>3)&&(u=n.Random);var c=e.getVerticesData(a["VertexBuffer"].PositionKind),l=e.getIndices();this._groups.push(this._groupCounter);var h=new d["PointsGroup"](this._groupCounter,null);switch(h._groupDensity=this._calculateDensity(t,c,l),u===n.Color?h._textureNb=o||0:o=o||new i["Color4"](1,1,1,1),u){case n.Color:this._colorFromTexture(e,h,!0);break;case n.UV:this._setPointsColorOrUV(e,h,!0,!1,!1);break;case n.Random:this._setPointsColorOrUV(e,h,!0);break;case n.Stated:this._setPointsColorOrUV(e,h,!0,void 0,void 0,o,s);break}return this.nbParticles+=t,this._groupCounter++,this._groupCounter-1},PointsCloudSystem.prototype.setParticles=function(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=this.nbParticles-1),void 0===r&&(r=!0),!this._updatable||!this._isReady)return this;this.beforeUpdateParticles(e,t,r);var n=o["TmpVectors"].Matrix[0],i=this.mesh,s=this._colors32,u=this._positions32,c=this._uvs32,l=o["TmpVectors"].Vector3,d=l[5].copyFromFloats(1,0,0),f=l[6].copyFromFloats(0,1,0),p=l[7].copyFromFloats(0,0,1),m=l[8].setAll(Number.MAX_VALUE),_=l[9].setAll(-Number.MAX_VALUE);o["Matrix"].IdentityToRef(n);var g=0;if(this.mesh.isFacetDataEnabled&&(this._computeBoundingBox=!0),t=t>=this.nbParticles?this.nbParticles-1:t,this._computeBoundingBox&&(0!=e||t!=this.nbParticles-1)){var b=this.mesh._boundingInfo;b&&(m.copyFrom(b.minimum),_.copyFrom(b.maximum))}g=0;for(var v=0,M=0,T=0,S=e;S<=t;S++){var C=this.particles[S];g=C.idx,v=3*g,M=4*g,T=2*g,this.updateParticle(C);var E=C._rotationMatrix,P=C.position,A=C._globalPosition;this._computeParticleRotation&&C.getRotationMatrix(n);var j=null!==C.parentId;if(j){var O=this.particles[C.parentId],R=O._rotationMatrix,I=O._globalPosition,w=P.x*R[1]+P.y*R[4]+P.z*R[7],D=P.x*R[0]+P.y*R[3]+P.z*R[6],F=P.x*R[2]+P.y*R[5]+P.z*R[8];if(A.x=I.x+D,A.y=I.y+w,A.z=I.z+F,this._computeParticleRotation){var B=n.m;E[0]=B[0]*R[0]+B[1]*R[3]+B[2]*R[6],E[1]=B[0]*R[1]+B[1]*R[4]+B[2]*R[7],E[2]=B[0]*R[2]+B[1]*R[5]+B[2]*R[8],E[3]=B[4]*R[0]+B[5]*R[3]+B[6]*R[6],E[4]=B[4]*R[1]+B[5]*R[4]+B[6]*R[7],E[5]=B[4]*R[2]+B[5]*R[5]+B[6]*R[8],E[6]=B[8]*R[0]+B[9]*R[3]+B[10]*R[6],E[7]=B[8]*R[1]+B[9]*R[4]+B[10]*R[7],E[8]=B[8]*R[2]+B[9]*R[5]+B[10]*R[8]}}else if(A.x=0,A.y=0,A.z=0,this._computeParticleRotation){B=n.m;E[0]=B[0],E[1]=B[1],E[2]=B[2],E[3]=B[4],E[4]=B[5],E[5]=B[6],E[6]=B[8],E[7]=B[9],E[8]=B[10]}var L=l[11];C.translateFromPivot?L.setAll(0):L.copyFrom(C.pivot);var V=l[0];V.copyFrom(C.position);var N=V.x-C.pivot.x,k=V.y-C.pivot.y,U=V.z-C.pivot.z,z=N*E[0]+k*E[3]+U*E[6],G=N*E[1]+k*E[4]+U*E[7],W=N*E[2]+k*E[5]+U*E[8];z+=L.x,G+=L.y,W+=L.z;var H=u[v]=A.x+d.x*z+f.x*G+p.x*W,X=u[v+1]=A.y+d.y*z+f.y*G+p.y*W,q=u[v+2]=A.z+d.z*z+f.z*G+p.z*W;if(this._computeBoundingBox&&(m.minimizeInPlaceFromFloats(H,X,q),_.maximizeInPlaceFromFloats(H,X,q)),this._computeParticleColor&&C.color){var K=C.color,Y=this._colors32;Y[M]=K.r,Y[M+1]=K.g,Y[M+2]=K.b,Y[M+3]=K.a}if(this._computeParticleTexture&&C.uv){var Q=C.uv,Z=this._uvs32;Z[T]=Q.x,Z[T+1]=Q.y}}return r&&(this._computeParticleColor&&i.updateVerticesData(a["VertexBuffer"].ColorKind,s,!1,!1),this._computeParticleTexture&&i.updateVerticesData(a["VertexBuffer"].UVKind,c,!1,!1),i.updateVerticesData(a["VertexBuffer"].PositionKind,u,!1,!1)),this._computeBoundingBox&&(i._boundingInfo?i._boundingInfo.reConstruct(m,_,i._worldMatrix):i._boundingInfo=new h["BoundingInfo"](m,_,i._worldMatrix)),this.afterUpdateParticles(e,t,r),this},PointsCloudSystem.prototype.dispose=function(){this.mesh.dispose(),this.vars=null,this._positions=null,this._indices=null,this._normals=null,this._uvs=null,this._colors=null,this._indices32=null,this._positions32=null,this._uvs32=null,this._colors32=null},PointsCloudSystem.prototype.refreshVisibleSize=function(){return this._isVisibilityBoxLocked||this.mesh.refreshBoundingInfo(),this},PointsCloudSystem.prototype.setVisibilityBox=function(e){var t=e/2;this.mesh._boundingInfo=new h["BoundingInfo"](new o["Vector3"](-t,-t,-t),new o["Vector3"](t,t,t))},Object.defineProperty(PointsCloudSystem.prototype,"isAlwaysVisible",{get:function(){return this._alwaysVisible},set:function(e){this._alwaysVisible=e,this.mesh.alwaysSelectAsActiveMesh=e},enumerable:!1,configurable:!0}),Object.defineProperty(PointsCloudSystem.prototype,"computeParticleRotation",{set:function(e){this._computeParticleRotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(PointsCloudSystem.prototype,"computeParticleColor",{get:function(){return this._computeParticleColor},set:function(e){this._computeParticleColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(PointsCloudSystem.prototype,"computeParticleTexture",{get:function(){return this._computeParticleTexture},set:function(e){this._computeParticleTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(PointsCloudSystem.prototype,"computeBoundingBox",{get:function(){return this._computeBoundingBox},set:function(e){this._computeBoundingBox=e},enumerable:!1,configurable:!0}),PointsCloudSystem.prototype.initParticles=function(){},PointsCloudSystem.prototype.recycleParticle=function(e){return e},PointsCloudSystem.prototype.updateParticle=function(e){return e},PointsCloudSystem.prototype.beforeUpdateParticles=function(e,t,r){},PointsCloudSystem.prototype.afterUpdateParticles=function(e,t,r){},PointsCloudSystem}()},"./node_modules/@babylonjs/core/Particles/solidParticle.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SolidParticle",(function(){return u})),r.d(t,"ModelShape",(function(){return c})),r.d(t,"DepthSortedParticle",(function(){return l})),r.d(t,"SolidParticleVertex",(function(){return d}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),s=r("./node_modules/@babylonjs/core/Culling/boundingSphere.js"),a=r("./node_modules/@babylonjs/core/Meshes/abstractMesh.js"),u=function(){function SolidParticle(e,t,r,s,u,c,l,d,h,f){void 0===h&&(h=null),void 0===f&&(f=null),this.idx=0,this.id=0,this.color=new i["Color4"](1,1,1,1),this.position=n["Vector3"].Zero(),this.rotation=n["Vector3"].Zero(),this.scaling=n["Vector3"].One(),this.uvs=new n["Vector4"](0,0,1,1),this.velocity=n["Vector3"].Zero(),this.pivot=n["Vector3"].Zero(),this.translateFromPivot=!1,this.alive=!0,this.isVisible=!0,this._pos=0,this._ind=0,this.shapeId=0,this.idxInShape=0,this._stillInvisible=!1,this._rotationMatrix=[1,0,0,0,1,0,0,0,1],this.parentId=null,this.materialIndex=null,this.props=null,this.cullingStrategy=a["AbstractMesh"].CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,this._globalPosition=n["Vector3"].Zero(),this.idx=e,this.id=t,this._pos=r,this._ind=s,this._model=u,this.shapeId=c,this.idxInShape=l,this._sps=d,h&&(this._modelBoundingInfo=h,this._boundingInfo=new o["BoundingInfo"](h.minimum,h.maximum)),null!==f&&(this.materialIndex=f)}return SolidParticle.prototype.copyToRef=function(e){return e.position.copyFrom(this.position),e.rotation.copyFrom(this.rotation),this.rotationQuaternion&&(e.rotationQuaternion?e.rotationQuaternion.copyFrom(this.rotationQuaternion):e.rotationQuaternion=this.rotationQuaternion.clone()),e.scaling.copyFrom(this.scaling),this.color&&(e.color?e.color.copyFrom(this.color):e.color=this.color.clone()),e.uvs.copyFrom(this.uvs),e.velocity.copyFrom(this.velocity),e.pivot.copyFrom(this.pivot),e.translateFromPivot=this.translateFromPivot,e.alive=this.alive,e.isVisible=this.isVisible,e.parentId=this.parentId,e.cullingStrategy=this.cullingStrategy,null!==this.materialIndex&&(e.materialIndex=this.materialIndex),this},Object.defineProperty(SolidParticle.prototype,"scale",{get:function(){return this.scaling},set:function(e){this.scaling=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticle.prototype,"quaternion",{get:function(){return this.rotationQuaternion},set:function(e){this.rotationQuaternion=e},enumerable:!1,configurable:!0}),SolidParticle.prototype.intersectsMesh=function(e){return!(!this._boundingInfo||!e._boundingInfo)&&(this._sps._bSphereOnly?s["BoundingSphere"].Intersects(this._boundingInfo.boundingSphere,e._boundingInfo.boundingSphere):this._boundingInfo.intersects(e._boundingInfo,!1))},SolidParticle.prototype.isInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isInFrustum(e,this.cullingStrategy)},SolidParticle.prototype.getRotationMatrix=function(e){var t;if(this.rotationQuaternion)t=this.rotationQuaternion;else{t=n["TmpVectors"].Quaternion[0];var r=this.rotation;n["Quaternion"].RotationYawPitchRollToRef(r.y,r.x,r.z,t)}t.toRotationMatrix(e)},SolidParticle}(),c=function(){function ModelShape(e,t,r,n,i,o,s,a,u){this._indicesLength=0,this.shapeID=e,this._shape=t,this._indices=r,this._indicesLength=r.length,this._shapeUV=o,this._shapeColors=i,this._normals=n,this._positionFunction=s,this._vertexFunction=a,this._material=u}return ModelShape}(),l=function(){function DepthSortedParticle(e,t,r,n){this.idx=0,this.ind=0,this.indicesLength=0,this.sqDistance=0,this.materialIndex=0,this.idx=e,this.ind=t,this.indicesLength=r,this.materialIndex=n}return DepthSortedParticle}(),d=function(){function SolidParticleVertex(){this.position=n["Vector3"].Zero(),this.color=new i["Color4"](1,1,1,1),this.uv=n["Vector2"].Zero()}return Object.defineProperty(SolidParticleVertex.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleVertex.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleVertex.prototype,"z",{get:function(){return this.position.z},set:function(e){this.position.z=e},enumerable:!1,configurable:!0}),SolidParticleVertex}()},"./node_modules/@babylonjs/core/Particles/solidParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SolidParticleSystem",(function(){return g}));var n=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),i=r("./node_modules/@babylonjs/core/Maths/math.color.js"),o=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.vertexData.js"),a=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),u=r("./node_modules/@babylonjs/core/Meshes/Builders/discBuilder.js"),c=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),l=r("./node_modules/@babylonjs/core/Particles/solidParticle.js"),d=r("./node_modules/@babylonjs/core/Culling/boundingInfo.js"),h=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),f=r("./node_modules/@babylonjs/core/Meshes/subMesh.js"),p=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),m=r("./node_modules/@babylonjs/core/Materials/multiMaterial.js"),_=r("./node_modules/@babylonjs/core/Misc/tools.js"),g=function(){function SolidParticleSystem(e,t,r){this.particles=new Array,this.nbParticles=0,this.billboard=!1,this.recomputeNormals=!1,this.counter=0,this.vars={},this._bSphereOnly=!1,this._bSphereRadiusFactor=1,this._positions=new Array,this._indices=new Array,this._normals=new Array,this._colors=new Array,this._uvs=new Array,this._index=0,this._updatable=!0,this._pickable=!1,this._isVisibilityBoxLocked=!1,this._alwaysVisible=!1,this._depthSort=!1,this._expandable=!1,this._shapeCounter=0,this._copy=new l["SolidParticle"](0,0,0,0,null,0,0,this),this._color=new i["Color4"](0,0,0,0),this._computeParticleColor=!0,this._computeParticleTexture=!0,this._computeParticleRotation=!0,this._computeParticleVertex=!1,this._computeBoundingBox=!1,this._depthSortParticles=!0,this._mustUnrotateFixedNormals=!1,this._particlesIntersect=!1,this._needs32Bits=!1,this._isNotBuilt=!0,this._lastParticleId=0,this._idxOfId=[],this._multimaterialEnabled=!1,this._useModelMaterial=!1,this._depthSortFunction=function(e,t){return t.sqDistance-e.sqDistance},this._materialSortFunction=function(e,t){return e.materialIndex-t.materialIndex},this._autoUpdateSubMeshes=!1,this.name=e,this._scene=t||c["EngineStore"].LastCreatedScene,this._camera=t.activeCamera,this._pickable=!!r&&r.isPickable,this._depthSort=!!r&&r.enableDepthSort,this._multimaterialEnabled=!!r&&r.enableMultiMaterial,this._useModelMaterial=!!r&&r.useModelMaterial,this._multimaterialEnabled=!!this._useModelMaterial||this._multimaterialEnabled,this._expandable=!!r&&r.expandable,this._particlesIntersect=!!r&&r.particleIntersection,this._bSphereOnly=!!r&&r.boundingSphereOnly,this._bSphereRadiusFactor=r&&r.bSphereRadiusFactor?r.bSphereRadiusFactor:1,r&&void 0!==r.updatable?this._updatable=r.updatable:this._updatable=!0,this._pickable&&(this.pickedBySubMesh=[[]],this.pickedParticles=this.pickedBySubMesh[0]),(this._depthSort||this._multimaterialEnabled)&&(this.depthSortedParticles=[]),this._multimaterialEnabled&&(this._multimaterial=new m["MultiMaterial"](this.name+"MultiMaterial",this._scene),this._materials=[],this._materialIndexesById={}),this._tmpVertex=new l["SolidParticleVertex"]}return SolidParticleSystem.prototype.buildMesh=function(){if(!this._isNotBuilt&&this.mesh)return this.mesh;if(0===this.nbParticles&&!this.mesh){var e=u["DiscBuilder"].CreateDisc("",{radius:1,tessellation:3},this._scene);this.addShape(e,1),e.dispose()}if(this._indices32=this._needs32Bits?new Uint32Array(this._indices):new Uint16Array(this._indices),this._positions32=new Float32Array(this._positions),this._uvs32=new Float32Array(this._uvs),this._colors32=new Float32Array(this._colors),!this.mesh){var t=new a["Mesh"](this.name,this._scene);this.mesh=t}!this._updatable&&this._multimaterialEnabled&&this._sortParticlesByMaterial(),this.recomputeNormals&&s["VertexData"].ComputeNormals(this._positions32,this._indices32,this._normals),this._normals32=new Float32Array(this._normals),this._fixedNormal32=new Float32Array(this._normals),this._mustUnrotateFixedNormals&&this._unrotateFixedNormals();var r=new s["VertexData"];if(r.indices=this._depthSort?this._indices:this._indices32,r.set(this._positions32,o["VertexBuffer"].PositionKind),r.set(this._normals32,o["VertexBuffer"].NormalKind),this._uvs32.length>0&&r.set(this._uvs32,o["VertexBuffer"].UVKind),this._colors32.length>0&&r.set(this._colors32,o["VertexBuffer"].ColorKind),r.applyToMesh(this.mesh,this._updatable),this.mesh.isPickable=this._pickable,this._pickable)for(var n=0,i=0;i<this.nbParticles;i++)for(var c=this.particles[i],l=c._model._indicesLength,d=0;d<l;d++){var h=d%3;if(0==h){var f={idx:c.idx,faceId:n};this.pickedParticles[n]=f,n++}}return this._multimaterialEnabled&&this.setMultiMaterial(this._materials),this._expandable||(this._depthSort||this._multimaterialEnabled||(this._indices=null),this._positions=null,this._normals=null,this._uvs=null,this._colors=null,this._updatable||(this.particles.length=0)),this._isNotBuilt=!1,this.recomputeNormals=!1,this.mesh},SolidParticleSystem.prototype.digest=function(e,t){var r=t&&t.facetNb||1,i=t&&t.number||0,s=t&&t.delta||0,a=e.getVerticesData(o["VertexBuffer"].PositionKind),u=e.getIndices(),c=e.getVerticesData(o["VertexBuffer"].UVKind),h=e.getVerticesData(o["VertexBuffer"].ColorKind),f=e.getVerticesData(o["VertexBuffer"].NormalKind),p=t&&t.storage?t.storage:null,m=0,g=u.length/3;i?(i=i>g?g:i,r=Math.round(g/i),s=0):r=r>g?g:r;var b=[],v=[],M=[],T=[],S=[],C=n["Vector3"].Zero(),E=r;while(m<g){r=E+Math.floor((1+s)*Math.random()),m>g-r&&(r=g-m),b.length=0,v.length=0,M.length=0,T.length=0,S.length=0;for(var P=0,A=3*m;A<3*(m+r);A++){M.push(P);var j=u[A],O=3*j;if(b.push(a[O],a[O+1],a[O+2]),v.push(f[O],f[O+1],f[O+2]),c){var R=2*j;T.push(c[R],c[R+1])}if(h){var I=4*j;S.push(h[I],h[I+1],h[I+2],h[I+3])}P++}var w,D=this.nbParticles,F=this._posToShape(b),B=this._uvsToShapeUV(T),L=_["Tools"].Slice(M),V=_["Tools"].Slice(S),N=_["Tools"].Slice(v);for(C.copyFromFloats(0,0,0),w=0;w<F.length;w++)C.addInPlace(F[w]);C.scaleInPlace(1/F.length);var k,U=new n["Vector3"](1/0,1/0,1/0),z=new n["Vector3"](-1/0,-1/0,-1/0);for(w=0;w<F.length;w++)F[w].subtractInPlace(C),U.minimizeInPlaceFromFloats(F[w].x,F[w].y,F[w].z),z.maximizeInPlaceFromFloats(F[w].x,F[w].y,F[w].z);this._particlesIntersect&&(k=new d["BoundingInfo"](U,z));var G=null;this._useModelMaterial&&(G=e.material?e.material:this._setDefaultMaterial());var W=new l["ModelShape"](this._shapeCounter,F,L,N,V,B,null,null,G),H=this._positions.length,X=this._indices.length;this._meshBuilder(this._index,X,F,this._positions,L,this._indices,T,this._uvs,V,this._colors,N,this._normals,D,0,null,W),this._addParticle(D,this._lastParticleId,H,X,W,this._shapeCounter,0,k,p),this.particles[this.nbParticles].position.addInPlace(C),p||(this._index+=F.length,D++,this.nbParticles++,this._lastParticleId++),this._shapeCounter++,m+=r}return this._isNotBuilt=!0,this},SolidParticleSystem.prototype._unrotateFixedNormals=function(){for(var e=0,t=0,r=n["TmpVectors"].Vector3[0],i=n["TmpVectors"].Quaternion[0],o=n["TmpVectors"].Matrix[0],s=0;s<this.particles.length;s++){var a=this.particles[s],u=a._model._shape;if(a.rotationQuaternion)a.rotationQuaternion.conjugateToRef(i);else{var c=a.rotation;n["Quaternion"].RotationYawPitchRollToRef(c.y,c.x,c.z,i),i.conjugateInPlace()}i.toRotationMatrix(o);for(var l=0;l<u.length;l++)t=e+3*l,n["Vector3"].TransformNormalFromFloatsToRef(this._normals32[t],this._normals32[t+1],this._normals32[t+2],o,r),r.toArray(this._fixedNormal32,t);e=t+3}},SolidParticleSystem.prototype._resetCopy=function(){var e=this._copy;e.position.setAll(0),e.rotation.setAll(0),e.rotationQuaternion=null,e.scaling.setAll(1),e.uvs.copyFromFloats(0,0,1,1),e.color=null,e.translateFromPivot=!1,e.shapeId=0,e.materialIndex=null},SolidParticleSystem.prototype._meshBuilder=function(e,t,r,i,o,s,a,u,c,d,h,f,p,m,_,g){var b,v=0,M=0,T=0;this._resetCopy();var S=this._copy,C=!(!_||!_.storage);if(S.idx=p,S.idxInShape=m,S.shapeId=g.shapeID,this._useModelMaterial){var E=g._material.uniqueId,P=this._materialIndexesById;P.hasOwnProperty(E)||(P[E]=this._materials.length,this._materials.push(g._material));var A=P[E];S.materialIndex=A}if(_&&_.positionFunction&&(_.positionFunction(S,p,m),this._mustUnrotateFixedNormals=!0),C)return S;var j=n["TmpVectors"].Matrix[0],O=this._tmpVertex,R=O.position,I=O.color,w=O.uv,D=n["TmpVectors"].Vector3[1],F=n["TmpVectors"].Vector3[2],B=n["TmpVectors"].Vector3[3];n["Matrix"].IdentityToRef(j),S.getRotationMatrix(j),S.pivot.multiplyToRef(S.scaling,B),S.translateFromPivot?F.setAll(0):F.copyFrom(B);var L=_&&_.vertexFunction;for(b=0;b<r.length;b++){if(R.copyFrom(r[b]),S.color&&I.copyFrom(S.color),a&&w.copyFromFloats(a[v],a[v+1]),L&&_.vertexFunction(S,O,b),R.multiplyInPlace(S.scaling).subtractInPlace(B),n["Vector3"].TransformCoordinatesToRef(R,j,D),D.addInPlace(F).addInPlace(S.position),i.push(D.x,D.y,D.z),a){var V=S.uvs;u.push((V.z-V.x)*w.x+V.x,(V.w-V.y)*w.y+V.y),v+=2}if(S.color)this._color.copyFrom(I);else{var N=this._color;c&&void 0!==c[M]?(N.r=c[M],N.g=c[M+1],N.b=c[M+2],N.a=c[M+3]):(N.r=1,N.g=1,N.b=1,N.a=1)}d.push(this._color.r,this._color.g,this._color.b,this._color.a),M+=4,!this.recomputeNormals&&h&&(n["Vector3"].TransformNormalFromFloatsToRef(h[T],h[T+1],h[T+2],j,R),f.push(R.x,R.y,R.z),T+=3)}for(b=0;b<o.length;b++){var k=e+o[b];s.push(k),k>65535&&(this._needs32Bits=!0)}if(this._depthSort||this._multimaterialEnabled){var U=null!==S.materialIndex?S.materialIndex:0;this.depthSortedParticles.push(new l["DepthSortedParticle"](p,t,o.length,U))}return S},SolidParticleSystem.prototype._posToShape=function(e){for(var t=[],r=0;r<e.length;r+=3)t.push(n["Vector3"].FromArray(e,r));return t},SolidParticleSystem.prototype._uvsToShapeUV=function(e){var t=[];if(e)for(var r=0;r<e.length;r++)t.push(e[r]);return t},SolidParticleSystem.prototype._addParticle=function(e,t,r,n,i,o,s,a,u){void 0===a&&(a=null),void 0===u&&(u=null);var c=new l["SolidParticle"](e,t,r,n,i,o,s,this,a),d=u||this.particles;return d.push(c),c},SolidParticleSystem.prototype.addShape=function(e,t,r){var n=e.getVerticesData(o["VertexBuffer"].PositionKind),i=e.getIndices(),s=e.getVerticesData(o["VertexBuffer"].UVKind),a=e.getVerticesData(o["VertexBuffer"].ColorKind),u=e.getVerticesData(o["VertexBuffer"].NormalKind);this.recomputeNormals=!u;var c=_["Tools"].SliceToArray(i),d=_["Tools"].SliceToArray(u),h=a?_["Tools"].SliceToArray(a):[],f=r&&r.storage?r.storage:null,p=null;this._particlesIntersect&&(p=e.getBoundingInfo());var m=this._posToShape(n),g=this._uvsToShapeUV(s),b=r?r.positionFunction:null,v=r?r.vertexFunction:null,M=null;this._useModelMaterial&&(M=e.material?e.material:this._setDefaultMaterial());for(var T=new l["ModelShape"](this._shapeCounter,m,c,d,h,g,b,v,M),S=0;S<t;S++)this._insertNewParticle(this.nbParticles,S,T,m,i,s,a,u,p,f,r);return this._shapeCounter++,this._isNotBuilt=!0,this._shapeCounter-1},SolidParticleSystem.prototype._rebuildParticle=function(e,t){void 0===t&&(t=!1),this._resetCopy();var r=this._copy;e._model._positionFunction&&e._model._positionFunction(r,e.idx,e.idxInShape);var i=n["TmpVectors"].Matrix[0],o=n["TmpVectors"].Vector3[0],s=n["TmpVectors"].Vector3[1],a=n["TmpVectors"].Vector3[2],u=n["TmpVectors"].Vector3[3];r.getRotationMatrix(i),e.pivot.multiplyToRef(e.scaling,u),r.translateFromPivot?a.copyFromFloats(0,0,0):a.copyFrom(u);for(var c=e._model._shape,l=0;l<c.length;l++)o.copyFrom(c[l]),e._model._vertexFunction&&e._model._vertexFunction(r,o,l),o.multiplyInPlace(r.scaling).subtractInPlace(u),n["Vector3"].TransformCoordinatesToRef(o,i,s),s.addInPlace(a).addInPlace(r.position).toArray(this._positions32,e._pos+3*l);t&&(e.position.setAll(0),e.rotation.setAll(0),e.rotationQuaternion=null,e.scaling.setAll(1),e.uvs.setAll(0),e.pivot.setAll(0),e.translateFromPivot=!1,e.parentId=null)},SolidParticleSystem.prototype.rebuildMesh=function(e){void 0===e&&(e=!1);for(var t=0;t<this.particles.length;t++)this._rebuildParticle(this.particles[t],e);return this.mesh.updateVerticesData(o["VertexBuffer"].PositionKind,this._positions32,!1,!1),this},SolidParticleSystem.prototype.removeParticles=function(e,t){var r=t-e+1;if(!this._expandable||r<=0||r>=this.nbParticles||!this._updatable)return[];var n=this.particles,i=this.nbParticles;if(t<i-1)for(var o=t+1,s=n[o]._pos-n[e]._pos,a=n[o]._ind-n[e]._ind,u=o;u<i;u++){var c=n[u];c._pos-=s,c._ind-=a}var l=n.splice(e,r);this._positions.length=0,this._indices.length=0,this._colors.length=0,this._uvs.length=0,this._normals.length=0,this._index=0,this._idxOfId.length=0,(this._depthSort||this._multimaterialEnabled)&&(this.depthSortedParticles=[]);for(var d=0,h=n.length,f=0;f<h;f++){var p=n[f],m=p._model,_=m._shape,g=m._indices,b=m._normals,v=m._shapeColors,M=m._shapeUV;p.idx=f,this._idxOfId[p.id]=f,this._meshBuilder(this._index,d,_,this._positions,g,this._indices,M,this._uvs,v,this._colors,b,this._normals,p.idx,p.idxInShape,null,m),this._index+=_.length,d+=g.length}return this.nbParticles-=r,this._isNotBuilt=!0,l},SolidParticleSystem.prototype.insertParticlesFromArray=function(e){if(!this._expandable)return this;for(var t=0,r=e[0].shapeId,n=e.length,i=0;i<n;i++){var o=e[i],s=o._model,a=s._shape,u=s._indices,c=s._shapeUV,l=s._shapeColors,d=s._normals,h=!d;this.recomputeNormals=h||this.recomputeNormals;var f=o._boundingInfo,p=this._insertNewParticle(this.nbParticles,t,s,a,u,c,l,d,f,null,null);o.copyToRef(p),t++,r!=o.shapeId&&(r=o.shapeId,t=0)}return this._isNotBuilt=!0,this},SolidParticleSystem.prototype._insertNewParticle=function(e,t,r,n,i,o,s,a,u,c,l){var d=this._positions.length,h=this._indices.length,f=this._meshBuilder(this._index,h,n,this._positions,i,this._indices,o,this._uvs,s,this._colors,a,this._normals,e,t,l,r),p=null;return this._updatable&&(p=this._addParticle(this.nbParticles,this._lastParticleId,d,h,r,this._shapeCounter,t,u,c),p.position.copyFrom(f.position),p.rotation.copyFrom(f.rotation),f.rotationQuaternion&&(p.rotationQuaternion?p.rotationQuaternion.copyFrom(f.rotationQuaternion):p.rotationQuaternion=f.rotationQuaternion.clone()),f.color&&(p.color?p.color.copyFrom(f.color):p.color=f.color.clone()),p.scaling.copyFrom(f.scaling),p.uvs.copyFrom(f.uvs),null!==f.materialIndex&&(p.materialIndex=f.materialIndex),this.expandable&&(this._idxOfId[p.id]=p.idx)),c||(this._index+=n.length,this.nbParticles++,this._lastParticleId++),p},SolidParticleSystem.prototype.setParticles=function(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=this.nbParticles-1),void 0===r&&(r=!0),!this._updatable||this._isNotBuilt)return this;this.beforeUpdateParticles(e,t,r);var i=n["TmpVectors"].Matrix[0],a=n["TmpVectors"].Matrix[1],u=this.mesh,c=this._colors32,l=this._positions32,f=this._normals32,p=this._uvs32,m=this._indices32,_=this._indices,g=this._fixedNormal32,b=n["TmpVectors"].Vector3,v=b[5].copyFromFloats(1,0,0),M=b[6].copyFromFloats(0,1,0),T=b[7].copyFromFloats(0,0,1),S=b[8].setAll(Number.MAX_VALUE),C=b[9].setAll(-Number.MAX_VALUE),E=b[10].setAll(0),P=this._tmpVertex,A=P.position,j=P.color,O=P.uv;if((this.billboard||this._depthSort)&&(this.mesh.computeWorldMatrix(!0),this.mesh._worldMatrix.invertToRef(a)),this.billboard){var R=b[0];this._camera.getDirectionToRef(h["Axis"].Z,R),n["Vector3"].TransformNormalToRef(R,a,T),T.normalize();var I=this._camera.getViewMatrix(!0);n["Vector3"].TransformNormalFromFloatsToRef(I.m[1],I.m[5],I.m[9],a,M),n["Vector3"].CrossToRef(M,T,v),M.normalize(),v.normalize()}this._depthSort&&n["Vector3"].TransformCoordinatesToRef(this._camera.globalPosition,a,E),n["Matrix"].IdentityToRef(i);var w=0,D=0,F=0,B=0,L=0,V=0,N=0;if(this.mesh.isFacetDataEnabled&&(this._computeBoundingBox=!0),t=t>=this.nbParticles?this.nbParticles-1:t,this._computeBoundingBox&&(0!=e||t!=this.nbParticles-1)){var k=this.mesh._boundingInfo;k&&(S.copyFrom(k.minimum),C.copyFrom(k.maximum))}D=this.particles[e]._pos;var U=D/3|0;B=4*U,V=2*U;for(var z=e;z<=t;z++){var G=this.particles[z];this.updateParticle(G);var W=G._model._shape,H=G._model._shapeUV,X=G._rotationMatrix,q=G.position,K=G.rotation,Y=G.scaling,Q=G._globalPosition;if(this._depthSort&&this._depthSortParticles){var Z=this.depthSortedParticles[z];Z.idx=G.idx,Z.ind=G._ind,Z.indicesLength=G._model._indicesLength,Z.sqDistance=n["Vector3"].DistanceSquared(G.position,E)}if(!G.alive||G._stillInvisible&&!G.isVisible)N=W.length,D+=3*N,B+=4*N,V+=2*N;else{if(G.isVisible){G._stillInvisible=!1;var $=b[12];G.pivot.multiplyToRef(Y,$),this.billboard&&(K.x=0,K.y=0),(this._computeParticleRotation||this.billboard)&&G.getRotationMatrix(i);var J=null!==G.parentId;if(J){var ee=this.getParticleById(G.parentId);if(ee){var te=ee._rotationMatrix,re=ee._globalPosition,ne=q.x*te[1]+q.y*te[4]+q.z*te[7],ie=q.x*te[0]+q.y*te[3]+q.z*te[6],oe=q.x*te[2]+q.y*te[5]+q.z*te[8];if(Q.x=re.x+ie,Q.y=re.y+ne,Q.z=re.z+oe,this._computeParticleRotation||this.billboard){var se=i.m;X[0]=se[0]*te[0]+se[1]*te[3]+se[2]*te[6],X[1]=se[0]*te[1]+se[1]*te[4]+se[2]*te[7],X[2]=se[0]*te[2]+se[1]*te[5]+se[2]*te[8],X[3]=se[4]*te[0]+se[5]*te[3]+se[6]*te[6],X[4]=se[4]*te[1]+se[5]*te[4]+se[6]*te[7],X[5]=se[4]*te[2]+se[5]*te[5]+se[6]*te[8],X[6]=se[8]*te[0]+se[9]*te[3]+se[10]*te[6],X[7]=se[8]*te[1]+se[9]*te[4]+se[10]*te[7],X[8]=se[8]*te[2]+se[9]*te[5]+se[10]*te[8]}}else G.parentId=null}else if(Q.x=q.x,Q.y=q.y,Q.z=q.z,this._computeParticleRotation||this.billboard){se=i.m;X[0]=se[0],X[1]=se[1],X[2]=se[2],X[3]=se[4],X[4]=se[5],X[5]=se[6],X[6]=se[8],X[7]=se[9],X[8]=se[10]}var ae=b[11];for(G.translateFromPivot?ae.setAll(0):ae.copyFrom($),N=0;N<W.length;N++){w=D+3*N,F=B+4*N,L=V+2*N;var ue=2*N,ce=ue+1;A.copyFrom(W[N]),this._computeParticleColor&&G.color&&j.copyFrom(G.color),this._computeParticleTexture&&O.copyFromFloats(H[ue],H[ce]),this._computeParticleVertex&&this.updateParticleVertex(G,P,N);var le=A.x*Y.x-$.x,de=A.y*Y.y-$.y,he=A.z*Y.z-$.z;ie=le*X[0]+de*X[3]+he*X[6],ne=le*X[1]+de*X[4]+he*X[7],oe=le*X[2]+de*X[5]+he*X[8];ie+=ae.x,ne+=ae.y,oe+=ae.z;var fe=l[w]=Q.x+v.x*ie+M.x*ne+T.x*oe,pe=l[w+1]=Q.y+v.y*ie+M.y*ne+T.y*oe,me=l[w+2]=Q.z+v.z*ie+M.z*ne+T.z*oe;if(this._computeBoundingBox&&(S.minimizeInPlaceFromFloats(fe,pe,me),C.maximizeInPlaceFromFloats(fe,pe,me)),!this._computeParticleVertex){var _e=g[w],ge=g[w+1],be=g[w+2],ve=_e*X[0]+ge*X[3]+be*X[6],ye=_e*X[1]+ge*X[4]+be*X[7],xe=_e*X[2]+ge*X[5]+be*X[8];f[w]=v.x*ve+M.x*ye+T.x*xe,f[w+1]=v.y*ve+M.y*ye+T.y*xe,f[w+2]=v.z*ve+M.z*ye+T.z*xe}if(this._computeParticleColor&&G.color){var Me=this._colors32;Me[F]=j.r,Me[F+1]=j.g,Me[F+2]=j.b,Me[F+3]=j.a}if(this._computeParticleTexture){var Te=G.uvs;p[L]=O.x*(Te.z-Te.x)+Te.x,p[L+1]=O.y*(Te.w-Te.y)+Te.y}}}else for(G._stillInvisible=!0,N=0;N<W.length;N++){if(w=D+3*N,F=B+4*N,L=V+2*N,l[w]=l[w+1]=l[w+2]=0,f[w]=f[w+1]=f[w+2]=0,this._computeParticleColor&&G.color){var Se=G.color;c[F]=Se.r,c[F+1]=Se.g,c[F+2]=Se.b,c[F+3]=Se.a}if(this._computeParticleTexture){Te=G.uvs;p[L]=H[2*N]*(Te.z-Te.x)+Te.x,p[L+1]=H[2*N+1]*(Te.w-Te.y)+Te.y}}if(this._particlesIntersect){var Ce=G._boundingInfo,Ee=Ce.boundingBox,Pe=Ce.boundingSphere,Ae=G._modelBoundingInfo;if(!this._bSphereOnly){var je=Ae.boundingBox.vectors,Oe=b[1],Re=b[2];Oe.setAll(Number.MAX_VALUE),Re.setAll(-Number.MAX_VALUE);for(var Ie=0;Ie<8;Ie++){var we=je[Ie].x*Y.x,De=je[Ie].y*Y.y,Fe=je[Ie].z*Y.z,Be=(ie=we*X[0]+De*X[3]+Fe*X[6],ne=we*X[1]+De*X[4]+Fe*X[7],oe=we*X[2]+De*X[5]+Fe*X[8],q.x+v.x*ie+M.x*ne+T.x*oe),Le=q.y+v.y*ie+M.y*ne+T.y*oe,Ve=q.z+v.z*ie+M.z*ne+T.z*oe;Oe.minimizeInPlaceFromFloats(Be,Le,Ve),Re.maximizeInPlaceFromFloats(Be,Le,Ve)}Ee.reConstruct(Oe,Re,u._worldMatrix)}var Ne=Ae.minimum.multiplyToRef(Y,b[1]),ke=Ae.maximum.multiplyToRef(Y,b[2]),Ue=ke.addToRef(Ne,b[3]).scaleInPlace(.5).addInPlace(Q),ze=ke.subtractToRef(Ne,b[4]).scaleInPlace(.5*this._bSphereRadiusFactor),Ge=Ue.subtractToRef(ze,b[1]),We=Ue.addToRef(ze,b[2]);Pe.reConstruct(Ge,We,u._worldMatrix)}D=w+3,B=F+4,V=L+2}}if(r){if(this._computeParticleColor&&u.updateVerticesData(o["VertexBuffer"].ColorKind,c,!1,!1),this._computeParticleTexture&&u.updateVerticesData(o["VertexBuffer"].UVKind,p,!1,!1),u.updateVerticesData(o["VertexBuffer"].PositionKind,l,!1,!1),!u.areNormalsFrozen||u.isFacetDataEnabled){if(this._computeParticleVertex||u.isFacetDataEnabled){var He=u.isFacetDataEnabled?u.getFacetDataParameters():null;s["VertexData"].ComputeNormals(l,m,f,He);for(var Xe=0;Xe<f.length;Xe++)g[Xe]=f[Xe]}u.areNormalsFrozen||u.updateVerticesData(o["VertexBuffer"].NormalKind,f,!1,!1)}if(this._depthSort&&this._depthSortParticles){var qe=this.depthSortedParticles;qe.sort(this._depthSortFunction);for(var Ke=qe.length,Ye=0,Qe=0,Ze=0;Ze<Ke;Ze++){var $e=qe[Ze],Je=$e.indicesLength,et=$e.ind;for(Xe=0;Xe<Je;Xe++)if(m[Ye]=_[et+Xe],Ye++,this._pickable){var tt=Xe%3;if(0==tt){var rt=this.pickedParticles[Qe];rt.idx=$e.idx,rt.faceId=Qe,Qe++}}}u.updateIndices(m)}}return this._computeBoundingBox&&(u._boundingInfo?u._boundingInfo.reConstruct(S,C,u._worldMatrix):u._boundingInfo=new d["BoundingInfo"](S,C,u._worldMatrix)),this._autoUpdateSubMeshes&&this.computeSubMeshes(),this.afterUpdateParticles(e,t,r),this},SolidParticleSystem.prototype.dispose=function(){this.mesh.dispose(),this.vars=null,this._positions=null,this._indices=null,this._normals=null,this._uvs=null,this._colors=null,this._indices32=null,this._positions32=null,this._normals32=null,this._fixedNormal32=null,this._uvs32=null,this._colors32=null,this.pickedParticles=null,this.pickedBySubMesh=null,this._materials=null,this._materialIndexes=null,this._indicesByMaterial=null,this._idxOfId=null},SolidParticleSystem.prototype.pickedParticle=function(e){if(e.hit){var t=e.subMeshId,r=e.faceId,n=this.pickedBySubMesh;if(n[t]&&n[t][r])return n[t][r]}return null},SolidParticleSystem.prototype.getParticleById=function(e){var t=this.particles[e];if(t&&t.id==e)return t;var r=this.particles,n=this._idxOfId[e];if(void 0!==n)return r[n];var i=0,o=this.nbParticles;while(i<o){var s=r[i];if(s.id==e)return s;i++}return null},SolidParticleSystem.prototype.getParticlesByShapeId=function(e){var t=[];return this.getParticlesByShapeIdToRef(e,t),t},SolidParticleSystem.prototype.getParticlesByShapeIdToRef=function(e,t){t.length=0;for(var r=0;r<this.nbParticles;r++){var n=this.particles[r];n.shapeId==e&&t.push(n)}return this},SolidParticleSystem.prototype.computeSubMeshes=function(){if(!this.mesh||!this._multimaterialEnabled)return this;var e=this.depthSortedParticles;if(this.particles.length>0)for(var t=0;t<this.particles.length;t++){var r=this.particles[t];r.materialIndex||(r.materialIndex=0);var n=e[t];n.materialIndex=r.materialIndex,n.ind=r._ind,n.indicesLength=r._model._indicesLength,n.idx=r.idx}this._sortParticlesByMaterial();var i=this._indicesByMaterial,o=this._materialIndexes,s=this.mesh;s.subMeshes=[];for(var a=s.getTotalVertices(),u=0;u<o.length;u++){var c=i[u],l=i[u+1]-c,d=o[u];new f["SubMesh"](d,0,a,c,l,s)}return this},SolidParticleSystem.prototype._sortParticlesByMaterial=function(){var e=[0];this._indicesByMaterial=e;var t=[];this._materialIndexes=t;var r=this.depthSortedParticles;r.sort(this._materialSortFunction);var n=r.length,i=this._indices32,o=this._indices,s=0,a=0,u=0,c=r[0].materialIndex;t.push(c),this._pickable&&(this.pickedBySubMesh=[[]],this.pickedParticles=this.pickedBySubMesh[0]);for(var l=0;l<n;l++){var d=r[l],h=d.indicesLength,f=d.ind;d.materialIndex!==c&&(c=d.materialIndex,e.push(u),t.push(c),this._pickable&&(s++,this.pickedBySubMesh[s]=[],a=0));for(var p=0,m=0;m<h;m++){if(i[u]=o[f+m],this._pickable){var _=m%3;if(0==_){var g=this.pickedBySubMesh[s][a];g?(g.idx=d.idx,g.faceId=p):this.pickedBySubMesh[s][a]={idx:d.idx,faceId:p},a++,p++}}u++}}return e.push(i.length),this._updatable&&this.mesh.updateIndices(i),this},SolidParticleSystem.prototype._setMaterialIndexesById=function(){this._materialIndexesById={};for(var e=0;e<this._materials.length;e++){var t=this._materials[e].uniqueId;this._materialIndexesById[t]=e}},SolidParticleSystem.prototype._filterUniqueMaterialId=function(e){var t=e.filter((function(e,t,r){return r.indexOf(e)===t}));return t},SolidParticleSystem.prototype._setDefaultMaterial=function(){return this._defaultMaterial||(this._defaultMaterial=new p["StandardMaterial"](this.name+"DefaultMaterial",this._scene)),this._defaultMaterial},SolidParticleSystem.prototype.refreshVisibleSize=function(){return this._isVisibilityBoxLocked||this.mesh.refreshBoundingInfo(),this},SolidParticleSystem.prototype.setVisibilityBox=function(e){var t=e/2;this.mesh._boundingInfo=new d["BoundingInfo"](new n["Vector3"](-t,-t,-t),new n["Vector3"](t,t,t))},Object.defineProperty(SolidParticleSystem.prototype,"isAlwaysVisible",{get:function(){return this._alwaysVisible},set:function(e){this._alwaysVisible=e,this.mesh.alwaysSelectAsActiveMesh=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"isVisibilityBoxLocked",{get:function(){return this._isVisibilityBoxLocked},set:function(e){this._isVisibilityBoxLocked=e;var t=this.mesh.getBoundingInfo();t.isLocked=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"computeParticleRotation",{get:function(){return this._computeParticleRotation},set:function(e){this._computeParticleRotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"computeParticleColor",{get:function(){return this._computeParticleColor},set:function(e){this._computeParticleColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"computeParticleTexture",{get:function(){return this._computeParticleTexture},set:function(e){this._computeParticleTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"computeParticleVertex",{get:function(){return this._computeParticleVertex},set:function(e){this._computeParticleVertex=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"computeBoundingBox",{get:function(){return this._computeBoundingBox},set:function(e){this._computeBoundingBox=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"depthSortParticles",{get:function(){return this._depthSortParticles},set:function(e){this._depthSortParticles=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"expandable",{get:function(){return this._expandable},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"multimaterialEnabled",{get:function(){return this._multimaterialEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"useModelMaterial",{get:function(){return this._useModelMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"materials",{get:function(){return this._materials},enumerable:!1,configurable:!0}),SolidParticleSystem.prototype.setMultiMaterial=function(e){this._materials=this._filterUniqueMaterialId(e),this._setMaterialIndexesById(),this._multimaterial&&this._multimaterial.dispose(),this._multimaterial=new m["MultiMaterial"](this.name+"MultiMaterial",this._scene);for(var t=0;t<this._materials.length;t++)this._multimaterial.subMaterials.push(this._materials[t]);this.computeSubMeshes(),this.mesh.material=this._multimaterial},Object.defineProperty(SolidParticleSystem.prototype,"multimaterial",{get:function(){return this._multimaterial},set:function(e){this._multimaterial=e},enumerable:!1,configurable:!0}),Object.defineProperty(SolidParticleSystem.prototype,"autoUpdateSubMeshes",{get:function(){return this._autoUpdateSubMeshes},set:function(e){this._autoUpdateSubMeshes=e},enumerable:!1,configurable:!0}),SolidParticleSystem.prototype.initParticles=function(){},SolidParticleSystem.prototype.recycleParticle=function(e){return e},SolidParticleSystem.prototype.updateParticle=function(e){return e},SolidParticleSystem.prototype.updateParticleVertex=function(e,t,r){return this},SolidParticleSystem.prototype.beforeUpdateParticles=function(e,t,r){},SolidParticleSystem.prototype.afterUpdateParticles=function(e,t,r){},SolidParticleSystem}()},"./node_modules/@babylonjs/core/PostProcesses/blurPostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BlurPostProcess",(function(){return u}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/PostProcesses/postProcess.js"),o=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),s=(r("./node_modules/@babylonjs/core/Shaders/kernelBlur.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/kernelBlur.vertex.js"),r("./node_modules/@babylonjs/core/Misc/typeStore.js")),a=r("./node_modules/@babylonjs/core/Misc/decorators.js"),u=function(e){function BlurPostProcess(t,r,n,i,s,a,u,c,l,d,h){void 0===a&&(a=o["Texture"].BILINEAR_SAMPLINGMODE),void 0===l&&(l=0),void 0===d&&(d=""),void 0===h&&(h=!1);var f=e.call(this,t,"kernelBlur",["delta","direction","cameraMinMaxZ"],["circleOfConfusionSampler"],i,s,a,u,c,null,l,"kernelBlur",{varyingCount:0,depCount:0},!0)||this;return f.blockCompilation=h,f._packedFloat=!1,f._staticDefines="",f._staticDefines=d,f.direction=r,f.onApplyObservable.add((function(e){f._outputTexture?e.setFloat2("delta",1/f._outputTexture.width*f.direction.x,1/f._outputTexture.height*f.direction.y):e.setFloat2("delta",1/f.width*f.direction.x,1/f.height*f.direction.y)})),f.kernel=n,f}return Object(n["__extends"])(BlurPostProcess,e),Object.defineProperty(BlurPostProcess.prototype,"kernel",{get:function(){return this._idealKernel},set:function(e){this._idealKernel!==e&&(e=Math.max(e,1),this._idealKernel=e,this._kernel=this._nearestBestKernel(e),this.blockCompilation||this._updateParameters())},enumerable:!1,configurable:!0}),Object.defineProperty(BlurPostProcess.prototype,"packedFloat",{get:function(){return this._packedFloat},set:function(e){this._packedFloat!==e&&(this._packedFloat=e,this.blockCompilation||this._updateParameters())},enumerable:!1,configurable:!0}),BlurPostProcess.prototype.getClassName=function(){return"BlurPostProcess"},BlurPostProcess.prototype.updateEffect=function(e,t,r,n,i,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this._updateParameters(i,o)},BlurPostProcess.prototype._updateParameters=function(t,r){for(var n=this._kernel,i=(n-1)/2,o=[],s=[],a=0,u=0;u<n;u++){var c=u/(n-1),l=this._gaussianWeight(2*c-1);o[u]=u-i,s[u]=l,a+=l}for(u=0;u<s.length;u++)s[u]/=a;var d=[],h=[],f=[];for(u=0;u<=i;u+=2){var p=Math.min(u+1,Math.floor(i)),m=u===p;if(m)f.push({o:o[u],w:s[u]});else{var _=p===i,g=s[u]+s[p]*(_?.5:1),b=o[u]+1/(1+s[u]/s[p]);0===b?(f.push({o:o[u],w:s[u]}),f.push({o:o[u+1],w:s[u+1]})):(f.push({o:b,w:g}),f.push({o:-b,w:g}))}}for(u=0;u<f.length;u++)h[u]=f[u].o,d[u]=f[u].w;o=h,s=d;var v=this.getEngine().getCaps().maxVaryingVectors,M=Math.max(v,0)-1,T=Math.min(o.length,M),S="";S+=this._staticDefines,-1!=this._staticDefines.indexOf("DOF")&&(S+="#define CENTER_WEIGHT "+this._glslFloat(s[T-1])+"\r\n",T--);for(u=0;u<T;u++)S+="#define KERNEL_OFFSET"+u+" "+this._glslFloat(o[u])+"\r\n",S+="#define KERNEL_WEIGHT"+u+" "+this._glslFloat(s[u])+"\r\n";var C=0;for(u=M;u<o.length;u++)S+="#define KERNEL_DEP_OFFSET"+C+" "+this._glslFloat(o[u])+"\r\n",S+="#define KERNEL_DEP_WEIGHT"+C+" "+this._glslFloat(s[u])+"\r\n",C++;this.packedFloat&&(S+="#define PACKEDFLOAT 1"),this.blockCompilation=!1,e.prototype.updateEffect.call(this,S,null,null,{varyingCount:T,depCount:C},t,r)},BlurPostProcess.prototype._nearestBestKernel=function(e){for(var t=Math.round(e),r=0,n=[t,t-1,t+1,t-2,t+2];r<n.length;r++){var i=n[r];if(i%2!==0&&Math.floor(i/2)%2===0&&i>0)return Math.max(i,3)}return Math.max(t,3)},BlurPostProcess.prototype._gaussianWeight=function(e){var t=1/3,r=Math.sqrt(2*Math.PI)*t,n=-e*e/(2*t*t),i=1/r*Math.exp(n);return i},BlurPostProcess.prototype._glslFloat=function(e,t){return void 0===t&&(t=8),e.toFixed(t).replace(/0+$/,"")},BlurPostProcess._Parse=function(e,t,r,n){return a["SerializationHelper"].Parse((function(){return new BlurPostProcess(e.name,e.direction,e.kernel,e.options,t,e.renderTargetSamplingMode,r.getEngine(),e.reusable,e.textureType,void 0,!1)}),e,r,n)},Object(n["__decorate"])([Object(a["serialize"])("kernel")],BlurPostProcess.prototype,"_kernel",void 0),Object(n["__decorate"])([Object(a["serialize"])("packedFloat")],BlurPostProcess.prototype,"_packedFloat",void 0),Object(n["__decorate"])([Object(a["serializeAsVector2"])()],BlurPostProcess.prototype,"direction",void 0),BlurPostProcess}(i["PostProcess"]);s["_TypeStore"].RegisteredTypes["BABYLON.BlurPostProcess"]=u},"./node_modules/@babylonjs/core/PostProcesses/passPostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PassPostProcess",(function(){return u})),r.d(t,"PassCubePostProcess",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/PostProcesses/postProcess.js"),o=r("./node_modules/@babylonjs/core/Engines/engine.js"),s=(r("./node_modules/@babylonjs/core/Shaders/pass.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/passCube.fragment.js"),r("./node_modules/@babylonjs/core/Misc/typeStore.js")),a=r("./node_modules/@babylonjs/core/Misc/decorators.js"),u=function(e){function PassPostProcess(t,r,n,i,o,s,a,u){return void 0===n&&(n=null),void 0===a&&(a=0),void 0===u&&(u=!1),e.call(this,t,"pass",null,null,r,n,i,o,s,void 0,a,void 0,null,u)||this}return Object(n["__extends"])(PassPostProcess,e),PassPostProcess.prototype.getClassName=function(){return"PassPostProcess"},PassPostProcess._Parse=function(e,t,r,n){return a["SerializationHelper"].Parse((function(){return new PassPostProcess(e.name,e.options,t,e.renderTargetSamplingMode,r.getEngine(),e.reusable)}),e,r,n)},PassPostProcess}(i["PostProcess"]);s["_TypeStore"].RegisteredTypes["BABYLON.PassPostProcess"]=u;var c=function(e){function PassCubePostProcess(t,r,n,i,o,s,a,u){void 0===n&&(n=null),void 0===a&&(a=0),void 0===u&&(u=!1);var c=e.call(this,t,"passCube",null,null,r,n,i,o,s,"#define POSITIVEX",a,void 0,null,u)||this;return c._face=0,c}return Object(n["__extends"])(PassCubePostProcess,e),Object.defineProperty(PassCubePostProcess.prototype,"face",{get:function(){return this._face},set:function(e){if(!(e<0||e>5))switch(this._face=e,this._face){case 0:this.updateEffect("#define POSITIVEX");break;case 1:this.updateEffect("#define NEGATIVEX");break;case 2:this.updateEffect("#define POSITIVEY");break;case 3:this.updateEffect("#define NEGATIVEY");break;case 4:this.updateEffect("#define POSITIVEZ");break;case 5:this.updateEffect("#define NEGATIVEZ");break}},enumerable:!1,configurable:!0}),PassCubePostProcess.prototype.getClassName=function(){return"PassCubePostProcess"},PassCubePostProcess._Parse=function(e,t,r,n){return a["SerializationHelper"].Parse((function(){return new PassCubePostProcess(e.name,e.options,t,e.renderTargetSamplingMode,r.getEngine(),e.reusable)}),e,r,n)},PassCubePostProcess}(i["PostProcess"]);o["Engine"]._RescalePostProcessFactory=function(e){return new u("rescale",1,null,2,e,!1,0)}},"./node_modules/@babylonjs/core/PostProcesses/postProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PostProcess",(function(){return l}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/smartArray.js"),o=r("./node_modules/@babylonjs/core/Misc/observable.js"),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=(r("./node_modules/@babylonjs/core/Shaders/postprocess.vertex.js"),r("./node_modules/@babylonjs/core/Engines/engine.js")),u=(r("./node_modules/@babylonjs/core/Engines/Extensions/engine.renderTarget.js"),r("./node_modules/@babylonjs/core/Misc/decorators.js")),c=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),l=function(){function PostProcess(e,t,r,n,a,u,c,l,d,h,f,p,m,_,g){void 0===c&&(c=1),void 0===h&&(h=null),void 0===f&&(f=0),void 0===p&&(p="postprocess"),void 0===_&&(_=!1),void 0===g&&(g=5),this.width=-1,this.height=-1,this.nodeMaterialSource=null,this._outputTexture=null,this.autoClear=!0,this.alphaMode=0,this.animations=new Array,this.enablePixelPerfectMode=!1,this.forceFullscreenViewport=!0,this.scaleMode=1,this.alwaysForcePOT=!1,this._samples=1,this.adaptScaleToCurrentViewport=!1,this._reusable=!1,this._textures=new i["SmartArray"](2),this._currentRenderTextureInd=0,this._scaleRatio=new s["Vector2"](1,1),this._texelSize=s["Vector2"].Zero(),this.onActivateObservable=new o["Observable"],this.onSizeChangedObservable=new o["Observable"],this.onApplyObservable=new o["Observable"],this.onBeforeRenderObservable=new o["Observable"],this.onAfterRenderObservable=new o["Observable"],this.name=e,null!=u?(this._camera=u,this._scene=u.getScene(),u.attachPostProcess(this),this._engine=this._scene.getEngine(),this._scene.postProcesses.push(this),this.uniqueId=this._scene.getUniqueId()):l&&(this._engine=l,this._engine.postProcesses.push(this)),this._options=a,this.renderTargetSamplingMode=c||1,this._reusable=d||!1,this._textureType=f,this._textureFormat=g,this._samplers=n||[],this._samplers.push("textureSampler"),this._fragmentUrl=t,this._vertexUrl=p,this._parameters=r||[],this._parameters.push("scale"),this._indexParameters=m,_||this.updateEffect(h)}return Object.defineProperty(PostProcess.prototype,"samples",{get:function(){return this._samples},set:function(e){var t=this;this._samples=Math.min(e,this._engine.getCaps().maxMSAASamples),this._textures.forEach((function(e){e.samples!==t._samples&&t._engine.updateRenderTargetTextureSampleCount(e,t._samples)}))},enumerable:!1,configurable:!0}),PostProcess.prototype.getEffectName=function(){return this._fragmentUrl},Object.defineProperty(PostProcess.prototype,"onActivate",{set:function(e){this._onActivateObserver&&this.onActivateObservable.remove(this._onActivateObserver),e&&(this._onActivateObserver=this.onActivateObservable.add(e))},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"onSizeChanged",{set:function(e){this._onSizeChangedObserver&&this.onSizeChangedObservable.remove(this._onSizeChangedObserver),this._onSizeChangedObserver=this.onSizeChangedObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"onApply",{set:function(e){this._onApplyObserver&&this.onApplyObservable.remove(this._onApplyObserver),this._onApplyObserver=this.onApplyObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"inputTexture",{get:function(){return this._textures.data[this._currentRenderTextureInd]},set:function(e){this._forcedOutputTexture=e},enumerable:!1,configurable:!0}),PostProcess.prototype.restoreDefaultInputTexture=function(){this._forcedOutputTexture=null},PostProcess.prototype.getCamera=function(){return this._camera},Object.defineProperty(PostProcess.prototype,"texelSize",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.texelSize:(this._forcedOutputTexture&&this._texelSize.copyFromFloats(1/this._forcedOutputTexture.width,1/this._forcedOutputTexture.height),this._texelSize)},enumerable:!1,configurable:!0}),PostProcess.prototype.getClassName=function(){return"PostProcess"},PostProcess.prototype.getEngine=function(){return this._engine},PostProcess.prototype.getEffect=function(){return this._effect},PostProcess.prototype.shareOutputWith=function(e){return this._disposeTextures(),this._shareOutputWithPostProcess=e,this},PostProcess.prototype.useOwnOutput=function(){0==this._textures.length&&(this._textures=new i["SmartArray"](2)),this._shareOutputWithPostProcess=null},PostProcess.prototype.updateEffect=function(e,t,r,n,i,o,s,a){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this._effect=this._engine.createEffect({vertex:null!==s&&void 0!==s?s:this._vertexUrl,fragment:null!==a&&void 0!==a?a:this._fragmentUrl},["position"],t||this._parameters,r||this._samplers,null!==e?e:"",void 0,i,o,n||this._indexParameters)},PostProcess.prototype.isReusable=function(){return this._reusable},PostProcess.prototype.markTextureDirty=function(){this.width=-1},PostProcess.prototype.activate=function(e,t,r){var n=this;void 0===t&&(t=null),e=e||this._camera;var i=e.getScene(),o=i.getEngine(),s=o.getCaps().maxTextureSize,u=(t?t.width:this._engine.getRenderWidth(!0))*this._options|0,c=(t?t.height:this._engine.getRenderHeight(!0))*this._options|0,l=e.parent;!l||l.leftCamera!=e&&l.rightCamera!=e||(u/=2);var d,h=this._options.width||u,f=this._options.height||c,p=7!==this.renderTargetSamplingMode&&1!==this.renderTargetSamplingMode&&2!==this.renderTargetSamplingMode;if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this.adaptScaleToCurrentViewport){var m=o.currentViewport;m&&(h*=m.width,f*=m.height)}if((p||this.alwaysForcePOT)&&(this._options.width||(h=o.needPOTTextures?a["Engine"].GetExponentOfTwo(h,s,this.scaleMode):h),this._options.height||(f=o.needPOTTextures?a["Engine"].GetExponentOfTwo(f,s,this.scaleMode):f)),this.width!==h||this.height!==f){if(this._textures.length>0){for(var _=0;_<this._textures.length;_++)this._engine._releaseTexture(this._textures.data[_]);this._textures.reset()}this.width=h,this.height=f;var g={width:this.width,height:this.height},b={generateMipMaps:p,generateDepthBuffer:r||0===e._postProcesses.indexOf(this),generateStencilBuffer:(r||0===e._postProcesses.indexOf(this))&&this._engine.isStencilEnable,samplingMode:this.renderTargetSamplingMode,type:this._textureType,format:this._textureFormat};this._textures.push(this._engine.createRenderTargetTexture(g,b)),this._reusable&&this._textures.push(this._engine.createRenderTargetTexture(g,b)),this._texelSize.copyFromFloats(1/this.width,1/this.height),this.onSizeChangedObservable.notifyObservers(this)}this._textures.forEach((function(e){e.samples!==n.samples&&n._engine.updateRenderTargetTextureSampleCount(e,n.samples)}))}return this._shareOutputWithPostProcess?d=this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?(d=this._forcedOutputTexture,this.width=this._forcedOutputTexture.width,this.height=this._forcedOutputTexture.height):d=this.inputTexture,this.enablePixelPerfectMode?(this._scaleRatio.copyFromFloats(u/h,c/f),this._engine.bindFramebuffer(d,0,u,c,this.forceFullscreenViewport)):(this._scaleRatio.copyFromFloats(1,1),this._engine.bindFramebuffer(d,0,void 0,void 0,this.forceFullscreenViewport)),this.onActivateObservable.notifyObservers(e),this.autoClear&&0===this.alphaMode&&this._engine.clear(this.clearColor?this.clearColor:i.clearColor,i._allowPostProcessClearColor,!0,!0),this._reusable&&(this._currentRenderTextureInd=(this._currentRenderTextureInd+1)%2),d},Object.defineProperty(PostProcess.prototype,"isSupported",{get:function(){return this._effect.isSupported},enumerable:!1,configurable:!0}),Object.defineProperty(PostProcess.prototype,"aspectRatio",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.aspectRatio:this._forcedOutputTexture?this._forcedOutputTexture.width/this._forcedOutputTexture.height:this.width/this.height},enumerable:!1,configurable:!0}),PostProcess.prototype.isReady=function(){return this._effect&&this._effect.isReady()},PostProcess.prototype.apply=function(){return this._effect&&this._effect.isReady()?(this._engine.enableEffect(this._effect),this._engine.setState(!1),this._engine.setDepthBuffer(!1),this._engine.setDepthWrite(!1),this._engine.setAlphaMode(this.alphaMode),this.alphaConstants&&this.getEngine().setAlphaConstants(this.alphaConstants.r,this.alphaConstants.g,this.alphaConstants.b,this.alphaConstants.a),e=this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?this._forcedOutputTexture:this.inputTexture,this._effect._bindTexture("textureSampler",e),this._effect.setVector2("scale",this._scaleRatio),this.onApplyObservable.notifyObservers(this._effect),this._effect):null;var e},PostProcess.prototype._disposeTextures=function(){if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this._textures.length>0)for(var e=0;e<this._textures.length;e++)this._engine._releaseTexture(this._textures.data[e]);this._textures.dispose()}},PostProcess.prototype.setPrePassRenderer=function(e){return!!this._prePassEffectConfiguration&&(this._prePassEffectConfiguration=e.addEffectConfiguration(this._prePassEffectConfiguration),this._prePassEffectConfiguration.enabled=!0,!0)},PostProcess.prototype.dispose=function(e){var t;if(e=e||this._camera,this._disposeTextures(),this._scene&&(t=this._scene.postProcesses.indexOf(this),-1!==t&&this._scene.postProcesses.splice(t,1)),t=this._engine.postProcesses.indexOf(this),-1!==t&&this._engine.postProcesses.splice(t,1),e){if(e.detachPostProcess(this),t=e._postProcesses.indexOf(this),0===t&&e._postProcesses.length>0){var r=this._camera._getFirstPostProcess();r&&r.markTextureDirty()}this.onActivateObservable.clear(),this.onAfterRenderObservable.clear(),this.onApplyObservable.clear(),this.onBeforeRenderObservable.clear(),this.onSizeChangedObservable.clear()}},PostProcess.prototype.serialize=function(){var e=u["SerializationHelper"].Serialize(this);return e.customType="BABYLON."+this.getClassName(),e.cameraId=this.getCamera().id,e.reusable=this._reusable,e.options=this._options,e.textureType=this._textureType,e},PostProcess.Parse=function(e,t,r){var n=c["_TypeStore"].GetClass(e.customType);if(!n||!n._Parse)return null;var i=t.getCameraByID(e.cameraId);return i?n._Parse(e,i,t,r):null},Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"uniqueId",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"name",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"width",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"height",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"renderTargetSamplingMode",void 0),Object(n["__decorate"])([Object(u["serializeAsColor4"])()],PostProcess.prototype,"clearColor",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"autoClear",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"alphaMode",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"alphaConstants",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"enablePixelPerfectMode",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"forceFullscreenViewport",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"scaleMode",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"alwaysForcePOT",void 0),Object(n["__decorate"])([Object(u["serialize"])("samples")],PostProcess.prototype,"_samples",void 0),Object(n["__decorate"])([Object(u["serialize"])()],PostProcess.prototype,"adaptScaleToCurrentViewport",void 0),PostProcess}();c["_TypeStore"].RegisteredTypes["BABYLON.PostProcess"]=l},"./node_modules/@babylonjs/core/PostProcesses/postProcessManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PostProcessManager",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Materials/material.js"),i=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),o=function(){function PostProcessManager(e){this._vertexBuffers={},this._scene=e}return PostProcessManager.prototype._prepareBuffers=function(){if(!this._vertexBuffers[i["VertexBuffer"].PositionKind]){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1),this._vertexBuffers[i["VertexBuffer"].PositionKind]=new i["VertexBuffer"](this._scene.getEngine(),e,i["VertexBuffer"].PositionKind,!1,!1,2),this._buildIndexBuffer()}},PostProcessManager.prototype._buildIndexBuffer=function(){var e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=this._scene.getEngine().createIndexBuffer(e)},PostProcessManager.prototype._rebuild=function(){var e=this._vertexBuffers[i["VertexBuffer"].PositionKind];e&&(e._rebuild(),this._buildIndexBuffer())},PostProcessManager.prototype._prepareFrame=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var r=this._scene.activeCamera;return!!r&&(t=t||r._postProcesses.filter((function(e){return null!=e})),!(!t||0===t.length||!this._scene.postProcessesEnabled)&&(t[0].activate(r,e,null!==t&&void 0!==t),!0))},PostProcessManager.prototype.directRender=function(e,t,r,i,o,s){void 0===t&&(t=null),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=!1);for(var a=this._scene.getEngine(),u=0;u<e.length;u++){u<e.length-1?e[u+1].activate(this._scene.activeCamera,t):t?a.bindFramebuffer(t,i,void 0,void 0,r,o):s||a.restoreDefaultFramebuffer();var c=e[u],l=c.apply();l&&(c.onBeforeRenderObservable.notifyObservers(l),this._prepareBuffers(),a.bindBuffers(this._vertexBuffers,this._indexBuffer,l),a.drawElementsType(n["Material"].TriangleFillMode,0,6),c.onAfterRenderObservable.notifyObservers(l))}a.setDepthBuffer(!0),a.setDepthWrite(!0)},PostProcessManager.prototype._finalizeFrame=function(e,t,r,i,o){void 0===o&&(o=!1);var s=this._scene.activeCamera;if(s&&(i=i||s._postProcesses.filter((function(e){return null!=e})),0!==i.length&&this._scene.postProcessesEnabled)){for(var a=this._scene.getEngine(),u=0,c=i.length;u<c;u++){var l=i[u];if(u<c-1?l._outputTexture=i[u+1].activate(s,t):t?(a.bindFramebuffer(t,r,void 0,void 0,o),l._outputTexture=t):(a.restoreDefaultFramebuffer(),l._outputTexture=null),e)break;var d=l.apply();d&&(l.onBeforeRenderObservable.notifyObservers(d),this._prepareBuffers(),a.bindBuffers(this._vertexBuffers,this._indexBuffer,d),a.drawElementsType(n["Material"].TriangleFillMode,0,6),l.onAfterRenderObservable.notifyObservers(d))}a.setDepthBuffer(!0),a.setDepthWrite(!0),a.setAlphaMode(0)}},PostProcessManager.prototype.dispose=function(){var e=this._vertexBuffers[i["VertexBuffer"].PositionKind];e&&(e.dispose(),this._vertexBuffers[i["VertexBuffer"].PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null)},PostProcessManager}()},"./node_modules/@babylonjs/core/Rendering/edgesRenderer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EdgesRenderer",(function(){return p})),r.d(t,"LineEdgesRenderer",(function(){return m}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),o=r("./node_modules/@babylonjs/core/Meshes/abstractMesh.js"),s=r("./node_modules/@babylonjs/core/Meshes/linesMesh.js"),a=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),u=r("./node_modules/@babylonjs/core/Materials/material.js"),c=r("./node_modules/@babylonjs/core/Materials/shaderMaterial.js"),l=r("./node_modules/@babylonjs/core/Cameras/camera.js"),d=(r("./node_modules/@babylonjs/core/Shaders/line.fragment.js"),r("./node_modules/@babylonjs/core/Shaders/line.vertex.js"),r("./node_modules/@babylonjs/core/Misc/smartArray.js")),h=r("./node_modules/@babylonjs/core/Misc/tools.js");o["AbstractMesh"].prototype.disableEdgesRendering=function(){return this._edgesRenderer&&(this._edgesRenderer.dispose(),this._edgesRenderer=null),this},o["AbstractMesh"].prototype.enableEdgesRendering=function(e,t,r){return void 0===e&&(e=.95),void 0===t&&(t=!1),this.disableEdgesRendering(),this._edgesRenderer=new p(this,e,t,!0,r),this},Object.defineProperty(o["AbstractMesh"].prototype,"edgesRenderer",{get:function(){return this._edgesRenderer},enumerable:!0,configurable:!0}),s["LinesMesh"].prototype.enableEdgesRendering=function(e,t){return void 0===e&&(e=.95),void 0===t&&(t=!1),this.disableEdgesRendering(),this._edgesRenderer=new m(this,e,t),this},s["InstancedLinesMesh"].prototype.enableEdgesRendering=function(e,t){return void 0===e&&(e=.95),void 0===t&&(t=!1),s["LinesMesh"].prototype.enableEdgesRendering.apply(this,arguments),this};var f=function(){function FaceAdjacencies(){this.edges=new Array,this.edgesConnectedCount=0}return FaceAdjacencies}(),p=function(){function EdgesRenderer(e,t,r,n,i){var o,s=this;void 0===t&&(t=.95),void 0===r&&(r=!1),void 0===n&&(n=!0),this.edgesWidthScalerForOrthographic=1e3,this.edgesWidthScalerForPerspective=50,this._linesPositions=new Array,this._linesNormals=new Array,this._linesIndices=new Array,this._buffers={},this._buffersForInstances={},this._checkVerticesInsteadOfIndices=!1,this.isEnabled=!0,this.customInstances=new d["SmartArray"](32),this._source=e,this._checkVerticesInsteadOfIndices=r,this._options=null!==i&&void 0!==i?i:null,this._epsilon=t,this._prepareRessources(),n&&(null===(o=null===i||void 0===i?void 0:i.useAlternateEdgeFinder)||void 0===o||o?this._generateEdgesLinesAlternate():this._generateEdgesLines()),this._meshRebuildObserver=this._source.onRebuildObservable.add((function(){s._rebuild()})),this._meshDisposeObserver=this._source.onDisposeObservable.add((function(){s.dispose()}))}return Object.defineProperty(EdgesRenderer.prototype,"linesPositions",{get:function(){return this._linesPositions},enumerable:!1,configurable:!0}),Object.defineProperty(EdgesRenderer.prototype,"linesNormals",{get:function(){return this._linesNormals},enumerable:!1,configurable:!0}),Object.defineProperty(EdgesRenderer.prototype,"linesIndices",{get:function(){return this._linesIndices},enumerable:!1,configurable:!0}),EdgesRenderer.GetShader=function(e){if(!e._edgeRenderLineShader){var t=new c["ShaderMaterial"]("lineShader",e,"line",{attributes:["position","normal"],uniforms:["world","viewProjection","color","width","aspectRatio"]});t.disableDepthWrite=!0,t.backFaceCulling=!1,e._edgeRenderLineShader=t}return e._edgeRenderLineShader},EdgesRenderer.prototype._prepareRessources=function(){this._lineShader||(this._lineShader=EdgesRenderer.GetShader(this._source.getScene()))},EdgesRenderer.prototype._rebuild=function(){var e=this._buffers[i["VertexBuffer"].PositionKind];e&&e._rebuild(),e=this._buffers[i["VertexBuffer"].NormalKind],e&&e._rebuild();var t=this._source.getScene(),r=t.getEngine();this._ib=r.createIndexBuffer(this._linesIndices)},EdgesRenderer.prototype.dispose=function(){this._source.onRebuildObservable.remove(this._meshRebuildObserver),this._source.onDisposeObservable.remove(this._meshDisposeObserver);var e=this._buffers[i["VertexBuffer"].PositionKind];e&&(e.dispose(),this._buffers[i["VertexBuffer"].PositionKind]=null),e=this._buffers[i["VertexBuffer"].NormalKind],e&&(e.dispose(),this._buffers[i["VertexBuffer"].NormalKind]=null),this._ib&&this._source.getScene().getEngine()._releaseBuffer(this._ib),this._lineShader.dispose()},EdgesRenderer.prototype._processEdgeForAdjacencies=function(e,t,r,n,i){return e===r&&t===n||e===n&&t===r?0:e===n&&t===i||e===i&&t===n?1:e===i&&t===r||e===r&&t===i?2:-1},EdgesRenderer.prototype._processEdgeForAdjacenciesWithVertices=function(e,t,r,n,i){var o=1e-10;return e.equalsWithEpsilon(r,o)&&t.equalsWithEpsilon(n,o)||e.equalsWithEpsilon(n,o)&&t.equalsWithEpsilon(r,o)?0:e.equalsWithEpsilon(n,o)&&t.equalsWithEpsilon(i,o)||e.equalsWithEpsilon(i,o)&&t.equalsWithEpsilon(n,o)?1:e.equalsWithEpsilon(i,o)&&t.equalsWithEpsilon(r,o)||e.equalsWithEpsilon(r,o)&&t.equalsWithEpsilon(i,o)?2:-1},EdgesRenderer.prototype._checkEdge=function(e,t,r,n,i){var o;if(void 0===t)o=!0;else{var s=a["Vector3"].Dot(r[e],r[t]);o=s<this._epsilon}o&&this.createLine(n,i,this._linesPositions.length/3)},EdgesRenderer.prototype.createLine=function(e,t,r){this._linesPositions.push(e.x,e.y,e.z,e.x,e.y,e.z,t.x,t.y,t.z,t.x,t.y,t.z),this._linesNormals.push(t.x,t.y,t.z,-1,t.x,t.y,t.z,1,e.x,e.y,e.z,-1,e.x,e.y,e.z,1),this._linesIndices.push(r,r+1,r+2,r,r+2,r+3)},EdgesRenderer.prototype._tessellateTriangle=function(e,t,r,n){var makePointList=function(e,t,r){r>=0&&t.push(r);for(var n=0;n<e.length;++n)t.push(e[n][0])},i=0;e[1].length>=e[0].length&&e[1].length>=e[2].length?i=1:e[2].length>=e[0].length&&e[2].length>=e[1].length&&(i=2);for(var o=0;o<3;++o)o===i?e[o].sort((function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0})):e[o].sort((function(e,t){return e[1]>t[1]?-1:e[1]<t[1]?1:0}));var s=[],a=[];makePointList(e[i],s,-1);for(var u=s.length,c=i+2;c>=i+1;--c)makePointList(e[c%3],a,c!==i+2?n[r[t+(c+1)%3]]:-1);var l=a.length,d=0,h=0;r.push(n[r[t+i]],s[0],a[0]),r.push(n[r[t+(i+1)%3]],a[l-1],s[u-1]);var f=u<=l,p=f?u:l,m=f?l:u,_=f?u-1:l-1,g=f?0:1,b=u+l-2,v=f?d:h,M=f?h:d,T=f?s:a,S=f?a:s,C=0;while(b-- >0){g?r.push(T[v],S[M]):r.push(S[M],T[v]),C+=p;var E=void 0;C>=m&&v<_?(E=T[++v],C-=m):E=S[++M],r.push(E)}r[t+0]=r[r.length-3],r[t+1]=r[r.length-2],r[t+2]=r[r.length-1],r.length=r.length-3},EdgesRenderer.prototype._generateEdgesLinesAlternate=function(){var e,t,r,n,o,s,u,c,l,d=this._source.getVerticesData(i["VertexBuffer"].PositionKind),f=this._source.getIndices();if(f&&d){Array.isArray(f)||(f=h["Tools"].SliceToArray(f));var p=null===(t=null===(e=this._options)||void 0===e?void 0:e.useFastVertexMerger)||void 0===t||t,m=p?Math.round(-Math.log(null!==(n=null===(r=this._options)||void 0===r?void 0:r.epsilonVertexMerge)&&void 0!==n?n:1e-6)/Math.log(10)):null!==(s=null===(o=this._options)||void 0===o?void 0:o.epsilonVertexMerge)&&void 0!==s?s:1e-6,_=[],g=[];if(p)for(var b={},v=0;v<d.length;v+=3){var M=d[v+0],T=d[v+1],S=d[v+2],C=M.toFixed(m)+"|"+T.toFixed(m)+"|"+S.toFixed(m);if(void 0!==b[C])_.push(b[C]);else{var E=v/3;b[C]=E,_.push(E),g.push(E)}}else for(v=0;v<d.length;v+=3){M=d[v+0],T=d[v+1],S=d[v+2];for(var P=!1,A=0;A<v&&!P;A+=3){var j=d[A+0],O=d[A+1],R=d[A+2];if(Math.abs(M-j)<m&&Math.abs(T-O)<m&&Math.abs(S-R)<m){_.push(A/3),P=!0;break}}P||(_.push(v/3),g.push(v/3))}if(null===(u=this._options)||void 0===u?void 0:u.applyTessellation){for(var I=null!==(l=null===(c=this._options)||void 0===c?void 0:c.epsilonVertexAligned)&&void 0!==l?l:1e-6,w=[],D=0;D<f.length;D+=3)for(var F=void 0,B=0;B<3;++B){var L=_[f[D+B]],V=_[f[D+(B+1)%3]],N=_[f[D+(B+2)%3]];if(L!==V)for(var k=d[3*L+0],U=d[3*L+1],z=d[3*L+2],G=d[3*V+0],W=d[3*V+1],H=d[3*V+2],X=Math.sqrt((G-k)*(G-k)+(W-U)*(W-U)+(H-z)*(H-z)),q=0;q<g.length-1;q++){var K=g[q];if(K!==L&&K!==V&&K!==N){var Y=d[3*K+0],Q=d[3*K+1],Z=d[3*K+2],$=Math.sqrt((Y-k)*(Y-k)+(Q-U)*(Q-U)+(Z-z)*(Z-z)),J=Math.sqrt((Y-G)*(Y-G)+(Q-W)*(Q-W)+(Z-H)*(Z-H));Math.abs($+J-X)<I&&(F||(F={index:D,edgesPoints:[[],[],[]]},w.push(F)),F.edgesPoints[B].push([K,$]))}}}for(var ee=0;ee<w.length;++ee){var te=w[ee];this._tessellateTriangle(te.edgesPoints,te.index,f,_)}w=null}var re={};for(D=0;D<f.length;D+=3){var ne=void 0;for(B=0;B<3;++B){L=_[f[D+B]],V=_[f[D+(B+1)%3]],N=_[f[D+(B+2)%3]];if(L!==V){if(a["TmpVectors"].Vector3[0].copyFromFloats(d[3*L+0],d[3*L+1],d[3*L+2]),a["TmpVectors"].Vector3[1].copyFromFloats(d[3*V+0],d[3*V+1],d[3*V+2]),a["TmpVectors"].Vector3[2].copyFromFloats(d[3*N+0],d[3*N+1],d[3*N+2]),ne||(a["TmpVectors"].Vector3[1].subtractToRef(a["TmpVectors"].Vector3[0],a["TmpVectors"].Vector3[3]),a["TmpVectors"].Vector3[2].subtractToRef(a["TmpVectors"].Vector3[1],a["TmpVectors"].Vector3[4]),ne=a["Vector3"].Cross(a["TmpVectors"].Vector3[3],a["TmpVectors"].Vector3[4]),ne.normalize()),L>V){var ie=L;L=V,V=ie}C=L+"_"+V;var oe=re[C];if(oe){if(!oe.done){var se=a["Vector3"].Dot(ne,oe.normal);se<this._epsilon&&this.createLine(a["TmpVectors"].Vector3[0],a["TmpVectors"].Vector3[1],this._linesPositions.length/3),oe.done=!0}}else re[C]={normal:ne,done:!1,index:D,i:B}}}}for(var C in re){oe=re[C];if(!oe.done){L=_[f[oe.index+oe.i]],V=_[f[oe.index+(oe.i+1)%3]];a["TmpVectors"].Vector3[0].copyFromFloats(d[3*L+0],d[3*L+1],d[3*L+2]),a["TmpVectors"].Vector3[1].copyFromFloats(d[3*V+0],d[3*V+1],d[3*V+2]),this.createLine(a["TmpVectors"].Vector3[0],a["TmpVectors"].Vector3[1],this._linesPositions.length/3)}}var ae=this._source.getScene().getEngine();this._buffers[i["VertexBuffer"].PositionKind]=new i["VertexBuffer"](ae,this._linesPositions,i["VertexBuffer"].PositionKind,!1),this._buffers[i["VertexBuffer"].NormalKind]=new i["VertexBuffer"](ae,this._linesNormals,i["VertexBuffer"].NormalKind,!1,!1,4),this._buffersForInstances[i["VertexBuffer"].PositionKind]=this._buffers[i["VertexBuffer"].PositionKind],this._buffersForInstances[i["VertexBuffer"].NormalKind]=this._buffers[i["VertexBuffer"].NormalKind],this._ib=ae.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},EdgesRenderer.prototype._generateEdgesLines=function(){var e=this._source.getVerticesData(i["VertexBuffer"].PositionKind),t=this._source.getIndices();if(t&&e){var r,n,o=new Array,s=new Array;for(r=0;r<t.length;r+=3){n=new f;var u=t[r],c=t[r+1],l=t[r+2];n.p0=new a["Vector3"](e[3*u],e[3*u+1],e[3*u+2]),n.p1=new a["Vector3"](e[3*c],e[3*c+1],e[3*c+2]),n.p2=new a["Vector3"](e[3*l],e[3*l+1],e[3*l+2]);var d=a["Vector3"].Cross(n.p1.subtract(n.p0),n.p2.subtract(n.p1));d.normalize(),s.push(d),o.push(n)}for(r=0;r<o.length;r++){n=o[r];for(var h=r+1;h<o.length;h++){var p=o[h];if(3===n.edgesConnectedCount)break;if(3!==p.edgesConnectedCount)for(var m=t[3*h],_=t[3*h+1],g=t[3*h+2],b=0;b<3;b++){var v=0;if(void 0===n.edges[b]){switch(b){case 0:v=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(n.p0,n.p1,p.p0,p.p1,p.p2):this._processEdgeForAdjacencies(t[3*r],t[3*r+1],m,_,g);break;case 1:v=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(n.p1,n.p2,p.p0,p.p1,p.p2):this._processEdgeForAdjacencies(t[3*r+1],t[3*r+2],m,_,g);break;case 2:v=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(n.p2,n.p0,p.p0,p.p1,p.p2):this._processEdgeForAdjacencies(t[3*r+2],t[3*r],m,_,g);break}if(-1!==v&&(n.edges[b]=h,p.edges[v]=r,n.edgesConnectedCount++,p.edgesConnectedCount++,3===n.edgesConnectedCount))break}}}}for(r=0;r<o.length;r++){var M=o[r];this._checkEdge(r,M.edges[0],s,M.p0,M.p1),this._checkEdge(r,M.edges[1],s,M.p1,M.p2),this._checkEdge(r,M.edges[2],s,M.p2,M.p0)}var T=this._source.getScene().getEngine();this._buffers[i["VertexBuffer"].PositionKind]=new i["VertexBuffer"](T,this._linesPositions,i["VertexBuffer"].PositionKind,!1),this._buffers[i["VertexBuffer"].NormalKind]=new i["VertexBuffer"](T,this._linesNormals,i["VertexBuffer"].NormalKind,!1,!1,4),this._buffersForInstances[i["VertexBuffer"].PositionKind]=this._buffers[i["VertexBuffer"].PositionKind],this._buffersForInstances[i["VertexBuffer"].NormalKind]=this._buffers[i["VertexBuffer"].NormalKind],this._ib=T.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},EdgesRenderer.prototype.isReady=function(){return this._lineShader.isReady(this._source,this._source.hasInstances&&this.customInstances.length>0||this._source.hasThinInstances)},EdgesRenderer.prototype.render=function(){var e=this._source.getScene();if(this.isReady()&&e.activeCamera){var t=e.getEngine();this._lineShader._preBind(),1!==this._source.edgesColor.a?t.setAlphaMode(2):t.setAlphaMode(0);var r=this._source.hasInstances&&this.customInstances.length>0,n=r||this._source.hasThinInstances,i=0;if(n)if(this._buffersForInstances["world0"]=this._source.getVertexBuffer("world0"),this._buffersForInstances["world1"]=this._source.getVertexBuffer("world1"),this._buffersForInstances["world2"]=this._source.getVertexBuffer("world2"),this._buffersForInstances["world3"]=this._source.getVertexBuffer("world3"),r){var o=this._source._instanceDataStorage;if(i=this.customInstances.length,!o.isFrozen){for(var s=0,a=0;a<i;++a)this.customInstances.data[a].copyToArray(o.instancesData,s),s+=16;o.instancesBuffer.updateDirectly(o.instancesData,0,i)}}else i=this._source.thinInstanceCount;t.bindBuffers(n?this._buffersForInstances:this._buffers,this._ib,this._lineShader.getEffect()),e.resetCachedMaterial(),this._lineShader.setColor4("color",this._source.edgesColor),e.activeCamera.mode===l["Camera"].ORTHOGRAPHIC_CAMERA?this._lineShader.setFloat("width",this._source.edgesWidth/this.edgesWidthScalerForOrthographic):this._lineShader.setFloat("width",this._source.edgesWidth/this.edgesWidthScalerForPerspective),this._lineShader.setFloat("aspectRatio",t.getAspectRatio(e.activeCamera)),this._lineShader.bind(this._source.getWorldMatrix()),t.drawElementsType(u["Material"].TriangleFillMode,0,this._indicesCount,i),this._lineShader.unbind(),n&&t.unbindInstanceAttributes(),this._source.getScene()._activeMeshesFrozen||this.customInstances.reset()}},EdgesRenderer}(),m=function(e){function LineEdgesRenderer(t,r,n){void 0===r&&(r=.95),void 0===n&&(n=!1);var i=e.call(this,t,r,n,!1)||this;return i._generateEdgesLines(),i}return Object(n["__extends"])(LineEdgesRenderer,e),LineEdgesRenderer.prototype._generateEdgesLines=function(){var e=this._source.getVerticesData(i["VertexBuffer"].PositionKind),t=this._source.getIndices();if(t&&e){for(var r=a["TmpVectors"].Vector3[0],n=a["TmpVectors"].Vector3[1],o=t.length-1,s=0,u=0;s<o;s+=2,u+=4)a["Vector3"].FromArrayToRef(e,3*t[s],r),a["Vector3"].FromArrayToRef(e,3*t[s+1],n),this.createLine(r,n,u);var c=this._source.getScene().getEngine();this._buffers[i["VertexBuffer"].PositionKind]=new i["VertexBuffer"](c,this._linesPositions,i["VertexBuffer"].PositionKind,!1),this._buffers[i["VertexBuffer"].NormalKind]=new i["VertexBuffer"](c,this._linesNormals,i["VertexBuffer"].NormalKind,!1,!1,4),this._ib=c.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},LineEdgesRenderer}(p)},"./node_modules/@babylonjs/core/Rendering/renderingGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderingGroup",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Misc/smartArray.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=function(){function RenderingGroup(e,t,r,i,o){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.index=e,this._opaqueSubMeshes=new n["SmartArray"](256),this._transparentSubMeshes=new n["SmartArray"](256),this._alphaTestSubMeshes=new n["SmartArray"](256),this._depthOnlySubMeshes=new n["SmartArray"](256),this._particleSystems=new n["SmartArray"](256),this._spriteManagers=new n["SmartArray"](256),this._edgesRenderers=new n["SmartArrayNoDuplicate"](16),this._scene=t,this.opaqueSortCompareFn=r,this.alphaTestSortCompareFn=i,this.transparentSortCompareFn=o}return Object.defineProperty(RenderingGroup.prototype,"opaqueSortCompareFn",{set:function(e){this._opaqueSortCompareFn=e,this._renderOpaque=e?this.renderOpaqueSorted:RenderingGroup.renderUnsorted},enumerable:!1,configurable:!0}),Object.defineProperty(RenderingGroup.prototype,"alphaTestSortCompareFn",{set:function(e){this._alphaTestSortCompareFn=e,this._renderAlphaTest=e?this.renderAlphaTestSorted:RenderingGroup.renderUnsorted},enumerable:!1,configurable:!0}),Object.defineProperty(RenderingGroup.prototype,"transparentSortCompareFn",{set:function(e){this._transparentSortCompareFn=e||RenderingGroup.defaultTransparentSortCompare,this._renderTransparent=this.renderTransparentSorted},enumerable:!1,configurable:!0}),RenderingGroup.prototype.render=function(e,t,r,n){if(e)e(this._opaqueSubMeshes,this._alphaTestSubMeshes,this._transparentSubMeshes,this._depthOnlySubMeshes);else{var i=this._scene.getEngine();0!==this._depthOnlySubMeshes.length&&(i.setColorWrite(!1),this._renderAlphaTest(this._depthOnlySubMeshes),i.setColorWrite(!0)),0!==this._opaqueSubMeshes.length&&this._renderOpaque(this._opaqueSubMeshes),0!==this._alphaTestSubMeshes.length&&this._renderAlphaTest(this._alphaTestSubMeshes);var o=i.getStencilBuffer();if(i.setStencilBuffer(!1),t&&this._renderSprites(),r&&this._renderParticles(n),this.onBeforeTransparentRendering&&this.onBeforeTransparentRendering(),0!==this._transparentSubMeshes.length&&(i.setStencilBuffer(o),this._renderTransparent(this._transparentSubMeshes),i.setAlphaMode(0)),i.setStencilBuffer(!1),this._edgesRenderers.length){for(var s=0;s<this._edgesRenderers.length;s++)this._edgesRenderers.data[s].render();i.setAlphaMode(0)}i.setStencilBuffer(o)}},RenderingGroup.prototype.renderOpaqueSorted=function(e){return RenderingGroup.renderSorted(e,this._opaqueSortCompareFn,this._scene.activeCamera,!1)},RenderingGroup.prototype.renderAlphaTestSorted=function(e){return RenderingGroup.renderSorted(e,this._alphaTestSortCompareFn,this._scene.activeCamera,!1)},RenderingGroup.prototype.renderTransparentSorted=function(e){return RenderingGroup.renderSorted(e,this._transparentSortCompareFn,this._scene.activeCamera,!0)},RenderingGroup.renderSorted=function(e,t,r,n){for(var o,s=0,a=r?r.globalPosition:RenderingGroup._zeroVector;s<e.length;s++)o=e.data[s],o._alphaIndex=o.getMesh().alphaIndex,o._distanceToCamera=i["Vector3"].Distance(o.getBoundingInfo().boundingSphere.centerWorld,a);var u=e.data.slice(0,e.length);for(t&&u.sort(t),s=0;s<u.length;s++){if(o=u[s],n){var c=o.getMaterial();if(c&&c.needDepthPrePass){var l=c.getScene().getEngine();l.setColorWrite(!1),l.setAlphaMode(0),o.render(!1),l.setColorWrite(!0)}}o.render(n)}},RenderingGroup.renderUnsorted=function(e){for(var t=0;t<e.length;t++){var r=e.data[t];r.render(!1)}},RenderingGroup.defaultTransparentSortCompare=function(e,t){return e._alphaIndex>t._alphaIndex?1:e._alphaIndex<t._alphaIndex?-1:RenderingGroup.backToFrontSortCompare(e,t)},RenderingGroup.backToFrontSortCompare=function(e,t){return e._distanceToCamera<t._distanceToCamera?1:e._distanceToCamera>t._distanceToCamera?-1:0},RenderingGroup.frontToBackSortCompare=function(e,t){return e._distanceToCamera<t._distanceToCamera?-1:e._distanceToCamera>t._distanceToCamera?1:0},RenderingGroup.prototype.prepare=function(){this._opaqueSubMeshes.reset(),this._transparentSubMeshes.reset(),this._alphaTestSubMeshes.reset(),this._depthOnlySubMeshes.reset(),this._particleSystems.reset(),this._spriteManagers.reset(),this._edgesRenderers.reset()},RenderingGroup.prototype.dispose=function(){this._opaqueSubMeshes.dispose(),this._transparentSubMeshes.dispose(),this._alphaTestSubMeshes.dispose(),this._depthOnlySubMeshes.dispose(),this._particleSystems.dispose(),this._spriteManagers.dispose(),this._edgesRenderers.dispose()},RenderingGroup.prototype.dispatch=function(e,t,r){void 0===t&&(t=e.getMesh()),void 0===r&&(r=e.getMaterial()),null!==r&&void 0!==r&&(r.needAlphaBlendingForMesh(t)?this._transparentSubMeshes.push(e):r.needAlphaTesting()?(r.needDepthPrePass&&this._depthOnlySubMeshes.push(e),this._alphaTestSubMeshes.push(e)):(r.needDepthPrePass&&this._depthOnlySubMeshes.push(e),this._opaqueSubMeshes.push(e)),t._renderingGroup=this,t._edgesRenderer&&t._edgesRenderer.isEnabled&&this._edgesRenderers.pushNoDuplicate(t._edgesRenderer))},RenderingGroup.prototype.dispatchSprites=function(e){this._spriteManagers.push(e)},RenderingGroup.prototype.dispatchParticles=function(e){this._particleSystems.push(e)},RenderingGroup.prototype._renderParticles=function(e){if(0!==this._particleSystems.length){var t=this._scene.activeCamera;this._scene.onBeforeParticlesRenderingObservable.notifyObservers(this._scene);for(var r=0;r<this._particleSystems.length;r++){var n=this._particleSystems.data[r];if(0!==(t&&t.layerMask&n.layerMask)){var i=n.emitter;i.position&&e&&-1===e.indexOf(i)||this._scene._activeParticles.addCount(n.render(),!1)}}this._scene.onAfterParticlesRenderingObservable.notifyObservers(this._scene)}},RenderingGroup.prototype._renderSprites=function(){if(this._scene.spritesEnabled&&0!==this._spriteManagers.length){var e=this._scene.activeCamera;this._scene.onBeforeSpritesRenderingObservable.notifyObservers(this._scene);for(var t=0;t<this._spriteManagers.length;t++){var r=this._spriteManagers.data[t];0!==(e&&e.layerMask&r.layerMask)&&r.render()}this._scene.onAfterSpritesRenderingObservable.notifyObservers(this._scene)}},RenderingGroup._zeroVector=i["Vector3"].Zero(),RenderingGroup}()},"./node_modules/@babylonjs/core/Rendering/renderingManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderingGroupInfo",(function(){return i})),r.d(t,"RenderingManager",(function(){return o}));var n=r("./node_modules/@babylonjs/core/Rendering/renderingGroup.js"),i=function(){function RenderingGroupInfo(){}return RenderingGroupInfo}(),o=function(){function RenderingManager(e){this._useSceneAutoClearSetup=!1,this._renderingGroups=new Array,this._autoClearDepthStencil={},this._customOpaqueSortCompareFn={},this._customAlphaTestSortCompareFn={},this._customTransparentSortCompareFn={},this._renderingGroupInfo=new i,this._scene=e;for(var t=RenderingManager.MIN_RENDERINGGROUPS;t<RenderingManager.MAX_RENDERINGGROUPS;t++)this._autoClearDepthStencil[t]={autoClear:!0,depth:!0,stencil:!0}}return RenderingManager.prototype._clearDepthStencilBuffer=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this._depthStencilBufferAlreadyCleaned||(this._scene.getEngine().clear(null,!1,e,t),this._depthStencilBufferAlreadyCleaned=!0)},RenderingManager.prototype.render=function(e,t,r,n){var i=this._renderingGroupInfo;if(i.scene=this._scene,i.camera=this._scene.activeCamera,this._scene.spriteManagers&&n)for(var o=0;o<this._scene.spriteManagers.length;o++){var s=this._scene.spriteManagers[o];this.dispatchSprites(s)}for(o=RenderingManager.MIN_RENDERINGGROUPS;o<RenderingManager.MAX_RENDERINGGROUPS;o++){this._depthStencilBufferAlreadyCleaned=o===RenderingManager.MIN_RENDERINGGROUPS;var a=this._renderingGroups[o];if(a){var u=Math.pow(2,o);if(i.renderingGroupId=o,this._scene.onBeforeRenderingGroupObservable.notifyObservers(i,u),RenderingManager.AUTOCLEAR){var c=this._useSceneAutoClearSetup?this._scene.getAutoClearDepthStencilSetup(o):this._autoClearDepthStencil[o];c&&c.autoClear&&this._clearDepthStencilBuffer(c.depth,c.stencil)}for(var l=0,d=this._scene._beforeRenderingGroupDrawStage;l<d.length;l++){var h=d[l];h.action(o)}a.render(e,n,r,t);for(var f=0,p=this._scene._afterRenderingGroupDrawStage;f<p.length;f++){h=p[f];h.action(o)}this._scene.onAfterRenderingGroupObservable.notifyObservers(i,u)}}},RenderingManager.prototype.reset=function(){for(var e=RenderingManager.MIN_RENDERINGGROUPS;e<RenderingManager.MAX_RENDERINGGROUPS;e++){var t=this._renderingGroups[e];t&&t.prepare()}},RenderingManager.prototype.dispose=function(){this.freeRenderingGroups(),this._renderingGroups.length=0,this._renderingGroupInfo=null},RenderingManager.prototype.freeRenderingGroups=function(){for(var e=RenderingManager.MIN_RENDERINGGROUPS;e<RenderingManager.MAX_RENDERINGGROUPS;e++){var t=this._renderingGroups[e];t&&t.dispose()}},RenderingManager.prototype._prepareRenderingGroup=function(e){void 0===this._renderingGroups[e]&&(this._renderingGroups[e]=new n["RenderingGroup"](e,this._scene,this._customOpaqueSortCompareFn[e],this._customAlphaTestSortCompareFn[e],this._customTransparentSortCompareFn[e]))},RenderingManager.prototype.dispatchSprites=function(e){var t=e.renderingGroupId||0;this._prepareRenderingGroup(t),this._renderingGroups[t].dispatchSprites(e)},RenderingManager.prototype.dispatchParticles=function(e){var t=e.renderingGroupId||0;this._prepareRenderingGroup(t),this._renderingGroups[t].dispatchParticles(e)},RenderingManager.prototype.dispatch=function(e,t,r){void 0===t&&(t=e.getMesh());var n=t.renderingGroupId||0;this._prepareRenderingGroup(n),this._renderingGroups[n].dispatch(e,t,r)},RenderingManager.prototype.setRenderingOrder=function(e,t,r,n){if(void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),this._customOpaqueSortCompareFn[e]=t,this._customAlphaTestSortCompareFn[e]=r,this._customTransparentSortCompareFn[e]=n,this._renderingGroups[e]){var i=this._renderingGroups[e];i.opaqueSortCompareFn=this._customOpaqueSortCompareFn[e],i.alphaTestSortCompareFn=this._customAlphaTestSortCompareFn[e],i.transparentSortCompareFn=this._customTransparentSortCompareFn[e]}},RenderingManager.prototype.setRenderingAutoClearDepthStencil=function(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0),this._autoClearDepthStencil[e]={autoClear:t,depth:r,stencil:n}},RenderingManager.prototype.getAutoClearDepthStencilSetup=function(e){return this._autoClearDepthStencil[e]},RenderingManager.MAX_RENDERINGGROUPS=4,RenderingManager.MIN_RENDERINGGROUPS=0,RenderingManager.AUTOCLEAR=!0,RenderingManager}()},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bonesDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bonesDeclaration",o="#if NUM_BONE_INFLUENCERS>0\n#ifdef BONETEXTURE\nuniform sampler2D boneSampler;\nuniform float boneTextureWidth;\n#else\nuniform mat4 mBones[BonesPerMesh];\n#ifdef BONES_VELOCITY_ENABLED\nuniform mat4 mPreviousBones[BonesPerMesh];\n#endif\n#endif\nattribute vec4 matricesIndices;\nattribute vec4 matricesWeights;\n#if NUM_BONE_INFLUENCERS>4\nattribute vec4 matricesIndicesExtra;\nattribute vec4 matricesWeightsExtra;\n#endif\n#ifdef BONETEXTURE\n#define inline\nmat4 readMatrixFromRawSampler(sampler2D smp,float index)\n{\nfloat offset=index*4.0;\nfloat dx=1.0/boneTextureWidth;\nvec4 m0=texture2D(smp,vec2(dx*(offset+0.5),0.));\nvec4 m1=texture2D(smp,vec2(dx*(offset+1.5),0.));\nvec4 m2=texture2D(smp,vec2(dx*(offset+2.5),0.));\nvec4 m3=texture2D(smp,vec2(dx*(offset+3.5),0.));\nreturn mat4(m0,m1,m2,m3);\n}\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bonesVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bonesVertex",o="#if NUM_BONE_INFLUENCERS>0\nmat4 influence;\n#ifdef BONETEXTURE\ninfluence=readMatrixFromRawSampler(boneSampler,matricesIndices[0])*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[1])*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[2])*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[3])*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[0])*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[1])*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[2])*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[3])*matricesWeightsExtra[3];\n#endif\n#else\ninfluence=mBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=mBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=mBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=mBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=mBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=mBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=mBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=mBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif\n#endif\nfinalWorld=finalWorld*influence;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bumpFragment",o="vec2 uvOffset=vec2(0.0,0.0);\n#if defined(BUMP) || defined(PARALLAX) || defined(DETAIL)\n#ifdef NORMALXYSCALE\nfloat normalScale=1.0;\n#elif defined(BUMP)\nfloat normalScale=vBumpInfos.y;\n#else\nfloat normalScale=1.0;\n#endif\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBN=vTBN;\n#elif defined(BUMP)\nmat3 TBN=cotangent_frame(normalW*normalScale,vPositionW,vBumpUV);\n#else\nmat3 TBN=cotangent_frame(normalW*normalScale,vPositionW,vDetailUV,vec2(1.,1.));\n#endif\n#elif defined(ANISOTROPIC)\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBN=vTBN;\n#else\nmat3 TBN=cotangent_frame(normalW,vPositionW,vMainUV1,vec2(1.,1.));\n#endif\n#endif\n#ifdef PARALLAX\nmat3 invTBN=transposeMat3(TBN);\n#ifdef PARALLAXOCCLUSION\nuvOffset=parallaxOcclusion(invTBN*-viewDirectionW,invTBN*normalW,vBumpUV,vBumpInfos.z);\n#else\nuvOffset=parallaxOffset(invTBN*viewDirectionW,vBumpInfos.z);\n#endif\n#endif\n#ifdef DETAIL\nvec4 detailColor=texture2D(detailSampler,vDetailUV+uvOffset);\nvec2 detailNormalRG=detailColor.wy*2.0-1.0;\nfloat detailNormalB=sqrt(1.-saturate(dot(detailNormalRG,detailNormalRG)));\nvec3 detailNormal=vec3(detailNormalRG,detailNormalB);\n#endif\n#ifdef BUMP\n#ifdef OBJECTSPACE_NORMALMAP\nnormalW=normalize(texture2D(bumpSampler,vBumpUV).xyz*2.0-1.0);\nnormalW=normalize(mat3(normalMatrix)*normalW);\n#elif !defined(DETAIL)\nnormalW=perturbNormal(TBN,vBumpUV+uvOffset);\n#else\nvec3 bumpNormal=texture2D(bumpSampler,vBumpUV+uvOffset).xyz*2.0-1.0;\n\n#if DETAIL_NORMALBLENDMETHOD == 0\ndetailNormal.xy*=vDetailInfos.z;\nvec3 blendedNormal=normalize(vec3(bumpNormal.xy+detailNormal.xy,bumpNormal.z*detailNormal.z));\n#elif DETAIL_NORMALBLENDMETHOD == 1\ndetailNormal.xy*=vDetailInfos.z;\nbumpNormal+=vec3(0.0,0.0,1.0);\ndetailNormal*=vec3(-1.0,-1.0,1.0);\nvec3 blendedNormal=bumpNormal*dot(bumpNormal,detailNormal)/bumpNormal.z-detailNormal;\n#endif\nnormalW=perturbNormalBase(TBN,blendedNormal,vBumpInfos.y);\n#endif\n#elif defined(DETAIL)\ndetailNormal.xy*=vDetailInfos.z;\nnormalW=perturbNormalBase(TBN,detailNormal,vDetailInfos.z);\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragmentFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpFragmentFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bumpFragmentFunctions",o="#if defined(BUMP)\n#if BUMPDIRECTUV == 1\n#define vBumpUV vMainUV1\n#elif BUMPDIRECTUV == 2\n#define vBumpUV vMainUV2\n#else\nvarying vec2 vBumpUV;\n#endif\nuniform sampler2D bumpSampler;\nvec3 perturbNormal(mat3 cotangentFrame,vec2 uv)\n{\nreturn perturbNormal(cotangentFrame,texture2D(bumpSampler,uv).xyz,vBumpInfos.y);\n}\n#endif\n#if defined(DETAIL)\n#if DETAILDIRECTUV == 1\n#define vDetailUV vMainUV1\n#elif DETAILDIRECTUV == 2\n#define vDetailUV vMainUV2\n#else\nvarying vec2 vDetailUV;\n#endif\nuniform sampler2D detailSampler;\n#endif\n#if defined(BUMP)\nvec3 perturbNormal(mat3 cotangentFrame,vec3 color)\n{\nreturn perturbNormal(cotangentFrame,color,vBumpInfos.y);\n}\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\nreturn cotangent_frame(normal,p,uv,vTangentSpaceParams);\n}\n#endif\n#if defined(BUMP) && defined(PARALLAX)\nconst float minSamples=4.;\nconst float maxSamples=15.;\nconst int iMaxSamples=15;\n\nvec2 parallaxOcclusion(vec3 vViewDirCoT,vec3 vNormalCoT,vec2 texCoord,float parallaxScale) {\nfloat parallaxLimit=length(vViewDirCoT.xy)/vViewDirCoT.z;\nparallaxLimit*=parallaxScale;\nvec2 vOffsetDir=normalize(vViewDirCoT.xy);\nvec2 vMaxOffset=vOffsetDir*parallaxLimit;\nfloat numSamples=maxSamples+(dot(vViewDirCoT,vNormalCoT)*(minSamples-maxSamples));\nfloat stepSize=1.0/numSamples;\n\nfloat currRayHeight=1.0;\nvec2 vCurrOffset=vec2(0,0);\nvec2 vLastOffset=vec2(0,0);\nfloat lastSampledHeight=1.0;\nfloat currSampledHeight=1.0;\nfor (int i=0; i<iMaxSamples; i++)\n{\ncurrSampledHeight=texture2D(bumpSampler,vBumpUV+vCurrOffset).w;\n\nif (currSampledHeight>currRayHeight)\n{\nfloat delta1=currSampledHeight-currRayHeight;\nfloat delta2=(currRayHeight+stepSize)-lastSampledHeight;\nfloat ratio=delta1/(delta1+delta2);\nvCurrOffset=(ratio)* vLastOffset+(1.0-ratio)*vCurrOffset;\n\nbreak;\n}\nelse\n{\ncurrRayHeight-=stepSize;\nvLastOffset=vCurrOffset;\nvCurrOffset+=stepSize*vMaxOffset;\nlastSampledHeight=currSampledHeight;\n}\n}\nreturn vCurrOffset;\n}\nvec2 parallaxOffset(vec3 viewDir,float heightScale)\n{\n\nfloat height=texture2D(bumpSampler,vBumpUV).w;\nvec2 texCoordOffset=heightScale*viewDir.xy*height;\nreturn -texCoordOffset;\n}\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragmentMainFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpFragmentMainFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bumpFragmentMainFunctions",o="#if defined(BUMP) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC) || defined(DETAIL)\n#if defined(TANGENT) && defined(NORMAL)\nvarying mat3 vTBN;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nuniform mat4 normalMatrix;\n#endif\nvec3 perturbNormalBase(mat3 cotangentFrame,vec3 normal,float scale)\n{\n#ifdef NORMALXYSCALE\nnormal=normalize(normal*vec3(scale,scale,1.0));\n#endif\nreturn normalize(cotangentFrame*normal);\n}\nvec3 perturbNormal(mat3 cotangentFrame,vec3 textureSample,float scale)\n{\nreturn perturbNormalBase(cotangentFrame,textureSample*2.0-1.0,scale);\n}\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv,vec2 tangentSpaceParams)\n{\n\nuv=gl_FrontFacing ? uv : -uv;\n\nvec3 dp1=dFdx(p);\nvec3 dp2=dFdy(p);\nvec2 duv1=dFdx(uv);\nvec2 duv2=dFdy(uv);\n\nvec3 dp2perp=cross(dp2,normal);\nvec3 dp1perp=cross(normal,dp1);\nvec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;\nvec3 bitangent=dp2perp*duv1.y+dp1perp*duv2.y;\n\ntangent*=tangentSpaceParams.x;\nbitangent*=tangentSpaceParams.y;\n\nfloat invmax=inversesqrt(max(dot(tangent,tangent),dot(bitangent,bitangent)));\nreturn mat3(tangent*invmax,bitangent*invmax,normal);\n}\n#endif\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bumpVertex",o="#if defined(BUMP) || defined(PARALLAX) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#if defined(TANGENT) && defined(NORMAL)\nvec3 tbnNormal=normalize(normalUpdated);\nvec3 tbnTangent=normalize(tangentUpdated.xyz);\nvec3 tbnBitangent=cross(tbnNormal,tbnTangent)*tangentUpdated.w;\nvTBN=mat3(finalWorld)*mat3(tbnTangent,tbnBitangent,tbnNormal);\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="bumpVertexDeclaration",o="#if defined(BUMP) || defined(PARALLAX) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#if defined(TANGENT) && defined(NORMAL)\nvarying mat3 vTBN;\n#endif\n#endif\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"clipPlaneFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="clipPlaneFragment",o="#ifdef CLIPPLANE\nif (fClipDistance>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE2\nif (fClipDistance2>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE3\nif (fClipDistance3>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE4\nif (fClipDistance4>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE5\nif (fClipDistance5>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE6\nif (fClipDistance6>0.0)\n{\ndiscard;\n}\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragmentDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"clipPlaneFragmentDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="clipPlaneFragmentDeclaration",o="#ifdef CLIPPLANE\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nvarying float fClipDistance4;\n#endif\n#ifdef CLIPPLANE5\nvarying float fClipDistance5;\n#endif\n#ifdef CLIPPLANE6\nvarying float fClipDistance6;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"clipPlaneVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="clipPlaneVertex",o="#ifdef CLIPPLANE\nfClipDistance=dot(worldPos,vClipPlane);\n#endif\n#ifdef CLIPPLANE2\nfClipDistance2=dot(worldPos,vClipPlane2);\n#endif\n#ifdef CLIPPLANE3\nfClipDistance3=dot(worldPos,vClipPlane3);\n#endif\n#ifdef CLIPPLANE4\nfClipDistance4=dot(worldPos,vClipPlane4);\n#endif\n#ifdef CLIPPLANE5\nfClipDistance5=dot(worldPos,vClipPlane5);\n#endif\n#ifdef CLIPPLANE6\nfClipDistance6=dot(worldPos,vClipPlane6);\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"clipPlaneVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="clipPlaneVertexDeclaration",o="#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nuniform vec4 vClipPlane2;\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nuniform vec4 vClipPlane3;\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nuniform vec4 vClipPlane4;\nvarying float fClipDistance4;\n#endif\n#ifdef CLIPPLANE5\nuniform vec4 vClipPlane5;\nvarying float fClipDistance5;\n#endif\n#ifdef CLIPPLANE6\nuniform vec4 vClipPlane6;\nvarying float fClipDistance6;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultFragmentDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultFragmentDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="defaultFragmentDeclaration",o="uniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nuniform vec3 vEmissiveColor;\nuniform float visibility;\n\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\n#ifndef REFRACTIONMAP_3D\nuniform mat4 refractionMatrix;\n#endif\n#ifdef REFRACTIONFRESNEL\nuniform vec4 refractionLeftColor;\nuniform vec4 refractionRightColor;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\n#endif\n#ifdef DIFFUSEFRESNEL\nuniform vec4 diffuseLeftColor;\nuniform vec4 diffuseRightColor;\n#endif\n#ifdef OPACITYFRESNEL\nuniform vec4 opacityParts;\n#endif\n#ifdef EMISSIVEFRESNEL\nuniform vec4 emissiveLeftColor;\nuniform vec4 emissiveRightColor;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\n#if defined(REFLECTIONMAP_PLANAR) || defined(REFLECTIONMAP_CUBIC) || defined(REFLECTIONMAP_PROJECTION) || defined(REFLECTIONMAP_EQUIRECTANGULAR) || defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_SKYBOX)\nuniform mat4 reflectionMatrix;\n#endif\n#ifndef REFLECTIONMAP_SKYBOX\n#if defined(USE_LOCAL_REFLECTIONMAP_CUBIC) && defined(REFLECTIONMAP_CUBIC)\nuniform vec3 vReflectionPosition;\nuniform vec3 vReflectionSize;\n#endif\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 reflectionLeftColor;\nuniform vec4 reflectionRightColor;\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultUboDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultUboDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="defaultUboDeclaration",o="layout(std140,column_major) uniform;\nuniform Material\n{\nvec4 diffuseLeftColor;\nvec4 diffuseRightColor;\nvec4 opacityParts;\nvec4 reflectionLeftColor;\nvec4 reflectionRightColor;\nvec4 refractionLeftColor;\nvec4 refractionRightColor;\nvec4 emissiveLeftColor;\nvec4 emissiveRightColor;\nvec2 vDiffuseInfos;\nvec2 vAmbientInfos;\nvec2 vOpacityInfos;\nvec2 vReflectionInfos;\nvec3 vReflectionPosition;\nvec3 vReflectionSize;\nvec2 vEmissiveInfos;\nvec2 vLightmapInfos;\nvec2 vSpecularInfos;\nvec3 vBumpInfos;\nmat4 diffuseMatrix;\nmat4 ambientMatrix;\nmat4 opacityMatrix;\nmat4 reflectionMatrix;\nmat4 emissiveMatrix;\nmat4 lightmapMatrix;\nmat4 specularMatrix;\nmat4 bumpMatrix;\nvec2 vTangentSpaceParams;\nfloat pointSize;\nmat4 refractionMatrix;\nvec4 vRefractionInfos;\nvec4 vSpecularColor;\nvec3 vEmissiveColor;\nfloat visibility;\nvec4 vDiffuseColor;\nvec4 vDetailInfos;\nmat4 detailMatrix;\n};\nuniform Scene {\nmat4 viewProjection;\n#ifdef MULTIVIEW\nmat4 viewProjectionR;\n#endif\nmat4 view;\n};\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="defaultVertexDeclaration",o="\nuniform mat4 viewProjection;\nuniform mat4 view;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\nuniform mat4 specularMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef REFLECTION\nuniform mat4 reflectionMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/depthPrePass.js":function(e,t,r){"use strict";r.r(t),r.d(t,"depthPrePass",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="depthPrePass",o="#ifdef DEPTHPREPASS\ngl_FragColor=vec4(0.,0.,0.,1.0);\nreturn;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fogFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="fogFragment",o="#ifdef FOG\nfloat fog=CalcFogFactor();\ncolor.rgb=fog*color.rgb+(1.0-fog)*vFogColor;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragmentDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fogFragmentDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="fogFragmentDeclaration",o="#ifdef FOG\n#define FOGMODE_NONE 0.\n#define FOGMODE_EXP 1.\n#define FOGMODE_EXP2 2.\n#define FOGMODE_LINEAR 3.\n#define E 2.71828\nuniform vec4 vFogInfos;\nuniform vec3 vFogColor;\nvarying vec3 vFogDistance;\nfloat CalcFogFactor()\n{\nfloat fogCoeff=1.0;\nfloat fogStart=vFogInfos.y;\nfloat fogEnd=vFogInfos.z;\nfloat fogDensity=vFogInfos.w;\nfloat fogDistance=length(vFogDistance);\nif (FOGMODE_LINEAR == vFogInfos.x)\n{\nfogCoeff=(fogEnd-fogDistance)/(fogEnd-fogStart);\n}\nelse if (FOGMODE_EXP == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDensity);\n}\nelse if (FOGMODE_EXP2 == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDistance*fogDensity*fogDensity);\n}\nreturn clamp(fogCoeff,0.0,1.0);\n}\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fogVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="fogVertex",o="#ifdef FOG\nvFogDistance=(view*worldPos).xyz;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fogVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="fogVertexDeclaration",o="#ifdef FOG\nvarying vec3 vFogDistance;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/fresnelFunction.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fresnelFunction",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="fresnelFunction",o="#ifdef FRESNEL\nfloat computeFresnelTerm(vec3 viewDirection,vec3 worldNormal,float bias,float power)\n{\nfloat fresnelTerm=pow(bias+abs(dot(viewDirection,worldNormal)),power);\nreturn clamp(fresnelTerm,0.,1.);\n}\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/helperFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"helperFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="helperFunctions",o="const float PI=3.1415926535897932384626433832795;\nconst float HALF_MIN=5.96046448e-08;\nconst float LinearEncodePowerApprox=2.2;\nconst float GammaEncodePowerApprox=1.0/LinearEncodePowerApprox;\nconst vec3 LuminanceEncodeApprox=vec3(0.2126,0.7152,0.0722);\nconst float Epsilon=0.0000001;\n#define saturate(x) clamp(x,0.0,1.0)\n#define absEps(x) abs(x)+Epsilon\n#define maxEps(x) max(x,Epsilon)\n#define saturateEps(x) clamp(x,Epsilon,1.0)\nmat3 transposeMat3(mat3 inMatrix) {\nvec3 i0=inMatrix[0];\nvec3 i1=inMatrix[1];\nvec3 i2=inMatrix[2];\nmat3 outMatrix=mat3(\nvec3(i0.x,i1.x,i2.x),\nvec3(i0.y,i1.y,i2.y),\nvec3(i0.z,i1.z,i2.z)\n);\nreturn outMatrix;\n}\n\nmat3 inverseMat3(mat3 inMatrix) {\nfloat a00=inMatrix[0][0],a01=inMatrix[0][1],a02=inMatrix[0][2];\nfloat a10=inMatrix[1][0],a11=inMatrix[1][1],a12=inMatrix[1][2];\nfloat a20=inMatrix[2][0],a21=inMatrix[2][1],a22=inMatrix[2][2];\nfloat b01=a22*a11-a12*a21;\nfloat b11=-a22*a10+a12*a20;\nfloat b21=a21*a10-a11*a20;\nfloat det=a00*b01+a01*b11+a02*b21;\nreturn mat3(b01,(-a22*a01+a02*a21),(a12*a01-a02*a11),\nb11,(a22*a00-a02*a20),(-a12*a00+a02*a10),\nb21,(-a21*a00+a01*a20),(a11*a00-a01*a10))/det;\n}\nfloat toLinearSpace(float color)\n{\nreturn pow(color,LinearEncodePowerApprox);\n}\nvec3 toLinearSpace(vec3 color)\n{\nreturn pow(color,vec3(LinearEncodePowerApprox));\n}\nvec4 toLinearSpace(vec4 color)\n{\nreturn vec4(pow(color.rgb,vec3(LinearEncodePowerApprox)),color.a);\n}\nvec3 toGammaSpace(vec3 color)\n{\nreturn pow(color,vec3(GammaEncodePowerApprox));\n}\nvec4 toGammaSpace(vec4 color)\n{\nreturn vec4(pow(color.rgb,vec3(GammaEncodePowerApprox)),color.a);\n}\nfloat toGammaSpace(float color)\n{\nreturn pow(color,GammaEncodePowerApprox);\n}\nfloat square(float value)\n{\nreturn value*value;\n}\nfloat pow5(float value) {\nfloat sq=value*value;\nreturn sq*sq*value;\n}\nfloat getLuminance(vec3 color)\n{\nreturn clamp(dot(color,LuminanceEncodeApprox),0.,1.);\n}\n\nfloat getRand(vec2 seed) {\nreturn fract(sin(dot(seed.xy ,vec2(12.9898,78.233)))*43758.5453);\n}\nfloat dither(vec2 seed,float varianceAmount) {\nfloat rand=getRand(seed);\nfloat dither=mix(-varianceAmount/255.0,varianceAmount/255.0,rand);\nreturn dither;\n}\n\nconst float rgbdMaxRange=255.0;\nvec4 toRGBD(vec3 color) {\nfloat maxRGB=maxEps(max(color.r,max(color.g,color.b)));\nfloat D=max(rgbdMaxRange/maxRGB,1.);\nD=clamp(floor(D)/255.0,0.,1.);\n\nvec3 rgb=color.rgb*D;\n\nrgb=toGammaSpace(rgb);\nreturn vec4(rgb,D);\n}\nvec3 fromRGBD(vec4 rgbd) {\n\nrgbd.rgb=toLinearSpace(rgbd.rgb);\n\nreturn rgbd.rgb/rgbd.a;\n}\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingCompatibility.js":function(e,t,r){"use strict";r.r(t),r.d(t,"imageProcessingCompatibility",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="imageProcessingCompatibility",o="#ifdef IMAGEPROCESSINGPOSTPROCESS\ngl_FragColor.rgb=pow(gl_FragColor.rgb,vec3(2.2));\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"imageProcessingDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="imageProcessingDeclaration",o="#ifdef EXPOSURE\nuniform float exposureLinear;\n#endif\n#ifdef CONTRAST\nuniform float contrast;\n#endif\n#ifdef VIGNETTE\nuniform vec2 vInverseScreenSize;\nuniform vec4 vignetteSettings1;\nuniform vec4 vignetteSettings2;\n#endif\n#ifdef COLORCURVES\nuniform vec4 vCameraColorCurveNegative;\nuniform vec4 vCameraColorCurveNeutral;\nuniform vec4 vCameraColorCurvePositive;\n#endif\n#ifdef COLORGRADING\n#ifdef COLORGRADING3D\nuniform highp sampler3D txColorTransform;\n#else\nuniform sampler2D txColorTransform;\n#endif\nuniform vec4 colorTransformSettings;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"imageProcessingFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="imageProcessingFunctions",o="#if defined(COLORGRADING) && !defined(COLORGRADING3D)\n\n#define inline\nvec3 sampleTexture3D(sampler2D colorTransform,vec3 color,vec2 sampler3dSetting)\n{\nfloat sliceSize=2.0*sampler3dSetting.x;\n#ifdef SAMPLER3DGREENDEPTH\nfloat sliceContinuous=(color.g-sampler3dSetting.x)*sampler3dSetting.y;\n#else\nfloat sliceContinuous=(color.b-sampler3dSetting.x)*sampler3dSetting.y;\n#endif\nfloat sliceInteger=floor(sliceContinuous);\n\n\nfloat sliceFraction=sliceContinuous-sliceInteger;\n#ifdef SAMPLER3DGREENDEPTH\nvec2 sliceUV=color.rb;\n#else\nvec2 sliceUV=color.rg;\n#endif\nsliceUV.x*=sliceSize;\nsliceUV.x+=sliceInteger*sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice0Color=texture2D(colorTransform,sliceUV);\nsliceUV.x+=sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice1Color=texture2D(colorTransform,sliceUV);\nvec3 result=mix(slice0Color.rgb,slice1Color.rgb,sliceFraction);\n#ifdef SAMPLER3DBGRMAP\ncolor.rgb=result.rgb;\n#else\ncolor.rgb=result.bgr;\n#endif\nreturn color;\n}\n#endif\n#ifdef TONEMAPPING_ACES\n\n\n\n\n\nconst mat3 ACESInputMat=mat3(\nvec3(0.59719,0.07600,0.02840),\nvec3(0.35458,0.90834,0.13383),\nvec3(0.04823,0.01566,0.83777)\n);\n\nconst mat3 ACESOutputMat=mat3(\nvec3( 1.60475,-0.10208,-0.00327),\nvec3(-0.53108,1.10813,-0.07276),\nvec3(-0.07367,-0.00605,1.07602)\n);\nvec3 RRTAndODTFit(vec3 v)\n{\nvec3 a=v*(v+0.0245786)-0.000090537;\nvec3 b=v*(0.983729*v+0.4329510)+0.238081;\nreturn a/b;\n}\nvec3 ACESFitted(vec3 color)\n{\ncolor=ACESInputMat*color;\n\ncolor=RRTAndODTFit(color);\ncolor=ACESOutputMat*color;\n\ncolor=saturate(color);\nreturn color;\n}\n#endif\nvec4 applyImageProcessing(vec4 result) {\n#ifdef EXPOSURE\nresult.rgb*=exposureLinear;\n#endif\n#ifdef VIGNETTE\n\nvec2 viewportXY=gl_FragCoord.xy*vInverseScreenSize;\nviewportXY=viewportXY*2.0-1.0;\nvec3 vignetteXY1=vec3(viewportXY*vignetteSettings1.xy+vignetteSettings1.zw,1.0);\nfloat vignetteTerm=dot(vignetteXY1,vignetteXY1);\nfloat vignette=pow(vignetteTerm,vignetteSettings2.w);\n\nvec3 vignetteColor=vignetteSettings2.rgb;\n#ifdef VIGNETTEBLENDMODEMULTIPLY\nvec3 vignetteColorMultiplier=mix(vignetteColor,vec3(1,1,1),vignette);\nresult.rgb*=vignetteColorMultiplier;\n#endif\n#ifdef VIGNETTEBLENDMODEOPAQUE\nresult.rgb=mix(vignetteColor,result.rgb,vignette);\n#endif\n#endif\n#ifdef TONEMAPPING\n#ifdef TONEMAPPING_ACES\nresult.rgb=ACESFitted(result.rgb);\n#else\nconst float tonemappingCalibration=1.590579;\nresult.rgb=1.0-exp2(-tonemappingCalibration*result.rgb);\n#endif\n#endif\n\nresult.rgb=toGammaSpace(result.rgb);\nresult.rgb=saturate(result.rgb);\n#ifdef CONTRAST\n\nvec3 resultHighContrast=result.rgb*result.rgb*(3.0-2.0*result.rgb);\nif (contrast<1.0) {\n\nresult.rgb=mix(vec3(0.5,0.5,0.5),result.rgb,contrast);\n} else {\n\nresult.rgb=mix(result.rgb,resultHighContrast,contrast-1.0);\n}\n#endif\n\n#ifdef COLORGRADING\nvec3 colorTransformInput=result.rgb*colorTransformSettings.xxx+colorTransformSettings.yyy;\n#ifdef COLORGRADING3D\nvec3 colorTransformOutput=texture(txColorTransform,colorTransformInput).rgb;\n#else\nvec3 colorTransformOutput=sampleTexture3D(txColorTransform,colorTransformInput,colorTransformSettings.yz).rgb;\n#endif\nresult.rgb=mix(result.rgb,colorTransformOutput,colorTransformSettings.www);\n#endif\n#ifdef COLORCURVES\n\nfloat luma=getLuminance(result.rgb);\nvec2 curveMix=clamp(vec2(luma*3.0-1.5,luma*-3.0+1.5),vec2(0.0),vec2(1.0));\nvec4 colorCurve=vCameraColorCurveNeutral+curveMix.x*vCameraColorCurvePositive-curveMix.y*vCameraColorCurveNegative;\nresult.rgb*=colorCurve.rgb;\nresult.rgb=mix(vec3(luma),result.rgb,colorCurve.a);\n#endif\nreturn result;\n}";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"instancesDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="instancesDeclaration",o="#ifdef INSTANCES\nattribute vec4 world0;\nattribute vec4 world1;\nattribute vec4 world2;\nattribute vec4 world3;\n#ifdef THIN_INSTANCES\nuniform mat4 world;\n#endif\n#else\nuniform mat4 world;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"instancesVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="instancesVertex",o="#ifdef INSTANCES\nmat4 finalWorld=mat4(world0,world1,world2,world3);\n#ifdef THIN_INSTANCES\nfinalWorld=world*finalWorld;\n#endif\n#else\nmat4 finalWorld=world;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="kernelBlurFragment",o="#ifdef DOF\nfactor=sampleCoC(sampleCoord{X});\ncomputedWeight=KERNEL_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCoord{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCoord{X})*computedWeight;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurFragment2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurFragment2",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="kernelBlurFragment2",o="#ifdef DOF\nfactor=sampleCoC(sampleCenter+delta*KERNEL_DEP_OFFSET{X});\ncomputedWeight=KERNEL_DEP_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_DEP_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X})*computedWeight;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurVaryingDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurVaryingDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="kernelBlurVaryingDeclaration",o="varying vec2 sampleCoord{X};";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="kernelBlurVertex",o="sampleCoord{X}=sampleCenter+delta*KERNEL_OFFSET{X};";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lightFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="lightFragment",o="#ifdef LIGHT{X}\n#if defined(SHADOWONLY) || defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X})\n\n#else\n#ifdef PBR\n\n#ifdef SPOTLIGHT{X}\npreInfo=computePointAndSpotPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(POINTLIGHT{X})\npreInfo=computePointAndSpotPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(HEMILIGHT{X})\npreInfo=computeHemisphericPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(DIRLIGHT{X})\npreInfo=computeDirectionalPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#endif\npreInfo.NdotV=NdotV;\n\n#ifdef SPOTLIGHT{X}\n#ifdef LIGHT_FALLOFF_GLTF{X}\npreInfo.attenuation=computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared,light{X}.vLightFalloff.y);\npreInfo.attenuation*=computeDirectionalLightFalloff_GLTF(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightFalloff.z,light{X}.vLightFalloff.w);\n#elif defined(LIGHT_FALLOFF_PHYSICAL{X})\npreInfo.attenuation=computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\npreInfo.attenuation*=computeDirectionalLightFalloff_Physical(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w);\n#elif defined(LIGHT_FALLOFF_STANDARD{X})\npreInfo.attenuation=computeDistanceLightFalloff_Standard(preInfo.lightOffset,light{X}.vLightFalloff.x);\npreInfo.attenuation*=computeDirectionalLightFalloff_Standard(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w,light{X}.vLightData.w);\n#else\npreInfo.attenuation=computeDistanceLightFalloff(preInfo.lightOffset,preInfo.lightDistanceSquared,light{X}.vLightFalloff.x,light{X}.vLightFalloff.y);\npreInfo.attenuation*=computeDirectionalLightFalloff(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w,light{X}.vLightData.w,light{X}.vLightFalloff.z,light{X}.vLightFalloff.w);\n#endif\n#elif defined(POINTLIGHT{X})\n#ifdef LIGHT_FALLOFF_GLTF{X}\npreInfo.attenuation=computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared,light{X}.vLightFalloff.y);\n#elif defined(LIGHT_FALLOFF_PHYSICAL{X})\npreInfo.attenuation=computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n#elif defined(LIGHT_FALLOFF_STANDARD{X})\npreInfo.attenuation=computeDistanceLightFalloff_Standard(preInfo.lightOffset,light{X}.vLightFalloff.x);\n#else\npreInfo.attenuation=computeDistanceLightFalloff(preInfo.lightOffset,preInfo.lightDistanceSquared,light{X}.vLightFalloff.x,light{X}.vLightFalloff.y);\n#endif\n#else\npreInfo.attenuation=1.0;\n#endif\n\n\n#ifdef HEMILIGHT{X}\npreInfo.roughness=roughness;\n#else\npreInfo.roughness=adjustRoughnessFromLightProperties(roughness,light{X}.vLightSpecular.a,preInfo.lightDistance);\n#endif\n\n#ifdef HEMILIGHT{X}\ninfo.diffuse=computeHemisphericDiffuseLighting(preInfo,light{X}.vLightDiffuse.rgb,light{X}.vLightGround);\n#elif defined(SS_TRANSLUCENCY)\ninfo.diffuse=computeDiffuseAndTransmittedLighting(preInfo,light{X}.vLightDiffuse.rgb,subSurfaceOut.transmittance);\n#else\ninfo.diffuse=computeDiffuseLighting(preInfo,light{X}.vLightDiffuse.rgb);\n#endif\n\n#ifdef SPECULARTERM\n#ifdef ANISOTROPIC\ninfo.specular=computeAnisotropicSpecularLighting(preInfo,viewDirectionW,normalW,anisotropicOut.anisotropicTangent,anisotropicOut.anisotropicBitangent,anisotropicOut.anisotropy,clearcoatOut.specularEnvironmentR0,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#else\ninfo.specular=computeSpecularLighting(preInfo,normalW,clearcoatOut.specularEnvironmentR0,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#endif\n#endif\n\n#ifdef SHEEN\n#ifdef SHEEN_LINKWITHALBEDO\n\npreInfo.roughness=sheenOut.sheenIntensity;\n#else\n#ifdef HEMILIGHT{X}\npreInfo.roughness=sheenOut.sheenRoughness;\n#else\npreInfo.roughness=adjustRoughnessFromLightProperties(sheenOut.sheenRoughness,light{X}.vLightSpecular.a,preInfo.lightDistance);\n#endif\n#endif\ninfo.sheen=computeSheenLighting(preInfo,normalW,sheenOut.sheenColor,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#endif\n\n#ifdef CLEARCOAT\n\n#ifdef HEMILIGHT{X}\npreInfo.roughness=clearcoatOut.clearCoatRoughness;\n#else\npreInfo.roughness=adjustRoughnessFromLightProperties(clearcoatOut.clearCoatRoughness,light{X}.vLightSpecular.a,preInfo.lightDistance);\n#endif\ninfo.clearCoat=computeClearCoatLighting(preInfo,clearcoatOut.clearCoatNormalW,clearcoatOut.clearCoatAARoughnessFactors.x,clearcoatOut.clearCoatIntensity,light{X}.vLightDiffuse.rgb);\n#ifdef CLEARCOAT_TINT\n\nabsorption=computeClearCoatLightingAbsorption(clearcoatOut.clearCoatNdotVRefract,preInfo.L,clearcoatOut.clearCoatNormalW,clearcoatOut.clearCoatColor,clearcoatOut.clearCoatThickness,clearcoatOut.clearCoatIntensity);\ninfo.diffuse*=absorption;\n#ifdef SPECULARTERM\ninfo.specular*=absorption;\n#endif\n#endif\n\ninfo.diffuse*=info.clearCoat.w;\n#ifdef SPECULARTERM\ninfo.specular*=info.clearCoat.w;\n#endif\n#ifdef SHEEN\ninfo.sheen*=info.clearCoat.w;\n#endif\n#endif\n#else\n#ifdef SPOTLIGHT{X}\ninfo=computeSpotLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDirection,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular.rgb,light{X}.vLightDiffuse.a,glossiness);\n#elif defined(HEMILIGHT{X})\ninfo=computeHemisphericLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular.rgb,light{X}.vLightGround,glossiness);\n#elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\ninfo=computeLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular.rgb,light{X}.vLightDiffuse.a,glossiness);\n#endif\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\ninfo.diffuse*=computeProjectionTextureDiffuseLighting(projectionLightSampler{X},textureProjectionMatrix{X});\n#endif\n#endif\n#ifdef SHADOW{X}\n#ifdef SHADOWCSM{X}\nfor (int i=0; i<SHADOWCSMNUM_CASCADES{X}; i++)\n{\n#ifdef SHADOWCSM_RIGHTHANDED{X}\ndiff{X}=viewFrustumZ{X}[i]+vPositionFromCamera{X}.z;\n#else\ndiff{X}=viewFrustumZ{X}[i]-vPositionFromCamera{X}.z;\n#endif\nif (diff{X}>=0.) {\nindex{X}=i;\nbreak;\n}\n}\n#ifdef SHADOWCSMUSESHADOWMAXZ{X}\nif (index{X}>=0)\n#endif\n{\n#if defined(SHADOWPCF{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithCSMPCF1(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithCSMPCF3(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nshadow=computeShadowWithCSMPCF5(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCSS{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithCSMPCSS16(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithCSMPCSS32(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#else\nshadow=computeShadowWithCSMPCSS64(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#endif\n#else\nshadow=computeShadowCSM(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#ifdef SHADOWCSMDEBUG{X}\nshadowDebug{X}=vec3(shadow)*vCascadeColorsMultiplier{X}[index{X}];\n#endif\n#ifndef SHADOWCSMNOBLEND{X}\nfloat frustumLength=frustumLengths{X}[index{X}];\nfloat diffRatio=clamp(diff{X}/frustumLength,0.,1.)*cascadeBlendFactor{X};\nif (index{X}<(SHADOWCSMNUM_CASCADES{X}-1) && diffRatio<1.)\n{\nindex{X}+=1;\nfloat nextShadow=0.;\n#if defined(SHADOWPCF{X})\n#if defined(SHADOWLOWQUALITY{X})\nnextShadow=computeShadowWithCSMPCF1(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nnextShadow=computeShadowWithCSMPCF3(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nnextShadow=computeShadowWithCSMPCF5(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCSS{X})\n#if defined(SHADOWLOWQUALITY{X})\nnextShadow=computeShadowWithCSMPCSS16(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#elif defined(SHADOWMEDIUMQUALITY{X})\nnextShadow=computeShadowWithCSMPCSS32(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#else\nnextShadow=computeShadowWithCSMPCSS64(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w,lightSizeUVCorrection{X}[index{X}],depthCorrection{X}[index{X}],penumbraDarkness{X});\n#endif\n#else\nnextShadow=computeShadowCSM(float(index{X}),vPositionFromLight{X}[index{X}],vDepthMetric{X}[index{X}],shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\nshadow=mix(nextShadow,shadow,diffRatio);\n#ifdef SHADOWCSMDEBUG{X}\nshadowDebug{X}=mix(vec3(nextShadow)*vCascadeColorsMultiplier{X}[index{X}],shadowDebug{X},diffRatio);\n#endif\n}\n#endif\n}\n#elif defined(SHADOWCLOSEESM{X})\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithCloseESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithCloseESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWESM{X})\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPOISSON{X})\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithPoissonSamplingCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadowWithPoissonSampling(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCF{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithPCF1(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithPCF3(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nshadow=computeShadowWithPCF5(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCSS{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithPCSS16(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithPCSS32(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nshadow=computeShadowWithPCSS64(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#else\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadow(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#endif\n#ifdef SHADOWONLY\n#ifndef SHADOWINUSE\n#define SHADOWINUSE\n#endif\nglobalShadow+=shadow;\nshadowLightCount+=1.0;\n#endif\n#else\nshadow=1.;\n#endif\n#ifndef SHADOWONLY\n#ifdef CUSTOMUSERLIGHTING\ndiffuseBase+=computeCustomDiffuseLighting(info,diffuseBase,shadow);\n#ifdef SPECULARTERM\nspecularBase+=computeCustomSpecularLighting(info,specularBase,shadow);\n#endif\n#elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\ndiffuseBase+=lightmapColor.rgb*shadow;\n#ifdef SPECULARTERM\n#ifndef LIGHTMAPNOSPECULAR{X}\nspecularBase+=info.specular*shadow*lightmapColor.rgb;\n#endif\n#endif\n#ifdef CLEARCOAT\n#ifndef LIGHTMAPNOSPECULAR{X}\nclearCoatBase+=info.clearCoat.rgb*shadow*lightmapColor.rgb;\n#endif\n#endif\n#ifdef SHEEN\n#ifndef LIGHTMAPNOSPECULAR{X}\nsheenBase+=info.sheen.rgb*shadow;\n#endif\n#endif\n#else\n#ifdef SHADOWCSMDEBUG{X}\ndiffuseBase+=info.diffuse*shadowDebug{X};\n#else\ndiffuseBase+=info.diffuse*shadow;\n#endif\n#ifdef SPECULARTERM\nspecularBase+=info.specular*shadow;\n#endif\n#ifdef CLEARCOAT\nclearCoatBase+=info.clearCoat.rgb*shadow;\n#endif\n#ifdef SHEEN\nsheenBase+=info.sheen.rgb*shadow;\n#endif\n#endif\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightFragmentDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lightFragmentDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="lightFragmentDeclaration",o="#ifdef LIGHT{X}\nuniform vec4 vLightData{X};\nuniform vec4 vLightDiffuse{X};\n#ifdef SPECULARTERM\nuniform vec4 vLightSpecular{X};\n#else\nvec4 vLightSpecular{X}=vec4(0.);\n#endif\n#ifdef SHADOW{X}\n#ifdef SHADOWCSM{X}\nuniform mat4 lightMatrix{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float viewFrustumZ{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float frustumLengths{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float cascadeBlendFactor{X};\nvarying vec4 vPositionFromLight{X}[SHADOWCSMNUM_CASCADES{X}];\nvarying float vDepthMetric{X}[SHADOWCSMNUM_CASCADES{X}];\nvarying vec4 vPositionFromCamera{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DArrayShadow shadowSampler{X};\nuniform highp sampler2DArray depthSampler{X};\nuniform vec2 lightSizeUVCorrection{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float depthCorrection{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float penumbraDarkness{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DArrayShadow shadowSampler{X};\n#else\nuniform highp sampler2DArray shadowSampler{X};\n#endif\n#ifdef SHADOWCSMDEBUG{X}\nconst vec3 vCascadeColorsMultiplier{X}[8]=vec3[8]\n(\nvec3 ( 1.5,0.0,0.0 ),\nvec3 ( 0.0,1.5,0.0 ),\nvec3 ( 0.0,0.0,5.5 ),\nvec3 ( 1.5,0.0,5.5 ),\nvec3 ( 1.5,1.5,0.0 ),\nvec3 ( 1.0,1.0,1.0 ),\nvec3 ( 0.0,1.0,5.5 ),\nvec3 ( 0.5,3.5,0.75 )\n);\nvec3 shadowDebug{X};\n#endif\n#ifdef SHADOWCSMUSESHADOWMAXZ{X}\nint index{X}=-1;\n#else\nint index{X}=SHADOWCSMNUM_CASCADES{X}-1;\n#endif\nfloat diff{X}=0.;\n#elif defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\nuniform vec4 shadowsInfo{X};\nuniform vec2 depthValues{X};\n#endif\n#ifdef SPOTLIGHT{X}\nuniform vec4 vLightDirection{X};\nuniform vec4 vLightFalloff{X};\n#elif defined(POINTLIGHT{X})\nuniform vec4 vLightFalloff{X};\n#elif defined(HEMILIGHT{X})\nuniform vec3 vLightGround{X};\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightUboDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lightUboDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="lightUboDeclaration",o="#ifdef LIGHT{X}\nuniform Light{X}\n{\nvec4 vLightData;\nvec4 vLightDiffuse;\nvec4 vLightSpecular;\n#ifdef SPOTLIGHT{X}\nvec4 vLightDirection;\nvec4 vLightFalloff;\n#elif defined(POINTLIGHT{X})\nvec4 vLightFalloff;\n#elif defined(HEMILIGHT{X})\nvec3 vLightGround;\n#endif\nvec4 shadowsInfo;\nvec2 depthValues;\n} light{X};\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#ifdef SHADOW{X}\n#ifdef SHADOWCSM{X}\nuniform mat4 lightMatrix{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float viewFrustumZ{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float frustumLengths{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float cascadeBlendFactor{X};\nvarying vec4 vPositionFromLight{X}[SHADOWCSMNUM_CASCADES{X}];\nvarying float vDepthMetric{X}[SHADOWCSMNUM_CASCADES{X}];\nvarying vec4 vPositionFromCamera{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DArrayShadow shadowSampler{X};\nuniform highp sampler2DArray depthSampler{X};\nuniform vec2 lightSizeUVCorrection{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float depthCorrection{X}[SHADOWCSMNUM_CASCADES{X}];\nuniform float penumbraDarkness{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DArrayShadow shadowSampler{X};\n#else\nuniform highp sampler2DArray shadowSampler{X};\n#endif\n#ifdef SHADOWCSMDEBUG{X}\nconst vec3 vCascadeColorsMultiplier{X}[8]=vec3[8]\n(\nvec3 ( 1.5,0.0,0.0 ),\nvec3 ( 0.0,1.5,0.0 ),\nvec3 ( 0.0,0.0,5.5 ),\nvec3 ( 1.5,0.0,5.5 ),\nvec3 ( 1.5,1.5,0.0 ),\nvec3 ( 1.0,1.0,1.0 ),\nvec3 ( 0.0,1.0,5.5 ),\nvec3 ( 0.5,3.5,0.75 )\n);\nvec3 shadowDebug{X};\n#endif\n#ifdef SHADOWCSMUSESHADOWMAXZ{X}\nint index{X}=-1;\n#else\nint index{X}=SHADOWCSMNUM_CASCADES{X}-1;\n#endif\nfloat diff{X}=0.;\n#elif defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightsFragmentFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lightsFragmentFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="lightsFragmentFunctions",o="\nstruct lightingInfo\n{\nvec3 diffuse;\n#ifdef SPECULARTERM\nvec3 specular;\n#endif\n#ifdef NDOTL\nfloat ndl;\n#endif\n};\nlightingInfo computeLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 lightVectorW;\nfloat attenuation=1.0;\nif (lightData.w == 0.)\n{\nvec3 direction=lightData.xyz-vPositionW;\nattenuation=max(0.,1.0-length(direction)/range);\nlightVectorW=normalize(direction);\n}\nelse\n{\nlightVectorW=normalize(-lightData.xyz);\n}\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nlightingInfo computeSpotLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec4 lightDirection,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 direction=lightData.xyz-vPositionW;\nvec3 lightVectorW=normalize(direction);\nfloat attenuation=max(0.,1.0-length(direction)/range);\n\nfloat cosAngle=max(0.,dot(lightDirection.xyz,-lightVectorW));\nif (cosAngle>=lightDirection.w)\n{\ncosAngle=max(0.,pow(cosAngle,lightData.w));\nattenuation*=cosAngle;\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nresult.diffuse=vec3(0.);\n#ifdef SPECULARTERM\nresult.specular=vec3(0.);\n#endif\n#ifdef NDOTL\nresult.ndl=0.;\n#endif\nreturn result;\n}\nlightingInfo computeHemisphericLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,vec3 groundColor,float glossiness) {\nlightingInfo result;\n\nfloat ndl=dot(vNormal,lightData.xyz)*0.5+0.5;\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=mix(groundColor,diffuseColor,ndl);\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightData.xyz);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor;\n#endif\nreturn result;\n}\n#define inline\nvec3 computeProjectionTextureDiffuseLighting(sampler2D projectionLightSampler,mat4 textureProjectionMatrix){\nvec4 strq=textureProjectionMatrix*vec4(vPositionW,1.0);\nstrq/=strq.w;\nvec3 textureColor=texture2D(projectionLightSampler,strq.xy).rgb;\nreturn textureColor;\n}";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"logDepthDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="logDepthDeclaration",o="#ifdef LOGARITHMICDEPTH\nuniform float logarithmicDepthConstant;\nvarying float vFragmentDepth;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthFragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"logDepthFragment",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="logDepthFragment",o="#ifdef LOGARITHMICDEPTH\ngl_FragDepthEXT=log2(vFragmentDepth)*logarithmicDepthConstant*0.5;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"logDepthVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="logDepthVertex",o="#ifdef LOGARITHMICDEPTH\nvFragmentDepth=1.0+gl_Position.w;\ngl_Position.z=log2(max(0.000001,vFragmentDepth))*logarithmicDepthConstant;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"morphTargetsVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="morphTargetsVertex",o="#ifdef MORPHTARGETS\npositionUpdated+=(position{X}-position)*morphTargetInfluences[{X}];\n#ifdef MORPHTARGETS_NORMAL\nnormalUpdated+=(normal{X}-normal)*morphTargetInfluences[{X}];\n#endif\n#ifdef MORPHTARGETS_TANGENT\ntangentUpdated.xyz+=(tangent{X}-tangent.xyz)*morphTargetInfluences[{X}];\n#endif\n#ifdef MORPHTARGETS_UV\nuvUpdated+=(uv_{X}-uv)*morphTargetInfluences[{X}];\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"morphTargetsVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="morphTargetsVertexDeclaration",o="#ifdef MORPHTARGETS\nattribute vec3 position{X};\n#ifdef MORPHTARGETS_NORMAL\nattribute vec3 normal{X};\n#endif\n#ifdef MORPHTARGETS_TANGENT\nattribute vec3 tangent{X};\n#endif\n#ifdef MORPHTARGETS_UV\nattribute vec2 uv_{X};\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexGlobalDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"morphTargetsVertexGlobalDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="morphTargetsVertexGlobalDeclaration",o="#ifdef MORPHTARGETS\nuniform float morphTargetInfluences[NUM_MORPH_INFLUENCERS];\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/packingFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"packingFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="packingFunctions",o="vec4 pack(float depth)\n{\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(depth*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/pointCloudVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"pointCloudVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="pointCloudVertex",o="#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"prePassDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="prePassDeclaration",o="#ifdef PREPASS\n#extension GL_EXT_draw_buffers : require\n#ifdef WEBGL2\nlayout(location=0) out highp vec4 glFragData[{X}];\nhighp vec4 gl_FragColor;\n#endif\n#ifdef PREPASS_DEPTHNORMAL\nvarying highp vec3 vViewPos;\n#endif\n#ifdef PREPASS_VELOCITY\nvarying highp vec4 vCurrentPosition;\nvarying highp vec4 vPreviousPosition;\n#endif\n#endif\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"prePassVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="prePassVertex",o="#ifdef PREPASS_DEPTHNORMAL\nvViewPos=(view*worldPos).rgb;\n#endif\n#if defined(PREPASS_VELOCITY) && defined(BONES_VELOCITY_ENABLED)\nvCurrentPosition=viewProjection*worldPos;\n#if NUM_BONE_INFLUENCERS>0\nmat4 previousInfluence;\npreviousInfluence=mPreviousBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\npreviousInfluence+=mPreviousBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\npreviousInfluence+=mPreviousBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\npreviousInfluence+=mPreviousBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif\nvPreviousPosition=previousViewProjection*previousWorld*previousInfluence*vec4(positionUpdated,1.0);\n#else\nvPreviousPosition=previousViewProjection*previousWorld*vec4(positionUpdated,1.0);\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassVertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"prePassVertexDeclaration",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="prePassVertexDeclaration",o="#ifdef PREPASS\n#ifdef PREPASS_DEPTHNORMAL\nvarying vec3 vViewPos;\n#endif\n#ifdef PREPASS_VELOCITY\nuniform mat4 previousWorld;\nuniform mat4 previousViewProjection;\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/reflectionFunction.js":function(e,t,r){"use strict";r.r(t),r.d(t,"reflectionFunction",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="reflectionFunction",o="vec3 parallaxCorrectNormal( vec3 vertexPos,vec3 origVec,vec3 cubeSize,vec3 cubePos ) {\n\nvec3 invOrigVec=vec3(1.0,1.0,1.0)/origVec;\nvec3 halfSize=cubeSize*0.5;\nvec3 intersecAtMaxPlane=(cubePos+halfSize-vertexPos)*invOrigVec;\nvec3 intersecAtMinPlane=(cubePos-halfSize-vertexPos)*invOrigVec;\n\nvec3 largestIntersec=max(intersecAtMaxPlane,intersecAtMinPlane);\n\nfloat distance=min(min(largestIntersec.x,largestIntersec.y),largestIntersec.z);\n\nvec3 intersectPositionWS=vertexPos+origVec*distance;\n\nreturn intersectPositionWS-cubePos;\n}\nvec3 computeFixedEquirectangularCoords(vec4 worldPos,vec3 worldNormal,vec3 direction)\n{\nfloat lon=atan(direction.z,direction.x);\nfloat lat=acos(direction.y);\nvec2 sphereCoords=vec2(lon,lat)*RECIPROCAL_PI2*2.0;\nfloat s=sphereCoords.x*0.5+0.5;\nfloat t=sphereCoords.y;\nreturn vec3(s,t,0);\n}\nvec3 computeMirroredFixedEquirectangularCoords(vec4 worldPos,vec3 worldNormal,vec3 direction)\n{\nfloat lon=atan(direction.z,direction.x);\nfloat lat=acos(direction.y);\nvec2 sphereCoords=vec2(lon,lat)*RECIPROCAL_PI2*2.0;\nfloat s=sphereCoords.x*0.5+0.5;\nfloat t=sphereCoords.y;\nreturn vec3(1.0-s,t,0);\n}\nvec3 computeEquirectangularCoords(vec4 worldPos,vec3 worldNormal,vec3 eyePosition,mat4 reflectionMatrix)\n{\nvec3 cameraToVertex=normalize(worldPos.xyz-eyePosition);\nvec3 r=normalize(reflect(cameraToVertex,worldNormal));\nr=vec3(reflectionMatrix*vec4(r,0));\nfloat lon=atan(r.z,r.x);\nfloat lat=acos(r.y);\nvec2 sphereCoords=vec2(lon,lat)*RECIPROCAL_PI2*2.0;\nfloat s=sphereCoords.x*0.5+0.5;\nfloat t=sphereCoords.y;\nreturn vec3(s,t,0);\n}\nvec3 computeSphericalCoords(vec4 worldPos,vec3 worldNormal,mat4 view,mat4 reflectionMatrix)\n{\nvec3 viewDir=normalize(vec3(view*worldPos));\nvec3 viewNormal=normalize(vec3(view*vec4(worldNormal,0.0)));\nvec3 r=reflect(viewDir,viewNormal);\nr=vec3(reflectionMatrix*vec4(r,0));\nr.z=r.z-1.0;\nfloat m=2.0*length(r);\nreturn vec3(r.x/m+0.5,1.0-r.y/m-0.5,0);\n}\nvec3 computePlanarCoords(vec4 worldPos,vec3 worldNormal,vec3 eyePosition,mat4 reflectionMatrix)\n{\nvec3 viewDir=worldPos.xyz-eyePosition;\nvec3 coords=normalize(reflect(viewDir,worldNormal));\nreturn vec3(reflectionMatrix*vec4(coords,1));\n}\nvec3 computeCubicCoords(vec4 worldPos,vec3 worldNormal,vec3 eyePosition,mat4 reflectionMatrix)\n{\nvec3 viewDir=normalize(worldPos.xyz-eyePosition);\n\nvec3 coords=reflect(viewDir,worldNormal);\ncoords=vec3(reflectionMatrix*vec4(coords,0));\n#ifdef INVERTCUBICMAP\ncoords.y*=-1.0;\n#endif\nreturn coords;\n}\nvec3 computeCubicLocalCoords(vec4 worldPos,vec3 worldNormal,vec3 eyePosition,mat4 reflectionMatrix,vec3 reflectionSize,vec3 reflectionPosition)\n{\nvec3 viewDir=normalize(worldPos.xyz-eyePosition);\n\nvec3 coords=reflect(viewDir,worldNormal);\ncoords=parallaxCorrectNormal(worldPos.xyz,coords,reflectionSize,reflectionPosition);\ncoords=vec3(reflectionMatrix*vec4(coords,0));\n#ifdef INVERTCUBICMAP\ncoords.y*=-1.0;\n#endif\nreturn coords;\n}\nvec3 computeProjectionCoords(vec4 worldPos,mat4 view,mat4 reflectionMatrix)\n{\nreturn vec3(reflectionMatrix*(view*worldPos));\n}\nvec3 computeSkyBoxCoords(vec3 positionW,mat4 reflectionMatrix)\n{\nreturn vec3(reflectionMatrix*vec4(positionW,1.));\n}\n#ifdef REFLECTION\nvec3 computeReflectionCoords(vec4 worldPos,vec3 worldNormal)\n{\n#ifdef REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED\nvec3 direction=normalize(vDirectionW);\nreturn computeMirroredFixedEquirectangularCoords(worldPos,worldNormal,direction);\n#endif\n#ifdef REFLECTIONMAP_EQUIRECTANGULAR_FIXED\nvec3 direction=normalize(vDirectionW);\nreturn computeFixedEquirectangularCoords(worldPos,worldNormal,direction);\n#endif\n#ifdef REFLECTIONMAP_EQUIRECTANGULAR\nreturn computeEquirectangularCoords(worldPos,worldNormal,vEyePosition.xyz,reflectionMatrix);\n#endif\n#ifdef REFLECTIONMAP_SPHERICAL\nreturn computeSphericalCoords(worldPos,worldNormal,view,reflectionMatrix);\n#endif\n#ifdef REFLECTIONMAP_PLANAR\nreturn computePlanarCoords(worldPos,worldNormal,vEyePosition.xyz,reflectionMatrix);\n#endif\n#ifdef REFLECTIONMAP_CUBIC\n#ifdef USE_LOCAL_REFLECTIONMAP_CUBIC\nreturn computeCubicLocalCoords(worldPos,worldNormal,vEyePosition.xyz,reflectionMatrix,vReflectionSize,vReflectionPosition);\n#else\nreturn computeCubicCoords(worldPos,worldNormal,vEyePosition.xyz,reflectionMatrix);\n#endif\n#endif\n#ifdef REFLECTIONMAP_PROJECTION\nreturn computeProjectionCoords(worldPos,view,reflectionMatrix);\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nreturn computeSkyBoxCoords(vPositionUVW,reflectionMatrix);\n#endif\n#ifdef REFLECTIONMAP_EXPLICIT\nreturn vec3(0,0,0);\n#endif\n}\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/shadowsFragmentFunctions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"shadowsFragmentFunctions",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="shadowsFragmentFunctions",o="#ifdef SHADOWS\n#ifndef SHADOWFLOAT\n\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}\n#endif\nfloat computeFallOff(float value,vec2 clipSpace,float frustumEdgeFalloff)\n{\nfloat mask=smoothstep(1.0-frustumEdgeFalloff,1.00000012,clamp(dot(clipSpace,clipSpace),0.,1.));\nreturn mix(value,1.0,mask);\n}\n#define inline\nfloat computeShadowCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadow=textureCube(shadowSampler,directionToLight).x;\n#endif\nreturn depth>shadow ? darkness : 1.0;\n}\n#define inline\nfloat computeShadowWithPoissonSamplingCube(vec3 lightPosition,samplerCube shadowSampler,float mapSize,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\nfloat visibility=1.;\nvec3 poissonDisk[4];\npoissonDisk[0]=vec3(-1.0,1.0,-1.0);\npoissonDisk[1]=vec3(1.0,-1.0,-1.0);\npoissonDisk[2]=vec3(-1.0,-1.0,-1.0);\npoissonDisk[3]=vec3(1.0,-1.0,1.0);\n\n#ifndef SHADOWFLOAT\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize))<depth) visibility-=0.25;\n#else\nif (textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize).x<depth) visibility-=0.25;\n#endif\nreturn min(1.0,visibility+darkness);\n}\n#define inline\nfloat computeShadowWithESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness);\nreturn esm;\n}\n#define inline\nfloat computeShadowWithCloseESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn esm;\n}\n#ifdef WEBGL2\n#define inline\nfloat computeShadowCSM(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArray shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nvec3 uvLayer=vec3(uv.x,uv.y,layer);\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(texture2D(shadowSampler,uvLayer));\n#else\nfloat shadow=texture2D(shadowSampler,uvLayer).x;\n#endif\nreturn shadowPixelDepth>shadow ? computeFallOff(darkness,clipSpace.xy,frustumEdgeFalloff) : 1.;\n}\n#endif\n#define inline\nfloat computeShadow(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nelse\n{\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadow=texture2D(shadowSampler,uv).x;\n#endif\nreturn shadowPixelDepth>shadow ? computeFallOff(darkness,clipSpace.xy,frustumEdgeFalloff) : 1.;\n}\n}\n#define inline\nfloat computeShadowWithPoissonSampling(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float mapSize,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nelse\n{\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\nfloat visibility=1.;\nvec2 poissonDisk[4];\npoissonDisk[0]=vec2(-0.94201624,-0.39906216);\npoissonDisk[1]=vec2(0.94558609,-0.76890725);\npoissonDisk[2]=vec2(-0.094184101,-0.92938870);\npoissonDisk[3]=vec2(0.34495938,0.29387760);\n\n#ifndef SHADOWFLOAT\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[0]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[1]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[2]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[3]*mapSize))<shadowPixelDepth) visibility-=0.25;\n#else\nif (texture2D(shadowSampler,uv+poissonDisk[0]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[1]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[2]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[3]*mapSize).x<shadowPixelDepth) visibility-=0.25;\n#endif\nreturn computeFallOff(min(1.0,visibility+darkness),clipSpace.xy,frustumEdgeFalloff);\n}\n}\n#define inline\nfloat computeShadowWithESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nelse\n{\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n#define inline\nfloat computeShadowWithCloseESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nelse\n{\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n#ifdef WEBGL2\n#define GREATEST_LESS_THAN_ONE 0.99999994\n\n#define inline\nfloat computeShadowWithCSMPCF1(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArrayShadow shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nuvDepth.z=clamp(uvDepth.z,0.,GREATEST_LESS_THAN_ONE);\nvec4 uvDepthLayer=vec4(uvDepth.x,uvDepth.y,layer,uvDepth.z);\nfloat shadow=texture(shadowSampler,uvDepthLayer);\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n\n\n\n#define inline\nfloat computeShadowWithCSMPCF3(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArrayShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nuvDepth.z=clamp(uvDepth.z,0.,GREATEST_LESS_THAN_ONE);\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\n\n\nvec2 uvw0=3.-2.*st;\nvec2 uvw1=1.+2.*st;\nvec2 u=vec2((2.-st.x)/uvw0.x-1.,st.x/uvw1.x+1.)*shadowMapSizeAndInverse.y;\nvec2 v=vec2((2.-st.y)/uvw0.y-1.,st.y/uvw1.y+1.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[0],v[0]),layer,uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[1],v[0]),layer,uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[0],v[1]),layer,uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[1],v[1]),layer,uvDepth.z));\nshadow=shadow/16.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n\n\n\n#define inline\nfloat computeShadowWithCSMPCF5(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArrayShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nuvDepth.z=clamp(uvDepth.z,0.,GREATEST_LESS_THAN_ONE);\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\nvec2 uvw0=4.-3.*st;\nvec2 uvw1=vec2(7.);\nvec2 uvw2=1.+3.*st;\nvec3 u=vec3((3.-2.*st.x)/uvw0.x-2.,(3.+st.x)/uvw1.x,st.x/uvw2.x+2.)*shadowMapSizeAndInverse.y;\nvec3 v=vec3((3.-2.*st.y)/uvw0.y-2.,(3.+st.y)/uvw1.y,st.y/uvw2.y+2.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[0],v[0]),layer,uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[1],v[0]),layer,uvDepth.z));\nshadow+=uvw2.x*uvw0.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[2],v[0]),layer,uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[0],v[1]),layer,uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[1],v[1]),layer,uvDepth.z));\nshadow+=uvw2.x*uvw1.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[2],v[1]),layer,uvDepth.z));\nshadow+=uvw0.x*uvw2.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[0],v[2]),layer,uvDepth.z));\nshadow+=uvw1.x*uvw2.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[1],v[2]),layer,uvDepth.z));\nshadow+=uvw2.x*uvw2.y*texture2D(shadowSampler,vec4(base_uv.xy+vec2(u[2],v[2]),layer,uvDepth.z));\nshadow=shadow/144.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n\n#define inline\nfloat computeShadowWithPCF1(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nelse\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nfloat shadow=texture2D(shadowSampler,uvDepth);\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n\n\n\n#define inline\nfloat computeShadowWithPCF3(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nelse\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\n\n\nvec2 uvw0=3.-2.*st;\nvec2 uvw1=1.+2.*st;\nvec2 u=vec2((2.-st.x)/uvw0.x-1.,st.x/uvw1.x+1.)*shadowMapSizeAndInverse.y;\nvec2 v=vec2((2.-st.y)/uvw0.y-1.,st.y/uvw1.y+1.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[0]),uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[0]),uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[1]),uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[1]),uvDepth.z));\nshadow=shadow/16.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n\n\n\n#define inline\nfloat computeShadowWithPCF5(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nelse\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\nvec2 uvw0=4.-3.*st;\nvec2 uvw1=vec2(7.);\nvec2 uvw2=1.+3.*st;\nvec3 u=vec3((3.-2.*st.x)/uvw0.x-2.,(3.+st.x)/uvw1.x,st.x/uvw2.x+2.)*shadowMapSizeAndInverse.y;\nvec3 v=vec3((3.-2.*st.y)/uvw0.y-2.,(3.+st.y)/uvw1.y,st.y/uvw2.y+2.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[0]),uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[0]),uvDepth.z));\nshadow+=uvw2.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[0]),uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[1]),uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[1]),uvDepth.z));\nshadow+=uvw2.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[1]),uvDepth.z));\nshadow+=uvw0.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[2]),uvDepth.z));\nshadow+=uvw1.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[2]),uvDepth.z));\nshadow+=uvw2.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[2]),uvDepth.z));\nshadow=shadow/144.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n}\nconst vec3 PoissonSamplers32[64]=vec3[64](\nvec3(0.06407013,0.05409927,0.),\nvec3(0.7366577,0.5789394,0.),\nvec3(-0.6270542,-0.5320278,0.),\nvec3(-0.4096107,0.8411095,0.),\nvec3(0.6849564,-0.4990818,0.),\nvec3(-0.874181,-0.04579735,0.),\nvec3(0.9989998,0.0009880066,0.),\nvec3(-0.004920578,-0.9151649,0.),\nvec3(0.1805763,0.9747483,0.),\nvec3(-0.2138451,0.2635818,0.),\nvec3(0.109845,0.3884785,0.),\nvec3(0.06876755,-0.3581074,0.),\nvec3(0.374073,-0.7661266,0.),\nvec3(0.3079132,-0.1216763,0.),\nvec3(-0.3794335,-0.8271583,0.),\nvec3(-0.203878,-0.07715034,0.),\nvec3(0.5912697,0.1469799,0.),\nvec3(-0.88069,0.3031784,0.),\nvec3(0.5040108,0.8283722,0.),\nvec3(-0.5844124,0.5494877,0.),\nvec3(0.6017799,-0.1726654,0.),\nvec3(-0.5554981,0.1559997,0.),\nvec3(-0.3016369,-0.3900928,0.),\nvec3(-0.5550632,-0.1723762,0.),\nvec3(0.925029,0.2995041,0.),\nvec3(-0.2473137,0.5538505,0.),\nvec3(0.9183037,-0.2862392,0.),\nvec3(0.2469421,0.6718712,0.),\nvec3(0.3916397,-0.4328209,0.),\nvec3(-0.03576927,-0.6220032,0.),\nvec3(-0.04661255,0.7995201,0.),\nvec3(0.4402924,0.3640312,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.)\n);\nconst vec3 PoissonSamplers64[64]=vec3[64](\nvec3(-0.613392,0.617481,0.),\nvec3(0.170019,-0.040254,0.),\nvec3(-0.299417,0.791925,0.),\nvec3(0.645680,0.493210,0.),\nvec3(-0.651784,0.717887,0.),\nvec3(0.421003,0.027070,0.),\nvec3(-0.817194,-0.271096,0.),\nvec3(-0.705374,-0.668203,0.),\nvec3(0.977050,-0.108615,0.),\nvec3(0.063326,0.142369,0.),\nvec3(0.203528,0.214331,0.),\nvec3(-0.667531,0.326090,0.),\nvec3(-0.098422,-0.295755,0.),\nvec3(-0.885922,0.215369,0.),\nvec3(0.566637,0.605213,0.),\nvec3(0.039766,-0.396100,0.),\nvec3(0.751946,0.453352,0.),\nvec3(0.078707,-0.715323,0.),\nvec3(-0.075838,-0.529344,0.),\nvec3(0.724479,-0.580798,0.),\nvec3(0.222999,-0.215125,0.),\nvec3(-0.467574,-0.405438,0.),\nvec3(-0.248268,-0.814753,0.),\nvec3(0.354411,-0.887570,0.),\nvec3(0.175817,0.382366,0.),\nvec3(0.487472,-0.063082,0.),\nvec3(-0.084078,0.898312,0.),\nvec3(0.488876,-0.783441,0.),\nvec3(0.470016,0.217933,0.),\nvec3(-0.696890,-0.549791,0.),\nvec3(-0.149693,0.605762,0.),\nvec3(0.034211,0.979980,0.),\nvec3(0.503098,-0.308878,0.),\nvec3(-0.016205,-0.872921,0.),\nvec3(0.385784,-0.393902,0.),\nvec3(-0.146886,-0.859249,0.),\nvec3(0.643361,0.164098,0.),\nvec3(0.634388,-0.049471,0.),\nvec3(-0.688894,0.007843,0.),\nvec3(0.464034,-0.188818,0.),\nvec3(-0.440840,0.137486,0.),\nvec3(0.364483,0.511704,0.),\nvec3(0.034028,0.325968,0.),\nvec3(0.099094,-0.308023,0.),\nvec3(0.693960,-0.366253,0.),\nvec3(0.678884,-0.204688,0.),\nvec3(0.001801,0.780328,0.),\nvec3(0.145177,-0.898984,0.),\nvec3(0.062655,-0.611866,0.),\nvec3(0.315226,-0.604297,0.),\nvec3(-0.780145,0.486251,0.),\nvec3(-0.371868,0.882138,0.),\nvec3(0.200476,0.494430,0.),\nvec3(-0.494552,-0.711051,0.),\nvec3(0.612476,0.705252,0.),\nvec3(-0.578845,-0.768792,0.),\nvec3(-0.772454,-0.090976,0.),\nvec3(0.504440,0.372295,0.),\nvec3(0.155736,0.065157,0.),\nvec3(0.391522,0.849605,0.),\nvec3(-0.620106,-0.328104,0.),\nvec3(0.789239,-0.419965,0.),\nvec3(-0.545396,0.538133,0.),\nvec3(-0.178564,-0.596057,0.)\n);\n\n\n\n\n\n#define inline\nfloat computeShadowWithCSMPCSS(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArray depthSampler,highp sampler2DArrayShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,int searchTapCount,int pcfTapCount,vec3[64] poissonSamplers,vec2 lightSizeUVCorrection,float depthCorrection,float penumbraDarkness)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nuvDepth.z=clamp(uvDepth.z,0.,GREATEST_LESS_THAN_ONE);\nvec4 uvDepthLayer=vec4(uvDepth.x,uvDepth.y,layer,uvDepth.z);\nfloat blockerDepth=0.0;\nfloat sumBlockerDepth=0.0;\nfloat numBlocker=0.0;\nfor (int i=0; i<searchTapCount; i ++) {\nblockerDepth=texture(depthSampler,vec3(uvDepth.xy+(lightSizeUV*lightSizeUVCorrection*shadowMapSizeInverse*PoissonSamplers32[i].xy),layer)).r;\nif (blockerDepth<depthMetric) {\nsumBlockerDepth+=blockerDepth;\nnumBlocker++;\n}\n}\nif (numBlocker<1.0) {\nreturn 1.0;\n}\nelse\n{\nfloat avgBlockerDepth=sumBlockerDepth/numBlocker;\n\nfloat AAOffset=shadowMapSizeInverse*10.;\n\n\nfloat penumbraRatio=((depthMetric-avgBlockerDepth)*depthCorrection+AAOffset);\nvec4 filterRadius=vec4(penumbraRatio*lightSizeUV*lightSizeUVCorrection*shadowMapSizeInverse,0.,0.);\nfloat random=getRand(vPositionFromLight.xy);\nfloat rotationAngle=random*3.1415926;\nvec2 rotationVector=vec2(cos(rotationAngle),sin(rotationAngle));\nfloat shadow=0.;\nfor (int i=0; i<pcfTapCount; i++) {\nvec4 offset=vec4(poissonSamplers[i],0.);\n\noffset=vec4(offset.x*rotationVector.x-offset.y*rotationVector.y,offset.y*rotationVector.x+offset.x*rotationVector.y,0.,0.);\nshadow+=texture2D(shadowSampler,uvDepthLayer+offset*filterRadius);\n}\nshadow/=float(pcfTapCount);\n\nshadow=mix(shadow,1.,min((depthMetric-avgBlockerDepth)*depthCorrection*penumbraDarkness,1.));\n\nshadow=mix(darkness,1.,shadow);\n\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n\n\n\n\n\n#define inline\nfloat computeShadowWithPCSS(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,int searchTapCount,int pcfTapCount,vec3[64] poissonSamplers)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nelse\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nfloat blockerDepth=0.0;\nfloat sumBlockerDepth=0.0;\nfloat numBlocker=0.0;\nfor (int i=0; i<searchTapCount; i ++) {\nblockerDepth=texture(depthSampler,uvDepth.xy+(lightSizeUV*shadowMapSizeInverse*PoissonSamplers32[i].xy)).r;\nif (blockerDepth<depthMetric) {\nsumBlockerDepth+=blockerDepth;\nnumBlocker++;\n}\n}\nif (numBlocker<1.0) {\nreturn 1.0;\n}\nelse\n{\nfloat avgBlockerDepth=sumBlockerDepth/numBlocker;\n\nfloat AAOffset=shadowMapSizeInverse*10.;\n\n\nfloat penumbraRatio=((depthMetric-avgBlockerDepth)+AAOffset);\nfloat filterRadius=penumbraRatio*lightSizeUV*shadowMapSizeInverse;\nfloat random=getRand(vPositionFromLight.xy);\nfloat rotationAngle=random*3.1415926;\nvec2 rotationVector=vec2(cos(rotationAngle),sin(rotationAngle));\nfloat shadow=0.;\nfor (int i=0; i<pcfTapCount; i++) {\nvec3 offset=poissonSamplers[i];\n\noffset=vec3(offset.x*rotationVector.x-offset.y*rotationVector.y,offset.y*rotationVector.x+offset.x*rotationVector.y,0.);\nshadow+=texture2D(shadowSampler,uvDepth+offset*filterRadius);\n}\nshadow/=float(pcfTapCount);\n\nshadow=mix(shadow,1.,depthMetric-avgBlockerDepth);\n\nshadow=mix(darkness,1.,shadow);\n\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n}\n}\n#define inline\nfloat computeShadowWithPCSS16(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,16,PoissonSamplers32);\n}\n#define inline\nfloat computeShadowWithPCSS32(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,32,PoissonSamplers32);\n}\n#define inline\nfloat computeShadowWithPCSS64(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,32,64,PoissonSamplers64);\n}\n#define inline\nfloat computeShadowWithCSMPCSS16(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArray depthSampler,highp sampler2DArrayShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,vec2 lightSizeUVCorrection,float depthCorrection,float penumbraDarkness)\n{\nreturn computeShadowWithCSMPCSS(layer,vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,16,PoissonSamplers32,lightSizeUVCorrection,depthCorrection,penumbraDarkness);\n}\n#define inline\nfloat computeShadowWithCSMPCSS32(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArray depthSampler,highp sampler2DArrayShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,vec2 lightSizeUVCorrection,float depthCorrection,float penumbraDarkness)\n{\nreturn computeShadowWithCSMPCSS(layer,vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,32,PoissonSamplers32,lightSizeUVCorrection,depthCorrection,penumbraDarkness);\n}\n#define inline\nfloat computeShadowWithCSMPCSS64(float layer,vec4 vPositionFromLight,float depthMetric,highp sampler2DArray depthSampler,highp sampler2DArrayShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,vec2 lightSizeUVCorrection,float depthCorrection,float penumbraDarkness)\n{\nreturn computeShadowWithCSMPCSS(layer,vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,32,64,PoissonSamplers64,lightSizeUVCorrection,depthCorrection,penumbraDarkness);\n}\n#endif\n#endif\n";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/ShadersInclude/shadowsVertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"shadowsVertex",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="shadowsVertex",o="#ifdef SHADOWS\n#if defined(SHADOWCSM{X})\nvPositionFromCamera{X}=view*worldPos;\nfor (int i=0; i<SHADOWCSMNUM_CASCADES{X}; i++) {\nvPositionFromLight{X}[i]=lightMatrix{X}[i]*worldPos;\nvDepthMetric{X}[i]=((vPositionFromLight{X}[i].z+light{X}.depthValues.x)/(light{X}.depthValues.y));\n}\n#elif defined(SHADOW{X}) && !defined(SHADOWCUBE{X})\nvPositionFromLight{X}=lightMatrix{X}*worldPos;\nvDepthMetric{X}=((vPositionFromLight{X}.z+light{X}.depthValues.x)/(light{X}.depthValues.y));\n#endif\n#endif";n["Effect"].IncludesShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/color.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"colorPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragment.js"),"colorPixelShader"),o="#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#else\nuniform vec4 color;\n#endif\n#include<clipPlaneFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\n#ifdef VERTEXCOLOR\ngl_FragColor=vColor;\n#else\ngl_FragColor=color;\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/color.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"colorVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertex.js"),"colorVertexShader"),o="\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<clipPlaneVertexDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\n#ifdef MULTIVIEW\nuniform mat4 viewProjectionR;\n#endif\n\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\nvec4 worldPos=finalWorld*vec4(position,1.0);\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*worldPos;\n} else {\ngl_Position=viewProjectionR*worldPos;\n}\n#else\ngl_Position=viewProjection*worldPos;\n#endif\n#include<clipPlaneVertex>\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/default.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultUboDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/helperFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightUboDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightsFragmentFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/shadowsFragmentFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fresnelFunction.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/reflectionFunction.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragmentMainFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragmentFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/depthPrePass.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragment.js"),"defaultPixelShader"),o="#include<__decl__defaultFragment>\n#if defined(BUMP) || !defined(NORMAL)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#define RECIPROCAL_PI2 0.15915494\nuniform vec3 vEyePosition;\nuniform vec3 vAmbientColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY\n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFRACTION\n#ifdef REFRACTIONMAP_3D\nuniform samplerCube refractionCubeSampler;\n#else\nuniform sampler2D refraction2DSampler;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\n#if SPECULARDIRECTUV == 1\n#define vSpecularUV vMainUV1\n#elif SPECULARDIRECTUV == 2\n#define vSpecularUV vMainUV2\n#else\nvarying vec2 vSpecularUV;\n#endif\nuniform sampler2D specularSampler;\n#endif\n#ifdef ALPHATEST\nuniform float alphaCutOff;\n#endif\n\n#include<fresnelFunction>\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\nuniform samplerCube reflectionCubeSampler;\n#else\nuniform sampler2D reflection2DSampler;\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n#include<imageProcessingDeclaration>\n#include<imageProcessingFunctions>\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(-cross(dFdx(vPositionW),dFdy(vPositionW)));\n#endif\n#include<bumpFragment>\n#ifdef TWOSIDEDLIGHTING\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV+uvOffset);\n#if defined(ALPHATEST) && !defined(ALPHATEST_AFTERALLALPHACOMPUTATIONS)\nif (baseColor.a<alphaCutOff)\ndiscard;\n#endif\n#ifdef ALPHAFROMDIFFUSE\nalpha*=baseColor.a;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_ALPHA\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n#ifdef DETAIL\nbaseColor.rgb=baseColor.rgb*2.0*mix(0.5,detailColor.r,vDetailInfos.y);\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE\n\nvec3 baseAmbientColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nbaseAmbientColor=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\n\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#ifdef SPECULAR\nvec4 specularMapColor=texture2D(specularSampler,vSpecularUV+uvOffset);\nspecularColor=specularMapColor.rgb;\n#ifdef GLOSSINESS\nglossiness=glossiness*specularMapColor.a;\n#endif\n#endif\n#else\nfloat glossiness=0.;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\nfloat shadow=1.;\n#ifdef LIGHTMAP\nvec4 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset);\n#ifdef RGBDLIGHTMAP\nlightmapColor.rgb=fromRGBD(lightmapColor);\n#endif\nlightmapColor.rgb*=vLightmapInfos.y;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n\nvec4 refractionColor=vec4(0.,0.,0.,1.);\n#ifdef REFRACTION\nvec3 refractionVector=normalize(refract(-viewDirectionW,normalW,vRefractionInfos.y));\n#ifdef REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nif (dot(refractionVector,viewDirectionW)<1.0) {\nrefractionColor=textureCube(refractionCubeSampler,refractionVector);\n}\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\nrefractionColor=texture2D(refraction2DSampler,refractionCoords);\n#endif\n#ifdef RGBDREFRACTION\nrefractionColor.rgb=fromRGBD(refractionColor);\n#endif\n#ifdef IS_REFRACTION_LINEAR\nrefractionColor.rgb=toGammaSpace(refractionColor.rgb);\n#endif\nrefractionColor.rgb*=vRefractionInfos.x;\n#endif\n\nvec4 reflectionColor=vec4(0.,0.,0.,1.);\n#ifdef REFLECTION\nvec3 vReflectionUVW=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_3D\n#ifdef ROUGHNESS\nfloat bias=vReflectionInfos.y;\n#ifdef SPECULARTERM\n#ifdef SPECULAR\n#ifdef GLOSSINESS\nbias*=(1.0-specularMapColor.a);\n#endif\n#endif\n#endif\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW,bias);\n#else\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW);\n#endif\n#else\nvec2 coords=vReflectionUVW.xy;\n#ifdef REFLECTIONMAP_PROJECTION\ncoords/=vReflectionUVW.z;\n#endif\ncoords.y=1.0-coords.y;\nreflectionColor=texture2D(reflection2DSampler,coords);\n#endif\n#ifdef RGBDREFLECTION\nreflectionColor.rgb=fromRGBD(reflectionColor);\n#endif\n#ifdef IS_REFLECTION_LINEAR\nreflectionColor.rgb=toGammaSpace(reflectionColor.rgb);\n#endif\nreflectionColor.rgb*=vReflectionInfos.x;\n#ifdef REFLECTIONFRESNEL\nfloat reflectionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,reflectionRightColor.a,reflectionLeftColor.a);\n#ifdef REFLECTIONFRESNELFROMSPECULAR\n#ifdef SPECULARTERM\nreflectionColor.rgb*=specularColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#else\nreflectionColor.rgb*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#else\nreflectionColor.rgb*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#endif\n#endif\n#ifdef REFRACTIONFRESNEL\nfloat refractionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,refractionRightColor.a,refractionLeftColor.a);\nrefractionColor.rgb*=refractionLeftColor.rgb*(1.0-refractionFresnelTerm)+refractionFresnelTerm*refractionRightColor.rgb;\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nopacityMap.rgb=opacityMap.rgb*vec3(0.3,0.59,0.11);\nalpha*=(opacityMap.x+opacityMap.y+opacityMap.z)* vOpacityInfos.y;\n#else\nalpha*=opacityMap.a*vOpacityInfos.y;\n#endif\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef OPACITYFRESNEL\nfloat opacityFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,opacityParts.z,opacityParts.w);\nalpha+=opacityParts.x*(1.0-opacityFresnelTerm)+opacityFresnelTerm*opacityParts.y;\n#endif\n#ifdef ALPHATEST\n#ifdef ALPHATEST_AFTERALLALPHACOMPUTATIONS\nif (alpha<alphaCutOff)\ndiscard;\n#endif\n#ifndef ALPHABLEND\n\nalpha=1.0;\n#endif\n#endif\n\nvec3 emissiveColor=vEmissiveColor;\n#ifdef EMISSIVE\nemissiveColor+=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb*vEmissiveInfos.y;\n#endif\n#ifdef EMISSIVEFRESNEL\nfloat emissiveFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,emissiveRightColor.a,emissiveLeftColor.a);\nemissiveColor*=emissiveLeftColor.rgb*(1.0-emissiveFresnelTerm)+emissiveFresnelTerm*emissiveRightColor.rgb;\n#endif\n\n#ifdef DIFFUSEFRESNEL\nfloat diffuseFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,diffuseRightColor.a,diffuseLeftColor.a);\ndiffuseBase*=diffuseLeftColor.rgb*(1.0-diffuseFresnelTerm)+diffuseFresnelTerm*diffuseRightColor.rgb;\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\n#ifdef LINKEMISSIVEWITHDIFFUSE\nvec3 finalDiffuse=clamp((diffuseBase+emissiveColor)*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+emissiveColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#endif\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#ifdef SPECULAROVERALPHA\nalpha=clamp(alpha+dot(finalSpecular,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#ifdef REFLECTIONOVERALPHA\nalpha=clamp(alpha+dot(reflectionColor.rgb,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec4 color=vec4(clamp(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor.rgb+emissiveColor+refractionColor.rgb,0.0,1.0),alpha);\n#else\nvec4 color=vec4(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor.rgb+refractionColor.rgb,alpha);\n#endif\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\ncolor.rgb*=lightmapColor.rgb;\n#else\ncolor.rgb+=lightmapColor.rgb;\n#endif\n#endif\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FOG\ncolor.rgb=max(color.rgb,0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb=toLinearSpace(color.rgb);\n#else\n#ifdef IMAGEPROCESSING\ncolor.rgb=toLinearSpace(color.rgb);\ncolor=applyImageProcessing(color);\n#endif\n#endif\ncolor.a*=visibility;\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\n#ifdef PREPASS\ngl_FragData[0]=color;\n#ifdef PREPASS_POSITION\ngl_FragData[PREPASS_POSITION_INDEX]=vec4(vPositionW,1.0);\n#endif\n#ifdef PREPASS_VELOCITY\nvec2 a=(vCurrentPosition.xy/vCurrentPosition.w)*0.5+0.5;\nvec2 b=(vPreviousPosition.xy/vPreviousPosition.w)*0.5+0.5;\nvec2 velocity=abs(a-b);\nvelocity=vec2(pow(velocity.x,1.0/3.0),pow(velocity.y,1.0/3.0))*sign(a-b)*0.5+0.5;\ngl_FragData[PREPASS_VELOCITY_INDEX]=vec4(velocity,0.0,1.0);\n#endif\n#ifdef PREPASS_IRRADIANCE\ngl_FragData[PREPASS_IRRADIANCE_INDEX]=vec4(0.0,0.0,0.0,1.0);\n#endif\n#ifdef PREPASS_DEPTHNORMAL\ngl_FragData[PREPASS_DEPTHNORMAL_INDEX]=vec4(vViewPos.z,(view*vec4(normalW,0.0)).rgb);\n#endif\n#ifdef PREPASS_ALBEDO\ngl_FragData[PREPASS_ALBEDO_INDEX]=vec4(0.0,0.0,0.0,1.0);\n#endif\n#ifdef PREPASS_REFLECTIVITY\n#if defined(SPECULAR)\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=specularMapColor;\n#else\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=vec4(0.0,0.0,0.0,1.0);\n#endif\n#endif\n#endif\n#if !defined(PREPASS) || defined(WEBGL2)\ngl_FragColor=color;\n#endif\n}\n";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/default.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/defaultUboDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/helperFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/lightUboDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexGlobalDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/prePassVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bumpVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/clipPlaneVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/shadowsVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/pointCloudVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/logDepthVertex.js"),"defaultVertexShader"),o="#include<__decl__defaultVertex>\n\n#define CUSTOM_VERTEX_BEGIN\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#include<prePassVertexDeclaration>\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#if defined(DETAIL) && DETAILDIRECTUV == 0\nvarying vec2 vDetailUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nvarying vec2 vSpecularUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\nvec3 positionUpdated=position;\n#ifdef NORMAL\nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#ifdef UV1\nvec2 uvUpdated=uv;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvPositionUVW=positionUpdated;\n#endif\n#define CUSTOM_VERTEX_UPDATE_POSITION\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n#include<instancesVertex>\n#if defined(PREPASS) && defined(PREPASS_VELOCITY) && !defined(BONES_VELOCITY_ENABLED)\n\nvCurrentPosition=viewProjection*finalWorld*vec4(positionUpdated,1.0);\nvPreviousPosition=previousViewProjection*previousWorld*vec4(positionUpdated,1.0);\n#endif\n#include<bonesVertex>\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#if defined(INSTANCES) && defined(THIN_INSTANCES)\nvNormalW=normalUpdated/vec3(dot(normalWorld[0],normalWorld[0]),dot(normalWorld[1],normalWorld[1]),dot(normalWorld[2],normalWorld[2]));\nvNormalW=normalize(normalWorld*vNormalW);\n#else\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#endif\n#endif\n#define CUSTOM_VERTEX_UPDATE_WORLDPOS\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*worldPos;\n} else {\ngl_Position=viewProjectionR*worldPos;\n}\n#else\ngl_Position=viewProjection*worldPos;\n#endif\nvPositionW=vec3(worldPos);\n#include<prePassVertex>\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uvUpdated=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uvUpdated;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(DETAIL) && DETAILDIRECTUV == 0\nif (vDetailInfos.x == 0.)\n{\nvDetailUV=vec2(detailMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvDetailUV=vec2(detailMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nif (vSpecularInfos.x == 0.)\n{\nvSpecularUV=vec2(specularMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uvUpdated,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n#include<pointCloudVertex>\n#include<logDepthVertex>\n#define CUSTOM_VERTEX_MAIN_END\n}\n";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/glowBlurPostProcess.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"glowBlurPostProcessPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="glowBlurPostProcessPixelShader",o="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec2 screenSize;\nuniform vec2 direction;\nuniform float blurWidth;\n\nfloat getLuminance(vec3 color)\n{\nreturn dot(color,vec3(0.2126,0.7152,0.0722));\n}\nvoid main(void)\n{\nfloat weights[7];\nweights[0]=0.05;\nweights[1]=0.1;\nweights[2]=0.2;\nweights[3]=0.3;\nweights[4]=0.2;\nweights[5]=0.1;\nweights[6]=0.05;\nvec2 texelSize=vec2(1.0/screenSize.x,1.0/screenSize.y);\nvec2 texelStep=texelSize*direction*blurWidth;\nvec2 start=vUV-3.0*texelStep;\nvec4 baseColor=vec4(0.,0.,0.,0.);\nvec2 texelOffset=vec2(0.,0.);\nfor (int i=0; i<7; i++)\n{\n\nvec4 texel=texture2D(textureSampler,start+texelOffset);\nbaseColor.a+=texel.a*weights[i];\n\nfloat luminance=getLuminance(baseColor.rgb);\nfloat luminanceTexel=getLuminance(texel.rgb);\nfloat choice=step(luminanceTexel,luminance);\nbaseColor.rgb=choice*baseColor.rgb+(1.0-choice)*texel.rgb;\ntexelOffset+=texelStep;\n}\ngl_FragColor=baseColor;\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/glowMapGeneration.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"glowMapGenerationPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="glowMapGenerationPixelShader",o="#ifdef DIFFUSE\nvarying vec2 vUVDiffuse;\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef OPACITY\nvarying vec2 vUVOpacity;\nuniform sampler2D opacitySampler;\nuniform float opacityIntensity;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef VERTEXALPHA\nvarying vec4 vColor;\n#endif\nuniform vec4 glowColor;\nvoid main(void)\n{\nvec4 finalColor=glowColor;\n\n#ifdef DIFFUSE\nvec4 albedoTexture=texture2D(diffuseSampler,vUVDiffuse);\n#ifdef GLOW\n\nfinalColor.a*=albedoTexture.a;\n#endif\n#ifdef HIGHLIGHT\n\nfinalColor.a=albedoTexture.a;\n#endif\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vUVOpacity);\n#ifdef OPACITYRGB\nfinalColor.a*=getLuminance(opacityMap.rgb);\n#else\nfinalColor.a*=opacityMap.a;\n#endif\nfinalColor.a*=opacityIntensity;\n#endif\n#ifdef VERTEXALPHA\nfinalColor.a*=vColor.a;\n#endif\n#ifdef ALPHATEST\nif (finalColor.a<ALPHATESTVALUE)\ndiscard;\n#endif\n#ifdef EMISSIVE\ngl_FragColor=texture2D(emissiveSampler,vUVEmissive)*finalColor;\n#else\ngl_FragColor=finalColor;\n#endif\n#ifdef HIGHLIGHT\n\ngl_FragColor.a=glowColor.a;\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/glowMapGeneration.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"glowMapGenerationVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexGlobalDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/morphTargetsVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/bonesVertex.js"),"glowMapGenerationVertexShader"),o="\nattribute vec3 position;\n#include<bonesDeclaration>\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nvarying vec4 vPosition;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef DIFFUSE\nvarying vec2 vUVDiffuse;\nuniform mat4 diffuseMatrix;\n#endif\n#ifdef OPACITY\nvarying vec2 vUVOpacity;\nuniform mat4 opacityMatrix;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef VERTEXALPHA\nattribute vec4 color;\nvarying vec4 vColor;\n#endif\nvoid main(void)\n{\nvec3 positionUpdated=position;\n#ifdef UV1\nvec2 uvUpdated=uv;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef CUBEMAP\nvPosition=finalWorld*vec4(positionUpdated,1.0);\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#else\nvPosition=viewProjection*finalWorld*vec4(positionUpdated,1.0);\ngl_Position=vPosition;\n#endif\n#ifdef DIFFUSE\n#ifdef DIFFUSEUV1\nvUVDiffuse=vec2(diffuseMatrix*vec4(uvUpdated,1.0,0.0));\n#endif\n#ifdef DIFFUSEUV2\nvUVDiffuse=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef OPACITY\n#ifdef OPACITYUV1\nvUVOpacity=vec2(opacityMatrix*vec4(uvUpdated,1.0,0.0));\n#endif\n#ifdef OPACITYUV2\nvUVOpacity=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef EMISSIVE\n#ifdef EMISSIVEUV1\nvUVEmissive=vec2(emissiveMatrix*vec4(uvUpdated,1.0,0.0));\n#endif\n#ifdef EMISSIVEUV2\nvUVEmissive=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef VERTEXALPHA\nvColor=color;\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/glowMapMerge.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"glowMapMergePixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="glowMapMergePixelShader",o="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#ifdef EMISSIVE\nuniform sampler2D textureSampler2;\n#endif\n\nuniform float offset;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\n#ifdef EMISSIVE\nbaseColor+=texture2D(textureSampler2,vUV);\nbaseColor*=offset;\n#else\nbaseColor.a=abs(offset-baseColor.a);\n#ifdef STROKE\nfloat alpha=smoothstep(.0,.1,baseColor.a);\nbaseColor.a=alpha;\nbaseColor.rgb=baseColor.rgb*alpha;\n#endif\n#endif\ngl_FragColor=baseColor;\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/glowMapMerge.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"glowMapMergeVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="glowMapMergeVertexShader",o="\nattribute vec2 position;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=position*madd+madd;\ngl_Position=vec4(position,0.0,1.0);\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/kernelBlur.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurVaryingDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/packingFunctions.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurFragment2.js"),"kernelBlurPixelShader"),o="\nuniform sampler2D textureSampler;\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#ifdef DOF\nuniform sampler2D circleOfConfusionSampler;\nuniform vec2 cameraMinMaxZ;\nfloat sampleDistance(const in vec2 offset) {\nfloat depth=texture2D(circleOfConfusionSampler,offset).g;\nreturn cameraMinMaxZ.x+(cameraMinMaxZ.y-cameraMinMaxZ.x)*depth;\n}\nfloat sampleCoC(const in vec2 offset) {\nfloat coc=texture2D(circleOfConfusionSampler,offset).r;\nreturn coc;\n}\n#endif\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\n#ifdef PACKEDFLOAT\n#include<packingFunctions>\n#endif\nvoid main(void)\n{\nfloat computedWeight=0.0;\n#ifdef PACKEDFLOAT\nfloat blend=0.;\n#else\nvec4 blend=vec4(0.);\n#endif\n#ifdef DOF\nfloat sumOfWeights=CENTER_WEIGHT;\nfloat factor=0.0;\n\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCenter))*CENTER_WEIGHT;\n#else\nblend+=texture2D(textureSampler,sampleCenter)*CENTER_WEIGHT;\n#endif\n#endif\n#include<kernelBlurFragment>[0..varyingCount]\n#include<kernelBlurFragment2>[0..depCount]\n#ifdef PACKEDFLOAT\ngl_FragColor=pack(blend);\n#else\ngl_FragColor=blend;\n#endif\n#ifdef DOF\ngl_FragColor/=sumOfWeights;\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/kernelBlur.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"kernelBlurVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurVaryingDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/kernelBlurVertex.js"),"kernelBlurVertexShader"),o="\nattribute vec2 position;\n\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nsampleCenter=(position*madd+madd);\n#include<kernelBlurVertex>[0..varyingCount]\ngl_Position=vec4(position,0.0,1.0);\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/line.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"linePixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="linePixelShader",o="uniform vec4 color;\nvoid main(void) {\ngl_FragColor=color;\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/line.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lineVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js"),"lineVertexShader"),o="#include<instancesDeclaration>\n\nattribute vec3 position;\nattribute vec4 normal;\n\nuniform mat4 viewProjection;\nuniform float width;\nuniform float aspectRatio;\nvoid main(void) {\n#include<instancesVertex>\nmat4 worldViewProjection=viewProjection*finalWorld;\nvec4 viewPosition=worldViewProjection*vec4(position,1.0);\nvec4 viewPositionNext=worldViewProjection*vec4(normal.xyz,1.0);\nvec2 currentScreen=viewPosition.xy/viewPosition.w;\nvec2 nextScreen=viewPositionNext.xy/viewPositionNext.w;\ncurrentScreen.x*=aspectRatio;\nnextScreen.x*=aspectRatio;\nvec2 dir=normalize(nextScreen-currentScreen);\nvec2 normalDir=vec2(-dir.y,dir.x);\nnormalDir*=width/2.0;\nnormalDir.x/=aspectRatio;\nvec4 offset=vec4(normalDir*normal.w,0.0,0.0);\ngl_Position=viewPosition+offset;\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/pass.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"passPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="passPixelShader",o="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(textureSampler,vUV);\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/passCube.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"passCubePixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="passCubePixelShader",o="\nvarying vec2 vUV;\nuniform samplerCube textureSampler;\nvoid main(void)\n{\nvec2 uv=vUV*2.0-1.0;\n#ifdef POSITIVEX\ngl_FragColor=textureCube(textureSampler,vec3(1.001,uv.y,uv.x));\n#endif\n#ifdef NEGATIVEX\ngl_FragColor=textureCube(textureSampler,vec3(-1.001,uv.y,uv.x));\n#endif\n#ifdef POSITIVEY\ngl_FragColor=textureCube(textureSampler,vec3(uv.y,1.001,uv.x));\n#endif\n#ifdef NEGATIVEY\ngl_FragColor=textureCube(textureSampler,vec3(uv.y,-1.001,uv.x));\n#endif\n#ifdef POSITIVEZ\ngl_FragColor=textureCube(textureSampler,vec3(uv,1.001));\n#endif\n#ifdef NEGATIVEZ\ngl_FragColor=textureCube(textureSampler,vec3(uv,-1.001));\n#endif\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/Shaders/postprocess.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"postprocessVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i="postprocessVertexShader",o="\nattribute vec2 position;\nuniform vec2 scale;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=(position*madd+madd)*scale;\ngl_Position=vec4(position,0.0,1.0);\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/core/States/alphaCullingState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AlphaState",(function(){return n}));var n=function(){function AlphaState(){this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this.reset()}return Object.defineProperty(AlphaState.prototype,"isDirty",{get:function(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty},enumerable:!1,configurable:!0}),Object.defineProperty(AlphaState.prototype,"alphaBlend",{get:function(){return this._alphaBlend},set:function(e){this._alphaBlend!==e&&(this._alphaBlend=e,this._isAlphaBlendDirty=!0)},enumerable:!1,configurable:!0}),AlphaState.prototype.setAlphaBlendConstants=function(e,t,r,n){this._blendConstants[0]===e&&this._blendConstants[1]===t&&this._blendConstants[2]===r&&this._blendConstants[3]===n||(this._blendConstants[0]=e,this._blendConstants[1]=t,this._blendConstants[2]=r,this._blendConstants[3]=n,this._isBlendConstantsDirty=!0)},AlphaState.prototype.setAlphaBlendFunctionParameters=function(e,t,r,n){this._blendFunctionParameters[0]===e&&this._blendFunctionParameters[1]===t&&this._blendFunctionParameters[2]===r&&this._blendFunctionParameters[3]===n||(this._blendFunctionParameters[0]=e,this._blendFunctionParameters[1]=t,this._blendFunctionParameters[2]=r,this._blendFunctionParameters[3]=n,this._isBlendFunctionParametersDirty=!0)},AlphaState.prototype.setAlphaEquationParameters=function(e,t){this._blendEquationParameters[0]===e&&this._blendEquationParameters[1]===t||(this._blendEquationParameters[0]=e,this._blendEquationParameters[1]=t,this._isBlendEquationParametersDirty=!0)},AlphaState.prototype.reset=function(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1},AlphaState.prototype.apply=function(e){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?e.enable(e.BLEND):e.disable(e.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(e.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(e.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(e.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))},AlphaState}()},"./node_modules/@babylonjs/core/States/depthCullingState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DepthCullingState",(function(){return n}));var n=function(){function DepthCullingState(){this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,this.reset()}return Object.defineProperty(DepthCullingState.prototype,"isDirty",{get:function(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset!==e&&(this._zOffset=e,this._isZOffsetDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"cullFace",{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,this._isCullFaceDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"cull",{get:function(){return this._cull},set:function(e){this._cull!==e&&(this._cull=e,this._isCullDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"depthFunc",{get:function(){return this._depthFunc},set:function(e){this._depthFunc!==e&&(this._depthFunc=e,this._isDepthFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"depthMask",{get:function(){return this._depthMask},set:function(e){this._depthMask!==e&&(this._depthMask=e,this._isDepthMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"depthTest",{get:function(){return this._depthTest},set:function(e){this._depthTest!==e&&(this._depthTest=e,this._isDepthTestDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DepthCullingState.prototype,"frontFace",{get:function(){return this._frontFace},set:function(e){this._frontFace!==e&&(this._frontFace=e,this._isFrontFaceDirty=!0)},enumerable:!1,configurable:!0}),DepthCullingState.prototype.reset=function(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1},DepthCullingState.prototype.apply=function(e){this.isDirty&&(this._isCullDirty&&(this.cull?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(e.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(e.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(e.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.zOffset,0)):e.disable(e.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(e.frontFace(this.frontFace),this._isFrontFaceDirty=!1))},DepthCullingState}()},"./node_modules/@babylonjs/core/States/stencilState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"StencilState",(function(){return n}));var n=function(){function StencilState(){this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.reset()}return Object.defineProperty(StencilState.prototype,"isDirty",{get:function(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilFunc",{get:function(){return this._stencilFunc},set:function(e){this._stencilFunc!==e&&(this._stencilFunc=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilFuncRef",{get:function(){return this._stencilFuncRef},set:function(e){this._stencilFuncRef!==e&&(this._stencilFuncRef=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilFuncMask",{get:function(){return this._stencilFuncMask},set:function(e){this._stencilFuncMask!==e&&(this._stencilFuncMask=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilOpStencilFail",{get:function(){return this._stencilOpStencilFail},set:function(e){this._stencilOpStencilFail!==e&&(this._stencilOpStencilFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilOpDepthFail",{get:function(){return this._stencilOpDepthFail},set:function(e){this._stencilOpDepthFail!==e&&(this._stencilOpDepthFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilOpStencilDepthPass",{get:function(){return this._stencilOpStencilDepthPass},set:function(e){this._stencilOpStencilDepthPass!==e&&(this._stencilOpStencilDepthPass=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilMask",{get:function(){return this._stencilMask},set:function(e){this._stencilMask!==e&&(this._stencilMask=e,this._isStencilMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(StencilState.prototype,"stencilTest",{get:function(){return this._stencilTest},set:function(e){this._stencilTest!==e&&(this._stencilTest=e,this._isStencilTestDirty=!0)},enumerable:!1,configurable:!0}),StencilState.prototype.reset=function(){this._stencilTest=!1,this._stencilMask=255,this._stencilFunc=StencilState.ALWAYS,this._stencilFuncRef=1,this._stencilFuncMask=255,this._stencilOpStencilFail=StencilState.KEEP,this._stencilOpDepthFail=StencilState.KEEP,this._stencilOpStencilDepthPass=StencilState.REPLACE,this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0},StencilState.prototype.apply=function(e){this.isDirty&&(this._isStencilTestDirty&&(this.stencilTest?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(e.stencilMask(this.stencilMask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(e.stencilFunc(this.stencilFunc,this.stencilFuncRef,this.stencilFuncMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(e.stencilOp(this.stencilOpStencilFail,this.stencilOpDepthFail,this.stencilOpStencilDepthPass),this._isStencilOpDirty=!1))},StencilState.ALWAYS=519,StencilState.KEEP=7680,StencilState.REPLACE=7681,StencilState}()},"./node_modules/@babylonjs/core/abstractScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AbstractScene",(function(){return n}));var n=function(){function AbstractScene(){this.rootNodes=new Array,this.cameras=new Array,this.lights=new Array,this.meshes=new Array,this.skeletons=new Array,this.particleSystems=new Array,this.animations=[],this.animationGroups=new Array,this.multiMaterials=new Array,this.materials=new Array,this.morphTargetManagers=new Array,this.geometries=new Array,this.transformNodes=new Array,this.actionManagers=new Array,this.textures=new Array,this._environmentTexture=null,this.postProcesses=new Array}return AbstractScene.AddParser=function(e,t){this._BabylonFileParsers[e]=t},AbstractScene.GetParser=function(e){return this._BabylonFileParsers[e]?this._BabylonFileParsers[e]:null},AbstractScene.AddIndividualParser=function(e,t){this._IndividualBabylonFileParsers[e]=t},AbstractScene.GetIndividualParser=function(e){return this._IndividualBabylonFileParsers[e]?this._IndividualBabylonFileParsers[e]:null},AbstractScene.Parse=function(e,t,r,n){for(var i in this._BabylonFileParsers)this._BabylonFileParsers.hasOwnProperty(i)&&this._BabylonFileParsers[i](e,t,r,n)},Object.defineProperty(AbstractScene.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(e){this._environmentTexture=e},enumerable:!1,configurable:!0}),AbstractScene.prototype.getNodes=function(){var e=new Array;return e=e.concat(this.meshes),e=e.concat(this.lights),e=e.concat(this.cameras),e=e.concat(this.transformNodes),this.skeletons.forEach((function(t){return e=e.concat(t.bones)})),e},AbstractScene._BabylonFileParsers={},AbstractScene._IndividualBabylonFileParsers={},AbstractScene}()},"./node_modules/@babylonjs/core/node.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Node",(function(){return c}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),o=r("./node_modules/@babylonjs/core/Misc/decorators.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),u=r("./node_modules/@babylonjs/core/Misc/devTools.js"),c=function(){function Node(e,t){void 0===t&&(t=null),this.state="",this.metadata=null,this.reservedDataStore=null,this._doNotSerialize=!1,this._isDisposed=!1,this.animations=new Array,this._ranges={},this.onReady=null,this._isEnabled=!0,this._isParentEnabled=!0,this._isReady=!0,this._currentRenderId=-1,this._parentUpdateId=-1,this._childUpdateId=-1,this._waitingParentId=null,this._cache={},this._parentNode=null,this._children=null,this._worldMatrix=i["Matrix"].Identity(),this._worldMatrixDeterminant=0,this._worldMatrixDeterminantIsDirty=!0,this._sceneRootNodesIndex=-1,this._animationPropertiesOverride=null,this._isNode=!0,this.onDisposeObservable=new s["Observable"],this._onDisposeObserver=null,this._behaviors=new Array,this.name=e,this.id=e,this._scene=t||a["EngineStore"].LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._initCache()}return Node.AddNodeConstructor=function(e,t){this._NodeConstructors[e]=t},Node.Construct=function(e,t,r,n){var i=this._NodeConstructors[e];return i?i(t,r,n):null},Object.defineProperty(Node.prototype,"doNotSerialize",{get:function(){return!!this._doNotSerialize||!!this._parentNode&&this._parentNode.doNotSerialize},set:function(e){this._doNotSerialize=e},enumerable:!1,configurable:!0}),Node.prototype.isDisposed=function(){return this._isDisposed},Object.defineProperty(Node.prototype,"parent",{get:function(){return this._parentNode},set:function(e){if(this._parentNode!==e){var t=this._parentNode;if(this._parentNode&&void 0!==this._parentNode._children&&null!==this._parentNode._children){var r=this._parentNode._children.indexOf(this);-1!==r&&this._parentNode._children.splice(r,1),e||this._isDisposed||this._addToSceneRootNodes()}this._parentNode=e,this._parentNode&&(void 0!==this._parentNode._children&&null!==this._parentNode._children||(this._parentNode._children=new Array),this._parentNode._children.push(this),t||this._removeFromSceneRootNodes()),this._syncParentEnabledState()}},enumerable:!1,configurable:!0}),Node.prototype._addToSceneRootNodes=function(){-1===this._sceneRootNodesIndex&&(this._sceneRootNodesIndex=this._scene.rootNodes.length,this._scene.rootNodes.push(this))},Node.prototype._removeFromSceneRootNodes=function(){if(-1!==this._sceneRootNodesIndex){var e=this._scene.rootNodes,t=e.length-1;e[this._sceneRootNodesIndex]=e[t],e[this._sceneRootNodesIndex]._sceneRootNodesIndex=this._sceneRootNodesIndex,this._scene.rootNodes.pop(),this._sceneRootNodesIndex=-1}},Object.defineProperty(Node.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!1,configurable:!0}),Node.prototype.getClassName=function(){return"Node"},Object.defineProperty(Node.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!1,configurable:!0}),Node.prototype.getScene=function(){return this._scene},Node.prototype.getEngine=function(){return this._scene.getEngine()},Node.prototype.addBehavior=function(e,t){var r=this;void 0===t&&(t=!1);var n=this._behaviors.indexOf(e);return-1!==n||(e.init(),this._scene.isLoading&&!t?this._scene.onDataLoadedObservable.addOnce((function(){e.attach(r)})):e.attach(this),this._behaviors.push(e)),this},Node.prototype.removeBehavior=function(e){var t=this._behaviors.indexOf(e);return-1===t||(this._behaviors[t].detach(),this._behaviors.splice(t,1)),this},Object.defineProperty(Node.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!1,configurable:!0}),Node.prototype.getBehaviorByName=function(e){for(var t=0,r=this._behaviors;t<r.length;t++){var n=r[t];if(n.name===e)return n}return null},Node.prototype.getWorldMatrix=function(){return this._currentRenderId!==this._scene.getRenderId()&&this.computeWorldMatrix(),this._worldMatrix},Node.prototype._getWorldMatrixDeterminant=function(){return this._worldMatrixDeterminantIsDirty&&(this._worldMatrixDeterminantIsDirty=!1,this._worldMatrixDeterminant=this._worldMatrix.determinant()),this._worldMatrixDeterminant},Object.defineProperty(Node.prototype,"worldMatrixFromCache",{get:function(){return this._worldMatrix},enumerable:!1,configurable:!0}),Node.prototype._initCache=function(){this._cache={},this._cache.parent=void 0},Node.prototype.updateCache=function(e){!e&&this.isSynchronized()||(this._cache.parent=this.parent,this._updateCache())},Node.prototype._getActionManagerForTrigger=function(e,t){return void 0===t&&(t=!0),this.parent?this.parent._getActionManagerForTrigger(e,!1):null},Node.prototype._updateCache=function(e){},Node.prototype._isSynchronized=function(){return!0},Node.prototype._markSyncedWithParent=function(){this._parentNode&&(this._parentUpdateId=this._parentNode._childUpdateId)},Node.prototype.isSynchronizedWithParent=function(){return!this._parentNode||this._parentUpdateId===this._parentNode._childUpdateId&&this._parentNode.isSynchronized()},Node.prototype.isSynchronized=function(){return this._cache.parent!=this._parentNode?(this._cache.parent=this._parentNode,!1):!(this._parentNode&&!this.isSynchronizedWithParent())&&this._isSynchronized()},Node.prototype.isReady=function(e){return void 0===e&&(e=!1),this._isReady},Node.prototype.isEnabled=function(e){return void 0===e&&(e=!0),!1===e?this._isEnabled:!!this._isEnabled&&this._isParentEnabled},Node.prototype._syncParentEnabledState=function(){this._isParentEnabled=!this._parentNode||this._parentNode.isEnabled(),this._children&&this._children.forEach((function(e){e._syncParentEnabledState()}))},Node.prototype.setEnabled=function(e){this._isEnabled=e,this._syncParentEnabledState()},Node.prototype.isDescendantOf=function(e){return!!this.parent&&(this.parent===e||this.parent.isDescendantOf(e))},Node.prototype._getDescendants=function(e,t,r){if(void 0===t&&(t=!1),this._children)for(var n=0;n<this._children.length;n++){var i=this._children[n];r&&!r(i)||e.push(i),t||i._getDescendants(e,!1,r)}},Node.prototype.getDescendants=function(e,t){var r=new Array;return this._getDescendants(r,e,t),r},Node.prototype.getChildMeshes=function(e,t){var r=[];return this._getDescendants(r,e,(function(e){return(!t||t(e))&&void 0!==e.cullingStrategy})),r},Node.prototype.getChildren=function(e,t){return void 0===t&&(t=!0),this.getDescendants(t,e)},Node.prototype._setReady=function(e){e!==this._isReady&&(e?(this.onReady&&this.onReady(this),this._isReady=!0):this._isReady=!1)},Node.prototype.getAnimationByName=function(e){for(var t=0;t<this.animations.length;t++){var r=this.animations[t];if(r.name===e)return r}return null},Node.prototype.createAnimationRange=function(e,t,r){if(!this._ranges[e]){this._ranges[e]=Node._AnimationRangeFactory(e,t,r);for(var n=0,i=this.animations.length;n<i;n++)this.animations[n]&&this.animations[n].createRange(e,t,r)}},Node.prototype.deleteAnimationRange=function(e,t){void 0===t&&(t=!0);for(var r=0,n=this.animations.length;r<n;r++)this.animations[r]&&this.animations[r].deleteRange(e,t);this._ranges[e]=null},Node.prototype.getAnimationRange=function(e){return this._ranges[e]||null},Node.prototype.getAnimationRanges=function(){var e,t=[];for(e in this._ranges)t.push(this._ranges[e]);return t},Node.prototype.beginAnimation=function(e,t,r,n){var i=this.getAnimationRange(e);return i?this._scene.beginAnimation(this,i.from,i.to,t,r,n):null},Node.prototype.serializeAnimationRanges=function(){var e=[];for(var t in this._ranges){var r=this._ranges[t];if(r){var n={};n.name=t,n.from=r.from,n.to=r.to,e.push(n)}}return e},Node.prototype.computeWorldMatrix=function(e){return this._worldMatrix||(this._worldMatrix=i["Matrix"].Identity()),this._worldMatrix},Node.prototype.dispose=function(e,t){if(void 0===t&&(t=!1),this._isDisposed=!0,!e)for(var r=this.getDescendants(!0),n=0,i=r;n<i.length;n++){var o=i[n];o.dispose(e,t)}this.parent?this.parent=null:this._removeFromSceneRootNodes(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear();for(var s=0,a=this._behaviors;s<a.length;s++){var u=a[s];u.detach()}this._behaviors=[]},Node.ParseAnimationRanges=function(e,t,r){if(t.ranges)for(var n=0;n<t.ranges.length;n++){var i=t.ranges[n];e.createAnimationRange(i.name,i.from,i.to)}},Node.prototype.getHierarchyBoundingVectors=function(e,t){var r,n;void 0===e&&(e=!0),void 0===t&&(t=null),this.getScene().incrementRenderId(),this.computeWorldMatrix(!0);var o=this;if(o.getBoundingInfo&&o.subMeshes){var s=o.getBoundingInfo();r=s.boundingBox.minimumWorld.clone(),n=s.boundingBox.maximumWorld.clone()}else r=new i["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n=new i["Vector3"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);if(e)for(var a=this.getDescendants(!1),u=0,c=a;u<c.length;u++){var l=c[u],d=l;if(d.computeWorldMatrix(!0),(!t||t(d))&&d.getBoundingInfo&&0!==d.getTotalVertices()){var h=d.getBoundingInfo(),f=h.boundingBox,p=f.minimumWorld,m=f.maximumWorld;i["Vector3"].CheckExtends(p,r,n),i["Vector3"].CheckExtends(m,r,n)}}return{min:r,max:n}},Node._AnimationRangeFactory=function(e,t,r){throw u["_DevTools"].WarnImport("AnimationRange")},Node._NodeConstructors={},Object(n["__decorate"])([Object(o["serialize"])()],Node.prototype,"name",void 0),Object(n["__decorate"])([Object(o["serialize"])()],Node.prototype,"id",void 0),Object(n["__decorate"])([Object(o["serialize"])()],Node.prototype,"uniqueId",void 0),Object(n["__decorate"])([Object(o["serialize"])()],Node.prototype,"state",void 0),Object(n["__decorate"])([Object(o["serialize"])()],Node.prototype,"metadata",void 0),Node}()},"./node_modules/@babylonjs/core/scene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Scene",(function(){return F}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/tools.js"),o=r("./node_modules/@babylonjs/core/Misc/precisionDate.js"),s=r("./node_modules/@babylonjs/core/Misc/observable.js"),a=r("./node_modules/@babylonjs/core/Misc/smartArray.js"),u=r("./node_modules/@babylonjs/core/Misc/stringDictionary.js"),c=r("./node_modules/@babylonjs/core/Misc/tags.js"),l=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),d=r("./node_modules/@babylonjs/core/Meshes/transformNode.js"),h=r("./node_modules/@babylonjs/core/Meshes/abstractMesh.js"),f=r("./node_modules/@babylonjs/core/Cameras/camera.js"),p=r("./node_modules/@babylonjs/core/abstractScene.js"),m=r("./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js"),_=r("./node_modules/@babylonjs/core/Materials/uniformBuffer.js"),g=r("./node_modules/@babylonjs/core/Lights/light.js"),b=r("./node_modules/@babylonjs/core/Collisions/pickingInfo.js"),v=r("./node_modules/@babylonjs/core/Actions/actionEvent.js"),M=r("./node_modules/@babylonjs/core/PostProcesses/postProcessManager.js"),T=r("./node_modules/@babylonjs/core/Rendering/renderingManager.js"),S=r("./node_modules/@babylonjs/core/sceneComponent.js"),C=r("./node_modules/@babylonjs/core/Misc/domManagement.js"),E=r("./node_modules/@babylonjs/core/Misc/logger.js"),P=r("./node_modules/@babylonjs/core/Engines/engineStore.js"),A=r("./node_modules/@babylonjs/core/Misc/devTools.js"),j=r("./node_modules/@babylonjs/core/Inputs/scene.inputManager.js"),O=r("./node_modules/@babylonjs/core/Misc/perfCounter.js"),R=r("./node_modules/@babylonjs/core/Maths/math.color.js"),I=r("./node_modules/@babylonjs/core/Maths/math.frustum.js"),w=r("./node_modules/@babylonjs/core/Misc/uniqueIdGenerator.js"),D=r("./node_modules/@babylonjs/core/Misc/fileTools.js"),F=function(e){function Scene(t,r){var i=e.call(this)||this;i._inputManager=new j["InputManager"](i),i.cameraToUseForPointers=null,i._isScene=!0,i._blockEntityCollection=!1,i.autoClear=!0,i.autoClearDepthAndStencil=!0,i.clearColor=new R["Color4"](.2,.2,.3,1),i.ambientColor=new R["Color3"](0,0,0),i._environmentIntensity=1,i._forceWireframe=!1,i._skipFrustumClipping=!1,i._forcePointsCloud=!1,i.animationsEnabled=!0,i._animationPropertiesOverride=null,i.useConstantAnimationDeltaTime=!1,i.constantlyUpdateMeshUnderPointer=!1,i.hoverCursor="pointer",i.defaultCursor="",i.doNotHandleCursors=!1,i.preventDefaultOnPointerDown=!0,i.preventDefaultOnPointerUp=!0,i.metadata=null,i.reservedDataStore=null,i.disableOfflineSupportExceptionRules=new Array,i.onDisposeObservable=new s["Observable"],i._onDisposeObserver=null,i.onBeforeRenderObservable=new s["Observable"],i._onBeforeRenderObserver=null,i.onAfterRenderObservable=new s["Observable"],i.onAfterRenderCameraObservable=new s["Observable"],i._onAfterRenderObserver=null,i.onBeforeAnimationsObservable=new s["Observable"],i.onAfterAnimationsObservable=new s["Observable"],i.onBeforeDrawPhaseObservable=new s["Observable"],i.onAfterDrawPhaseObservable=new s["Observable"],i.onReadyObservable=new s["Observable"],i.onBeforeCameraRenderObservable=new s["Observable"],i._onBeforeCameraRenderObserver=null,i.onAfterCameraRenderObservable=new s["Observable"],i._onAfterCameraRenderObserver=null,i.onBeforeActiveMeshesEvaluationObservable=new s["Observable"],i.onAfterActiveMeshesEvaluationObservable=new s["Observable"],i.onBeforeParticlesRenderingObservable=new s["Observable"],i.onAfterParticlesRenderingObservable=new s["Observable"],i.onDataLoadedObservable=new s["Observable"],i.onNewCameraAddedObservable=new s["Observable"],i.onCameraRemovedObservable=new s["Observable"],i.onNewLightAddedObservable=new s["Observable"],i.onLightRemovedObservable=new s["Observable"],i.onNewGeometryAddedObservable=new s["Observable"],i.onGeometryRemovedObservable=new s["Observable"],i.onNewTransformNodeAddedObservable=new s["Observable"],i.onTransformNodeRemovedObservable=new s["Observable"],i.onNewMeshAddedObservable=new s["Observable"],i.onMeshRemovedObservable=new s["Observable"],i.onNewSkeletonAddedObservable=new s["Observable"],i.onSkeletonRemovedObservable=new s["Observable"],i.onNewMaterialAddedObservable=new s["Observable"],i.onNewMultiMaterialAddedObservable=new s["Observable"],i.onMaterialRemovedObservable=new s["Observable"],i.onMultiMaterialRemovedObservable=new s["Observable"],i.onNewTextureAddedObservable=new s["Observable"],i.onTextureRemovedObservable=new s["Observable"],i.onBeforeRenderTargetsRenderObservable=new s["Observable"],i.onAfterRenderTargetsRenderObservable=new s["Observable"],i.onBeforeStepObservable=new s["Observable"],i.onAfterStepObservable=new s["Observable"],i.onActiveCameraChanged=new s["Observable"],i.onBeforeRenderingGroupObservable=new s["Observable"],i.onAfterRenderingGroupObservable=new s["Observable"],i.onMeshImportedObservable=new s["Observable"],i.onAnimationFileImportedObservable=new s["Observable"],i._registeredForLateAnimationBindings=new a["SmartArrayNoDuplicate"](256),i.onPrePointerObservable=new s["Observable"],i.onPointerObservable=new s["Observable"],i.onPreKeyboardObservable=new s["Observable"],i.onKeyboardObservable=new s["Observable"],i._useRightHandedSystem=!1,i._timeAccumulator=0,i._currentStepId=0,i._currentInternalStep=0,i._fogEnabled=!0,i._fogMode=Scene.FOGMODE_NONE,i.fogColor=new R["Color3"](.2,.2,.3),i.fogDensity=.1,i.fogStart=0,i.fogEnd=1e3,i.prePass=!1,i._shadowsEnabled=!0,i._lightsEnabled=!0,i.activeCameras=new Array,i._texturesEnabled=!0,i.physicsEnabled=!0,i.particlesEnabled=!0,i.spritesEnabled=!0,i._skeletonsEnabled=!0,i.lensFlaresEnabled=!0,i.collisionsEnabled=!0,i.gravity=new l["Vector3"](0,-9.807,0),i.postProcessesEnabled=!0,i.renderTargetsEnabled=!0,i.dumpNextRenderTargets=!1,i.customRenderTargets=new Array,i.importedMeshesFiles=new Array,i.probesEnabled=!0,i._meshesForIntersections=new a["SmartArrayNoDuplicate"](256),i.proceduralTexturesEnabled=!0,i._totalVertices=new O["PerfCounter"],i._activeIndices=new O["PerfCounter"],i._activeParticles=new O["PerfCounter"],i._activeBones=new O["PerfCounter"],i._animationTime=0,i.animationTimeScale=1,i._renderId=0,i._frameId=0,i._executeWhenReadyTimeoutId=-1,i._intermediateRendering=!1,i._viewUpdateFlag=-1,i._projectionUpdateFlag=-1,i._toBeDisposed=new Array(256),i._activeRequests=new Array,i._pendingData=new Array,i._isDisposed=!1,i.dispatchAllSubMeshesOfActiveMeshes=!1,i._activeMeshes=new a["SmartArray"](256),i._processedMaterials=new a["SmartArray"](256),i._renderTargets=new a["SmartArrayNoDuplicate"](256),i._activeParticleSystems=new a["SmartArray"](256),i._activeSkeletons=new a["SmartArrayNoDuplicate"](32),i._softwareSkinnedMeshes=new a["SmartArrayNoDuplicate"](32),i._activeAnimatables=new Array,i._transformMatrix=l["Matrix"].Zero(),i.requireLightSorting=!1,i._components=[],i._serializableComponents=[],i._transientComponents=[],i._beforeCameraUpdateStage=S["Stage"].Create(),i._beforeClearStage=S["Stage"].Create(),i._gatherRenderTargetsStage=S["Stage"].Create(),i._gatherActiveCameraRenderTargetsStage=S["Stage"].Create(),i._isReadyForMeshStage=S["Stage"].Create(),i._beforeEvaluateActiveMeshStage=S["Stage"].Create(),i._evaluateSubMeshStage=S["Stage"].Create(),i._preActiveMeshStage=S["Stage"].Create(),i._cameraDrawRenderTargetStage=S["Stage"].Create(),i._beforeCameraDrawStage=S["Stage"].Create(),i._beforeRenderTargetDrawStage=S["Stage"].Create(),i._beforeRenderingGroupDrawStage=S["Stage"].Create(),i._beforeRenderingMeshStage=S["Stage"].Create(),i._afterRenderingMeshStage=S["Stage"].Create(),i._afterRenderingGroupDrawStage=S["Stage"].Create(),i._afterCameraDrawStage=S["Stage"].Create(),i._afterRenderTargetDrawStage=S["Stage"].Create(),i._afterRenderStage=S["Stage"].Create(),i._pointerMoveStage=S["Stage"].Create(),i._pointerDownStage=S["Stage"].Create(),i._pointerUpStage=S["Stage"].Create(),i.geometriesByUniqueId=null,i._defaultMeshCandidates={data:[],length:0},i._defaultSubMeshCandidates={data:[],length:0},i._preventFreeActiveMeshesAndRenderingGroups=!1,i._activeMeshesFrozen=!1,i._skipEvaluateActiveMeshesCompletely=!1,i._allowPostProcessClearColor=!0,i.getDeterministicFrameTime=function(){return i._engine.getTimeStep()},i._blockMaterialDirtyMechanism=!1;var o=Object(n["__assign"])({useGeometryUniqueIdsMap:!0,useMaterialMeshMap:!0,useClonedMeshMap:!0,virtual:!1},r);return i._engine=t||P["EngineStore"].LastCreatedEngine,o.virtual||(P["EngineStore"]._LastCreatedScene=i,i._engine.scenes.push(i)),i._uid=null,i._renderingManager=new T["RenderingManager"](i),M["PostProcessManager"]&&(i.postProcessManager=new M["PostProcessManager"](i)),C["DomManagement"].IsWindowObjectExist()&&i.attachControl(),i._createUbo(),m["ImageProcessingConfiguration"]&&(i._imageProcessingConfiguration=new m["ImageProcessingConfiguration"]),i.setDefaultCandidateProviders(),o.useGeometryUniqueIdsMap&&(i.geometriesByUniqueId={}),i.useMaterialMeshMap=o.useMaterialMeshMap,i.useClonedMeshMap=o.useClonedMeshMap,r&&r.virtual||i._engine.onNewSceneAddedObservable.notifyObservers(i),i}return Object(n["__extends"])(Scene,e),Scene.DefaultMaterialFactory=function(e){throw A["_DevTools"].WarnImport("StandardMaterial")},Scene.CollisionCoordinatorFactory=function(){throw A["_DevTools"].WarnImport("DefaultCollisionCoordinator")},Object.defineProperty(Scene.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(e){this._environmentTexture!==e&&(this._environmentTexture=e,this.markAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"environmentIntensity",{get:function(){return this._environmentIntensity},set:function(e){this._environmentIntensity!==e&&(this._environmentIntensity=e,this.markAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"forceWireframe",{get:function(){return this._forceWireframe},set:function(e){this._forceWireframe!==e&&(this._forceWireframe=e,this.markAllMaterialsAsDirty(16))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"skipFrustumClipping",{get:function(){return this._skipFrustumClipping},set:function(e){this._skipFrustumClipping!==e&&(this._skipFrustumClipping=e)},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"forcePointsCloud",{get:function(){return this._forcePointsCloud},set:function(e){this._forcePointsCloud!==e&&(this._forcePointsCloud=e,this.markAllMaterialsAsDirty(16))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"beforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),e&&(this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"afterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),e&&(this._onAfterRenderObserver=this.onAfterRenderObservable.add(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"beforeCameraRender",{set:function(e){this._onBeforeCameraRenderObserver&&this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=this.onBeforeCameraRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"afterCameraRender",{set:function(e){this._onAfterCameraRenderObserver&&this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=this.onAfterCameraRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"unTranslatedPointer",{get:function(){return this._inputManager.unTranslatedPointer},enumerable:!1,configurable:!0}),Object.defineProperty(Scene,"DragMovementThreshold",{get:function(){return j["InputManager"].DragMovementThreshold},set:function(e){j["InputManager"].DragMovementThreshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene,"LongPressDelay",{get:function(){return j["InputManager"].LongPressDelay},set:function(e){j["InputManager"].LongPressDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene,"DoubleClickDelay",{get:function(){return j["InputManager"].DoubleClickDelay},set:function(e){j["InputManager"].DoubleClickDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene,"ExclusiveDoubleClickMode",{get:function(){return j["InputManager"].ExclusiveDoubleClickMode},set:function(e){j["InputManager"].ExclusiveDoubleClickMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"useRightHandedSystem",{get:function(){return this._useRightHandedSystem},set:function(e){this._useRightHandedSystem!==e&&(this._useRightHandedSystem=e,this.markAllMaterialsAsDirty(16))},enumerable:!1,configurable:!0}),Scene.prototype.setStepId=function(e){this._currentStepId=e},Scene.prototype.getStepId=function(){return this._currentStepId},Scene.prototype.getInternalStep=function(){return this._currentInternalStep},Object.defineProperty(Scene.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(e){this._fogEnabled!==e&&(this._fogEnabled=e,this.markAllMaterialsAsDirty(16))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"fogMode",{get:function(){return this._fogMode},set:function(e){this._fogMode!==e&&(this._fogMode=e,this.markAllMaterialsAsDirty(16))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"shadowsEnabled",{get:function(){return this._shadowsEnabled},set:function(e){this._shadowsEnabled!==e&&(this._shadowsEnabled=e,this.markAllMaterialsAsDirty(2))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"lightsEnabled",{get:function(){return this._lightsEnabled},set:function(e){this._lightsEnabled!==e&&(this._lightsEnabled=e,this.markAllMaterialsAsDirty(2))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"activeCamera",{get:function(){return this._activeCamera},set:function(e){e!==this._activeCamera&&(this._activeCamera=e,this.onActiveCameraChanged.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"defaultMaterial",{get:function(){return this._defaultMaterial||(this._defaultMaterial=Scene.DefaultMaterialFactory(this)),this._defaultMaterial},set:function(e){this._defaultMaterial=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"texturesEnabled",{get:function(){return this._texturesEnabled},set:function(e){this._texturesEnabled!==e&&(this._texturesEnabled=e,this.markAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"skeletonsEnabled",{get:function(){return this._skeletonsEnabled},set:function(e){this._skeletonsEnabled!==e&&(this._skeletonsEnabled=e,this.markAllMaterialsAsDirty(8))},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"collisionCoordinator",{get:function(){return this._collisionCoordinator||(this._collisionCoordinator=Scene.CollisionCoordinatorFactory(),this._collisionCoordinator.init(this)),this._collisionCoordinator},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"frustumPlanes",{get:function(){return this._frustumPlanes},enumerable:!1,configurable:!0}),Scene.prototype._registerTransientComponents=function(){if(this._transientComponents.length>0){for(var e=0,t=this._transientComponents;e<t.length;e++){var r=t[e];r.register()}this._transientComponents=[]}},Scene.prototype._addComponent=function(e){this._components.push(e),this._transientComponents.push(e);var t=e;t.addFromContainer&&t.serialize&&this._serializableComponents.push(t)},Scene.prototype._getComponent=function(e){for(var t=0,r=this._components;t<r.length;t++){var n=r[t];if(n.name===e)return n}return null},Scene.prototype.getClassName=function(){return"Scene"},Scene.prototype._getDefaultMeshCandidates=function(){return this._defaultMeshCandidates.data=this.meshes,this._defaultMeshCandidates.length=this.meshes.length,this._defaultMeshCandidates},Scene.prototype._getDefaultSubMeshCandidates=function(e){return this._defaultSubMeshCandidates.data=e.subMeshes,this._defaultSubMeshCandidates.length=e.subMeshes.length,this._defaultSubMeshCandidates},Scene.prototype.setDefaultCandidateProviders=function(){this.getActiveMeshCandidates=this._getDefaultMeshCandidates.bind(this),this.getActiveSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getIntersectingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getCollidingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this)},Object.defineProperty(Scene.prototype,"meshUnderPointer",{get:function(){return this._inputManager.meshUnderPointer},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"pointerX",{get:function(){return this._inputManager.pointerX},set:function(e){this._inputManager.pointerX=e},enumerable:!1,configurable:!0}),Object.defineProperty(Scene.prototype,"pointerY",{get:function(){return this._inputManager.pointerY},set:function(e){this._inputManager.pointerY=e},enumerable:!1,configurable:!0}),Scene.prototype.getCachedMaterial=function(){return this._cachedMaterial},Scene.prototype.getCachedEffect=function(){return this._cachedEffect},Scene.prototype.getCachedVisibility=function(){return this._cachedVisibility},Scene.prototype.isCachedMaterialInvalid=function(e,t,r){return void 0===r&&(r=1),this._cachedEffect!==t||this._cachedMaterial!==e||this._cachedVisibility!==r},Scene.prototype.getEngine=function(){return this._engine},Scene.prototype.getTotalVertices=function(){return this._totalVertices.current},Object.defineProperty(Scene.prototype,"totalVerticesPerfCounter",{get:function(){return this._totalVertices},enumerable:!1,configurable:!0}),Scene.prototype.getActiveIndices=function(){return this._activeIndices.current},Object.defineProperty(Scene.prototype,"totalActiveIndicesPerfCounter",{get:function(){return this._activeIndices},enumerable:!1,configurable:!0}),Scene.prototype.getActiveParticles=function(){return this._activeParticles.current},Object.defineProperty(Scene.prototype,"activeParticlesPerfCounter",{get:function(){return this._activeParticles},enumerable:!1,configurable:!0}),Scene.prototype.getActiveBones=function(){return this._activeBones.current},Object.defineProperty(Scene.prototype,"activeBonesPerfCounter",{get:function(){return this._activeBones},enumerable:!1,configurable:!0}),Scene.prototype.getActiveMeshes=function(){return this._activeMeshes},Scene.prototype.getAnimationRatio=function(){return void 0!==this._animationRatio?this._animationRatio:1},Scene.prototype.getRenderId=function(){return this._renderId},Scene.prototype.getFrameId=function(){return this._frameId},Scene.prototype.incrementRenderId=function(){this._renderId++},Scene.prototype._createUbo=function(){this._sceneUbo=new _["UniformBuffer"](this._engine,void 0,!0),this._sceneUbo.addUniform("viewProjection",16),this._sceneUbo.addUniform("view",16)},Scene.prototype.simulatePointerMove=function(e,t){return this._inputManager.simulatePointerMove(e,t),this},Scene.prototype.simulatePointerDown=function(e,t){return this._inputManager.simulatePointerDown(e,t),this},Scene.prototype.simulatePointerUp=function(e,t,r){return this._inputManager.simulatePointerUp(e,t,r),this},Scene.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._inputManager.isPointerCaptured(e)},Scene.prototype.attachControl=function(e,t,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),this._inputManager.attachControl(e,t,r)},Scene.prototype.detachControl=function(){this._inputManager.detachControl()},Scene.prototype.isReady=function(){if(this._isDisposed)return!1;var e,t=this.getEngine();if(!t.areAllEffectsReady())return!1;if(this._pendingData.length>0)return!1;for(e=0;e<this.meshes.length;e++){var r=this.meshes[e];if(r.isEnabled()&&(r.subMeshes&&0!==r.subMeshes.length)){if(!r.isReady(!0))return!1;for(var n=r.hasThinInstances||"InstancedMesh"===r.getClassName()||"InstancedLinesMesh"===r.getClassName()||t.getCaps().instancedArrays&&r.instances.length>0,i=0,o=this._isReadyForMeshStage;i<o.length;i++){var s=o[i];if(!s.action(r,n))return!1}}}for(e=0;e<this.geometries.length;e++){var a=this.geometries[e];if(2===a.delayLoadState)return!1}if(this.activeCameras&&this.activeCameras.length>0)for(var u=0,c=this.activeCameras;u<c.length;u++){var l=c[u];if(!l.isReady(!0))return!1}else if(this.activeCamera&&!this.activeCamera.isReady(!0))return!1;for(var d=0,h=this.particleSystems;d<h.length;d++){var f=h[d];if(!f.isReady())return!1}return!0},Scene.prototype.resetCachedMaterial=function(){this._cachedMaterial=null,this._cachedEffect=null,this._cachedVisibility=null},Scene.prototype.registerBeforeRender=function(e){this.onBeforeRenderObservable.add(e)},Scene.prototype.unregisterBeforeRender=function(e){this.onBeforeRenderObservable.removeCallback(e)},Scene.prototype.registerAfterRender=function(e){this.onAfterRenderObservable.add(e)},Scene.prototype.unregisterAfterRender=function(e){this.onAfterRenderObservable.removeCallback(e)},Scene.prototype._executeOnceBeforeRender=function(e){var t=this,execFunc=function(){e(),setTimeout((function(){t.unregisterBeforeRender(execFunc)}))};this.registerBeforeRender(execFunc)},Scene.prototype.executeOnceBeforeRender=function(e,t){var r=this;void 0!==t?setTimeout((function(){r._executeOnceBeforeRender(e)}),t):this._executeOnceBeforeRender(e)},Scene.prototype._addPendingData=function(e){this._pendingData.push(e)},Scene.prototype._removePendingData=function(e){var t=this.isLoading,r=this._pendingData.indexOf(e);-1!==r&&this._pendingData.splice(r,1),t&&!this.isLoading&&this.onDataLoadedObservable.notifyObservers(this)},Scene.prototype.getWaitingItemsCount=function(){return this._pendingData.length},Object.defineProperty(Scene.prototype,"isLoading",{get:function(){return this._pendingData.length>0},enumerable:!1,configurable:!0}),Scene.prototype.executeWhenReady=function(e){var t=this;this.onReadyObservable.add(e),-1===this._executeWhenReadyTimeoutId&&(this._executeWhenReadyTimeoutId=setTimeout((function(){t._checkIsReady()}),150))},Scene.prototype.whenReadyAsync=function(){var e=this;return new Promise((function(t){e.executeWhenReady((function(){t()}))}))},Scene.prototype._checkIsReady=function(){var e=this;return this._registerTransientComponents(),this.isReady()?(this.onReadyObservable.notifyObservers(this),this.onReadyObservable.clear(),void(this._executeWhenReadyTimeoutId=-1)):this._isDisposed?(this.onReadyObservable.clear(),void(this._executeWhenReadyTimeoutId=-1)):void(this._executeWhenReadyTimeoutId=setTimeout((function(){e._checkIsReady()}),150))},Object.defineProperty(Scene.prototype,"animatables",{get:function(){return this._activeAnimatables},enumerable:!1,configurable:!0}),Scene.prototype.resetLastAnimationTimeFrame=function(){this._animationTimeLast=o["PrecisionDate"].Now},Scene.prototype.getViewMatrix=function(){return this._viewMatrix},Scene.prototype.getProjectionMatrix=function(){return this._projectionMatrix},Scene.prototype.getTransformMatrix=function(){return this._transformMatrix},Scene.prototype.setTransformMatrix=function(e,t,r,n){this._viewUpdateFlag===e.updateFlag&&this._projectionUpdateFlag===t.updateFlag||(this._viewUpdateFlag=e.updateFlag,this._projectionUpdateFlag=t.updateFlag,this._viewMatrix=e,this._projectionMatrix=t,this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._frustumPlanes?I["Frustum"].GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=I["Frustum"].GetPlanes(this._transformMatrix),this._multiviewSceneUbo&&this._multiviewSceneUbo.useUbo?this._updateMultiviewUbo(r,n):this._sceneUbo.useUbo&&(this._sceneUbo.updateMatrix("viewProjection",this._transformMatrix),this._sceneUbo.updateMatrix("view",this._viewMatrix),this._sceneUbo.update()))},Scene.prototype.getSceneUniformBuffer=function(){return this._multiviewSceneUbo?this._multiviewSceneUbo:this._sceneUbo},Scene.prototype.getUniqueId=function(){return w["UniqueIdGenerator"].UniqueId},Scene.prototype.addMesh=function(e,t){var r=this;void 0===t&&(t=!1),this._blockEntityCollection||(this.meshes.push(e),e._resyncLightSources(),e.parent||e._addToSceneRootNodes(),this.onNewMeshAddedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach((function(e){r.addMesh(e)})))},Scene.prototype.removeMesh=function(e,t){var r=this;void 0===t&&(t=!1);var n=this.meshes.indexOf(e);return-1!==n&&(this.meshes[n]=this.meshes[this.meshes.length-1],this.meshes.pop(),e.parent||e._removeFromSceneRootNodes()),this.onMeshRemovedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach((function(e){r.removeMesh(e)})),n},Scene.prototype.addTransformNode=function(e){this._blockEntityCollection||(e._indexInSceneTransformNodesArray=this.transformNodes.length,this.transformNodes.push(e),e.parent||e._addToSceneRootNodes(),this.onNewTransformNodeAddedObservable.notifyObservers(e))},Scene.prototype.removeTransformNode=function(e){var t=e._indexInSceneTransformNodesArray;if(-1!==t){if(t!==this.transformNodes.length-1){var r=this.transformNodes[this.transformNodes.length-1];this.transformNodes[t]=r,r._indexInSceneTransformNodesArray=t}e._indexInSceneTransformNodesArray=-1,this.transformNodes.pop(),e.parent||e._removeFromSceneRootNodes()}return this.onTransformNodeRemovedObservable.notifyObservers(e),t},Scene.prototype.removeSkeleton=function(e){var t=this.skeletons.indexOf(e);return-1!==t&&(this.skeletons.splice(t,1),this.onSkeletonRemovedObservable.notifyObservers(e)),t},Scene.prototype.removeMorphTargetManager=function(e){var t=this.morphTargetManagers.indexOf(e);return-1!==t&&this.morphTargetManagers.splice(t,1),t},Scene.prototype.removeLight=function(e){var t=this.lights.indexOf(e);if(-1!==t){for(var r=0,n=this.meshes;r<n.length;r++){var i=n[r];i._removeLightSource(e,!1)}this.lights.splice(t,1),this.sortLightsByPriority(),e.parent||e._removeFromSceneRootNodes()}return this.onLightRemovedObservable.notifyObservers(e),t},Scene.prototype.removeCamera=function(e){var t=this.cameras.indexOf(e);if(-1!==t&&(this.cameras.splice(t,1),e.parent||e._removeFromSceneRootNodes()),this.activeCameras){var r=this.activeCameras.indexOf(e);-1!==r&&this.activeCameras.splice(r,1)}return this.activeCamera===e&&(this.cameras.length>0?this.activeCamera=this.cameras[0]:this.activeCamera=null),this.onCameraRemovedObservable.notifyObservers(e),t},Scene.prototype.removeParticleSystem=function(e){var t=this.particleSystems.indexOf(e);return-1!==t&&this.particleSystems.splice(t,1),t},Scene.prototype.removeAnimation=function(e){var t=this.animations.indexOf(e);return-1!==t&&this.animations.splice(t,1),t},Scene.prototype.stopAnimation=function(e,t,r){},Scene.prototype.removeAnimationGroup=function(e){var t=this.animationGroups.indexOf(e);return-1!==t&&this.animationGroups.splice(t,1),t},Scene.prototype.removeMultiMaterial=function(e){var t=this.multiMaterials.indexOf(e);return-1!==t&&this.multiMaterials.splice(t,1),this.onMultiMaterialRemovedObservable.notifyObservers(e),t},Scene.prototype.removeMaterial=function(e){var t=e._indexInSceneMaterialArray;if(-1!==t&&t<this.materials.length){if(t!==this.materials.length-1){var r=this.materials[this.materials.length-1];this.materials[t]=r,r._indexInSceneMaterialArray=t}e._indexInSceneMaterialArray=-1,this.materials.pop()}return this.onMaterialRemovedObservable.notifyObservers(e),t},Scene.prototype.removeActionManager=function(e){var t=this.actionManagers.indexOf(e);return-1!==t&&this.actionManagers.splice(t,1),t},Scene.prototype.removeTexture=function(e){var t=this.textures.indexOf(e);return-1!==t&&this.textures.splice(t,1),this.onTextureRemovedObservable.notifyObservers(e),t},Scene.prototype.addLight=function(e){if(!this._blockEntityCollection){this.lights.push(e),this.sortLightsByPriority(),e.parent||e._addToSceneRootNodes();for(var t=0,r=this.meshes;t<r.length;t++){var n=r[t];-1===n.lightSources.indexOf(e)&&(n.lightSources.push(e),n._resyncLightSources())}this.onNewLightAddedObservable.notifyObservers(e)}},Scene.prototype.sortLightsByPriority=function(){this.requireLightSorting&&this.lights.sort(g["Light"].CompareLightsPriority)},Scene.prototype.addCamera=function(e){this._blockEntityCollection||(this.cameras.push(e),this.onNewCameraAddedObservable.notifyObservers(e),e.parent||e._addToSceneRootNodes())},Scene.prototype.addSkeleton=function(e){this._blockEntityCollection||(this.skeletons.push(e),this.onNewSkeletonAddedObservable.notifyObservers(e))},Scene.prototype.addParticleSystem=function(e){this._blockEntityCollection||this.particleSystems.push(e)},Scene.prototype.addAnimation=function(e){this._blockEntityCollection||this.animations.push(e)},Scene.prototype.addAnimationGroup=function(e){this._blockEntityCollection||this.animationGroups.push(e)},Scene.prototype.addMultiMaterial=function(e){this._blockEntityCollection||(this.multiMaterials.push(e),this.onNewMultiMaterialAddedObservable.notifyObservers(e))},Scene.prototype.addMaterial=function(e){this._blockEntityCollection||(e._indexInSceneMaterialArray=this.materials.length,this.materials.push(e),this.onNewMaterialAddedObservable.notifyObservers(e))},Scene.prototype.addMorphTargetManager=function(e){this._blockEntityCollection||this.morphTargetManagers.push(e)},Scene.prototype.addGeometry=function(e){this._blockEntityCollection||(this.geometriesByUniqueId&&(this.geometriesByUniqueId[e.uniqueId]=this.geometries.length),this.geometries.push(e))},Scene.prototype.addActionManager=function(e){this.actionManagers.push(e)},Scene.prototype.addTexture=function(e){this._blockEntityCollection||(this.textures.push(e),this.onNewTextureAddedObservable.notifyObservers(e))},Scene.prototype.switchActiveCamera=function(e,t){void 0===t&&(t=!0);var r=this._engine.getInputElement();r&&(this.activeCamera&&this.activeCamera.detachControl(),this.activeCamera=e,t&&e.attachControl())},Scene.prototype.setActiveCameraByID=function(e){var t=this.getCameraByID(e);return t?(this.activeCamera=t,t):null},Scene.prototype.setActiveCameraByName=function(e){var t=this.getCameraByName(e);return t?(this.activeCamera=t,t):null},Scene.prototype.getAnimationGroupByName=function(e){for(var t=0;t<this.animationGroups.length;t++)if(this.animationGroups[t].name===e)return this.animationGroups[t];return null},Scene.prototype.getMaterialByUniqueID=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].uniqueId===e)return this.materials[t];return null},Scene.prototype.getMaterialByID=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].id===e)return this.materials[t];return null},Scene.prototype.getLastMaterialByID=function(e){for(var t=this.materials.length-1;t>=0;t--)if(this.materials[t].id===e)return this.materials[t];return null},Scene.prototype.getMaterialByName=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].name===e)return this.materials[t];return null},Scene.prototype.getTextureByUniqueID=function(e){for(var t=0;t<this.textures.length;t++)if(this.textures[t].uniqueId===e)return this.textures[t];return null},Scene.prototype.getCameraByID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].id===e)return this.cameras[t];return null},Scene.prototype.getCameraByUniqueID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].uniqueId===e)return this.cameras[t];return null},Scene.prototype.getCameraByName=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].name===e)return this.cameras[t];return null},Scene.prototype.getBoneByID=function(e){for(var t=0;t<this.skeletons.length;t++)for(var r=this.skeletons[t],n=0;n<r.bones.length;n++)if(r.bones[n].id===e)return r.bones[n];return null},Scene.prototype.getBoneByName=function(e){for(var t=0;t<this.skeletons.length;t++)for(var r=this.skeletons[t],n=0;n<r.bones.length;n++)if(r.bones[n].name===e)return r.bones[n];return null},Scene.prototype.getLightByName=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].name===e)return this.lights[t];return null},Scene.prototype.getLightByID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].id===e)return this.lights[t];return null},Scene.prototype.getLightByUniqueID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].uniqueId===e)return this.lights[t];return null},Scene.prototype.getParticleSystemByID=function(e){for(var t=0;t<this.particleSystems.length;t++)if(this.particleSystems[t].id===e)return this.particleSystems[t];return null},Scene.prototype.getGeometryByID=function(e){for(var t=0;t<this.geometries.length;t++)if(this.geometries[t].id===e)return this.geometries[t];return null},Scene.prototype._getGeometryByUniqueID=function(e){if(this.geometriesByUniqueId){var t=this.geometriesByUniqueId[e];if(void 0!==t)return this.geometries[t]}else for(var r=0;r<this.geometries.length;r++)if(this.geometries[r].uniqueId===e)return this.geometries[r];return null},Scene.prototype.pushGeometry=function(e,t){return!(!t&&this._getGeometryByUniqueID(e.uniqueId))&&(this.addGeometry(e),this.onNewGeometryAddedObservable.notifyObservers(e),!0)},Scene.prototype.removeGeometry=function(e){var t;if(this.geometriesByUniqueId){if(t=this.geometriesByUniqueId[e.uniqueId],void 0===t)return!1}else if(t=this.geometries.indexOf(e),t<0)return!1;if(t!==this.geometries.length-1){var r=this.geometries[this.geometries.length-1];r&&(this.geometries[t]=r,this.geometriesByUniqueId&&(this.geometriesByUniqueId[r.uniqueId]=t,this.geometriesByUniqueId[e.uniqueId]=void 0))}return this.geometries.pop(),this.onGeometryRemovedObservable.notifyObservers(e),!0},Scene.prototype.getGeometries=function(){return this.geometries},Scene.prototype.getMeshByID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].id===e)return this.meshes[t];return null},Scene.prototype.getMeshesByID=function(e){return this.meshes.filter((function(t){return t.id===e}))},Scene.prototype.getTransformNodeByID=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].id===e)return this.transformNodes[t];return null},Scene.prototype.getTransformNodeByUniqueID=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].uniqueId===e)return this.transformNodes[t];return null},Scene.prototype.getTransformNodesByID=function(e){return this.transformNodes.filter((function(t){return t.id===e}))},Scene.prototype.getMeshByUniqueID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].uniqueId===e)return this.meshes[t];return null},Scene.prototype.getLastMeshByID=function(e){for(var t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];return null},Scene.prototype.getLastEntryByID=function(e){var t;for(t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];for(t=this.transformNodes.length-1;t>=0;t--)if(this.transformNodes[t].id===e)return this.transformNodes[t];for(t=this.cameras.length-1;t>=0;t--)if(this.cameras[t].id===e)return this.cameras[t];for(t=this.lights.length-1;t>=0;t--)if(this.lights[t].id===e)return this.lights[t];return null},Scene.prototype.getNodeByID=function(e){var t=this.getMeshByID(e);if(t)return t;var r=this.getTransformNodeByID(e);if(r)return r;var n=this.getLightByID(e);if(n)return n;var i=this.getCameraByID(e);if(i)return i;var o=this.getBoneByID(e);return o||null},Scene.prototype.getNodeByName=function(e){var t=this.getMeshByName(e);if(t)return t;var r=this.getTransformNodeByName(e);if(r)return r;var n=this.getLightByName(e);if(n)return n;var i=this.getCameraByName(e);if(i)return i;var o=this.getBoneByName(e);return o||null},Scene.prototype.getMeshByName=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].name===e)return this.meshes[t];return null},Scene.prototype.getTransformNodeByName=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].name===e)return this.transformNodes[t];return null},Scene.prototype.getLastSkeletonByID=function(e){for(var t=this.skeletons.length-1;t>=0;t--)if(this.skeletons[t].id===e)return this.skeletons[t];return null},Scene.prototype.getSkeletonByUniqueId=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].uniqueId===e)return this.skeletons[t];return null},Scene.prototype.getSkeletonById=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].id===e)return this.skeletons[t];return null},Scene.prototype.getSkeletonByName=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].name===e)return this.skeletons[t];return null},Scene.prototype.getMorphTargetManagerById=function(e){for(var t=0;t<this.morphTargetManagers.length;t++)if(this.morphTargetManagers[t].uniqueId===e)return this.morphTargetManagers[t];return null},Scene.prototype.getMorphTargetById=function(e){for(var t=0;t<this.morphTargetManagers.length;++t)for(var r=this.morphTargetManagers[t],n=0;n<r.numTargets;++n){var i=r.getTarget(n);if(i.id===e)return i}return null},Scene.prototype.getMorphTargetByName=function(e){for(var t=0;t<this.morphTargetManagers.length;++t)for(var r=this.morphTargetManagers[t],n=0;n<r.numTargets;++n){var i=r.getTarget(n);if(i.name===e)return i}return null},Scene.prototype.getPostProcessByName=function(e){for(var t=0;t<this.postProcesses.length;++t){var r=this.postProcesses[t];if(r.name===e)return r}return null},Scene.prototype.isActiveMesh=function(e){return-1!==this._activeMeshes.indexOf(e)},Object.defineProperty(Scene.prototype,"uid",{get:function(){return this._uid||(this._uid=i["Tools"].RandomId()),this._uid},enumerable:!1,configurable:!0}),Scene.prototype.addExternalData=function(e,t){return this._externalData||(this._externalData=new u["StringDictionary"]),this._externalData.add(e,t)},Scene.prototype.getExternalData=function(e){return this._externalData?this._externalData.get(e):null},Scene.prototype.getOrAddExternalDataWithFactory=function(e,t){return this._externalData||(this._externalData=new u["StringDictionary"]),this._externalData.getOrAddWithFactory(e,t)},Scene.prototype.removeExternalData=function(e){return this._externalData.remove(e)},Scene.prototype._evaluateSubMesh=function(e,t,r){if(r.hasInstances||r.isAnInstance||this.dispatchAllSubMeshesOfActiveMeshes||this._skipFrustumClipping||t.alwaysSelectAsActiveMesh||1===t.subMeshes.length||e.isInFrustum(this._frustumPlanes)){for(var n=0,i=this._evaluateSubMeshStage;n<i.length;n++){var o=i[n];o.action(t,e)}var s=e.getMaterial();null!==s&&void 0!==s&&(s.hasRenderTargetTextures&&null!=s.getRenderTargetTextures&&-1===this._processedMaterials.indexOf(s)&&(this._processedMaterials.push(s),this._renderTargets.concatWithNoDuplicate(s.getRenderTargetTextures())),this._renderingManager.dispatch(e,t,s))}},Scene.prototype.freeProcessedMaterials=function(){this._processedMaterials.dispose()},Object.defineProperty(Scene.prototype,"blockfreeActiveMeshesAndRenderingGroups",{get:function(){return this._preventFreeActiveMeshesAndRenderingGroups},set:function(e){this._preventFreeActiveMeshesAndRenderingGroups!==e&&(e&&(this.freeActiveMeshes(),this.freeRenderingGroups()),this._preventFreeActiveMeshesAndRenderingGroups=e)},enumerable:!1,configurable:!0}),Scene.prototype.freeActiveMeshes=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._activeMeshes.dispose(),this.activeCamera&&this.activeCamera._activeMeshes&&this.activeCamera._activeMeshes.dispose(),this.activeCameras))for(var e=0;e<this.activeCameras.length;e++){var t=this.activeCameras[e];t&&t._activeMeshes&&t._activeMeshes.dispose()}},Scene.prototype.freeRenderingGroups=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._renderingManager&&this._renderingManager.freeRenderingGroups(),this.textures))for(var e=0;e<this.textures.length;e++){var t=this.textures[e];t&&t.renderList&&t.freeRenderingGroups()}},Scene.prototype._isInIntermediateRendering=function(){return this._intermediateRendering},Scene.prototype.freezeActiveMeshes=function(e,t,r){var n=this;return void 0===e&&(e=!1),this.executeWhenReady((function(){if(n.activeCamera){n._frustumPlanes||n.setTransformMatrix(n.activeCamera.getViewMatrix(),n.activeCamera.getProjectionMatrix()),n._evaluateActiveMeshes(),n._activeMeshesFrozen=!0,n._skipEvaluateActiveMeshesCompletely=e;for(var i=0;i<n._activeMeshes.length;i++)n._activeMeshes.data[i]._freeze();t&&t()}else r&&r("No active camera found")})),this},Scene.prototype.unfreezeActiveMeshes=function(){for(var e=0;e<this.meshes.length;e++){var t=this.meshes[e];t._internalAbstractMeshDataInfo&&(t._internalAbstractMeshDataInfo._isActive=!1)}for(e=0;e<this._activeMeshes.length;e++)this._activeMeshes.data[e]._unFreeze();return this._activeMeshesFrozen=!1,this},Scene.prototype._evaluateActiveMeshes=function(){if(this._activeMeshesFrozen&&this._activeMeshes.length){if(!this._skipEvaluateActiveMeshesCompletely)for(var e=this._activeMeshes.length,t=0;t<e;t++){var r=this._activeMeshes.data[t];r.computeWorldMatrix()}if(this._activeParticleSystems){var n=this._activeParticleSystems.length;for(t=0;t<n;t++)this._activeParticleSystems.data[t].animate()}}else if(this.activeCamera){this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this),this.activeCamera._activeMeshes.reset(),this._activeMeshes.reset(),this._renderingManager.reset(),this._processedMaterials.reset(),this._activeParticleSystems.reset(),this._activeSkeletons.reset(),this._softwareSkinnedMeshes.reset();for(var i=0,o=this._beforeEvaluateActiveMeshStage;i<o.length;i++){var s=o[i];s.action()}var a=this.getActiveMeshCandidates(),u=a.length;for(t=0;t<u;t++){r=a.data[t];if(r._internalAbstractMeshDataInfo._currentLODIsUpToDate=!1,!r.isBlocked&&(this._totalVertices.addCount(r.getTotalVertices(),!1),r.isReady()&&r.isEnabled()&&0!==r.scaling.lengthSquared())){r.computeWorldMatrix(),r.actionManager&&r.actionManager.hasSpecificTriggers2(12,13)&&this._meshesForIntersections.pushNoDuplicate(r);var c=this.customLODSelector?this.customLODSelector(r,this.activeCamera):r.getLOD(this.activeCamera);if(r._internalAbstractMeshDataInfo._currentLOD=c,r._internalAbstractMeshDataInfo._currentLODIsUpToDate=!0,void 0!==c&&null!==c&&(c!==r&&c.billboardMode!==d["TransformNode"].BILLBOARDMODE_NONE&&c.computeWorldMatrix(),r._preActivate(),r.isVisible&&r.visibility>0&&0!==(r.layerMask&this.activeCamera.layerMask)&&(this._skipFrustumClipping||r.alwaysSelectAsActiveMesh||r.isInFrustum(this._frustumPlanes)))){this._activeMeshes.push(r),this.activeCamera._activeMeshes.push(r),c!==r&&c._activate(this._renderId,!1);for(var l=0,h=this._preActiveMeshStage;l<h.length;l++){s=h[l];s.action(r)}r._activate(this._renderId,!1)&&(r.isAnInstance?r._internalAbstractMeshDataInfo._actAsRegularMesh&&(c=r):c._internalAbstractMeshDataInfo._onlyForInstances=!1,c._internalAbstractMeshDataInfo._isActive=!0,this._activeMesh(r,c)),r._postActivate()}}}if(this.onAfterActiveMeshesEvaluationObservable.notifyObservers(this),this.particlesEnabled){this.onBeforeParticlesRenderingObservable.notifyObservers(this);for(var f=0;f<this.particleSystems.length;f++){var p=this.particleSystems[f];if(p.isStarted()&&p.emitter){var m=p.emitter;m.position&&!m.isEnabled()||(this._activeParticleSystems.push(p),p.animate(),this._renderingManager.dispatchParticles(p))}}this.onAfterParticlesRenderingObservable.notifyObservers(this)}}},Scene.prototype._activeMesh=function(e,t){if(this._skeletonsEnabled&&null!==t.skeleton&&void 0!==t.skeleton&&(this._activeSkeletons.pushNoDuplicate(t.skeleton)&&t.skeleton.prepare(),t.computeBonesUsingShaders||this._softwareSkinnedMeshes.pushNoDuplicate(t)),void 0!==t&&null!==t&&void 0!==t.subMeshes&&null!==t.subMeshes&&t.subMeshes.length>0)for(var r=this.getActiveSubMeshCandidates(t),n=r.length,i=0;i<n;i++){var o=r.data[i];this._evaluateSubMesh(o,t,e)}},Scene.prototype.updateTransformMatrix=function(e){this.activeCamera&&this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(e))},Scene.prototype._bindFrameBuffer=function(){if(this.activeCamera&&this.activeCamera._multiviewTexture)this.activeCamera._multiviewTexture._bindFrameBuffer();else if(this.activeCamera&&this.activeCamera.outputRenderTarget){var e=this.getEngine().getCaps().multiview&&this.activeCamera.outputRenderTarget&&this.activeCamera.outputRenderTarget.getViewCount()>1;if(e)this.activeCamera.outputRenderTarget._bindFrameBuffer();else{var t=this.activeCamera.outputRenderTarget.getInternalTexture();t?this.getEngine().bindFramebuffer(t):E["Logger"].Error("Camera contains invalid customDefaultRenderTarget")}}else this.getEngine().restoreDefaultFramebuffer()},Scene.prototype._renderForCamera=function(e,t){if(!e||!e._skipRendering){var r=this._engine;if(this._activeCamera=e,!this.activeCamera)throw new Error("Active camera not set");r.setViewport(this.activeCamera.viewport),this.resetCachedMaterial(),this._renderId++;var n=this.getEngine().getCaps().multiview&&e.outputRenderTarget&&e.outputRenderTarget.getViewCount()>1;n?this.setTransformMatrix(e._rigCameras[0].getViewMatrix(),e._rigCameras[0].getProjectionMatrix(),e._rigCameras[1].getViewMatrix(),e._rigCameras[1].getProjectionMatrix()):this.updateTransformMatrix(),this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera),this._evaluateActiveMeshes();for(var o=0;o<this._softwareSkinnedMeshes.length;o++){var s=this._softwareSkinnedMeshes.data[o];s.applySkeleton(s.skeleton)}this.onBeforeRenderTargetsRenderObservable.notifyObservers(this),e.customRenderTargets&&e.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(e.customRenderTargets),t&&t.customRenderTargets&&t.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(t.customRenderTargets);for(var a=0,u=this._gatherActiveCameraRenderTargetsStage;a<u.length;a++){var c=u[a];c.action(this._renderTargets)}var l=!1;if(this.renderTargetsEnabled){if(this._intermediateRendering=!0,this._renderTargets.length>0){i["Tools"].StartPerformanceCounter("Render targets",this._renderTargets.length>0);for(var d=0;d<this._renderTargets.length;d++){var h=this._renderTargets.data[d];if(h._shouldRender()){this._renderId++;var f=h.activeCamera&&h.activeCamera!==this.activeCamera;h.render(f,this.dumpNextRenderTargets),l=!0}}i["Tools"].EndPerformanceCounter("Render targets",this._renderTargets.length>0),this._renderId++}for(var p=0,m=this._cameraDrawRenderTargetStage;p<m.length;p++){c=m[p];l=c.action(this.activeCamera)||l}this._intermediateRendering=!1,this.activeCamera&&this.activeCamera.outputRenderTarget&&(l=!0)}l&&!this.prePass&&this._bindFrameBuffer(),this.onAfterRenderTargetsRenderObservable.notifyObservers(this),!this.postProcessManager||e._multiviewTexture||this.prePass||this.postProcessManager._prepareFrame();for(var _=0,g=this._beforeCameraDrawStage;_<g.length;_++){c=g[_];c.action(this.activeCamera)}this.onBeforeDrawPhaseObservable.notifyObservers(this),this._renderingManager.render(null,null,!0,!0),this.onAfterDrawPhaseObservable.notifyObservers(this);for(var b=0,v=this._afterCameraDrawStage;b<v.length;b++){c=v[b];c.action(this.activeCamera)}if(this.postProcessManager&&!e._multiviewTexture){var M=e.outputRenderTarget?e.outputRenderTarget.getInternalTexture():void 0;this.postProcessManager._finalizeFrame(e.isIntermediate,M)}this._renderTargets.reset(),this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera)}},Scene.prototype._processSubCameras=function(e){if(e.cameraRigMode===f["Camera"].RIG_MODE_NONE||e.outputRenderTarget&&e.outputRenderTarget.getViewCount()>1&&this.getEngine().getCaps().multiview)return this._renderForCamera(e),void this.onAfterRenderCameraObservable.notifyObservers(e);if(e._useMultiviewToSingleView)this._renderMultiviewToSingleView(e);else for(var t=0;t<e._rigCameras.length;t++)this._renderForCamera(e._rigCameras[t],e);this._activeCamera=e,this.setTransformMatrix(this._activeCamera.getViewMatrix(),this._activeCamera.getProjectionMatrix()),this.onAfterRenderCameraObservable.notifyObservers(e)},Scene.prototype._checkIntersections=function(){for(var e=0;e<this._meshesForIntersections.length;e++){var t=this._meshesForIntersections.data[e];if(t.actionManager)for(var r=0;t.actionManager&&r<t.actionManager.actions.length;r++){var n=t.actionManager.actions[r];if(12===n.trigger||13===n.trigger){var i=n.getTriggerParameter(),o=i instanceof h["AbstractMesh"]?i:i.mesh,s=o.intersectsMesh(t,i.usePreciseIntersection),a=t._intersectionsInProgress.indexOf(o);s&&-1===a?12===n.trigger?(n._executeCurrent(v["ActionEvent"].CreateNew(t,void 0,o)),t._intersectionsInProgress.push(o)):13===n.trigger&&t._intersectionsInProgress.push(o):!s&&a>-1&&(13===n.trigger&&n._executeCurrent(v["ActionEvent"].CreateNew(t,void 0,o)),t.actionManager.hasSpecificTrigger(13,(function(e){var t=e instanceof h["AbstractMesh"]?e:e.mesh;return o===t}))&&13!==n.trigger||t._intersectionsInProgress.splice(a,1))}}}},Scene.prototype._advancePhysicsEngineStep=function(e){},Scene.prototype._animate=function(){},Scene.prototype.animate=function(){if(this._engine.isDeterministicLockStep()){var e=Math.max(Scene.MinDeltaTime,Math.min(this._engine.getDeltaTime(),Scene.MaxDeltaTime))+this._timeAccumulator,t=this._engine.getTimeStep(),r=1e3/t/1e3,n=0,i=this._engine.getLockstepMaxSteps(),o=Math.floor(e/t);o=Math.min(o,i);while(e>0&&n<o)this.onBeforeStepObservable.notifyObservers(this),this._animationRatio=t*r,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this.physicsEnabled&&this._advancePhysicsEngineStep(t),this.onAfterStepObservable.notifyObservers(this),this._currentStepId++,n++,e-=t;this._timeAccumulator=e<0?0:e}else{e=this.useConstantAnimationDeltaTime?16:Math.max(Scene.MinDeltaTime,Math.min(this._engine.getDeltaTime(),Scene.MaxDeltaTime));this._animationRatio=.06*e,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this.physicsEnabled&&this._advancePhysicsEngineStep(e)}},Scene.prototype.render=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!1),!this.isDisposed){this.onReadyObservable.hasObservers()&&-1===this._executeWhenReadyTimeoutId&&this._checkIsReady(),this._frameId++,this._registerTransientComponents(),this._activeParticles.fetchNewFrame(),this._totalVertices.fetchNewFrame(),this._activeIndices.fetchNewFrame(),this._activeBones.fetchNewFrame(),this._meshesForIntersections.reset(),this.resetCachedMaterial(),this.onBeforeAnimationsObservable.notifyObservers(this),this.actionManager&&this.actionManager.processTrigger(11),t||this.animate();for(var r=0,n=this._beforeCameraUpdateStage;r<n.length;r++){var o=n[r];o.action()}if(e)if(this.activeCameras&&this.activeCameras.length>0)for(var s=0;s<this.activeCameras.length;s++){var a=this.activeCameras[s];if(a.update(),a.cameraRigMode!==f["Camera"].RIG_MODE_NONE)for(var u=0;u<a._rigCameras.length;u++)a._rigCameras[u].update()}else if(this.activeCamera&&(this.activeCamera.update(),this.activeCamera.cameraRigMode!==f["Camera"].RIG_MODE_NONE))for(u=0;u<this.activeCamera._rigCameras.length;u++)this.activeCamera._rigCameras[u].update();this.onBeforeRenderObservable.notifyObservers(this),this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);var c=this.getEngine(),l=this.activeCamera;if(this.renderTargetsEnabled){i["Tools"].StartPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!0;for(var d=0;d<this.customRenderTargets.length;d++){var h=this.customRenderTargets[d];if(h._shouldRender()){if(this._renderId++,this.activeCamera=h.activeCamera||this.activeCamera,!this.activeCamera)throw new Error("Active camera not set");c.setViewport(this.activeCamera.viewport),this.updateTransformMatrix(),h.render(l!==this.activeCamera,this.dumpNextRenderTargets)}}i["Tools"].EndPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!1,this._renderId++}this.activeCamera=l,this._activeCamera&&this._activeCamera.cameraRigMode!==f["Camera"].RIG_MODE_CUSTOM&&!this.prePass&&this._bindFrameBuffer(),this.onAfterRenderTargetsRenderObservable.notifyObservers(this);for(var p=0,m=this._beforeClearStage;p<m.length;p++){o=m[p];o.action()}!this.autoClearDepthAndStencil&&!this.autoClear||this.prePass||this._engine.clear(this.clearColor,this.autoClear||this.forceWireframe||this.forcePointsCloud,this.autoClearDepthAndStencil,this.autoClearDepthAndStencil);for(var _=0,g=this._gatherRenderTargetsStage;_<g.length;_++){o=g[_];o.action(this._renderTargets)}if(this.activeCameras&&this.activeCameras.length>0)for(s=0;s<this.activeCameras.length;s++)s>0&&this._engine.clear(null,!1,!0,!0),this._processSubCameras(this.activeCameras[s]);else{if(!this.activeCamera)throw new Error("No camera defined");this._processSubCameras(this.activeCamera)}this._checkIntersections();for(var b=0,v=this._afterRenderStage;b<v.length;b++){o=v[b];o.action()}if(this.afterRender&&this.afterRender(),this.onAfterRenderObservable.notifyObservers(this),this._toBeDisposed.length){for(u=0;u<this._toBeDisposed.length;u++){var M=this._toBeDisposed[u];M&&M.dispose()}this._toBeDisposed=[]}this.dumpNextRenderTargets&&(this.dumpNextRenderTargets=!1),this._activeBones.addCount(0,!0),this._activeIndices.addCount(0,!0),this._activeParticles.addCount(0,!0)}},Scene.prototype.freezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].freeze()},Scene.prototype.unfreezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].unfreeze()},Scene.prototype.dispose=function(){this.beforeRender=null,this.afterRender=null,P["EngineStore"]._LastCreatedScene===this&&(P["EngineStore"]._LastCreatedScene=null),this.skeletons=[],this.morphTargetManagers=[],this._transientComponents=[],this._isReadyForMeshStage.clear(),this._beforeEvaluateActiveMeshStage.clear(),this._evaluateSubMeshStage.clear(),this._preActiveMeshStage.clear(),this._cameraDrawRenderTargetStage.clear(),this._beforeCameraDrawStage.clear(),this._beforeRenderTargetDrawStage.clear(),this._beforeRenderingGroupDrawStage.clear(),this._beforeRenderingMeshStage.clear(),this._afterRenderingMeshStage.clear(),this._afterRenderingGroupDrawStage.clear(),this._afterCameraDrawStage.clear(),this._afterRenderTargetDrawStage.clear(),this._afterRenderStage.clear(),this._beforeCameraUpdateStage.clear(),this._beforeClearStage.clear(),this._gatherRenderTargetsStage.clear(),this._gatherActiveCameraRenderTargetsStage.clear(),this._pointerMoveStage.clear(),this._pointerDownStage.clear(),this._pointerUpStage.clear();for(var e=0,t=this._components;e<t.length;e++){var r=t[e];r.dispose()}this.importedMeshesFiles=new Array,this.stopAllAnimations&&this.stopAllAnimations(),this.resetCachedMaterial(),this.activeCamera&&(this.activeCamera._activeMeshes.dispose(),this.activeCamera=null),this._activeMeshes.dispose(),this._renderingManager.dispose(),this._processedMaterials.dispose(),this._activeParticleSystems.dispose(),this._activeSkeletons.dispose(),this._softwareSkinnedMeshes.dispose(),this._renderTargets.dispose(),this._registeredForLateAnimationBindings.dispose(),this._meshesForIntersections.dispose(),this._toBeDisposed=[];for(var n=0,i=this._activeRequests;n<i.length;n++){var o=i[n];o.abort()}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderTargetsRenderObservable.clear(),this.onAfterRenderTargetsRenderObservable.clear(),this.onAfterStepObservable.clear(),this.onBeforeStepObservable.clear(),this.onBeforeActiveMeshesEvaluationObservable.clear(),this.onAfterActiveMeshesEvaluationObservable.clear(),this.onBeforeParticlesRenderingObservable.clear(),this.onAfterParticlesRenderingObservable.clear(),this.onBeforeDrawPhaseObservable.clear(),this.onAfterDrawPhaseObservable.clear(),this.onBeforeAnimationsObservable.clear(),this.onAfterAnimationsObservable.clear(),this.onDataLoadedObservable.clear(),this.onBeforeRenderingGroupObservable.clear(),this.onAfterRenderingGroupObservable.clear(),this.onMeshImportedObservable.clear(),this.onBeforeCameraRenderObservable.clear(),this.onAfterCameraRenderObservable.clear(),this.onReadyObservable.clear(),this.onNewCameraAddedObservable.clear(),this.onCameraRemovedObservable.clear(),this.onNewLightAddedObservable.clear(),this.onLightRemovedObservable.clear(),this.onNewGeometryAddedObservable.clear(),this.onGeometryRemovedObservable.clear(),this.onNewTransformNodeAddedObservable.clear(),this.onTransformNodeRemovedObservable.clear(),this.onNewMeshAddedObservable.clear(),this.onMeshRemovedObservable.clear(),this.onNewSkeletonAddedObservable.clear(),this.onSkeletonRemovedObservable.clear(),this.onNewMaterialAddedObservable.clear(),this.onNewMultiMaterialAddedObservable.clear(),this.onMaterialRemovedObservable.clear(),this.onMultiMaterialRemovedObservable.clear(),this.onNewTextureAddedObservable.clear(),this.onTextureRemovedObservable.clear(),this.onPrePointerObservable.clear(),this.onPointerObservable.clear(),this.onPreKeyboardObservable.clear(),this.onKeyboardObservable.clear(),this.onActiveCameraChanged.clear(),this.detachControl();var s,a=this._engine.getInputElement();if(a)for(s=0;s<this.cameras.length;s++)this.cameras[s].detachControl();while(this.animationGroups.length)this.animationGroups[0].dispose();while(this.lights.length)this.lights[0].dispose();while(this.meshes.length)this.meshes[0].dispose(!0);while(this.transformNodes.length)this.transformNodes[0].dispose(!0);while(this.cameras.length)this.cameras[0].dispose();this._defaultMaterial&&this._defaultMaterial.dispose();while(this.multiMaterials.length)this.multiMaterials[0].dispose();while(this.materials.length)this.materials[0].dispose();while(this.particleSystems.length)this.particleSystems[0].dispose();while(this.postProcesses.length)this.postProcesses[0].dispose();while(this.textures.length)this.textures[0].dispose();this._sceneUbo.dispose(),this._multiviewSceneUbo&&this._multiviewSceneUbo.dispose(),this.postProcessManager.dispose(),s=this._engine.scenes.indexOf(this),s>-1&&this._engine.scenes.splice(s,1),this._engine.wipeCaches(!0),this._isDisposed=!0},Object.defineProperty(Scene.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!1,configurable:!0}),Scene.prototype.clearCachedVertexData=function(){for(var e=0;e<this.meshes.length;e++){var t=this.meshes[e],r=t.geometry;if(r)for(var n in r._indices=[],r._vertexBuffers)r._vertexBuffers.hasOwnProperty(n)&&(r._vertexBuffers[n]._buffer._data=null)}},Scene.prototype.cleanCachedTextureBuffer=function(){for(var e=0,t=this.textures;e<t.length;e++){var r=t[e],n=r._buffer;n&&(r._buffer=null)}},Scene.prototype.getWorldExtends=function(e){var t=new l["Vector3"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),r=new l["Vector3"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return e=e||function(){return!0},this.meshes.filter(e).forEach((function(e){if(e.computeWorldMatrix(!0),e.subMeshes&&0!==e.subMeshes.length&&!e.infiniteDistance){var n=e.getBoundingInfo(),i=n.boundingBox.minimumWorld,o=n.boundingBox.maximumWorld;l["Vector3"].CheckExtends(i,t,r),l["Vector3"].CheckExtends(o,t,r)}})),{min:t,max:r}},Scene.prototype.createPickingRay=function(e,t,r,n,i){throw void 0===i&&(i=!1),A["_DevTools"].WarnImport("Ray")},Scene.prototype.createPickingRayToRef=function(e,t,r,n,i,o){throw void 0===o&&(o=!1),A["_DevTools"].WarnImport("Ray")},Scene.prototype.createPickingRayInCameraSpace=function(e,t,r){throw A["_DevTools"].WarnImport("Ray")},Scene.prototype.createPickingRayInCameraSpaceToRef=function(e,t,r,n){throw A["_DevTools"].WarnImport("Ray")},Scene.prototype.pick=function(e,t,r,n,i,o){var s=new b["PickingInfo"];return s._pickingUnavailable=!0,s},Scene.prototype.pickWithBoundingInfo=function(e,t,r,n,i){var o=new b["PickingInfo"];return o._pickingUnavailable=!0,o},Scene.prototype.pickWithRay=function(e,t,r,n){throw A["_DevTools"].WarnImport("Ray")},Scene.prototype.multiPick=function(e,t,r,n,i){throw A["_DevTools"].WarnImport("Ray")},Scene.prototype.multiPickWithRay=function(e,t,r){throw A["_DevTools"].WarnImport("Ray")},Scene.prototype.setPointerOverMesh=function(e,t){this._inputManager.setPointerOverMesh(e,t)},Scene.prototype.getPointerOverMesh=function(){return this._inputManager.getPointerOverMesh()},Scene.prototype._rebuildGeometries=function(){for(var e=0,t=this.geometries;e<t.length;e++){var r=t[e];r._rebuild()}for(var n=0,i=this.meshes;n<i.length;n++){var o=i[n];o._rebuild()}this.postProcessManager&&this.postProcessManager._rebuild();for(var s=0,a=this._components;s<a.length;s++){var u=a[s];u.rebuild()}for(var c=0,l=this.particleSystems;c<l.length;c++){var d=l[c];d.rebuild()}},Scene.prototype._rebuildTextures=function(){for(var e=0,t=this.textures;e<t.length;e++){var r=t[e];r._rebuild()}this.markAllMaterialsAsDirty(1)},Scene.prototype._getByTags=function(e,t,r){if(void 0===t)return e;var n=[];for(var i in r=r||function(e){},e){var o=e[i];c["Tags"]&&c["Tags"].MatchesQuery(o,t)&&(n.push(o),r(o))}return n},Scene.prototype.getMeshesByTags=function(e,t){return this._getByTags(this.meshes,e,t)},Scene.prototype.getCamerasByTags=function(e,t){return this._getByTags(this.cameras,e,t)},Scene.prototype.getLightsByTags=function(e,t){return this._getByTags(this.lights,e,t)},Scene.prototype.getMaterialByTags=function(e,t){return this._getByTags(this.materials,e,t).concat(this._getByTags(this.multiMaterials,e,t))},Scene.prototype.getTransformNodesByTags=function(e,t){return this._getByTags(this.transformNodes,e,t)},Scene.prototype.setRenderingOrder=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),this._renderingManager.setRenderingOrder(e,t,r,n)},Scene.prototype.setRenderingAutoClearDepthStencil=function(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0),this._renderingManager.setRenderingAutoClearDepthStencil(e,t,r,n)},Scene.prototype.getAutoClearDepthStencilSetup=function(e){return this._renderingManager.getAutoClearDepthStencilSetup(e)},Object.defineProperty(Scene.prototype,"blockMaterialDirtyMechanism",{get:function(){return this._blockMaterialDirtyMechanism},set:function(e){this._blockMaterialDirtyMechanism!==e&&(this._blockMaterialDirtyMechanism=e,e||this.markAllMaterialsAsDirty(63))},enumerable:!1,configurable:!0}),Scene.prototype.markAllMaterialsAsDirty=function(e,t){if(!this._blockMaterialDirtyMechanism)for(var r=0,n=this.materials;r<n.length;r++){var i=n[r];t&&!t(i)||i.markAsDirty(e)}},Scene.prototype._loadFile=function(e,t,r,n,i,o){var s=this,a=D["FileTools"].LoadFile(e,t,r,n?this.offlineProvider:void 0,i,o);return this._activeRequests.push(a),a.onCompleteObservable.add((function(e){s._activeRequests.splice(s._activeRequests.indexOf(e),1)})),a},Scene.prototype._loadFileAsync=function(e,t,r,n){var i=this;return new Promise((function(o,s){i._loadFile(e,(function(e){o(e)}),t,r,n,(function(e,t){s(t)}))}))},Scene.prototype._requestFile=function(e,t,r,n,i,o,s){var a=this,u=D["FileTools"].RequestFile(e,t,r,n?this.offlineProvider:void 0,i,o,s);return this._activeRequests.push(u),u.onCompleteObservable.add((function(e){a._activeRequests.splice(a._activeRequests.indexOf(e),1)})),u},Scene.prototype._requestFileAsync=function(e,t,r,n,i){var o=this;return new Promise((function(s,a){o._requestFile(e,(function(e){s(e)}),t,r,n,(function(e){a(e)}),i)}))},Scene.prototype._readFile=function(e,t,r,n,i){var o=this,s=D["FileTools"].ReadFile(e,t,r,n,i);return this._activeRequests.push(s),s.onCompleteObservable.add((function(e){o._activeRequests.splice(o._activeRequests.indexOf(e),1)})),s},Scene.prototype._readFileAsync=function(e,t,r){var n=this;return new Promise((function(i,o){n._readFile(e,(function(e){i(e)}),t,r,(function(e){o(e)}))}))},Scene.FOGMODE_NONE=0,Scene.FOGMODE_EXP=1,Scene.FOGMODE_EXP2=2,Scene.FOGMODE_LINEAR=3,Scene.MinDeltaTime=1,Scene.MaxDeltaTime=1e3,Scene}(p["AbstractScene"])},"./node_modules/@babylonjs/core/sceneComponent.js":function(e,t,r){"use strict";r.r(t),r.d(t,"SceneComponentConstants",(function(){return i})),r.d(t,"Stage",(function(){return o}));var n=r("./node_modules/tslib/tslib.es6.js"),i=function(){function SceneComponentConstants(){}return SceneComponentConstants.NAME_EFFECTLAYER="EffectLayer",SceneComponentConstants.NAME_LAYER="Layer",SceneComponentConstants.NAME_LENSFLARESYSTEM="LensFlareSystem",SceneComponentConstants.NAME_BOUNDINGBOXRENDERER="BoundingBoxRenderer",SceneComponentConstants.NAME_PARTICLESYSTEM="ParticleSystem",SceneComponentConstants.NAME_GAMEPAD="Gamepad",SceneComponentConstants.NAME_SIMPLIFICATIONQUEUE="SimplificationQueue",SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER="GeometryBufferRenderer",SceneComponentConstants.NAME_PREPASSRENDERER="PrePassRenderer",SceneComponentConstants.NAME_DEPTHRENDERER="DepthRenderer",SceneComponentConstants.NAME_POSTPROCESSRENDERPIPELINEMANAGER="PostProcessRenderPipelineManager",SceneComponentConstants.NAME_SPRITE="Sprite",SceneComponentConstants.NAME_SUBSURFACE="SubSurface",SceneComponentConstants.NAME_OUTLINERENDERER="Outline",SceneComponentConstants.NAME_PROCEDURALTEXTURE="ProceduralTexture",SceneComponentConstants.NAME_SHADOWGENERATOR="ShadowGenerator",SceneComponentConstants.NAME_OCTREE="Octree",SceneComponentConstants.NAME_PHYSICSENGINE="PhysicsEngine",SceneComponentConstants.NAME_AUDIO="Audio",SceneComponentConstants.STEP_ISREADYFORMESH_EFFECTLAYER=0,SceneComponentConstants.STEP_BEFOREEVALUATEACTIVEMESH_BOUNDINGBOXRENDERER=0,SceneComponentConstants.STEP_EVALUATESUBMESH_BOUNDINGBOXRENDERER=0,SceneComponentConstants.STEP_PREACTIVEMESH_BOUNDINGBOXRENDERER=0,SceneComponentConstants.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER=1,SceneComponentConstants.STEP_BEFORECAMERADRAW_EFFECTLAYER=0,SceneComponentConstants.STEP_BEFORECAMERADRAW_LAYER=1,SceneComponentConstants.STEP_BEFORECAMERADRAW_PREPASS=2,SceneComponentConstants.STEP_BEFORERENDERTARGETDRAW_LAYER=0,SceneComponentConstants.STEP_BEFORERENDERINGMESH_PREPASS=0,SceneComponentConstants.STEP_BEFORERENDERINGMESH_OUTLINE=1,SceneComponentConstants.STEP_AFTERRENDERINGMESH_PREPASS=0,SceneComponentConstants.STEP_AFTERRENDERINGMESH_OUTLINE=1,SceneComponentConstants.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW=0,SceneComponentConstants.STEP_AFTERRENDERINGGROUPDRAW_BOUNDINGBOXRENDERER=1,SceneComponentConstants.STEP_BEFORECAMERAUPDATE_SIMPLIFICATIONQUEUE=0,SceneComponentConstants.STEP_BEFORECAMERAUPDATE_GAMEPAD=1,SceneComponentConstants.STEP_BEFORECLEAR_PROCEDURALTEXTURE=0,SceneComponentConstants.STEP_AFTERRENDERTARGETDRAW_LAYER=0,SceneComponentConstants.STEP_AFTERCAMERADRAW_EFFECTLAYER=0,SceneComponentConstants.STEP_AFTERCAMERADRAW_LENSFLARESYSTEM=1,SceneComponentConstants.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW=2,SceneComponentConstants.STEP_AFTERCAMERADRAW_LAYER=3,SceneComponentConstants.STEP_AFTERCAMERADRAW_PREPASS=4,SceneComponentConstants.STEP_AFTERRENDER_AUDIO=0,SceneComponentConstants.STEP_GATHERRENDERTARGETS_DEPTHRENDERER=0,SceneComponentConstants.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER=1,SceneComponentConstants.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR=2,SceneComponentConstants.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER=3,SceneComponentConstants.STEP_GATHERACTIVECAMERARENDERTARGETS_DEPTHRENDERER=0,SceneComponentConstants.STEP_BEFORECLEARSTAGE_PREPASS=0,SceneComponentConstants.STEP_POINTERMOVE_SPRITE=0,SceneComponentConstants.STEP_POINTERDOWN_SPRITE=0,SceneComponentConstants.STEP_POINTERUP_SPRITE=0,SceneComponentConstants}(),o=function(e){function Stage(t){return e.apply(this,t)||this}return Object(n["__extends"])(Stage,e),Stage.Create=function(){return Object.create(Stage.prototype)},Stage.prototype.registerStep=function(e,t,r){for(var n=0,i=Number.MAX_VALUE;n<this.length;n++){var o=this[n];if(i=o.index,e<i)break}this.splice(n,0,{index:e,component:t,action:r.bind(t)})},Stage.prototype.clear=function(){this.length=0},Stage}(Array)},"./node_modules/@babylonjs/materials/grid/grid.fragment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"gridPixelShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragmentDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogFragment.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/imageProcessingCompatibility.js"),"gridPixelShader"),o="#extension GL_OES_standard_derivatives : enable\n#define SQRT2 1.41421356\n#define PI 3.14159\nprecision highp float;\nuniform vec3 mainColor;\nuniform vec3 lineColor;\nuniform vec4 gridControl;\nuniform vec3 gridOffset;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include<fogFragmentDeclaration>\n\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform sampler2D opacitySampler;\nuniform vec2 vOpacityInfos;\n#endif\nfloat getVisibility(float position) {\n\nfloat majorGridFrequency=gridControl.y;\nif (floor(position+0.5) == floor(position/majorGridFrequency+0.5)*majorGridFrequency)\n{\nreturn 1.0;\n}\nreturn gridControl.z;\n}\nfloat getAnisotropicAttenuation(float differentialLength) {\nconst float maxNumberOfLines=10.0;\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\n}\nfloat isPointOnLine(float position,float differentialLength) {\nfloat fractionPartOfPosition=position-floor(position+0.5);\nfractionPartOfPosition/=differentialLength;\nfractionPartOfPosition=clamp(fractionPartOfPosition,-1.,1.);\nfloat result=0.5+0.5*cos(fractionPartOfPosition*PI);\nreturn result;\n}\nfloat contributionOnAxis(float position) {\nfloat differentialLength=length(vec2(dFdx(position),dFdy(position)));\ndifferentialLength*=SQRT2;\n\nfloat result=isPointOnLine(position,differentialLength);\n\nfloat visibility=getVisibility(position);\nresult*=visibility;\n\nfloat anisotropicAttenuation=getAnisotropicAttenuation(differentialLength);\nresult*=anisotropicAttenuation;\nreturn result;\n}\nfloat normalImpactOnAxis(float x) {\nfloat normalImpact=clamp(1.0-3.0*abs(x*x*x),0.0,1.0);\nreturn normalImpact;\n}\nvoid main(void) {\n\nfloat gridRatio=gridControl.x;\nvec3 gridPos=(vPosition+gridOffset.xyz)/gridRatio;\n\nfloat x=contributionOnAxis(gridPos.x);\nfloat y=contributionOnAxis(gridPos.y);\nfloat z=contributionOnAxis(gridPos.z);\n\nvec3 normal=normalize(vNormal);\nx*=normalImpactOnAxis(normal.x);\ny*=normalImpactOnAxis(normal.y);\nz*=normalImpactOnAxis(normal.z);\n\nfloat grid=clamp(x+y+z,0.,1.);\n\nvec3 color=mix(mainColor,lineColor,grid);\n#ifdef FOG\n#include<fogFragment>\n#endif\nfloat opacity=1.0;\n#ifdef TRANSPARENT\nopacity=clamp(grid,0.08,gridControl.w*grid);\n#endif\n#ifdef OPACITY\nopacity*=texture2D(opacitySampler,vOpacityUV).a;\n#endif\n\ngl_FragColor=vec4(color.rgb,opacity);\n#ifdef TRANSPARENT\n#ifdef PREMULTIPLYALPHA\ngl_FragColor.rgb*=opacity;\n#endif\n#else\n#endif\n#include<imageProcessingCompatibility>\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/materials/grid/grid.vertex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"gridVertexShader",(function(){return s}));var n=r("./node_modules/@babylonjs/core/Materials/effect.js"),i=(r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertexDeclaration.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/instancesVertex.js"),r("./node_modules/@babylonjs/core/Shaders/ShadersInclude/fogVertex.js"),"gridVertexShader"),o="precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#include<instancesDeclaration>\n\nuniform mat4 projection;\nuniform mat4 view;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include<fogVertexDeclaration>\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\nvoid main(void) {\n#include<instancesVertex>\nvec4 worldPos=finalWorld*vec4(position,1.0);\n#include<fogVertex>\nvec4 cameraSpacePosition=view*worldPos;\ngl_Position=projection*cameraSpacePosition;\n#ifdef OPACITY\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\nvPosition=position;\nvNormal=normal;\n}";n["Effect"].ShadersStore[i]=o;var s={name:i,shader:o}},"./node_modules/@babylonjs/materials/grid/gridMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GridMaterial",(function(){return p}));var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/@babylonjs/core/Misc/decorators.js"),o=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),s=r("./node_modules/@babylonjs/core/Maths/math.color.js"),a=r("./node_modules/@babylonjs/core/Materials/materialDefines.js"),u=r("./node_modules/@babylonjs/core/Materials/materialHelper.js"),c=r("./node_modules/@babylonjs/core/Materials/pushMaterial.js"),l=r("./node_modules/@babylonjs/core/Materials/materialFlags.js"),d=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),h=r("./node_modules/@babylonjs/core/Misc/typeStore.js"),f=(r("./node_modules/@babylonjs/materials/grid/grid.fragment.js"),r("./node_modules/@babylonjs/materials/grid/grid.vertex.js"),function(e){function GridMaterialDefines(){var t=e.call(this)||this;return t.OPACITY=!1,t.TRANSPARENT=!1,t.FOG=!1,t.PREMULTIPLYALPHA=!1,t.UV1=!1,t.UV2=!1,t.INSTANCES=!1,t.THIN_INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.rebuild(),t}return Object(n["__extends"])(GridMaterialDefines,e),GridMaterialDefines}(a["MaterialDefines"])),p=function(e){function GridMaterial(t,r){var n=e.call(this,t,r)||this;return n.mainColor=s["Color3"].Black(),n.lineColor=s["Color3"].Teal(),n.gridRatio=1,n.gridOffset=o["Vector3"].Zero(),n.majorUnitFrequency=10,n.minorUnitVisibility=.33,n.opacity=1,n.preMultiplyAlpha=!1,n._gridControl=new o["Vector4"](n.gridRatio,n.majorUnitFrequency,n.minorUnitVisibility,n.opacity),n}return Object(n["__extends"])(GridMaterial,e),GridMaterial.prototype.needAlphaBlending=function(){return this.opacity<1||this._opacityTexture&&this._opacityTexture.isReady()},GridMaterial.prototype.needAlphaBlendingForMesh=function(e){return this.needAlphaBlending()},GridMaterial.prototype.isReadyForSubMesh=function(e,t,r){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t._materialDefines||(t._materialDefines=new f);var n=t._materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;if(n.TRANSPARENT!==this.opacity<1&&(n.TRANSPARENT=!n.TRANSPARENT,n.markAsUnprocessed()),n.PREMULTIPLYALPHA!=this.preMultiplyAlpha&&(n.PREMULTIPLYALPHA=!n.PREMULTIPLYALPHA,n.markAsUnprocessed()),n._areTexturesDirty&&(n._needUVs=!1,i.texturesEnabled&&this._opacityTexture&&l["MaterialFlags"].OpacityTextureEnabled)){if(!this._opacityTexture.isReady())return!1;n._needUVs=!0,n.OPACITY=!0}if(u["MaterialHelper"].PrepareDefinesForMisc(e,i,!1,!1,this.fogEnabled,!1,n),u["MaterialHelper"].PrepareDefinesForFrameBoundValues(i,i.getEngine(),n,!!r),n.isDirty){n.markAsProcessed(),i.resetCachedMaterial(),u["MaterialHelper"].PrepareDefinesForAttributes(e,n,!1,!1);var o=[d["VertexBuffer"].PositionKind,d["VertexBuffer"].NormalKind];n.UV1&&o.push(d["VertexBuffer"].UVKind),n.UV2&&o.push(d["VertexBuffer"].UV2Kind),n.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess,u["MaterialHelper"].PrepareAttributesForInstances(o,n);var s=n.toString();t.setEffect(i.getEngine().createEffect("grid",o,["projection","mainColor","lineColor","gridControl","gridOffset","vFogInfos","vFogColor","world","view","opacityMatrix","vOpacityInfos"],["opacitySampler"],s,void 0,this.onCompiled,this.onError),n)}return!(!t.effect||!t.effect.isReady())&&(n._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},GridMaterial.prototype.bindForSubMesh=function(e,t,r){var n=this.getScene(),i=r._materialDefines;if(i){var o=r.effect;o&&(this._activeEffect=o,i.INSTANCES&&!i.THIN_INSTANCE||this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("view",n.getViewMatrix()),this._activeEffect.setMatrix("projection",n.getProjectionMatrix()),this._mustRebind(n,o)&&(this._activeEffect.setColor3("mainColor",this.mainColor),this._activeEffect.setColor3("lineColor",this.lineColor),this._activeEffect.setVector3("gridOffset",this.gridOffset),this._gridControl.x=this.gridRatio,this._gridControl.y=Math.round(this.majorUnitFrequency),this._gridControl.z=this.minorUnitVisibility,this._gridControl.w=this.opacity,this._activeEffect.setVector4("gridControl",this._gridControl),this._opacityTexture&&l["MaterialFlags"].OpacityTextureEnabled&&(this._activeEffect.setTexture("opacitySampler",this._opacityTexture),this._activeEffect.setFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),this._activeEffect.setMatrix("opacityMatrix",this._opacityTexture.getTextureMatrix()))),u["MaterialHelper"].BindFogParameters(n,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},GridMaterial.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},GridMaterial.prototype.clone=function(e){var t=this;return i["SerializationHelper"].Clone((function(){return new GridMaterial(e,t.getScene())}),this)},GridMaterial.prototype.serialize=function(){var e=i["SerializationHelper"].Serialize(this);return e.customType="BABYLON.GridMaterial",e},GridMaterial.prototype.getClassName=function(){return"GridMaterial"},GridMaterial.Parse=function(e,t,r){return i["SerializationHelper"].Parse((function(){return new GridMaterial(e.name,t)}),e,t,r)},Object(n["__decorate"])([Object(i["serializeAsColor3"])()],GridMaterial.prototype,"mainColor",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])()],GridMaterial.prototype,"lineColor",void 0),Object(n["__decorate"])([Object(i["serialize"])()],GridMaterial.prototype,"gridRatio",void 0),Object(n["__decorate"])([Object(i["serializeAsColor3"])()],GridMaterial.prototype,"gridOffset",void 0),Object(n["__decorate"])([Object(i["serialize"])()],GridMaterial.prototype,"majorUnitFrequency",void 0),Object(n["__decorate"])([Object(i["serialize"])()],GridMaterial.prototype,"minorUnitVisibility",void 0),Object(n["__decorate"])([Object(i["serialize"])()],GridMaterial.prototype,"opacity",void 0),Object(n["__decorate"])([Object(i["serialize"])()],GridMaterial.prototype,"preMultiplyAlpha",void 0),Object(n["__decorate"])([Object(i["serializeAsTexture"])("opacityTexture")],GridMaterial.prototype,"_opacityTexture",void 0),Object(n["__decorate"])([Object(i["expandToProperty"])("_markAllSubMeshesAsTexturesDirty")],GridMaterial.prototype,"opacityTexture",void 0),GridMaterial}(c["PushMaterial"]);h["_TypeStore"].RegisteredTypes["BABYLON.GridMaterial"]=p},"./node_modules/cache-loader/dist/cjs.js?!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=script&lang=js&":function(e,t,r){"use strict";r.r(t);r("./node_modules/core-js/modules/es.string.starts-with.js"),r("./node_modules/core-js/modules/es.string.pad-end.js");t["default"]={props:["editcolor"],data:function data(){return{internalTextColor:"#000000",color:"#000000",menu:!1}},computed:{backgroundColorStyle:function backgroundColorStyle(){return{minWidth:"220px",backgroundColor:this.color}},swatchStyle:function swatchStyle(){var e=this.color,t=this.menu;return{backgroundColor:e,cursor:"pointer",height:"30px",width:"30px",borderRadius:t?"50%":"4px",transition:"border-radius 200ms ease-in-out"}}},mounted:function mounted(){this.color=this.editcolor,this.internalTextColor=this.editcolor},methods:{updateValue:function updateValue(e){this.color=e,e.startsWith("#")||(this.color="#"+e),this.color=this.color.toUpperCase().padEnd(7,"0").substring(0,7),this.internalTextColor=this.color,this.$emit("updatecolor",this.color)}},watch:{editcolor:{handler:function handler(e){this.color=e,this.internalTextColor=e}}}}},"./node_modules/cache-loader/dist/cjs.js?!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=script&lang=js&":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=(r("./node_modules/regenerator-runtime/runtime.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./src/plugins/GCodeViewer/viewer/gcodeviewer.js")),s=r("./node_modules/vuex/dist/vuex.esm.js"),a=r("./src/utils/path.js"),u=r("./src/store/machine/modelEnums.js"),c={};t["default"]={data:function data(){return{drawer:!1,extruderColors:["#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF"],backgroundColor:"#000000FF",progressColor:"#FFFFFFFF",viewerHeight:"400px",testValue:"Test",loading:!1,testData:"",showCursor:!1,showTravelLines:!1,selectedFile:"",nthRow:1,renderQuality:1,debugVisible:!1,maxHeight:0,sliderHeight:0,sliderBottomHeight:0,liveZTracking:!1,forceWireMode:!1,vertexAlpha:!1,spreadLines:!1,showObjectSelection:!1,objectDialogData:{showDialog:!1,info:{}},hoverLabel:"",bedRenderMode:0,showAxes:!0,showObjectLabels:!0,liveTrackingShowSolid:!1,fullscreen:!1,bedColor:"",colorMode:0,minColorRate:20,maxColorRate:60,maxFileFeedRate:0,minFeedColor:"#0000FF",maxFeedColor:"#FF0000",cameraInertia:!0}},computed:Object(i["default"])(Object(i["default"])({},Object(s["mapState"])("machine/model",["job","move","state"])),{},{isJobRunning:function isJobRunning(e){return Object(u["isPrinting"])(e.state.status)},visualizingCurrentJob:function visualizingCurrentJob(e){try{return e.job.file.fileName===this.selectedFile&&this.isJobRunning}catch(t){return!1}},filePosition:function filePosition(e){return e.job.filePosition},fileSize:function fileSize(e){return e.job.file.size},kinematicsName:function kinematicsName(e){return e.move.kinematics.name},isDelta:function isDelta(){return this.kinematicsName===u["KinematicsName"].delta||this.kinematicsName===u["KinematicsName"].rotaryDelta},canCancelObject:function canCancelObject(){return!!(this.isJobRunning&&this.job&&this.job.build&&0!=this.job.build.objects.length)&&this.visualizingCurrentJob},jobSelectionLabel:function jobSelectionLabel(){var e=this.$t("plugins.gcodeViewer.showObjectSelection.caption");return this.canCancelObject&&this.job.build.objects&&(e+=" ("+this.job.build.objects.length+")"),e}}),mounted:function mounted(){var e=this;if(c=new o["default"](this.$refs.viewerCanvas),c.init(),c.buildObjects.objectCallback=this.objectSelectionCallback,c.buildObjects.labelCallback=function(t){e.showObjectSelection?e.hoverLabel=t:e.hoverLabel=""},this.showObjectLabels=c.buildObjects.showLabel,this.move.axes){for(var t in this.move.axes){var r=this.move.axes[t];if("XYZ".includes(r.letter)){var i=r.letter.toLowerCase();c.bed.buildVolume[i].min=r.min,c.bed.buildVolume[i].max=r.max}}c.bed.commitBedSize()}this.cameraInertia=c.cameraInertia,c.bed.setDelta(this.isDelta),this.bedRenderMode=c.bed.renderMode,this.bedColor=c.bed.getBedColor(),this.showAxes=c.axes.visible,this.colorMode=c.gcodeProcessor.colorMode,this.minFeedColor=c.gcodeProcessor.minFeedColorString,this.maxFeedColor=c.gcodeProcessor.maxFeedColorString,this.minColorRate=c.gcodeProcessor.minColorRate/60,this.maxColorRate=c.gcodeProcessor.maxColorRate/60,this.forceWireMode=c.gcodeProcessor.forceWireMode,this.liveTrackingShowSolid=c.gcodeProcessor.liveTrackingShowSolid,c.lastLoadFailed()&&(this.renderQuality=1,c.updateRenderQuality(1),this.$makeNotification("warning","GCode Viewer",this.$t("plugins.gcodeViewer.renderFailed"),5e3),c.clearLoadFlag()),c.setCursorVisiblity(this.showCursor),this.renderQuality=c.renderQuality,this.extruderColors=c.getExtruderColors(),this.backgroundColor=c.getBackgroundColor(),this.progressColor=c.getProgressColor(),this.viewModelEvent=function(){var t=Object(n["default"])(regeneratorRuntime.mark((function _callee(t){var r;return regeneratorRuntime.wrap((function _callee$(n){while(1)switch(n.prev=n.next){case 0:return e.selectedFile=t,n.prev=1,n.next=4,e.machineDownload({filename:a["default"].combine(t),type:"text"});case 4:return r=n.sent,e.loading=!0,n.next=8,c.processFile(r);case 8:c.gcodeProcessor.setLiveTracking(e.visualizingCurrentJob),e.maxHeight=c.getMaxHeight(),e.sliderHeight=e.maxHeight,e.maxFileFeedRate=c.gcodeProcessor.maxFeedRate;case 12:return n.prev=12,e.loading=!1,n.finish(12);case 15:case"end":return n.stop()}}),_callee,null,[[1,,12,15]])})));return function(e){return t.apply(this,arguments)}}(),this.$root.$on("view-3d-model",this.viewModelEvent),this.$nextTick((function(){c.saveExtruderColors(e.extruderColors)})),window.addEventListener("keyup",(function(t){var r=t.key||t.keyCode;"Escape"!==r&&"Esc"!==r&&27!==r||(e.fullscreen=!1)})),window.addEventListener("resize",(function(){e.$nextTick((function(){e.resize()}))}))},beforeDestroy:function beforeDestroy(){this.$root.$off("view-3d-model",this.viewModelEvent)},methods:Object(i["default"])(Object(i["default"])({},Object(s["mapActions"])("machine",{machineDownload:"download",sendCode:"sendCode"})),{},{updateColor:function updateColor(e,t){this.$set(this.extruderColors,e,t),c.saveExtruderColors(this.extruderColors)},updateBackground:function updateBackground(e){this.backgroundColor=e,c.setBackgroundColor(this.backgroundColor)},updateProgressColor:function updateProgressColor(e){this.progressColor=e,c.setProgressColor(e)},updateMinFeedColor:function updateMinFeedColor(e){c.gcodeProcessor.updateMinFeedColor(e)},updateMaxFeedColor:function updateMaxFeedColor(e){c.gcodeProcessor.updateMaxFeedColor(e)},updateBedColor:function updateBedColor(e){this.bedColor=e,c.bed.setBedColor(e)},resize:function resize(){var e=getComputedStyle(document.getElementsByClassName("v-toolbar__content")[0]),t=getComputedStyle(document.getElementById("global-container")),r=getComputedStyle(this.$refs.primarycontainer),n=parseInt(e.height)+parseInt(e.paddingTop)+parseInt(e.paddingBottom),i=parseInt(t.height)+parseInt(t.paddingTop)+parseInt(t.paddingBottom);this.$refs.primarycontainer.style.height=window.innerHeight-n-i-parseInt(r.marginTop)+"px",0!==Object.keys(c).length&&c.resize()},reset:function reset(){0!==Object.keys(c).length&&c.resetCamera()},loadRunningJob:function loadRunningJob(){var e=this;return Object(n["default"])(regeneratorRuntime.mark((function _callee2(){var t;return regeneratorRuntime.wrap((function _callee2$(r){while(1)switch(r.prev=r.next){case 0:return e.selectedFile!=e.job.file.fileName&&(e.selectedFile="",c.gcodeProcessor.setLiveTracking(!1),c.clearScene(!0)),e.selectedFile=e.job.file.fileName,r.prev=2,r.next=5,e.machineDownload({filename:e.job.file.fileName,type:"text"});case 5:return t=r.sent,e.loading=!0,c.gcodeProcessor.setLiveTracking(!0),c.gcodeProcessor.updateForceWireMode(e.forceWireMode),r.next=11,c.processFile(t);case 11:e.maxHeight=c.getMaxHeight(),e.sliderHeight=e.maxHeight,e.maxFileFeedRate=c.gcodeProcessor.maxFeedRate,c.buildObjects.loadObjectBoundaries(e.job.build.objects);case 15:return r.prev=15,e.loading=!1,r.finish(15);case 18:case"end":return r.stop()}}),_callee2,null,[[2,,15,18]])})))()},resetExtruderColors:function resetExtruderColors(){var e=this;this.extruderColors=["#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF"],c.saveExtruderColors(this.extruderColors),this.extruderColors.forEach((function(t,r){e.$set(e.extruderColors,r,t)})),this.extruderColors=c.getExtruderColors()},reloadviewer:function reloadviewer(){var e=this;this.loading||(this.loading=!0,c.gcodeProcessor.updateForceWireMode(this.forceWireMode),c.gcodeProcessor.setLiveTracking(this.visualizingCurrentJob),c.reload().finally((function(){e.loading=!1,c.setCursorVisiblity(e.showCursor),c.toggleTravels(e.showTravelLines),e.maxHeight=c.getMaxHeight(),e.sliderHeight=e.maxHeight,e.sliderBottomHeight=0,e.maxFileFeedRate=c.gcodeProcessor.maxFeedRate;try{c.buildObjects.loadObjectBoundaries(e.job.build.objects)}catch(t){}})))},clearScene:function clearScene(){this.selectedFile="",c.clearScene(!0)},objectSelectionCallback:function objectSelectionCallback(e){this.objectDialogData.showDialog=!0,this.objectDialogData.info=e},objectDialogCancelObject:function objectDialogCancelObject(){var e=this;return Object(n["default"])(regeneratorRuntime.mark((function _callee3(){var t;return regeneratorRuntime.wrap((function _callee3$(r){while(1)switch(r.prev=r.next){case 0:return e.objectDialogData.showDialog=!1,t=e.objectDialogData.info.cancelled?"U":"P",r.next=4,e.sendCode("M486 ".concat(t).concat(e.objectDialogData.info.index));case 4:e.objectDialogData.info={};case 5:case"end":return r.stop()}}),_callee3)})))()},chooseFile:function chooseFile(){this.isBusy||this.$refs.fileInput.click()},fileSelected:function fileSelected(e){var t=this;return Object(n["default"])(regeneratorRuntime.mark((function _callee5(){var r;return regeneratorRuntime.wrap((function _callee5$(i){while(1)switch(i.prev=i.next){case 0:r=new FileReader,r.addEventListener("load",function(){var e=Object(n["default"])(regeneratorRuntime.mark((function _callee4(e){var r;return regeneratorRuntime.wrap((function _callee4$(n){while(1)switch(n.prev=n.next){case 0:return r=e.target.result,n.next=3,c.processFile(r);case 3:t.maxHeight=c.getMaxHeight(),t.sliderHeight=t.maxHeight,t.loading=!1,t.maxFileFeedRate=c.gcodeProcessor.maxFeedRate;case 7:case"end":return n.stop()}}),_callee4)})));return function(t){return e.apply(this,arguments)}}()),t.loading=!0,r.readAsText(e.target.files[0]),e.target.value="";case 5:case"end":return i.stop()}}),_callee5)})))()},toggleFullScreen:function toggleFullScreen(){this.fullscreen=!this.fullscreen,this.$nextTick((function(){c.resize()}))},displayMaxFileFeedRate:function displayMaxFileFeedRate(){if(this.maxFileFeedRate>0)return"(".concat(this.maxFileFeedRate/60,")")},cancelLoad:function cancelLoad(){c.gcodeProcessor.cancelLoad=!0},scrollIntoView:function scrollIntoView(e){setTimeout((function(){e.target.scrollIntoView(!0)}),250)}}),activated:function activated(){c.pause=!1,this.resize()},deactivated:function deactivated(){c.pause=!0},watch:{move:{handler:function handler(e){var t=e.axes.map((function(e){return{axes:e.letter,position:e.machinePosition}}));c.updateToolPosition(t),this.liveZTracking&&c.setZClipPlane(c.toolCursor.absolutePosition.y,0)},deep:!0},showCursor:function showCursor(e){c.setCursorVisiblity(e)},showTravelLines:function showTravelLines(e){c.toggleTravels(e)},visualizingCurrentJob:function visualizingCurrentJob(e){0==e&&c.gcodeProcessor.doFinalPass()},filePosition:function filePosition(e){this.visualizingCurrentJob&&c.gcodeProcessor.updateFilePosition(e)},nthRow:function nthRow(e){c.gcodeProcessor.everyNthRow=e},renderQuality:function renderQuality(e){c.renderQuality!==e&&(c.updateRenderQuality(e),this.loading||this.reloadviewer())},sliderHeight:function sliderHeight(e){this.sliderBottomHeight>e&&(this.sliderBottomHeight=e-1),c.setZClipPlane(e,this.sliderBottomHeight)},sliderBottomHeight:function sliderBottomHeight(e){this.sliderHeight<e&&(this.sliderHeight=e+1),c.setZClipPlane(this.sliderHeight,e)},vertexAlpha:function vertexAlpha(e){c.gcodeProcessor.lineVertexAlpha=e,this.reloadviewer()},spreadLines:function spreadLines(e){c.gcodeProcessor.spreadLines=e,this.reloadviewer()},"job.build.objects":{deep:!0,handler:function handler(e){c&&c.buildObjects&&c.buildObjects.loadObjectBoundaries(e)}},showObjectSelection:function showObjectSelection(e){this.canCancelObject?(c.buildObjects.loadObjectBoundaries(this.job.build.objects),c.buildObjects.showObjectSelection(e)):(this.showObjectSelection=!1,this.hoverLabel="")},isJobRunning:function isJobRunning(e){e||(c.gcodeProcessor.setLiveTracking(!1),c.gcodeProcessor.doFinalPass())},liveZTracking:function liveZTracking(e){e||c.setZClipPlane(this.maxHeight,0)},selectedFile:function selectedFile(){this.showObjectSelection=!1,c.gcodeProcessor.updateFilePosition(0)},bedRenderMode:function bedRenderMode(e){c.bed.setRenderMode(e)},isDelta:function isDelta(e){c.bed.setDelta(e),c.resetCamera()},showAxes:function showAxes(e){c.axes.show(e)},showObjectLabels:function showObjectLabels(e){c.buildObjects.showLabels(e)},liveTrackingShowSolid:function liveTrackingShowSolid(e){c.gcodeProcessor.setLiveTrackingShowSolid(e),this.reloadviewer()},forceWireMode:function forceWireMode(e){c.gcodeProcessor.updateForceWireMode(e),this.reloadviewer()},colorMode:function colorMode(e){c.gcodeProcessor.setColorMode(e),this.reloadviewer()},minColorRate:function minColorRate(e){c.gcodeProcessor.updateColorRate(60*e,60*this.maxColorRate)},maxColorRate:function maxColorRate(e){c.gcodeProcessor.updateColorRate(60*this.minColorRate,60*e)},cameraInertia:function cameraInertia(e){c.setCameraInertia(e)},$route:function $route(){this.resize()}}}},'./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"d3be3814-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=template&id=fb3c3ddc&':function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return render})),r.d(t,"staticRenderFns",(function(){return n}));var render=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{staticClass:"shrink",style:[e.backgroundColorStyle]},[r("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",solo:""},on:{blur:function(t){return e.updateValue(e.internalTextColor)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateValue(e.internalTextColor)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("div",e._g({style:e.swatchStyle},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-card",[r("v-card-text",{staticClass:"pa-0"},[r("v-color-picker",{staticClass:"index-placement",attrs:{flat:""},on:{input:function(t){return e.updateValue(e.color)}},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)],1)]},proxy:!0}]),model:{value:e.internalTextColor,callback:function(t){e.internalTextColor=t},expression:"internalTextColor"}})],1)],1)},n=[]},'./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"d3be3814-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=template&id=ab099a44&scoped=true&':function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return render})),r.d(t,"staticRenderFns",(function(){return n}));var render=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"resize",rawName:"v-resize",value:e.resize,expression:"resize"}],ref:"primarycontainer",staticClass:"primary-container mt-2"},[r("div",{staticClass:"viewer-box",class:{"full-screen":e.fullscreen}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.fullscreen,expression:"fullscreen"}],staticClass:"emergency-button-placement"},[r("code-btn",{attrs:{code:"M112\nM999",log:!1,color:"red",title:e.$t("button.emergencyStop.title")}},[r("v-icon",[e._v("mdi-flash")])],1)],1),r("canvas",{ref:"viewerCanvas",staticClass:"babylon-canvas",attrs:{title:e.hoverLabel}}),r("div",{staticClass:"button-container",class:{"button-container-drawer":e.drawer}},[r("v-btn",{staticClass:"full-screen-icon mb-2",attrs:{small:"",title:e.$t("plugins.gcodeViewer.fullscreen")},on:{click:e.toggleFullScreen}},[r("v-icon",[e._v(e._s(e.fullscreen?"mdi-window-restore":"mdi-window-maximize"))])],1),r("br"),r("v-btn",{staticClass:"toggle-menu-button-close mb-10",attrs:{small:"",title:e.$t("plugins.gcodeViewer.showConfiguration")},on:{click:function(t){e.drawer=!e.drawer}}},[r("v-icon",[e._v("mdi-cog")])],1),r("br"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!(!e.isJobRunning||e.loading||e.visualizingCurrentJob),expression:"!(!isJobRunning || loading || visualizingCurrentJob)"}],staticClass:"toggle-menu-button-close mb-10",attrs:{small:"",title:e.$t("plugins.gcodeViewer.loadCurrentJob.title")},on:{click:e.loadRunningJob}},[r("v-icon",[e._v("mdi-printer-3d")])],1),r("br"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"toggle-menu-button-close",attrs:{small:"",title:e.$t("plugins.gcodeViewer.cancelLoad")},on:{click:e.cancelLoad}},[r("v-icon",{attrs:{color:"red"}},[e._v("mdi-cancel")])],1)],1),r("v-navigation-drawer",{attrs:{permanent:e.drawer,absolute:"",width:"350px"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-card",[r("v-btn",{attrs:{block:"",title:e.$t("plugins.gcodeViewer.resetCamera.title")},on:{click:e.reset}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-camera")]),e._v(" "+e._s(e.$t("plugins.gcodeViewer.resetCamera.caption"))+" ")],1),r("v-btn",{staticClass:"mt-2",attrs:{disabled:e.loading,block:"",title:e.$t("plugins.gcodeViewer.reloadView.title")},on:{click:e.reloadviewer}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-reload-alert")]),e._v(" "+e._s(e.$t("plugins.gcodeViewer.reloadView.caption"))+" ")],1),r("v-btn",{staticClass:"mt-2",attrs:{disabled:!e.isJobRunning||e.loading||e.visualizingCurrentJob,block:"",title:e.$t("plugins.gcodeViewer.loadCurrentJob.title")},on:{click:e.loadRunningJob}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-printer-3d")]),e._v(" "+e._s(e.$t("plugins.gcodeViewer.loadCurrentJob.caption"))+" ")],1),r("v-btn",{staticClass:"mt-2",attrs:{disabled:e.loading,block:"",title:e.$t("plugins.gcodeViewer.unloadGCode.title")},on:{click:e.clearScene}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-video-3d-off")]),e._v(" "+e._s(e.$t("plugins.gcodeViewer.unloadGCode.caption"))+" ")],1),r("v-btn",{staticClass:"mt-2",attrs:{disabled:e.loading,block:"",title:e.$t("plugins.gcodeViewer.loadLocalGCode.title")},on:{click:e.chooseFile}},[r("v-icon",[e._v("mdi-file")]),e._v(" "+e._s(e.$t("plugins.gcodeViewer.loadLocalGCode.caption"))+" ")],1),r("input",{ref:"fileInput",attrs:{type:"file",accept:".g,.gcode,.gc,.gco,.nc,.ngc,.tap",hidden:"",multiple:""},on:{change:e.fileSelected}}),r("v-switch",{staticClass:"mt-4",attrs:{disabled:!e.canCancelObject,label:e.jobSelectionLabel,title:e.$t("plugins.gcodeViewer.showObjectSelection.title")},model:{value:e.showObjectSelection,callback:function(t){e.showObjectSelection=t},expression:"showObjectSelection"}}),r("v-switch",{attrs:{label:e.$t("plugins.gcodeViewer.showCursor")},model:{value:e.showCursor,callback:function(t){e.showCursor=t},expression:"showCursor"}}),r("v-switch",{attrs:{label:e.$t("plugins.gcodeViewer.showTravels")},model:{value:e.showTravelLines,callback:function(t){e.showTravelLines=t},expression:"showTravelLines"}})],1),r("v-expansion-panels",[r("v-expansion-panel",{on:{click:e.scrollIntoView}},[r("v-expansion-panel-header",{attrs:{title:e.$t("plugins.gcodeViewer.renderQuality.title")}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-checkerboard")]),r("strong",[e._v(e._s(e.$t("plugins.gcodeViewer.renderQuality.caption")))])],1),r("v-expansion-panel-content",{attrs:{eager:""}},[r("v-btn-toggle",{staticClass:"btn-toggle d-flex",attrs:{block:"",exclusive:""},model:{value:e.renderQuality,callback:function(t){e.renderQuality=t},expression:"renderQuality"}},[r("v-btn",{attrs:{block:"",value:1,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.sbc")))]),r("v-btn",{attrs:{block:"",value:2,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.low")))]),r("v-btn",{attrs:{block:"",value:3,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.medium")))]),r("v-btn",{attrs:{block:"",value:4,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.high")))]),r("v-btn",{attrs:{block:"",value:5,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.ultra")))]),r("v-btn",{attrs:{block:"",value:6,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.max")))])],1),r("v-checkbox",{staticClass:"mt-4",attrs:{label:e.$t("plugins.gcodeViewer.forceLineRendering")},model:{value:e.forceWireMode,callback:function(t){e.forceWireMode=t},expression:"forceWireMode"}}),r("v-checkbox",{attrs:{label:e.$t("plugins.gcodeViewer.transparency")},model:{value:e.vertexAlpha,callback:function(t){e.vertexAlpha=t},expression:"vertexAlpha"}}),r("v-checkbox",{attrs:{disabled:!e.isJobRunning||e.loading||!e.visualizingCurrentJob,label:e.$t("plugins.gcodeViewer.showSolid")},model:{value:e.liveTrackingShowSolid,callback:function(t){e.liveTrackingShowSolid=t},expression:"liveTrackingShowSolid"}}),r("v-checkbox",{attrs:{label:e.$t("plugins.gcodeViewer.spreadLines")},model:{value:e.spreadLines,callback:function(t){e.spreadLines=t},expression:"spreadLines"}})],1)],1),r("v-expansion-panel",{on:{click:e.scrollIntoView}},[r("v-expansion-panel-header",{attrs:{title:e.$t("plugins.gcodeViewer.extruders.title")}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-printer-3d-nozzle")]),r("strong",[e._v(e._s(e.$t("plugins.gcodeViewer.extruders.caption")))])],1),r("v-expansion-panel-content",[r("v-btn",{staticClass:"mb-2",attrs:{disabled:e.loading,block:"",color:"primary",title:e.$t("plugins.gcodeViewer.reloadView.title")},on:{click:e.reloadviewer}},[e._v(e._s(e.$t("plugins.gcodeViewer.reloadView.caption")))]),e._l(e.extruderColors,(function(t,n){return r("v-card",{key:n},[r("v-card-title",[r("h3",[e._v(e._s(e.$t("plugins.gcodeViewer.tool",[n])))])]),r("v-card-text",[r("gcodeviewer-color-picker",{attrs:{editcolor:t},on:{updatecolor:function(t){e.updateColor(n,t)}}})],1)],1)})),r("v-card",[r("v-btn",{staticClass:"mt-4",attrs:{block:"",color:"warning"},on:{click:e.resetExtruderColors}},[e._v(e._s(e.$tc("plugins.gcodeViewer.resetColor",e.extruderColors.length)))])],1)],2)],1),r("v-expansion-panel",{on:{click:e.scrollIntoView}},[r("v-expansion-panel-header",{attrs:{title:e.$t("plugins.gcodeViewer.renderMode.title")}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-palette")]),r("strong",[e._v(e._s(e.$tc("plugins.gcodeViewer.renderMode.caption",2)))])],1),r("v-expansion-panel-content",[r("v-card",[r("h4",[e._v(e._s(e.$tc("plugins.gcodeViewer.renderMode".caption,2)))]),r("v-btn-toggle",{staticClass:"btn-toggle d-flex",attrs:{block:"",exclusive:""},model:{value:e.colorMode,callback:function(t){e.colorMode=t},expression:"colorMode"}},[r("v-btn",{attrs:{block:"",value:0,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.color")))]),r("v-btn",{attrs:{block:"",value:1,disabled:e.loading}},[e._v(e._s(e.$t("plugins.gcodeViewer.feedrate")))])],1),r("h4",[e._v(e._s(e.$t("plugins.gcodeViewer.minFeedrate")))]),r("slider",{attrs:{min:5,max:500},model:{value:e.minColorRate,callback:function(t){e.minColorRate=t},expression:"minColorRate"}}),r("h4",[e._v(e._s(e.$t("plugins.gcodeViewer.maxFeedrate")))]),r("slider",{attrs:{min:5,max:500},model:{value:e.maxColorRate,callback:function(t){e.maxColorRate=t},expression:"maxColorRate"}})],1),r("v-card",[r("v-card-title",[r("h4",[e._v(e._s(e.$t("plugins.gcodeViewer.minFeedrateColor")))])]),r("v-card-text",[r("gcodeviewer-color-picker",{attrs:{editcolor:e.minFeedColor},on:{updatecolor:function(t){return e.updateMinFeedColor(t)}}})],1)],1),r("v-card",[r("v-card-title",[r("h4",[e._v(e._s(e.$t("plugins.gcodeViewer.maxFeedrateColor")))])]),r("v-card-text",[r("gcodeviewer-color-picker",{attrs:{editcolor:e.maxFeedColor},on:{updatecolor:function(t){return e.updateMaxFeedColor(t)}}})],1)],1),r("v-btn",{staticClass:"mb-2",attrs:{disabled:e.loading,block:"",color:"primary",title:e.$t("plugins.gcodeViewer.reloadView.title")},on:{click:e.reloadviewer}},[e._v(e._s(e.$t("plugins.gcodeViewer.reloadView.caption")))])],1)],1),r("v-expansion-panel",{on:{click:e.scrollIntoView}},[r("v-expansion-panel-header",{attrs:{title:e.$t("plugins.gcodeViewer.progress.title")}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-progress-clock")]),r("strong",[e._v(e._s(e.$t("plugins.gcodeViewer.progress.caption")))])],1),r("v-expansion-panel-content",[r("v-card",[r("div",[e._v(e._s(e.$t("plugins.gcodeViewer.topClipping")))]),r("v-slider",{attrs:{min:"0.1",max:e.maxHeight,"thumb-label":"","thumb-size":"24",step:"0.1"},model:{value:e.sliderHeight,callback:function(t){e.sliderHeight=t},expression:"sliderHeight"}}),r("div",[e._v(e._s(e.$t("plugins.gcodeViewer.bottomClipping")))]),r("v-slider",{attrs:{min:"0.1",max:e.maxHeight,"thumb-label":"","thumb-size":"24",step:"0.1"},model:{value:e.sliderBottomHeight,callback:function(t){e.sliderBottomHeight=t},expression:"sliderBottomHeight"}}),r("v-checkbox",{attrs:{label:e.$t("plugins.gcodeViewer.liveZTracking")},model:{value:e.liveZTracking,callback:function(t){e.liveZTracking=t},expression:"liveZTracking"}})],1),r("v-card",[r("v-card-title",[e._v(e._s(e.$t("plugins.gcodeViewer.progressColor")))]),r("v-card-text",[r("gcodeviewer-color-picker",{attrs:{editcolor:e.progressColor},on:{updatecolor:function(t){return e.updateProgressColor(t)}}})],1)],1)],1)],1),r("v-expansion-panel",{on:{click:e.scrollIntoView}},[r("v-expansion-panel-header",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-cog")]),r("strong",[e._v(e._s(e.$t("plugins.gcodeViewer.settings")))])],1),r("v-expansion-panel-content",[r("v-card",[r("v-card-title",[e._v(e._s(e.$t("plugins.gcodeViewer.background")))]),r("v-card-text",[r("gcodeviewer-color-picker",{attrs:{editcolor:e.backgroundColor},on:{updatecolor:function(t){return e.updateBackground(t)}}})],1)],1),r("v-card",[r("v-card-title",[e._v(e._s(e.$t("plugins.gcodeViewer.bedRenderMode")))]),r("v-card-text",[r("v-btn-toggle",{staticClass:"d-flex flex-column",model:{value:e.bedRenderMode,callback:function(t){e.bedRenderMode=t},expression:"bedRenderMode"}},[r("v-btn",{attrs:{block:"",value:0}},[e._v(e._s(e.$t("plugins.gcodeViewer.bed")))]),r("v-btn",{attrs:{block:"",value:1}},[e._v(e._s(e.$t("plugins.gcodeViewer.volume")))])],1),r("br"),r("gcodeviewer-color-picker",{attrs:{editcolor:e.bedColor},on:{updatecolor:function(t){return e.updateBedColor(t)}}})],1)],1),r("v-card",[r("v-card-text",[r("v-checkbox",{attrs:{label:e.$t("plugins.gcodeViewer.showAxes")},model:{value:e.showAxes,callback:function(t){e.showAxes=t},expression:"showAxes"}}),r("v-checkbox",{attrs:{label:e.$t("plugins.gcodeViewer.showObjectLabels")},model:{value:e.showObjectLabels,callback:function(t){e.showObjectLabels=t},expression:"showObjectLabels"}}),r("v-switch",{attrs:{label:e.$t("plugins.gcodeViewer.cameraInertia")},model:{value:e.cameraInertia,callback:function(t){e.cameraInertia=t},expression:"cameraInertia"}})],1)],1)],1)],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"300"},model:{value:e.objectDialogData.showDialog,callback:function(t){e.$set(e.objectDialogData,"showDialog",t)},expression:"objectDialogData.showDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[r("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.objectDialogData.info.cancelled?"mdi-reload":"mdi-cancel"))]),e._v(" "+e._s(e.objectDialogData.info.cancelled?"Resume":"Cancel")+" Object ")],1),r("v-card-text",[e._v(e._s(e.objectDialogData.info.name))]),r("v-card-actions",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.objectDialogCancelObject}},[e._v("Ok")])],1),r("v-col",{attrs:{cols:"6"}},[r("v-btn",{attrs:{block:"",color:"error"},on:{click:function(t){e.objectDialogData.showDialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)],1)],1)},n=[]},"./node_modules/core-js/internals/get-iterator.js":function(e,t,r){var n=r("./node_modules/core-js/internals/an-object.js"),i=r("./node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},"./node_modules/core-js/internals/native-url.js":function(e,t,r){var n=r("./node_modules/core-js/internals/fails.js"),i=r("./node_modules/core-js/internals/well-known-symbol.js"),o=r("./node_modules/core-js/internals/is-pure.js"),s=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),r+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"./node_modules/core-js/internals/number-parse-int.js":function(e,t,r){var n=r("./node_modules/core-js/internals/global.js"),i=r("./node_modules/core-js/internals/string-trim.js").trim,o=r("./node_modules/core-js/internals/whitespaces.js"),s=n.parseInt,a=/^[+-]?0[Xx]/,u=8!==s(o+"08")||22!==s(o+"0x16");e.exports=u?function parseInt(e,t){var r=i(String(e));return s(r,t>>>0||(a.test(r)?16:10))}:s},"./node_modules/core-js/internals/string-pad-webkit-bug.js":function(e,t,r){var n=r("./node_modules/core-js/internals/engine-user-agent.js");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},"./node_modules/core-js/internals/string-pad.js":function(e,t,r){var n=r("./node_modules/core-js/internals/to-length.js"),i=r("./node_modules/core-js/internals/string-repeat.js"),o=r("./node_modules/core-js/internals/require-object-coercible.js"),s=Math.ceil,createMethod=function(e){return function(t,r,a){var u,c,l=String(o(t)),d=l.length,h=void 0===a?" ":String(a),f=n(r);return f<=d||""==h?l:(u=f-d,c=i.call(h,s(u/h.length)),c.length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:createMethod(!1),end:createMethod(!0)}},"./node_modules/core-js/internals/string-punycode-to-ascii.js":function(e,t,r){"use strict";var n=2147483647,i=36,o=1,s=26,a=38,u=700,c=72,l=128,d="-",h=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",m=i-o,_=Math.floor,g=String.fromCharCode,ucs2decode=function(e){var t=[],r=0,n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t},digitToBasic=function(e){return e+22+75*(e<26)},adapt=function(e,t,r){var n=0;for(e=r?_(e/u):e>>1,e+=_(e/t);e>m*s>>1;n+=i)e=_(e/m);return _(n+(m+1)*e/(e+a))},encode=function(e){var t=[];e=ucs2decode(e);var r,a,u=e.length,h=l,f=0,m=c;for(r=0;r<e.length;r++)a=e[r],a<128&&t.push(g(a));var b=t.length,v=b;b&&t.push(d);while(v<u){var M=n;for(r=0;r<e.length;r++)a=e[r],a>=h&&a<M&&(M=a);var T=v+1;if(M-h>_((n-f)/T))throw RangeError(p);for(f+=(M-h)*T,h=M,r=0;r<e.length;r++){if(a=e[r],a<h&&++f>n)throw RangeError(p);if(a==h){for(var S=f,C=i;;C+=i){var E=C<=m?o:C>=m+s?s:C-m;if(S<E)break;var P=S-E,A=i-E;t.push(g(digitToBasic(E+P%A))),S=_(P/A)}t.push(g(digitToBasic(S))),m=adapt(f,T,v==b),f=0,++v}}++f,++h}return t.join("")};e.exports=function(e){var t,r,n=[],i=e.toLowerCase().replace(f,".").split(".");for(t=0;t<i.length;t++)r=i[t],n.push(h.test(r)?"xn--"+encode(r):r);return n.join(".")}},"./node_modules/core-js/modules/es.number.parse-int.js":function(e,t,r){var n=r("./node_modules/core-js/internals/export.js"),i=r("./node_modules/core-js/internals/number-parse-int.js");n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},"./node_modules/core-js/modules/es.string.pad-end.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/internals/export.js"),i=r("./node_modules/core-js/internals/string-pad.js").end,o=r("./node_modules/core-js/internals/string-pad-webkit-bug.js");n({target:"String",proto:!0,forced:o},{padEnd:function padEnd(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/web.url-search-params.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.iterator.js");var n=r("./node_modules/core-js/internals/export.js"),i=r("./node_modules/core-js/internals/get-built-in.js"),o=r("./node_modules/core-js/internals/native-url.js"),s=r("./node_modules/core-js/internals/redefine.js"),a=r("./node_modules/core-js/internals/redefine-all.js"),u=r("./node_modules/core-js/internals/set-to-string-tag.js"),c=r("./node_modules/core-js/internals/create-iterator-constructor.js"),l=r("./node_modules/core-js/internals/internal-state.js"),d=r("./node_modules/core-js/internals/an-instance.js"),h=r("./node_modules/core-js/internals/has.js"),f=r("./node_modules/core-js/internals/function-bind-context.js"),p=r("./node_modules/core-js/internals/classof.js"),m=r("./node_modules/core-js/internals/an-object.js"),_=r("./node_modules/core-js/internals/is-object.js"),g=r("./node_modules/core-js/internals/object-create.js"),b=r("./node_modules/core-js/internals/create-property-descriptor.js"),v=r("./node_modules/core-js/internals/get-iterator.js"),M=r("./node_modules/core-js/internals/get-iterator-method.js"),T=r("./node_modules/core-js/internals/well-known-symbol.js"),S=i("fetch"),C=i("Headers"),E=T("iterator"),P="URLSearchParams",A=P+"Iterator",j=l.set,O=l.getterFor(P),R=l.getterFor(A),I=/\+/g,w=Array(4),percentSequence=function(e){return w[e-1]||(w[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},percentDecode=function(e){try{return decodeURIComponent(e)}catch(t){return e}},deserialize=function(e){var t=e.replace(I," "),r=4;try{return decodeURIComponent(t)}catch(n){while(r)t=t.replace(percentSequence(r--),percentDecode);return t}},D=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(e){return F[e]},serialize=function(e){return encodeURIComponent(e).replace(D,replacer)},parseSearchParams=function(e,t){if(t){var r,n,i=t.split("&"),o=0;while(o<i.length)r=i[o++],r.length&&(n=r.split("="),e.push({key:deserialize(n.shift()),value:deserialize(n.join("="))}))}},updateSearchParams=function(e){this.entries.length=0,parseSearchParams(this.entries,e)},validateArgumentsLength=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function Iterator(e,t){j(this,{type:A,iterator:v(O(e).entries),kind:t})}),"Iterator",(function next(){var e=R(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),L=function URLSearchParams(){d(this,L,P);var e,t,r,n,i,o,s,a,u,c=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(j(l,{type:P,entries:f,updateURL:function(){},updateSearchParams:updateSearchParams}),void 0!==c)if(_(c))if(e=M(c),"function"===typeof e){t=e.call(c),r=t.next;while(!(n=r.call(t)).done){if(i=v(m(n.value)),o=i.next,(s=o.call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:s.value+"",value:a.value+""})}}else for(u in c)h(c,u)&&f.push({key:u,value:c[u]+""});else parseSearchParams(f,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},V=L.prototype;a(V,{append:function append(e,t){validateArgumentsLength(arguments.length,2);var r=O(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){validateArgumentsLength(arguments.length,1);var t=O(this),r=t.entries,n=e+"",i=0;while(i<r.length)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function get(e){validateArgumentsLength(arguments.length,1);for(var t=O(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function getAll(e){validateArgumentsLength(arguments.length,1);for(var t=O(this).entries,r=e+"",n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function has(e){validateArgumentsLength(arguments.length,1);var t=O(this).entries,r=e+"",n=0;while(n<t.length)if(t[n++].key===r)return!0;return!1},set:function set(e,t){validateArgumentsLength(arguments.length,1);for(var r,n=O(this),i=n.entries,o=!1,s=e+"",a=t+"",u=0;u<i.length;u++)r=i[u],r.key===s&&(o?i.splice(u--,1):(o=!0,r.value=a));o||i.push({key:s,value:a}),n.updateURL()},sort:function sort(){var e,t,r,n=O(this),i=n.entries,o=i.slice();for(i.length=0,r=0;r<o.length;r++){for(e=o[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function forEach(e){var t,r=O(this).entries,n=f(e,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<r.length)t=r[i++],n(t.value,t.key,this)},keys:function keys(){return new B(this,"keys")},values:function values(){return new B(this,"values")},entries:function entries(){return new B(this,"entries")}},{enumerable:!0}),s(V,E,V.entries),s(V,"toString",(function toString(){var e,t=O(this).entries,r=[],n=0;while(n<t.length)e=t[n++],r.push(serialize(e.key)+"="+serialize(e.value));return r.join("&")}),{enumerable:!0}),u(L,P),n({global:!0,forced:!o},{URLSearchParams:L}),o||"function"!=typeof S||"function"!=typeof C||n({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(e){var t,r,n,i=[e];return arguments.length>1&&(t=arguments[1],_(t)&&(r=t.body,p(r)===P&&(n=t.headers?new C(t.headers):new C,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:b(0,String(r)),headers:b(0,n)}))),i.push(t)),S.apply(this,i)}}),e.exports={URLSearchParams:L,getState:O}},"./node_modules/core-js/modules/web.url.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.string.iterator.js");var n,i=r("./node_modules/core-js/internals/export.js"),o=r("./node_modules/core-js/internals/descriptors.js"),s=r("./node_modules/core-js/internals/native-url.js"),a=r("./node_modules/core-js/internals/global.js"),u=r("./node_modules/core-js/internals/object-define-properties.js"),c=r("./node_modules/core-js/internals/redefine.js"),l=r("./node_modules/core-js/internals/an-instance.js"),d=r("./node_modules/core-js/internals/has.js"),h=r("./node_modules/core-js/internals/object-assign.js"),f=r("./node_modules/core-js/internals/array-from.js"),p=r("./node_modules/core-js/internals/string-multibyte.js").codeAt,m=r("./node_modules/core-js/internals/string-punycode-to-ascii.js"),_=r("./node_modules/core-js/internals/set-to-string-tag.js"),g=r("./node_modules/core-js/modules/web.url-search-params.js"),b=r("./node_modules/core-js/internals/internal-state.js"),v=a.URL,M=g.URLSearchParams,T=g.getState,S=b.set,C=b.getterFor("URL"),E=Math.floor,P=Math.pow,A="Invalid authority",j="Invalid scheme",O="Invalid host",R="Invalid port",I=/[A-Za-z]/,w=/[\d+-.A-Za-z]/,D=/\d/,F=/^(0x|0X)/,B=/^[0-7]+$/,L=/^\d+$/,V=/^[\dA-Fa-f]+$/,N=/[\0\t\n\r #%/:?@[\\]]/,k=/[\0\t\n\r #/:?@[\\]]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,z=/[\t\n\r]/g,parseHost=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return O;if(r=parseIPv6(t.slice(1,-1)),!r)return O;e.host=r}else if(isSpecial(e)){if(t=m(t),N.test(t))return O;if(r=parseIPv4(t),null===r)return O;e.host=r}else{if(k.test(t))return O;for(r="",n=f(t),i=0;i<n.length;i++)r+=percentEncode(n[i],G);e.host=r}},parseIPv4=function(e){var t,r,n,i,o,s,a,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),t=u.length,t>4)return e;for(r=[],n=0;n<t;n++){if(i=u[n],""==i)return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=F.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?L:8==o?B:V).test(i))return e;s=parseInt(i,o)}r.push(s)}for(n=0;n<t;n++)if(s=r[n],n==t-1){if(s>=P(256,5-t))return null}else if(s>255)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*P(256,3-n);return a},parseIPv6=function(e){var t,r,n,i,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,char=function(){return e.charAt(d)};if(":"==char()){if(":"!=e.charAt(1))return;d+=2,c++,l=c}while(char()){if(8==c)return;if(":"!=char()){t=r=0;while(r<4&&V.test(char()))t=16*t+parseInt(char(),16),d++,r++;if("."==char()){if(0==r)return;if(d-=r,c>6)return;n=0;while(char()){if(i=null,n>0){if(!("."==char()&&n<4))return;d++}if(!D.test(char()))return;while(D.test(char())){if(o=parseInt(char(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}u[c]=256*u[c]+i,n++,2!=n&&4!=n||c++}if(4!=n)return;break}if(":"==char()){if(d++,!char())return}else if(char())return;u[c++]=t}else{if(null!==l)return;d++,c++,l=c}}if(null!==l){s=c-l,c=7;while(0!=c&&s>0)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a}else if(8!=c)return;return u},findLongestZeroSequence=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t},serializeHost=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=findLongestZeroSequence(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},G={},W=h({},G,{" ":1,'"':1,"<":1,">":1,"`":1}),H=h({},W,{"#":1,"?":1,"{":1,"}":1}),X=h({},H,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(e,t){var r=p(e,0);return r>32&&r<127&&!d(t,e)?e:encodeURIComponent(e)},q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(e){return d(q,e.scheme)},includesCredentials=function(e){return""!=e.username||""!=e.password},cannotHaveUsernamePasswordPort=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},isWindowsDriveLetter=function(e,t){var r;return 2==e.length&&I.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},startsWithWindowsDriveLetter=function(e){var t;return e.length>1&&isWindowsDriveLetter(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},shortenURLsPath=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&isWindowsDriveLetter(t[0],!0)||t.pop()},isSingleDot=function(e){return"."===e||"%2e"===e.toLowerCase()},isDoubleDot=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},K={},Y={},Q={},Z={},$={},J={},ee={},te={},re={},ne={},ie={},oe={},se={},ae={},ue={},ce={},le={},de={},he={},fe={},pe={},parseURL=function(e,t,r,i){var o,s,a,u,c=r||K,l=0,h="",p=!1,m=!1,_=!1;r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(U,"")),t=t.replace(z,""),o=f(t);while(l<=o.length){switch(s=o[l],c){case K:if(!s||!I.test(s)){if(r)return j;c=Q;continue}h+=s.toLowerCase(),c=Y;break;case Y:if(s&&(w.test(s)||"+"==s||"-"==s||"."==s))h+=s.toLowerCase();else{if(":"!=s){if(r)return j;h="",c=Q,l=0;continue}if(r&&(isSpecial(e)!=d(q,h)||"file"==h&&(includesCredentials(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,r)return void(isSpecial(e)&&q[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?c=ae:isSpecial(e)&&i&&i.scheme==e.scheme?c=Z:isSpecial(e)?c=te:"/"==o[l+1]?(c=$,l++):(e.cannotBeABaseURL=!0,e.path.push(""),c=he)}break;case Q:if(!i||i.cannotBeABaseURL&&"#"!=s)return j;if(i.cannotBeABaseURL&&"#"==s){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=pe;break}c="file"==i.scheme?ae:J;continue;case Z:if("/"!=s||"/"!=o[l+1]){c=J;continue}c=re,l++;break;case $:if("/"==s){c=ne;break}c=de;continue;case J:if(e.scheme=i.scheme,s==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==s||"\\"==s&&isSpecial(e))c=ee;else if("?"==s)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=fe;else{if("#"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=de;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=pe}break;case ee:if(!isSpecial(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=de;continue}c=ne}else c=re;break;case te:if(c=re,"/"!=s||"/"!=h.charAt(l+1))continue;l++;break;case re:if("/"!=s&&"\\"!=s){c=ne;continue}break;case ne:if("@"==s){p&&(h="%40"+h),p=!0,a=f(h);for(var g=0;g<a.length;g++){var b=a[g];if(":"!=b||_){var v=percentEncode(b,X);_?e.password+=v:e.username+=v}else _=!0}h=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&isSpecial(e)){if(p&&""==h)return A;l-=f(h).length+1,h="",c=ie}else h+=s;break;case ie:case oe:if(r&&"file"==e.scheme){c=ce;continue}if(":"!=s||m){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&isSpecial(e)){if(isSpecial(e)&&""==h)return O;if(r&&""==h&&(includesCredentials(e)||null!==e.port))return;if(u=parseHost(e,h),u)return u;if(h="",c=le,r)return;continue}"["==s?m=!0:"]"==s&&(m=!1),h+=s}else{if(""==h)return O;if(u=parseHost(e,h),u)return u;if(h="",c=se,r==oe)return}break;case se:if(!D.test(s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&isSpecial(e)||r){if(""!=h){var M=parseInt(h,10);if(M>65535)return R;e.port=isSpecial(e)&&M===q[e.scheme]?null:M,h=""}if(r)return;c=le;continue}return R}h+=s;break;case ae:if(e.scheme="file","/"==s||"\\"==s)c=ue;else{if(!i||"file"!=i.scheme){c=de;continue}if(s==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==s)e.host=i.host,e.path=i.path.slice(),e.query="",c=fe;else{if("#"!=s){startsWithWindowsDriveLetter(o.slice(l).join(""))||(e.host=i.host,e.path=i.path.slice(),shortenURLsPath(e)),c=de;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=pe}}break;case ue:if("/"==s||"\\"==s){c=ce;break}i&&"file"==i.scheme&&!startsWithWindowsDriveLetter(o.slice(l).join(""))&&(isWindowsDriveLetter(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=de;continue;case ce:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!r&&isWindowsDriveLetter(h))c=de;else if(""==h){if(e.host="",r)return;c=le}else{if(u=parseHost(e,h),u)return u;if("localhost"==e.host&&(e.host=""),r)return;h="",c=le}continue}h+=s;break;case le:if(isSpecial(e)){if(c=de,"/"!=s&&"\\"!=s)continue}else if(r||"?"!=s)if(r||"#"!=s){if(s!=n&&(c=de,"/"!=s))continue}else e.fragment="",c=pe;else e.query="",c=fe;break;case de:if(s==n||"/"==s||"\\"==s&&isSpecial(e)||!r&&("?"==s||"#"==s)){if(isDoubleDot(h)?(shortenURLsPath(e),"/"==s||"\\"==s&&isSpecial(e)||e.path.push("")):isSingleDot(h)?"/"==s||"\\"==s&&isSpecial(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&isWindowsDriveLetter(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(s==n||"?"==s||"#"==s))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==s?(e.query="",c=fe):"#"==s&&(e.fragment="",c=pe)}else h+=percentEncode(s,H);break;case he:"?"==s?(e.query="",c=fe):"#"==s?(e.fragment="",c=pe):s!=n&&(e.path[0]+=percentEncode(s,G));break;case fe:r||"#"!=s?s!=n&&("'"==s&&isSpecial(e)?e.query+="%27":e.query+="#"==s?"%23":percentEncode(s,G)):(e.fragment="",c=pe);break;case pe:s!=n&&(e.fragment+=percentEncode(s,W));break}l++}},me=function URL(e){var t,r,n=l(this,me,"URL"),i=arguments.length>1?arguments[1]:void 0,s=String(e),a=S(n,{type:"URL"});if(void 0!==i)if(i instanceof me)t=C(i);else if(r=parseURL(t={},String(i)),r)throw TypeError(r);if(r=parseURL(a,s,null,t),r)throw TypeError(r);var u=a.searchParams=new M,c=T(u);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(u)||null},o||(n.href=serializeURL.call(n),n.origin=getOrigin.call(n),n.protocol=getProtocol.call(n),n.username=getUsername.call(n),n.password=getPassword.call(n),n.host=getHost.call(n),n.hostname=getHostname.call(n),n.port=getPort.call(n),n.pathname=getPathname.call(n),n.search=getSearch.call(n),n.searchParams=getSearchParams.call(n),n.hash=getHash.call(n))},_e=me.prototype,serializeURL=function(){var e=C(this),t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,s=e.path,a=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",includesCredentials(e)&&(c+=r+(n?":"+n:"")+"@"),c+=serializeHost(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},getOrigin=function(){var e=C(this),t=e.scheme,r=e.port;if("blob"==t)try{return new me(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&isSpecial(e)?t+"://"+serializeHost(e.host)+(null!==r?":"+r:""):"null"},getProtocol=function(){return C(this).scheme+":"},getUsername=function(){return C(this).username},getPassword=function(){return C(this).password},getHost=function(){var e=C(this),t=e.host,r=e.port;return null===t?"":null===r?serializeHost(t):serializeHost(t)+":"+r},getHostname=function(){var e=C(this).host;return null===e?"":serializeHost(e)},getPort=function(){var e=C(this).port;return null===e?"":String(e)},getPathname=function(){var e=C(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},getSearch=function(){var e=C(this).query;return e?"?"+e:""},getSearchParams=function(){return C(this).searchParams},getHash=function(){var e=C(this).fragment;return e?"#"+e:""},accessorDescriptor=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&u(_e,{href:accessorDescriptor(serializeURL,(function(e){var t=C(this),r=String(e),n=parseURL(t,r);if(n)throw TypeError(n);T(t.searchParams).updateSearchParams(t.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(e){var t=C(this);parseURL(t,String(e)+":",K)})),username:accessorDescriptor(getUsername,(function(e){var t=C(this),r=f(String(e));if(!cannotHaveUsernamePasswordPort(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=percentEncode(r[n],X)}})),password:accessorDescriptor(getPassword,(function(e){var t=C(this),r=f(String(e));if(!cannotHaveUsernamePasswordPort(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=percentEncode(r[n],X)}})),host:accessorDescriptor(getHost,(function(e){var t=C(this);t.cannotBeABaseURL||parseURL(t,String(e),ie)})),hostname:accessorDescriptor(getHostname,(function(e){var t=C(this);t.cannotBeABaseURL||parseURL(t,String(e),oe)})),port:accessorDescriptor(getPort,(function(e){var t=C(this);cannotHaveUsernamePasswordPort(t)||(e=String(e),""==e?t.port=null:parseURL(t,e,se))})),pathname:accessorDescriptor(getPathname,(function(e){var t=C(this);t.cannotBeABaseURL||(t.path=[],parseURL(t,e+"",le))})),search:accessorDescriptor(getSearch,(function(e){var t=C(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",parseURL(t,e,fe)),T(t.searchParams).updateSearchParams(t.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(e){var t=C(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",parseURL(t,e,pe)):t.fragment=null}))}),c(_e,"toJSON",(function toJSON(){return serializeURL.call(this)}),{enumerable:!0}),c(_e,"toString",(function toString(){return serializeURL.call(this)}),{enumerable:!0}),v){var ge=v.createObjectURL,be=v.revokeObjectURL;ge&&c(me,"createObjectURL",(function createObjectURL(e){return ge.apply(v,arguments)})),be&&c(me,"revokeObjectURL",(function revokeObjectURL(e){return be.apply(v,arguments)}))}_(me,"URL"),i({global:!0,forced:!s,sham:!o},{URL:me})},"./node_modules/d3-array/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"slice",(function(){return i})),r.d(t,"map",(function(){return o}));var n=Array.prototype,i=n.slice,o=n.map},"./node_modules/d3-array/src/ascending.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},"./node_modules/d3-array/src/bin.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/array.js"),i=r("./node_modules/d3-array/src/bisect.js"),o=r("./node_modules/d3-array/src/constant.js"),s=r("./node_modules/d3-array/src/extent.js"),a=r("./node_modules/d3-array/src/identity.js"),u=r("./node_modules/d3-array/src/nice.js"),c=r("./node_modules/d3-array/src/ticks.js"),l=r("./node_modules/d3-array/src/threshold/sturges.js");t["default"]=function(){var e=a["default"],t=s["default"],r=l["default"];function histogram(n){Array.isArray(n)||(n=Array.from(n));var o,a,l=n.length,d=new Array(l);for(o=0;o<l;++o)d[o]=e(n[o],o,n);var h=t(d),f=h[0],p=h[1],m=r(d,f,p);if(!Array.isArray(m)){const e=p,r=+m;if(t===s["default"]&&([f,p]=Object(u["default"])(f,p,r)),m=Object(c["default"])(f,p,r),m[m.length-1]>=p)if(e>=p&&t===s["default"]){const e=Object(c["tickIncrement"])(f,p,r);isFinite(e)&&(e>0?p=(Math.floor(p/e)+1)*e:e<0&&(p=(Math.ceil(p*-e)+1)/-e))}else m.pop()}var _=m.length;while(m[0]<=f)m.shift(),--_;while(m[_-1]>p)m.pop(),--_;var g,b=new Array(_+1);for(o=0;o<=_;++o)g=b[o]=[],g.x0=o>0?m[o-1]:f,g.x1=o<_?m[o]:p;for(o=0;o<l;++o)a=d[o],f<=a&&a<=p&&b[Object(i["default"])(m,a,0,_)].push(n[o]);return b}return histogram.value=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["default"])(t),histogram):e},histogram.domain=function(e){return arguments.length?(t="function"===typeof e?e:Object(o["default"])([e[0],e[1]]),histogram):t},histogram.thresholds=function(e){return arguments.length?(r="function"===typeof e?e:Array.isArray(e)?Object(o["default"])(n["slice"].call(e)):Object(o["default"])(e),histogram):r},histogram}},"./node_modules/d3-array/src/bisect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bisectRight",(function(){return a})),r.d(t,"bisectLeft",(function(){return u})),r.d(t,"bisectCenter",(function(){return c}));var n=r("./node_modules/d3-array/src/ascending.js"),i=r("./node_modules/d3-array/src/bisector.js"),o=r("./node_modules/d3-array/src/number.js");const s=Object(i["default"])(n["default"]),a=s.right,u=s.left,c=Object(i["default"])(o["default"]).center;t["default"]=a},"./node_modules/d3-array/src/bisector.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/ascending.js");function ascendingComparator(e){return(t,r)=>Object(n["default"])(e(t),r)}t["default"]=function(e){let t=e,r=e;function left(e,t,n,i){null==n&&(n=0),null==i&&(i=e.length);while(n<i){const o=n+i>>>1;r(e[o],t)<0?n=o+1:i=o}return n}function right(e,t,n,i){null==n&&(n=0),null==i&&(i=e.length);while(n<i){const o=n+i>>>1;r(e[o],t)>0?i=o:n=o+1}return n}function center(e,r,n,i){null==n&&(n=0),null==i&&(i=e.length);const o=left(e,r,n,i-1);return o>n&&t(e[o-1],r)>-t(e[o],r)?o-1:o}return 1===e.length&&(t=(t,r)=>e(t)-r,r=ascendingComparator(e)),{left:left,center:center,right:right}}},"./node_modules/d3-array/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-array/src/count.js":function(e,t,r){"use strict";function count(e,t){let r=0;if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&++r;else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&++r}return r}r.r(t),r.d(t,"default",(function(){return count}))},"./node_modules/d3-array/src/cross.js":function(e,t,r){"use strict";function length(e){return 0|e.length}function empty(e){return!(e>0)}function arrayify(e){return"object"!==typeof e||"length"in e?e:Array.from(e)}function reducer(e){return t=>e(...t)}function cross(...e){const t="function"===typeof e[e.length-1]&&reducer(e.pop());e=e.map(arrayify);const r=e.map(length),n=e.length-1,i=new Array(n+1).fill(0),o=[];if(n<0||r.some(empty))return o;while(1){o.push(i.map((t,r)=>e[r][t]));let s=n;while(++i[s]===r[s]){if(0===s)return t?o.map(t):o;i[s--]=0}}}r.r(t),r.d(t,"default",(function(){return cross}))},"./node_modules/d3-array/src/cumsum.js":function(e,t,r){"use strict";function cumsum(e,t){var r=0,n=0;return Float64Array.from(e,void 0===t?e=>r+=+e||0:i=>r+=+t(i,n++,e)||0)}r.r(t),r.d(t,"default",(function(){return cumsum}))},"./node_modules/d3-array/src/descending.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}},"./node_modules/d3-array/src/deviation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return deviation}));var n=r("./node_modules/d3-array/src/variance.js");function deviation(e,t){const r=Object(n["default"])(e,t);return r?Math.sqrt(r):r}},"./node_modules/d3-array/src/difference.js":function(e,t,r){"use strict";function difference(e,...t){e=new Set(e);for(const r of t)for(const t of r)e.delete(t);return e}r.r(t),r.d(t,"default",(function(){return difference}))},"./node_modules/d3-array/src/disjoint.js":function(e,t,r){"use strict";function disjoint(e,t){const r=t[Symbol.iterator](),n=new Set;for(const i of e){if(n.has(i))return!1;let e,t;while(({value:e,done:t}=r.next())){if(t)break;if(Object.is(i,e))return!1;n.add(e)}}return!0}r.r(t),r.d(t,"default",(function(){return disjoint}))},"./node_modules/d3-array/src/every.js":function(e,t,r){"use strict";function every(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");let r=-1;for(const n of e)if(!t(n,++r,e))return!1;return!0}r.r(t),r.d(t,"default",(function(){return every}))},"./node_modules/d3-array/src/extent.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){let r,n;if(void 0===t)for(const i of e)null!=i&&(void 0===r?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===r?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}},"./node_modules/d3-array/src/filter.js":function(e,t,r){"use strict";function filter(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");const r=[];let n=-1;for(const i of e)t(i,++n,e)&&r.push(i);return r}r.r(t),r.d(t,"default",(function(){return filter}))},"./node_modules/d3-array/src/fsum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Adder",(function(){return Adder})),r.d(t,"fsum",(function(){return fsum})),r.d(t,"fcumsum",(function(){return fcumsum}));class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let r=0;for(let n=0;n<this._n&&n<32;n++){const i=t[n],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(t[r++]=s),e=o}return t[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let t,r,n,i=this._n,o=0;if(i>0){o=e[--i];while(i>0)if(t=o,r=e[--i],o=t+r,n=r-(o-t),n)break;i>0&&(n<0&&e[i-1]<0||n>0&&e[i-1]>0)&&(r=2*n,t=o+r,r==t-o&&(o=t))}return o}}function fsum(e,t){const r=new Adder;if(void 0===t)for(let n of e)(n=+n)&&r.add(n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&r.add(i)}return+r}function fcumsum(e,t){const r=new Adder;let n=-1;return Float64Array.from(e,void 0===t?e=>r.add(+e||0):i=>r.add(+t(i,++n,e)||0))}},"./node_modules/d3-array/src/greatest.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return greatest}));var n=r("./node_modules/d3-array/src/ascending.js");function greatest(e,t=n["default"]){let r,i=!1;if(1===t.length){let o;for(const s of e){const e=t(s);(i?Object(n["default"])(e,o)>0:0===Object(n["default"])(e,e))&&(r=s,o=e,i=!0)}}else for(const n of e)(i?t(n,r)>0:0===t(n,n))&&(r=n,i=!0);return r}},"./node_modules/d3-array/src/greatestIndex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return greatestIndex}));var n=r("./node_modules/d3-array/src/ascending.js"),i=r("./node_modules/d3-array/src/maxIndex.js");function greatestIndex(e,t=n["default"]){if(1===t.length)return Object(i["default"])(e,t);let r,o=-1,s=-1;for(const n of e)++s,(o<0?0===t(n,n):t(n,r)>0)&&(r=n,o=s);return o}},"./node_modules/d3-array/src/group.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return group})),r.d(t,"groups",(function(){return groups})),r.d(t,"rollup",(function(){return rollup})),r.d(t,"rollups",(function(){return rollups})),r.d(t,"index",(function(){return index})),r.d(t,"indexes",(function(){return indexes}));var n=r("./node_modules/internmap/src/index.js"),i=r("./node_modules/d3-array/src/identity.js");function group(e,...t){return nest(e,i["default"],i["default"],t)}function groups(e,...t){return nest(e,Array.from,i["default"],t)}function rollup(e,t,...r){return nest(e,i["default"],t,r)}function rollups(e,t,...r){return nest(e,Array.from,t,r)}function index(e,...t){return nest(e,i["default"],unique,t)}function indexes(e,...t){return nest(e,Array.from,unique,t)}function unique(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function nest(e,t,r,i){return function regroup(e,o){if(o>=i.length)return r(e);const s=new n["InternMap"],a=i[o++];let u=-1;for(const t of e){const r=a(t,++u,e),n=s.get(r);n?n.push(t):s.set(r,[t])}for(const[t,r]of s)s.set(t,regroup(r,o));return t(s)}(e,0)}},"./node_modules/d3-array/src/groupSort.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return groupSort}));var n=r("./node_modules/d3-array/src/ascending.js"),i=r("./node_modules/d3-array/src/group.js"),o=r("./node_modules/d3-array/src/sort.js");function groupSort(e,t,r){return(1===t.length?Object(o["default"])(Object(i["rollup"])(e,t,r),([e,t],[r,i])=>Object(n["default"])(t,i)||Object(n["default"])(e,r)):Object(o["default"])(Object(i["default"])(e,r),([e,r],[i,o])=>t(r,o)||Object(n["default"])(e,i))).map(([e])=>e)}},"./node_modules/d3-array/src/identity.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e}},"./node_modules/d3-array/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/bisect.js");r.d(t,"bisect",(function(){return n["default"]})),r.d(t,"bisectRight",(function(){return n["bisectRight"]})),r.d(t,"bisectLeft",(function(){return n["bisectLeft"]})),r.d(t,"bisectCenter",(function(){return n["bisectCenter"]}));var i=r("./node_modules/d3-array/src/ascending.js");r.d(t,"ascending",(function(){return i["default"]}));var o=r("./node_modules/d3-array/src/bisector.js");r.d(t,"bisector",(function(){return o["default"]}));var s=r("./node_modules/d3-array/src/count.js");r.d(t,"count",(function(){return s["default"]}));var a=r("./node_modules/d3-array/src/cross.js");r.d(t,"cross",(function(){return a["default"]}));var u=r("./node_modules/d3-array/src/cumsum.js");r.d(t,"cumsum",(function(){return u["default"]}));var c=r("./node_modules/d3-array/src/descending.js");r.d(t,"descending",(function(){return c["default"]}));var l=r("./node_modules/d3-array/src/deviation.js");r.d(t,"deviation",(function(){return l["default"]}));var d=r("./node_modules/d3-array/src/extent.js");r.d(t,"extent",(function(){return d["default"]}));var h=r("./node_modules/d3-array/src/fsum.js");r.d(t,"Adder",(function(){return h["Adder"]})),r.d(t,"fsum",(function(){return h["fsum"]})),r.d(t,"fcumsum",(function(){return h["fcumsum"]}));var f=r("./node_modules/d3-array/src/group.js");r.d(t,"group",(function(){return f["default"]})),r.d(t,"groups",(function(){return f["groups"]})),r.d(t,"index",(function(){return f["index"]})),r.d(t,"indexes",(function(){return f["indexes"]})),r.d(t,"rollup",(function(){return f["rollup"]})),r.d(t,"rollups",(function(){return f["rollups"]}));var p=r("./node_modules/d3-array/src/groupSort.js");r.d(t,"groupSort",(function(){return p["default"]}));var m=r("./node_modules/d3-array/src/bin.js");r.d(t,"bin",(function(){return m["default"]})),r.d(t,"histogram",(function(){return m["default"]}));var _=r("./node_modules/d3-array/src/threshold/freedmanDiaconis.js");r.d(t,"thresholdFreedmanDiaconis",(function(){return _["default"]}));var g=r("./node_modules/d3-array/src/threshold/scott.js");r.d(t,"thresholdScott",(function(){return g["default"]}));var b=r("./node_modules/d3-array/src/threshold/sturges.js");r.d(t,"thresholdSturges",(function(){return b["default"]}));var v=r("./node_modules/d3-array/src/max.js");r.d(t,"max",(function(){return v["default"]}));var M=r("./node_modules/d3-array/src/maxIndex.js");r.d(t,"maxIndex",(function(){return M["default"]}));var T=r("./node_modules/d3-array/src/mean.js");r.d(t,"mean",(function(){return T["default"]}));var S=r("./node_modules/d3-array/src/median.js");r.d(t,"median",(function(){return S["default"]}));var C=r("./node_modules/d3-array/src/merge.js");r.d(t,"merge",(function(){return C["default"]}));var E=r("./node_modules/d3-array/src/min.js");r.d(t,"min",(function(){return E["default"]}));var P=r("./node_modules/d3-array/src/minIndex.js");r.d(t,"minIndex",(function(){return P["default"]}));var A=r("./node_modules/d3-array/src/nice.js");r.d(t,"nice",(function(){return A["default"]}));var j=r("./node_modules/d3-array/src/pairs.js");r.d(t,"pairs",(function(){return j["default"]}));var O=r("./node_modules/d3-array/src/permute.js");r.d(t,"permute",(function(){return O["default"]}));var R=r("./node_modules/d3-array/src/quantile.js");r.d(t,"quantile",(function(){return R["default"]})),r.d(t,"quantileSorted",(function(){return R["quantileSorted"]}));var I=r("./node_modules/d3-array/src/quickselect.js");r.d(t,"quickselect",(function(){return I["default"]}));var w=r("./node_modules/d3-array/src/range.js");r.d(t,"range",(function(){return w["default"]}));var D=r("./node_modules/d3-array/src/least.js");r.d(t,"least",(function(){return D["default"]}));var F=r("./node_modules/d3-array/src/leastIndex.js");r.d(t,"leastIndex",(function(){return F["default"]}));var B=r("./node_modules/d3-array/src/greatest.js");r.d(t,"greatest",(function(){return B["default"]}));var L=r("./node_modules/d3-array/src/greatestIndex.js");r.d(t,"greatestIndex",(function(){return L["default"]}));var V=r("./node_modules/d3-array/src/scan.js");r.d(t,"scan",(function(){return V["default"]}));var N=r("./node_modules/d3-array/src/shuffle.js");r.d(t,"shuffle",(function(){return N["default"]})),r.d(t,"shuffler",(function(){return N["shuffler"]}));var k=r("./node_modules/d3-array/src/sum.js");r.d(t,"sum",(function(){return k["default"]}));var U=r("./node_modules/d3-array/src/ticks.js");r.d(t,"ticks",(function(){return U["default"]})),r.d(t,"tickIncrement",(function(){return U["tickIncrement"]})),r.d(t,"tickStep",(function(){return U["tickStep"]}));var z=r("./node_modules/d3-array/src/transpose.js");r.d(t,"transpose",(function(){return z["default"]}));var G=r("./node_modules/d3-array/src/variance.js");r.d(t,"variance",(function(){return G["default"]}));var W=r("./node_modules/d3-array/src/zip.js");r.d(t,"zip",(function(){return W["default"]}));var H=r("./node_modules/d3-array/src/every.js");r.d(t,"every",(function(){return H["default"]}));var X=r("./node_modules/d3-array/src/some.js");r.d(t,"some",(function(){return X["default"]}));var q=r("./node_modules/d3-array/src/filter.js");r.d(t,"filter",(function(){return q["default"]}));var K=r("./node_modules/d3-array/src/map.js");r.d(t,"map",(function(){return K["default"]}));var Y=r("./node_modules/d3-array/src/reduce.js");r.d(t,"reduce",(function(){return Y["default"]}));var Q=r("./node_modules/d3-array/src/reverse.js");r.d(t,"reverse",(function(){return Q["default"]}));var Z=r("./node_modules/d3-array/src/sort.js");r.d(t,"sort",(function(){return Z["default"]}));var $=r("./node_modules/d3-array/src/difference.js");r.d(t,"difference",(function(){return $["default"]}));var J=r("./node_modules/d3-array/src/disjoint.js");r.d(t,"disjoint",(function(){return J["default"]}));var ee=r("./node_modules/d3-array/src/intersection.js");r.d(t,"intersection",(function(){return ee["default"]}));var te=r("./node_modules/d3-array/src/subset.js");r.d(t,"subset",(function(){return te["default"]}));var re=r("./node_modules/d3-array/src/superset.js");r.d(t,"superset",(function(){return re["default"]}));var ne=r("./node_modules/d3-array/src/union.js");r.d(t,"union",(function(){return ne["default"]}));var ie=r("./node_modules/internmap/src/index.js");r.d(t,"InternMap",(function(){return ie["InternMap"]})),r.d(t,"InternSet",(function(){return ie["InternSet"]}))},"./node_modules/d3-array/src/intersection.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return intersection}));var n=r("./node_modules/d3-array/src/set.js");function intersection(e,...t){e=new Set(e),t=t.map(n["default"]);e:for(const r of e)for(const n of t)if(!n.has(r)){e.delete(r);continue e}return e}},"./node_modules/d3-array/src/least.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return least}));var n=r("./node_modules/d3-array/src/ascending.js");function least(e,t=n["default"]){let r,i=!1;if(1===t.length){let o;for(const s of e){const e=t(s);(i?Object(n["default"])(e,o)<0:0===Object(n["default"])(e,e))&&(r=s,o=e,i=!0)}}else for(const n of e)(i?t(n,r)<0:0===t(n,n))&&(r=n,i=!0);return r}},"./node_modules/d3-array/src/leastIndex.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return leastIndex}));var n=r("./node_modules/d3-array/src/ascending.js"),i=r("./node_modules/d3-array/src/minIndex.js");function leastIndex(e,t=n["default"]){if(1===t.length)return Object(i["default"])(e,t);let r,o=-1,s=-1;for(const n of e)++s,(o<0?0===t(n,n):t(n,r)<0)&&(r=n,o=s);return o}},"./node_modules/d3-array/src/map.js":function(e,t,r){"use strict";function map(e,t){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!==typeof t)throw new TypeError("mapper is not a function");return Array.from(e,(r,n)=>t(r,n,e))}r.r(t),r.d(t,"default",(function(){return map}))},"./node_modules/d3-array/src/max.js":function(e,t,r){"use strict";function max(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}r.r(t),r.d(t,"default",(function(){return max}))},"./node_modules/d3-array/src/maxIndex.js":function(e,t,r){"use strict";function maxIndex(e,t){let r,n=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(r<o||void 0===r&&o>=o)&&(r=o,n=i);else for(let o of e)null!=(o=t(o,++i,e))&&(r<o||void 0===r&&o>=o)&&(r=o,n=i);return n}r.r(t),r.d(t,"default",(function(){return maxIndex}))},"./node_modules/d3-array/src/mean.js":function(e,t,r){"use strict";function mean(e,t){let r=0,n=0;if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(++r,n+=i);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++r,n+=o)}if(r)return n/r}r.r(t),r.d(t,"default",(function(){return mean}))},"./node_modules/d3-array/src/median.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/quantile.js");t["default"]=function(e,t){return Object(n["default"])(e,.5,t)}},"./node_modules/d3-array/src/merge.js":function(e,t,r){"use strict";function*flatten(e){for(const t of e)yield*t}function merge(e){return Array.from(flatten(e))}r.r(t),r.d(t,"default",(function(){return merge}))},"./node_modules/d3-array/src/min.js":function(e,t,r){"use strict";function min(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}r.r(t),r.d(t,"default",(function(){return min}))},"./node_modules/d3-array/src/minIndex.js":function(e,t,r){"use strict";function minIndex(e,t){let r,n=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(r>o||void 0===r&&o>=o)&&(r=o,n=i);else for(let o of e)null!=(o=t(o,++i,e))&&(r>o||void 0===r&&o>=o)&&(r=o,n=i);return n}r.r(t),r.d(t,"default",(function(){return minIndex}))},"./node_modules/d3-array/src/nice.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return nice}));var n=r("./node_modules/d3-array/src/ticks.js");function nice(e,t,r){let i;while(1){const o=Object(n["tickIncrement"])(e,t,r);if(o===i||0===o||!isFinite(o))return[e,t];o>0?(e=Math.floor(e/o)*o,t=Math.ceil(t/o)*o):o<0&&(e=Math.ceil(e*o)/o,t=Math.floor(t*o)/o),i=o}}},"./node_modules/d3-array/src/number.js":function(e,t,r){"use strict";function*numbers(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}r.r(t),r.d(t,"numbers",(function(){return numbers})),t["default"]=function(e){return null===e?NaN:+e}},"./node_modules/d3-array/src/pairs.js":function(e,t,r){"use strict";function pairs(e,t=pair){const r=[];let n,i=!1;for(const o of e)i&&r.push(t(n,o)),n=o,i=!0;return r}function pair(e,t){return[e,t]}r.r(t),r.d(t,"default",(function(){return pairs})),r.d(t,"pair",(function(){return pair}))},"./node_modules/d3-array/src/permute.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return Array.from(t,t=>e[t])}},"./node_modules/d3-array/src/quantile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return quantile})),r.d(t,"quantileSorted",(function(){return quantileSorted}));var n=r("./node_modules/d3-array/src/max.js"),i=r("./node_modules/d3-array/src/min.js"),o=r("./node_modules/d3-array/src/quickselect.js"),s=r("./node_modules/d3-array/src/number.js");function quantile(e,t,r){if(e=Float64Array.from(Object(s["numbers"])(e,r)),a=e.length){if((t=+t)<=0||a<2)return Object(i["default"])(e);if(t>=1)return Object(n["default"])(e);var a,u=(a-1)*t,c=Math.floor(u),l=Object(n["default"])(Object(o["default"])(e,c).subarray(0,c+1)),d=Object(i["default"])(e.subarray(c+1));return l+(d-l)*(u-c)}}function quantileSorted(e,t,r=s["default"]){if(n=e.length){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),a=+r(e[o],o,e),u=+r(e[o+1],o+1,e);return a+(u-a)*(i-o)}}},"./node_modules/d3-array/src/quickselect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return quickselect}));var n=r("./node_modules/d3-array/src/ascending.js");function quickselect(e,t,r=0,i=e.length-1,o=n["default"]){while(i>r){if(i-r>600){const n=i-r+1,s=t-r+1,a=Math.log(n),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(n-u)/n)*(s-n/2<0?-1:1),l=Math.max(r,Math.floor(t-s*u/n+c)),d=Math.min(i,Math.floor(t+(n-s)*u/n+c));quickselect(e,t,l,d,o)}const n=e[t];let s=r,a=i;swap(e,r,t),o(e[i],n)>0&&swap(e,r,i);while(s<a){swap(e,s,a),++s,--a;while(o(e[s],n)<0)++s;while(o(e[a],n)>0)--a}0===o(e[r],n)?swap(e,r,a):(++a,swap(e,a,i)),a<=t&&(r=a+1),t<=a&&(i=a-1)}return e}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}},"./node_modules/d3-array/src/range.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(i);while(++n<i)o[n]=e+n*r;return o}},"./node_modules/d3-array/src/reduce.js":function(e,t,r){"use strict";function reduce(e,t,r){if("function"!==typeof t)throw new TypeError("reducer is not a function");const n=e[Symbol.iterator]();let i,o,s=-1;if(arguments.length<3){if(({done:i,value:r}=n.next()),i)return;++s}while(({done:i,value:o}=n.next()),!i)r=t(r,o,++s,e);return r}r.r(t),r.d(t,"default",(function(){return reduce}))},"./node_modules/d3-array/src/reverse.js":function(e,t,r){"use strict";function reverse(e){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}r.r(t),r.d(t,"default",(function(){return reverse}))},"./node_modules/d3-array/src/scan.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return scan}));var n=r("./node_modules/d3-array/src/leastIndex.js");function scan(e,t){const r=Object(n["default"])(e,t);return r<0?void 0:r}},"./node_modules/d3-array/src/set.js":function(e,t,r){"use strict";function set(e){return e instanceof Set?e:new Set(e)}r.r(t),r.d(t,"default",(function(){return set}))},"./node_modules/d3-array/src/shuffle.js":function(e,t,r){"use strict";function shuffler(e){return function shuffle(t,r=0,n=t.length){let i=n-(r=+r);while(i){const n=e()*i--|0,o=t[i+r];t[i+r]=t[n+r],t[n+r]=o}return t}}r.r(t),r.d(t,"shuffler",(function(){return shuffler})),t["default"]=shuffler(Math.random)},"./node_modules/d3-array/src/some.js":function(e,t,r){"use strict";function some(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");let r=-1;for(const n of e)if(t(n,++r,e))return!0;return!1}r.r(t),r.d(t,"default",(function(){return some}))},"./node_modules/d3-array/src/sort.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return sort}));var n=r("./node_modules/d3-array/src/ascending.js"),i=r("./node_modules/d3-array/src/permute.js");function sort(e,...t){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[r=n["default"]]=t;if(1===r.length||t.length>1){const o=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),o.sort((e,r)=>{for(const i of t){const t=Object(n["default"])(i[e],i[r]);if(t)return t}})):(r=e.map(r),o.sort((e,t)=>Object(n["default"])(r[e],r[t]))),Object(i["default"])(e,o)}return e.sort(r)}},"./node_modules/d3-array/src/subset.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return subset}));var n=r("./node_modules/d3-array/src/superset.js");function subset(e,t){return Object(n["default"])(t,e)}},"./node_modules/d3-array/src/sum.js":function(e,t,r){"use strict";function sum(e,t){let r=0;if(void 0===t)for(let n of e)(n=+n)&&(r+=n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}r.r(t),r.d(t,"default",(function(){return sum}))},"./node_modules/d3-array/src/superset.js":function(e,t,r){"use strict";function superset(e,t){const r=e[Symbol.iterator](),n=new Set;for(const i of t){if(n.has(i))continue;let e,t;while(({value:e,done:t}=r.next())){if(t)return!1;if(n.add(e),Object.is(i,e))break}}return!0}r.r(t),r.d(t,"default",(function(){return superset}))},"./node_modules/d3-array/src/threshold/freedmanDiaconis.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/count.js"),i=r("./node_modules/d3-array/src/quantile.js");t["default"]=function(e,t,r){return Math.ceil((r-t)/(2*(Object(i["default"])(e,.75)-Object(i["default"])(e,.25))*Math.pow(Object(n["default"])(e),-1/3)))}},"./node_modules/d3-array/src/threshold/scott.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/count.js"),i=r("./node_modules/d3-array/src/deviation.js");t["default"]=function(e,t,r){return Math.ceil((r-t)/(3.5*Object(i["default"])(e)*Math.pow(Object(n["default"])(e),-1/3)))}},"./node_modules/d3-array/src/threshold/sturges.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/count.js");t["default"]=function(e){return Math.ceil(Math.log(Object(n["default"])(e))/Math.LN2)+1}},"./node_modules/d3-array/src/ticks.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tickIncrement",(function(){return tickIncrement})),r.d(t,"tickStep",(function(){return tickStep}));var n=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function tickIncrement(e,t,r){var s=(t-e)/Math.max(0,r),a=Math.floor(Math.log(s)/Math.LN10),u=s/Math.pow(10,a);return a>=0?(u>=n?10:u>=i?5:u>=o?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(u>=n?10:u>=i?5:u>=o?2:1)}function tickStep(e,t,r){var s=Math.abs(t-e)/Math.max(0,r),a=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),u=s/a;return u>=n?a*=10:u>=i?a*=5:u>=o&&(a*=2),t<e?-a:a}t["default"]=function(e,t,r){var n,i,o,s,a=-1;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((n=t<e)&&(i=e,e=t,t=i),0===(s=tickIncrement(e,t,r))||!isFinite(s))return[];if(s>0){let r=Math.round(e/s),n=Math.round(t/s);r*s<e&&++r,n*s>t&&--n,o=new Array(i=n-r+1);while(++a<i)o[a]=(r+a)*s}else{s=-s;let r=Math.round(e*s),n=Math.round(t*s);r/s<e&&++r,n/s>t&&--n,o=new Array(i=n-r+1);while(++a<i)o[a]=(r+a)/s}return n&&o.reverse(),o}},"./node_modules/d3-array/src/transpose.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/min.js");function length(e){return e.length}t["default"]=function(e){if(!(o=e.length))return[];for(var t=-1,r=Object(n["default"])(e,length),i=new Array(r);++t<r;)for(var o,s=-1,a=i[t]=new Array(o);++s<o;)a[s]=e[s][t];return i}},"./node_modules/d3-array/src/union.js":function(e,t,r){"use strict";function union(...e){const t=new Set;for(const r of e)for(const e of r)t.add(e);return t}r.r(t),r.d(t,"default",(function(){return union}))},"./node_modules/d3-array/src/variance.js":function(e,t,r){"use strict";function variance(e,t){let r,n=0,i=0,o=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}r.r(t),r.d(t,"default",(function(){return variance}))},"./node_modules/d3-array/src/zip.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/transpose.js");t["default"]=function(){return Object(n["default"])(arguments)}},"./node_modules/d3-axis/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"slice",(function(){return n}));var n=Array.prototype.slice},"./node_modules/d3-axis/src/axis.js":function(e,t,r){"use strict";r.r(t),r.d(t,"axisTop",(function(){return axisTop})),r.d(t,"axisRight",(function(){return axisRight})),r.d(t,"axisBottom",(function(){return axisBottom})),r.d(t,"axisLeft",(function(){return axisLeft}));var n=r("./node_modules/d3-axis/src/array.js"),i=r("./node_modules/d3-axis/src/identity.js"),o=1,s=2,a=3,u=4,c=1e-6;function translateX(e){return"translate("+e+",0)"}function translateY(e){return"translate(0,"+e+")"}function number(e){return t=>+e(t)}function center(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function entering(){return!this.__axis}function axis(e,t){var r=[],l=null,d=null,h=6,f=6,p=3,m="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,_=e===o||e===u?-1:1,g=e===u||e===s?"x":"y",b=e===o||e===a?translateX:translateY;function axis(n){var v=null==l?t.ticks?t.ticks.apply(t,r):t.domain():l,M=null==d?t.tickFormat?t.tickFormat.apply(t,r):i["default"]:d,T=Math.max(h,0)+p,S=t.range(),C=+S[0]+m,E=+S[S.length-1]+m,P=(t.bandwidth?center:number)(t.copy(),m),A=n.selection?n.selection():n,j=A.selectAll(".domain").data([null]),O=A.selectAll(".tick").data(v,t).order(),R=O.exit(),I=O.enter().append("g").attr("class","tick"),w=O.select("line"),D=O.select("text");j=j.merge(j.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(I),w=w.merge(I.append("line").attr("stroke","currentColor").attr(g+"2",_*h)),D=D.merge(I.append("text").attr("fill","currentColor").attr(g,_*T).attr("dy",e===o?"0em":e===a?"0.71em":"0.32em")),n!==A&&(j=j.transition(n),O=O.transition(n),w=w.transition(n),D=D.transition(n),R=R.transition(n).attr("opacity",c).attr("transform",(function(e){return isFinite(e=P(e))?b(e+m):this.getAttribute("transform")})),I.attr("opacity",c).attr("transform",(function(e){var t=this.parentNode.__axis;return b((t&&isFinite(t=t(e))?t:P(e))+m)}))),R.remove(),j.attr("d",e===u||e===s?f?"M"+_*f+","+C+"H"+m+"V"+E+"H"+_*f:"M"+m+","+C+"V"+E:f?"M"+C+","+_*f+"V"+m+"H"+E+"V"+_*f:"M"+C+","+m+"H"+E),O.attr("opacity",1).attr("transform",(function(e){return b(P(e)+m)})),w.attr(g+"2",_*h),D.attr(g,_*T).text(M),A.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===s?"start":e===u?"end":"middle"),A.each((function(){this.__axis=P}))}return axis.scale=function(e){return arguments.length?(t=e,axis):t},axis.ticks=function(){return r=n["slice"].call(arguments),axis},axis.tickArguments=function(e){return arguments.length?(r=null==e?[]:n["slice"].call(e),axis):r.slice()},axis.tickValues=function(e){return arguments.length?(l=null==e?null:n["slice"].call(e),axis):l&&l.slice()},axis.tickFormat=function(e){return arguments.length?(d=e,axis):d},axis.tickSize=function(e){return arguments.length?(h=f=+e,axis):h},axis.tickSizeInner=function(e){return arguments.length?(h=+e,axis):h},axis.tickSizeOuter=function(e){return arguments.length?(f=+e,axis):f},axis.tickPadding=function(e){return arguments.length?(p=+e,axis):p},axis.offset=function(e){return arguments.length?(m=+e,axis):m},axis}function axisTop(e){return axis(o,e)}function axisRight(e){return axis(s,e)}function axisBottom(e){return axis(a,e)}function axisLeft(e){return axis(u,e)}},"./node_modules/d3-axis/src/identity.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e}},"./node_modules/d3-axis/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-axis/src/axis.js");r.d(t,"axisTop",(function(){return n["axisTop"]})),r.d(t,"axisRight",(function(){return n["axisRight"]})),r.d(t,"axisBottom",(function(){return n["axisBottom"]})),r.d(t,"axisLeft",(function(){return n["axisLeft"]}))},"./node_modules/d3-brush/src/brush.js":function(e,t,r){"use strict";r.r(t),r.d(t,"brushSelection",(function(){return brushSelection})),r.d(t,"brushX",(function(){return brushX})),r.d(t,"brushY",(function(){return brushY}));var n=r("./node_modules/d3-dispatch/src/dispatch.js"),i=r("./node_modules/d3-drag/src/nodrag.js"),o=r("./node_modules/d3-interpolate/src/value.js"),s=r("./node_modules/d3-selection/src/select.js"),a=r("./node_modules/d3-selection/src/pointer.js"),u=r("./node_modules/d3-transition/src/index.js"),c=r("./node_modules/d3-brush/src/constant.js"),l=r("./node_modules/d3-brush/src/event.js"),d=r("./node_modules/d3-brush/src/noevent.js"),h={name:"drag"},f={name:"space"},p={name:"handle"},m={name:"center"};const{abs:_,max:g,min:b}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var v={name:"x",handles:["w","e"].map(type),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},M={name:"y",handles:["n","s"].map(type),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},T={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(e){return null==e?null:number2(e)},output:function(e){return e}},S={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},C={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},E={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},P={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},A={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(e){return{type:e}}function defaultFilter(e){return!e.ctrlKey&&!e.button}function defaultExtent(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(e){while(!e.__brush)if(!(e=e.parentNode))return;return e.__brush}function empty(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function brushSelection(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function brushX(){return brush(v)}function brushY(){return brush(M)}function brush(e){var t,r=defaultExtent,T=defaultFilter,j=defaultTouchable,O=!0,R=Object(n["default"])("start","brush","end"),I=6;function brush(t){var r=t.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",S.overlay).merge(r).each((function(){var e=local(this).extent;Object(s["default"])(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",S.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));n.exit().remove(),n.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return S[e.type]})),t.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(j).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function redraw(){var e=Object(s["default"])(this),t=local(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-I/2:t[0][0]-I/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-I/2:t[0][1]-I/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+I:I})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+I:I}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(e,t,r){var n=e.__brush.emitter;return!n||r&&n.clean?new Emitter(e,t,r):n}function Emitter(e,t,r){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=r}function started(r){if((!t||r.touches)&&T.apply(this,arguments)){var n,o,c,l,j,R,I,w,D,F,B,L=this,V=r.target.__data__.type,N="selection"===(O&&r.metaKey?V="overlay":V)?h:O&&r.altKey?m:p,k=e===M?null:P[V],U=e===v?null:A[V],z=local(L),G=z.extent,W=z.selection,H=G[0][0],X=G[0][1],q=G[1][0],K=G[1][1],Y=0,Q=0,Z=k&&U&&O&&r.shiftKey,$=Array.from(r.touches||[r],e=>{const t=e.identifier;return e=Object(a["default"])(e,L),e.point0=e.slice(),e.identifier=t,e});if("overlay"===V){W&&(D=!0);const t=[$[0],$[1]||$[0]];z.selection=W=[[n=e===M?H:b(t[0][0],t[1][0]),c=e===v?X:b(t[0][1],t[1][1])],[j=e===M?q:g(t[0][0],t[1][0]),I=e===v?K:g(t[0][1],t[1][1])]],$.length>1&&move()}else n=W[0][0],c=W[0][1],j=W[1][0],I=W[1][1];o=n,l=c,R=j,w=I;var J=Object(s["default"])(L).attr("pointer-events","none"),ee=J.selectAll(".overlay").attr("cursor",S[V]);Object(u["interrupt"])(L);var te=emitter(L,arguments,!0).beforestart();if(r.touches)te.moved=moved,te.ended=ended;else{var re=Object(s["default"])(r.view).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);O&&re.on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0),Object(i["default"])(r.view)}redraw.call(L),te.start(r,N.name)}function moved(e){for(const t of e.changedTouches||[e])for(const e of $)e.identifier===t.identifier&&(e.cur=Object(a["default"])(t,L));if(Z&&!F&&!B&&1===$.length){const e=$[0];_(e.cur[0]-e[0])>_(e.cur[1]-e[1])?B=!0:F=!0}for(const t of $)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);D=!0,Object(d["default"])(e),move(e)}function move(e){const t=$[0],r=t.point0;var i;switch(Y=t[0]-r[0],Q=t[1]-r[1],N){case f:case h:k&&(Y=g(H-n,b(q-j,Y)),o=n+Y,R=j+Y),U&&(Q=g(X-c,b(K-I,Q)),l=c+Q,w=I+Q);break;case p:$[1]?(k&&(o=g(H,b(q,$[0][0])),R=g(H,b(q,$[1][0])),k=1),U&&(l=g(X,b(K,$[0][1])),w=g(X,b(K,$[1][1])),U=1)):(k<0?(Y=g(H-n,b(q-n,Y)),o=n+Y,R=j):k>0&&(Y=g(H-j,b(q-j,Y)),o=n,R=j+Y),U<0?(Q=g(X-c,b(K-c,Q)),l=c+Q,w=I):U>0&&(Q=g(X-I,b(K-I,Q)),l=c,w=I+Q));break;case m:k&&(o=g(H,b(q,n-Y*k)),R=g(H,b(q,j+Y*k))),U&&(l=g(X,b(K,c-Q*U)),w=g(X,b(K,I+Q*U)));break}R<o&&(k*=-1,i=n,n=j,j=i,i=o,o=R,R=i,V in C&&ee.attr("cursor",S[V=C[V]])),w<l&&(U*=-1,i=c,c=I,I=i,i=l,l=w,w=i,V in E&&ee.attr("cursor",S[V=E[V]])),z.selection&&(W=z.selection),F&&(o=W[0][0],R=W[1][0]),B&&(l=W[0][1],w=W[1][1]),W[0][0]===o&&W[0][1]===l&&W[1][0]===R&&W[1][1]===w||(z.selection=[[o,l],[R,w]],redraw.call(L),te.brush(e,N.name))}function ended(e){if(Object(d["nopropagation"])(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else Object(i["yesdrag"])(e.view,D),re.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);J.attr("pointer-events","all"),ee.attr("cursor",S.overlay),z.selection&&(W=z.selection),empty(W)&&(z.selection=null,redraw.call(L)),te.end(e,N.name)}function keydowned(e){switch(e.keyCode){case 16:Z=k&&U;break;case 18:N===p&&(k&&(j=R-Y*k,n=o+Y*k),U&&(I=w-Q*U,c=l+Q*U),N=m,move());break;case 32:N!==p&&N!==m||(k<0?j=R-Y:k>0&&(n=o-Y),U<0?I=w-Q:U>0&&(c=l-Q),N=f,ee.attr("cursor",S.selection),move());break;default:return}Object(d["default"])(e)}function keyupped(e){switch(e.keyCode){case 16:Z&&(F=B=Z=!1,move());break;case 18:N===m&&(k<0?j=R:k>0&&(n=o),U<0?I=w:U>0&&(c=l),N=p,move());break;case 32:N===f&&(e.altKey?(k&&(j=R-Y*k,n=o+Y*k),U&&(I=w-Q*U,c=l+Q*U),N=m):(k<0?j=R:k>0&&(n=o),U<0?I=w:U>0&&(c=l),N=p),ee.attr("cursor",S[V]),move());break;default:return}Object(d["default"])(e)}}function touchmoved(e){emitter(this,arguments).moved(e)}function touchended(e){emitter(this,arguments).ended(e)}function initialize(){var t=this.__brush||{selection:null};return t.extent=number2(r.apply(this,arguments)),t.dim=e,t}return brush.move=function(t,r){t.tween?t.on("start.brush",(function(e){emitter(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){emitter(this,arguments).end(e)})).tween("brush",(function(){var t=this,n=t.__brush,i=emitter(t,arguments),s=n.selection,a=e.input("function"===typeof r?r.apply(this,arguments):r,n.extent),u=Object(o["default"])(s,a);function tween(e){n.selection=1===e&&null===a?null:u(e),redraw.call(t),i.brush()}return null!==s&&null!==a?tween:tween(1)})):t.each((function(){var t=this,n=arguments,i=t.__brush,o=e.input("function"===typeof r?r.apply(t,n):r,i.extent),s=emitter(t,n).beforestart();Object(u["interrupt"])(t),i.selection=null===o?null:o,redraw.call(t),s.start().brush().end()}))},brush.clear=function(e){brush.move(e,null)},Emitter.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,r,n){var i=Object(s["default"])(this.that).datum();R.call(t,this.that,new l["default"](t,{sourceEvent:r,target:brush,selection:e.output(this.state.selection),mode:n,dispatch:R}),i)}},brush.extent=function(e){return arguments.length?(r="function"===typeof e?e:Object(c["default"])(number2(e)),brush):r},brush.filter=function(e){return arguments.length?(T="function"===typeof e?e:Object(c["default"])(!!e),brush):T},brush.touchable=function(e){return arguments.length?(j="function"===typeof e?e:Object(c["default"])(!!e),brush):j},brush.handleSize=function(e){return arguments.length?(I=+e,brush):I},brush.keyModifiers=function(e){return arguments.length?(O=!!e,brush):O},brush.on=function(){var e=R.on.apply(R,arguments);return e===R?brush:e},brush}t["default"]=function(){return brush(T)}},"./node_modules/d3-brush/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>()=>e},"./node_modules/d3-brush/src/event.js":function(e,t,r){"use strict";function BrushEvent(e,{sourceEvent:t,target:r,selection:n,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}r.r(t),r.d(t,"default",(function(){return BrushEvent}))},"./node_modules/d3-brush/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-brush/src/brush.js");r.d(t,"brush",(function(){return n["default"]})),r.d(t,"brushX",(function(){return n["brushX"]})),r.d(t,"brushY",(function(){return n["brushY"]})),r.d(t,"brushSelection",(function(){return n["brushSelection"]}))},"./node_modules/d3-brush/src/noevent.js":function(e,t,r){"use strict";function nopropagation(e){e.stopImmediatePropagation()}r.r(t),r.d(t,"nopropagation",(function(){return nopropagation})),t["default"]=function(e){e.preventDefault(),e.stopImmediatePropagation()}},"./node_modules/d3-chord/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"slice",(function(){return n}));var n=Array.prototype.slice},"./node_modules/d3-chord/src/chord.js":function(e,t,r){"use strict";r.r(t),r.d(t,"chordTranspose",(function(){return chordTranspose})),r.d(t,"chordDirected",(function(){return chordDirected}));var n=r("./node_modules/d3-chord/src/math.js");function range(e,t){return Array.from({length:t-e},(t,r)=>e+r)}function compareValue(e){return function(t,r){return e(t.source.value+t.target.value,r.source.value+r.target.value)}}function chordTranspose(){return chord(!1,!0)}function chordDirected(){return chord(!0,!1)}function chord(e,t){var r=0,i=null,o=null,s=null;function chord(a){var u,c=a.length,l=new Array(c),d=range(0,c),h=new Array(c*c),f=new Array(c),p=0;a=Float64Array.from({length:c*c},t?(e,t)=>a[t%c][t/c|0]:(e,t)=>a[t/c|0][t%c]);for(let t=0;t<c;++t){let r=0;for(let n=0;n<c;++n)r+=a[t*c+n]+e*a[n*c+t];p+=l[t]=r}p=Object(n["max"])(0,n["tau"]-r*c)/p,u=p?r:n["tau"]/c;{let t=0;i&&d.sort((e,t)=>i(l[e],l[t]));for(const r of d){const n=t;if(e){const e=range(1+~c,c).filter(e=>e<0?a[~e*c+r]:a[r*c+e]);o&&e.sort((e,t)=>o(e<0?-a[~e*c+r]:a[r*c+e],t<0?-a[~t*c+r]:a[r*c+t]));for(const n of e)if(n<0){const e=h[~n*c+r]||(h[~n*c+r]={source:null,target:null});e.target={index:r,startAngle:t,endAngle:t+=a[~n*c+r]*p,value:a[~n*c+r]}}else{const e=h[r*c+n]||(h[r*c+n]={source:null,target:null});e.source={index:r,startAngle:t,endAngle:t+=a[r*c+n]*p,value:a[r*c+n]}}f[r]={index:r,startAngle:n,endAngle:t,value:l[r]}}else{const e=range(0,c).filter(e=>a[r*c+e]||a[e*c+r]);o&&e.sort((e,t)=>o(a[r*c+e],a[r*c+t]));for(const n of e){let e;if(r<n?(e=h[r*c+n]||(h[r*c+n]={source:null,target:null}),e.source={index:r,startAngle:t,endAngle:t+=a[r*c+n]*p,value:a[r*c+n]}):(e=h[n*c+r]||(h[n*c+r]={source:null,target:null}),e.target={index:r,startAngle:t,endAngle:t+=a[r*c+n]*p,value:a[r*c+n]},r===n&&(e.source=e.target)),e.source&&e.target&&e.source.value<e.target.value){const t=e.source;e.source=e.target,e.target=t}}f[r]={index:r,startAngle:n,endAngle:t,value:l[r]}}t+=u}}return h=Object.values(h),h.groups=f,s?h.sort(s):h}return chord.padAngle=function(e){return arguments.length?(r=Object(n["max"])(0,e),chord):r},chord.sortGroups=function(e){return arguments.length?(i=e,chord):i},chord.sortSubgroups=function(e){return arguments.length?(o=e,chord):o},chord.sortChords=function(e){return arguments.length?(null==e?s=null:(s=compareValue(e))._=e,chord):s&&s._},chord}t["default"]=function(){return chord(!1,!1)}},"./node_modules/d3-chord/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-chord/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-chord/src/chord.js");r.d(t,"chord",(function(){return n["default"]})),r.d(t,"chordTranspose",(function(){return n["chordTranspose"]})),r.d(t,"chordDirected",(function(){return n["chordDirected"]}));var i=r("./node_modules/d3-chord/src/ribbon.js");r.d(t,"ribbon",(function(){return i["default"]})),r.d(t,"ribbonArrow",(function(){return i["ribbonArrow"]}))},"./node_modules/d3-chord/src/math.js":function(e,t,r){"use strict";r.r(t),r.d(t,"abs",(function(){return n})),r.d(t,"cos",(function(){return i})),r.d(t,"sin",(function(){return o})),r.d(t,"pi",(function(){return s})),r.d(t,"halfPi",(function(){return a})),r.d(t,"tau",(function(){return u})),r.d(t,"max",(function(){return c})),r.d(t,"epsilon",(function(){return l}));var n=Math.abs,i=Math.cos,o=Math.sin,s=Math.PI,a=s/2,u=2*s,c=Math.max,l=1e-12},"./node_modules/d3-chord/src/ribbon.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ribbonArrow",(function(){return ribbonArrow}));var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-chord/src/array.js"),o=r("./node_modules/d3-chord/src/constant.js"),s=r("./node_modules/d3-chord/src/math.js");function defaultSource(e){return e.source}function defaultTarget(e){return e.target}function defaultRadius(e){return e.radius}function defaultStartAngle(e){return e.startAngle}function defaultEndAngle(e){return e.endAngle}function defaultPadAngle(){return 0}function defaultArrowheadRadius(){return 10}function ribbon(e){var t=defaultSource,r=defaultTarget,a=defaultRadius,u=defaultRadius,c=defaultStartAngle,l=defaultEndAngle,d=defaultPadAngle,h=null;function ribbon(){var o,f=t.apply(this,arguments),p=r.apply(this,arguments),m=d.apply(this,arguments)/2,_=i["slice"].call(arguments),g=+a.apply(this,(_[0]=f,_)),b=c.apply(this,_)-s["halfPi"],v=l.apply(this,_)-s["halfPi"],M=+u.apply(this,(_[0]=p,_)),T=c.apply(this,_)-s["halfPi"],S=l.apply(this,_)-s["halfPi"];if(h||(h=o=Object(n["default"])()),m>s["epsilon"]&&(Object(s["abs"])(v-b)>2*m+s["epsilon"]?v>b?(b+=m,v-=m):(b-=m,v+=m):b=v=(b+v)/2,Object(s["abs"])(S-T)>2*m+s["epsilon"]?S>T?(T+=m,S-=m):(T-=m,S+=m):T=S=(T+S)/2),h.moveTo(g*Object(s["cos"])(b),g*Object(s["sin"])(b)),h.arc(0,0,g,b,v),b!==T||v!==S)if(e){var C=+e.apply(this,arguments),E=M-C,P=(T+S)/2;h.quadraticCurveTo(0,0,E*Object(s["cos"])(T),E*Object(s["sin"])(T)),h.lineTo(M*Object(s["cos"])(P),M*Object(s["sin"])(P)),h.lineTo(E*Object(s["cos"])(S),E*Object(s["sin"])(S))}else h.quadraticCurveTo(0,0,M*Object(s["cos"])(T),M*Object(s["sin"])(T)),h.arc(0,0,M,T,S);if(h.quadraticCurveTo(0,0,g*Object(s["cos"])(b),g*Object(s["sin"])(b)),h.closePath(),o)return h=null,o+""||null}return e&&(ribbon.headRadius=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["default"])(+t),ribbon):e}),ribbon.radius=function(e){return arguments.length?(a=u="function"===typeof e?e:Object(o["default"])(+e),ribbon):a},ribbon.sourceRadius=function(e){return arguments.length?(a="function"===typeof e?e:Object(o["default"])(+e),ribbon):a},ribbon.targetRadius=function(e){return arguments.length?(u="function"===typeof e?e:Object(o["default"])(+e),ribbon):u},ribbon.startAngle=function(e){return arguments.length?(c="function"===typeof e?e:Object(o["default"])(+e),ribbon):c},ribbon.endAngle=function(e){return arguments.length?(l="function"===typeof e?e:Object(o["default"])(+e),ribbon):l},ribbon.padAngle=function(e){return arguments.length?(d="function"===typeof e?e:Object(o["default"])(+e),ribbon):d},ribbon.source=function(e){return arguments.length?(t=e,ribbon):t},ribbon.target=function(e){return arguments.length?(r=e,ribbon):r},ribbon.context=function(e){return arguments.length?(h=null==e?null:e,ribbon):h},ribbon}function ribbonArrow(){return ribbon(defaultArrowheadRadius)}t["default"]=function(){return ribbon()}},"./node_modules/d3-color/src/color.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Color",(function(){return Color})),r.d(t,"darker",(function(){return i})),r.d(t,"brighter",(function(){return o})),r.d(t,"default",(function(){return color})),r.d(t,"rgbConvert",(function(){return rgbConvert})),r.d(t,"rgb",(function(){return rgb})),r.d(t,"Rgb",(function(){return Rgb})),r.d(t,"hslConvert",(function(){return hslConvert})),r.d(t,"hsl",(function(){return hsl}));var n=r("./node_modules/d3-color/src/define.js");function Color(){}var i=.7,o=1/i,s="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),h=new RegExp("^rgba\\("+[s,s,s,a]+"\\)$"),f=new RegExp("^rgba\\("+[u,u,u,a]+"\\)$"),p=new RegExp("^hsl\\("+[a,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[a,u,u,a]+"\\)$"),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?rgbn(t):3===r?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?rgba(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=d.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=f.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):_.hasOwnProperty(e)?rgbn(_[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rgb(e,t,r,n)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb(e,t,r,n){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,r,null==n?1:n)}function Rgb(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hex(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function hsla(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,n)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=NaN,a=o-i,u=(o+i)/2;return a?(s=t===o?(r-n)/a+6*(r<n):r===o?(n-t)/a+2:(t-r)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Hsl(s,a,u,e.opacity)}function hsl(e,t,r,n){return 1===arguments.length?hslConvert(e):new Hsl(e,t,r,null==n?1:n)}function Hsl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function hsl2rgb(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}Object(n["default"])(Color,color,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),Object(n["default"])(Rgb,rgb,Object(n["extend"])(Color,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),Object(n["default"])(Hsl,hsl,Object(n["extend"])(Color,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,n),hsl2rgb(e,i,n),hsl2rgb(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},"./node_modules/d3-color/src/cubehelix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return cubehelix})),r.d(t,"Cubehelix",(function(){return Cubehelix}));var n=r("./node_modules/d3-color/src/define.js"),i=r("./node_modules/d3-color/src/color.js"),o=r("./node_modules/d3-color/src/math.js"),s=-.14861,a=1.78277,u=-.29227,c=-.90649,l=1.97294,d=l*c,h=l*a,f=a*u-c*s;function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof i["Rgb"]||(e=Object(i["rgbConvert"])(e));var t=e.r/255,r=e.g/255,n=e.b/255,s=(f*n+d*t-h*r)/(f+d-h),a=n-s,p=(l*(r-s)-u*a)/c,m=Math.sqrt(p*p+a*a)/(l*s*(1-s)),_=m?Math.atan2(p,a)*o["degrees"]-120:NaN;return new Cubehelix(_<0?_+360:_,m,s,e.opacity)}function cubehelix(e,t,r,n){return 1===arguments.length?cubehelixConvert(e):new Cubehelix(e,t,r,null==n?1:n)}function Cubehelix(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Object(n["default"])(Cubehelix,cubehelix,Object(n["extend"])(i["Color"],{brighter:function(e){return e=null==e?i["brighter"]:Math.pow(i["brighter"],e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i["darker"]:Math.pow(i["darker"],e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*o["radians"],t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),d=Math.sin(e);return new i["Rgb"](255*(t+r*(s*n+a*d)),255*(t+r*(u*n+c*d)),255*(t+r*(l*n)),this.opacity)}}))},"./node_modules/d3-color/src/define.js":function(e,t,r){"use strict";function extend(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}r.r(t),r.d(t,"extend",(function(){return extend})),t["default"]=function(e,t,r){e.prototype=t.prototype=r,r.constructor=e}},"./node_modules/d3-color/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-color/src/color.js");r.d(t,"color",(function(){return n["default"]})),r.d(t,"rgb",(function(){return n["rgb"]})),r.d(t,"hsl",(function(){return n["hsl"]}));var i=r("./node_modules/d3-color/src/lab.js");r.d(t,"lab",(function(){return i["default"]})),r.d(t,"hcl",(function(){return i["hcl"]})),r.d(t,"lch",(function(){return i["lch"]})),r.d(t,"gray",(function(){return i["gray"]}));var o=r("./node_modules/d3-color/src/cubehelix.js");r.d(t,"cubehelix",(function(){return o["default"]}))},"./node_modules/d3-color/src/lab.js":function(e,t,r){"use strict";r.r(t),r.d(t,"gray",(function(){return gray})),r.d(t,"default",(function(){return lab})),r.d(t,"Lab",(function(){return Lab})),r.d(t,"lch",(function(){return lch})),r.d(t,"hcl",(function(){return hcl})),r.d(t,"Hcl",(function(){return Hcl}));var n=r("./node_modules/d3-color/src/define.js"),i=r("./node_modules/d3-color/src/color.js"),o=r("./node_modules/d3-color/src/math.js");const s=18,a=.96422,u=1,c=.82521,l=4/29,d=6/29,h=3*d*d,f=d*d*d;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl)return hcl2lab(e);e instanceof i["Rgb"]||(e=Object(i["rgbConvert"])(e));var t,r,n=rgb2lrgb(e.r),o=rgb2lrgb(e.g),s=rgb2lrgb(e.b),l=xyz2lab((.2225045*n+.7168786*o+.0606169*s)/u);return n===o&&o===s?t=r=l:(t=xyz2lab((.4360747*n+.3850649*o+.1430804*s)/a),r=xyz2lab((.0139322*n+.0971045*o+.7141733*s)/c)),new Lab(116*l-16,500*(t-l),200*(l-r),e.opacity)}function gray(e,t){return new Lab(e,0,0,null==t?1:t)}function lab(e,t,r,n){return 1===arguments.length?labConvert(e):new Lab(e,t,r,null==n?1:n)}function Lab(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function xyz2lab(e){return e>f?Math.pow(e,1/3):e/h+l}function lab2xyz(e){return e>d?e*e*e:h*(e-l)}function lrgb2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2lrgb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);if(e instanceof Lab||(e=labConvert(e)),0===e.a&&0===e.b)return new Hcl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*o["degrees"];return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lch(e,t,r,n){return 1===arguments.length?hclConvert(e):new Hcl(r,t,e,null==n?1:n)}function hcl(e,t,r,n){return 1===arguments.length?hclConvert(e):new Hcl(e,t,r,null==n?1:n)}function Hcl(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function hcl2lab(e){if(isNaN(e.h))return new Lab(e.l,0,0,e.opacity);var t=e.h*o["radians"];return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Object(n["default"])(Lab,lab,Object(n["extend"])(i["Color"],{brighter:function(e){return new Lab(this.l+s*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Lab(this.l-s*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=a*lab2xyz(t),e=u*lab2xyz(e),r=c*lab2xyz(r),new i["Rgb"](lrgb2rgb(3.1338561*t-1.6168667*e-.4906146*r),lrgb2rgb(-.9787684*t+1.9161415*e+.033454*r),lrgb2rgb(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),Object(n["default"])(Hcl,hcl,Object(n["extend"])(i["Color"],{brighter:function(e){return new Hcl(this.h,this.c,this.l+s*(null==e?1:e),this.opacity)},darker:function(e){return new Hcl(this.h,this.c,this.l-s*(null==e?1:e),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}))},"./node_modules/d3-color/src/math.js":function(e,t,r){"use strict";r.r(t),r.d(t,"radians",(function(){return n})),r.d(t,"degrees",(function(){return i}));const n=Math.PI/180,i=180/Math.PI},"./node_modules/d3-contour/src/area.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t=0,r=e.length,n=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];while(++t<r)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n}},"./node_modules/d3-contour/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"slice",(function(){return i}));var n=Array.prototype,i=n.slice},"./node_modules/d3-contour/src/ascending.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return e-t}},"./node_modules/d3-contour/src/blur.js":function(e,t,r){"use strict";function blurX(e,t,r){for(var n=e.width,i=e.height,o=1+(r<<1),s=0;s<i;++s)for(var a=0,u=0;a<n+r;++a)a<n&&(u+=e.data[a+s*n]),a>=r&&(a>=o&&(u-=e.data[a-o+s*n]),t.data[a-r+s*n]=u/Math.min(a+1,n-1+o-a,o))}function blurY(e,t,r){for(var n=e.width,i=e.height,o=1+(r<<1),s=0;s<n;++s)for(var a=0,u=0;a<i+r;++a)a<i&&(u+=e.data[s+a*n]),a>=r&&(a>=o&&(u-=e.data[s+(a-o)*n]),t.data[s+(a-r)*n]=u/Math.min(a+1,i-1+o-a,o))}r.r(t),r.d(t,"blurX",(function(){return blurX})),r.d(t,"blurY",(function(){return blurY}))},"./node_modules/d3-contour/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>()=>e},"./node_modules/d3-contour/src/contains.js":function(e,t,r){"use strict";function ringContains(e,t){for(var r=t[0],n=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],c=u[0],l=u[1],d=e[a],h=d[0],f=d[1];if(segmentContains(u,d,t))return 0;l>n!==f>n&&r<(h-c)*(n-l)/(f-l)+c&&(i=-i)}return i}function segmentContains(e,t,r){var n;return collinear(e,t,r)&&within(e[n=+(e[0]===t[0])],r[n],t[n])}function collinear(e,t,r){return(t[0]-e[0])*(r[1]-e[1])===(r[0]-e[0])*(t[1]-e[1])}function within(e,t,r){return e<=t&&t<=r||r<=t&&t<=e}r.r(t),t["default"]=function(e,t){var r,n=-1,i=t.length;while(++n<i)if(r=ringContains(e,t[n]))return r;return 0}},"./node_modules/d3-contour/src/contours.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/threshold/sturges.js"),i=r("./node_modules/d3-array/src/extent.js"),o=r("./node_modules/d3-array/src/ticks.js"),s=r("./node_modules/d3-array/src/range.js"),a=r("./node_modules/d3-contour/src/array.js"),u=r("./node_modules/d3-contour/src/ascending.js"),c=r("./node_modules/d3-contour/src/area.js"),l=r("./node_modules/d3-contour/src/constant.js"),d=r("./node_modules/d3-contour/src/contains.js"),h=r("./node_modules/d3-contour/src/noop.js"),f=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];t["default"]=function(){var e=1,t=1,r=n["default"],p=smoothLinear;function contours(e){var t=r(e);if(Array.isArray(t))t=t.slice().sort(u["default"]);else{var n=Object(i["default"])(e),a=n[0],c=n[1];t=Object(o["tickStep"])(a,c,t),t=Object(s["default"])(Math.floor(a/t)*t,Math.floor(c/t)*t,t)}return t.map((function(t){return contour(e,t)}))}function contour(e,t){var r=[],n=[];return isorings(e,t,(function(i){p(i,e,t),Object(c["default"])(i)>0?r.push([i]):n.push(i)})),n.forEach((function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==Object(d["default"])((t=r[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:t,coordinates:r}}function isorings(r,n,i){var o,s,a,u,c,l,d=new Array,h=new Array;o=s=-1,u=r[0]>=n,f[u<<1].forEach(stitch);while(++o<e-1)a=u,u=r[o+1]>=n,f[a|u<<1].forEach(stitch);f[u<<0].forEach(stitch);while(++s<t-1){o=-1,u=r[s*e+e]>=n,c=r[s*e]>=n,f[u<<1|c<<2].forEach(stitch);while(++o<e-1)a=u,u=r[s*e+e+o+1]>=n,l=c,c=r[s*e+o+1]>=n,f[a|u<<1|c<<2|l<<3].forEach(stitch);f[u|c<<3].forEach(stitch)}o=-1,c=r[s*e]>=n,f[c<<2].forEach(stitch);while(++o<e-1)l=c,c=r[s*e+o+1]>=n,f[c<<2|l<<3].forEach(stitch);function stitch(e){var t,r,n=[e[0][0]+o,e[0][1]+s],a=[e[1][0]+o,e[1][1]+s],u=index(n),c=index(a);(t=h[u])?(r=d[c])?(delete h[t.end],delete d[r.start],t===r?(t.ring.push(a),i(t.ring)):d[t.start]=h[r.end]={start:t.start,end:r.end,ring:t.ring.concat(r.ring)}):(delete h[t.end],t.ring.push(a),h[t.end=c]=t):(t=d[c])?(r=h[u])?(delete d[t.start],delete h[r.end],t===r?(t.ring.push(a),i(t.ring)):d[r.start]=h[t.end]={start:r.start,end:t.end,ring:r.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(n),d[t.start=u]=t):d[u]=h[c]={start:u,end:c,ring:[n,a]}}f[c<<3].forEach(stitch)}function index(t){return 2*t[0]+t[1]*(e+1)*4}function smoothLinear(r,n,i){r.forEach((function(r){var o,s=r[0],a=r[1],u=0|s,c=0|a,l=n[c*e+u];s>0&&s<e&&u===s&&(o=n[c*e+u-1],r[0]=s+(i-o)/(l-o)-.5),a>0&&a<t&&c===a&&(o=n[(c-1)*e+u],r[1]=a+(i-o)/(l-o)-.5)}))}return contours.contour=contour,contours.size=function(r){if(!arguments.length)return[e,t];var n=Math.floor(r[0]),i=Math.floor(r[1]);if(!(n>=0&&i>=0))throw new Error("invalid size");return e=n,t=i,contours},contours.thresholds=function(e){return arguments.length?(r="function"===typeof e?e:Array.isArray(e)?Object(l["default"])(a["slice"].call(e)):Object(l["default"])(e),contours):r},contours.smooth=function(e){return arguments.length?(p=e?smoothLinear:h["default"],contours):p===smoothLinear},contours}},"./node_modules/d3-contour/src/density.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/max.js"),i=r("./node_modules/d3-array/src/ticks.js"),o=r("./node_modules/d3-array/src/range.js"),s=r("./node_modules/d3-contour/src/array.js"),a=r("./node_modules/d3-contour/src/blur.js"),u=r("./node_modules/d3-contour/src/constant.js"),c=r("./node_modules/d3-contour/src/contours.js");function defaultX(e){return e[0]}function defaultY(e){return e[1]}function defaultWeight(){return 1}t["default"]=function(){var e=defaultX,t=defaultY,r=defaultWeight,l=960,d=500,h=20,f=2,p=3*h,m=l+2*p>>f,_=d+2*p>>f,g=Object(u["default"])(20);function density(s){var u=new Float32Array(m*_),l=new Float32Array(m*_);s.forEach((function(n,i,o){var s=+e(n,i,o)+p>>f,a=+t(n,i,o)+p>>f,c=+r(n,i,o);s>=0&&s<m&&a>=0&&a<_&&(u[s+a*m]+=c)})),Object(a["blurX"])({width:m,height:_,data:u},{width:m,height:_,data:l},h>>f),Object(a["blurY"])({width:m,height:_,data:l},{width:m,height:_,data:u},h>>f),Object(a["blurX"])({width:m,height:_,data:u},{width:m,height:_,data:l},h>>f),Object(a["blurY"])({width:m,height:_,data:l},{width:m,height:_,data:u},h>>f),Object(a["blurX"])({width:m,height:_,data:u},{width:m,height:_,data:l},h>>f),Object(a["blurY"])({width:m,height:_,data:l},{width:m,height:_,data:u},h>>f);var d=g(u);if(!Array.isArray(d)){var b=Object(n["default"])(u);d=Object(i["tickStep"])(0,b,d),d=Object(o["default"])(0,Math.floor(b/d)*d,d),d.shift()}return Object(c["default"])().thresholds(d).size([m,_])(u).map(transform)}function transform(e){return e.value*=Math.pow(2,-2*f),e.coordinates.forEach(transformPolygon),e}function transformPolygon(e){e.forEach(transformRing)}function transformRing(e){e.forEach(transformPoint)}function transformPoint(e){e[0]=e[0]*Math.pow(2,f)-p,e[1]=e[1]*Math.pow(2,f)-p}function resize(){return p=3*h,m=l+2*p>>f,_=d+2*p>>f,density}return density.x=function(t){return arguments.length?(e="function"===typeof t?t:Object(u["default"])(+t),density):e},density.y=function(e){return arguments.length?(t="function"===typeof e?e:Object(u["default"])(+e),density):t},density.weight=function(e){return arguments.length?(r="function"===typeof e?e:Object(u["default"])(+e),density):r},density.size=function(e){if(!arguments.length)return[l,d];var t=+e[0],r=+e[1];if(!(t>=0&&r>=0))throw new Error("invalid size");return l=t,d=r,resize()},density.cellSize=function(e){if(!arguments.length)return 1<<f;if(!((e=+e)>=1))throw new Error("invalid cell size");return f=Math.floor(Math.log(e)/Math.LN2),resize()},density.thresholds=function(e){return arguments.length?(g="function"===typeof e?e:Array.isArray(e)?Object(u["default"])(s["slice"].call(e)):Object(u["default"])(e),density):g},density.bandwidth=function(e){if(!arguments.length)return Math.sqrt(h*(h+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return h=Math.round((Math.sqrt(4*e*e+1)-1)/2),resize()},density}},"./node_modules/d3-contour/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-contour/src/contours.js");r.d(t,"contours",(function(){return n["default"]}));var i=r("./node_modules/d3-contour/src/density.js");r.d(t,"contourDensity",(function(){return i["default"]}))},"./node_modules/d3-contour/src/noop.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){}},"./node_modules/d3-delaunay/src/delaunay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Delaunay}));var n=r("./node_modules/delaunator/index.js"),i=r("./node_modules/d3-delaunay/src/path.js"),o=r("./node_modules/d3-delaunay/src/polygon.js"),s=r("./node_modules/d3-delaunay/src/voronoi.js");const a=2*Math.PI,u=Math.pow;function pointX(e){return e[0]}function pointY(e){return e[1]}function collinear(e){const{triangles:t,coords:r}=e;for(let n=0;n<t.length;n+=3){const e=2*t[n],i=2*t[n+1],o=2*t[n+2],s=(r[o]-r[e])*(r[i+1]-r[e+1])-(r[i]-r[e])*(r[o+1]-r[e+1]);if(s>1e-10)return!1}return!0}function jitter(e,t,r){return[e+Math.sin(e+t)*r,t+Math.cos(e-t)*r]}class Delaunay{static from(e,t=pointX,r=pointY,n){return new Delaunay("length"in e?flatArray(e,t,r,n):Float64Array.from(flatIterable(e,t,r,n)))}constructor(e){this._delaunator=new n["default"](e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&collinear(e)){this.collinear=Int32Array.from({length:t.length/2},(e,t)=>t).sort((e,r)=>t[2*e]-t[2*r]||t[2*e+1]-t[2*r+1]);const e=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[t[2*e],t[2*e+1],t[2*r],t[2*r+1]],o=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let n=0,s=t.length/2;n<s;++n){const e=jitter(t[2*n],t[2*n+1],o);t[2*n]=e[0],t[2*n+1]=e[1]}this._delaunator=new n["default"](t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let n=0,u=r.length;n<u;++n){const e=o[n%3===2?n-2:n+1];-1!==r[n]&&-1!==s[e]||(s[e]=n)}for(let n=0,u=i.length;n<u;++n)a[i[n]]=n;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,2===i.length&&(s[i[1]]=0))}voronoi(e){return new s["default"](this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:n,halfedges:i,triangles:o,collinear:s}=this;if(s){const t=s.indexOf(e);return t>0&&(yield s[t-1]),void(t<s.length-1&&(yield s[t+1]))}const a=t[e];if(-1===a)return;let u=a,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=r[(n[e]+1)%r.length];return void(t!==c&&(yield t))}}while(u!==a)}find(e,t,r=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const n=r;let i;while((i=this._step(r,e,t))>=0&&i!==r&&i!==n)r=i;return i}_step(e,t,r){const{inedges:n,hull:i,_hullIndex:o,halfedges:s,triangles:a,points:c}=this;if(-1===n[e]||!c.length)return(e+1)%(c.length>>1);let l=e,d=u(t-c[2*e],2)+u(r-c[2*e+1],2);const h=n[e];let f=h;do{let n=a[f];const h=u(t-c[2*n],2)+u(r-c[2*n+1],2);if(h<d&&(d=h,l=n),f=f%3===2?f-2:f+1,a[f]!==e)break;if(f=s[f],-1===f){if(f=i[(o[e]+1)%i.length],f!==n&&u(t-c[2*f],2)+u(r-c[2*f+1],2)<d)return f;break}}while(f!==h);return l}render(e){const t=null==e?e=new i["default"]:void 0,{points:r,halfedges:n,triangles:o}=this;for(let i=0,s=n.length;i<s;++i){const t=n[i];if(t<i)continue;const s=2*o[i],a=2*o[t];e.moveTo(r[s],r[s+1]),e.lineTo(r[a],r[a+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const r=null==e?e=new i["default"]:void 0,{points:n}=this;for(let i=0,o=n.length;i<o;i+=2){const r=n[i],o=n[i+1];e.moveTo(r+t,o),e.arc(r,o,t,0,a)}return r&&r.value()}renderHull(e){const t=null==e?e=new i["default"]:void 0,{hull:r,points:n}=this,o=2*r[0],s=r.length;e.moveTo(n[o],n[o+1]);for(let i=1;i<s;++i){const t=2*r[i];e.lineTo(n[t],n[t+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new o["default"];return this.renderHull(e),e.value()}renderTriangle(e,t){const r=null==t?t=new i["default"]:void 0,{points:n,triangles:o}=this,s=2*o[e*=3],a=2*o[e+1],u=2*o[e+2];return t.moveTo(n[s],n[s+1]),t.lineTo(n[a],n[a+1]),t.lineTo(n[u],n[u+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new o["default"];return this.renderTriangle(e,t),t.value()}}function flatArray(e,t,r,n){const i=e.length,o=new Float64Array(2*i);for(let s=0;s<i;++s){const i=e[s];o[2*s]=t.call(n,i,s,e),o[2*s+1]=r.call(n,i,s,e)}return o}function*flatIterable(e,t,r,n){let i=0;for(const o of e)yield t.call(n,o,i,e),yield r.call(n,o,i,e),++i}},"./node_modules/d3-delaunay/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-delaunay/src/delaunay.js");r.d(t,"Delaunay",(function(){return n["default"]}));var i=r("./node_modules/d3-delaunay/src/voronoi.js");r.d(t,"Voronoi",(function(){return i["default"]}))},"./node_modules/d3-delaunay/src/path.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Path}));const n=1e-6;class Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e=+e,t=+t,r=+r;const i=e+r,o=t;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>n||Math.abs(this._y1-o)>n)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(e,t,r,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+n}h${-r}Z`}value(){return this._||null}}},"./node_modules/d3-delaunay/src/polygon.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Polygon}));class Polygon{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}},"./node_modules/d3-delaunay/src/voronoi.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Voronoi}));var n=r("./node_modules/d3-delaunay/src/path.js"),i=r("./node_modules/d3-delaunay/src/polygon.js");class Voronoi{constructor(e,[t,r,n,i]=[0,0,960,500]){if(!((n=+n)>=(t=+t))||!((i=+i)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=n,this.xmin=t,this.ymax=i,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:n}=this,i=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h,f,p=0,m=0,_=r.length;p<_;p+=3,m+=2){const t=2*r[p],n=2*r[p+1],o=2*r[p+2],s=e[t],a=e[t+1],u=e[n],c=e[n+1],l=e[o],d=e[o+1],_=u-s,g=c-a,b=l-s,v=d-a,M=_*_+g*g,T=b*b+v*v,S=2*(_*v-g*b);if(S)if(Math.abs(S)<1e-8)h=(s+l)/2,f=(a+d)/2;else{const e=1/S;h=s+(v*M-g*T)*e,f=a+(_*T-b*M)*e}else h=(s+l)/2-1e8*v,f=(a+d)/2+1e8*b;i[m]=h,i[m+1]=f}let o,s,a,u=t[t.length-1],c=4*u,l=e[2*u],d=e[2*u+1];n.fill(0);for(let h=0;h<t.length;++h)u=t[h],o=c,s=l,a=d,c=4*u,l=e[2*u],d=e[2*u+1],n[o+2]=n[c]=a-d,n[o+3]=n[c+1]=l-s}render(e){const t=null==e?e=new n["default"]:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let n=0,l=r.length;n<l;++n){const t=r[n];if(t<n)continue;const i=2*Math.floor(n/3),o=2*Math.floor(t/3),a=s[i],u=s[i+1],c=s[o],l=s[o+1];this._renderSegment(a,u,c,l,e)}let u,c=o[o.length-1];for(let n=0;n<o.length;++n){u=c,c=o[n];const t=2*Math.floor(i[c]/3),r=s[t],l=s[t+1],d=4*u,h=this._project(r,l,a[d+2],a[d+3]);h&&this._renderSegment(r,l,h[0],h[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new n["default"]:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=null==t?t=new n["default"]:void 0,i=this._clip(e);if(null===i||!i.length)return;t.moveTo(i[0],i[1]);let o=i.length;while(i[0]===i[o-2]&&i[1]===i[o-1]&&o>1)o-=2;for(let n=2;n<o;n+=2)i[n]===i[n-2]&&i[n+1]===i[n-1]||t.lineTo(i[n],i[n+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new i["default"];return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,n,i){let o;const s=this._regioncode(e,t),a=this._regioncode(r,n);0===s&&0===a?(i.moveTo(e,t),i.lineTo(r,n)):(o=this._clipSegment(e,t,r,n,s,a))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,r){return t=+t,t===t&&(r=+r,r===r)&&this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const e=this._clip(r);if(e)e:for(let n=0,i=t.length;n<i;n+=2)for(let o=0,s=e.length;o<s;o+=2)if(t[n]==e[o]&&t[n+1]==e[o+1]&&t[(n+2)%i]==e[(o+s-2)%s]&&t[(n+3)%i]==e[(o+s-1)%s]){yield r;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:n,triangles:i}}=this,o=r[e];if(-1===o)return null;const s=[];let a=o;do{const r=Math.floor(a/3);if(s.push(t[2*r],t[2*r+1]),a=a%3===2?a-2:a+1,i[a]!==e)break;a=n[a]}while(a!==o&&-1!==a);return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:r}=this,n=4*e;return r[n]||r[n+1]?this._clipInfinite(e,t,r[n],r[n+1],r[n+2],r[n+3]):this._clipFinite(e,t)}_clipFinite(e,t){const r=t.length;let n,i,o,s,a,u=null,c=t[r-2],l=t[r-1],d=this._regioncode(c,l);for(let h=0;h<r;h+=2)if(n=c,i=l,c=t[h],l=t[h+1],o=d,d=this._regioncode(c,l),0===o&&0===d)s=a,a=0,u?u.push(c,l):u=[c,l];else{let t,r,h,f,p;if(0===o){if(null===(t=this._clipSegment(n,i,c,l,o,d)))continue;[r,h,f,p]=t}else{if(null===(t=this._clipSegment(c,l,n,i,d,o)))continue;[f,p,r,h]=t,s=a,a=this._edgecode(r,h),s&&a&&this._edge(e,s,a,u,u.length),u?u.push(r,h):u=[r,h]}s=a,a=this._edgecode(f,p),s&&a&&this._edge(e,s,a,u,u.length),u?u.push(f,p):u=[f,p]}if(u)s=a,a=this._edgecode(u[0],u[1]),s&&a&&this._edge(e,s,a,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,r,n,i,o){while(1){if(0===i&&0===o)return[e,t,r,n];if(i&o)return null;let s,a,u=i||o;8&u?(s=e+(r-e)*(this.ymax-t)/(n-t),a=this.ymax):4&u?(s=e+(r-e)*(this.ymin-t)/(n-t),a=this.ymin):2&u?(a=t+(n-t)*(this.xmax-e)/(r-e),s=this.xmax):(a=t+(n-t)*(this.xmin-e)/(r-e),s=this.xmin),i?(e=s,t=a,i=this._regioncode(e,t)):(r=s,n=a,o=this._regioncode(r,n))}}_clipInfinite(e,t,r,n,i,o){let s,a=Array.from(t);if((s=this._project(a[0],a[1],r,n))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(s[0],s[1]),a=this._clipFinite(e,a))for(let u,c=0,l=a.length,d=this._edgecode(a[l-2],a[l-1]);c<l;c+=2)u=d,d=this._edgecode(a[c],a[c+1]),u&&d&&(c=this._edge(e,u,d,a,c),l=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,t,r,n,i){while(t!==r){let r,o;switch(t){case 5:t=4;continue;case 4:t=6,r=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,r=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,r=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,r=this.xmin,o=this.ymin;break}n[i]===r&&n[i+1]===o||!this.contains(e,r,o)||(n.splice(i,0,r,o),i+=2)}if(n.length>4)for(let o=0;o<n.length;o+=2){const e=(o+2)%n.length,t=(o+4)%n.length;(n[o]===n[e]&&n[e]===n[t]||n[o+1]===n[e+1]&&n[e+1]===n[t+1])&&(n.splice(e,2),o-=2)}return i}_project(e,t,r,n){let i,o,s,a=1/0;if(n<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/n)<a&&(s=this.ymin,o=e+(a=i)*r)}else if(n>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/n)<a&&(s=this.ymax,o=e+(a=i)*r)}if(r>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/r)<a&&(o=this.xmax,s=t+(a=i)*n)}else if(r<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/r)<a&&(o=this.xmin,s=t+(a=i)*n)}return[o,s]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}},"./node_modules/d3-dispatch/src/dispatch.js":function(e,t,r){"use strict";r.r(t);var n={value:()=>{}};function dispatch(){for(var e,t=0,r=arguments.length,n={};t<r;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new Dispatch(n)}function Dispatch(e){this._=e}function parseTypenames(e,t){return e.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}}))}function get(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function set(e,t,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=n,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:t,value:r}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var r,n=this._,i=parseTypenames(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);while(++o<s)if(r=(e=i[o]).type)n[r]=set(n[r],e.name,t);else if(null==t)for(r in n)n[r]=set(n[r],e.name,null);return this}while(++o<s)if((r=(e=i[o]).type)&&(r=get(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Dispatch(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),o=0;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],o=0,r=n.length;o<r;++o)n[o].value.apply(t,i)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}},t["default"]=dispatch},"./node_modules/d3-dispatch/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-dispatch/src/dispatch.js");r.d(t,"dispatch",(function(){return n["default"]}))},"./node_modules/d3-drag/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>()=>e},"./node_modules/d3-drag/src/drag.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-dispatch/src/dispatch.js"),i=r("./node_modules/d3-selection/src/select.js"),o=r("./node_modules/d3-selection/src/pointer.js"),s=r("./node_modules/d3-drag/src/nodrag.js"),a=r("./node_modules/d3-drag/src/noevent.js"),u=r("./node_modules/d3-drag/src/constant.js"),c=r("./node_modules/d3-drag/src/event.js");function defaultFilter(e){return!e.ctrlKey&&!e.button}function defaultContainer(){return this.parentNode}function defaultSubject(e,t){return null==t?{x:e.x,y:e.y}:t}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}t["default"]=function(){var e,t,r,l,d=defaultFilter,h=defaultContainer,f=defaultSubject,p=defaultTouchable,m={},_=Object(n["default"])("start","drag","end"),g=0,b=0;function drag(e){e.on("mousedown.drag",mousedowned).filter(p).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(n,o){if(!l&&d.call(this,n,o)){var u=beforestart(this,h.call(this,n,o),n,o,"mouse");u&&(Object(i["default"])(n.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),Object(s["default"])(n.view),Object(a["nopropagation"])(n),r=!1,e=n.clientX,t=n.clientY,u("start",n))}}function mousemoved(n){if(Object(a["default"])(n),!r){var i=n.clientX-e,o=n.clientY-t;r=i*i+o*o>b}m.mouse("drag",n)}function mouseupped(e){Object(i["default"])(e.view).on("mousemove.drag mouseup.drag",null),Object(s["yesdrag"])(e.view,r),Object(a["default"])(e),m.mouse("end",e)}function touchstarted(e,t){if(d.call(this,e,t)){var r,n,i=e.changedTouches,o=h.call(this,e,t),s=i.length;for(r=0;r<s;++r)(n=beforestart(this,o,e,t,i[r].identifier,i[r]))&&(Object(a["nopropagation"])(e),n("start",e,i[r]))}}function touchmoved(e){var t,r,n=e.changedTouches,i=n.length;for(t=0;t<i;++t)(r=m[n[t].identifier])&&(Object(a["default"])(e),r("drag",e,n[t]))}function touchended(e){var t,r,n=e.changedTouches,i=n.length;for(l&&clearTimeout(l),l=setTimeout((function(){l=null}),500),t=0;t<i;++t)(r=m[n[t].identifier])&&(Object(a["nopropagation"])(e),r("end",e,n[t]))}function beforestart(e,t,r,n,i,s){var a,u,l,d=_.copy(),h=Object(o["default"])(s||r,t);if(null!=(l=f.call(e,new c["default"]("beforestart",{sourceEvent:r,target:drag,identifier:i,active:g,x:h[0],y:h[1],dx:0,dy:0,dispatch:d}),n)))return a=l.x-h[0]||0,u=l.y-h[1]||0,function gesture(r,s,f){var p,_=h;switch(r){case"start":m[i]=gesture,p=g++;break;case"end":delete m[i],--g;case"drag":h=Object(o["default"])(f||s,t),p=g;break}d.call(r,e,new c["default"](r,{sourceEvent:s,subject:l,target:drag,identifier:i,active:p,x:h[0]+a,y:h[1]+u,dx:h[0]-_[0],dy:h[1]-_[1],dispatch:d}),n)}}return drag.filter=function(e){return arguments.length?(d="function"===typeof e?e:Object(u["default"])(!!e),drag):d},drag.container=function(e){return arguments.length?(h="function"===typeof e?e:Object(u["default"])(e),drag):h},drag.subject=function(e){return arguments.length?(f="function"===typeof e?e:Object(u["default"])(e),drag):f},drag.touchable=function(e){return arguments.length?(p="function"===typeof e?e:Object(u["default"])(!!e),drag):p},drag.on=function(){var e=_.on.apply(_,arguments);return e===_?drag:e},drag.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,drag):Math.sqrt(b)},drag}},"./node_modules/d3-drag/src/event.js":function(e,t,r){"use strict";function DragEvent(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}r.r(t),r.d(t,"default",(function(){return DragEvent})),DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e}},"./node_modules/d3-drag/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-drag/src/drag.js");r.d(t,"drag",(function(){return n["default"]}));var i=r("./node_modules/d3-drag/src/nodrag.js");r.d(t,"dragDisable",(function(){return i["default"]})),r.d(t,"dragEnable",(function(){return i["yesdrag"]}))},"./node_modules/d3-drag/src/nodrag.js":function(e,t,r){"use strict";r.r(t),r.d(t,"yesdrag",(function(){return yesdrag}));var n=r("./node_modules/d3-selection/src/select.js"),i=r("./node_modules/d3-drag/src/noevent.js");function yesdrag(e,t){var r=e.document.documentElement,o=Object(n["default"])(e).on("dragstart.drag",null);t&&(o.on("click.drag",i["default"],!0),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}t["default"]=function(e){var t=e.document.documentElement,r=Object(n["default"])(e).on("dragstart.drag",i["default"],!0);"onselectstart"in t?r.on("selectstart.drag",i["default"],!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}},"./node_modules/d3-drag/src/noevent.js":function(e,t,r){"use strict";function nopropagation(e){e.stopImmediatePropagation()}r.r(t),r.d(t,"nopropagation",(function(){return nopropagation})),t["default"]=function(e){e.preventDefault(),e.stopImmediatePropagation()}},"./node_modules/d3-dsv/src/autoType.js":function(e,t,r){"use strict";function autoType(e){for(var t in e){var r,i,o=e[t].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(r=+o)){if(!(i=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;n&&i[4]&&!i[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o)}else o=r;else o=null;e[t]=o}return e}r.r(t),r.d(t,"default",(function(){return autoType}));const n=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},"./node_modules/d3-dsv/src/csv.js":function(e,t,r){"use strict";r.r(t),r.d(t,"csvParse",(function(){return o})),r.d(t,"csvParseRows",(function(){return s})),r.d(t,"csvFormat",(function(){return a})),r.d(t,"csvFormatBody",(function(){return u})),r.d(t,"csvFormatRows",(function(){return c})),r.d(t,"csvFormatRow",(function(){return l})),r.d(t,"csvFormatValue",(function(){return d}));var n=r("./node_modules/d3-dsv/src/dsv.js"),i=Object(n["default"])(","),o=i.parse,s=i.parseRows,a=i.format,u=i.formatBody,c=i.formatRows,l=i.formatRow,d=i.formatValue},"./node_modules/d3-dsv/src/dsv.js":function(e,t,r){"use strict";r.r(t);var n={},i={},o=34,s=10,a=13;function objectConverter(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function customConverter(e,t){var r=objectConverter(e);return function(n,i){return t(r(n),i,e)}}function inferColumns(e){var t=Object.create(null),r=[];return e.forEach((function(e){for(var n in e)n in t||r.push(t[n]=n)})),r}function pad(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function formatYear(e){return e<0?"-"+pad(-e,6):e>9999?"+"+pad(e,6):pad(e,4)}function formatDate(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":formatYear(e.getUTCFullYear(),4)+"-"+pad(e.getUTCMonth()+1,2)+"-"+pad(e.getUTCDate(),2)+(i?"T"+pad(t,2)+":"+pad(r,2)+":"+pad(n,2)+"."+pad(i,3)+"Z":n?"T"+pad(t,2)+":"+pad(r,2)+":"+pad(n,2)+"Z":r||t?"T"+pad(t,2)+":"+pad(r,2)+"Z":"")}t["default"]=function(e){var t=new RegExp('["'+e+"\n\r]"),r=e.charCodeAt(0);function parse(e,t){var r,n,i=parseRows(e,(function(e,i){if(r)return r(e,i-1);n=e,r=t?customConverter(e,t):objectConverter(e)}));return i.columns=n||[],i}function parseRows(e,t){var u,c=[],l=e.length,d=0,h=0,f=l<=0,p=!1;function token(){if(f)return i;if(p)return p=!1,n;var t,u,c=d;if(e.charCodeAt(c)===o){while(d++<l&&e.charCodeAt(d)!==o||e.charCodeAt(++d)===o);return(t=d)>=l?f=!0:(u=e.charCodeAt(d++))===s?p=!0:u===a&&(p=!0,e.charCodeAt(d)===s&&++d),e.slice(c+1,t-1).replace(/""/g,'"')}while(d<l){if((u=e.charCodeAt(t=d++))===s)p=!0;else if(u===a)p=!0,e.charCodeAt(d)===s&&++d;else if(u!==r)continue;return e.slice(c,t)}return f=!0,e.slice(c,l)}e.charCodeAt(l-1)===s&&--l,e.charCodeAt(l-1)===a&&--l;while((u=token())!==i){var m=[];while(u!==n&&u!==i)m.push(u),u=token();t&&null==(m=t(m,h++))||c.push(m)}return c}function preformatBody(t,r){return t.map((function(t){return r.map((function(e){return formatValue(t[e])})).join(e)}))}function format(t,r){return null==r&&(r=inferColumns(t)),[r.map(formatValue).join(e)].concat(preformatBody(t,r)).join("\n")}function formatBody(e,t){return null==t&&(t=inferColumns(e)),preformatBody(e,t).join("\n")}function formatRows(e){return e.map(formatRow).join("\n")}function formatRow(t){return t.map(formatValue).join(e)}function formatValue(e){return null==e?"":e instanceof Date?formatDate(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:parse,parseRows:parseRows,format:format,formatBody:formatBody,formatRows:formatRows,formatRow:formatRow,formatValue:formatValue}}},"./node_modules/d3-dsv/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-dsv/src/dsv.js");r.d(t,"dsvFormat",(function(){return n["default"]}));var i=r("./node_modules/d3-dsv/src/csv.js");r.d(t,"csvParse",(function(){return i["csvParse"]})),r.d(t,"csvParseRows",(function(){return i["csvParseRows"]})),r.d(t,"csvFormat",(function(){return i["csvFormat"]})),r.d(t,"csvFormatBody",(function(){return i["csvFormatBody"]})),r.d(t,"csvFormatRows",(function(){return i["csvFormatRows"]})),r.d(t,"csvFormatRow",(function(){return i["csvFormatRow"]})),r.d(t,"csvFormatValue",(function(){return i["csvFormatValue"]}));var o=r("./node_modules/d3-dsv/src/tsv.js");r.d(t,"tsvParse",(function(){return o["tsvParse"]})),r.d(t,"tsvParseRows",(function(){return o["tsvParseRows"]})),r.d(t,"tsvFormat",(function(){return o["tsvFormat"]})),r.d(t,"tsvFormatBody",(function(){return o["tsvFormatBody"]})),r.d(t,"tsvFormatRows",(function(){return o["tsvFormatRows"]})),r.d(t,"tsvFormatRow",(function(){return o["tsvFormatRow"]})),r.d(t,"tsvFormatValue",(function(){return o["tsvFormatValue"]}));var s=r("./node_modules/d3-dsv/src/autoType.js");r.d(t,"autoType",(function(){return s["default"]}))},"./node_modules/d3-dsv/src/tsv.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tsvParse",(function(){return o})),r.d(t,"tsvParseRows",(function(){return s})),r.d(t,"tsvFormat",(function(){return a})),r.d(t,"tsvFormatBody",(function(){return u})),r.d(t,"tsvFormatRows",(function(){return c})),r.d(t,"tsvFormatRow",(function(){return l})),r.d(t,"tsvFormatValue",(function(){return d}));var n=r("./node_modules/d3-dsv/src/dsv.js"),i=Object(n["default"])("\t"),o=i.parse,s=i.parseRows,a=i.format,u=i.formatBody,c=i.formatRows,l=i.formatRow,d=i.formatValue},"./node_modules/d3-ease/src/back.js":function(e,t,r){"use strict";r.r(t),r.d(t,"backIn",(function(){return i})),r.d(t,"backOut",(function(){return o})),r.d(t,"backInOut",(function(){return s}));var n=1.70158,i=function custom(e){function backIn(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,backIn.overshoot=custom,backIn}(n),o=function custom(e){function backOut(t){return--t*t*((t+1)*e+t)+1}return e=+e,backOut.overshoot=custom,backOut}(n),s=function custom(e){function backInOut(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,backInOut.overshoot=custom,backInOut}(n)},"./node_modules/d3-ease/src/bounce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bounceIn",(function(){return bounceIn})),r.d(t,"bounceOut",(function(){return bounceOut})),r.d(t,"bounceInOut",(function(){return bounceInOut}));var n=4/11,i=6/11,o=8/11,s=3/4,a=9/11,u=10/11,c=15/16,l=21/22,d=63/64,h=1/n/n;function bounceIn(e){return 1-bounceOut(1-e)}function bounceOut(e){return(e=+e)<n?h*e*e:e<o?h*(e-=i)*e+s:e<u?h*(e-=a)*e+c:h*(e-=l)*e+d}function bounceInOut(e){return((e*=2)<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}},"./node_modules/d3-ease/src/circle.js":function(e,t,r){"use strict";function circleIn(e){return 1-Math.sqrt(1-e*e)}function circleOut(e){return Math.sqrt(1- --e*e)}function circleInOut(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}r.r(t),r.d(t,"circleIn",(function(){return circleIn})),r.d(t,"circleOut",(function(){return circleOut})),r.d(t,"circleInOut",(function(){return circleInOut}))},"./node_modules/d3-ease/src/cubic.js":function(e,t,r){"use strict";function cubicIn(e){return e*e*e}function cubicOut(e){return--e*e*e+1}function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}r.r(t),r.d(t,"cubicIn",(function(){return cubicIn})),r.d(t,"cubicOut",(function(){return cubicOut})),r.d(t,"cubicInOut",(function(){return cubicInOut}))},"./node_modules/d3-ease/src/elastic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"elasticIn",(function(){return a})),r.d(t,"elasticOut",(function(){return u})),r.d(t,"elasticInOut",(function(){return c}));var n=r("./node_modules/d3-ease/src/math.js"),i=2*Math.PI,o=1,s=.3,a=function custom(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=i);function elasticIn(i){return e*Object(n["tpmt"])(- --i)*Math.sin((r-i)/t)}return elasticIn.amplitude=function(e){return custom(e,t*i)},elasticIn.period=function(t){return custom(e,t)},elasticIn}(o,s),u=function custom(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=i);function elasticOut(i){return 1-e*Object(n["tpmt"])(i=+i)*Math.sin((i+r)/t)}return elasticOut.amplitude=function(e){return custom(e,t*i)},elasticOut.period=function(t){return custom(e,t)},elasticOut}(o,s),c=function custom(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=i);function elasticInOut(i){return((i=2*i-1)<0?e*Object(n["tpmt"])(-i)*Math.sin((r-i)/t):2-e*Object(n["tpmt"])(i)*Math.sin((r+i)/t))/2}return elasticInOut.amplitude=function(e){return custom(e,t*i)},elasticInOut.period=function(t){return custom(e,t)},elasticInOut}(o,s)},"./node_modules/d3-ease/src/exp.js":function(e,t,r){"use strict";r.r(t),r.d(t,"expIn",(function(){return expIn})),r.d(t,"expOut",(function(){return expOut})),r.d(t,"expInOut",(function(){return expInOut}));var n=r("./node_modules/d3-ease/src/math.js");function expIn(e){return Object(n["tpmt"])(1-+e)}function expOut(e){return 1-Object(n["tpmt"])(e)}function expInOut(e){return((e*=2)<=1?Object(n["tpmt"])(1-e):2-Object(n["tpmt"])(e-1))/2}},"./node_modules/d3-ease/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-ease/src/linear.js");r.d(t,"easeLinear",(function(){return n["linear"]}));var i=r("./node_modules/d3-ease/src/quad.js");r.d(t,"easeQuad",(function(){return i["quadInOut"]})),r.d(t,"easeQuadIn",(function(){return i["quadIn"]})),r.d(t,"easeQuadOut",(function(){return i["quadOut"]})),r.d(t,"easeQuadInOut",(function(){return i["quadInOut"]}));var o=r("./node_modules/d3-ease/src/cubic.js");r.d(t,"easeCubic",(function(){return o["cubicInOut"]})),r.d(t,"easeCubicIn",(function(){return o["cubicIn"]})),r.d(t,"easeCubicOut",(function(){return o["cubicOut"]})),r.d(t,"easeCubicInOut",(function(){return o["cubicInOut"]}));var s=r("./node_modules/d3-ease/src/poly.js");r.d(t,"easePoly",(function(){return s["polyInOut"]})),r.d(t,"easePolyIn",(function(){return s["polyIn"]})),r.d(t,"easePolyOut",(function(){return s["polyOut"]})),r.d(t,"easePolyInOut",(function(){return s["polyInOut"]}));var a=r("./node_modules/d3-ease/src/sin.js");r.d(t,"easeSin",(function(){return a["sinInOut"]})),r.d(t,"easeSinIn",(function(){return a["sinIn"]})),r.d(t,"easeSinOut",(function(){return a["sinOut"]})),r.d(t,"easeSinInOut",(function(){return a["sinInOut"]}));var u=r("./node_modules/d3-ease/src/exp.js");r.d(t,"easeExp",(function(){return u["expInOut"]})),r.d(t,"easeExpIn",(function(){return u["expIn"]})),r.d(t,"easeExpOut",(function(){return u["expOut"]})),r.d(t,"easeExpInOut",(function(){return u["expInOut"]}));var c=r("./node_modules/d3-ease/src/circle.js");r.d(t,"easeCircle",(function(){return c["circleInOut"]})),r.d(t,"easeCircleIn",(function(){return c["circleIn"]})),r.d(t,"easeCircleOut",(function(){return c["circleOut"]})),r.d(t,"easeCircleInOut",(function(){return c["circleInOut"]}));var l=r("./node_modules/d3-ease/src/bounce.js");r.d(t,"easeBounce",(function(){return l["bounceOut"]})),r.d(t,"easeBounceIn",(function(){return l["bounceIn"]})),r.d(t,"easeBounceOut",(function(){return l["bounceOut"]})),r.d(t,"easeBounceInOut",(function(){return l["bounceInOut"]}));var d=r("./node_modules/d3-ease/src/back.js");r.d(t,"easeBack",(function(){return d["backInOut"]})),r.d(t,"easeBackIn",(function(){return d["backIn"]})),r.d(t,"easeBackOut",(function(){return d["backOut"]})),r.d(t,"easeBackInOut",(function(){return d["backInOut"]}));var h=r("./node_modules/d3-ease/src/elastic.js");r.d(t,"easeElastic",(function(){return h["elasticOut"]})),r.d(t,"easeElasticIn",(function(){return h["elasticIn"]})),r.d(t,"easeElasticOut",(function(){return h["elasticOut"]})),r.d(t,"easeElasticInOut",(function(){return h["elasticInOut"]}))},"./node_modules/d3-ease/src/linear.js":function(e,t,r){"use strict";r.r(t),r.d(t,"linear",(function(){return linear}));const linear=e=>+e},"./node_modules/d3-ease/src/math.js":function(e,t,r){"use strict";function tpmt(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}r.r(t),r.d(t,"tpmt",(function(){return tpmt}))},"./node_modules/d3-ease/src/poly.js":function(e,t,r){"use strict";r.r(t),r.d(t,"polyIn",(function(){return i})),r.d(t,"polyOut",(function(){return o})),r.d(t,"polyInOut",(function(){return s}));var n=3,i=function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(n),o=function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(n),s=function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(n)},"./node_modules/d3-ease/src/quad.js":function(e,t,r){"use strict";function quadIn(e){return e*e}function quadOut(e){return e*(2-e)}function quadInOut(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}r.r(t),r.d(t,"quadIn",(function(){return quadIn})),r.d(t,"quadOut",(function(){return quadOut})),r.d(t,"quadInOut",(function(){return quadInOut}))},"./node_modules/d3-ease/src/sin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sinIn",(function(){return sinIn})),r.d(t,"sinOut",(function(){return sinOut})),r.d(t,"sinInOut",(function(){return sinInOut}));var n=Math.PI,i=n/2;function sinIn(e){return 1===+e?1:1-Math.cos(e*i)}function sinOut(e){return Math.sin(e*i)}function sinInOut(e){return(1-Math.cos(n*e))/2}},"./node_modules/d3-fetch/src/blob.js":function(e,t,r){"use strict";function responseBlob(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}r.r(t),t["default"]=function(e,t){return fetch(e,t).then(responseBlob)}},"./node_modules/d3-fetch/src/buffer.js":function(e,t,r){"use strict";function responseArrayBuffer(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}r.r(t),t["default"]=function(e,t){return fetch(e,t).then(responseArrayBuffer)}},"./node_modules/d3-fetch/src/dsv.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return dsv})),r.d(t,"csv",(function(){return a})),r.d(t,"tsv",(function(){return u}));var n=r("./node_modules/d3-dsv/src/dsv.js"),i=r("./node_modules/d3-dsv/src/csv.js"),o=r("./node_modules/d3-dsv/src/tsv.js"),s=r("./node_modules/d3-fetch/src/text.js");function dsvParse(e){return function(t,r,n){return 2===arguments.length&&"function"===typeof r&&(n=r,r=void 0),Object(s["default"])(t,r).then((function(t){return e(t,n)}))}}function dsv(e,t,r,i){3===arguments.length&&"function"===typeof r&&(i=r,r=void 0);var o=Object(n["default"])(e);return Object(s["default"])(t,r).then((function(e){return o.parse(e,i)}))}var a=dsvParse(i["csvParse"]),u=dsvParse(o["tsvParse"])},"./node_modules/d3-fetch/src/image.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return new Promise((function(r,n){var i=new Image;for(var o in t)i[o]=t[o];i.onerror=n,i.onload=function(){r(i)},i.src=e}))}},"./node_modules/d3-fetch/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-fetch/src/blob.js");r.d(t,"blob",(function(){return n["default"]}));var i=r("./node_modules/d3-fetch/src/buffer.js");r.d(t,"buffer",(function(){return i["default"]}));var o=r("./node_modules/d3-fetch/src/dsv.js");r.d(t,"dsv",(function(){return o["default"]})),r.d(t,"csv",(function(){return o["csv"]})),r.d(t,"tsv",(function(){return o["tsv"]}));var s=r("./node_modules/d3-fetch/src/image.js");r.d(t,"image",(function(){return s["default"]}));var a=r("./node_modules/d3-fetch/src/json.js");r.d(t,"json",(function(){return a["default"]}));var u=r("./node_modules/d3-fetch/src/text.js");r.d(t,"text",(function(){return u["default"]}));var c=r("./node_modules/d3-fetch/src/xml.js");r.d(t,"xml",(function(){return c["default"]})),r.d(t,"html",(function(){return c["html"]})),r.d(t,"svg",(function(){return c["svg"]}))},"./node_modules/d3-fetch/src/json.js":function(e,t,r){"use strict";function responseJson(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}r.r(t),t["default"]=function(e,t){return fetch(e,t).then(responseJson)}},"./node_modules/d3-fetch/src/text.js":function(e,t,r){"use strict";function responseText(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}r.r(t),t["default"]=function(e,t){return fetch(e,t).then(responseText)}},"./node_modules/d3-fetch/src/xml.js":function(e,t,r){"use strict";r.r(t),r.d(t,"html",(function(){return i})),r.d(t,"svg",(function(){return o}));var n=r("./node_modules/d3-fetch/src/text.js");function parser(e){return(t,r)=>Object(n["default"])(t,r).then(t=>(new DOMParser).parseFromString(t,e))}t["default"]=parser("application/xml");var i=parser("text/html"),o=parser("image/svg+xml")},"./node_modules/d3-force/src/center.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){var r,n=1;function force(){var i,o,s=r.length,a=0,u=0;for(i=0;i<s;++i)o=r[i],a+=o.x,u+=o.y;for(a=(a/s-e)*n,u=(u/s-t)*n,i=0;i<s;++i)o=r[i],o.x-=a,o.y-=u}return null==e&&(e=0),null==t&&(t=0),force.initialize=function(e){r=e},force.x=function(t){return arguments.length?(e=+t,force):e},force.y=function(e){return arguments.length?(t=+e,force):t},force.strength=function(e){return arguments.length?(n=+e,force):n},force}},"./node_modules/d3-force/src/collide.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quadtree.js"),i=r("./node_modules/d3-force/src/constant.js"),o=r("./node_modules/d3-force/src/jiggle.js");function x(e){return e.x+e.vx}function y(e){return e.y+e.vy}t["default"]=function(e){var t,r,s,a=1,u=1;function force(){for(var e,i,c,l,d,h,f,p=t.length,m=0;m<u;++m)for(i=Object(n["default"])(t,x,y).visitAfter(prepare),e=0;e<p;++e)c=t[e],h=r[c.index],f=h*h,l=c.x+c.vx,d=c.y+c.vy,i.visit(apply);function apply(e,t,r,n,i){var u=e.data,p=e.r,m=h+p;if(!u)return t>l+m||n<l-m||r>d+m||i<d-m;if(u.index>c.index){var _=l-u.x-u.vx,g=d-u.y-u.vy,b=_*_+g*g;b<m*m&&(0===_&&(_=Object(o["default"])(s),b+=_*_),0===g&&(g=Object(o["default"])(s),b+=g*g),b=(m-(b=Math.sqrt(b)))/b*a,c.vx+=(_*=b)*(m=(p*=p)/(f+p)),c.vy+=(g*=b)*m,u.vx-=_*(m=1-m),u.vy-=g*m)}}}function prepare(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function initialize(){if(t){var n,i,o=t.length;for(r=new Array(o),n=0;n<o;++n)i=t[n],r[i.index]=+e(i,n,t)}}return"function"!==typeof e&&(e=Object(i["default"])(null==e?1:+e)),force.initialize=function(e,r){t=e,s=r,initialize()},force.iterations=function(e){return arguments.length?(u=+e,force):u},force.strength=function(e){return arguments.length?(a=+e,force):a},force.radius=function(t){return arguments.length?(e="function"===typeof t?t:Object(i["default"])(+t),initialize(),force):e},force}},"./node_modules/d3-force/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-force/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-force/src/center.js");r.d(t,"forceCenter",(function(){return n["default"]}));var i=r("./node_modules/d3-force/src/collide.js");r.d(t,"forceCollide",(function(){return i["default"]}));var o=r("./node_modules/d3-force/src/link.js");r.d(t,"forceLink",(function(){return o["default"]}));var s=r("./node_modules/d3-force/src/manyBody.js");r.d(t,"forceManyBody",(function(){return s["default"]}));var a=r("./node_modules/d3-force/src/radial.js");r.d(t,"forceRadial",(function(){return a["default"]}));var u=r("./node_modules/d3-force/src/simulation.js");r.d(t,"forceSimulation",(function(){return u["default"]}));var c=r("./node_modules/d3-force/src/x.js");r.d(t,"forceX",(function(){return c["default"]}));var l=r("./node_modules/d3-force/src/y.js");r.d(t,"forceY",(function(){return l["default"]}))},"./node_modules/d3-force/src/jiggle.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return 1e-6*(e()-.5)}},"./node_modules/d3-force/src/lcg.js":function(e,t,r){"use strict";r.r(t);const n=1664525,i=1013904223,o=4294967296;t["default"]=function(){let e=1;return()=>(e=(n*e+i)%o)/o}},"./node_modules/d3-force/src/link.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-force/src/constant.js"),i=r("./node_modules/d3-force/src/jiggle.js");function index(e){return e.index}function find(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}t["default"]=function(e){var t,r,o,s,a,u,c=index,l=defaultStrength,d=Object(n["default"])(30),h=1;function defaultStrength(e){return 1/Math.min(s[e.source.index],s[e.target.index])}function force(n){for(var o=0,s=e.length;o<h;++o)for(var c,l,d,f,p,m,_,g=0;g<s;++g)c=e[g],l=c.source,d=c.target,f=d.x+d.vx-l.x-l.vx||Object(i["default"])(u),p=d.y+d.vy-l.y-l.vy||Object(i["default"])(u),m=Math.sqrt(f*f+p*p),m=(m-r[g])/m*n*t[g],f*=m,p*=m,d.vx-=f*(_=a[g]),d.vy-=p*_,l.vx+=f*(_=1-_),l.vy+=p*_}function initialize(){if(o){var n,i,u=o.length,l=e.length,d=new Map(o.map((e,t)=>[c(e,t,o),e]));for(n=0,s=new Array(u);n<l;++n)i=e[n],i.index=n,"object"!==typeof i.source&&(i.source=find(d,i.source)),"object"!==typeof i.target&&(i.target=find(d,i.target)),s[i.source.index]=(s[i.source.index]||0)+1,s[i.target.index]=(s[i.target.index]||0)+1;for(n=0,a=new Array(l);n<l;++n)i=e[n],a[n]=s[i.source.index]/(s[i.source.index]+s[i.target.index]);t=new Array(l),initializeStrength(),r=new Array(l),initializeDistance()}}function initializeStrength(){if(o)for(var r=0,n=e.length;r<n;++r)t[r]=+l(e[r],r,e)}function initializeDistance(){if(o)for(var t=0,n=e.length;t<n;++t)r[t]=+d(e[t],t,e)}return null==e&&(e=[]),force.initialize=function(e,t){o=e,u=t,initialize()},force.links=function(t){return arguments.length?(e=t,initialize(),force):e},force.id=function(e){return arguments.length?(c=e,force):c},force.iterations=function(e){return arguments.length?(h=+e,force):h},force.strength=function(e){return arguments.length?(l="function"===typeof e?e:Object(n["default"])(+e),initializeStrength(),force):l},force.distance=function(e){return arguments.length?(d="function"===typeof e?e:Object(n["default"])(+e),initializeDistance(),force):d},force}},"./node_modules/d3-force/src/manyBody.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quadtree.js"),i=r("./node_modules/d3-force/src/constant.js"),o=r("./node_modules/d3-force/src/jiggle.js"),s=r("./node_modules/d3-force/src/simulation.js");t["default"]=function(){var e,t,r,a,u,c=Object(i["default"])(-30),l=1,d=1/0,h=.81;function force(r){var i,o=e.length,u=Object(n["default"])(e,s["x"],s["y"]).visitAfter(accumulate);for(a=r,i=0;i<o;++i)t=e[i],u.visit(apply)}function initialize(){if(e){var t,r,n=e.length;for(u=new Array(n),t=0;t<n;++t)r=e[t],u[r.index]=+c(r,t,e)}}function accumulate(e){var t,r,n,i,o,s=0,a=0;if(e.length){for(n=i=o=0;o<4;++o)(t=e[o])&&(r=Math.abs(t.value))&&(s+=t.value,a+=r,n+=r*t.x,i+=r*t.y);e.x=n/a,e.y=i/a}else{t=e,t.x=t.data.x,t.y=t.data.y;do{s+=u[t.data.index]}while(t=t.next)}e.value=s}function apply(e,n,i,s){if(!e.value)return!0;var c=e.x-t.x,f=e.y-t.y,p=s-n,m=c*c+f*f;if(p*p/h<m)return m<d&&(0===c&&(c=Object(o["default"])(r),m+=c*c),0===f&&(f=Object(o["default"])(r),m+=f*f),m<l&&(m=Math.sqrt(l*m)),t.vx+=c*e.value*a/m,t.vy+=f*e.value*a/m),!0;if(!(e.length||m>=d)){(e.data!==t||e.next)&&(0===c&&(c=Object(o["default"])(r),m+=c*c),0===f&&(f=Object(o["default"])(r),m+=f*f),m<l&&(m=Math.sqrt(l*m)));do{e.data!==t&&(p=u[e.data.index]*a/m,t.vx+=c*p,t.vy+=f*p)}while(e=e.next)}}return force.initialize=function(t,n){e=t,r=n,initialize()},force.strength=function(e){return arguments.length?(c="function"===typeof e?e:Object(i["default"])(+e),initialize(),force):c},force.distanceMin=function(e){return arguments.length?(l=e*e,force):Math.sqrt(l)},force.distanceMax=function(e){return arguments.length?(d=e*e,force):Math.sqrt(d)},force.theta=function(e){return arguments.length?(h=e*e,force):Math.sqrt(h)},force}},"./node_modules/d3-force/src/radial.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-force/src/constant.js");t["default"]=function(e,t,r){var i,o,s,a=Object(n["default"])(.1);function force(e){for(var n=0,a=i.length;n<a;++n){var u=i[n],c=u.x-t||1e-6,l=u.y-r||1e-6,d=Math.sqrt(c*c+l*l),h=(s[n]-d)*o[n]*e/d;u.vx+=c*h,u.vy+=l*h}}function initialize(){if(i){var t,r=i.length;for(o=new Array(r),s=new Array(r),t=0;t<r;++t)s[t]=+e(i[t],t,i),o[t]=isNaN(s[t])?0:+a(i[t],t,i)}}return"function"!==typeof e&&(e=Object(n["default"])(+e)),null==t&&(t=0),null==r&&(r=0),force.initialize=function(e){i=e,initialize()},force.strength=function(e){return arguments.length?(a="function"===typeof e?e:Object(n["default"])(+e),initialize(),force):a},force.radius=function(t){return arguments.length?(e="function"===typeof t?t:Object(n["default"])(+t),initialize(),force):e},force.x=function(e){return arguments.length?(t=+e,force):t},force.y=function(e){return arguments.length?(r=+e,force):r},force}},"./node_modules/d3-force/src/simulation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"x",(function(){return x})),r.d(t,"y",(function(){return y}));var n=r("./node_modules/d3-dispatch/src/dispatch.js"),i=r("./node_modules/d3-timer/src/timer.js"),o=r("./node_modules/d3-force/src/lcg.js");function x(e){return e.x}function y(e){return e.y}var s=10,a=Math.PI*(3-Math.sqrt(5));t["default"]=function(e){var t,r=1,u=.001,c=1-Math.pow(u,1/300),l=0,d=.6,h=new Map,f=Object(i["timer"])(step),p=Object(n["default"])("tick","end"),m=Object(o["default"])();function step(){tick(),p.call("tick",t),r<u&&(f.stop(),p.call("end",t))}function tick(n){var i,o,s=e.length;void 0===n&&(n=1);for(var a=0;a<n;++a)for(r+=(l-r)*c,h.forEach((function(e){e(r)})),i=0;i<s;++i)o=e[i],null==o.fx?o.x+=o.vx*=d:(o.x=o.fx,o.vx=0),null==o.fy?o.y+=o.vy*=d:(o.y=o.fy,o.vy=0);return t}function initializeNodes(){for(var t,r=0,n=e.length;r<n;++r){if(t=e[r],t.index=r,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=s*Math.sqrt(.5+r),o=r*a;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function initializeForce(t){return t.initialize&&t.initialize(e,m),t}return null==e&&(e=[]),initializeNodes(),t={tick:tick,restart:function(){return f.restart(step),t},stop:function(){return f.stop(),t},nodes:function(r){return arguments.length?(e=r,initializeNodes(),h.forEach(initializeForce),t):e},alpha:function(e){return arguments.length?(r=+e,t):r},alphaMin:function(e){return arguments.length?(u=+e,t):u},alphaDecay:function(e){return arguments.length?(c=+e,t):+c},alphaTarget:function(e){return arguments.length?(l=+e,t):l},velocityDecay:function(e){return arguments.length?(d=1-e,t):1-d},randomSource:function(e){return arguments.length?(m=e,h.forEach(initializeForce),t):m},force:function(e,r){return arguments.length>1?(null==r?h.delete(e):h.set(e,initializeForce(r)),t):h.get(e)},find:function(t,r,n){var i,o,s,a,u,c=0,l=e.length;for(null==n?n=1/0:n*=n,c=0;c<l;++c)a=e[c],i=t-a.x,o=r-a.y,s=i*i+o*o,s<n&&(u=a,n=s);return u},on:function(e,r){return arguments.length>1?(p.on(e,r),t):p.on(e)}}}},"./node_modules/d3-force/src/x.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-force/src/constant.js");t["default"]=function(e){var t,r,i,o=Object(n["default"])(.1);function force(e){for(var n,o=0,s=t.length;o<s;++o)n=t[o],n.vx+=(i[o]-n.x)*r[o]*e}function initialize(){if(t){var n,s=t.length;for(r=new Array(s),i=new Array(s),n=0;n<s;++n)r[n]=isNaN(i[n]=+e(t[n],n,t))?0:+o(t[n],n,t)}}return"function"!==typeof e&&(e=Object(n["default"])(null==e?0:+e)),force.initialize=function(e){t=e,initialize()},force.strength=function(e){return arguments.length?(o="function"===typeof e?e:Object(n["default"])(+e),initialize(),force):o},force.x=function(t){return arguments.length?(e="function"===typeof t?t:Object(n["default"])(+t),initialize(),force):e},force}},"./node_modules/d3-force/src/y.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-force/src/constant.js");t["default"]=function(e){var t,r,i,o=Object(n["default"])(.1);function force(e){for(var n,o=0,s=t.length;o<s;++o)n=t[o],n.vy+=(i[o]-n.y)*r[o]*e}function initialize(){if(t){var n,s=t.length;for(r=new Array(s),i=new Array(s),n=0;n<s;++n)r[n]=isNaN(i[n]=+e(t[n],n,t))?0:+o(t[n],n,t)}}return"function"!==typeof e&&(e=Object(n["default"])(null==e?0:+e)),force.initialize=function(e){t=e,initialize()},force.strength=function(e){return arguments.length?(o="function"===typeof e?e:Object(n["default"])(+e),initialize(),force):o},force.y=function(t){return arguments.length?(e="function"===typeof t?t:Object(n["default"])(+t),initialize(),force):e},force}},"./node_modules/d3-format/src/defaultLocale.js":function(e,t,r){"use strict";r.r(t),r.d(t,"format",(function(){return i})),r.d(t,"formatPrefix",(function(){return o})),r.d(t,"default",(function(){return defaultLocale}));var n,i,o,s=r("./node_modules/d3-format/src/locale.js");function defaultLocale(e){return n=Object(s["default"])(e),i=n.format,o=n.formatPrefix,n}defaultLocale({thousands:",",grouping:[3],currency:["$",""]})},"./node_modules/d3-format/src/exponent.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/formatDecimal.js");t["default"]=function(e){return e=Object(n["formatDecimalParts"])(Math.abs(e)),e?e[1]:NaN}},"./node_modules/d3-format/src/formatDecimal.js":function(e,t,r){"use strict";function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}r.r(t),r.d(t,"formatDecimalParts",(function(){return formatDecimalParts})),t["default"]=function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}},"./node_modules/d3-format/src/formatGroup.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return function(r,n){var i=r.length,o=[],s=0,a=e[0],u=0;while(i>0&&a>0){if(u+a+1>n&&(a=Math.max(1,n-u)),o.push(r.substring(i-=a,i+a)),(u+=a+1)>n)break;a=e[s=(s+1)%e.length]}return o.reverse().join(t)}}},"./node_modules/d3-format/src/formatNumerals.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}},"./node_modules/d3-format/src/formatPrefixAuto.js":function(e,t,r){"use strict";r.r(t),r.d(t,"prefixExponent",(function(){return n}));var n,i=r("./node_modules/d3-format/src/formatDecimal.js");t["default"]=function(e,t){var r=Object(i["formatDecimalParts"])(e,t);if(!r)return e+"";var o=r[0],s=r[1],a=s-(n=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,u=o.length;return a===u?o:a>u?o+new Array(a-u+1).join("0"):a>0?o.slice(0,a)+"."+o.slice(a):"0."+new Array(1-a).join("0")+Object(i["formatDecimalParts"])(e,Math.max(0,t+a-1))[0]}},"./node_modules/d3-format/src/formatRounded.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/formatDecimal.js");t["default"]=function(e,t){var r=Object(n["formatDecimalParts"])(e,t);if(!r)return e+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}},"./node_modules/d3-format/src/formatSpecifier.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return formatSpecifier})),r.d(t,"FormatSpecifier",(function(){return FormatSpecifier}));var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=n.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},"./node_modules/d3-format/src/formatTrim.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(t+1):e}},"./node_modules/d3-format/src/formatTypes.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/formatDecimal.js"),i=r("./node_modules/d3-format/src/formatPrefixAuto.js"),o=r("./node_modules/d3-format/src/formatRounded.js");t["default"]={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:n["default"],e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Object(o["default"])(100*e,t),r:o["default"],s:i["default"],X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)}},"./node_modules/d3-format/src/identity.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e}},"./node_modules/d3-format/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/defaultLocale.js");r.d(t,"formatDefaultLocale",(function(){return n["default"]})),r.d(t,"format",(function(){return n["format"]})),r.d(t,"formatPrefix",(function(){return n["formatPrefix"]}));var i=r("./node_modules/d3-format/src/locale.js");r.d(t,"formatLocale",(function(){return i["default"]}));var o=r("./node_modules/d3-format/src/formatSpecifier.js");r.d(t,"formatSpecifier",(function(){return o["default"]})),r.d(t,"FormatSpecifier",(function(){return o["FormatSpecifier"]}));var s=r("./node_modules/d3-format/src/precisionFixed.js");r.d(t,"precisionFixed",(function(){return s["default"]}));var a=r("./node_modules/d3-format/src/precisionPrefix.js");r.d(t,"precisionPrefix",(function(){return a["default"]}));var u=r("./node_modules/d3-format/src/precisionRound.js");r.d(t,"precisionRound",(function(){return u["default"]}))},"./node_modules/d3-format/src/locale.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/exponent.js"),i=r("./node_modules/d3-format/src/formatGroup.js"),o=r("./node_modules/d3-format/src/formatNumerals.js"),s=r("./node_modules/d3-format/src/formatSpecifier.js"),a=r("./node_modules/d3-format/src/formatTrim.js"),u=r("./node_modules/d3-format/src/formatTypes.js"),c=r("./node_modules/d3-format/src/formatPrefixAuto.js"),l=r("./node_modules/d3-format/src/identity.js"),d=Array.prototype.map,h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];t["default"]=function(e){var t=void 0===e.grouping||void 0===e.thousands?l["default"]:Object(i["default"])(d.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",f=void 0===e.currency?"":e.currency[1]+"",p=void 0===e.decimal?".":e.decimal+"",m=void 0===e.numerals?l["default"]:Object(o["default"])(d.call(e.numerals,String)),_=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"":e.minus+"",b=void 0===e.nan?"NaN":e.nan+"";function newFormat(e){e=Object(s["default"])(e);var n=e.fill,i=e.align,o=e.sign,l=e.symbol,d=e.zero,v=e.width,M=e.comma,T=e.precision,S=e.trim,C=e.type;"n"===C?(M=!0,C="g"):u["default"][C]||(void 0===T&&(T=12),S=!0,C="g"),(d||"0"===n&&"="===i)&&(d=!0,n="0",i="=");var E="$"===l?r:"#"===l&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",P="$"===l?f:/[%p]/.test(C)?_:"",A=u["default"][C],j=/[defgprs%]/.test(C);function format(e){var r,s,u,l=E,f=P;if("c"===C)f=A(e)+f,e="";else{e=+e;var _=e<0||1/e<0;if(e=isNaN(e)?b:A(Math.abs(e),T),S&&(e=Object(a["default"])(e)),_&&0===+e&&"+"!==o&&(_=!1),l=(_?"("===o?o:g:"-"===o||"("===o?"":o)+l,f=("s"===C?h[8+c["prefixExponent"]/3]:"")+f+(_&&"("===o?")":""),j){r=-1,s=e.length;while(++r<s)if(u=e.charCodeAt(r),48>u||u>57){f=(46===u?p+e.slice(r+1):e.slice(r))+f,e=e.slice(0,r);break}}}M&&!d&&(e=t(e,1/0));var O=l.length+e.length+f.length,R=O<v?new Array(v-O+1).join(n):"";switch(M&&d&&(e=t(R+e,R.length?v-f.length:1/0),R=""),i){case"<":e=l+e+f+R;break;case"=":e=l+R+e+f;break;case"^":e=R.slice(0,O=R.length>>1)+l+e+f+R.slice(O);break;default:e=R+l+e+f;break}return m(e)}return T=void 0===T?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T)),format.toString=function(){return e+""},format}function formatPrefix(e,t){var r=newFormat((e=Object(s["default"])(e),e.type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Object(n["default"])(t)/3))),o=Math.pow(10,-i),a=h[8+i/3];return function(e){return r(o*e)+a}}return{format:newFormat,formatPrefix:formatPrefix}}},"./node_modules/d3-format/src/precisionFixed.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/exponent.js");t["default"]=function(e){return Math.max(0,-Object(n["default"])(Math.abs(e)))}},"./node_modules/d3-format/src/precisionPrefix.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/exponent.js");t["default"]=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(n["default"])(t)/3)))-Object(n["default"])(Math.abs(e)))}},"./node_modules/d3-format/src/precisionRound.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-format/src/exponent.js");t["default"]=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Object(n["default"])(t)-Object(n["default"])(e))+1}},"./node_modules/d3-geo/src/area.js":function(e,t,r){"use strict";r.r(t),r.d(t,"areaRingSum",(function(){return h})),r.d(t,"areaStream",(function(){return p}));var n,i,o,s,a,u=r("./node_modules/d3-array/src/fsum.js"),c=r("./node_modules/d3-geo/src/math.js"),l=r("./node_modules/d3-geo/src/noop.js"),d=r("./node_modules/d3-geo/src/stream.js"),h=new u["Adder"],f=new u["Adder"],p={point:l["default"],lineStart:l["default"],lineEnd:l["default"],polygonStart:function(){h=new u["Adder"],p.lineStart=areaRingStart,p.lineEnd=areaRingEnd},polygonEnd:function(){var e=+h;f.add(e<0?c["tau"]+e:e),this.lineStart=this.lineEnd=this.point=l["default"]},sphere:function(){f.add(c["tau"])}};function areaRingStart(){p.point=areaPointFirst}function areaRingEnd(){areaPoint(n,i)}function areaPointFirst(e,t){p.point=areaPoint,n=e,i=t,e*=c["radians"],t*=c["radians"],o=e,s=Object(c["cos"])(t=t/2+c["quarterPi"]),a=Object(c["sin"])(t)}function areaPoint(e,t){e*=c["radians"],t*=c["radians"],t=t/2+c["quarterPi"];var r=e-o,n=r>=0?1:-1,i=n*r,u=Object(c["cos"])(t),l=Object(c["sin"])(t),d=a*l,f=s*u+d*Object(c["cos"])(i),p=d*n*Object(c["sin"])(i);h.add(Object(c["atan2"])(p,f)),o=e,s=u,a=l}t["default"]=function(e){return f=new u["Adder"],Object(d["default"])(e,p),2*f}},"./node_modules/d3-geo/src/bounds.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a,u,c,l,d,h,f,p=r("./node_modules/d3-array/src/fsum.js"),m=r("./node_modules/d3-geo/src/area.js"),_=r("./node_modules/d3-geo/src/cartesian.js"),g=r("./node_modules/d3-geo/src/math.js"),b=r("./node_modules/d3-geo/src/stream.js"),v={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){v.point=boundsRingPoint,v.lineStart=boundsRingStart,v.lineEnd=boundsRingEnd,d=new p["Adder"],m["areaStream"].polygonStart()},polygonEnd:function(){m["areaStream"].polygonEnd(),v.point=boundsPoint,v.lineStart=boundsLineStart,v.lineEnd=boundsLineEnd,m["areaRingSum"]<0?(n=-(o=180),i=-(s=90)):d>g["epsilon"]?s=90:d<-g["epsilon"]&&(i=-90),f[0]=n,f[1]=o},sphere:function(){n=-(o=180),i=-(s=90)}};function boundsPoint(e,t){h.push(f=[n=e,o=e]),t<i&&(i=t),t>s&&(s=t)}function linePoint(e,t){var r=Object(_["cartesian"])([e*g["radians"],t*g["radians"]]);if(l){var u=Object(_["cartesianCross"])(l,r),c=[u[1],-u[0],0],d=Object(_["cartesianCross"])(c,u);Object(_["cartesianNormalizeInPlace"])(d),d=Object(_["spherical"])(d);var p,m=e-a,b=m>0?1:-1,v=d[0]*g["degrees"]*b,M=Object(g["abs"])(m)>180;M^(b*a<v&&v<b*e)?(p=d[1]*g["degrees"],p>s&&(s=p)):(v=(v+360)%360-180,M^(b*a<v&&v<b*e)?(p=-d[1]*g["degrees"],p<i&&(i=p)):(t<i&&(i=t),t>s&&(s=t))),M?e<a?angle(n,e)>angle(n,o)&&(o=e):angle(e,o)>angle(n,o)&&(n=e):o>=n?(e<n&&(n=e),e>o&&(o=e)):e>a?angle(n,e)>angle(n,o)&&(o=e):angle(e,o)>angle(n,o)&&(n=e)}else h.push(f=[n=e,o=e]);t<i&&(i=t),t>s&&(s=t),l=r,a=e}function boundsLineStart(){v.point=linePoint}function boundsLineEnd(){f[0]=n,f[1]=o,v.point=boundsPoint,l=null}function boundsRingPoint(e,t){if(l){var r=e-a;d.add(Object(g["abs"])(r)>180?r+(r>0?360:-360):r)}else u=e,c=t;m["areaStream"].point(e,t),linePoint(e,t)}function boundsRingStart(){m["areaStream"].lineStart()}function boundsRingEnd(){boundsRingPoint(u,c),m["areaStream"].lineEnd(),Object(g["abs"])(d)>g["epsilon"]&&(n=-(o=180)),f[0]=n,f[1]=o,l=null}function angle(e,t){return(t-=e)<0?t+360:t}function rangeCompare(e,t){return e[0]-t[0]}function rangeContains(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}t["default"]=function(e){var t,r,a,u,c,l,d;if(s=o=-(n=i=1/0),h=[],Object(b["default"])(e,v),r=h.length){for(h.sort(rangeCompare),t=1,a=h[0],c=[a];t<r;++t)u=h[t],rangeContains(a,u[0])||rangeContains(a,u[1])?(angle(a[0],u[1])>angle(a[0],a[1])&&(a[1]=u[1]),angle(u[0],a[1])>angle(a[0],a[1])&&(a[0]=u[0])):c.push(a=u);for(l=-1/0,r=c.length-1,t=0,a=c[r];t<=r;a=u,++t)u=c[t],(d=angle(a[1],u[0]))>l&&(l=d,n=u[0],o=a[1])}return h=f=null,n===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[n,i],[o,s]]}},"./node_modules/d3-geo/src/cartesian.js":function(e,t,r){"use strict";r.r(t),r.d(t,"spherical",(function(){return spherical})),r.d(t,"cartesian",(function(){return cartesian})),r.d(t,"cartesianDot",(function(){return cartesianDot})),r.d(t,"cartesianCross",(function(){return cartesianCross})),r.d(t,"cartesianAddInPlace",(function(){return cartesianAddInPlace})),r.d(t,"cartesianScale",(function(){return cartesianScale})),r.d(t,"cartesianNormalizeInPlace",(function(){return cartesianNormalizeInPlace}));var n=r("./node_modules/d3-geo/src/math.js");function spherical(e){return[Object(n["atan2"])(e[1],e[0]),Object(n["asin"])(e[2])]}function cartesian(e){var t=e[0],r=e[1],i=Object(n["cos"])(r);return[i*Object(n["cos"])(t),i*Object(n["sin"])(t),Object(n["sin"])(r)]}function cartesianDot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cartesianCross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cartesianAddInPlace(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cartesianScale(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cartesianNormalizeInPlace(e){var t=Object(n["sqrt"])(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}},"./node_modules/d3-geo/src/centroid.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a,u,c,l,d,h,f,p,m,_,g,b,v=r("./node_modules/d3-array/src/fsum.js"),M=r("./node_modules/d3-geo/src/math.js"),T=r("./node_modules/d3-geo/src/noop.js"),S=r("./node_modules/d3-geo/src/stream.js"),C={sphere:T["default"],point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){C.lineStart=centroidRingStart,C.lineEnd=centroidRingEnd},polygonEnd:function(){C.lineStart=centroidLineStart,C.lineEnd=centroidLineEnd}};function centroidPoint(e,t){e*=M["radians"],t*=M["radians"];var r=Object(M["cos"])(t);centroidPointCartesian(r*Object(M["cos"])(e),r*Object(M["sin"])(e),Object(M["sin"])(t))}function centroidPointCartesian(e,t,r){++n,o+=(e-o)/n,s+=(t-s)/n,a+=(r-a)/n}function centroidLineStart(){C.point=centroidLinePointFirst}function centroidLinePointFirst(e,t){e*=M["radians"],t*=M["radians"];var r=Object(M["cos"])(t);_=r*Object(M["cos"])(e),g=r*Object(M["sin"])(e),b=Object(M["sin"])(t),C.point=centroidLinePoint,centroidPointCartesian(_,g,b)}function centroidLinePoint(e,t){e*=M["radians"],t*=M["radians"];var r=Object(M["cos"])(t),n=r*Object(M["cos"])(e),o=r*Object(M["sin"])(e),s=Object(M["sin"])(t),a=Object(M["atan2"])(Object(M["sqrt"])((a=g*s-b*o)*a+(a=b*n-_*s)*a+(a=_*o-g*n)*a),_*n+g*o+b*s);i+=a,u+=a*(_+(_=n)),c+=a*(g+(g=o)),l+=a*(b+(b=s)),centroidPointCartesian(_,g,b)}function centroidLineEnd(){C.point=centroidPoint}function centroidRingStart(){C.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(p,m),C.point=centroidPoint}function centroidRingPointFirst(e,t){p=e,m=t,e*=M["radians"],t*=M["radians"],C.point=centroidRingPoint;var r=Object(M["cos"])(t);_=r*Object(M["cos"])(e),g=r*Object(M["sin"])(e),b=Object(M["sin"])(t),centroidPointCartesian(_,g,b)}function centroidRingPoint(e,t){e*=M["radians"],t*=M["radians"];var r=Object(M["cos"])(t),n=r*Object(M["cos"])(e),o=r*Object(M["sin"])(e),s=Object(M["sin"])(t),a=g*s-b*o,p=b*n-_*s,m=_*o-g*n,v=Object(M["hypot"])(a,p,m),T=Object(M["asin"])(v),S=v&&-T/v;d.add(S*a),h.add(S*p),f.add(S*m),i+=T,u+=T*(_+(_=n)),c+=T*(g+(g=o)),l+=T*(b+(b=s)),centroidPointCartesian(_,g,b)}t["default"]=function(e){n=i=o=s=a=u=c=l=0,d=new v["Adder"],h=new v["Adder"],f=new v["Adder"],Object(S["default"])(e,C);var t=+d,r=+h,p=+f,m=Object(M["hypot"])(t,r,p);return m<M["epsilon2"]&&(t=u,r=c,p=l,i<M["epsilon"]&&(t=o,r=s,p=a),m=Object(M["hypot"])(t,r,p),m<M["epsilon2"])?[NaN,NaN]:[Object(M["atan2"])(r,t)*M["degrees"],Object(M["asin"])(p/m)*M["degrees"]]}},"./node_modules/d3-geo/src/circle.js":function(e,t,r){"use strict";r.r(t),r.d(t,"circleStream",(function(){return circleStream}));var n=r("./node_modules/d3-geo/src/cartesian.js"),i=r("./node_modules/d3-geo/src/constant.js"),o=r("./node_modules/d3-geo/src/math.js"),s=r("./node_modules/d3-geo/src/rotation.js");function circleStream(e,t,r,i,s,a){if(r){var u=Object(o["cos"])(t),c=Object(o["sin"])(t),l=i*r;null==s?(s=t+i*o["tau"],a=t-l/2):(s=circleRadius(u,s),a=circleRadius(u,a),(i>0?s<a:s>a)&&(s+=i*o["tau"]));for(var d,h=s;i>0?h>a:h<a;h-=l)d=Object(n["spherical"])([u,-c*Object(o["cos"])(h),-c*Object(o["sin"])(h)]),e.point(d[0],d[1])}}function circleRadius(e,t){t=Object(n["cartesian"])(t),t[0]-=e,Object(n["cartesianNormalizeInPlace"])(t);var r=Object(o["acos"])(-t[1]);return((-t[2]<0?-r:r)+o["tau"]-o["epsilon"])%o["tau"]}t["default"]=function(){var e,t,r=Object(i["default"])([0,0]),n=Object(i["default"])(90),a=Object(i["default"])(6),u={point:point};function point(r,n){e.push(r=t(r,n)),r[0]*=o["degrees"],r[1]*=o["degrees"]}function circle(){var i=r.apply(this,arguments),c=n.apply(this,arguments)*o["radians"],l=a.apply(this,arguments)*o["radians"];return e=[],t=Object(s["rotateRadians"])(-i[0]*o["radians"],-i[1]*o["radians"],0).invert,circleStream(u,c,l,1),i={type:"Polygon",coordinates:[e]},e=t=null,i}return circle.center=function(e){return arguments.length?(r="function"===typeof e?e:Object(i["default"])([+e[0],+e[1]]),circle):r},circle.radius=function(e){return arguments.length?(n="function"===typeof e?e:Object(i["default"])(+e),circle):n},circle.precision=function(e){return arguments.length?(a="function"===typeof e?e:Object(i["default"])(+e),circle):a},circle}},"./node_modules/d3-geo/src/clip/antimeridian.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/clip/index.js"),i=r("./node_modules/d3-geo/src/math.js");function clipAntimeridianLine(e){var t,r=NaN,n=NaN,o=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,a){var u=s>0?i["pi"]:-i["pi"],c=Object(i["abs"])(s-r);Object(i["abs"])(c-i["pi"])<i["epsilon"]?(e.point(r,n=(n+a)/2>0?i["halfPi"]:-i["halfPi"]),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),t=0):o!==u&&c>=i["pi"]&&(Object(i["abs"])(r-o)<i["epsilon"]&&(r-=o*i["epsilon"]),Object(i["abs"])(s-u)<i["epsilon"]&&(s-=u*i["epsilon"]),n=clipAntimeridianIntersect(r,n,s,a),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(u,n),t=0),e.point(r=s,n=a),o=u},lineEnd:function(){e.lineEnd(),r=n=NaN},clean:function(){return 2-t}}}function clipAntimeridianIntersect(e,t,r,n){var o,s,a=Object(i["sin"])(e-r);return Object(i["abs"])(a)>i["epsilon"]?Object(i["atan"])((Object(i["sin"])(t)*(s=Object(i["cos"])(n))*Object(i["sin"])(r)-Object(i["sin"])(n)*(o=Object(i["cos"])(t))*Object(i["sin"])(e))/(o*s*a)):(t+n)/2}function clipAntimeridianInterpolate(e,t,r,n){var o;if(null==e)o=r*i["halfPi"],n.point(-i["pi"],o),n.point(0,o),n.point(i["pi"],o),n.point(i["pi"],0),n.point(i["pi"],-o),n.point(0,-o),n.point(-i["pi"],-o),n.point(-i["pi"],0),n.point(-i["pi"],o);else if(Object(i["abs"])(e[0]-t[0])>i["epsilon"]){var s=e[0]<t[0]?i["pi"]:-i["pi"];o=r*s/2,n.point(-s,o),n.point(0,o),n.point(s,o)}else n.point(t[0],t[1])}t["default"]=Object(n["default"])((function(){return!0}),clipAntimeridianLine,clipAntimeridianInterpolate,[-i["pi"],-i["halfPi"]])},"./node_modules/d3-geo/src/clip/buffer.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/noop.js");t["default"]=function(){var e,t=[];return{point:function(t,r,n){e.push([t,r,n])},lineStart:function(){t.push(e=[])},lineEnd:n["default"],rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}}},"./node_modules/d3-geo/src/clip/circle.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/cartesian.js"),i=r("./node_modules/d3-geo/src/circle.js"),o=r("./node_modules/d3-geo/src/math.js"),s=r("./node_modules/d3-geo/src/pointEqual.js"),a=r("./node_modules/d3-geo/src/clip/index.js");t["default"]=function(e){var t=Object(o["cos"])(e),r=6*o["radians"],u=t>0,c=Object(o["abs"])(t)>o["epsilon"];function interpolate(t,n,o,s){Object(i["circleStream"])(s,e,r,o,t,n)}function visible(e,r){return Object(o["cos"])(e)*Object(o["cos"])(r)>t}function clipLine(e){var t,r,n,i,a;return{lineStart:function(){i=n=!1,a=1},point:function(l,d){var h,f=[l,d],p=visible(l,d),m=u?p?0:code(l,d):p?code(l+(l<0?o["pi"]:-o["pi"]),d):0;if(!t&&(i=n=p)&&e.lineStart(),p!==n&&(h=intersect(t,f),(!h||Object(s["default"])(t,h)||Object(s["default"])(f,h))&&(f[2]=1)),p!==n)a=0,p?(e.lineStart(),h=intersect(f,t),e.point(h[0],h[1])):(h=intersect(t,f),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(c&&t&&u^p){var _;m&r||!(_=intersect(f,t,!0))||(a=0,u?(e.lineStart(),e.point(_[0][0],_[0][1]),e.point(_[1][0],_[1][1]),e.lineEnd()):(e.point(_[1][0],_[1][1]),e.lineEnd(),e.lineStart(),e.point(_[0][0],_[0][1],3)))}!p||t&&Object(s["default"])(t,f)||e.point(f[0],f[1]),t=f,n=p,r=m},lineEnd:function(){n&&e.lineEnd(),t=null},clean:function(){return a|(i&&n)<<1}}}function intersect(e,r,i){var s=Object(n["cartesian"])(e),a=Object(n["cartesian"])(r),u=[1,0,0],c=Object(n["cartesianCross"])(s,a),l=Object(n["cartesianDot"])(c,c),d=c[0],h=l-d*d;if(!h)return!i&&e;var f=t*l/h,p=-t*d/h,m=Object(n["cartesianCross"])(u,c),_=Object(n["cartesianScale"])(u,f),g=Object(n["cartesianScale"])(c,p);Object(n["cartesianAddInPlace"])(_,g);var b=m,v=Object(n["cartesianDot"])(_,b),M=Object(n["cartesianDot"])(b,b),T=v*v-M*(Object(n["cartesianDot"])(_,_)-1);if(!(T<0)){var S=Object(o["sqrt"])(T),C=Object(n["cartesianScale"])(b,(-v-S)/M);if(Object(n["cartesianAddInPlace"])(C,_),C=Object(n["spherical"])(C),!i)return C;var E,P=e[0],A=r[0],j=e[1],O=r[1];A<P&&(E=P,P=A,A=E);var R=A-P,I=Object(o["abs"])(R-o["pi"])<o["epsilon"],w=I||R<o["epsilon"];if(!I&&O<j&&(E=j,j=O,O=E),w?I?j+O>0^C[1]<(Object(o["abs"])(C[0]-P)<o["epsilon"]?j:O):j<=C[1]&&C[1]<=O:R>o["pi"]^(P<=C[0]&&C[0]<=A)){var D=Object(n["cartesianScale"])(b,(-v+S)/M);return Object(n["cartesianAddInPlace"])(D,_),[C,Object(n["spherical"])(D)]}}}function code(t,r){var n=u?e:o["pi"]-e,i=0;return t<-n?i|=1:t>n&&(i|=2),r<-n?i|=4:r>n&&(i|=8),i}return Object(a["default"])(visible,clipLine,interpolate,u?[0,-e]:[-o["pi"],e-o["pi"]])}},"./node_modules/d3-geo/src/clip/extent.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/clip/rectangle.js");t["default"]=function(){var e,t,r,i=0,o=0,s=960,a=500;return r={stream:function(r){return e&&t===r?e:e=Object(n["default"])(i,o,s,a)(t=r)},extent:function(n){return arguments.length?(i=+n[0][0],o=+n[0][1],s=+n[1][0],a=+n[1][1],e=t=null,r):[[i,o],[s,a]]}}}},"./node_modules/d3-geo/src/clip/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/clip/buffer.js"),i=r("./node_modules/d3-geo/src/clip/rejoin.js"),o=r("./node_modules/d3-geo/src/math.js"),s=r("./node_modules/d3-geo/src/polygonContains.js"),a=r("./node_modules/d3-array/src/merge.js");function validSegment(e){return e.length>1}function compareIntersection(e,t){return((e=e.x)[0]<0?e[1]-o["halfPi"]-o["epsilon"]:o["halfPi"]-e[1])-((t=t.x)[0]<0?t[1]-o["halfPi"]-o["epsilon"]:o["halfPi"]-t[1])}t["default"]=function(e,t,r,o){return function(u){var c,l,d,h=t(u),f=Object(n["default"])(),p=t(f),m=!1,_={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){_.point=pointRing,_.lineStart=ringStart,_.lineEnd=ringEnd,l=[],c=[]},polygonEnd:function(){_.point=point,_.lineStart=lineStart,_.lineEnd=lineEnd,l=Object(a["default"])(l);var e=Object(s["default"])(c,o);l.length?(m||(u.polygonStart(),m=!0),Object(i["default"])(l,compareIntersection,e,r,u)):e&&(m||(u.polygonStart(),m=!0),u.lineStart(),r(null,null,1,u),u.lineEnd()),m&&(u.polygonEnd(),m=!1),l=c=null},sphere:function(){u.polygonStart(),u.lineStart(),r(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function point(t,r){e(t,r)&&u.point(t,r)}function pointLine(e,t){h.point(e,t)}function lineStart(){_.point=pointLine,h.lineStart()}function lineEnd(){_.point=point,h.lineEnd()}function pointRing(e,t){d.push([e,t]),p.point(e,t)}function ringStart(){p.lineStart(),d=[]}function ringEnd(){pointRing(d[0][0],d[0][1]),p.lineEnd();var e,t,r,n,i=p.clean(),o=f.result(),s=o.length;if(d.pop(),c.push(d),d=null,s)if(1&i){if(r=o[0],(t=r.length-1)>0){for(m||(u.polygonStart(),m=!0),u.lineStart(),e=0;e<t;++e)u.point((n=r[e])[0],n[1]);u.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),l.push(o.filter(validSegment))}return _}}},"./node_modules/d3-geo/src/clip/line.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r,n,i,o){var s,a=e[0],u=e[1],c=t[0],l=t[1],d=0,h=1,f=c-a,p=l-u;if(s=r-a,f||!(s>0)){if(s/=f,f<0){if(s<d)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>d&&(d=s)}if(s=i-a,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>d&&(d=s)}else if(f>0){if(s<d)return;s<h&&(h=s)}if(s=n-u,p||!(s>0)){if(s/=p,p<0){if(s<d)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>d&&(d=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>d&&(d=s)}else if(p>0){if(s<d)return;s<h&&(h=s)}return d>0&&(e[0]=a+d*f,e[1]=u+d*p),h<1&&(t[0]=a+h*f,t[1]=u+h*p),!0}}}}}},"./node_modules/d3-geo/src/clip/rectangle.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return clipRectangle}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/clip/buffer.js"),o=r("./node_modules/d3-geo/src/clip/line.js"),s=r("./node_modules/d3-geo/src/clip/rejoin.js"),a=r("./node_modules/d3-array/src/merge.js"),u=1e9,c=-u;function clipRectangle(e,t,r,l){function visible(n,i){return e<=n&&n<=r&&t<=i&&i<=l}function interpolate(n,i,o,s){var a=0,u=0;if(null==n||(a=corner(n,o))!==(u=corner(i,o))||comparePoint(n,i)<0^o>0)do{s.point(0===a||3===a?e:r,a>1?l:t)}while((a=(a+o+4)%4)!==u);else s.point(i[0],i[1])}function corner(i,o){return Object(n["abs"])(i[0]-e)<n["epsilon"]?o>0?0:3:Object(n["abs"])(i[0]-r)<n["epsilon"]?o>0?2:1:Object(n["abs"])(i[1]-t)<n["epsilon"]?o>0?1:0:o>0?3:2}function compareIntersection(e,t){return comparePoint(e.x,t.x)}function comparePoint(e,t){var r=corner(e,1),n=corner(t,1);return r!==n?r-n:0===r?t[1]-e[1]:1===r?e[0]-t[0]:2===r?e[1]-t[1]:t[0]-e[0]}return function(n){var d,h,f,p,m,_,g,b,v,M,T,S=n,C=Object(i["default"])(),E={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(e,t){visible(e,t)&&S.point(e,t)}function polygonInside(){for(var t=0,r=0,n=h.length;r<n;++r)for(var i,o,s=h[r],a=1,u=s.length,c=s[0],d=c[0],f=c[1];a<u;++a)i=d,o=f,c=s[a],d=c[0],f=c[1],o<=l?f>l&&(d-i)*(l-o)>(f-o)*(e-i)&&++t:f<=l&&(d-i)*(l-o)<(f-o)*(e-i)&&--t;return t}function polygonStart(){S=C,d=[],h=[],T=!0}function polygonEnd(){var e=polygonInside(),t=T&&e,r=(d=Object(a["default"])(d)).length;(t||r)&&(n.polygonStart(),t&&(n.lineStart(),interpolate(null,null,1,n),n.lineEnd()),r&&Object(s["default"])(d,compareIntersection,e,interpolate,n),n.polygonEnd()),S=n,d=h=f=null}function lineStart(){E.point=linePoint,h&&h.push(f=[]),M=!0,v=!1,g=b=NaN}function lineEnd(){d&&(linePoint(p,m),_&&v&&C.rejoin(),d.push(C.result())),E.point=point,v&&S.lineEnd()}function linePoint(n,i){var s=visible(n,i);if(h&&f.push([n,i]),M)p=n,m=i,_=s,M=!1,s&&(S.lineStart(),S.point(n,i));else if(s&&v)S.point(n,i);else{var a=[g=Math.max(c,Math.min(u,g)),b=Math.max(c,Math.min(u,b))],d=[n=Math.max(c,Math.min(u,n)),i=Math.max(c,Math.min(u,i))];Object(o["default"])(a,d,e,t,r,l)?(v||(S.lineStart(),S.point(a[0],a[1])),S.point(d[0],d[1]),s||S.lineEnd(),T=!1):s&&(S.lineStart(),S.point(n,i),T=!1)}g=n,b=i,v=s}return E}}},"./node_modules/d3-geo/src/clip/rejoin.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/pointEqual.js"),i=r("./node_modules/d3-geo/src/math.js");function Intersection(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function link(e){if(t=e.length){var t,r,n=0,i=e[0];while(++n<t)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}t["default"]=function(e,t,r,o,s){var a,u,c=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,r,o=e[0],u=e[t];if(Object(n["default"])(o,u)){if(!o[2]&&!u[2]){for(s.lineStart(),a=0;a<t;++a)s.point((o=e[a])[0],o[1]);return void s.lineEnd()}u[0]+=2*i["epsilon"]}c.push(r=new Intersection(o,e,null,!0)),l.push(r.o=new Intersection(o,null,r,!1)),c.push(r=new Intersection(u,e,null,!1)),l.push(r.o=new Intersection(u,null,r,!0))}})),c.length){for(l.sort(t),link(c),link(l),a=0,u=l.length;a<u;++a)l[a].e=r=!r;var d,h,f=c[0];while(1){var p=f,m=!0;while(p.v)if((p=p.n)===f)return;d=p.z,s.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(a=0,u=d.length;a<u;++a)s.point((h=d[a])[0],h[1]);else o(p.x,p.n.x,1,s);p=p.n}else{if(m)for(d=p.p.z,a=d.length-1;a>=0;--a)s.point((h=d[a])[0],h[1]);else o(p.x,p.p.x,-1,s);p=p.p}p=p.o,d=p.z,m=!m}while(!p.v);s.lineEnd()}}}},"./node_modules/d3-geo/src/compose.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){function compose(r,n){return r=e(r,n),t(r[0],r[1])}return e.invert&&t.invert&&(compose.invert=function(r,n){return r=t.invert(r,n),r&&e.invert(r[0],r[1])}),compose}},"./node_modules/d3-geo/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-geo/src/contains.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/polygonContains.js"),i=r("./node_modules/d3-geo/src/distance.js"),o=r("./node_modules/d3-geo/src/math.js"),s={Feature:function(e,t){return containsGeometry(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,i=r.length;while(++n<i)if(containsGeometry(r[n].geometry,t))return!0;return!1}},a={Sphere:function(){return!0},Point:function(e,t){return containsPoint(e.coordinates,t)},MultiPoint:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)if(containsPoint(r[n],t))return!0;return!1},LineString:function(e,t){return containsLine(e.coordinates,t)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)if(containsLine(r[n],t))return!0;return!1},Polygon:function(e,t){return containsPolygon(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)if(containsPolygon(r[n],t))return!0;return!1},GeometryCollection:function(e,t){var r=e.geometries,n=-1,i=r.length;while(++n<i)if(containsGeometry(r[n],t))return!0;return!1}};function containsGeometry(e,t){return!(!e||!a.hasOwnProperty(e.type))&&a[e.type](e,t)}function containsPoint(e,t){return 0===Object(i["default"])(e,t)}function containsLine(e,t){for(var r,n,s,a=0,u=e.length;a<u;a++){if(n=Object(i["default"])(e[a],t),0===n)return!0;if(a>0&&(s=Object(i["default"])(e[a],e[a-1]),s>0&&r<=s&&n<=s&&(r+n-s)*(1-Math.pow((r-n)/s,2))<o["epsilon2"]*s))return!0;r=n}return!1}function containsPolygon(e,t){return!!Object(n["default"])(e.map(ringRadians),pointRadians(t))}function ringRadians(e){return e=e.map(pointRadians),e.pop(),e}function pointRadians(e){return[e[0]*o["radians"],e[1]*o["radians"]]}t["default"]=function(e,t){return(e&&s.hasOwnProperty(e.type)?s[e.type]:containsGeometry)(e,t)}},"./node_modules/d3-geo/src/distance.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/length.js"),i=[null,null],o={type:"LineString",coordinates:i};t["default"]=function(e,t){return i[0]=e,i[1]=t,Object(n["default"])(o)}},"./node_modules/d3-geo/src/graticule.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return graticule})),r.d(t,"graticule10",(function(){return graticule10}));var n=r("./node_modules/d3-array/src/range.js"),i=r("./node_modules/d3-geo/src/math.js");function graticuleX(e,t,r){var o=Object(n["default"])(e,t-i["epsilon"],r).concat(t);return function(e){return o.map((function(t){return[e,t]}))}}function graticuleY(e,t,r){var o=Object(n["default"])(e,t-i["epsilon"],r).concat(t);return function(e){return o.map((function(t){return[t,e]}))}}function graticule(){var e,t,r,o,s,a,u,c,l,d,h,f,p=10,m=p,_=90,g=360,b=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return Object(n["default"])(Object(i["ceil"])(o/_)*_,r,_).map(h).concat(Object(n["default"])(Object(i["ceil"])(c/g)*g,u,g).map(f)).concat(Object(n["default"])(Object(i["ceil"])(t/p)*p,e,p).filter((function(e){return Object(i["abs"])(e%_)>i["epsilon"]})).map(l)).concat(Object(n["default"])(Object(i["ceil"])(a/m)*m,s,m).filter((function(e){return Object(i["abs"])(e%g)>i["epsilon"]})).map(d))}return graticule.lines=function(){return lines().map((function(e){return{type:"LineString",coordinates:e}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(f(u).slice(1),h(r).reverse().slice(1),f(c).reverse().slice(1))]}},graticule.extent=function(e){return arguments.length?graticule.extentMajor(e).extentMinor(e):graticule.extentMinor()},graticule.extentMajor=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],c=+e[0][1],u=+e[1][1],o>r&&(e=o,o=r,r=e),c>u&&(e=c,c=u,u=e),graticule.precision(b)):[[o,c],[r,u]]},graticule.extentMinor=function(r){return arguments.length?(t=+r[0][0],e=+r[1][0],a=+r[0][1],s=+r[1][1],t>e&&(r=t,t=e,e=r),a>s&&(r=a,a=s,s=r),graticule.precision(b)):[[t,a],[e,s]]},graticule.step=function(e){return arguments.length?graticule.stepMajor(e).stepMinor(e):graticule.stepMinor()},graticule.stepMajor=function(e){return arguments.length?(_=+e[0],g=+e[1],graticule):[_,g]},graticule.stepMinor=function(e){return arguments.length?(p=+e[0],m=+e[1],graticule):[p,m]},graticule.precision=function(n){return arguments.length?(b=+n,l=graticuleX(a,s,90),d=graticuleY(t,e,b),h=graticuleX(c,u,90),f=graticuleY(o,r,b),graticule):b},graticule.extentMajor([[-180,-90+i["epsilon"]],[180,90-i["epsilon"]]]).extentMinor([[-180,-80-i["epsilon"]],[180,80+i["epsilon"]]])}function graticule10(){return graticule()()}},"./node_modules/d3-geo/src/identity.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>e},"./node_modules/d3-geo/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/area.js");r.d(t,"geoArea",(function(){return n["default"]}));var i=r("./node_modules/d3-geo/src/bounds.js");r.d(t,"geoBounds",(function(){return i["default"]}));var o=r("./node_modules/d3-geo/src/centroid.js");r.d(t,"geoCentroid",(function(){return o["default"]}));var s=r("./node_modules/d3-geo/src/circle.js");r.d(t,"geoCircle",(function(){return s["default"]}));var a=r("./node_modules/d3-geo/src/clip/antimeridian.js");r.d(t,"geoClipAntimeridian",(function(){return a["default"]}));var u=r("./node_modules/d3-geo/src/clip/circle.js");r.d(t,"geoClipCircle",(function(){return u["default"]}));var c=r("./node_modules/d3-geo/src/clip/extent.js");r.d(t,"geoClipExtent",(function(){return c["default"]}));var l=r("./node_modules/d3-geo/src/clip/rectangle.js");r.d(t,"geoClipRectangle",(function(){return l["default"]}));var d=r("./node_modules/d3-geo/src/contains.js");r.d(t,"geoContains",(function(){return d["default"]}));var h=r("./node_modules/d3-geo/src/distance.js");r.d(t,"geoDistance",(function(){return h["default"]}));var f=r("./node_modules/d3-geo/src/graticule.js");r.d(t,"geoGraticule",(function(){return f["default"]})),r.d(t,"geoGraticule10",(function(){return f["graticule10"]}));var p=r("./node_modules/d3-geo/src/interpolate.js");r.d(t,"geoInterpolate",(function(){return p["default"]}));var m=r("./node_modules/d3-geo/src/length.js");r.d(t,"geoLength",(function(){return m["default"]}));var _=r("./node_modules/d3-geo/src/path/index.js");r.d(t,"geoPath",(function(){return _["default"]}));var g=r("./node_modules/d3-geo/src/projection/albers.js");r.d(t,"geoAlbers",(function(){return g["default"]}));var b=r("./node_modules/d3-geo/src/projection/albersUsa.js");r.d(t,"geoAlbersUsa",(function(){return b["default"]}));var v=r("./node_modules/d3-geo/src/projection/azimuthalEqualArea.js");r.d(t,"geoAzimuthalEqualArea",(function(){return v["default"]})),r.d(t,"geoAzimuthalEqualAreaRaw",(function(){return v["azimuthalEqualAreaRaw"]}));var M=r("./node_modules/d3-geo/src/projection/azimuthalEquidistant.js");r.d(t,"geoAzimuthalEquidistant",(function(){return M["default"]})),r.d(t,"geoAzimuthalEquidistantRaw",(function(){return M["azimuthalEquidistantRaw"]}));var T=r("./node_modules/d3-geo/src/projection/conicConformal.js");r.d(t,"geoConicConformal",(function(){return T["default"]})),r.d(t,"geoConicConformalRaw",(function(){return T["conicConformalRaw"]}));var S=r("./node_modules/d3-geo/src/projection/conicEqualArea.js");r.d(t,"geoConicEqualArea",(function(){return S["default"]})),r.d(t,"geoConicEqualAreaRaw",(function(){return S["conicEqualAreaRaw"]}));var C=r("./node_modules/d3-geo/src/projection/conicEquidistant.js");r.d(t,"geoConicEquidistant",(function(){return C["default"]})),r.d(t,"geoConicEquidistantRaw",(function(){return C["conicEquidistantRaw"]}));var E=r("./node_modules/d3-geo/src/projection/equalEarth.js");r.d(t,"geoEqualEarth",(function(){return E["default"]})),r.d(t,"geoEqualEarthRaw",(function(){return E["equalEarthRaw"]}));var P=r("./node_modules/d3-geo/src/projection/equirectangular.js");r.d(t,"geoEquirectangular",(function(){return P["default"]})),r.d(t,"geoEquirectangularRaw",(function(){return P["equirectangularRaw"]}));var A=r("./node_modules/d3-geo/src/projection/gnomonic.js");r.d(t,"geoGnomonic",(function(){return A["default"]})),r.d(t,"geoGnomonicRaw",(function(){return A["gnomonicRaw"]}));var j=r("./node_modules/d3-geo/src/projection/identity.js");r.d(t,"geoIdentity",(function(){return j["default"]}));var O=r("./node_modules/d3-geo/src/projection/index.js");r.d(t,"geoProjection",(function(){return O["default"]})),r.d(t,"geoProjectionMutator",(function(){return O["projectionMutator"]}));var R=r("./node_modules/d3-geo/src/projection/mercator.js");r.d(t,"geoMercator",(function(){return R["default"]})),r.d(t,"geoMercatorRaw",(function(){return R["mercatorRaw"]}));var I=r("./node_modules/d3-geo/src/projection/naturalEarth1.js");r.d(t,"geoNaturalEarth1",(function(){return I["default"]})),r.d(t,"geoNaturalEarth1Raw",(function(){return I["naturalEarth1Raw"]}));var w=r("./node_modules/d3-geo/src/projection/orthographic.js");r.d(t,"geoOrthographic",(function(){return w["default"]})),r.d(t,"geoOrthographicRaw",(function(){return w["orthographicRaw"]}));var D=r("./node_modules/d3-geo/src/projection/stereographic.js");r.d(t,"geoStereographic",(function(){return D["default"]})),r.d(t,"geoStereographicRaw",(function(){return D["stereographicRaw"]}));var F=r("./node_modules/d3-geo/src/projection/transverseMercator.js");r.d(t,"geoTransverseMercator",(function(){return F["default"]})),r.d(t,"geoTransverseMercatorRaw",(function(){return F["transverseMercatorRaw"]}));var B=r("./node_modules/d3-geo/src/rotation.js");r.d(t,"geoRotation",(function(){return B["default"]}));var L=r("./node_modules/d3-geo/src/stream.js");r.d(t,"geoStream",(function(){return L["default"]}));var V=r("./node_modules/d3-geo/src/transform.js");r.d(t,"geoTransform",(function(){return V["default"]}))},"./node_modules/d3-geo/src/interpolate.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/math.js");t["default"]=function(e,t){var r=e[0]*n["radians"],i=e[1]*n["radians"],o=t[0]*n["radians"],s=t[1]*n["radians"],a=Object(n["cos"])(i),u=Object(n["sin"])(i),c=Object(n["cos"])(s),l=Object(n["sin"])(s),d=a*Object(n["cos"])(r),h=a*Object(n["sin"])(r),f=c*Object(n["cos"])(o),p=c*Object(n["sin"])(o),m=2*Object(n["asin"])(Object(n["sqrt"])(Object(n["haversin"])(s-i)+a*c*Object(n["haversin"])(o-r))),_=Object(n["sin"])(m),g=m?function(e){var t=Object(n["sin"])(e*=m)/_,r=Object(n["sin"])(m-e)/_,i=r*d+t*f,o=r*h+t*p,s=r*u+t*l;return[Object(n["atan2"])(o,i)*n["degrees"],Object(n["atan2"])(s,Object(n["sqrt"])(i*i+o*o))*n["degrees"]]}:function(){return[r*n["degrees"],i*n["degrees"]]};return g.distance=m,g}},"./node_modules/d3-geo/src/length.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a=r("./node_modules/d3-array/src/fsum.js"),u=r("./node_modules/d3-geo/src/math.js"),c=r("./node_modules/d3-geo/src/noop.js"),l=r("./node_modules/d3-geo/src/stream.js"),d={sphere:c["default"],point:c["default"],lineStart:lengthLineStart,lineEnd:c["default"],polygonStart:c["default"],polygonEnd:c["default"]};function lengthLineStart(){d.point=lengthPointFirst,d.lineEnd=lengthLineEnd}function lengthLineEnd(){d.point=d.lineEnd=c["default"]}function lengthPointFirst(e,t){e*=u["radians"],t*=u["radians"],i=e,o=Object(u["sin"])(t),s=Object(u["cos"])(t),d.point=lengthPoint}function lengthPoint(e,t){e*=u["radians"],t*=u["radians"];var r=Object(u["sin"])(t),a=Object(u["cos"])(t),c=Object(u["abs"])(e-i),l=Object(u["cos"])(c),d=Object(u["sin"])(c),h=a*d,f=s*r-o*a*l,p=o*r+s*a*l;n.add(Object(u["atan2"])(Object(u["sqrt"])(h*h+f*f),p)),i=e,o=r,s=a}t["default"]=function(e){return n=new a["Adder"],Object(l["default"])(e,d),+n}},"./node_modules/d3-geo/src/math.js":function(e,t,r){"use strict";r.r(t),r.d(t,"epsilon",(function(){return n})),r.d(t,"epsilon2",(function(){return i})),r.d(t,"pi",(function(){return o})),r.d(t,"halfPi",(function(){return s})),r.d(t,"quarterPi",(function(){return a})),r.d(t,"tau",(function(){return u})),r.d(t,"degrees",(function(){return c})),r.d(t,"radians",(function(){return l})),r.d(t,"abs",(function(){return d})),r.d(t,"atan",(function(){return h})),r.d(t,"atan2",(function(){return f})),r.d(t,"cos",(function(){return p})),r.d(t,"ceil",(function(){return m})),r.d(t,"exp",(function(){return _})),r.d(t,"floor",(function(){return g})),r.d(t,"hypot",(function(){return b})),r.d(t,"log",(function(){return v})),r.d(t,"pow",(function(){return M})),r.d(t,"sin",(function(){return T})),r.d(t,"sign",(function(){return S})),r.d(t,"sqrt",(function(){return C})),r.d(t,"tan",(function(){return E})),r.d(t,"acos",(function(){return acos})),r.d(t,"asin",(function(){return asin})),r.d(t,"haversin",(function(){return haversin}));var n=1e-6,i=1e-12,o=Math.PI,s=o/2,a=o/4,u=2*o,c=180/o,l=o/180,d=Math.abs,h=Math.atan,f=Math.atan2,p=Math.cos,m=Math.ceil,_=Math.exp,g=Math.floor,b=Math.hypot,v=Math.log,M=Math.pow,T=Math.sin,S=Math.sign||function(e){return e>0?1:e<0?-1:0},C=Math.sqrt,E=Math.tan;function acos(e){return e>1?0:e<-1?o:Math.acos(e)}function asin(e){return e>1?s:e<-1?-s:Math.asin(e)}function haversin(e){return(e=T(e/2))*e}},"./node_modules/d3-geo/src/noop.js":function(e,t,r){"use strict";function noop(){}r.r(t),r.d(t,"default",(function(){return noop}))},"./node_modules/d3-geo/src/path/area.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a=r("./node_modules/d3-array/src/fsum.js"),u=r("./node_modules/d3-geo/src/math.js"),c=r("./node_modules/d3-geo/src/noop.js"),l=new a["Adder"],d=new a["Adder"],h={point:c["default"],lineStart:c["default"],lineEnd:c["default"],polygonStart:function(){h.lineStart=areaRingStart,h.lineEnd=areaRingEnd},polygonEnd:function(){h.lineStart=h.lineEnd=h.point=c["default"],l.add(Object(u["abs"])(d)),d=new a["Adder"]},result:function(){var e=l/2;return l=new a["Adder"],e}};function areaRingStart(){h.point=areaPointFirst}function areaPointFirst(e,t){h.point=areaPoint,n=o=e,i=s=t}function areaPoint(e,t){d.add(s*e-o*t),o=e,s=t}function areaRingEnd(){areaPoint(n,i)}t["default"]=h},"./node_modules/d3-geo/src/path/bounds.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/noop.js"),i=1/0,o=i,s=-i,a=s,u={point:boundsPoint,lineStart:n["default"],lineEnd:n["default"],polygonStart:n["default"],polygonEnd:n["default"],result:function(){var e=[[i,o],[s,a]];return s=a=-(o=i=1/0),e}};function boundsPoint(e,t){e<i&&(i=e),e>s&&(s=e),t<o&&(o=t),t>a&&(a=t)}t["default"]=u},"./node_modules/d3-geo/src/path/centroid.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a=r("./node_modules/d3-geo/src/math.js"),u=0,c=0,l=0,d=0,h=0,f=0,p=0,m=0,_=0,g={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){g.lineStart=centroidRingStart,g.lineEnd=centroidRingEnd},polygonEnd:function(){g.point=centroidPoint,g.lineStart=centroidLineStart,g.lineEnd=centroidLineEnd},result:function(){var e=_?[p/_,m/_]:f?[d/f,h/f]:l?[u/l,c/l]:[NaN,NaN];return u=c=l=d=h=f=p=m=_=0,e}};function centroidPoint(e,t){u+=e,c+=t,++l}function centroidLineStart(){g.point=centroidPointFirstLine}function centroidPointFirstLine(e,t){g.point=centroidPointLine,centroidPoint(o=e,s=t)}function centroidPointLine(e,t){var r=e-o,n=t-s,i=Object(a["sqrt"])(r*r+n*n);d+=i*(o+e)/2,h+=i*(s+t)/2,f+=i,centroidPoint(o=e,s=t)}function centroidLineEnd(){g.point=centroidPoint}function centroidRingStart(){g.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(n,i)}function centroidPointFirstRing(e,t){g.point=centroidPointRing,centroidPoint(n=o=e,i=s=t)}function centroidPointRing(e,t){var r=e-o,n=t-s,i=Object(a["sqrt"])(r*r+n*n);d+=i*(o+e)/2,h+=i*(s+t)/2,f+=i,i=s*e-o*t,p+=i*(o+e),m+=i*(s+t),_+=3*i,centroidPoint(o=e,s=t)}t["default"]=g},"./node_modules/d3-geo/src/path/context.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return PathContext}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/noop.js");function PathContext(e){this._context=e}PathContext.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,n["tau"]);break}},result:i["default"]}},"./node_modules/d3-geo/src/path/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/identity.js"),i=r("./node_modules/d3-geo/src/stream.js"),o=r("./node_modules/d3-geo/src/path/area.js"),s=r("./node_modules/d3-geo/src/path/bounds.js"),a=r("./node_modules/d3-geo/src/path/centroid.js"),u=r("./node_modules/d3-geo/src/path/context.js"),c=r("./node_modules/d3-geo/src/path/measure.js"),l=r("./node_modules/d3-geo/src/path/string.js");t["default"]=function(e,t){var r,d,h=4.5;function path(e){return e&&("function"===typeof h&&d.pointRadius(+h.apply(this,arguments)),Object(i["default"])(e,r(d))),d.result()}return path.area=function(e){return Object(i["default"])(e,r(o["default"])),o["default"].result()},path.measure=function(e){return Object(i["default"])(e,r(c["default"])),c["default"].result()},path.bounds=function(e){return Object(i["default"])(e,r(s["default"])),s["default"].result()},path.centroid=function(e){return Object(i["default"])(e,r(a["default"])),a["default"].result()},path.projection=function(t){return arguments.length?(r=null==t?(e=null,n["default"]):(e=t).stream,path):e},path.context=function(e){return arguments.length?(d=null==e?(t=null,new l["default"]):new u["default"](t=e),"function"!==typeof h&&d.pointRadius(h),path):t},path.pointRadius=function(e){return arguments.length?(h="function"===typeof e?e:(d.pointRadius(+e),+e),path):h},path.projection(e).context(t)}},"./node_modules/d3-geo/src/path/measure.js":function(e,t,r){"use strict";r.r(t);var n,i,o,s,a,u=r("./node_modules/d3-array/src/fsum.js"),c=r("./node_modules/d3-geo/src/math.js"),l=r("./node_modules/d3-geo/src/noop.js"),d=new u["Adder"],h={point:l["default"],lineStart:function(){h.point=lengthPointFirst},lineEnd:function(){n&&lengthPoint(i,o),h.point=l["default"]},polygonStart:function(){n=!0},polygonEnd:function(){n=null},result:function(){var e=+d;return d=new u["Adder"],e}};function lengthPointFirst(e,t){h.point=lengthPoint,i=s=e,o=a=t}function lengthPoint(e,t){s-=e,a-=t,d.add(Object(c["sqrt"])(s*s+a*a)),s=e,a=t}t["default"]=h},"./node_modules/d3-geo/src/path/string.js":function(e,t,r){"use strict";function PathString(){this._string=[]}function circle(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}r.r(t),r.d(t,"default",(function(){return PathString})),PathString.prototype={_radius:4.5,_circle:circle(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=circle(this._radius)),this._string.push("M",e,",",t,this._circle);break}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}}},"./node_modules/d3-geo/src/pointEqual.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/math.js");t["default"]=function(e,t){return Object(n["abs"])(e[0]-t[0])<n["epsilon"]&&Object(n["abs"])(e[1]-t[1])<n["epsilon"]}},"./node_modules/d3-geo/src/polygonContains.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-array/src/fsum.js"),i=r("./node_modules/d3-geo/src/cartesian.js"),o=r("./node_modules/d3-geo/src/math.js");function longitude(e){return Object(o["abs"])(e[0])<=o["pi"]?e[0]:Object(o["sign"])(e[0])*((Object(o["abs"])(e[0])+o["pi"])%o["tau"]-o["pi"])}t["default"]=function(e,t){var r=longitude(t),s=t[1],a=Object(o["sin"])(s),u=[Object(o["sin"])(r),-Object(o["cos"])(r),0],c=0,l=0,d=new n["Adder"];1===a?s=o["halfPi"]+o["epsilon"]:-1===a&&(s=-o["halfPi"]-o["epsilon"]);for(var h=0,f=e.length;h<f;++h)if(m=(p=e[h]).length)for(var p,m,_=p[m-1],g=longitude(_),b=_[1]/2+o["quarterPi"],v=Object(o["sin"])(b),M=Object(o["cos"])(b),T=0;T<m;++T,g=C,v=P,M=A,_=S){var S=p[T],C=longitude(S),E=S[1]/2+o["quarterPi"],P=Object(o["sin"])(E),A=Object(o["cos"])(E),j=C-g,O=j>=0?1:-1,R=O*j,I=R>o["pi"],w=v*P;if(d.add(Object(o["atan2"])(w*O*Object(o["sin"])(R),M*A+w*Object(o["cos"])(R))),c+=I?j+O*o["tau"]:j,I^g>=r^C>=r){var D=Object(i["cartesianCross"])(Object(i["cartesian"])(_),Object(i["cartesian"])(S));Object(i["cartesianNormalizeInPlace"])(D);var F=Object(i["cartesianCross"])(u,D);Object(i["cartesianNormalizeInPlace"])(F);var B=(I^j>=0?-1:1)*Object(o["asin"])(F[2]);(s>B||s===B&&(D[0]||D[1]))&&(l+=I^j>=0?1:-1)}}return(c<-o["epsilon"]||c<o["epsilon"]&&d<-o["epsilon2"])^1&l}},"./node_modules/d3-geo/src/projection/albers.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/projection/conicEqualArea.js");t["default"]=function(){return Object(n["default"])().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},"./node_modules/d3-geo/src/projection/albersUsa.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/albers.js"),o=r("./node_modules/d3-geo/src/projection/conicEqualArea.js"),s=r("./node_modules/d3-geo/src/projection/fit.js");function multiplex(e){var t=e.length;return{point:function(r,n){var i=-1;while(++i<t)e[i].point(r,n)},sphere:function(){var r=-1;while(++r<t)e[r].sphere()},lineStart:function(){var r=-1;while(++r<t)e[r].lineStart()},lineEnd:function(){var r=-1;while(++r<t)e[r].lineEnd()},polygonStart:function(){var r=-1;while(++r<t)e[r].polygonStart()},polygonEnd:function(){var r=-1;while(++r<t)e[r].polygonEnd()}}}t["default"]=function(){var e,t,r,a,u,c,l=Object(i["default"])(),d=Object(o["default"])().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Object(o["default"])().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(e,t){c=[e,t]}};function albersUsa(e){var t=e[0],n=e[1];return c=null,r.point(t,n),c||(a.point(t,n),c)||(u.point(t,n),c)}function reset(){return e=t=null,albersUsa}return albersUsa.invert=function(e){var t=l.scale(),r=l.translate(),n=(e[0]-r[0])/t,i=(e[1]-r[1])/t;return(i>=.12&&i<.234&&n>=-.425&&n<-.214?d:i>=.166&&i<.234&&n>=-.214&&n<-.115?h:l).invert(e)},albersUsa.stream=function(r){return e&&t===r?e:e=multiplex([l.stream(t=r),d.stream(r),h.stream(r)])},albersUsa.precision=function(e){return arguments.length?(l.precision(e),d.precision(e),h.precision(e),reset()):l.precision()},albersUsa.scale=function(e){return arguments.length?(l.scale(e),d.scale(.35*e),h.scale(e),albersUsa.translate(l.translate())):l.scale()},albersUsa.translate=function(e){if(!arguments.length)return l.translate();var t=l.scale(),i=+e[0],o=+e[1];return r=l.translate(e).clipExtent([[i-.455*t,o-.238*t],[i+.455*t,o+.238*t]]).stream(f),a=d.translate([i-.307*t,o+.201*t]).clipExtent([[i-.425*t+n["epsilon"],o+.12*t+n["epsilon"]],[i-.214*t-n["epsilon"],o+.234*t-n["epsilon"]]]).stream(f),u=h.translate([i-.205*t,o+.212*t]).clipExtent([[i-.214*t+n["epsilon"],o+.166*t+n["epsilon"]],[i-.115*t-n["epsilon"],o+.234*t-n["epsilon"]]]).stream(f),reset()},albersUsa.fitExtent=function(e,t){return Object(s["fitExtent"])(albersUsa,e,t)},albersUsa.fitSize=function(e,t){return Object(s["fitSize"])(albersUsa,e,t)},albersUsa.fitWidth=function(e,t){return Object(s["fitWidth"])(albersUsa,e,t)},albersUsa.fitHeight=function(e,t){return Object(s["fitHeight"])(albersUsa,e,t)},albersUsa.scale(1070)}},"./node_modules/d3-geo/src/projection/azimuthal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"azimuthalRaw",(function(){return azimuthalRaw})),r.d(t,"azimuthalInvert",(function(){return azimuthalInvert}));var n=r("./node_modules/d3-geo/src/math.js");function azimuthalRaw(e){return function(t,r){var i=Object(n["cos"])(t),o=Object(n["cos"])(r),s=e(i*o);return s===1/0?[2,0]:[s*o*Object(n["sin"])(t),s*Object(n["sin"])(r)]}}function azimuthalInvert(e){return function(t,r){var i=Object(n["sqrt"])(t*t+r*r),o=e(i),s=Object(n["sin"])(o),a=Object(n["cos"])(o);return[Object(n["atan2"])(t*s,i*a),Object(n["asin"])(i&&r*s/i)]}}},"./node_modules/d3-geo/src/projection/azimuthalEqualArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"azimuthalEqualAreaRaw",(function(){return s}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/azimuthal.js"),o=r("./node_modules/d3-geo/src/projection/index.js"),s=Object(i["azimuthalRaw"])((function(e){return Object(n["sqrt"])(2/(1+e))}));s.invert=Object(i["azimuthalInvert"])((function(e){return 2*Object(n["asin"])(e/2)})),t["default"]=function(){return Object(o["default"])(s).scale(124.75).clipAngle(179.999)}},"./node_modules/d3-geo/src/projection/azimuthalEquidistant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"azimuthalEquidistantRaw",(function(){return s}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/azimuthal.js"),o=r("./node_modules/d3-geo/src/projection/index.js"),s=Object(i["azimuthalRaw"])((function(e){return(e=Object(n["acos"])(e))&&e/Object(n["sin"])(e)}));s.invert=Object(i["azimuthalInvert"])((function(e){return e})),t["default"]=function(){return Object(o["default"])(s).scale(79.4188).clipAngle(179.999)}},"./node_modules/d3-geo/src/projection/conic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"conicProjection",(function(){return conicProjection}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/index.js");function conicProjection(e){var t=0,r=n["pi"]/3,o=Object(i["projectionMutator"])(e),s=o(t,r);return s.parallels=function(e){return arguments.length?o(t=e[0]*n["radians"],r=e[1]*n["radians"]):[t*n["degrees"],r*n["degrees"]]},s}},"./node_modules/d3-geo/src/projection/conicConformal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"conicConformalRaw",(function(){return conicConformalRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/conic.js"),o=r("./node_modules/d3-geo/src/projection/mercator.js");function tany(e){return Object(n["tan"])((n["halfPi"]+e)/2)}function conicConformalRaw(e,t){var r=Object(n["cos"])(e),i=e===t?Object(n["sin"])(e):Object(n["log"])(r/Object(n["cos"])(t))/Object(n["log"])(tany(t)/tany(e)),s=r*Object(n["pow"])(tany(e),i)/i;if(!i)return o["mercatorRaw"];function project(e,t){s>0?t<-n["halfPi"]+n["epsilon"]&&(t=-n["halfPi"]+n["epsilon"]):t>n["halfPi"]-n["epsilon"]&&(t=n["halfPi"]-n["epsilon"]);var r=s/Object(n["pow"])(tany(t),i);return[r*Object(n["sin"])(i*e),s-r*Object(n["cos"])(i*e)]}return project.invert=function(e,t){var r=s-t,o=Object(n["sign"])(i)*Object(n["sqrt"])(e*e+r*r),a=Object(n["atan2"])(e,Object(n["abs"])(r))*Object(n["sign"])(r);return r*i<0&&(a-=n["pi"]*Object(n["sign"])(e)*Object(n["sign"])(r)),[a/i,2*Object(n["atan"])(Object(n["pow"])(s/o,1/i))-n["halfPi"]]},project}t["default"]=function(){return Object(i["conicProjection"])(conicConformalRaw).scale(109.5).parallels([30,30])}},"./node_modules/d3-geo/src/projection/conicEqualArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"conicEqualAreaRaw",(function(){return conicEqualAreaRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/conic.js"),o=r("./node_modules/d3-geo/src/projection/cylindricalEqualArea.js");function conicEqualAreaRaw(e,t){var r=Object(n["sin"])(e),i=(r+Object(n["sin"])(t))/2;if(Object(n["abs"])(i)<n["epsilon"])return Object(o["cylindricalEqualAreaRaw"])(e);var s=1+r*(2*i-r),a=Object(n["sqrt"])(s)/i;function project(e,t){var r=Object(n["sqrt"])(s-2*i*Object(n["sin"])(t))/i;return[r*Object(n["sin"])(e*=i),a-r*Object(n["cos"])(e)]}return project.invert=function(e,t){var r=a-t,o=Object(n["atan2"])(e,Object(n["abs"])(r))*Object(n["sign"])(r);return r*i<0&&(o-=n["pi"]*Object(n["sign"])(e)*Object(n["sign"])(r)),[o/i,Object(n["asin"])((s-(e*e+r*r)*i*i)/(2*i))]},project}t["default"]=function(){return Object(i["conicProjection"])(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}},"./node_modules/d3-geo/src/projection/conicEquidistant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"conicEquidistantRaw",(function(){return conicEquidistantRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/conic.js"),o=r("./node_modules/d3-geo/src/projection/equirectangular.js");function conicEquidistantRaw(e,t){var r=Object(n["cos"])(e),i=e===t?Object(n["sin"])(e):(r-Object(n["cos"])(t))/(t-e),s=r/i+e;if(Object(n["abs"])(i)<n["epsilon"])return o["equirectangularRaw"];function project(e,t){var r=s-t,o=i*e;return[r*Object(n["sin"])(o),s-r*Object(n["cos"])(o)]}return project.invert=function(e,t){var r=s-t,o=Object(n["atan2"])(e,Object(n["abs"])(r))*Object(n["sign"])(r);return r*i<0&&(o-=n["pi"]*Object(n["sign"])(e)*Object(n["sign"])(r)),[o/i,s-Object(n["sign"])(i)*Object(n["sqrt"])(e*e+r*r)]},project}t["default"]=function(){return Object(i["conicProjection"])(conicEquidistantRaw).scale(131.154).center([0,13.9389])}},"./node_modules/d3-geo/src/projection/cylindricalEqualArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"cylindricalEqualAreaRaw",(function(){return cylindricalEqualAreaRaw}));var n=r("./node_modules/d3-geo/src/math.js");function cylindricalEqualAreaRaw(e){var t=Object(n["cos"])(e);function forward(e,r){return[e*t,Object(n["sin"])(r)/t]}return forward.invert=function(e,r){return[e/t,Object(n["asin"])(r*t)]},forward}},"./node_modules/d3-geo/src/projection/equalEarth.js":function(e,t,r){"use strict";r.r(t),r.d(t,"equalEarthRaw",(function(){return equalEarthRaw}));var n=r("./node_modules/d3-geo/src/projection/index.js"),i=r("./node_modules/d3-geo/src/math.js"),o=1.340264,s=-.081106,a=893e-6,u=.003796,c=Object(i["sqrt"])(3)/2,l=12;function equalEarthRaw(e,t){var r=Object(i["asin"])(c*Object(i["sin"])(t)),n=r*r,l=n*n*n;return[e*Object(i["cos"])(r)/(c*(o+3*s*n+l*(7*a+9*u*n))),r*(o+s*n+l*(a+u*n))]}equalEarthRaw.invert=function(e,t){for(var r,n,d,h=t,f=h*h,p=f*f*f,m=0;m<l;++m)if(n=h*(o+s*f+p*(a+u*f))-t,d=o+3*s*f+p*(7*a+9*u*f),h-=r=n/d,f=h*h,p=f*f*f,Object(i["abs"])(r)<i["epsilon2"])break;return[c*e*(o+3*s*f+p*(7*a+9*u*f))/Object(i["cos"])(h),Object(i["asin"])(Object(i["sin"])(h)/c)]},t["default"]=function(){return Object(n["default"])(equalEarthRaw).scale(177.158)}},"./node_modules/d3-geo/src/projection/equirectangular.js":function(e,t,r){"use strict";r.r(t),r.d(t,"equirectangularRaw",(function(){return equirectangularRaw}));var n=r("./node_modules/d3-geo/src/projection/index.js");function equirectangularRaw(e,t){return[e,t]}equirectangularRaw.invert=equirectangularRaw,t["default"]=function(){return Object(n["default"])(equirectangularRaw).scale(152.63)}},"./node_modules/d3-geo/src/projection/fit.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fitExtent",(function(){return fitExtent})),r.d(t,"fitSize",(function(){return fitSize})),r.d(t,"fitWidth",(function(){return fitWidth})),r.d(t,"fitHeight",(function(){return fitHeight}));var n=r("./node_modules/d3-geo/src/stream.js"),i=r("./node_modules/d3-geo/src/path/bounds.js");function fit(e,t,r){var o=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),Object(n["default"])(r,e.stream(i["default"])),t(i["default"].result()),null!=o&&e.clipExtent(o),e}function fitExtent(e,t,r){return fit(e,(function(r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(n/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+t[0][0]+(n-o*(r[1][0]+r[0][0]))/2,a=+t[0][1]+(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])}),r)}function fitSize(e,t,r){return fitExtent(e,[[0,0],t],r)}function fitWidth(e,t,r){return fit(e,(function(r){var n=+t,i=n/(r[1][0]-r[0][0]),o=(n-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];e.scale(150*i).translate([o,s])}),r)}function fitHeight(e,t,r){return fit(e,(function(r){var n=+t,i=n/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(n-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([o,s])}),r)}},"./node_modules/d3-geo/src/projection/gnomonic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"gnomonicRaw",(function(){return gnomonicRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/azimuthal.js"),o=r("./node_modules/d3-geo/src/projection/index.js");function gnomonicRaw(e,t){var r=Object(n["cos"])(t),i=Object(n["cos"])(e)*r;return[r*Object(n["sin"])(e)/i,Object(n["sin"])(t)/i]}gnomonicRaw.invert=Object(i["azimuthalInvert"])(n["atan"]),t["default"]=function(){return Object(o["default"])(gnomonicRaw).scale(144.049).clipAngle(60)}},"./node_modules/d3-geo/src/projection/identity.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/clip/rectangle.js"),i=r("./node_modules/d3-geo/src/identity.js"),o=r("./node_modules/d3-geo/src/transform.js"),s=r("./node_modules/d3-geo/src/projection/fit.js"),a=r("./node_modules/d3-geo/src/math.js");t["default"]=function(){var e,t,r,u,c,l,d,h=1,f=0,p=0,m=1,_=1,g=0,b=null,v=1,M=1,T=Object(o["transformer"])({point:function(e,t){var r=projection([e,t]);this.stream.point(r[0],r[1])}}),S=i["default"];function reset(){return v=h*m,M=h*_,l=d=null,projection}function projection(r){var n=r[0]*v,i=r[1]*M;if(g){var o=i*e-n*t;n=n*e+i*t,i=o}return[n+f,i+p]}return projection.invert=function(r){var n=r[0]-f,i=r[1]-p;if(g){var o=i*e+n*t;n=n*e-i*t,i=o}return[n/v,i/M]},projection.stream=function(e){return l&&d===e?l:l=T(S(d=e))},projection.postclip=function(e){return arguments.length?(S=e,b=r=u=c=null,reset()):S},projection.clipExtent=function(e){return arguments.length?(S=null==e?(b=r=u=c=null,i["default"]):Object(n["default"])(b=+e[0][0],r=+e[0][1],u=+e[1][0],c=+e[1][1]),reset()):null==b?null:[[b,r],[u,c]]},projection.scale=function(e){return arguments.length?(h=+e,reset()):h},projection.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],reset()):[f,p]},projection.angle=function(r){return arguments.length?(g=r%360*a["radians"],t=Object(a["sin"])(g),e=Object(a["cos"])(g),reset()):g*a["degrees"]},projection.reflectX=function(e){return arguments.length?(m=e?-1:1,reset()):m<0},projection.reflectY=function(e){return arguments.length?(_=e?-1:1,reset()):_<0},projection.fitExtent=function(e,t){return Object(s["fitExtent"])(projection,e,t)},projection.fitSize=function(e,t){return Object(s["fitSize"])(projection,e,t)},projection.fitWidth=function(e,t){return Object(s["fitWidth"])(projection,e,t)},projection.fitHeight=function(e,t){return Object(s["fitHeight"])(projection,e,t)},projection}},"./node_modules/d3-geo/src/projection/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return projection})),r.d(t,"projectionMutator",(function(){return projectionMutator}));var n=r("./node_modules/d3-geo/src/clip/antimeridian.js"),i=r("./node_modules/d3-geo/src/clip/circle.js"),o=r("./node_modules/d3-geo/src/clip/rectangle.js"),s=r("./node_modules/d3-geo/src/compose.js"),a=r("./node_modules/d3-geo/src/identity.js"),u=r("./node_modules/d3-geo/src/math.js"),c=r("./node_modules/d3-geo/src/rotation.js"),l=r("./node_modules/d3-geo/src/transform.js"),d=r("./node_modules/d3-geo/src/projection/fit.js"),h=r("./node_modules/d3-geo/src/projection/resample.js"),f=Object(l["transformer"])({point:function(e,t){this.stream.point(e*u["radians"],t*u["radians"])}});function transformRotate(e){return Object(l["transformer"])({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}})}function scaleTranslate(e,t,r,n,i){function transform(o,s){return o*=n,s*=i,[t+e*o,r-e*s]}return transform.invert=function(o,s){return[(o-t)/e*n,(r-s)/e*i]},transform}function scaleTranslateRotate(e,t,r,n,i,o){if(!o)return scaleTranslate(e,t,r,n,i);var s=Object(u["cos"])(o),a=Object(u["sin"])(o),c=s*e,l=a*e,d=s/e,h=a/e,f=(a*r-s*t)/e,p=(a*t+s*r)/e;function transform(e,o){return e*=n,o*=i,[c*e-l*o+t,r-l*e-c*o]}return transform.invert=function(e,t){return[n*(d*e-h*t+f),i*(p-h*e-d*t)]},transform}function projection(e){return projectionMutator((function(){return e}))()}function projectionMutator(e){var t,r,l,p,m,_,g,b,v,M,T=150,S=480,C=250,E=0,P=0,A=0,j=0,O=0,R=0,I=1,w=1,D=null,F=n["default"],B=null,L=a["default"],V=.5;function projection(e){return b(e[0]*u["radians"],e[1]*u["radians"])}function invert(e){return e=b.invert(e[0],e[1]),e&&[e[0]*u["degrees"],e[1]*u["degrees"]]}function recenter(){var e=scaleTranslateRotate(T,0,0,I,w,R).apply(null,t(E,P)),n=scaleTranslateRotate(T,S-e[0],C-e[1],I,w,R);return r=Object(c["rotateRadians"])(A,j,O),g=Object(s["default"])(t,n),b=Object(s["default"])(r,g),_=Object(h["default"])(g,V),reset()}function reset(){return v=M=null,projection}return projection.stream=function(e){return v&&M===e?v:v=f(transformRotate(r)(F(_(L(M=e)))))},projection.preclip=function(e){return arguments.length?(F=e,D=void 0,reset()):F},projection.postclip=function(e){return arguments.length?(L=e,B=l=p=m=null,reset()):L},projection.clipAngle=function(e){return arguments.length?(F=+e?Object(i["default"])(D=e*u["radians"]):(D=null,n["default"]),reset()):D*u["degrees"]},projection.clipExtent=function(e){return arguments.length?(L=null==e?(B=l=p=m=null,a["default"]):Object(o["default"])(B=+e[0][0],l=+e[0][1],p=+e[1][0],m=+e[1][1]),reset()):null==B?null:[[B,l],[p,m]]},projection.scale=function(e){return arguments.length?(T=+e,recenter()):T},projection.translate=function(e){return arguments.length?(S=+e[0],C=+e[1],recenter()):[S,C]},projection.center=function(e){return arguments.length?(E=e[0]%360*u["radians"],P=e[1]%360*u["radians"],recenter()):[E*u["degrees"],P*u["degrees"]]},projection.rotate=function(e){return arguments.length?(A=e[0]%360*u["radians"],j=e[1]%360*u["radians"],O=e.length>2?e[2]%360*u["radians"]:0,recenter()):[A*u["degrees"],j*u["degrees"],O*u["degrees"]]},projection.angle=function(e){return arguments.length?(R=e%360*u["radians"],recenter()):R*u["degrees"]},projection.reflectX=function(e){return arguments.length?(I=e?-1:1,recenter()):I<0},projection.reflectY=function(e){return arguments.length?(w=e?-1:1,recenter()):w<0},projection.precision=function(e){return arguments.length?(_=Object(h["default"])(g,V=e*e),reset()):Object(u["sqrt"])(V)},projection.fitExtent=function(e,t){return Object(d["fitExtent"])(projection,e,t)},projection.fitSize=function(e,t){return Object(d["fitSize"])(projection,e,t)},projection.fitWidth=function(e,t){return Object(d["fitWidth"])(projection,e,t)},projection.fitHeight=function(e,t){return Object(d["fitHeight"])(projection,e,t)},function(){return t=e.apply(this,arguments),projection.invert=t.invert&&invert,recenter()}}},"./node_modules/d3-geo/src/projection/mercator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"mercatorRaw",(function(){return mercatorRaw})),r.d(t,"mercatorProjection",(function(){return mercatorProjection}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/rotation.js"),o=r("./node_modules/d3-geo/src/projection/index.js");function mercatorRaw(e,t){return[e,Object(n["log"])(Object(n["tan"])((n["halfPi"]+t)/2))]}function mercatorProjection(e){var t,r,s,a=Object(o["default"])(e),u=a.center,c=a.scale,l=a.translate,d=a.clipExtent,h=null;function reclip(){var o=n["pi"]*c(),u=a(Object(i["default"])(a.rotate()).invert([0,0]));return d(null==h?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:e===mercatorRaw?[[Math.max(u[0]-o,h),t],[Math.min(u[0]+o,r),s]]:[[h,Math.max(u[1]-o,t)],[r,Math.min(u[1]+o,s)]])}return a.scale=function(e){return arguments.length?(c(e),reclip()):c()},a.translate=function(e){return arguments.length?(l(e),reclip()):l()},a.center=function(e){return arguments.length?(u(e),reclip()):u()},a.clipExtent=function(e){return arguments.length?(null==e?h=t=r=s=null:(h=+e[0][0],t=+e[0][1],r=+e[1][0],s=+e[1][1]),reclip()):null==h?null:[[h,t],[r,s]]},reclip()}mercatorRaw.invert=function(e,t){return[e,2*Object(n["atan"])(Object(n["exp"])(t))-n["halfPi"]]},t["default"]=function(){return mercatorProjection(mercatorRaw).scale(961/n["tau"])}},"./node_modules/d3-geo/src/projection/naturalEarth1.js":function(e,t,r){"use strict";r.r(t),r.d(t,"naturalEarth1Raw",(function(){return naturalEarth1Raw}));var n=r("./node_modules/d3-geo/src/projection/index.js"),i=r("./node_modules/d3-geo/src/math.js");function naturalEarth1Raw(e,t){var r=t*t,n=r*r;return[e*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791)),t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))]}naturalEarth1Raw.invert=function(e,t){var r,n=t,o=25;do{var s=n*n,a=s*s;n-=r=(n*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-t)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while(Object(i["abs"])(r)>i["epsilon"]&&--o>0);return[e/(.8707+(s=n*n)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),n]},t["default"]=function(){return Object(n["default"])(naturalEarth1Raw).scale(175.295)}},"./node_modules/d3-geo/src/projection/orthographic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"orthographicRaw",(function(){return orthographicRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/azimuthal.js"),o=r("./node_modules/d3-geo/src/projection/index.js");function orthographicRaw(e,t){return[Object(n["cos"])(t)*Object(n["sin"])(e),Object(n["sin"])(t)]}orthographicRaw.invert=Object(i["azimuthalInvert"])(n["asin"]),t["default"]=function(){return Object(o["default"])(orthographicRaw).scale(249.5).clipAngle(90+n["epsilon"])}},"./node_modules/d3-geo/src/projection/resample.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-geo/src/cartesian.js"),i=r("./node_modules/d3-geo/src/math.js"),o=r("./node_modules/d3-geo/src/transform.js"),s=16,a=Object(i["cos"])(30*i["radians"]);function resampleNone(e){return Object(o["transformer"])({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function resample(e,t){function resampleLineTo(r,n,o,s,u,c,l,d,h,f,p,m,_,g){var b=l-r,v=d-n,M=b*b+v*v;if(M>4*t&&_--){var T=s+f,S=u+p,C=c+m,E=Object(i["sqrt"])(T*T+S*S+C*C),P=Object(i["asin"])(C/=E),A=Object(i["abs"])(Object(i["abs"])(C)-1)<i["epsilon"]||Object(i["abs"])(o-h)<i["epsilon"]?(o+h)/2:Object(i["atan2"])(S,T),j=e(A,P),O=j[0],R=j[1],I=O-r,w=R-n,D=v*I-b*w;(D*D/M>t||Object(i["abs"])((b*I+v*w)/M-.5)>.3||s*f+u*p+c*m<a)&&(resampleLineTo(r,n,o,s,u,c,O,R,A,T/=E,S/=E,C,_,g),g.point(O,R),resampleLineTo(O,R,A,T,S,C,l,d,h,f,p,m,_,g))}}return function(t){var r,i,o,a,u,c,l,d,h,f,p,m,_={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){t.polygonStart(),_.lineStart=ringStart},polygonEnd:function(){t.polygonEnd(),_.lineStart=lineStart}};function point(r,n){r=e(r,n),t.point(r[0],r[1])}function lineStart(){d=NaN,_.point=linePoint,t.lineStart()}function linePoint(r,i){var o=Object(n["cartesian"])([r,i]),a=e(r,i);resampleLineTo(d,h,l,f,p,m,d=a[0],h=a[1],l=r,f=o[0],p=o[1],m=o[2],s,t),t.point(d,h)}function lineEnd(){_.point=point,t.lineEnd()}function ringStart(){lineStart(),_.point=ringPoint,_.lineEnd=ringEnd}function ringPoint(e,t){linePoint(r=e,t),i=d,o=h,a=f,u=p,c=m,_.point=linePoint}function ringEnd(){resampleLineTo(d,h,l,f,p,m,i,o,r,a,u,c,s,t),_.lineEnd=lineEnd,lineEnd()}return _}}t["default"]=function(e,t){return+t?resample(e,t):resampleNone(e)}},"./node_modules/d3-geo/src/projection/stereographic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"stereographicRaw",(function(){return stereographicRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/azimuthal.js"),o=r("./node_modules/d3-geo/src/projection/index.js");function stereographicRaw(e,t){var r=Object(n["cos"])(t),i=1+Object(n["cos"])(e)*r;return[r*Object(n["sin"])(e)/i,Object(n["sin"])(t)/i]}stereographicRaw.invert=Object(i["azimuthalInvert"])((function(e){return 2*Object(n["atan"])(e)})),t["default"]=function(){return Object(o["default"])(stereographicRaw).scale(250).clipAngle(142)}},"./node_modules/d3-geo/src/projection/transverseMercator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"transverseMercatorRaw",(function(){return transverseMercatorRaw}));var n=r("./node_modules/d3-geo/src/math.js"),i=r("./node_modules/d3-geo/src/projection/mercator.js");function transverseMercatorRaw(e,t){return[Object(n["log"])(Object(n["tan"])((n["halfPi"]+t)/2)),-e]}transverseMercatorRaw.invert=function(e,t){return[-t,2*Object(n["atan"])(Object(n["exp"])(e))-n["halfPi"]]},t["default"]=function(){var e=Object(i["mercatorProjection"])(transverseMercatorRaw),t=e.center,r=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])},r([0,0,90]).scale(159.155)}},"./node_modules/d3-geo/src/rotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"rotateRadians",(function(){return rotateRadians}));var n=r("./node_modules/d3-geo/src/compose.js"),i=r("./node_modules/d3-geo/src/math.js");function rotationIdentity(e,t){return[Object(i["abs"])(e)>i["pi"]?e+Math.round(-e/i["tau"])*i["tau"]:e,t]}function rotateRadians(e,t,r){return(e%=i["tau"])?t||r?Object(n["default"])(rotationLambda(e),rotationPhiGamma(t,r)):rotationLambda(e):t||r?rotationPhiGamma(t,r):rotationIdentity}function forwardRotationLambda(e){return function(t,r){return t+=e,[t>i["pi"]?t-i["tau"]:t<-i["pi"]?t+i["tau"]:t,r]}}function rotationLambda(e){var t=forwardRotationLambda(e);return t.invert=forwardRotationLambda(-e),t}function rotationPhiGamma(e,t){var r=Object(i["cos"])(e),n=Object(i["sin"])(e),o=Object(i["cos"])(t),s=Object(i["sin"])(t);function rotation(e,t){var a=Object(i["cos"])(t),u=Object(i["cos"])(e)*a,c=Object(i["sin"])(e)*a,l=Object(i["sin"])(t),d=l*r+u*n;return[Object(i["atan2"])(c*o-d*s,u*r-l*n),Object(i["asin"])(d*o+c*s)]}return rotation.invert=function(e,t){var a=Object(i["cos"])(t),u=Object(i["cos"])(e)*a,c=Object(i["sin"])(e)*a,l=Object(i["sin"])(t),d=l*o-c*s;return[Object(i["atan2"])(c*o+l*s,u*r+d*n),Object(i["asin"])(d*r-u*n)]},rotation}rotationIdentity.invert=rotationIdentity,t["default"]=function(e){function forward(t){return t=e(t[0]*i["radians"],t[1]*i["radians"]),t[0]*=i["degrees"],t[1]*=i["degrees"],t}return e=rotateRadians(e[0]*i["radians"],e[1]*i["radians"],e.length>2?e[2]*i["radians"]:0),forward.invert=function(t){return t=e.invert(t[0]*i["radians"],t[1]*i["radians"]),t[0]*=i["degrees"],t[1]*=i["degrees"],t},forward}},"./node_modules/d3-geo/src/stream.js":function(e,t,r){"use strict";function streamGeometry(e,t){e&&i.hasOwnProperty(e.type)&&i[e.type](e,t)}r.r(t);var n={Feature:function(e,t){streamGeometry(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,i=r.length;while(++n<i)streamGeometry(r[n].geometry,t)}},i={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){streamLine(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)streamLine(r[n],t,0)},Polygon:function(e,t){streamPolygon(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,i=r.length;while(++n<i)streamPolygon(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,n=-1,i=r.length;while(++n<i)streamGeometry(r[n],t)}};function streamLine(e,t,r){var n,i=-1,o=e.length-r;t.lineStart();while(++i<o)n=e[i],t.point(n[0],n[1],n[2]);t.lineEnd()}function streamPolygon(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)streamLine(e[r],t,1);t.polygonEnd()}t["default"]=function(e,t){e&&n.hasOwnProperty(e.type)?n[e.type](e,t):streamGeometry(e,t)}},"./node_modules/d3-geo/src/transform.js":function(e,t,r){"use strict";function transformer(e){return function(t){var r=new TransformStream;for(var n in e)r[n]=e[n];return r.stream=t,r}}function TransformStream(){}r.r(t),r.d(t,"transformer",(function(){return transformer})),t["default"]=function(e){return{stream:transformer(e)}},TransformStream.prototype={constructor:TransformStream,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},"./node_modules/d3-hierarchy/src/accessors.js":function(e,t,r){"use strict";function optional(e){return null==e?null:required(e)}function required(e){if("function"!==typeof e)throw new Error;return e}r.r(t),r.d(t,"optional",(function(){return optional})),r.d(t,"required",(function(){return required}))},"./node_modules/d3-hierarchy/src/array.js":function(e,t,r){"use strict";function shuffle(e){var t,r,n=e.length;while(n)r=Math.random()*n--|0,t=e[n],e[n]=e[r],e[r]=t;return e}r.r(t),r.d(t,"shuffle",(function(){return shuffle})),t["default"]=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}},"./node_modules/d3-hierarchy/src/cluster.js":function(e,t,r){"use strict";function defaultSeparation(e,t){return e.parent===t.parent?1:2}function meanX(e){return e.reduce(meanXReduce,0)/e.length}function meanXReduce(e,t){return e+t.x}function maxY(e){return 1+e.reduce(maxYReduce,0)}function maxYReduce(e,t){return Math.max(e,t.y)}function leafLeft(e){var t;while(t=e.children)e=t[0];return e}function leafRight(e){var t;while(t=e.children)e=t[t.length-1];return e}r.r(t),t["default"]=function(){var e=defaultSeparation,t=1,r=1,n=!1;function cluster(i){var o,s=0;i.eachAfter((function(t){var r=t.children;r?(t.x=meanX(r),t.y=maxY(r)):(t.x=o?s+=e(t,o):0,t.y=0,o=t)}));var a=leafLeft(i),u=leafRight(i),c=a.x-e(a,u)/2,l=u.x+e(u,a)/2;return i.eachAfter(n?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*r}:function(e){e.x=(e.x-c)/(l-c)*t,e.y=(1-(i.y?e.y/i.y:1))*r})}return cluster.separation=function(t){return arguments.length?(e=t,cluster):e},cluster.size=function(e){return arguments.length?(n=!1,t=+e[0],r=+e[1],cluster):n?null:[t,r]},cluster.nodeSize=function(e){return arguments.length?(n=!0,t=+e[0],r=+e[1],cluster):n?[t,r]:null},cluster}},"./node_modules/d3-hierarchy/src/constant.js":function(e,t,r){"use strict";function constantZero(){return 0}r.r(t),r.d(t,"constantZero",(function(){return constantZero})),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-hierarchy/src/hierarchy/ancestors.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=this,t=[e];while(e=e.parent)t.push(e);return t}},"./node_modules/d3-hierarchy/src/hierarchy/count.js":function(e,t,r){"use strict";function count(e){var t=0,r=e.children,n=r&&r.length;if(n)while(--n>=0)t+=r[n].value;else t=1;e.value=t}r.r(t),t["default"]=function(){return this.eachAfter(count)}},"./node_modules/d3-hierarchy/src/hierarchy/descendants.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){return Array.from(this)}},"./node_modules/d3-hierarchy/src/hierarchy/each.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){let r=-1;for(const n of this)e.call(t,n,++r,this);return this}},"./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){var r,n,i,o=this,s=[o],a=[],u=-1;while(o=s.pop())if(a.push(o),r=o.children)for(n=0,i=r.length;n<i;++n)s.push(r[n]);while(o=a.pop())e.call(t,o,++u,this);return this}},"./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){var r,n,i=this,o=[i],s=-1;while(i=o.pop())if(e.call(t,i,++s,this),r=i.children)for(n=r.length-1;n>=0;--n)o.push(r[n]);return this}},"./node_modules/d3-hierarchy/src/hierarchy/find.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){let r=-1;for(const n of this)if(e.call(t,n,++r,this))return n}},"./node_modules/d3-hierarchy/src/hierarchy/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return hierarchy})),r.d(t,"computeHeight",(function(){return computeHeight})),r.d(t,"Node",(function(){return Node}));var n=r("./node_modules/d3-hierarchy/src/hierarchy/count.js"),i=r("./node_modules/d3-hierarchy/src/hierarchy/each.js"),o=r("./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js"),s=r("./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js"),a=r("./node_modules/d3-hierarchy/src/hierarchy/find.js"),u=r("./node_modules/d3-hierarchy/src/hierarchy/sum.js"),c=r("./node_modules/d3-hierarchy/src/hierarchy/sort.js"),l=r("./node_modules/d3-hierarchy/src/hierarchy/path.js"),d=r("./node_modules/d3-hierarchy/src/hierarchy/ancestors.js"),h=r("./node_modules/d3-hierarchy/src/hierarchy/descendants.js"),f=r("./node_modules/d3-hierarchy/src/hierarchy/leaves.js"),p=r("./node_modules/d3-hierarchy/src/hierarchy/links.js"),m=r("./node_modules/d3-hierarchy/src/hierarchy/iterator.js");function hierarchy(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=mapChildren)):void 0===t&&(t=objectChildren);var r,n,i,o,s,a=new Node(e),u=[a];while(r=u.pop())if((i=t(r.data))&&(s=(i=Array.from(i)).length))for(r.children=i,o=s-1;o>=0;--o)u.push(n=i[o]=new Node(i[o])),n.parent=r,n.depth=r.depth+1;return a.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(e){return e.children}function mapChildren(e){return Array.isArray(e)?e[1]:null}function copyData(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function computeHeight(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Node(e){this.data=e,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:n["default"],each:i["default"],eachAfter:s["default"],eachBefore:o["default"],find:a["default"],sum:u["default"],sort:c["default"],path:l["default"],ancestors:d["default"],descendants:h["default"],leaves:f["default"],links:p["default"],copy:node_copy,[Symbol.iterator]:m["default"]}},"./node_modules/d3-hierarchy/src/hierarchy/iterator.js":function(e,t,r){"use strict";r.r(t),t["default"]=function*(){var e,t,r,n,i=this,o=[i];do{e=o.reverse(),o=[];while(i=e.pop())if(yield i,t=i.children)for(r=0,n=t.length;r<n;++r)o.push(t[r])}while(o.length)}},"./node_modules/d3-hierarchy/src/hierarchy/leaves.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e}},"./node_modules/d3-hierarchy/src/hierarchy/links.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=this,t=[];return e.each((function(r){r!==e&&t.push({source:r.parent,target:r})})),t}},"./node_modules/d3-hierarchy/src/hierarchy/path.js":function(e,t,r){"use strict";function leastCommonAncestor(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),i=null;e=r.pop(),t=n.pop();while(e===t)i=e,e=r.pop(),t=n.pop();return i}r.r(t),t["default"]=function(e){var t=this,r=leastCommonAncestor(t,e),n=[t];while(t!==r)t=t.parent,n.push(t);var i=n.length;while(e!==r)n.splice(i,0,e),e=e.parent;return n}},"./node_modules/d3-hierarchy/src/hierarchy/sort.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))}},"./node_modules/d3-hierarchy/src/hierarchy/sum.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return this.eachAfter((function(t){var r=+e(t.data)||0,n=t.children,i=n&&n.length;while(--i>=0)r+=n[i].value;t.value=r}))}},"./node_modules/d3-hierarchy/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/cluster.js");r.d(t,"cluster",(function(){return n["default"]}));var i=r("./node_modules/d3-hierarchy/src/hierarchy/index.js");r.d(t,"hierarchy",(function(){return i["default"]}));var o=r("./node_modules/d3-hierarchy/src/pack/index.js");r.d(t,"pack",(function(){return o["default"]}));var s=r("./node_modules/d3-hierarchy/src/pack/siblings.js");r.d(t,"packSiblings",(function(){return s["default"]}));var a=r("./node_modules/d3-hierarchy/src/pack/enclose.js");r.d(t,"packEnclose",(function(){return a["default"]}));var u=r("./node_modules/d3-hierarchy/src/partition.js");r.d(t,"partition",(function(){return u["default"]}));var c=r("./node_modules/d3-hierarchy/src/stratify.js");r.d(t,"stratify",(function(){return c["default"]}));var l=r("./node_modules/d3-hierarchy/src/tree.js");r.d(t,"tree",(function(){return l["default"]}));var d=r("./node_modules/d3-hierarchy/src/treemap/index.js");r.d(t,"treemap",(function(){return d["default"]}));var h=r("./node_modules/d3-hierarchy/src/treemap/binary.js");r.d(t,"treemapBinary",(function(){return h["default"]}));var f=r("./node_modules/d3-hierarchy/src/treemap/dice.js");r.d(t,"treemapDice",(function(){return f["default"]}));var p=r("./node_modules/d3-hierarchy/src/treemap/slice.js");r.d(t,"treemapSlice",(function(){return p["default"]}));var m=r("./node_modules/d3-hierarchy/src/treemap/sliceDice.js");r.d(t,"treemapSliceDice",(function(){return m["default"]}));var _=r("./node_modules/d3-hierarchy/src/treemap/squarify.js");r.d(t,"treemapSquarify",(function(){return _["default"]}));var g=r("./node_modules/d3-hierarchy/src/treemap/resquarify.js");r.d(t,"treemapResquarify",(function(){return g["default"]}))},"./node_modules/d3-hierarchy/src/pack/enclose.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/array.js");function extendBasis(e,t){var r,n;if(enclosesWeakAll(t,e))return[t];for(r=0;r<e.length;++r)if(enclosesNot(t,e[r])&&enclosesWeakAll(encloseBasis2(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(n=r+1;n<e.length;++n)if(enclosesNot(encloseBasis2(e[r],e[n]),t)&&enclosesNot(encloseBasis2(e[r],t),e[n])&&enclosesNot(encloseBasis2(e[n],t),e[r])&&enclosesWeakAll(encloseBasis3(e[r],e[n],t),e))return[e[r],e[n],t];throw new Error}function enclosesNot(e,t){var r=e.r-t.r,n=t.x-e.x,i=t.y-e.y;return r<0||r*r<n*n+i*i}function enclosesWeak(e,t){var r=e.r-t.r+1e-9*Math.max(e.r,t.r,1),n=t.x-e.x,i=t.y-e.y;return r>0&&r*r>n*n+i*i}function enclosesWeakAll(e,t){for(var r=0;r<t.length;++r)if(!enclosesWeak(e,t[r]))return!1;return!0}function encloseBasis(e){switch(e.length){case 1:return encloseBasis1(e[0]);case 2:return encloseBasis2(e[0],e[1]);case 3:return encloseBasis3(e[0],e[1],e[2])}}function encloseBasis1(e){return{x:e.x,y:e.y,r:e.r}}function encloseBasis2(e,t){var r=e.x,n=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-r,c=s-n,l=a-i,d=Math.sqrt(u*u+c*c);return{x:(r+o+u/d*l)/2,y:(n+s+c/d*l)/2,r:(d+i+a)/2}}function encloseBasis3(e,t,r){var n=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,c=r.x,l=r.y,d=r.r,h=n-s,f=n-c,p=i-a,m=i-l,_=u-o,g=d-o,b=n*n+i*i-o*o,v=b-s*s-a*a+u*u,M=b-c*c-l*l+d*d,T=f*p-h*m,S=(p*M-m*v)/(2*T)-n,C=(m*_-p*g)/T,E=(f*v-h*M)/(2*T)-i,P=(h*g-f*_)/T,A=C*C+P*P-1,j=2*(o+S*C+E*P),O=S*S+E*E-o*o,R=-(A?(j+Math.sqrt(j*j-4*A*O))/(2*A):O/j);return{x:n+S+C*R,y:i+E+P*R,r:R}}t["default"]=function(e){var t,r,i=0,o=(e=Object(n["shuffle"])(Array.from(e))).length,s=[];while(i<o)t=e[i],r&&enclosesWeak(r,t)?++i:(r=encloseBasis(s=extendBasis(s,t)),i=0);return r}},"./node_modules/d3-hierarchy/src/pack/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/pack/siblings.js"),i=r("./node_modules/d3-hierarchy/src/accessors.js"),o=r("./node_modules/d3-hierarchy/src/constant.js");function defaultRadius(e){return Math.sqrt(e.value)}function radiusLeaf(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function packChildren(e,t){return function(r){if(i=r.children){var i,o,s,a=i.length,u=e(r)*t||0;if(u)for(o=0;o<a;++o)i[o].r+=u;if(s=Object(n["packEnclose"])(i),u)for(o=0;o<a;++o)i[o].r-=u;r.r=s+u}}}function translateChild(e){return function(t){var r=t.parent;t.r*=e,r&&(t.x=r.x+e*t.x,t.y=r.y+e*t.y)}}t["default"]=function(){var e=null,t=1,r=1,n=o["constantZero"];function pack(i){return i.x=t/2,i.y=r/2,e?i.eachBefore(radiusLeaf(e)).eachAfter(packChildren(n,.5)).eachBefore(translateChild(1)):i.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(o["constantZero"],1)).eachAfter(packChildren(n,i.r/Math.min(t,r))).eachBefore(translateChild(Math.min(t,r)/(2*i.r))),i}return pack.radius=function(t){return arguments.length?(e=Object(i["optional"])(t),pack):e},pack.size=function(e){return arguments.length?(t=+e[0],r=+e[1],pack):[t,r]},pack.padding=function(e){return arguments.length?(n="function"===typeof e?e:Object(o["default"])(+e),pack):n},pack}},"./node_modules/d3-hierarchy/src/pack/siblings.js":function(e,t,r){"use strict";r.r(t),r.d(t,"packEnclose",(function(){return packEnclose}));var n=r("./node_modules/d3-hierarchy/src/array.js"),i=r("./node_modules/d3-hierarchy/src/pack/enclose.js");function place(e,t,r){var n,i,o,s,a=e.x-t.x,u=e.y-t.y,c=a*a+u*u;c?(i=t.r+r.r,i*=i,s=e.r+r.r,s*=s,i>s?(n=(c+s-i)/(2*c),o=Math.sqrt(Math.max(0,s/c-n*n)),r.x=e.x-n*a-o*u,r.y=e.y-n*u+o*a):(n=(c+i-s)/(2*c),o=Math.sqrt(Math.max(0,i/c-n*n)),r.x=t.x+n*a-o*u,r.y=t.y+n*u+o*a)):(r.x=t.x+r.r,r.y=t.y)}function intersects(e,t){var r=e.r+t.r-1e-6,n=t.x-e.x,i=t.y-e.y;return r>0&&r*r>n*n+i*i}function score(e){var t=e._,r=e.next._,n=t.r+r.r,i=(t.x*r.r+r.x*t.r)/n,o=(t.y*r.r+r.y*t.r)/n;return i*i+o*o}function Node(e){this._=e,this.next=null,this.previous=null}function packEnclose(e){if(!(s=(e=Object(n["default"])(e)).length))return 0;var t,r,o,s,a,u,c,l,d,h,f;if(t=e[0],t.x=0,t.y=0,!(s>1))return t.r;if(r=e[1],t.x=-r.r,r.x=t.r,r.y=0,!(s>2))return t.r+r.r;place(r,t,o=e[2]),t=new Node(t),r=new Node(r),o=new Node(o),t.next=o.previous=r,r.next=t.previous=o,o.next=r.previous=t;e:for(c=3;c<s;++c){place(t._,r._,o=e[c]),o=new Node(o),l=r.next,d=t.previous,h=r._.r,f=t._.r;do{if(h<=f){if(intersects(l._,o._)){r=l,t.next=r,r.previous=t,--c;continue e}h+=l._.r,l=l.next}else{if(intersects(d._,o._)){t=d,t.next=r,r.previous=t,--c;continue e}f+=d._.r,d=d.previous}}while(l!==d.next);o.previous=t,o.next=r,t.next=r.previous=r=o,a=score(t);while((o=o.next)!==r)(u=score(o))<a&&(t=o,a=u);r=t.next}t=[r._],o=r;while((o=o.next)!==r)t.push(o._);for(o=Object(i["default"])(t),c=0;c<s;++c)t=e[c],t.x-=o.x,t.y-=o.y;return o.r}t["default"]=function(e){return packEnclose(e),e}},"./node_modules/d3-hierarchy/src/partition.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/treemap/round.js"),i=r("./node_modules/d3-hierarchy/src/treemap/dice.js");t["default"]=function(){var e=1,t=1,r=0,o=!1;function partition(i){var s=i.height+1;return i.x0=i.y0=r,i.x1=e,i.y1=t/s,i.eachBefore(positionNode(t,s)),o&&i.eachBefore(n["default"]),i}function positionNode(e,t){return function(n){n.children&&Object(i["default"])(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var o=n.x0,s=n.y0,a=n.x1-r,u=n.y1-r;a<o&&(o=a=(o+a)/2),u<s&&(s=u=(s+u)/2),n.x0=o,n.y0=s,n.x1=a,n.y1=u}}return partition.round=function(e){return arguments.length?(o=!!e,partition):o},partition.size=function(r){return arguments.length?(e=+r[0],t=+r[1],partition):[e,t]},partition.padding=function(e){return arguments.length?(r=+e,partition):r},partition}},"./node_modules/d3-hierarchy/src/stratify.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/accessors.js"),i=r("./node_modules/d3-hierarchy/src/hierarchy/index.js"),o={depth:-1},s={};function defaultId(e){return e.id}function defaultParentId(e){return e.parentId}t["default"]=function(){var e=defaultId,t=defaultParentId;function stratify(r){var n,a,u,c,l,d,h,f=Array.from(r),p=f.length,m=new Map;for(a=0;a<p;++a)n=f[a],l=f[a]=new i["Node"](n),null!=(d=e(n,a,r))&&(d+="")&&(h=l.id=d,m.set(h,m.has(h)?s:l)),null!=(d=t(n,a,r))&&(d+="")&&(l.parent=d);for(a=0;a<p;++a)if(l=f[a],d=l.parent){if(c=m.get(d),!c)throw new Error("missing: "+d);if(c===s)throw new Error("ambiguous: "+d);c.children?c.children.push(l):c.children=[l],l.parent=c}else{if(u)throw new Error("multiple roots");u=l}if(!u)throw new Error("no root");if(u.parent=o,u.eachBefore((function(e){e.depth=e.parent.depth+1,--p})).eachBefore(i["computeHeight"]),u.parent=null,p>0)throw new Error("cycle");return u}return stratify.id=function(t){return arguments.length?(e=Object(n["required"])(t),stratify):e},stratify.parentId=function(e){return arguments.length?(t=Object(n["required"])(e),stratify):t},stratify}},"./node_modules/d3-hierarchy/src/tree.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/hierarchy/index.js");function defaultSeparation(e,t){return e.parent===t.parent?1:2}function nextLeft(e){var t=e.children;return t?t[0]:e.t}function nextRight(e){var t=e.children;return t?t[t.length-1]:e.t}function moveSubtree(e,t,r){var n=r/(t.i-e.i);t.c-=n,t.s+=r,e.c+=n,t.z+=r,t.m+=r}function executeShifts(e){var t,r=0,n=0,i=e.children,o=i.length;while(--o>=0)t=i[o],t.z+=r,t.m+=r,r+=t.s+(n+=t.c)}function nextAncestor(e,t,r){return e.a.parent===t.parent?e.a:r}function TreeNode(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function treeRoot(e){var t,r,n,i,o,s=new TreeNode(e,0),a=[s];while(t=a.pop())if(n=t._.children)for(t.children=new Array(o=n.length),i=o-1;i>=0;--i)a.push(r=t.children[i]=new TreeNode(n[i],i)),r.parent=t;return(s.parent=new TreeNode(null,0)).children=[s],s}TreeNode.prototype=Object.create(n["Node"].prototype),t["default"]=function(){var e=defaultSeparation,t=1,r=1,n=null;function tree(i){var o=treeRoot(i);if(o.eachAfter(firstWalk),o.parent.m=-o.z,o.eachBefore(secondWalk),n)i.eachBefore(sizeNode);else{var s=i,a=i,u=i;i.eachBefore((function(e){e.x<s.x&&(s=e),e.x>a.x&&(a=e),e.depth>u.depth&&(u=e)}));var c=s===a?1:e(s,a)/2,l=c-s.x,d=t/(a.x+c+l),h=r/(u.depth||1);i.eachBefore((function(e){e.x=(e.x+l)*d,e.y=e.depth*h}))}return i}function firstWalk(t){var r=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(r){executeShifts(t);var o=(r[0].z+r[r.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=apportion(t,i,t.parent.A||n[0])}function secondWalk(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function apportion(t,r,n){if(r){var i,o=t,s=t,a=r,u=o.parent.children[0],c=o.m,l=s.m,d=a.m,h=u.m;while(a=nextRight(a),o=nextLeft(o),a&&o)u=nextLeft(u),s=nextRight(s),s.a=t,i=a.z+d-o.z-c+e(a._,o._),i>0&&(moveSubtree(nextAncestor(a,t,n),t,i),c+=i,l+=i),d+=a.m,c+=o.m,h+=u.m,l+=s.m;a&&!nextRight(s)&&(s.t=a,s.m+=d-l),o&&!nextLeft(u)&&(u.t=o,u.m+=c-h,n=t)}return n}function sizeNode(e){e.x*=t,e.y=e.depth*r}return tree.separation=function(t){return arguments.length?(e=t,tree):e},tree.size=function(e){return arguments.length?(n=!1,t=+e[0],r=+e[1],tree):n?null:[t,r]},tree.nodeSize=function(e){return arguments.length?(n=!0,t=+e[0],r=+e[1],tree):n?[t,r]:null},tree}},"./node_modules/d3-hierarchy/src/treemap/binary.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r,n,i){var o,s,a=e.children,u=a.length,c=new Array(u+1);for(c[0]=s=o=0;o<u;++o)c[o+1]=s+=a[o].value;function partition(e,t,r,n,i,o,s){if(e>=t-1){var u=a[e];return u.x0=n,u.y0=i,u.x1=o,void(u.y1=s)}var l=c[e],d=r/2+l,h=e+1,f=t-1;while(h<f){var p=h+f>>>1;c[p]<d?h=p+1:f=p}d-c[h-1]<c[h]-d&&e+1<h&&--h;var m=c[h]-l,_=r-m;if(o-n>s-i){var g=r?(n*_+o*m)/r:o;partition(e,h,m,n,i,g,s),partition(h,t,_,g,i,o,s)}else{var b=r?(i*_+s*m)/r:s;partition(e,h,m,n,i,o,b),partition(h,t,_,n,b,o,s)}}partition(0,u,e.value,t,r,n,i)}},"./node_modules/d3-hierarchy/src/treemap/dice.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r,n,i){var o,s=e.children,a=-1,u=s.length,c=e.value&&(n-t)/e.value;while(++a<u)o=s[a],o.y0=r,o.y1=i,o.x0=t,o.x1=t+=o.value*c}},"./node_modules/d3-hierarchy/src/treemap/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/treemap/round.js"),i=r("./node_modules/d3-hierarchy/src/treemap/squarify.js"),o=r("./node_modules/d3-hierarchy/src/accessors.js"),s=r("./node_modules/d3-hierarchy/src/constant.js");t["default"]=function(){var e=i["default"],t=!1,r=1,a=1,u=[0],c=s["constantZero"],l=s["constantZero"],d=s["constantZero"],h=s["constantZero"],f=s["constantZero"];function treemap(e){return e.x0=e.y0=0,e.x1=r,e.y1=a,e.eachBefore(positionNode),u=[0],t&&e.eachBefore(n["default"]),e}function positionNode(t){var r=u[t.depth],n=t.x0+r,i=t.y0+r,o=t.x1-r,s=t.y1-r;o<n&&(n=o=(n+o)/2),s<i&&(i=s=(i+s)/2),t.x0=n,t.y0=i,t.x1=o,t.y1=s,t.children&&(r=u[t.depth+1]=c(t)/2,n+=f(t)-r,i+=l(t)-r,o-=d(t)-r,s-=h(t)-r,o<n&&(n=o=(n+o)/2),s<i&&(i=s=(i+s)/2),e(t,n,i,o,s))}return treemap.round=function(e){return arguments.length?(t=!!e,treemap):t},treemap.size=function(e){return arguments.length?(r=+e[0],a=+e[1],treemap):[r,a]},treemap.tile=function(t){return arguments.length?(e=Object(o["required"])(t),treemap):e},treemap.padding=function(e){return arguments.length?treemap.paddingInner(e).paddingOuter(e):treemap.paddingInner()},treemap.paddingInner=function(e){return arguments.length?(c="function"===typeof e?e:Object(s["default"])(+e),treemap):c},treemap.paddingOuter=function(e){return arguments.length?treemap.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):treemap.paddingTop()},treemap.paddingTop=function(e){return arguments.length?(l="function"===typeof e?e:Object(s["default"])(+e),treemap):l},treemap.paddingRight=function(e){return arguments.length?(d="function"===typeof e?e:Object(s["default"])(+e),treemap):d},treemap.paddingBottom=function(e){return arguments.length?(h="function"===typeof e?e:Object(s["default"])(+e),treemap):h},treemap.paddingLeft=function(e){return arguments.length?(f="function"===typeof e?e:Object(s["default"])(+e),treemap):f},treemap}},"./node_modules/d3-hierarchy/src/treemap/resquarify.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/treemap/dice.js"),i=r("./node_modules/d3-hierarchy/src/treemap/slice.js"),o=r("./node_modules/d3-hierarchy/src/treemap/squarify.js");t["default"]=function custom(e){function resquarify(t,r,s,a,u){if((c=t._squarify)&&c.ratio===e){var c,l,d,h,f,p=-1,m=c.length,_=t.value;while(++p<m){for(l=c[p],d=l.children,h=l.value=0,f=d.length;h<f;++h)l.value+=d[h].value;l.dice?Object(n["default"])(l,r,s,a,_?s+=(u-s)*l.value/_:u):Object(i["default"])(l,r,s,_?r+=(a-r)*l.value/_:a,u),_-=l.value}}else t._squarify=c=Object(o["squarifyRatio"])(e,t,r,s,a,u),c.ratio=e}return resquarify.ratio=function(e){return custom((e=+e)>1?e:1)},resquarify}(o["phi"])},"./node_modules/d3-hierarchy/src/treemap/round.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}},"./node_modules/d3-hierarchy/src/treemap/slice.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r,n,i){var o,s=e.children,a=-1,u=s.length,c=e.value&&(i-r)/e.value;while(++a<u)o=s[a],o.x0=t,o.x1=n,o.y0=r,o.y1=r+=o.value*c}},"./node_modules/d3-hierarchy/src/treemap/sliceDice.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-hierarchy/src/treemap/dice.js"),i=r("./node_modules/d3-hierarchy/src/treemap/slice.js");t["default"]=function(e,t,r,o,s){(1&e.depth?i["default"]:n["default"])(e,t,r,o,s)}},"./node_modules/d3-hierarchy/src/treemap/squarify.js":function(e,t,r){"use strict";r.r(t),r.d(t,"phi",(function(){return o})),r.d(t,"squarifyRatio",(function(){return squarifyRatio}));var n=r("./node_modules/d3-hierarchy/src/treemap/dice.js"),i=r("./node_modules/d3-hierarchy/src/treemap/slice.js"),o=(1+Math.sqrt(5))/2;function squarifyRatio(e,t,r,o,s,a){var u,c,l,d,h,f,p,m,_,g,b,v=[],M=t.children,T=0,S=0,C=M.length,E=t.value;while(T<C){l=s-r,d=a-o;do{h=M[S++].value}while(!h&&S<C);for(f=p=h,g=Math.max(d/l,l/d)/(E*e),b=h*h*g,_=Math.max(p/b,b/f);S<C;++S){if(h+=c=M[S].value,c<f&&(f=c),c>p&&(p=c),b=h*h*g,m=Math.max(p/b,b/f),m>_){h-=c;break}_=m}v.push(u={value:h,dice:l<d,children:M.slice(T,S)}),u.dice?Object(n["default"])(u,r,o,s,E?o+=d*h/E:a):Object(i["default"])(u,r,o,E?r+=l*h/E:s,a),E-=h,T=S}return v}t["default"]=function custom(e){function squarify(t,r,n,i,o){squarifyRatio(e,t,r,n,i,o)}return squarify.ratio=function(e){return custom((e=+e)>1?e:1)},squarify}(o)},"./node_modules/d3-interpolate/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"genericArray",(function(){return genericArray}));var n=r("./node_modules/d3-interpolate/src/value.js"),i=r("./node_modules/d3-interpolate/src/numberArray.js");function genericArray(e,t){var r,i=t?t.length:0,o=e?Math.min(i,e.length):0,s=new Array(o),a=new Array(i);for(r=0;r<o;++r)s[r]=Object(n["default"])(e[r],t[r]);for(;r<i;++r)a[r]=t[r];return function(e){for(r=0;r<o;++r)a[r]=s[r](e);return a}}t["default"]=function(e,t){return(Object(i["isNumberArray"])(t)?i["default"]:genericArray)(e,t)}},"./node_modules/d3-interpolate/src/basis.js":function(e,t,r){"use strict";function basis(e,t,r,n,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*r+(1+3*e+3*o-3*s)*n+s*i)/6}r.r(t),r.d(t,"basis",(function(){return basis})),t["default"]=function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],o=e[n+1],s=n>0?e[n-1]:2*i-o,a=n<t-1?e[n+2]:2*o-i;return basis((r-n/t)*t,s,i,o,a)}}},"./node_modules/d3-interpolate/src/basisClosed.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/basis.js");t["default"]=function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),o=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],u=e[(i+2)%t];return Object(n["basis"])((r-i/t)*t,o,s,a,u)}}},"./node_modules/d3-interpolate/src/color.js":function(e,t,r){"use strict";r.r(t),r.d(t,"hue",(function(){return hue})),r.d(t,"gamma",(function(){return gamma})),r.d(t,"default",(function(){return nogamma}));var n=r("./node_modules/d3-interpolate/src/constant.js");function linear(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hue(e,t){var r=t-e;return r?linear(e,r>180||r<-180?r-360*Math.round(r/360):r):Object(n["default"])(isNaN(e)?t:e)}function gamma(e){return 1===(e=+e)?nogamma:function(t,r){return r-t?exponential(t,r,e):Object(n["default"])(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear(e,r):Object(n["default"])(isNaN(e)?t:e)}},"./node_modules/d3-interpolate/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>()=>e},"./node_modules/d3-interpolate/src/cubehelix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"cubehelixLong",(function(){return o}));var n=r("./node_modules/d3-color/src/cubehelix.js"),i=r("./node_modules/d3-interpolate/src/color.js");function cubehelix(e){return function cubehelixGamma(t){function cubehelix(r,o){var s=e((r=Object(n["default"])(r)).h,(o=Object(n["default"])(o)).h),a=Object(i["default"])(r.s,o.s),u=Object(i["default"])(r.l,o.l),c=Object(i["default"])(r.opacity,o.opacity);return function(e){return r.h=s(e),r.s=a(e),r.l=u(Math.pow(e,t)),r.opacity=c(e),r+""}}return t=+t,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}t["default"]=cubehelix(i["hue"]);var o=cubehelix(i["default"])},"./node_modules/d3-interpolate/src/date.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}},"./node_modules/d3-interpolate/src/discrete.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}},"./node_modules/d3-interpolate/src/hcl.js":function(e,t,r){"use strict";r.r(t),r.d(t,"hclLong",(function(){return o}));var n=r("./node_modules/d3-color/src/lab.js"),i=r("./node_modules/d3-interpolate/src/color.js");function hcl(e){return function(t,r){var o=e((t=Object(n["hcl"])(t)).h,(r=Object(n["hcl"])(r)).h),s=Object(i["default"])(t.c,r.c),a=Object(i["default"])(t.l,r.l),u=Object(i["default"])(t.opacity,r.opacity);return function(e){return t.h=o(e),t.c=s(e),t.l=a(e),t.opacity=u(e),t+""}}}t["default"]=hcl(i["hue"]);var o=hcl(i["default"])},"./node_modules/d3-interpolate/src/hsl.js":function(e,t,r){"use strict";r.r(t),r.d(t,"hslLong",(function(){return o}));var n=r("./node_modules/d3-color/src/color.js"),i=r("./node_modules/d3-interpolate/src/color.js");function hsl(e){return function(t,r){var o=e((t=Object(n["hsl"])(t)).h,(r=Object(n["hsl"])(r)).h),s=Object(i["default"])(t.s,r.s),a=Object(i["default"])(t.l,r.l),u=Object(i["default"])(t.opacity,r.opacity);return function(e){return t.h=o(e),t.s=s(e),t.l=a(e),t.opacity=u(e),t+""}}}t["default"]=hsl(i["hue"]);var o=hsl(i["default"])},"./node_modules/d3-interpolate/src/hue.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/color.js");t["default"]=function(e,t){var r=Object(n["hue"])(+e,+t);return function(e){var t=r(e);return t-360*Math.floor(t/360)}}},"./node_modules/d3-interpolate/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/value.js");r.d(t,"interpolate",(function(){return n["default"]}));var i=r("./node_modules/d3-interpolate/src/array.js");r.d(t,"interpolateArray",(function(){return i["default"]}));var o=r("./node_modules/d3-interpolate/src/basis.js");r.d(t,"interpolateBasis",(function(){return o["default"]}));var s=r("./node_modules/d3-interpolate/src/basisClosed.js");r.d(t,"interpolateBasisClosed",(function(){return s["default"]}));var a=r("./node_modules/d3-interpolate/src/date.js");r.d(t,"interpolateDate",(function(){return a["default"]}));var u=r("./node_modules/d3-interpolate/src/discrete.js");r.d(t,"interpolateDiscrete",(function(){return u["default"]}));var c=r("./node_modules/d3-interpolate/src/hue.js");r.d(t,"interpolateHue",(function(){return c["default"]}));var l=r("./node_modules/d3-interpolate/src/number.js");r.d(t,"interpolateNumber",(function(){return l["default"]}));var d=r("./node_modules/d3-interpolate/src/numberArray.js");r.d(t,"interpolateNumberArray",(function(){return d["default"]}));var h=r("./node_modules/d3-interpolate/src/object.js");r.d(t,"interpolateObject",(function(){return h["default"]}));var f=r("./node_modules/d3-interpolate/src/round.js");r.d(t,"interpolateRound",(function(){return f["default"]}));var p=r("./node_modules/d3-interpolate/src/string.js");r.d(t,"interpolateString",(function(){return p["default"]}));var m=r("./node_modules/d3-interpolate/src/transform/index.js");r.d(t,"interpolateTransformCss",(function(){return m["interpolateTransformCss"]})),r.d(t,"interpolateTransformSvg",(function(){return m["interpolateTransformSvg"]}));var _=r("./node_modules/d3-interpolate/src/zoom.js");r.d(t,"interpolateZoom",(function(){return _["default"]}));var g=r("./node_modules/d3-interpolate/src/rgb.js");r.d(t,"interpolateRgb",(function(){return g["default"]})),r.d(t,"interpolateRgbBasis",(function(){return g["rgbBasis"]})),r.d(t,"interpolateRgbBasisClosed",(function(){return g["rgbBasisClosed"]}));var b=r("./node_modules/d3-interpolate/src/hsl.js");r.d(t,"interpolateHsl",(function(){return b["default"]})),r.d(t,"interpolateHslLong",(function(){return b["hslLong"]}));var v=r("./node_modules/d3-interpolate/src/lab.js");r.d(t,"interpolateLab",(function(){return v["default"]}));var M=r("./node_modules/d3-interpolate/src/hcl.js");r.d(t,"interpolateHcl",(function(){return M["default"]})),r.d(t,"interpolateHclLong",(function(){return M["hclLong"]}));var T=r("./node_modules/d3-interpolate/src/cubehelix.js");r.d(t,"interpolateCubehelix",(function(){return T["default"]})),r.d(t,"interpolateCubehelixLong",(function(){return T["cubehelixLong"]}));var S=r("./node_modules/d3-interpolate/src/piecewise.js");r.d(t,"piecewise",(function(){return S["default"]}));var C=r("./node_modules/d3-interpolate/src/quantize.js");r.d(t,"quantize",(function(){return C["default"]}))},"./node_modules/d3-interpolate/src/lab.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return lab}));var n=r("./node_modules/d3-color/src/lab.js"),i=r("./node_modules/d3-interpolate/src/color.js");function lab(e,t){var r=Object(i["default"])((e=Object(n["default"])(e)).l,(t=Object(n["default"])(t)).l),o=Object(i["default"])(e.a,t.a),s=Object(i["default"])(e.b,t.b),a=Object(i["default"])(e.opacity,t.opacity);return function(t){return e.l=r(t),e.a=o(t),e.b=s(t),e.opacity=a(t),e+""}}},"./node_modules/d3-interpolate/src/number.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}},"./node_modules/d3-interpolate/src/numberArray.js":function(e,t,r){"use strict";function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}r.r(t),r.d(t,"isNumberArray",(function(){return isNumberArray})),t["default"]=function(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}},"./node_modules/d3-interpolate/src/object.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/value.js");t["default"]=function(e,t){var r,i={},o={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?i[r]=Object(n["default"])(e[r],t[r]):o[r]=t[r];return function(e){for(r in i)o[r]=i[r](e);return o}}},"./node_modules/d3-interpolate/src/piecewise.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return piecewise}));var n=r("./node_modules/d3-interpolate/src/value.js");function piecewise(e,t){void 0===t&&(t=e,e=n["default"]);var r=0,i=t.length-1,o=t[0],s=new Array(i<0?0:i);while(r<i)s[r]=e(o,o=t[++r]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return s[t](e-t)}}},"./node_modules/d3-interpolate/src/quantize.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r}},"./node_modules/d3-interpolate/src/rgb.js":function(e,t,r){"use strict";r.r(t),r.d(t,"rgbBasis",(function(){return a})),r.d(t,"rgbBasisClosed",(function(){return u}));var n=r("./node_modules/d3-color/src/color.js"),i=r("./node_modules/d3-interpolate/src/basis.js"),o=r("./node_modules/d3-interpolate/src/basisClosed.js"),s=r("./node_modules/d3-interpolate/src/color.js");function rgbSpline(e){return function(t){var r,i,o=t.length,s=new Array(o),a=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=Object(n["rgb"])(t[r]),s[r]=i.r||0,a[r]=i.g||0,u[r]=i.b||0;return s=e(s),a=e(a),u=e(u),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=u(e),i+""}}}t["default"]=function rgbGamma(e){var t=Object(s["gamma"])(e);function rgb(e,r){var i=t((e=Object(n["rgb"])(e)).r,(r=Object(n["rgb"])(r)).r),o=t(e.g,r.g),a=t(e.b,r.b),u=Object(s["default"])(e.opacity,r.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e.opacity=u(t),e+""}}return rgb.gamma=rgbGamma,rgb}(1);var a=rgbSpline(i["default"]),u=rgbSpline(o["default"])},"./node_modules/d3-interpolate/src/round.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}},"./node_modules/d3-interpolate/src/string.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/number.js"),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}t["default"]=function(e,t){var r,s,a,u=i.lastIndex=o.lastIndex=0,c=-1,l=[],d=[];e+="",t+="";while((r=i.exec(e))&&(s=o.exec(t)))(a=s.index)>u&&(a=t.slice(u,a),l[c]?l[c]+=a:l[++c]=a),(r=r[0])===(s=s[0])?l[c]?l[c]+=s:l[++c]=s:(l[++c]=null,d.push({i:c,x:Object(n["default"])(r,s)})),u=o.lastIndex;return u<t.length&&(a=t.slice(u),l[c]?l[c]+=a:l[++c]=a),l.length<2?d[0]?one(d[0].x):zero(t):(t=d.length,function(e){for(var r,n=0;n<t;++n)l[(r=d[n]).i]=r.x(e);return l.join("")})}},"./node_modules/d3-interpolate/src/transform/decompose.js":function(e,t,r){"use strict";r.r(t),r.d(t,"identity",(function(){return i}));var n=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};t["default"]=function(e,t,r,i,o,s){var a,u,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*r+t*i)&&(r-=e*c,i-=t*c),(u=Math.sqrt(r*r+i*i))&&(r/=u,i/=u,c/=u),e*i<t*r&&(e=-e,t=-t,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*n,skewX:Math.atan(c)*n,scaleX:a,scaleY:u}}},"./node_modules/d3-interpolate/src/transform/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"interpolateTransformCss",(function(){return o})),r.d(t,"interpolateTransformSvg",(function(){return s}));var n=r("./node_modules/d3-interpolate/src/number.js"),i=r("./node_modules/d3-interpolate/src/transform/parse.js");function interpolateTransform(e,t,r,i){function pop(e){return e.length?e.pop()+" ":""}function translate(e,i,o,s,a,u){if(e!==o||i!==s){var c=a.push("translate(",null,t,null,r);u.push({i:c-4,x:Object(n["default"])(e,o)},{i:c-2,x:Object(n["default"])(i,s)})}else(o||s)&&a.push("translate("+o+t+s+r)}function rotate(e,t,r,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:r.push(pop(r)+"rotate(",null,i)-2,x:Object(n["default"])(e,t)})):t&&r.push(pop(r)+"rotate("+t+i)}function skewX(e,t,r,o){e!==t?o.push({i:r.push(pop(r)+"skewX(",null,i)-2,x:Object(n["default"])(e,t)}):t&&r.push(pop(r)+"skewX("+t+i)}function scale(e,t,r,i,o,s){if(e!==r||t!==i){var a=o.push(pop(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Object(n["default"])(e,r)},{i:a-2,x:Object(n["default"])(t,i)})}else 1===r&&1===i||o.push(pop(o)+"scale("+r+","+i+")")}return function(t,r){var n=[],i=[];return t=e(t),r=e(r),translate(t.translateX,t.translateY,r.translateX,r.translateY,n,i),rotate(t.rotate,r.rotate,n,i),skewX(t.skewX,r.skewX,n,i),scale(t.scaleX,t.scaleY,r.scaleX,r.scaleY,n,i),t=r=null,function(e){var t,r=-1,o=i.length;while(++r<o)n[(t=i[r]).i]=t.x(e);return n.join("")}}}var o=interpolateTransform(i["parseCss"],"px, ","px)","deg)"),s=interpolateTransform(i["parseSvg"],", ",")",")")},"./node_modules/d3-interpolate/src/transform/parse.js":function(e,t,r){"use strict";r.r(t),r.d(t,"parseCss",(function(){return parseCss})),r.d(t,"parseSvg",(function(){return parseSvg}));var n,i=r("./node_modules/d3-interpolate/src/transform/decompose.js");function parseCss(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?i["identity"]:Object(i["default"])(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(e){return null==e?i["identity"]:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,Object(i["default"])(e.a,e.b,e.c,e.d,e.e,e.f)):i["identity"])}},"./node_modules/d3-interpolate/src/value.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-color/src/color.js"),i=r("./node_modules/d3-interpolate/src/rgb.js"),o=r("./node_modules/d3-interpolate/src/array.js"),s=r("./node_modules/d3-interpolate/src/date.js"),a=r("./node_modules/d3-interpolate/src/number.js"),u=r("./node_modules/d3-interpolate/src/object.js"),c=r("./node_modules/d3-interpolate/src/string.js"),l=r("./node_modules/d3-interpolate/src/constant.js"),d=r("./node_modules/d3-interpolate/src/numberArray.js");t["default"]=function(e,t){var r,h=typeof t;return null==t||"boolean"===h?Object(l["default"])(t):("number"===h?a["default"]:"string"===h?(r=Object(n["default"])(t))?(t=r,i["default"]):c["default"]:t instanceof n["default"]?i["default"]:t instanceof Date?s["default"]:Object(d["isNumberArray"])(t)?d["default"]:Array.isArray(t)?o["genericArray"]:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?u["default"]:a["default"])(e,t)}},"./node_modules/d3-interpolate/src/zoom.js":function(e,t,r){"use strict";r.r(t);var n=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}t["default"]=function zoomRho(e,t,r){function zoom(i,o){var s,a,u=i[0],c=i[1],l=i[2],d=o[0],h=o[1],f=o[2],p=d-u,m=h-c,_=p*p+m*m;if(_<n)a=Math.log(f/l)/e,s=function(t){return[u+t*p,c+t*m,l*Math.exp(e*t*a)]};else{var g=Math.sqrt(_),b=(f*f-l*l+r*_)/(2*l*t*g),v=(f*f-l*l-r*_)/(2*f*t*g),M=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(v*v+1)-v);a=(T-M)/e,s=function(r){var n=r*a,i=cosh(M),o=l/(t*g)*(i*tanh(e*n+M)-sinh(M));return[u+o*p,c+o*m,l*i/cosh(e*n+M)]}}return s.duration=1e3*a*e/Math.SQRT2,s}return zoom.rho=function(e){var t=Math.max(.001,+e),r=t*t,n=r*r;return zoomRho(t,r,n)},zoom}(Math.SQRT2,2,4)},"./node_modules/d3-path/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-path/src/path.js");r.d(t,"path",(function(){return n["default"]}))},"./node_modules/d3-path/src/path.js":function(e,t,r){"use strict";r.r(t);const n=Math.PI,i=2*n,o=1e-6,s=i-o;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(e,t,r,n,i,o){this._+="C"+ +e+","+ +t+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,r,i,s){e=+e,t=+t,r=+r,i=+i,s=+s;var a=this._x1,u=this._y1,c=r-e,l=i-t,d=a-e,h=u-t,f=d*d+h*h;if(s<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>o)if(Math.abs(h*c-l*d)>o&&s){var p=r-a,m=i-u,_=c*c+l*l,g=p*p+m*m,b=Math.sqrt(_),v=Math.sqrt(f),M=s*Math.tan((n-Math.acos((_+f-g)/(2*b*v)))/2),T=M/v,S=M/b;Math.abs(T-1)>o&&(this._+="L"+(e+T*d)+","+(t+T*h)),this._+="A"+s+","+s+",0,0,"+ +(h*p>d*m)+","+(this._x1=e+S*c)+","+(this._y1=t+S*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,r,a,u,c){e=+e,t=+t,r=+r,c=!!c;var l=r*Math.cos(a),d=r*Math.sin(a),h=e+l,f=t+d,p=1^c,m=c?a-u:u-a;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>o||Math.abs(this._y1-f)>o)&&(this._+="L"+h+","+f),r&&(m<0&&(m=m%i+i),m>s?this._+="A"+r+","+r+",0,1,"+p+","+(e-l)+","+(t-d)+"A"+r+","+r+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):m>o&&(this._+="A"+r+","+r+",0,"+ +(m>=n)+","+p+","+(this._x1=e+r*Math.cos(u))+","+(this._y1=t+r*Math.sin(u))))},rect:function(e,t,r,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}},t["default"]=path},"./node_modules/d3-polygon/src/area.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t,r=-1,n=e.length,i=e[n-1],o=0;while(++r<n)t=i,i=e[r],o+=t[1]*i[0]-t[0]*i[1];return o/2}},"./node_modules/d3-polygon/src/centroid.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t,r,n=-1,i=e.length,o=0,s=0,a=e[i-1],u=0;while(++n<i)t=a,a=e[n],u+=r=t[0]*a[1]-a[0]*t[1],o+=(t[0]+a[0])*r,s+=(t[1]+a[1])*r;return u*=3,[o/u,s/u]}},"./node_modules/d3-polygon/src/contains.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){for(var r,n,i=e.length,o=e[i-1],s=t[0],a=t[1],u=o[0],c=o[1],l=!1,d=0;d<i;++d)o=e[d],r=o[0],n=o[1],n>a!==c>a&&s<(u-r)*(a-n)/(c-n)+r&&(l=!l),u=r,c=n;return l}},"./node_modules/d3-polygon/src/cross.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}},"./node_modules/d3-polygon/src/hull.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-polygon/src/cross.js");function lexicographicOrder(e,t){return e[0]-t[0]||e[1]-t[1]}function computeUpperHullIndexes(e){const t=e.length,r=[0,1];let i,o=2;for(i=2;i<t;++i){while(o>1&&Object(n["default"])(e[r[o-2]],e[r[o-1]],e[i])<=0)--o;r[o++]=i}return r.slice(0,o)}t["default"]=function(e){if((r=e.length)<3)return null;var t,r,n=new Array(r),i=new Array(r);for(t=0;t<r;++t)n[t]=[+e[t][0],+e[t][1],t];for(n.sort(lexicographicOrder),t=0;t<r;++t)i[t]=[n[t][0],-n[t][1]];var o=computeUpperHullIndexes(n),s=computeUpperHullIndexes(i),a=s[0]===o[0],u=s[s.length-1]===o[o.length-1],c=[];for(t=o.length-1;t>=0;--t)c.push(e[n[o[t]][2]]);for(t=+a;t<s.length-u;++t)c.push(e[n[s[t]][2]]);return c}},"./node_modules/d3-polygon/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-polygon/src/area.js");r.d(t,"polygonArea",(function(){return n["default"]}));var i=r("./node_modules/d3-polygon/src/centroid.js");r.d(t,"polygonCentroid",(function(){return i["default"]}));var o=r("./node_modules/d3-polygon/src/hull.js");r.d(t,"polygonHull",(function(){return o["default"]}));var s=r("./node_modules/d3-polygon/src/contains.js");r.d(t,"polygonContains",(function(){return s["default"]}));var a=r("./node_modules/d3-polygon/src/length.js");r.d(t,"polygonLength",(function(){return a["default"]}))},"./node_modules/d3-polygon/src/length.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t,r,n=-1,i=e.length,o=e[i-1],s=o[0],a=o[1],u=0;while(++n<i)t=s,r=a,o=e[n],s=o[0],a=o[1],t-=s,r-=a,u+=Math.hypot(t,r);return u}},"./node_modules/d3-quadtree/src/add.js":function(e,t,r){"use strict";function add(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var i,o,s,a,u,c,l,d,h,f=e._root,p={data:n},m=e._x0,_=e._y0,g=e._x1,b=e._y1;if(!f)return e._root=p,e;while(f.length)if((c=t>=(o=(m+g)/2))?m=o:g=o,(l=r>=(s=(_+b)/2))?_=s:b=s,i=f,!(f=f[d=l<<1|c]))return i[d]=p,e;if(a=+e._x.call(null,f.data),u=+e._y.call(null,f.data),t===a&&r===u)return p.next=f,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+g)/2))?m=o:g=o,(l=r>=(s=(_+b)/2))?_=s:b=s}while((d=l<<1|c)===(h=(u>=s)<<1|a>=o));return i[h]=f,i[d]=p,e}function addAll(e){var t,r,n,i,o=e.length,s=new Array(o),a=new Array(o),u=1/0,c=1/0,l=-1/0,d=-1/0;for(r=0;r<o;++r)isNaN(n=+this._x.call(null,t=e[r]))||isNaN(i=+this._y.call(null,t))||(s[r]=n,a[r]=i,n<u&&(u=n),n>l&&(l=n),i<c&&(c=i),i>d&&(d=i));if(u>l||c>d)return this;for(this.cover(u,c).cover(l,d),r=0;r<o;++r)add(this,s[r],a[r],e[r]);return this}r.r(t),r.d(t,"addAll",(function(){return addAll})),t["default"]=function(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return add(this.cover(t,r),t,r,e)}},"./node_modules/d3-quadtree/src/cover.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(e))+1,o=(n=Math.floor(t))+1;else{var s,a,u=i-r||1,c=this._root;while(r>e||e>=i||n>t||t>=o)switch(a=(t<n)<<1|e<r,s=new Array(4),s[a]=c,c=s,u*=2,a){case 0:i=r+u,o=n+u;break;case 1:r=i-u,o=n+u;break;case 2:i=r+u,n=o-u;break;case 3:r=i-u,n=o-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=n,this._x1=i,this._y1=o,this}},"./node_modules/d3-quadtree/src/data.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}},"./node_modules/d3-quadtree/src/extent.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},"./node_modules/d3-quadtree/src/find.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quad.js");t["default"]=function(e,t,r){var i,o,s,a,u,c,l,d=this._x0,h=this._y0,f=this._x1,p=this._y1,m=[],_=this._root;_&&m.push(new n["default"](_,d,h,f,p)),null==r?r=1/0:(d=e-r,h=t-r,f=e+r,p=t+r,r*=r);while(c=m.pop())if(!(!(_=c.node)||(o=c.x0)>f||(s=c.y0)>p||(a=c.x1)<d||(u=c.y1)<h))if(_.length){var g=(o+a)/2,b=(s+u)/2;m.push(new n["default"](_[3],g,b,a,u),new n["default"](_[2],o,b,g,u),new n["default"](_[1],g,s,a,b),new n["default"](_[0],o,s,g,b)),(l=(t>=b)<<1|e>=g)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-l],m[m.length-1-l]=c)}else{var v=e-+this._x.call(null,_.data),M=t-+this._y.call(null,_.data),T=v*v+M*M;if(T<r){var S=Math.sqrt(r=T);d=e-S,h=t-S,f=e+S,p=t+S,i=_.data}}return i}},"./node_modules/d3-quadtree/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quadtree.js");r.d(t,"quadtree",(function(){return n["default"]}))},"./node_modules/d3-quadtree/src/quad.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r,n,i){this.node=e,this.x0=t,this.y0=r,this.x1=n,this.y1=i}},"./node_modules/d3-quadtree/src/quadtree.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return quadtree}));var n=r("./node_modules/d3-quadtree/src/add.js"),i=r("./node_modules/d3-quadtree/src/cover.js"),o=r("./node_modules/d3-quadtree/src/data.js"),s=r("./node_modules/d3-quadtree/src/extent.js"),a=r("./node_modules/d3-quadtree/src/find.js"),u=r("./node_modules/d3-quadtree/src/remove.js"),c=r("./node_modules/d3-quadtree/src/root.js"),l=r("./node_modules/d3-quadtree/src/size.js"),d=r("./node_modules/d3-quadtree/src/visit.js"),h=r("./node_modules/d3-quadtree/src/visitAfter.js"),f=r("./node_modules/d3-quadtree/src/x.js"),p=r("./node_modules/d3-quadtree/src/y.js");function quadtree(e,t,r){var n=new Quadtree(null==t?f["defaultX"]:t,null==r?p["defaultY"]:r,NaN,NaN,NaN,NaN);return null==e?n:n.addAll(e)}function Quadtree(e,t,r,n,i,o){this._x=e,this._y=t,this._x0=r,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){var t={data:e.data},r=t;while(e=e.next)r=r.next={data:e.data};return t}var m=quadtree.prototype=Quadtree.prototype;m.copy=function(){var e,t,r=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=leaf_copy(n),r;e=[{source:n,target:r._root=new Array(4)}];while(n=e.pop())for(var i=0;i<4;++i)(t=n.source[i])&&(t.length?e.push({source:t,target:n.target[i]=new Array(4)}):n.target[i]=leaf_copy(t));return r},m.add=n["default"],m.addAll=n["addAll"],m.cover=i["default"],m.data=o["default"],m.extent=s["default"],m.find=a["default"],m.remove=u["default"],m.removeAll=u["removeAll"],m.root=c["default"],m.size=l["default"],m.visit=d["default"],m.visitAfter=h["default"],m.x=f["default"],m.y=p["default"]},"./node_modules/d3-quadtree/src/remove.js":function(e,t,r){"use strict";function removeAll(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}r.r(t),r.d(t,"removeAll",(function(){return removeAll})),t["default"]=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,r,n,i,o,s,a,u,c,l,d,h,f=this._root,p=this._x0,m=this._y0,_=this._x1,g=this._y1;if(!f)return this;if(f.length)while(1){if((c=o>=(a=(p+_)/2))?p=a:_=a,(l=s>=(u=(m+g)/2))?m=u:g=u,t=f,!(f=f[d=l<<1|c]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(r=t,h=d)}while(f.data!==e)if(n=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,n?(i?n.next=i:delete n.next,this):t?(i?t[d]=i:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(r?r[h]=f:this._root=f),this):(this._root=i,this)}},"./node_modules/d3-quadtree/src/root.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){return this._root}},"./node_modules/d3-quadtree/src/size.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}},"./node_modules/d3-quadtree/src/visit.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quad.js");t["default"]=function(e){var t,r,i,o,s,a,u=[],c=this._root;c&&u.push(new n["default"](c,this._x0,this._y0,this._x1,this._y1));while(t=u.pop())if(!e(c=t.node,i=t.x0,o=t.y0,s=t.x1,a=t.y1)&&c.length){var l=(i+s)/2,d=(o+a)/2;(r=c[3])&&u.push(new n["default"](r,l,d,s,a)),(r=c[2])&&u.push(new n["default"](r,i,d,l,a)),(r=c[1])&&u.push(new n["default"](r,l,o,s,d)),(r=c[0])&&u.push(new n["default"](r,i,o,l,d))}return this}},"./node_modules/d3-quadtree/src/visitAfter.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-quadtree/src/quad.js");t["default"]=function(e){var t,r=[],i=[];this._root&&r.push(new n["default"](this._root,this._x0,this._y0,this._x1,this._y1));while(t=r.pop()){var o=t.node;if(o.length){var s,a=t.x0,u=t.y0,c=t.x1,l=t.y1,d=(a+c)/2,h=(u+l)/2;(s=o[0])&&r.push(new n["default"](s,a,u,d,h)),(s=o[1])&&r.push(new n["default"](s,d,u,c,h)),(s=o[2])&&r.push(new n["default"](s,a,h,d,l)),(s=o[3])&&r.push(new n["default"](s,d,h,c,l))}i.push(t)}while(t=i.pop())e(t.node,t.x0,t.y0,t.x1,t.y1);return this}},"./node_modules/d3-quadtree/src/x.js":function(e,t,r){"use strict";function defaultX(e){return e[0]}r.r(t),r.d(t,"defaultX",(function(){return defaultX})),t["default"]=function(e){return arguments.length?(this._x=e,this):this._x}},"./node_modules/d3-quadtree/src/y.js":function(e,t,r){"use strict";function defaultY(e){return e[1]}r.r(t),r.d(t,"defaultY",(function(){return defaultY})),t["default"]=function(e){return arguments.length?(this._y=e,this):this._y}},"./node_modules/d3-random/src/bates.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/irwinHall.js");t["default"]=function sourceRandomBates(e){var t=i["default"].source(e);function randomBates(r){if(0===(r=+r))return e;var n=t(r);return function(){return n()/r}}return randomBates.source=sourceRandomBates,randomBates}(n["default"])},"./node_modules/d3-random/src/bernoulli.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomBernoulli(e){function randomBernoulli(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return randomBernoulli.source=sourceRandomBernoulli,randomBernoulli}(n["default"])},"./node_modules/d3-random/src/beta.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/gamma.js");t["default"]=function sourceRandomBeta(e){var t=i["default"].source(e);function randomBeta(e,r){var n=t(e),i=t(r);return function(){var e=n();return 0===e?0:e/(e+i())}}return randomBeta.source=sourceRandomBeta,randomBeta}(n["default"])},"./node_modules/d3-random/src/binomial.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/beta.js"),o=r("./node_modules/d3-random/src/geometric.js");t["default"]=function sourceRandomBinomial(e){var t=o["default"].source(e),r=i["default"].source(e);function randomBinomial(e,n){return e=+e,(n=+n)>=1?()=>e:n<=0?()=>0:function(){var i=0,o=e,s=n;while(o*s>16&&o*(1-s)>16){var a=Math.floor((o+1)*s),u=r(a,o-a+1)();u<=s?(i+=a,o-=a,s=(s-u)/(1-u)):(o=a-1,s/=u)}for(var c=s<.5,l=c?s:1-s,d=t(l),h=d(),f=0;h<=o;++f)h+=d();return i+(c?f:o-f)}}return randomBinomial.source=sourceRandomBinomial,randomBinomial}(n["default"])},"./node_modules/d3-random/src/cauchy.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomCauchy(e){function randomCauchy(t,r){return t=null==t?0:+t,r=null==r?1:+r,function(){return t+r*Math.tan(Math.PI*e())}}return randomCauchy.source=sourceRandomCauchy,randomCauchy}(n["default"])},"./node_modules/d3-random/src/defaultSource.js":function(e,t,r){"use strict";r.r(t),t["default"]=Math.random},"./node_modules/d3-random/src/exponential.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomExponential(e){function randomExponential(t){return function(){return-Math.log1p(-e())/t}}return randomExponential.source=sourceRandomExponential,randomExponential}(n["default"])},"./node_modules/d3-random/src/gamma.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/normal.js");t["default"]=function sourceRandomGamma(e){var t=i["default"].source(e)();function randomGamma(r,n){if((r=+r)<0)throw new RangeError("invalid k");if(0===r)return()=>0;if(n=null==n?1:+n,1===r)return()=>-Math.log1p(-e())*n;var i=(r<1?r+1:r)-1/3,o=1/(3*Math.sqrt(i)),s=r<1?()=>Math.pow(e(),1/r):()=>1;return function(){do{do{var r=t(),a=1+o*r}while(a<=0);a*=a*a;var u=1-e()}while(u>=1-.0331*r*r*r*r&&Math.log(u)>=.5*r*r+i*(1-a+Math.log(a)));return i*a*s()*n}}return randomGamma.source=sourceRandomGamma,randomGamma}(n["default"])},"./node_modules/d3-random/src/geometric.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomGeometric(e){function randomGeometric(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return randomGeometric.source=sourceRandomGeometric,randomGeometric}(n["default"])},"./node_modules/d3-random/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/uniform.js");r.d(t,"randomUniform",(function(){return n["default"]}));var i=r("./node_modules/d3-random/src/int.js");r.d(t,"randomInt",(function(){return i["default"]}));var o=r("./node_modules/d3-random/src/normal.js");r.d(t,"randomNormal",(function(){return o["default"]}));var s=r("./node_modules/d3-random/src/logNormal.js");r.d(t,"randomLogNormal",(function(){return s["default"]}));var a=r("./node_modules/d3-random/src/bates.js");r.d(t,"randomBates",(function(){return a["default"]}));var u=r("./node_modules/d3-random/src/irwinHall.js");r.d(t,"randomIrwinHall",(function(){return u["default"]}));var c=r("./node_modules/d3-random/src/exponential.js");r.d(t,"randomExponential",(function(){return c["default"]}));var l=r("./node_modules/d3-random/src/pareto.js");r.d(t,"randomPareto",(function(){return l["default"]}));var d=r("./node_modules/d3-random/src/bernoulli.js");r.d(t,"randomBernoulli",(function(){return d["default"]}));var h=r("./node_modules/d3-random/src/geometric.js");r.d(t,"randomGeometric",(function(){return h["default"]}));var f=r("./node_modules/d3-random/src/binomial.js");r.d(t,"randomBinomial",(function(){return f["default"]}));var p=r("./node_modules/d3-random/src/gamma.js");r.d(t,"randomGamma",(function(){return p["default"]}));var m=r("./node_modules/d3-random/src/beta.js");r.d(t,"randomBeta",(function(){return m["default"]}));var _=r("./node_modules/d3-random/src/weibull.js");r.d(t,"randomWeibull",(function(){return _["default"]}));var g=r("./node_modules/d3-random/src/cauchy.js");r.d(t,"randomCauchy",(function(){return g["default"]}));var b=r("./node_modules/d3-random/src/logistic.js");r.d(t,"randomLogistic",(function(){return b["default"]}));var v=r("./node_modules/d3-random/src/poisson.js");r.d(t,"randomPoisson",(function(){return v["default"]}));var M=r("./node_modules/d3-random/src/lcg.js");r.d(t,"randomLcg",(function(){return M["default"]}))},"./node_modules/d3-random/src/int.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomInt(e){function randomInt(t,r){return arguments.length<2&&(r=t,t=0),t=Math.floor(t),r=Math.floor(r)-t,function(){return Math.floor(e()*r+t)}}return randomInt.source=sourceRandomInt,randomInt}(n["default"])},"./node_modules/d3-random/src/irwinHall.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomIrwinHall(e){function randomIrwinHall(t){return(t=+t)<=0?()=>0:function(){for(var r=0,n=t;n>1;--n)r+=e();return r+n*e()}}return randomIrwinHall.source=sourceRandomIrwinHall,randomIrwinHall}(n["default"])},"./node_modules/d3-random/src/lcg.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return lcg}));const n=1664525,i=1013904223,o=1/4294967296;function lcg(e=Math.random()){let t=0|(0<=e&&e<1?e/o:Math.abs(e));return()=>(t=n*t+i|0,o*(t>>>0))}},"./node_modules/d3-random/src/logNormal.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/normal.js");t["default"]=function sourceRandomLogNormal(e){var t=i["default"].source(e);function randomLogNormal(){var e=t.apply(this,arguments);return function(){return Math.exp(e())}}return randomLogNormal.source=sourceRandomLogNormal,randomLogNormal}(n["default"])},"./node_modules/d3-random/src/logistic.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomLogistic(e){function randomLogistic(t,r){return t=null==t?0:+t,r=null==r?1:+r,function(){var n=e();return t+r*Math.log(n/(1-n))}}return randomLogistic.source=sourceRandomLogistic,randomLogistic}(n["default"])},"./node_modules/d3-random/src/normal.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomNormal(e){function randomNormal(t,r){var n,i;return t=null==t?0:+t,r=null==r?1:+r,function(){var o;if(null!=n)o=n,n=null;else do{n=2*e()-1,o=2*e()-1,i=n*n+o*o}while(!i||i>1);return t+r*o*Math.sqrt(-2*Math.log(i)/i)}}return randomNormal.source=sourceRandomNormal,randomNormal}(n["default"])},"./node_modules/d3-random/src/pareto.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomPareto(e){function randomPareto(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return randomPareto.source=sourceRandomPareto,randomPareto}(n["default"])},"./node_modules/d3-random/src/poisson.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js"),i=r("./node_modules/d3-random/src/binomial.js"),o=r("./node_modules/d3-random/src/gamma.js");t["default"]=function sourceRandomPoisson(e){var t=o["default"].source(e),r=i["default"].source(e);function randomPoisson(n){return function(){var i=0,o=n;while(o>16){var s=Math.floor(.875*o),a=t(s)();if(a>o)return i+r(s-1,o/a)();i+=s,o-=a}for(var u=-Math.log1p(-e()),c=0;u<=o;++c)u-=Math.log1p(-e());return i+c}}return randomPoisson.source=sourceRandomPoisson,randomPoisson}(n["default"])},"./node_modules/d3-random/src/uniform.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomUniform(e){function randomUniform(t,r){return t=null==t?0:+t,r=null==r?1:+r,1===arguments.length?(r=t,t=0):r-=t,function(){return e()*r+t}}return randomUniform.source=sourceRandomUniform,randomUniform}(n["default"])},"./node_modules/d3-random/src/weibull.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-random/src/defaultSource.js");t["default"]=function sourceRandomWeibull(e){function randomWeibull(t,r,n){var i;return 0===(t=+t)?i=e=>-Math.log(e):(t=1/t,i=e=>Math.pow(e,t)),r=null==r?0:+r,n=null==n?1:+n,function(){return r+n*i(-Math.log1p(-e()))}}return randomWeibull.source=sourceRandomWeibull,randomWeibull}(n["default"])},"./node_modules/d3-scale-chromatic/src/categorical/Accent.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")},"./node_modules/d3-scale-chromatic/src/categorical/Dark2.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")},"./node_modules/d3-scale-chromatic/src/categorical/Paired.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},"./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")},"./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")},"./node_modules/d3-scale-chromatic/src/categorical/Set1.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")},"./node_modules/d3-scale-chromatic/src/categorical/Set2.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")},"./node_modules/d3-scale-chromatic/src/categorical/Set3.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")},"./node_modules/d3-scale-chromatic/src/categorical/Tableau10.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")},"./node_modules/d3-scale-chromatic/src/categorical/category10.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/colors.js");t["default"]=Object(n["default"])("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},"./node_modules/d3-scale-chromatic/src/colors.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t=e.length/6|0,r=new Array(t),n=0;while(n<t)r[n]="#"+e.slice(6*n,6*++n);return r}},"./node_modules/d3-scale-chromatic/src/diverging/BrBG.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/PRGn.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/PiYG.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/PuOr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/RdBu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/RdGy.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/diverging/Spectral.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale-chromatic/src/categorical/category10.js");r.d(t,"schemeCategory10",(function(){return n["default"]}));var i=r("./node_modules/d3-scale-chromatic/src/categorical/Accent.js");r.d(t,"schemeAccent",(function(){return i["default"]}));var o=r("./node_modules/d3-scale-chromatic/src/categorical/Dark2.js");r.d(t,"schemeDark2",(function(){return o["default"]}));var s=r("./node_modules/d3-scale-chromatic/src/categorical/Paired.js");r.d(t,"schemePaired",(function(){return s["default"]}));var a=r("./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js");r.d(t,"schemePastel1",(function(){return a["default"]}));var u=r("./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js");r.d(t,"schemePastel2",(function(){return u["default"]}));var c=r("./node_modules/d3-scale-chromatic/src/categorical/Set1.js");r.d(t,"schemeSet1",(function(){return c["default"]}));var l=r("./node_modules/d3-scale-chromatic/src/categorical/Set2.js");r.d(t,"schemeSet2",(function(){return l["default"]}));var d=r("./node_modules/d3-scale-chromatic/src/categorical/Set3.js");r.d(t,"schemeSet3",(function(){return d["default"]}));var h=r("./node_modules/d3-scale-chromatic/src/categorical/Tableau10.js");r.d(t,"schemeTableau10",(function(){return h["default"]}));var f=r("./node_modules/d3-scale-chromatic/src/diverging/BrBG.js");r.d(t,"interpolateBrBG",(function(){return f["default"]})),r.d(t,"schemeBrBG",(function(){return f["scheme"]}));var p=r("./node_modules/d3-scale-chromatic/src/diverging/PRGn.js");r.d(t,"interpolatePRGn",(function(){return p["default"]})),r.d(t,"schemePRGn",(function(){return p["scheme"]}));var m=r("./node_modules/d3-scale-chromatic/src/diverging/PiYG.js");r.d(t,"interpolatePiYG",(function(){return m["default"]})),r.d(t,"schemePiYG",(function(){return m["scheme"]}));var _=r("./node_modules/d3-scale-chromatic/src/diverging/PuOr.js");r.d(t,"interpolatePuOr",(function(){return _["default"]})),r.d(t,"schemePuOr",(function(){return _["scheme"]}));var g=r("./node_modules/d3-scale-chromatic/src/diverging/RdBu.js");r.d(t,"interpolateRdBu",(function(){return g["default"]})),r.d(t,"schemeRdBu",(function(){return g["scheme"]}));var b=r("./node_modules/d3-scale-chromatic/src/diverging/RdGy.js");r.d(t,"interpolateRdGy",(function(){return b["default"]})),r.d(t,"schemeRdGy",(function(){return b["scheme"]}));var v=r("./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js");r.d(t,"interpolateRdYlBu",(function(){return v["default"]})),r.d(t,"schemeRdYlBu",(function(){return v["scheme"]}));var M=r("./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js");r.d(t,"interpolateRdYlGn",(function(){return M["default"]})),r.d(t,"schemeRdYlGn",(function(){return M["scheme"]}));var T=r("./node_modules/d3-scale-chromatic/src/diverging/Spectral.js");r.d(t,"interpolateSpectral",(function(){return T["default"]})),r.d(t,"schemeSpectral",(function(){return T["scheme"]}));var S=r("./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js");r.d(t,"interpolateBuGn",(function(){return S["default"]})),r.d(t,"schemeBuGn",(function(){return S["scheme"]}));var C=r("./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js");r.d(t,"interpolateBuPu",(function(){return C["default"]})),r.d(t,"schemeBuPu",(function(){return C["scheme"]}));var E=r("./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js");r.d(t,"interpolateGnBu",(function(){return E["default"]})),r.d(t,"schemeGnBu",(function(){return E["scheme"]}));var P=r("./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js");r.d(t,"interpolateOrRd",(function(){return P["default"]})),r.d(t,"schemeOrRd",(function(){return P["scheme"]}));var A=r("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js");r.d(t,"interpolatePuBuGn",(function(){return A["default"]})),r.d(t,"schemePuBuGn",(function(){return A["scheme"]}));var j=r("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js");r.d(t,"interpolatePuBu",(function(){return j["default"]})),r.d(t,"schemePuBu",(function(){return j["scheme"]}));var O=r("./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js");r.d(t,"interpolatePuRd",(function(){return O["default"]})),r.d(t,"schemePuRd",(function(){return O["scheme"]}));var R=r("./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js");r.d(t,"interpolateRdPu",(function(){return R["default"]})),r.d(t,"schemeRdPu",(function(){return R["scheme"]}));var I=r("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js");r.d(t,"interpolateYlGnBu",(function(){return I["default"]})),r.d(t,"schemeYlGnBu",(function(){return I["scheme"]}));var w=r("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js");r.d(t,"interpolateYlGn",(function(){return w["default"]})),r.d(t,"schemeYlGn",(function(){return w["scheme"]}));var D=r("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js");r.d(t,"interpolateYlOrBr",(function(){return D["default"]})),r.d(t,"schemeYlOrBr",(function(){return D["scheme"]}));var F=r("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js");r.d(t,"interpolateYlOrRd",(function(){return F["default"]})),r.d(t,"schemeYlOrRd",(function(){return F["scheme"]}));var B=r("./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js");r.d(t,"interpolateBlues",(function(){return B["default"]})),r.d(t,"schemeBlues",(function(){return B["scheme"]}));var L=r("./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js");r.d(t,"interpolateGreens",(function(){return L["default"]})),r.d(t,"schemeGreens",(function(){return L["scheme"]}));var V=r("./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js");r.d(t,"interpolateGreys",(function(){return V["default"]})),r.d(t,"schemeGreys",(function(){return V["scheme"]}));var N=r("./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js");r.d(t,"interpolatePurples",(function(){return N["default"]})),r.d(t,"schemePurples",(function(){return N["scheme"]}));var k=r("./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js");r.d(t,"interpolateReds",(function(){return k["default"]})),r.d(t,"schemeReds",(function(){return k["scheme"]}));var U=r("./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js");r.d(t,"interpolateOranges",(function(){return U["default"]})),r.d(t,"schemeOranges",(function(){return U["scheme"]}));var z=r("./node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js");r.d(t,"interpolateCividis",(function(){return z["default"]}));var G=r("./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js");r.d(t,"interpolateCubehelixDefault",(function(){return G["default"]}));var W=r("./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js");r.d(t,"interpolateRainbow",(function(){return W["default"]})),r.d(t,"interpolateWarm",(function(){return W["warm"]})),r.d(t,"interpolateCool",(function(){return W["cool"]}));var H=r("./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js");r.d(t,"interpolateSinebow",(function(){return H["default"]}));var X=r("./node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js");r.d(t,"interpolateTurbo",(function(){return X["default"]}));var q=r("./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js");r.d(t,"interpolateViridis",(function(){return q["default"]})),r.d(t,"interpolateMagma",(function(){return q["magma"]})),r.d(t,"interpolateInferno",(function(){return q["inferno"]})),r.d(t,"interpolatePlasma",(function(){return q["plasma"]}))},"./node_modules/d3-scale-chromatic/src/ramp.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/rgb.js");t["default"]=e=>Object(n["rgbBasis"])(e[e.length-1])},"./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}},"./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-color/src/cubehelix.js"),i=r("./node_modules/d3-interpolate/src/cubehelix.js");t["default"]=Object(i["cubehelixLong"])(Object(n["default"])(300,.5,0),Object(n["default"])(-240,.5,1))},"./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js":function(e,t,r){"use strict";r.r(t),r.d(t,"warm",(function(){return o})),r.d(t,"cool",(function(){return s}));var n=r("./node_modules/d3-color/src/cubehelix.js"),i=r("./node_modules/d3-interpolate/src/cubehelix.js"),o=Object(i["cubehelixLong"])(Object(n["default"])(-100,.75,.35),Object(n["default"])(80,1.5,.8)),s=Object(i["cubehelixLong"])(Object(n["default"])(260,.75,.35),Object(n["default"])(80,1.5,.8)),a=Object(n["default"])();t["default"]=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return a.h=360*e-100,a.s=1.5-1.5*t,a.l=.8-.9*t,a+""}},"./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-color/src/color.js"),i=Object(n["rgb"])(),o=Math.PI/3,s=2*Math.PI/3;t["default"]=function(e){var t;return e=(.5-e)*Math.PI,i.r=255*(t=Math.sin(e))*t,i.g=255*(t=Math.sin(e+o))*t,i.b=255*(t=Math.sin(e+s))*t,i+""}},"./node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}},"./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js":function(e,t,r){"use strict";r.r(t),r.d(t,"magma",(function(){return i})),r.d(t,"inferno",(function(){return o})),r.d(t,"plasma",(function(){return s}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js");function ramp(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}t["default"]=ramp(Object(n["default"])("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var i=ramp(Object(n["default"])("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),o=ramp(Object(n["default"])("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),s=ramp(Object(n["default"])("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},"./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js":function(e,t,r){"use strict";r.r(t),r.d(t,"scheme",(function(){return o}));var n=r("./node_modules/d3-scale-chromatic/src/colors.js"),i=r("./node_modules/d3-scale-chromatic/src/ramp.js"),o=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(n["default"]);t["default"]=Object(i["default"])(o)},"./node_modules/d3-scale/src/band.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return band})),r.d(t,"point",(function(){return point}));var n=r("./node_modules/d3-array/src/range.js"),i=r("./node_modules/d3-scale/src/init.js"),o=r("./node_modules/d3-scale/src/ordinal.js");function band(){var e,t,r=Object(o["default"])().unknown(void 0),s=r.domain,a=r.range,u=0,c=1,l=!1,d=0,h=0,f=.5;function rescale(){var r=s().length,i=c<u,o=i?c:u,p=i?u:c;e=(p-o)/Math.max(1,r-d+2*h),l&&(e=Math.floor(e)),o+=(p-o-e*(r-d))*f,t=e*(1-d),l&&(o=Math.round(o),t=Math.round(t));var m=Object(n["default"])(r).map((function(t){return o+e*t}));return a(i?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(s(e),rescale()):s()},r.range=function(e){return arguments.length?([u,c]=e,u=+u,c=+c,rescale()):[u,c]},r.rangeRound=function(e){return[u,c]=e,u=+u,c=+c,l=!0,rescale()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,rescale()):l},r.padding=function(e){return arguments.length?(d=Math.min(1,h=+e),rescale()):d},r.paddingInner=function(e){return arguments.length?(d=Math.min(1,e),rescale()):d},r.paddingOuter=function(e){return arguments.length?(h=+e,rescale()):h},r.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),rescale()):f},r.copy=function(){return band(s(),[u,c]).round(l).paddingInner(d).paddingOuter(h).align(f)},i["initRange"].apply(rescale(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}},"./node_modules/d3-scale/src/constant.js":function(e,t,r){"use strict";function constants(e){return function(){return e}}r.r(t),r.d(t,"default",(function(){return constants}))},"./node_modules/d3-scale/src/continuous.js":function(e,t,r){"use strict";r.r(t),r.d(t,"identity",(function(){return identity})),r.d(t,"copy",(function(){return copy})),r.d(t,"transformer",(function(){return transformer})),r.d(t,"default",(function(){return continuous}));var n=r("./node_modules/d3-array/src/bisect.js"),i=r("./node_modules/d3-interpolate/src/value.js"),o=r("./node_modules/d3-interpolate/src/number.js"),s=r("./node_modules/d3-interpolate/src/round.js"),a=r("./node_modules/d3-scale/src/constant.js"),u=r("./node_modules/d3-scale/src/number.js"),c=[0,1];function identity(e){return e}function normalize(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Object(a["default"])(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,r){var n=e[0],i=e[1],o=t[0],s=t[1];return i<n?(n=normalize(i,n),o=r(s,o)):(n=normalize(n,i),o=r(o,s)),function(e){return o(n(e))}}function polymap(e,t,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),s=new Array(i),a=-1;e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());while(++a<i)o[a]=normalize(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(t){var r=Object(n["default"])(e,t,1,i)-1;return s[r](o[r](t))}}function copy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e,t,r,n,a,l,d=c,h=c,f=i["default"],p=identity;function rescale(){var e=Math.min(d.length,h.length);return p!==identity&&(p=clamper(d[0],d[e-1])),n=e>2?polymap:bimap,a=l=null,scale}function scale(t){return null==t||isNaN(t=+t)?r:(a||(a=n(d.map(e),h,f)))(e(p(t)))}return scale.invert=function(r){return p(t((l||(l=n(h,d.map(e),o["default"])))(r)))},scale.domain=function(e){return arguments.length?(d=Array.from(e,u["default"]),rescale()):d.slice()},scale.range=function(e){return arguments.length?(h=Array.from(e),rescale()):h.slice()},scale.rangeRound=function(e){return h=Array.from(e),f=s["default"],rescale()},scale.clamp=function(e){return arguments.length?(p=!!e||identity,rescale()):p!==identity},scale.interpolate=function(e){return arguments.length?(f=e,rescale()):f},scale.unknown=function(e){return arguments.length?(r=e,scale):r},function(r,n){return e=r,t=n,rescale()}}function continuous(){return transformer()(identity,identity)}},"./node_modules/d3-scale/src/diverging.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return diverging})),r.d(t,"divergingLog",(function(){return divergingLog})),r.d(t,"divergingSymlog",(function(){return divergingSymlog})),r.d(t,"divergingPow",(function(){return divergingPow})),r.d(t,"divergingSqrt",(function(){return divergingSqrt}));var n=r("./node_modules/d3-interpolate/src/piecewise.js"),i=r("./node_modules/d3-interpolate/src/value.js"),o=r("./node_modules/d3-interpolate/src/round.js"),s=r("./node_modules/d3-scale/src/continuous.js"),a=r("./node_modules/d3-scale/src/init.js"),u=r("./node_modules/d3-scale/src/linear.js"),c=r("./node_modules/d3-scale/src/log.js"),l=r("./node_modules/d3-scale/src/sequential.js"),d=r("./node_modules/d3-scale/src/symlog.js"),h=r("./node_modules/d3-scale/src/pow.js");function transformer(){var e,t,r,a,u,c,l,d=0,h=.5,f=1,p=1,m=s["identity"],_=!1;function scale(e){return isNaN(e=+e)?l:(e=.5+((e=+c(e))-t)*(p*e<p*t?a:u),m(_?Math.max(0,Math.min(1,e)):e))}function range(e){return function(t){var r,i,o;return arguments.length?([r,i,o]=t,m=Object(n["default"])(e,[r,i,o]),scale):[m(0),m(.5),m(1)]}}return scale.domain=function(n){return arguments.length?([d,h,f]=n,e=c(d=+d),t=c(h=+h),r=c(f=+f),a=e===t?0:.5/(t-e),u=t===r?0:.5/(r-t),p=t<e?-1:1,scale):[d,h,f]},scale.clamp=function(e){return arguments.length?(_=!!e,scale):_},scale.interpolator=function(e){return arguments.length?(m=e,scale):m},scale.range=range(i["default"]),scale.rangeRound=range(o["default"]),scale.unknown=function(e){return arguments.length?(l=e,scale):l},function(n){return c=n,e=n(d),t=n(h),r=n(f),a=e===t?0:.5/(t-e),u=t===r?0:.5/(r-t),p=t<e?-1:1,scale}}function diverging(){var e=Object(u["linearish"])(transformer()(s["identity"]));return e.copy=function(){return Object(l["copy"])(e,diverging())},a["initInterpolator"].apply(e,arguments)}function divergingLog(){var e=Object(c["loggish"])(transformer()).domain([.1,1,10]);return e.copy=function(){return Object(l["copy"])(e,divergingLog()).base(e.base())},a["initInterpolator"].apply(e,arguments)}function divergingSymlog(){var e=Object(d["symlogish"])(transformer());return e.copy=function(){return Object(l["copy"])(e,divergingSymlog()).constant(e.constant())},a["initInterpolator"].apply(e,arguments)}function divergingPow(){var e=Object(h["powish"])(transformer());return e.copy=function(){return Object(l["copy"])(e,divergingPow()).exponent(e.exponent())},a["initInterpolator"].apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/identity.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return identity}));var n=r("./node_modules/d3-scale/src/linear.js"),i=r("./node_modules/d3-scale/src/number.js");function identity(e){var t;function scale(e){return null==e||isNaN(e=+e)?t:e}return scale.invert=scale,scale.domain=scale.range=function(t){return arguments.length?(e=Array.from(t,i["default"]),scale):e.slice()},scale.unknown=function(e){return arguments.length?(t=e,scale):t},scale.copy=function(){return identity(e).unknown(t)},e=arguments.length?Array.from(e,i["default"]):[0,1],Object(n["linearish"])(scale)}},"./node_modules/d3-scale/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-scale/src/band.js");r.d(t,"scaleBand",(function(){return n["default"]})),r.d(t,"scalePoint",(function(){return n["point"]}));var i=r("./node_modules/d3-scale/src/identity.js");r.d(t,"scaleIdentity",(function(){return i["default"]}));var o=r("./node_modules/d3-scale/src/linear.js");r.d(t,"scaleLinear",(function(){return o["default"]}));var s=r("./node_modules/d3-scale/src/log.js");r.d(t,"scaleLog",(function(){return s["default"]}));var a=r("./node_modules/d3-scale/src/symlog.js");r.d(t,"scaleSymlog",(function(){return a["default"]}));var u=r("./node_modules/d3-scale/src/ordinal.js");r.d(t,"scaleOrdinal",(function(){return u["default"]})),r.d(t,"scaleImplicit",(function(){return u["implicit"]}));var c=r("./node_modules/d3-scale/src/pow.js");r.d(t,"scalePow",(function(){return c["default"]})),r.d(t,"scaleSqrt",(function(){return c["sqrt"]}));var l=r("./node_modules/d3-scale/src/radial.js");r.d(t,"scaleRadial",(function(){return l["default"]}));var d=r("./node_modules/d3-scale/src/quantile.js");r.d(t,"scaleQuantile",(function(){return d["default"]}));var h=r("./node_modules/d3-scale/src/quantize.js");r.d(t,"scaleQuantize",(function(){return h["default"]}));var f=r("./node_modules/d3-scale/src/threshold.js");r.d(t,"scaleThreshold",(function(){return f["default"]}));var p=r("./node_modules/d3-scale/src/time.js");r.d(t,"scaleTime",(function(){return p["default"]}));var m=r("./node_modules/d3-scale/src/utcTime.js");r.d(t,"scaleUtc",(function(){return m["default"]}));var _=r("./node_modules/d3-scale/src/sequential.js");r.d(t,"scaleSequential",(function(){return _["default"]})),r.d(t,"scaleSequentialLog",(function(){return _["sequentialLog"]})),r.d(t,"scaleSequentialPow",(function(){return _["sequentialPow"]})),r.d(t,"scaleSequentialSqrt",(function(){return _["sequentialSqrt"]})),r.d(t,"scaleSequentialSymlog",(function(){return _["sequentialSymlog"]}));var g=r("./node_modules/d3-scale/src/sequentialQuantile.js");r.d(t,"scaleSequentialQuantile",(function(){return g["default"]}));var b=r("./node_modules/d3-scale/src/diverging.js");r.d(t,"scaleDiverging",(function(){return b["default"]})),r.d(t,"scaleDivergingLog",(function(){return b["divergingLog"]})),r.d(t,"scaleDivergingPow",(function(){return b["divergingPow"]})),r.d(t,"scaleDivergingSqrt",(function(){return b["divergingSqrt"]})),r.d(t,"scaleDivergingSymlog",(function(){return b["divergingSymlog"]}));var v=r("./node_modules/d3-scale/src/tickFormat.js");r.d(t,"tickFormat",(function(){return v["default"]}))},"./node_modules/d3-scale/src/init.js":function(e,t,r){"use strict";function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t);break}return this}r.r(t),r.d(t,"initRange",(function(){return initRange})),r.d(t,"initInterpolator",(function(){return initInterpolator}))},"./node_modules/d3-scale/src/linear.js":function(e,t,r){"use strict";r.r(t),r.d(t,"linearish",(function(){return linearish})),r.d(t,"default",(function(){return linear}));var n=r("./node_modules/d3-array/src/ticks.js"),i=r("./node_modules/d3-scale/src/continuous.js"),o=r("./node_modules/d3-scale/src/init.js"),s=r("./node_modules/d3-scale/src/tickFormat.js");function linearish(e){var t=e.domain;return e.ticks=function(e){var r=t();return Object(n["default"])(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Object(s["default"])(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var i,o,s=t(),a=0,u=s.length-1,c=s[a],l=s[u],d=10;l<c&&(o=c,c=l,l=o,o=a,a=u,u=o);while(d-- >0){if(o=Object(n["tickIncrement"])(c,l,r),o===i)return s[a]=c,s[u]=l,t(s);if(o>0)c=Math.floor(c/o)*o,l=Math.ceil(l/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,l=Math.floor(l*o)/o}i=o}return e},e}function linear(){var e=Object(i["default"])();return e.copy=function(){return Object(i["copy"])(e,linear())},o["initRange"].apply(e,arguments),linearish(e)}},"./node_modules/d3-scale/src/log.js":function(e,t,r){"use strict";r.r(t),r.d(t,"loggish",(function(){return loggish})),r.d(t,"default",(function(){return log}));var n=r("./node_modules/d3-array/src/ticks.js"),i=r("./node_modules/d3-format/src/defaultLocale.js"),o=r("./node_modules/d3-scale/src/nice.js"),s=r("./node_modules/d3-scale/src/continuous.js"),a=r("./node_modules/d3-scale/src/init.js");function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return 10===e?pow10:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function logp(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function reflect(e){return function(t){return-e(-t)}}function loggish(e){var t,r,s=e(transformLog,transformExp),a=s.domain,u=10;function rescale(){return t=logp(u),r=powp(u),a()[0]<0?(t=reflect(t),r=reflect(r),e(transformLogn,transformExpn)):e(transformLog,transformExp),s}return s.base=function(e){return arguments.length?(u=+e,rescale()):u},s.domain=function(e){return arguments.length?(a(e),rescale()):a()},s.ticks=function(e){var i,o=a(),s=o[0],c=o[o.length-1];(i=c<s)&&(f=s,s=c,c=f);var l,d,h,f=t(s),p=t(c),m=null==e?10:+e,_=[];if(!(u%1)&&p-f<m){if(f=Math.floor(f),p=Math.ceil(p),s>0){for(;f<=p;++f)for(d=1,l=r(f);d<u;++d)if(h=l*d,!(h<s)){if(h>c)break;_.push(h)}}else for(;f<=p;++f)for(d=u-1,l=r(f);d>=1;--d)if(h=l*d,!(h<s)){if(h>c)break;_.push(h)}2*_.length<m&&(_=Object(n["default"])(s,c,m))}else _=Object(n["default"])(f,p,Math.min(p-f,m)).map(r);return i?_.reverse():_},s.tickFormat=function(e,n){if(null==n&&(n=10===u?".0e":","),"function"!==typeof n&&(n=Object(i["format"])(n)),e===1/0)return n;null==e&&(e=10);var o=Math.max(1,u*e/s.ticks().length);return function(e){var i=e/r(Math.round(t(e)));return i*u<u-.5&&(i*=u),i<=o?n(e):""}},s.nice=function(){return a(Object(o["default"])(a(),{floor:function(e){return r(Math.floor(t(e)))},ceil:function(e){return r(Math.ceil(t(e)))}}))},s}function log(){var e=loggish(Object(s["transformer"])()).domain([1,10]);return e.copy=function(){return Object(s["copy"])(e,log()).base(e.base())},a["initRange"].apply(e,arguments),e}},"./node_modules/d3-scale/src/nice.js":function(e,t,r){"use strict";function nice(e,t){e=e.slice();var r,n=0,i=e.length-1,o=e[n],s=e[i];return s<o&&(r=n,n=i,i=r,r=o,o=s,s=r),e[n]=t.floor(o),e[i]=t.ceil(s),e}r.r(t),r.d(t,"default",(function(){return nice}))},"./node_modules/d3-scale/src/number.js":function(e,t,r){"use strict";function number(e){return+e}r.r(t),r.d(t,"default",(function(){return number}))},"./node_modules/d3-scale/src/ordinal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"implicit",(function(){return i})),r.d(t,"default",(function(){return ordinal}));var n=r("./node_modules/d3-scale/src/init.js");const i=Symbol("implicit");function ordinal(){var e=new Map,t=[],r=[],o=i;function scale(n){var s=n+"",a=e.get(s);if(!a){if(o!==i)return o;e.set(s,a=t.push(n))}return r[(a-1)%r.length]}return scale.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Map;for(const n of r){const r=n+"";e.has(r)||e.set(r,t.push(n))}return scale},scale.range=function(e){return arguments.length?(r=Array.from(e),scale):r.slice()},scale.unknown=function(e){return arguments.length?(o=e,scale):o},scale.copy=function(){return ordinal(t,r).unknown(o)},n["initRange"].apply(scale,arguments),scale}},"./node_modules/d3-scale/src/pow.js":function(e,t,r){"use strict";r.r(t),r.d(t,"powish",(function(){return powish})),r.d(t,"default",(function(){return pow})),r.d(t,"sqrt",(function(){return sqrt}));var n=r("./node_modules/d3-scale/src/linear.js"),i=r("./node_modules/d3-scale/src/continuous.js"),o=r("./node_modules/d3-scale/src/init.js");function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(i["identity"],i["identity"]),r=1;function rescale(){return 1===r?e(i["identity"],i["identity"]):.5===r?e(transformSqrt,transformSquare):e(transformPow(r),transformPow(1/r))}return t.exponent=function(e){return arguments.length?(r=+e,rescale()):r},Object(n["linearish"])(t)}function pow(){var e=powish(Object(i["transformer"])());return e.copy=function(){return Object(i["copy"])(e,pow()).exponent(e.exponent())},o["initRange"].apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/quantile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return quantile}));var n=r("./node_modules/d3-array/src/quantile.js"),i=r("./node_modules/d3-array/src/bisect.js"),o=r("./node_modules/d3-array/src/ascending.js"),s=r("./node_modules/d3-scale/src/init.js");function quantile(){var e,t=[],r=[],a=[];function rescale(){var e=0,i=Math.max(1,r.length);a=new Array(i-1);while(++e<i)a[e-1]=Object(n["quantileSorted"])(t,e/i);return scale}function scale(t){return null==t||isNaN(t=+t)?e:r[Object(i["default"])(a,t)]}return scale.invertExtent=function(e){var n=r.indexOf(e);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},scale.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(o["default"]),rescale()},scale.range=function(e){return arguments.length?(r=Array.from(e),rescale()):r.slice()},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.quantiles=function(){return a.slice()},scale.copy=function(){return quantile().domain(t).range(r).unknown(e)},s["initRange"].apply(scale,arguments)}},"./node_modules/d3-scale/src/quantize.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return quantize}));var n=r("./node_modules/d3-array/src/bisect.js"),i=r("./node_modules/d3-scale/src/linear.js"),o=r("./node_modules/d3-scale/src/init.js");function quantize(){var e,t=0,r=1,s=1,a=[.5],u=[0,1];function scale(t){return null!=t&&t<=t?u[Object(n["default"])(a,t,0,s)]:e}function rescale(){var e=-1;a=new Array(s);while(++e<s)a[e]=((e+1)*r-(e-s)*t)/(s+1);return scale}return scale.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,rescale()):[t,r]},scale.range=function(e){return arguments.length?(s=(u=Array.from(e)).length-1,rescale()):u.slice()},scale.invertExtent=function(e){var n=u.indexOf(e);return n<0?[NaN,NaN]:n<1?[t,a[0]]:n>=s?[a[s-1],r]:[a[n-1],a[n]]},scale.unknown=function(t){return arguments.length?(e=t,scale):scale},scale.thresholds=function(){return a.slice()},scale.copy=function(){return quantize().domain([t,r]).range(u).unknown(e)},o["initRange"].apply(Object(i["linearish"])(scale),arguments)}},"./node_modules/d3-scale/src/radial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return radial}));var n=r("./node_modules/d3-scale/src/continuous.js"),i=r("./node_modules/d3-scale/src/init.js"),o=r("./node_modules/d3-scale/src/linear.js"),s=r("./node_modules/d3-scale/src/number.js");function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e,t=Object(n["default"])(),r=[0,1],a=!1;function scale(r){var n=unsquare(t(r));return isNaN(n)?e:a?Math.round(n):n}return scale.invert=function(e){return t.invert(square(e))},scale.domain=function(e){return arguments.length?(t.domain(e),scale):t.domain()},scale.range=function(e){return arguments.length?(t.range((r=Array.from(e,s["default"])).map(square)),scale):r.slice()},scale.rangeRound=function(e){return scale.range(e).round(!0)},scale.round=function(e){return arguments.length?(a=!!e,scale):a},scale.clamp=function(e){return arguments.length?(t.clamp(e),scale):t.clamp()},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return radial(t.domain(),r).round(a).clamp(t.clamp()).unknown(e)},i["initRange"].apply(scale,arguments),Object(o["linearish"])(scale)}},"./node_modules/d3-scale/src/sequential.js":function(e,t,r){"use strict";r.r(t),r.d(t,"copy",(function(){return copy})),r.d(t,"default",(function(){return sequential})),r.d(t,"sequentialLog",(function(){return sequentialLog})),r.d(t,"sequentialSymlog",(function(){return sequentialSymlog})),r.d(t,"sequentialPow",(function(){return sequentialPow})),r.d(t,"sequentialSqrt",(function(){return sequentialSqrt}));var n=r("./node_modules/d3-interpolate/src/value.js"),i=r("./node_modules/d3-interpolate/src/round.js"),o=r("./node_modules/d3-scale/src/continuous.js"),s=r("./node_modules/d3-scale/src/init.js"),a=r("./node_modules/d3-scale/src/linear.js"),u=r("./node_modules/d3-scale/src/log.js"),c=r("./node_modules/d3-scale/src/symlog.js"),l=r("./node_modules/d3-scale/src/pow.js");function transformer(){var e,t,r,s,a,u=0,c=1,l=o["identity"],d=!1;function scale(t){return null==t||isNaN(t=+t)?a:l(0===r?.5:(t=(s(t)-e)*r,d?Math.max(0,Math.min(1,t)):t))}function range(e){return function(t){var r,n;return arguments.length?([r,n]=t,l=e(r,n),scale):[l(0),l(1)]}}return scale.domain=function(n){return arguments.length?([u,c]=n,e=s(u=+u),t=s(c=+c),r=e===t?0:1/(t-e),scale):[u,c]},scale.clamp=function(e){return arguments.length?(d=!!e,scale):d},scale.interpolator=function(e){return arguments.length?(l=e,scale):l},scale.range=range(n["default"]),scale.rangeRound=range(i["default"]),scale.unknown=function(e){return arguments.length?(a=e,scale):a},function(n){return s=n,e=n(u),t=n(c),r=e===t?0:1/(t-e),scale}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=Object(a["linearish"])(transformer()(o["identity"]));return e.copy=function(){return copy(e,sequential())},s["initInterpolator"].apply(e,arguments)}function sequentialLog(){var e=Object(u["loggish"])(transformer()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},s["initInterpolator"].apply(e,arguments)}function sequentialSymlog(){var e=Object(c["symlogish"])(transformer());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},s["initInterpolator"].apply(e,arguments)}function sequentialPow(){var e=Object(l["powish"])(transformer());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},s["initInterpolator"].apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/sequentialQuantile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return sequentialQuantile}));var n=r("./node_modules/d3-array/src/bisect.js"),i=r("./node_modules/d3-array/src/ascending.js"),o=r("./node_modules/d3-array/src/quantile.js"),s=r("./node_modules/d3-scale/src/continuous.js"),a=r("./node_modules/d3-scale/src/init.js");function sequentialQuantile(){var e=[],t=s["identity"];function scale(r){if(null!=r&&!isNaN(r=+r))return t((Object(n["default"])(e,r,1)-1)/(e.length-1))}return scale.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(i["default"]),scale},scale.interpolator=function(e){return arguments.length?(t=e,scale):t},scale.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},scale.quantiles=function(t){return Array.from({length:t+1},(r,n)=>Object(o["default"])(e,n/t))},scale.copy=function(){return sequentialQuantile(t).domain(e)},a["initInterpolator"].apply(scale,arguments)}},"./node_modules/d3-scale/src/symlog.js":function(e,t,r){"use strict";r.r(t),r.d(t,"symlogish",(function(){return symlogish})),r.d(t,"default",(function(){return symlog}));var n=r("./node_modules/d3-scale/src/linear.js"),i=r("./node_modules/d3-scale/src/continuous.js"),o=r("./node_modules/d3-scale/src/init.js");function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,r=e(transformSymlog(t),transformSymexp(t));return r.constant=function(r){return arguments.length?e(transformSymlog(t=+r),transformSymexp(t)):t},Object(n["linearish"])(r)}function symlog(){var e=symlogish(Object(i["transformer"])());return e.copy=function(){return Object(i["copy"])(e,symlog()).constant(e.constant())},o["initRange"].apply(e,arguments)}},"./node_modules/d3-scale/src/threshold.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return threshold}));var n=r("./node_modules/d3-array/src/bisect.js"),i=r("./node_modules/d3-scale/src/init.js");function threshold(){var e,t=[.5],r=[0,1],o=1;function scale(i){return null!=i&&i<=i?r[Object(n["default"])(t,i,0,o)]:e}return scale.domain=function(e){return arguments.length?(t=Array.from(e),o=Math.min(t.length,r.length-1),scale):t.slice()},scale.range=function(e){return arguments.length?(r=Array.from(e),o=Math.min(t.length,r.length-1),scale):r.slice()},scale.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return threshold().domain(t).range(r).unknown(e)},i["initRange"].apply(scale,arguments)}},"./node_modules/d3-scale/src/tickFormat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return tickFormat}));var n=r("./node_modules/d3-array/src/ticks.js"),i=r("./node_modules/d3-format/src/formatSpecifier.js"),o=r("./node_modules/d3-format/src/precisionPrefix.js"),s=r("./node_modules/d3-format/src/defaultLocale.js"),a=r("./node_modules/d3-format/src/precisionRound.js"),u=r("./node_modules/d3-format/src/precisionFixed.js");function tickFormat(e,t,r,c){var l,d=Object(n["tickStep"])(e,t,r);switch(c=Object(i["default"])(null==c?",f":c),c.type){case"s":var h=Math.max(Math.abs(e),Math.abs(t));return null!=c.precision||isNaN(l=Object(o["default"])(d,h))||(c.precision=l),Object(s["formatPrefix"])(c,h);case"":case"e":case"g":case"p":case"r":null!=c.precision||isNaN(l=Object(a["default"])(d,Math.max(Math.abs(e),Math.abs(t))))||(c.precision=l-("e"===c.type));break;case"f":case"%":null!=c.precision||isNaN(l=Object(u["default"])(d))||(c.precision=l-2*("%"===c.type));break}return Object(s["format"])(c)}},"./node_modules/d3-scale/src/time.js":function(e,t,r){"use strict";r.r(t),r.d(t,"calendar",(function(){return calendar})),r.d(t,"default",(function(){return time}));var n=r("./node_modules/d3-time/src/ticks.js"),i=r("./node_modules/d3-time/src/year.js"),o=r("./node_modules/d3-time/src/month.js"),s=r("./node_modules/d3-time/src/week.js"),a=r("./node_modules/d3-time/src/day.js"),u=r("./node_modules/d3-time/src/hour.js"),c=r("./node_modules/d3-time/src/minute.js"),l=r("./node_modules/d3-time/src/second.js"),d=r("./node_modules/d3-time-format/src/defaultLocale.js"),h=r("./node_modules/d3-scale/src/continuous.js"),f=r("./node_modules/d3-scale/src/init.js"),p=r("./node_modules/d3-scale/src/nice.js");function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,r,n,i,o,s,a,u,c){var l=Object(h["default"])(),d=l.invert,f=l.domain,m=c(".%L"),_=c(":%S"),g=c("%I:%M"),b=c("%I %p"),v=c("%a %d"),M=c("%b %d"),T=c("%B"),S=c("%Y");function tickFormat(e){return(u(e)<e?m:a(e)<e?_:s(e)<e?g:o(e)<e?b:n(e)<e?i(e)<e?v:M:r(e)<e?T:S)(e)}return l.invert=function(e){return new Date(d(e))},l.domain=function(e){return arguments.length?f(Array.from(e,number)):f().map(date)},l.ticks=function(t){var r=f();return e(r[0],r[r.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?tickFormat:c(t)},l.nice=function(e){var r=f();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?f(Object(p["default"])(r,e)):l},l.copy=function(){return Object(h["copy"])(l,calendar(e,t,r,n,i,o,s,a,u,c))},l}function time(){return f["initRange"].apply(calendar(n["timeTicks"],n["timeTickInterval"],i["default"],o["default"],s["sunday"],a["default"],u["default"],c["default"],l["default"],d["timeFormat"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},"./node_modules/d3-scale/src/utcTime.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return utcTime}));var n=r("./node_modules/d3-time/src/ticks.js"),i=r("./node_modules/d3-time/src/utcYear.js"),o=r("./node_modules/d3-time/src/utcMonth.js"),s=r("./node_modules/d3-time/src/utcWeek.js"),a=r("./node_modules/d3-time/src/utcDay.js"),u=r("./node_modules/d3-time/src/utcHour.js"),c=r("./node_modules/d3-time/src/utcMinute.js"),l=r("./node_modules/d3-time/src/second.js"),d=r("./node_modules/d3-time-format/src/defaultLocale.js"),h=r("./node_modules/d3-scale/src/time.js"),f=r("./node_modules/d3-scale/src/init.js");function utcTime(){return f["initRange"].apply(Object(h["calendar"])(n["utcTicks"],n["utcTickInterval"],i["default"],o["default"],s["utcSunday"],a["default"],u["default"],c["default"],l["default"],d["utcFormat"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}},"./node_modules/d3-selection/src/array.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}},"./node_modules/d3-selection/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function(){return e}}},"./node_modules/d3-selection/src/create.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/creator.js"),i=r("./node_modules/d3-selection/src/select.js");t["default"]=function(e){return Object(i["default"])(Object(n["default"])(e).call(document.documentElement))}},"./node_modules/d3-selection/src/creator.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/namespace.js"),i=r("./node_modules/d3-selection/src/namespaces.js");function creatorInherit(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===i["xhtml"]&&t.documentElement.namespaceURI===i["xhtml"]?t.createElement(e):t.createElementNS(r,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}t["default"]=function(e){var t=Object(n["default"])(e);return(t.local?creatorFixed:creatorInherit)(t)}},"./node_modules/d3-selection/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/create.js");r.d(t,"create",(function(){return n["default"]}));var i=r("./node_modules/d3-selection/src/creator.js");r.d(t,"creator",(function(){return i["default"]}));var o=r("./node_modules/d3-selection/src/local.js");r.d(t,"local",(function(){return o["default"]}));var s=r("./node_modules/d3-selection/src/matcher.js");r.d(t,"matcher",(function(){return s["default"]}));var a=r("./node_modules/d3-selection/src/namespace.js");r.d(t,"namespace",(function(){return a["default"]}));var u=r("./node_modules/d3-selection/src/namespaces.js");r.d(t,"namespaces",(function(){return u["default"]}));var c=r("./node_modules/d3-selection/src/pointer.js");r.d(t,"pointer",(function(){return c["default"]}));var l=r("./node_modules/d3-selection/src/pointers.js");r.d(t,"pointers",(function(){return l["default"]}));var d=r("./node_modules/d3-selection/src/select.js");r.d(t,"select",(function(){return d["default"]}));var h=r("./node_modules/d3-selection/src/selectAll.js");r.d(t,"selectAll",(function(){return h["default"]}));var f=r("./node_modules/d3-selection/src/selection/index.js");r.d(t,"selection",(function(){return f["default"]}));var p=r("./node_modules/d3-selection/src/selector.js");r.d(t,"selector",(function(){return p["default"]}));var m=r("./node_modules/d3-selection/src/selectorAll.js");r.d(t,"selectorAll",(function(){return m["default"]}));var _=r("./node_modules/d3-selection/src/selection/style.js");r.d(t,"style",(function(){return _["styleValue"]}));var g=r("./node_modules/d3-selection/src/window.js");r.d(t,"window",(function(){return g["default"]}))},"./node_modules/d3-selection/src/local.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return local}));var n=0;function local(){return new Local}function Local(){this._="@"+(++n).toString(36)}Local.prototype=local.prototype={constructor:Local,get:function(e){var t=this._;while(!(t in e))if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},"./node_modules/d3-selection/src/matcher.js":function(e,t,r){"use strict";function childMatcher(e){return function(t){return t.matches(e)}}r.r(t),r.d(t,"childMatcher",(function(){return childMatcher})),t["default"]=function(e){return function(){return this.matches(e)}}},"./node_modules/d3-selection/src/namespace.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/namespaces.js");t["default"]=function(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n["default"].hasOwnProperty(t)?{space:n["default"][t],local:e}:e}},"./node_modules/d3-selection/src/namespaces.js":function(e,t,r){"use strict";r.r(t),r.d(t,"xhtml",(function(){return n}));var n="http://www.w3.org/1999/xhtml";t["default"]={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},"./node_modules/d3-selection/src/pointer.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/sourceEvent.js");t["default"]=function(e,t){if(e=Object(n["default"])(e),void 0===t&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}},"./node_modules/d3-selection/src/pointers.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/pointer.js"),i=r("./node_modules/d3-selection/src/sourceEvent.js");t["default"]=function(e,t){return e.target&&(e=Object(i["default"])(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,e=>Object(n["default"])(e,t))}},"./node_modules/d3-selection/src/select.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js");t["default"]=function(e){return"string"===typeof e?new n["Selection"]([[document.querySelector(e)]],[document.documentElement]):new n["Selection"]([[e]],n["root"])}},"./node_modules/d3-selection/src/selectAll.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/array.js"),i=r("./node_modules/d3-selection/src/selection/index.js");t["default"]=function(e){return"string"===typeof e?new i["Selection"]([document.querySelectorAll(e)],[document.documentElement]):new i["Selection"]([null==e?[]:Object(n["default"])(e)],i["root"])}},"./node_modules/d3-selection/src/selection/append.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/creator.js");t["default"]=function(e){var t="function"===typeof e?e:Object(n["default"])(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}},"./node_modules/d3-selection/src/selection/attr.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/namespace.js");function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function attrFunctionNS(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}t["default"]=function(e,t){var r=Object(n["default"])(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==t?r.local?attrRemoveNS:attrRemove:"function"===typeof t?r.local?attrFunctionNS:attrFunction:r.local?attrConstantNS:attrConstant)(r,t))}},"./node_modules/d3-selection/src/selection/call.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},"./node_modules/d3-selection/src/selection/classed.js":function(e,t,r){"use strict";function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){var r=classList(e),n=-1,i=t.length;while(++n<i)r.add(t[n])}function classedRemove(e,t){var r=classList(e),n=-1,i=t.length;while(++n<i)r.remove(t[n])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}r.r(t),ClassList.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t["default"]=function(e,t){var r=classArray(e+"");if(arguments.length<2){var n=classList(this.node()),i=-1,o=r.length;while(++i<o)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"===typeof t?classedFunction:t?classedTrue:classedFalse)(r,t))}},"./node_modules/d3-selection/src/selection/clone.js":function(e,t,r){"use strict";function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}r.r(t),t["default"]=function(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}},"./node_modules/d3-selection/src/selection/data.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-selection/src/selection/enter.js"),o=r("./node_modules/d3-selection/src/array.js"),s=r("./node_modules/d3-selection/src/constant.js");function bindIndex(e,t,r,n,o,s){for(var a,u=0,c=t.length,l=s.length;u<l;++u)(a=t[u])?(a.__data__=s[u],n[u]=a):r[u]=new i["EnterNode"](e,s[u]);for(;u<c;++u)(a=t[u])&&(o[u]=a)}function bindKey(e,t,r,n,o,s,a){var u,c,l,d=new Map,h=t.length,f=s.length,p=new Array(h);for(u=0;u<h;++u)(c=t[u])&&(p[u]=l=a.call(c,c.__data__,u,t)+"",d.has(l)?o[u]=c:d.set(l,c));for(u=0;u<f;++u)l=a.call(e,s[u],u,s)+"",(c=d.get(l))?(n[u]=c,c.__data__=s[u],d.delete(l)):r[u]=new i["EnterNode"](e,s[u]);for(u=0;u<h;++u)(c=t[u])&&d.get(p[u])===c&&(o[u]=c)}function datum(e){return e.__data__}t["default"]=function(e,t){if(!arguments.length)return Array.from(this,datum);var r=t?bindKey:bindIndex,i=this._parents,a=this._groups;"function"!==typeof e&&(e=Object(s["default"])(e));for(var u=a.length,c=new Array(u),l=new Array(u),d=new Array(u),h=0;h<u;++h){var f=i[h],p=a[h],m=p.length,_=Object(o["default"])(e.call(f,f&&f.__data__,h,i)),g=_.length,b=l[h]=new Array(g),v=c[h]=new Array(g),M=d[h]=new Array(m);r(f,p,b,v,M,_,t);for(var T,S,C=0,E=0;C<g;++C)if(T=b[C]){C>=E&&(E=C+1);while(!(S=v[E])&&++E<g);T._next=S||null}}return c=new n["Selection"](c,i),c._enter=l,c._exit=d,c}},"./node_modules/d3-selection/src/selection/datum.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},"./node_modules/d3-selection/src/selection/dispatch.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/window.js");function dispatchEvent(e,t,r){var i=Object(n["default"])(e),o=i.CustomEvent;"function"===typeof o?o=new o(t,r):(o=i.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}t["default"]=function(e,t){return this.each(("function"===typeof t?dispatchFunction:dispatchConstant)(e,t))}},"./node_modules/d3-selection/src/selection/each.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,o=t[r],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this}},"./node_modules/d3-selection/src/selection/empty.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){return!this.node()}},"./node_modules/d3-selection/src/selection/enter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EnterNode",(function(){return EnterNode}));var n=r("./node_modules/d3-selection/src/selection/sparse.js"),i=r("./node_modules/d3-selection/src/selection/index.js");function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t["default"]=function(){return new i["Selection"](this._enter||this._groups.map(n["default"]),this._parents)},EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},"./node_modules/d3-selection/src/selection/exit.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/sparse.js"),i=r("./node_modules/d3-selection/src/selection/index.js");t["default"]=function(){return new i["Selection"](this._exit||this._groups.map(n["default"]),this._parents)}},"./node_modules/d3-selection/src/selection/filter.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-selection/src/matcher.js");t["default"]=function(e){"function"!==typeof e&&(e=Object(i["default"])(e));for(var t=this._groups,r=t.length,o=new Array(r),s=0;s<r;++s)for(var a,u=t[s],c=u.length,l=o[s]=[],d=0;d<c;++d)(a=u[d])&&e.call(a,a.__data__,d,u)&&l.push(a);return new n["Selection"](o,this._parents)}},"./node_modules/d3-selection/src/selection/html.js":function(e,t,r){"use strict";function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}r.r(t),t["default"]=function(e){return arguments.length?this.each(null==e?htmlRemove:("function"===typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}},"./node_modules/d3-selection/src/selection/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"root",(function(){return N})),r.d(t,"Selection",(function(){return Selection}));var n=r("./node_modules/d3-selection/src/selection/select.js"),i=r("./node_modules/d3-selection/src/selection/selectAll.js"),o=r("./node_modules/d3-selection/src/selection/selectChild.js"),s=r("./node_modules/d3-selection/src/selection/selectChildren.js"),a=r("./node_modules/d3-selection/src/selection/filter.js"),u=r("./node_modules/d3-selection/src/selection/data.js"),c=r("./node_modules/d3-selection/src/selection/enter.js"),l=r("./node_modules/d3-selection/src/selection/exit.js"),d=r("./node_modules/d3-selection/src/selection/join.js"),h=r("./node_modules/d3-selection/src/selection/merge.js"),f=r("./node_modules/d3-selection/src/selection/order.js"),p=r("./node_modules/d3-selection/src/selection/sort.js"),m=r("./node_modules/d3-selection/src/selection/call.js"),_=r("./node_modules/d3-selection/src/selection/nodes.js"),g=r("./node_modules/d3-selection/src/selection/node.js"),b=r("./node_modules/d3-selection/src/selection/size.js"),v=r("./node_modules/d3-selection/src/selection/empty.js"),M=r("./node_modules/d3-selection/src/selection/each.js"),T=r("./node_modules/d3-selection/src/selection/attr.js"),S=r("./node_modules/d3-selection/src/selection/style.js"),C=r("./node_modules/d3-selection/src/selection/property.js"),E=r("./node_modules/d3-selection/src/selection/classed.js"),P=r("./node_modules/d3-selection/src/selection/text.js"),A=r("./node_modules/d3-selection/src/selection/html.js"),j=r("./node_modules/d3-selection/src/selection/raise.js"),O=r("./node_modules/d3-selection/src/selection/lower.js"),R=r("./node_modules/d3-selection/src/selection/append.js"),I=r("./node_modules/d3-selection/src/selection/insert.js"),w=r("./node_modules/d3-selection/src/selection/remove.js"),D=r("./node_modules/d3-selection/src/selection/clone.js"),F=r("./node_modules/d3-selection/src/selection/datum.js"),B=r("./node_modules/d3-selection/src/selection/on.js"),L=r("./node_modules/d3-selection/src/selection/dispatch.js"),V=r("./node_modules/d3-selection/src/selection/iterator.js"),N=[null];function Selection(e,t){this._groups=e,this._parents=t}function selection(){return new Selection([[document.documentElement]],N)}function selection_selection(){return this}Selection.prototype=selection.prototype={constructor:Selection,select:n["default"],selectAll:i["default"],selectChild:o["default"],selectChildren:s["default"],filter:a["default"],data:u["default"],enter:c["default"],exit:l["default"],join:d["default"],merge:h["default"],selection:selection_selection,order:f["default"],sort:p["default"],call:m["default"],nodes:_["default"],node:g["default"],size:b["default"],empty:v["default"],each:M["default"],attr:T["default"],style:S["default"],property:C["default"],classed:E["default"],text:P["default"],html:A["default"],raise:j["default"],lower:O["default"],append:R["default"],insert:I["default"],remove:w["default"],clone:D["default"],datum:F["default"],on:B["default"],dispatch:L["default"],[Symbol.iterator]:V["default"]},t["default"]=selection},"./node_modules/d3-selection/src/selection/insert.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/creator.js"),i=r("./node_modules/d3-selection/src/selector.js");function constantNull(){return null}t["default"]=function(e,t){var r="function"===typeof e?e:Object(n["default"])(e),o=null==t?constantNull:"function"===typeof t?t:Object(i["default"])(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)}))}},"./node_modules/d3-selection/src/selection/iterator.js":function(e,t,r){"use strict";r.r(t),t["default"]=function*(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n,i=e[t],o=0,s=i.length;o<s;++o)(n=i[o])&&(yield n)}},"./node_modules/d3-selection/src/selection/join.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t,r){var n=this.enter(),i=this,o=this.exit();return n="function"===typeof e?e(n):n.append(e+""),null!=t&&(i=t(i)),null==r?o.remove():r(o),n&&i?n.merge(i).order():i}},"./node_modules/d3-selection/src/selection/lower.js":function(e,t,r){"use strict";function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}r.r(t),t["default"]=function(){return this.each(lower)}},"./node_modules/d3-selection/src/selection/merge.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js");t["default"]=function(e){if(!(e instanceof n["Selection"]))throw new Error("invalid merge");for(var t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c,l=t[u],d=r[u],h=l.length,f=a[u]=new Array(h),p=0;p<h;++p)(c=l[p]||d[p])&&(f[p]=c);for(;u<i;++u)a[u]=t[u];return new n["Selection"](a,this._parents)}},"./node_modules/d3-selection/src/selection/node.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var s=n[i];if(s)return s}return null}},"./node_modules/d3-selection/src/selection/nodes.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){return Array.from(this)}},"./node_modules/d3-selection/src/selection/on.js":function(e,t,r){"use strict";function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}}))}function onRemove(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,o=t.length;n<o;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?t.length=i:delete this.__on}}}function onAdd(e,t,r){return function(){var n,i=this.__on,o=contextListener(t);if(i)for(var s=0,a=i.length;s<a;++s)if((n=i[s]).type===e.type&&n.name===e.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=o,n.options=r),void(n.value=t);this.addEventListener(e.type,o,r),n={type:e.type,name:e.name,value:t,listener:o,options:r},i?i.push(n):this.__on=[n]}}r.r(t),t["default"]=function(e,t,r){var n,i,o=parseTypenames(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?onAdd:onRemove,n=0;n<s;++n)this.each(a(o[n],t,r));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(n=0,u=a[c];n<s;++n)if((i=o[n]).type===u.type&&i.name===u.name)return u.value}},"./node_modules/d3-selection/src/selection/order.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],o=i.length-1,s=i[o];--o>=0;)(n=i[o])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this}},"./node_modules/d3-selection/src/selection/property.js":function(e,t,r){"use strict";function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}r.r(t),t["default"]=function(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"===typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}},"./node_modules/d3-selection/src/selection/raise.js":function(e,t,r){"use strict";function raise(){this.nextSibling&&this.parentNode.appendChild(this)}r.r(t),t["default"]=function(){return this.each(raise)}},"./node_modules/d3-selection/src/selection/remove.js":function(e,t,r){"use strict";function remove(){var e=this.parentNode;e&&e.removeChild(this)}r.r(t),t["default"]=function(){return this.each(remove)}},"./node_modules/d3-selection/src/selection/select.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-selection/src/selector.js");t["default"]=function(e){"function"!==typeof e&&(e=Object(i["default"])(e));for(var t=this._groups,r=t.length,o=new Array(r),s=0;s<r;++s)for(var a,u,c=t[s],l=c.length,d=o[s]=new Array(l),h=0;h<l;++h)(a=c[h])&&(u=e.call(a,a.__data__,h,c))&&("__data__"in a&&(u.__data__=a.__data__),d[h]=u);return new n["Selection"](o,this._parents)}},"./node_modules/d3-selection/src/selection/selectAll.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-selection/src/array.js"),o=r("./node_modules/d3-selection/src/selectorAll.js");function arrayAll(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Object(i["default"])(t)}}t["default"]=function(e){e="function"===typeof e?arrayAll(e):Object(o["default"])(e);for(var t=this._groups,r=t.length,i=[],s=[],a=0;a<r;++a)for(var u,c=t[a],l=c.length,d=0;d<l;++d)(u=c[d])&&(i.push(e.call(u,u.__data__,d,c)),s.push(u));return new n["Selection"](i,s)}},"./node_modules/d3-selection/src/selection/selectChild.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/matcher.js"),i=Array.prototype.find;function childFind(e){return function(){return i.call(this.children,e)}}function childFirst(){return this.firstElementChild}t["default"]=function(e){return this.select(null==e?childFirst:childFind("function"===typeof e?e:Object(n["childMatcher"])(e)))}},"./node_modules/d3-selection/src/selection/selectChildren.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/matcher.js"),i=Array.prototype.filter;function children(){return this.children}function childrenFilter(e){return function(){return i.call(this.children,e)}}t["default"]=function(e){return this.selectAll(null==e?children:childrenFilter("function"===typeof e?e:Object(n["childMatcher"])(e)))}},"./node_modules/d3-selection/src/selection/size.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){let e=0;for(const t of this)++e;return e}},"./node_modules/d3-selection/src/selection/sort.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js");function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t["default"]=function(e){function compareNode(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=ascending);for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s,a=t[o],u=a.length,c=i[o]=new Array(u),l=0;l<u;++l)(s=a[l])&&(c[l]=s);c.sort(compareNode)}return new n["Selection"](i,this._parents).order()}},"./node_modules/d3-selection/src/selection/sparse.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return new Array(e.length)}},"./node_modules/d3-selection/src/selection/style.js":function(e,t,r){"use strict";r.r(t),r.d(t,"styleValue",(function(){return styleValue}));var n=r("./node_modules/d3-selection/src/window.js");function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,r){return function(){this.style.setProperty(e,t,r)}}function styleFunction(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function styleValue(e,t){return e.style.getPropertyValue(t)||Object(n["default"])(e).getComputedStyle(e,null).getPropertyValue(t)}t["default"]=function(e,t,r){return arguments.length>1?this.each((null==t?styleRemove:"function"===typeof t?styleFunction:styleConstant)(e,t,null==r?"":r)):styleValue(this.node(),e)}},"./node_modules/d3-selection/src/selection/text.js":function(e,t,r){"use strict";function textRemove(){this.textContent=""}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}r.r(t),t["default"]=function(e){return arguments.length?this.each(null==e?textRemove:("function"===typeof e?textFunction:textConstant)(e)):this.node().textContent}},"./node_modules/d3-selection/src/selector.js":function(e,t,r){"use strict";function none(){}r.r(t),t["default"]=function(e){return null==e?none:function(){return this.querySelector(e)}}},"./node_modules/d3-selection/src/selectorAll.js":function(e,t,r){"use strict";function empty(){return[]}r.r(t),t["default"]=function(e){return null==e?empty:function(){return this.querySelectorAll(e)}}},"./node_modules/d3-selection/src/sourceEvent.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){let t;while(t=e.sourceEvent)e=t;return e}},"./node_modules/d3-selection/src/window.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},"./node_modules/d3-shape/src/arc.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-shape/src/constant.js"),o=r("./node_modules/d3-shape/src/math.js");function arcInnerRadius(e){return e.innerRadius}function arcOuterRadius(e){return e.outerRadius}function arcStartAngle(e){return e.startAngle}function arcEndAngle(e){return e.endAngle}function arcPadAngle(e){return e&&e.padAngle}function intersect(e,t,r,n,i,s,a,u){var c=r-e,l=n-t,d=a-i,h=u-s,f=h*c-d*l;if(!(f*f<o["epsilon"]))return f=(d*(t-s)-h*(e-i))/f,[e+f*c,t+f*l]}function cornerTangents(e,t,r,n,i,s,a){var u=e-r,c=t-n,l=(a?s:-s)/Object(o["sqrt"])(u*u+c*c),d=l*c,h=-l*u,f=e+d,p=t+h,m=r+d,_=n+h,g=(f+m)/2,b=(p+_)/2,v=m-f,M=_-p,T=v*v+M*M,S=i-s,C=f*_-m*p,E=(M<0?-1:1)*Object(o["sqrt"])(Object(o["max"])(0,S*S*T-C*C)),P=(C*M-v*E)/T,A=(-C*v-M*E)/T,j=(C*M+v*E)/T,O=(-C*v+M*E)/T,R=P-g,I=A-b,w=j-g,D=O-b;return R*R+I*I>w*w+D*D&&(P=j,A=O),{cx:P,cy:A,x01:-d,y01:-h,x11:P*(i/S-1),y11:A*(i/S-1)}}t["default"]=function(){var e=arcInnerRadius,t=arcOuterRadius,r=Object(i["default"])(0),s=null,a=arcStartAngle,u=arcEndAngle,c=arcPadAngle,l=null;function arc(){var i,d,h=+e.apply(this,arguments),f=+t.apply(this,arguments),p=a.apply(this,arguments)-o["halfPi"],m=u.apply(this,arguments)-o["halfPi"],_=Object(o["abs"])(m-p),g=m>p;if(l||(l=i=Object(n["default"])()),f<h&&(d=f,f=h,h=d),f>o["epsilon"])if(_>o["tau"]-o["epsilon"])l.moveTo(f*Object(o["cos"])(p),f*Object(o["sin"])(p)),l.arc(0,0,f,p,m,!g),h>o["epsilon"]&&(l.moveTo(h*Object(o["cos"])(m),h*Object(o["sin"])(m)),l.arc(0,0,h,m,p,g));else{var b,v,M=p,T=m,S=p,C=m,E=_,P=_,A=c.apply(this,arguments)/2,j=A>o["epsilon"]&&(s?+s.apply(this,arguments):Object(o["sqrt"])(h*h+f*f)),O=Object(o["min"])(Object(o["abs"])(f-h)/2,+r.apply(this,arguments)),R=O,I=O;if(j>o["epsilon"]){var w=Object(o["asin"])(j/h*Object(o["sin"])(A)),D=Object(o["asin"])(j/f*Object(o["sin"])(A));(E-=2*w)>o["epsilon"]?(w*=g?1:-1,S+=w,C-=w):(E=0,S=C=(p+m)/2),(P-=2*D)>o["epsilon"]?(D*=g?1:-1,M+=D,T-=D):(P=0,M=T=(p+m)/2)}var F=f*Object(o["cos"])(M),B=f*Object(o["sin"])(M),L=h*Object(o["cos"])(C),V=h*Object(o["sin"])(C);if(O>o["epsilon"]){var N,k=f*Object(o["cos"])(T),U=f*Object(o["sin"])(T),z=h*Object(o["cos"])(S),G=h*Object(o["sin"])(S);if(_<o["pi"]&&(N=intersect(F,B,z,G,k,U,L,V))){var W=F-N[0],H=B-N[1],X=k-N[0],q=U-N[1],K=1/Object(o["sin"])(Object(o["acos"])((W*X+H*q)/(Object(o["sqrt"])(W*W+H*H)*Object(o["sqrt"])(X*X+q*q)))/2),Y=Object(o["sqrt"])(N[0]*N[0]+N[1]*N[1]);R=Object(o["min"])(O,(h-Y)/(K-1)),I=Object(o["min"])(O,(f-Y)/(K+1))}}P>o["epsilon"]?I>o["epsilon"]?(b=cornerTangents(z,G,F,B,f,I,g),v=cornerTangents(k,U,L,V,f,I,g),l.moveTo(b.cx+b.x01,b.cy+b.y01),I<O?l.arc(b.cx,b.cy,I,Object(o["atan2"])(b.y01,b.x01),Object(o["atan2"])(v.y01,v.x01),!g):(l.arc(b.cx,b.cy,I,Object(o["atan2"])(b.y01,b.x01),Object(o["atan2"])(b.y11,b.x11),!g),l.arc(0,0,f,Object(o["atan2"])(b.cy+b.y11,b.cx+b.x11),Object(o["atan2"])(v.cy+v.y11,v.cx+v.x11),!g),l.arc(v.cx,v.cy,I,Object(o["atan2"])(v.y11,v.x11),Object(o["atan2"])(v.y01,v.x01),!g))):(l.moveTo(F,B),l.arc(0,0,f,M,T,!g)):l.moveTo(F,B),h>o["epsilon"]&&E>o["epsilon"]?R>o["epsilon"]?(b=cornerTangents(L,V,k,U,h,-R,g),v=cornerTangents(F,B,z,G,h,-R,g),l.lineTo(b.cx+b.x01,b.cy+b.y01),R<O?l.arc(b.cx,b.cy,R,Object(o["atan2"])(b.y01,b.x01),Object(o["atan2"])(v.y01,v.x01),!g):(l.arc(b.cx,b.cy,R,Object(o["atan2"])(b.y01,b.x01),Object(o["atan2"])(b.y11,b.x11),!g),l.arc(0,0,h,Object(o["atan2"])(b.cy+b.y11,b.cx+b.x11),Object(o["atan2"])(v.cy+v.y11,v.cx+v.x11),g),l.arc(v.cx,v.cy,R,Object(o["atan2"])(v.y11,v.x11),Object(o["atan2"])(v.y01,v.x01),!g))):l.arc(0,0,h,C,S,g):l.lineTo(L,V)}else l.moveTo(0,0);if(l.closePath(),i)return l=null,i+""||null}return arc.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-o["pi"]/2;return[Object(o["cos"])(n)*r,Object(o["sin"])(n)*r]},arc.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Object(i["default"])(+t),arc):e},arc.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Object(i["default"])(+e),arc):t},arc.cornerRadius=function(e){return arguments.length?(r="function"===typeof e?e:Object(i["default"])(+e),arc):r},arc.padRadius=function(e){return arguments.length?(s=null==e?null:"function"===typeof e?e:Object(i["default"])(+e),arc):s},arc.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:Object(i["default"])(+e),arc):a},arc.endAngle=function(e){return arguments.length?(u="function"===typeof e?e:Object(i["default"])(+e),arc):u},arc.padAngle=function(e){return arguments.length?(c="function"===typeof e?e:Object(i["default"])(+e),arc):c},arc.context=function(e){return arguments.length?(l=null==e?null:e,arc):l},arc}},"./node_modules/d3-shape/src/area.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-shape/src/array.js"),o=r("./node_modules/d3-shape/src/constant.js"),s=r("./node_modules/d3-shape/src/curve/linear.js"),a=r("./node_modules/d3-shape/src/line.js"),u=r("./node_modules/d3-shape/src/point.js");t["default"]=function(e,t,r){var c=null,l=Object(o["default"])(!0),d=null,h=s["default"],f=null;function area(o){var s,a,u,p,m,_=(o=Object(i["default"])(o)).length,g=!1,b=new Array(_),v=new Array(_);for(null==d&&(f=h(m=Object(n["default"])())),s=0;s<=_;++s){if(!(s<_&&l(p=o[s],s,o))===g)if(g=!g)a=s,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),u=s-1;u>=a;--u)f.point(b[u],v[u]);f.lineEnd(),f.areaEnd()}g&&(b[s]=+e(p,s,o),v[s]=+t(p,s,o),f.point(c?+c(p,s,o):b[s],r?+r(p,s,o):v[s]))}if(m)return f=null,m+""||null}function arealine(){return Object(a["default"])().defined(l).curve(h).context(d)}return e="function"===typeof e?e:void 0===e?u["x"]:Object(o["default"])(+e),t="function"===typeof t?t:void 0===t?Object(o["default"])(0):Object(o["default"])(+t),r="function"===typeof r?r:void 0===r?u["y"]:Object(o["default"])(+r),area.x=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["default"])(+t),c=null,area):e},area.x0=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["default"])(+t),area):e},area.x1=function(e){return arguments.length?(c=null==e?null:"function"===typeof e?e:Object(o["default"])(+e),area):c},area.y=function(e){return arguments.length?(t="function"===typeof e?e:Object(o["default"])(+e),r=null,area):t},area.y0=function(e){return arguments.length?(t="function"===typeof e?e:Object(o["default"])(+e),area):t},area.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Object(o["default"])(+e),area):r},area.lineX0=area.lineY0=function(){return arealine().x(e).y(t)},area.lineY1=function(){return arealine().x(e).y(r)},area.lineX1=function(){return arealine().x(c).y(t)},area.defined=function(e){return arguments.length?(l="function"===typeof e?e:Object(o["default"])(!!e),area):l},area.curve=function(e){return arguments.length?(h=e,null!=d&&(f=h(d)),area):h},area.context=function(e){return arguments.length?(null==e?d=f=null:f=h(d=e),area):d},area}},"./node_modules/d3-shape/src/areaRadial.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/curve/radial.js"),i=r("./node_modules/d3-shape/src/area.js"),o=r("./node_modules/d3-shape/src/lineRadial.js");t["default"]=function(){var e=Object(i["default"])().curve(n["curveRadialLinear"]),t=e.curve,r=e.lineX0,s=e.lineX1,a=e.lineY0,u=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Object(o["lineRadial"])(r())},delete e.lineX0,e.lineEndAngle=function(){return Object(o["lineRadial"])(s())},delete e.lineX1,e.lineInnerRadius=function(){return Object(o["lineRadial"])(a())},delete e.lineY0,e.lineOuterRadius=function(){return Object(o["lineRadial"])(u())},delete e.lineY1,e.curve=function(e){return arguments.length?t(Object(n["default"])(e)):t()._curve},e}},"./node_modules/d3-shape/src/array.js":function(e,t,r){"use strict";r.r(t),r.d(t,"slice",(function(){return n}));var n=Array.prototype.slice;t["default"]=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}},"./node_modules/d3-shape/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return function constant(){return e}}},"./node_modules/d3-shape/src/curve/basis.js":function(e,t,r){"use strict";function point(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Basis(e){this._context=e}r.r(t),r.d(t,"point",(function(){return point})),r.d(t,"Basis",(function(){return Basis})),Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},t["default"]=function(e){return new Basis(e)}},"./node_modules/d3-shape/src/curve/basisClosed.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/noop.js"),i=r("./node_modules/d3-shape/src/curve/basis.js");function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:n["default"],areaEnd:n["default"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Object(i["point"])(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},t["default"]=function(e){return new BasisClosed(e)}},"./node_modules/d3-shape/src/curve/basisOpen.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/curve/basis.js");function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Object(n["point"])(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},t["default"]=function(e){return new BasisOpen(e)}},"./node_modules/d3-shape/src/curve/bump.js":function(e,t,r){"use strict";r.r(t),r.d(t,"bumpX",(function(){return bumpX})),r.d(t,"bumpY",(function(){return bumpY}));class Bump{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}},"./node_modules/d3-shape/src/curve/bundle.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/curve/basis.js");function Bundle(e,t){this._basis=new n["Basis"](e),this._beta=t}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0){var n,i=e[0],o=t[0],s=e[r]-i,a=t[r]-o,u=-1;while(++u<=r)n=u/r,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+n*s),this._beta*t[u]+(1-this._beta)*(o+n*a))}this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},t["default"]=function custom(e){function bundle(t){return 1===e?new n["Basis"](t):new Bundle(t,e)}return bundle.beta=function(e){return custom(+e)},bundle}(.85)},"./node_modules/d3-shape/src/curve/cardinal.js":function(e,t,r){"use strict";function point(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Cardinal(e,t){this._context=e,this._k=(1-t)/6}r.r(t),r.d(t,"point",(function(){return point})),r.d(t,"Cardinal",(function(){return Cardinal})),Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:point(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function cardinal(t){return new Cardinal(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0)},"./node_modules/d3-shape/src/curve/cardinalClosed.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CardinalClosed",(function(){return CardinalClosed}));var n=r("./node_modules/d3-shape/src/noop.js"),i=r("./node_modules/d3-shape/src/curve/cardinal.js");function CardinalClosed(e,t){this._context=e,this._k=(1-t)/6}CardinalClosed.prototype={areaStart:n["default"],areaEnd:n["default"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Object(i["point"])(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function cardinal(t){return new CardinalClosed(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0)},"./node_modules/d3-shape/src/curve/cardinalOpen.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CardinalOpen",(function(){return CardinalOpen}));var n=r("./node_modules/d3-shape/src/curve/cardinal.js");function CardinalOpen(e,t){this._context=e,this._k=(1-t)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(n["point"])(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function cardinal(t){return new CardinalOpen(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0)},"./node_modules/d3-shape/src/curve/catmullRom.js":function(e,t,r){"use strict";r.r(t),r.d(t,"point",(function(){return point}));var n=r("./node_modules/d3-shape/src/math.js"),i=r("./node_modules/d3-shape/src/curve/cardinal.js");function point(e,t,r){var i=e._x1,o=e._y1,s=e._x2,a=e._y2;if(e._l01_a>n["epsilon"]){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,o=(o*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>n["epsilon"]){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/d,a=(a*l+e._y1*e._l23_2a-r*e._l12_2a)/d}e._context.bezierCurveTo(i,o,s,a,e._x2,e._y2)}function CatmullRom(e,t){this._context=e,this._alpha=t}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:point(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function catmullRom(t){return e?new CatmullRom(t,e):new i["Cardinal"](t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5)},"./node_modules/d3-shape/src/curve/catmullRomClosed.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/curve/cardinalClosed.js"),i=r("./node_modules/d3-shape/src/noop.js"),o=r("./node_modules/d3-shape/src/curve/catmullRom.js");function CatmullRomClosed(e,t){this._context=e,this._alpha=t}CatmullRomClosed.prototype={areaStart:i["default"],areaEnd:i["default"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Object(o["point"])(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function catmullRom(t){return e?new CatmullRomClosed(t,e):new n["CardinalClosed"](t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5)},"./node_modules/d3-shape/src/curve/catmullRomOpen.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/curve/cardinalOpen.js"),i=r("./node_modules/d3-shape/src/curve/catmullRom.js");function CatmullRomOpen(e,t){this._context=e,this._alpha=t}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(i["point"])(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t["default"]=function custom(e){function catmullRom(t){return e?new CatmullRomOpen(t,e):new n["CardinalOpen"](t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5)},"./node_modules/d3-shape/src/curve/linear.js":function(e,t,r){"use strict";function Linear(e){this._context=e}r.r(t),Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}},t["default"]=function(e){return new Linear(e)}},"./node_modules/d3-shape/src/curve/linearClosed.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/noop.js");function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:n["default"],areaEnd:n["default"],lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},t["default"]=function(e){return new LinearClosed(e)}},"./node_modules/d3-shape/src/curve/monotone.js":function(e,t,r){"use strict";function sign(e){return e<0?-1:1}function slope3(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(sign(o)+sign(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function slope2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function point(e,t,r){var n=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-n)/3;e._context.bezierCurveTo(n+a,i+a*t,o-a,s-a*r,o,s)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}r.r(t),r.d(t,"monotoneX",(function(){return monotoneX})),r.d(t,"monotoneY",(function(){return monotoneY})),MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,r=slope3(this,e,t)),r);break;default:point(this,this._t0,r=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)},ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}}},"./node_modules/d3-shape/src/curve/natural.js":function(e,t,r){"use strict";function Natural(e){this._context=e}function controlPoints(e){var t,r,n=e.length-1,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}r.r(t),Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=controlPoints(e),i=controlPoints(t),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},t["default"]=function(e){return new Natural(e)}},"./node_modules/d3-shape/src/curve/radial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"curveRadialLinear",(function(){return i})),r.d(t,"default",(function(){return curveRadial}));var n=r("./node_modules/d3-shape/src/curve/linear.js"),i=curveRadial(n["default"]);function Radial(e){this._curve=e}function curveRadial(e){function radial(t){return new Radial(e(t))}return radial._curve=e,radial}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}}},"./node_modules/d3-shape/src/curve/step.js":function(e,t,r){"use strict";function Step(e,t){this._context=e,this._t=t}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}r.r(t),r.d(t,"stepBefore",(function(){return stepBefore})),r.d(t,"stepAfter",(function(){return stepAfter})),Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}this._x=e,this._y=t}},t["default"]=function(e){return new Step(e,.5)}},"./node_modules/d3-shape/src/descending.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}},"./node_modules/d3-shape/src/identity.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return e}},"./node_modules/d3-shape/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/arc.js");r.d(t,"arc",(function(){return n["default"]}));var i=r("./node_modules/d3-shape/src/area.js");r.d(t,"area",(function(){return i["default"]}));var o=r("./node_modules/d3-shape/src/line.js");r.d(t,"line",(function(){return o["default"]}));var s=r("./node_modules/d3-shape/src/pie.js");r.d(t,"pie",(function(){return s["default"]}));var a=r("./node_modules/d3-shape/src/areaRadial.js");r.d(t,"areaRadial",(function(){return a["default"]})),r.d(t,"radialArea",(function(){return a["default"]}));var u=r("./node_modules/d3-shape/src/lineRadial.js");r.d(t,"lineRadial",(function(){return u["default"]})),r.d(t,"radialLine",(function(){return u["default"]}));var c=r("./node_modules/d3-shape/src/pointRadial.js");r.d(t,"pointRadial",(function(){return c["default"]}));var l=r("./node_modules/d3-shape/src/link/index.js");r.d(t,"linkHorizontal",(function(){return l["linkHorizontal"]})),r.d(t,"linkVertical",(function(){return l["linkVertical"]})),r.d(t,"linkRadial",(function(){return l["linkRadial"]}));var d=r("./node_modules/d3-shape/src/symbol.js");r.d(t,"symbol",(function(){return d["default"]})),r.d(t,"symbols",(function(){return d["symbols"]}));var h=r("./node_modules/d3-shape/src/symbol/circle.js");r.d(t,"symbolCircle",(function(){return h["default"]}));var f=r("./node_modules/d3-shape/src/symbol/cross.js");r.d(t,"symbolCross",(function(){return f["default"]}));var p=r("./node_modules/d3-shape/src/symbol/diamond.js");r.d(t,"symbolDiamond",(function(){return p["default"]}));var m=r("./node_modules/d3-shape/src/symbol/square.js");r.d(t,"symbolSquare",(function(){return m["default"]}));var _=r("./node_modules/d3-shape/src/symbol/star.js");r.d(t,"symbolStar",(function(){return _["default"]}));var g=r("./node_modules/d3-shape/src/symbol/triangle.js");r.d(t,"symbolTriangle",(function(){return g["default"]}));var b=r("./node_modules/d3-shape/src/symbol/wye.js");r.d(t,"symbolWye",(function(){return b["default"]}));var v=r("./node_modules/d3-shape/src/curve/basisClosed.js");r.d(t,"curveBasisClosed",(function(){return v["default"]}));var M=r("./node_modules/d3-shape/src/curve/basisOpen.js");r.d(t,"curveBasisOpen",(function(){return M["default"]}));var T=r("./node_modules/d3-shape/src/curve/basis.js");r.d(t,"curveBasis",(function(){return T["default"]}));var S=r("./node_modules/d3-shape/src/curve/bump.js");r.d(t,"curveBumpX",(function(){return S["bumpX"]})),r.d(t,"curveBumpY",(function(){return S["bumpY"]}));var C=r("./node_modules/d3-shape/src/curve/bundle.js");r.d(t,"curveBundle",(function(){return C["default"]}));var E=r("./node_modules/d3-shape/src/curve/cardinalClosed.js");r.d(t,"curveCardinalClosed",(function(){return E["default"]}));var P=r("./node_modules/d3-shape/src/curve/cardinalOpen.js");r.d(t,"curveCardinalOpen",(function(){return P["default"]}));var A=r("./node_modules/d3-shape/src/curve/cardinal.js");r.d(t,"curveCardinal",(function(){return A["default"]}));var j=r("./node_modules/d3-shape/src/curve/catmullRomClosed.js");r.d(t,"curveCatmullRomClosed",(function(){return j["default"]}));var O=r("./node_modules/d3-shape/src/curve/catmullRomOpen.js");r.d(t,"curveCatmullRomOpen",(function(){return O["default"]}));var R=r("./node_modules/d3-shape/src/curve/catmullRom.js");r.d(t,"curveCatmullRom",(function(){return R["default"]}));var I=r("./node_modules/d3-shape/src/curve/linearClosed.js");r.d(t,"curveLinearClosed",(function(){return I["default"]}));var w=r("./node_modules/d3-shape/src/curve/linear.js");r.d(t,"curveLinear",(function(){return w["default"]}));var D=r("./node_modules/d3-shape/src/curve/monotone.js");r.d(t,"curveMonotoneX",(function(){return D["monotoneX"]})),r.d(t,"curveMonotoneY",(function(){return D["monotoneY"]}));var F=r("./node_modules/d3-shape/src/curve/natural.js");r.d(t,"curveNatural",(function(){return F["default"]}));var B=r("./node_modules/d3-shape/src/curve/step.js");r.d(t,"curveStep",(function(){return B["default"]})),r.d(t,"curveStepAfter",(function(){return B["stepAfter"]})),r.d(t,"curveStepBefore",(function(){return B["stepBefore"]}));var L=r("./node_modules/d3-shape/src/stack.js");r.d(t,"stack",(function(){return L["default"]}));var V=r("./node_modules/d3-shape/src/offset/expand.js");r.d(t,"stackOffsetExpand",(function(){return V["default"]}));var N=r("./node_modules/d3-shape/src/offset/diverging.js");r.d(t,"stackOffsetDiverging",(function(){return N["default"]}));var k=r("./node_modules/d3-shape/src/offset/none.js");r.d(t,"stackOffsetNone",(function(){return k["default"]}));var U=r("./node_modules/d3-shape/src/offset/silhouette.js");r.d(t,"stackOffsetSilhouette",(function(){return U["default"]}));var z=r("./node_modules/d3-shape/src/offset/wiggle.js");r.d(t,"stackOffsetWiggle",(function(){return z["default"]}));var G=r("./node_modules/d3-shape/src/order/appearance.js");r.d(t,"stackOrderAppearance",(function(){return G["default"]}));var W=r("./node_modules/d3-shape/src/order/ascending.js");r.d(t,"stackOrderAscending",(function(){return W["default"]}));var H=r("./node_modules/d3-shape/src/order/descending.js");r.d(t,"stackOrderDescending",(function(){return H["default"]}));var X=r("./node_modules/d3-shape/src/order/insideOut.js");r.d(t,"stackOrderInsideOut",(function(){return X["default"]}));var q=r("./node_modules/d3-shape/src/order/none.js");r.d(t,"stackOrderNone",(function(){return q["default"]}));var K=r("./node_modules/d3-shape/src/order/reverse.js");r.d(t,"stackOrderReverse",(function(){return K["default"]}))},"./node_modules/d3-shape/src/line.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-shape/src/array.js"),o=r("./node_modules/d3-shape/src/constant.js"),s=r("./node_modules/d3-shape/src/curve/linear.js"),a=r("./node_modules/d3-shape/src/point.js");t["default"]=function(e,t){var r=Object(o["default"])(!0),u=null,c=s["default"],l=null;function line(o){var s,a,d,h=(o=Object(i["default"])(o)).length,f=!1;for(null==u&&(l=c(d=Object(n["default"])())),s=0;s<=h;++s)!(s<h&&r(a=o[s],s,o))===f&&((f=!f)?l.lineStart():l.lineEnd()),f&&l.point(+e(a,s,o),+t(a,s,o));if(d)return l=null,d+""||null}return e="function"===typeof e?e:void 0===e?a["x"]:Object(o["default"])(e),t="function"===typeof t?t:void 0===t?a["y"]:Object(o["default"])(t),line.x=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["default"])(+t),line):e},line.y=function(e){return arguments.length?(t="function"===typeof e?e:Object(o["default"])(+e),line):t},line.defined=function(e){return arguments.length?(r="function"===typeof e?e:Object(o["default"])(!!e),line):r},line.curve=function(e){return arguments.length?(c=e,null!=u&&(l=c(u)),line):c},line.context=function(e){return arguments.length?(null==e?u=l=null:l=c(u=e),line):u},line}},"./node_modules/d3-shape/src/lineRadial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lineRadial",(function(){return lineRadial}));var n=r("./node_modules/d3-shape/src/curve/radial.js"),i=r("./node_modules/d3-shape/src/line.js");function lineRadial(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(Object(n["default"])(e)):t()._curve},e}t["default"]=function(){return lineRadial(Object(i["default"])().curve(n["curveRadialLinear"]))}},"./node_modules/d3-shape/src/link/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"linkHorizontal",(function(){return linkHorizontal})),r.d(t,"linkVertical",(function(){return linkVertical})),r.d(t,"linkRadial",(function(){return linkRadial}));var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-shape/src/array.js"),o=r("./node_modules/d3-shape/src/constant.js"),s=r("./node_modules/d3-shape/src/point.js"),a=r("./node_modules/d3-shape/src/pointRadial.js");function linkSource(e){return e.source}function linkTarget(e){return e.target}function link(e){var t=linkSource,r=linkTarget,a=s["x"],u=s["y"],c=null;function link(){var o,s=i["slice"].call(arguments),l=t.apply(this,s),d=r.apply(this,s);if(c||(c=o=Object(n["default"])()),e(c,+a.apply(this,(s[0]=l,s)),+u.apply(this,s),+a.apply(this,(s[0]=d,s)),+u.apply(this,s)),o)return c=null,o+""||null}return link.source=function(e){return arguments.length?(t=e,link):t},link.target=function(e){return arguments.length?(r=e,link):r},link.x=function(e){return arguments.length?(a="function"===typeof e?e:Object(o["default"])(+e),link):a},link.y=function(e){return arguments.length?(u="function"===typeof e?e:Object(o["default"])(+e),link):u},link.context=function(e){return arguments.length?(c=null==e?null:e,link):c},link}function curveHorizontal(e,t,r,n,i){e.moveTo(t,r),e.bezierCurveTo(t=(t+n)/2,r,t,i,n,i)}function curveVertical(e,t,r,n,i){e.moveTo(t,r),e.bezierCurveTo(t,r=(r+i)/2,n,r,n,i)}function curveRadial(e,t,r,n,i){var o=Object(a["default"])(t,r),s=Object(a["default"])(t,r=(r+i)/2),u=Object(a["default"])(n,r),c=Object(a["default"])(n,i);e.moveTo(o[0],o[1]),e.bezierCurveTo(s[0],s[1],u[0],u[1],c[0],c[1])}function linkHorizontal(){return link(curveHorizontal)}function linkVertical(){return link(curveVertical)}function linkRadial(){var e=link(curveRadial);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}},"./node_modules/d3-shape/src/math.js":function(e,t,r){"use strict";r.r(t),r.d(t,"abs",(function(){return n})),r.d(t,"atan2",(function(){return i})),r.d(t,"cos",(function(){return o})),r.d(t,"max",(function(){return s})),r.d(t,"min",(function(){return a})),r.d(t,"sin",(function(){return u})),r.d(t,"sqrt",(function(){return c})),r.d(t,"epsilon",(function(){return l})),r.d(t,"pi",(function(){return d})),r.d(t,"halfPi",(function(){return h})),r.d(t,"tau",(function(){return f})),r.d(t,"acos",(function(){return acos})),r.d(t,"asin",(function(){return asin}));var n=Math.abs,i=Math.atan2,o=Math.cos,s=Math.max,a=Math.min,u=Math.sin,c=Math.sqrt,l=1e-12,d=Math.PI,h=d/2,f=2*d;function acos(e){return e>1?0:e<-1?d:Math.acos(e)}function asin(e){return e>=1?h:e<=-1?-h:Math.asin(e)}},"./node_modules/d3-shape/src/noop.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(){}},"./node_modules/d3-shape/src/offset/diverging.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){if((a=e.length)>0)for(var r,n,i,o,s,a,u=0,c=e[t[0]].length;u<c;++u)for(o=s=0,r=0;r<a;++r)(i=(n=e[t[r]][u])[1]-n[0])>0?(n[0]=o,n[1]=o+=i):i<0?(n[1]=s,n[0]=s+=i):(n[0]=0,n[1]=i)}},"./node_modules/d3-shape/src/offset/expand.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/offset/none.js");t["default"]=function(e,t){if((i=e.length)>0){for(var r,i,o,s=0,a=e[0].length;s<a;++s){for(o=r=0;r<i;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<i;++r)e[r][s][1]/=o}Object(n["default"])(e,t)}}},"./node_modules/d3-shape/src/offset/none.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){if((i=e.length)>1)for(var r,n,i,o=1,s=e[t[0]],a=s.length;o<i;++o)for(n=s,s=e[t[o]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}},"./node_modules/d3-shape/src/offset/silhouette.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/offset/none.js");t["default"]=function(e,t){if((r=e.length)>0){for(var r,i=0,o=e[t[0]],s=o.length;i<s;++i){for(var a=0,u=0;a<r;++a)u+=e[a][i][1]||0;o[i][1]+=o[i][0]=-u/2}Object(n["default"])(e,t)}}},"./node_modules/d3-shape/src/offset/wiggle.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/offset/none.js");t["default"]=function(e,t){if((o=e.length)>0&&(i=(r=e[t[0]]).length)>0){for(var r,i,o,s=0,a=1;a<i;++a){for(var u=0,c=0,l=0;u<o;++u){for(var d=e[t[u]],h=d[a][1]||0,f=d[a-1][1]||0,p=(h-f)/2,m=0;m<u;++m){var _=e[t[m]],g=_[a][1]||0,b=_[a-1][1]||0;p+=g-b}c+=h,l+=p*h}r[a-1][1]+=r[a-1][0]=s,c&&(s-=l/c)}r[a-1][1]+=r[a-1][0]=s,Object(n["default"])(e,t)}}},"./node_modules/d3-shape/src/order/appearance.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/order/none.js");function peak(e){var t,r=-1,n=0,i=e.length,o=-1/0;while(++r<i)(t=+e[r][1])>o&&(o=t,n=r);return n}t["default"]=function(e){var t=e.map(peak);return Object(n["default"])(e).sort((function(e,r){return t[e]-t[r]}))}},"./node_modules/d3-shape/src/order/ascending.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sum",(function(){return sum}));var n=r("./node_modules/d3-shape/src/order/none.js");function sum(e){var t,r=0,n=-1,i=e.length;while(++n<i)(t=+e[n][1])&&(r+=t);return r}t["default"]=function(e){var t=e.map(sum);return Object(n["default"])(e).sort((function(e,r){return t[e]-t[r]}))}},"./node_modules/d3-shape/src/order/descending.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/order/ascending.js");t["default"]=function(e){return Object(n["default"])(e).reverse()}},"./node_modules/d3-shape/src/order/insideOut.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/order/appearance.js"),i=r("./node_modules/d3-shape/src/order/ascending.js");t["default"]=function(e){var t,r,o=e.length,s=e.map(i["sum"]),a=Object(n["default"])(e),u=0,c=0,l=[],d=[];for(t=0;t<o;++t)r=a[t],u<c?(u+=s[r],l.push(r)):(c+=s[r],d.push(r));return d.reverse().concat(l)}},"./node_modules/d3-shape/src/order/none.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e){var t=e.length,r=new Array(t);while(--t>=0)r[t]=t;return r}},"./node_modules/d3-shape/src/order/reverse.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/order/none.js");t["default"]=function(e){return Object(n["default"])(e).reverse()}},"./node_modules/d3-shape/src/pie.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/array.js"),i=r("./node_modules/d3-shape/src/constant.js"),o=r("./node_modules/d3-shape/src/descending.js"),s=r("./node_modules/d3-shape/src/identity.js"),a=r("./node_modules/d3-shape/src/math.js");t["default"]=function(){var e=s["default"],t=o["default"],r=null,u=Object(i["default"])(0),c=Object(i["default"])(a["tau"]),l=Object(i["default"])(0);function pie(i){var o,s,d,h,f,p=(i=Object(n["default"])(i)).length,m=0,_=new Array(p),g=new Array(p),b=+u.apply(this,arguments),v=Math.min(a["tau"],Math.max(-a["tau"],c.apply(this,arguments)-b)),M=Math.min(Math.abs(v)/p,l.apply(this,arguments)),T=M*(v<0?-1:1);for(o=0;o<p;++o)(f=g[_[o]=o]=+e(i[o],o,i))>0&&(m+=f);for(null!=t?_.sort((function(e,r){return t(g[e],g[r])})):null!=r&&_.sort((function(e,t){return r(i[e],i[t])})),o=0,d=m?(v-p*T)/m:0;o<p;++o,b=h)s=_[o],f=g[s],h=b+(f>0?f*d:0)+T,g[s]={data:i[s],index:o,value:f,startAngle:b,endAngle:h,padAngle:M};return g}return pie.value=function(t){return arguments.length?(e="function"===typeof t?t:Object(i["default"])(+t),pie):e},pie.sortValues=function(e){return arguments.length?(t=e,r=null,pie):t},pie.sort=function(e){return arguments.length?(r=e,t=null,pie):r},pie.startAngle=function(e){return arguments.length?(u="function"===typeof e?e:Object(i["default"])(+e),pie):u},pie.endAngle=function(e){return arguments.length?(c="function"===typeof e?e:Object(i["default"])(+e),pie):c},pie.padAngle=function(e){return arguments.length?(l="function"===typeof e?e:Object(i["default"])(+e),pie):l},pie}},"./node_modules/d3-shape/src/point.js":function(e,t,r){"use strict";function x(e){return e[0]}function y(e){return e[1]}r.r(t),r.d(t,"x",(function(){return x})),r.d(t,"y",(function(){return y}))},"./node_modules/d3-shape/src/pointRadial.js":function(e,t,r){"use strict";r.r(t),t["default"]=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}},"./node_modules/d3-shape/src/stack.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/array.js"),i=r("./node_modules/d3-shape/src/constant.js"),o=r("./node_modules/d3-shape/src/offset/none.js"),s=r("./node_modules/d3-shape/src/order/none.js");function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}t["default"]=function(){var e=Object(i["default"])([]),t=s["default"],r=o["default"],a=stackValue;function stack(i){var o,s,u=Array.from(e.apply(this,arguments),stackSeries),c=u.length,l=-1;for(const e of i)for(o=0,++l;o<c;++o)(u[o][l]=[0,+a(e,u[o].key,l,i)]).data=e;for(o=0,s=Object(n["default"])(t(u));o<c;++o)u[s[o]].index=o;return r(u,s),u}return stack.keys=function(t){return arguments.length?(e="function"===typeof t?t:Object(i["default"])(Array.from(t)),stack):e},stack.value=function(e){return arguments.length?(a="function"===typeof e?e:Object(i["default"])(+e),stack):a},stack.order=function(e){return arguments.length?(t=null==e?s["default"]:"function"===typeof e?e:Object(i["default"])(Array.from(e)),stack):t},stack.offset=function(e){return arguments.length?(r=null==e?o["default"]:e,stack):r},stack}},"./node_modules/d3-shape/src/symbol.js":function(e,t,r){"use strict";r.r(t),r.d(t,"symbols",(function(){return h}));var n=r("./node_modules/d3-path/src/path.js"),i=r("./node_modules/d3-shape/src/symbol/circle.js"),o=r("./node_modules/d3-shape/src/symbol/cross.js"),s=r("./node_modules/d3-shape/src/symbol/diamond.js"),a=r("./node_modules/d3-shape/src/symbol/star.js"),u=r("./node_modules/d3-shape/src/symbol/square.js"),c=r("./node_modules/d3-shape/src/symbol/triangle.js"),l=r("./node_modules/d3-shape/src/symbol/wye.js"),d=r("./node_modules/d3-shape/src/constant.js"),h=[i["default"],o["default"],s["default"],u["default"],a["default"],c["default"],l["default"]];t["default"]=function(e,t){var r=null;function symbol(){var i;if(r||(r=i=Object(n["default"])()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"===typeof e?e:Object(d["default"])(e||i["default"]),t="function"===typeof t?t:Object(d["default"])(void 0===t?64:+t),symbol.type=function(t){return arguments.length?(e="function"===typeof t?t:Object(d["default"])(t),symbol):e},symbol.size=function(e){return arguments.length?(t="function"===typeof e?e:Object(d["default"])(+e),symbol):t},symbol.context=function(e){return arguments.length?(r=null==e?null:e,symbol):r},symbol}},"./node_modules/d3-shape/src/symbol/circle.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/math.js");t["default"]={draw:function(e,t){var r=Math.sqrt(t/n["pi"]);e.moveTo(r,0),e.arc(0,0,r,0,n["tau"])}}},"./node_modules/d3-shape/src/symbol/cross.js":function(e,t,r){"use strict";r.r(t),t["default"]={draw:function(e,t){var r=Math.sqrt(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}}},"./node_modules/d3-shape/src/symbol/diamond.js":function(e,t,r){"use strict";r.r(t);var n=Math.sqrt(1/3),i=2*n;t["default"]={draw:function(e,t){var r=Math.sqrt(t/i),o=r*n;e.moveTo(0,-r),e.lineTo(o,0),e.lineTo(0,r),e.lineTo(-o,0),e.closePath()}}},"./node_modules/d3-shape/src/symbol/square.js":function(e,t,r){"use strict";r.r(t),t["default"]={draw:function(e,t){var r=Math.sqrt(t),n=-r/2;e.rect(n,n,r,r)}}},"./node_modules/d3-shape/src/symbol/star.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-shape/src/math.js"),i=.8908130915292852,o=Math.sin(n["pi"]/10)/Math.sin(7*n["pi"]/10),s=Math.sin(n["tau"]/10)*o,a=-Math.cos(n["tau"]/10)*o;t["default"]={draw:function(e,t){var r=Math.sqrt(t*i),o=s*r,u=a*r;e.moveTo(0,-r),e.lineTo(o,u);for(var c=1;c<5;++c){var l=n["tau"]*c/5,d=Math.cos(l),h=Math.sin(l);e.lineTo(h*r,-d*r),e.lineTo(d*o-h*u,h*o+d*u)}e.closePath()}}},"./node_modules/d3-shape/src/symbol/triangle.js":function(e,t,r){"use strict";r.r(t);var n=Math.sqrt(3);t["default"]={draw:function(e,t){var r=-Math.sqrt(t/(3*n));e.moveTo(0,2*r),e.lineTo(-n*r,-r),e.lineTo(n*r,-r),e.closePath()}}},"./node_modules/d3-shape/src/symbol/wye.js":function(e,t,r){"use strict";r.r(t);var n=-.5,i=Math.sqrt(3)/2,o=1/Math.sqrt(12),s=3*(o/2+1);t["default"]={draw:function(e,t){var r=Math.sqrt(t/s),a=r/2,u=r*o,c=a,l=r*o+r,d=-c,h=l;e.moveTo(a,u),e.lineTo(c,l),e.lineTo(d,h),e.lineTo(n*a-i*u,i*a+n*u),e.lineTo(n*c-i*l,i*c+n*l),e.lineTo(n*d-i*h,i*d+n*h),e.lineTo(n*a+i*u,n*u-i*a),e.lineTo(n*c+i*l,n*l-i*c),e.lineTo(n*d+i*h,n*h-i*d),e.closePath()}}},"./node_modules/d3-time-format/src/defaultLocale.js":function(e,t,r){"use strict";r.r(t),r.d(t,"timeFormat",(function(){return i})),r.d(t,"timeParse",(function(){return o})),r.d(t,"utcFormat",(function(){return s})),r.d(t,"utcParse",(function(){return a})),r.d(t,"default",(function(){return defaultLocale}));var n,i,o,s,a,u=r("./node_modules/d3-time-format/src/locale.js");function defaultLocale(e){return n=Object(u["default"])(e),i=n.format,o=n.parse,s=n.utcFormat,a=n.utcParse,n}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},"./node_modules/d3-time-format/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-time-format/src/defaultLocale.js");r.d(t,"timeFormatDefaultLocale",(function(){return n["default"]})),r.d(t,"timeFormat",(function(){return n["timeFormat"]})),r.d(t,"timeParse",(function(){return n["timeParse"]})),r.d(t,"utcFormat",(function(){return n["utcFormat"]})),r.d(t,"utcParse",(function(){return n["utcParse"]}));var i=r("./node_modules/d3-time-format/src/locale.js");r.d(t,"timeFormatLocale",(function(){return i["default"]}));var o=r("./node_modules/d3-time-format/src/isoFormat.js");r.d(t,"isoFormat",(function(){return o["default"]}));var s=r("./node_modules/d3-time-format/src/isoParse.js");r.d(t,"isoParse",(function(){return s["default"]}))},"./node_modules/d3-time-format/src/isoFormat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isoSpecifier",(function(){return i}));var n=r("./node_modules/d3-time-format/src/defaultLocale.js"),i="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var o=Date.prototype.toISOString?formatIsoNative:Object(n["utcFormat"])(i);t["default"]=o},"./node_modules/d3-time-format/src/isoParse.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-time-format/src/isoFormat.js"),i=r("./node_modules/d3-time-format/src/defaultLocale.js");function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var o=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:Object(i["utcParse"])(n["isoSpecifier"]);t["default"]=o},"./node_modules/d3-time-format/src/locale.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return formatLocale}));var n=r("./node_modules/d3-time/src/utcWeek.js"),i=r("./node_modules/d3-time/src/utcDay.js"),o=r("./node_modules/d3-time/src/week.js"),s=r("./node_modules/d3-time/src/day.js"),a=r("./node_modules/d3-time/src/year.js"),u=r("./node_modules/d3-time/src/utcYear.js");function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,r=e.date,a=e.time,u=e.periods,l=e.days,d=e.shortDays,h=e.months,f=e.shortMonths,p=formatRe(u),m=formatLookup(u),_=formatRe(l),g=formatLookup(l),b=formatRe(d),v=formatLookup(d),M=formatRe(h),T=formatLookup(h),S=formatRe(f),C=formatLookup(f),E={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,q:formatQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},P={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,q:formatUTCQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},A={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(e,t){return function(r){var n,i,o,s=[],a=-1,u=0,l=e.length;r instanceof Date||(r=new Date(+r));while(++a<l)37===e.charCodeAt(a)&&(s.push(e.slice(u,a)),null!=(i=c[n=e.charAt(++a)])?n=e.charAt(++a):i="e"===n?" ":"0",(o=t[n])&&(n=o(r,i)),s.push(n),u=a+1);return s.push(e.slice(u,a)),s.join("")}}function newParse(e,t){return function(r){var a,u,c=newDate(1900,void 0,1),l=parseSpecifier(c,e,r+="",0);if(l!=r.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(t&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(a=utcDate(newDate(c.y,0,1)),u=a.getUTCDay(),a=u>4||0===u?n["utcMonday"].ceil(a):Object(n["utcMonday"])(a),a=i["default"].offset(a,7*(c.V-1)),c.y=a.getUTCFullYear(),c.m=a.getUTCMonth(),c.d=a.getUTCDate()+(c.w+6)%7):(a=localDate(newDate(c.y,0,1)),u=a.getDay(),a=u>4||0===u?o["monday"].ceil(a):Object(o["monday"])(a),a=s["default"].offset(a,7*(c.V-1)),c.y=a.getFullYear(),c.m=a.getMonth(),c.d=a.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?utcDate(newDate(c.y,0,1)).getUTCDay():localDate(newDate(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,utcDate(c)):localDate(c)}}function parseSpecifier(e,t,r,n){var i,o,s=0,a=t.length,u=r.length;while(s<a){if(n>=u)return-1;if(i=t.charCodeAt(s++),37===i){if(i=t.charAt(s++),o=A[i in c?t.charAt(s++):i],!o||(n=o(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function parsePeriod(e,t,r){var n=p.exec(t.slice(r));return n?(e.p=m.get(n[0].toLowerCase()),r+n[0].length):-1}function parseShortWeekday(e,t,r){var n=b.exec(t.slice(r));return n?(e.w=v.get(n[0].toLowerCase()),r+n[0].length):-1}function parseWeekday(e,t,r){var n=_.exec(t.slice(r));return n?(e.w=g.get(n[0].toLowerCase()),r+n[0].length):-1}function parseShortMonth(e,t,r){var n=S.exec(t.slice(r));return n?(e.m=C.get(n[0].toLowerCase()),r+n[0].length):-1}function parseMonth(e,t,r){var n=M.exec(t.slice(r));return n?(e.m=T.get(n[0].toLowerCase()),r+n[0].length):-1}function parseLocaleDateTime(e,r,n){return parseSpecifier(e,t,r,n)}function parseLocaleDate(e,t,n){return parseSpecifier(e,r,t,n)}function parseLocaleTime(e,t,r){return parseSpecifier(e,a,t,r)}function formatShortWeekday(e){return d[e.getDay()]}function formatWeekday(e){return l[e.getDay()]}function formatShortMonth(e){return f[e.getMonth()]}function formatMonth(e){return h[e.getMonth()]}function formatPeriod(e){return u[+(e.getHours()>=12)]}function formatQuarter(e){return 1+~~(e.getMonth()/3)}function formatUTCShortWeekday(e){return d[e.getUTCDay()]}function formatUTCWeekday(e){return l[e.getUTCDay()]}function formatUTCShortMonth(e){return f[e.getUTCMonth()]}function formatUTCMonth(e){return h[e.getUTCMonth()]}function formatUTCPeriod(e){return u[+(e.getUTCHours()>=12)]}function formatUTCQuarter(e){return 1+~~(e.getUTCMonth()/3)}return E.x=newFormat(r,E),E.X=newFormat(a,E),E.c=newFormat(t,E),P.x=newFormat(r,P),P.X=newFormat(a,P),P.c=newFormat(t,P),{format:function(e){var t=newFormat(e+="",E);return t.toString=function(){return e},t},parse:function(e){var t=newParse(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=newFormat(e+="",P);return t.toString=function(){return e},t},utcParse:function(e){var t=newParse(e+="",!0);return t.toString=function(){return e},t}}}var c={"-":"",_:" ",0:"0"},l=/^\s*\d+/,d=/^%/,h=/[\\^$*+?|[\]().{}]/g;function pad(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function requote(e){return e.replace(h,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function parseWeekdayNumberSunday(e,t,r){var n=l.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function parseWeekdayNumberMonday(e,t,r){var n=l.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function parseWeekNumberSunday(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function parseWeekNumberISO(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function parseWeekNumberMonday(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function parseFullYear(e,t,r){var n=l.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function parseYear(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function parseZone(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function parseQuarter(e,t,r){var n=l.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function parseMonthNumber(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function parseDayOfMonth(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function parseDayOfYear(e,t,r){var n=l.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function parseHour24(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function parseMinutes(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function parseSeconds(e,t,r){var n=l.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function parseMilliseconds(e,t,r){var n=l.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function parseMicroseconds(e,t,r){var n=l.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function parseLiteralPercent(e,t,r){var n=d.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function parseUnixTimestamp(e,t,r){var n=l.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function parseUnixTimestampSeconds(e,t,r){var n=l.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+s["default"].count(Object(a["default"])(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(o["sunday"].count(Object(a["default"])(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||0===t?Object(o["thursday"])(e):o["thursday"].ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(o["thursday"].count(Object(a["default"])(e),e)+(4===Object(a["default"])(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(o["monday"].count(Object(a["default"])(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var r=e.getDay();return e=r>=4||0===r?Object(o["thursday"])(e):o["thursday"].ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+i["default"].count(Object(u["default"])(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(n["utcSunday"].count(Object(u["default"])(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||0===t?Object(n["utcThursday"])(e):n["utcThursday"].ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(n["utcThursday"].count(Object(u["default"])(e),e)+(4===Object(u["default"])(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(n["utcMonday"].count(Object(u["default"])(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var r=e.getUTCDay();return e=r>=4||0===r?Object(n["utcThursday"])(e):n["utcThursday"].ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}},"./node_modules/d3-time/src/day.js":function(e,t,r){"use strict";r.r(t),r.d(t,"days",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i["durationMinute"])/i["durationDay"],e=>e.getDate()-1);t["default"]=o;var s=o.range},"./node_modules/d3-time/src/duration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"durationSecond",(function(){return n})),r.d(t,"durationMinute",(function(){return i})),r.d(t,"durationHour",(function(){return o})),r.d(t,"durationDay",(function(){return s})),r.d(t,"durationWeek",(function(){return a})),r.d(t,"durationMonth",(function(){return u})),r.d(t,"durationYear",(function(){return c}));const n=1e3,i=60*n,o=60*i,s=24*o,a=7*s,u=30*s,c=365*s},"./node_modules/d3-time/src/hour.js":function(e,t,r){"use strict";r.r(t),r.d(t,"hours",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i["durationSecond"]-e.getMinutes()*i["durationMinute"])}),(function(e,t){e.setTime(+e+t*i["durationHour"])}),(function(e,t){return(t-e)/i["durationHour"]}),(function(e){return e.getHours()}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-time/src/interval.js");r.d(t,"timeInterval",(function(){return n["default"]}));var i=r("./node_modules/d3-time/src/millisecond.js");r.d(t,"timeMillisecond",(function(){return i["default"]})),r.d(t,"timeMilliseconds",(function(){return i["milliseconds"]})),r.d(t,"utcMillisecond",(function(){return i["default"]})),r.d(t,"utcMilliseconds",(function(){return i["milliseconds"]}));var o=r("./node_modules/d3-time/src/second.js");r.d(t,"timeSecond",(function(){return o["default"]})),r.d(t,"timeSeconds",(function(){return o["seconds"]})),r.d(t,"utcSecond",(function(){return o["default"]})),r.d(t,"utcSeconds",(function(){return o["seconds"]}));var s=r("./node_modules/d3-time/src/minute.js");r.d(t,"timeMinute",(function(){return s["default"]})),r.d(t,"timeMinutes",(function(){return s["minutes"]}));var a=r("./node_modules/d3-time/src/hour.js");r.d(t,"timeHour",(function(){return a["default"]})),r.d(t,"timeHours",(function(){return a["hours"]}));var u=r("./node_modules/d3-time/src/day.js");r.d(t,"timeDay",(function(){return u["default"]})),r.d(t,"timeDays",(function(){return u["days"]}));var c=r("./node_modules/d3-time/src/week.js");r.d(t,"timeWeek",(function(){return c["sunday"]})),r.d(t,"timeWeeks",(function(){return c["sundays"]})),r.d(t,"timeSunday",(function(){return c["sunday"]})),r.d(t,"timeSundays",(function(){return c["sundays"]})),r.d(t,"timeMonday",(function(){return c["monday"]})),r.d(t,"timeMondays",(function(){return c["mondays"]})),r.d(t,"timeTuesday",(function(){return c["tuesday"]})),r.d(t,"timeTuesdays",(function(){return c["tuesdays"]})),r.d(t,"timeWednesday",(function(){return c["wednesday"]})),r.d(t,"timeWednesdays",(function(){return c["wednesdays"]})),r.d(t,"timeThursday",(function(){return c["thursday"]})),r.d(t,"timeThursdays",(function(){return c["thursdays"]})),r.d(t,"timeFriday",(function(){return c["friday"]})),r.d(t,"timeFridays",(function(){return c["fridays"]})),r.d(t,"timeSaturday",(function(){return c["saturday"]})),r.d(t,"timeSaturdays",(function(){return c["saturdays"]}));var l=r("./node_modules/d3-time/src/month.js");r.d(t,"timeMonth",(function(){return l["default"]})),r.d(t,"timeMonths",(function(){return l["months"]}));var d=r("./node_modules/d3-time/src/year.js");r.d(t,"timeYear",(function(){return d["default"]})),r.d(t,"timeYears",(function(){return d["years"]}));var h=r("./node_modules/d3-time/src/utcMinute.js");r.d(t,"utcMinute",(function(){return h["default"]})),r.d(t,"utcMinutes",(function(){return h["utcMinutes"]}));var f=r("./node_modules/d3-time/src/utcHour.js");r.d(t,"utcHour",(function(){return f["default"]})),r.d(t,"utcHours",(function(){return f["utcHours"]}));var p=r("./node_modules/d3-time/src/utcDay.js");r.d(t,"utcDay",(function(){return p["default"]})),r.d(t,"utcDays",(function(){return p["utcDays"]}));var m=r("./node_modules/d3-time/src/utcWeek.js");r.d(t,"utcWeek",(function(){return m["utcSunday"]})),r.d(t,"utcWeeks",(function(){return m["utcSundays"]})),r.d(t,"utcSunday",(function(){return m["utcSunday"]})),r.d(t,"utcSundays",(function(){return m["utcSundays"]})),r.d(t,"utcMonday",(function(){return m["utcMonday"]})),r.d(t,"utcMondays",(function(){return m["utcMondays"]})),r.d(t,"utcTuesday",(function(){return m["utcTuesday"]})),r.d(t,"utcTuesdays",(function(){return m["utcTuesdays"]})),r.d(t,"utcWednesday",(function(){return m["utcWednesday"]})),r.d(t,"utcWednesdays",(function(){return m["utcWednesdays"]})),r.d(t,"utcThursday",(function(){return m["utcThursday"]})),r.d(t,"utcThursdays",(function(){return m["utcThursdays"]})),r.d(t,"utcFriday",(function(){return m["utcFriday"]})),r.d(t,"utcFridays",(function(){return m["utcFridays"]})),r.d(t,"utcSaturday",(function(){return m["utcSaturday"]})),r.d(t,"utcSaturdays",(function(){return m["utcSaturdays"]}));var _=r("./node_modules/d3-time/src/utcMonth.js");r.d(t,"utcMonth",(function(){return _["default"]})),r.d(t,"utcMonths",(function(){return _["utcMonths"]}));var g=r("./node_modules/d3-time/src/utcYear.js");r.d(t,"utcYear",(function(){return g["default"]})),r.d(t,"utcYears",(function(){return g["utcYears"]}));var b=r("./node_modules/d3-time/src/ticks.js");r.d(t,"utcTicks",(function(){return b["utcTicks"]})),r.d(t,"utcTickInterval",(function(){return b["utcTickInterval"]})),r.d(t,"timeTicks",(function(){return b["timeTicks"]})),r.d(t,"timeTickInterval",(function(){return b["timeTickInterval"]}))},"./node_modules/d3-time/src/interval.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return newInterval}));var n=new Date,i=new Date;function newInterval(e,t,r,o){function interval(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return interval.floor=function(t){return e(t=new Date(+t)),t},interval.ceil=function(r){return e(r=new Date(r-1)),t(r,1),e(r),r},interval.round=function(e){var t=interval(e),r=interval.ceil(e);return e-t<r-e?t:r},interval.offset=function(e,r){return t(e=new Date(+e),null==r?1:Math.floor(r)),e},interval.range=function(r,n,i){var o,s=[];if(r=interval.ceil(r),i=null==i?1:Math.floor(i),!(r<n)||!(i>0))return s;do{s.push(o=new Date(+r)),t(r,i),e(r)}while(o<r&&r<n);return s},interval.filter=function(r){return newInterval((function(t){if(t>=t)while(e(t),!r(t))t.setTime(t-1)}),(function(e,n){if(e>=e)if(n<0)while(++n<=0)while(t(e,-1),!r(e));else while(--n>=0)while(t(e,1),!r(e));}))},r&&(interval.count=function(t,o){return n.setTime(+t),i.setTime(+o),e(n),e(i),Math.floor(r(n,i))},interval.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?interval.filter(o?function(t){return o(t)%e===0}:function(t){return interval.count(0,t)%e===0}):interval:null}),interval}},"./node_modules/d3-time/src/millisecond.js":function(e,t,r){"use strict";r.r(t),r.d(t,"milliseconds",(function(){return o}));var n=r("./node_modules/d3-time/src/interval.js"),i=Object(n["default"])((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Object(n["default"])((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,r){t.setTime(+t+r*e)}),(function(t,r){return(r-t)/e})):i:null},t["default"]=i;var o=i.range},"./node_modules/d3-time/src/minute.js":function(e,t,r){"use strict";r.r(t),r.d(t,"minutes",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i["durationSecond"])}),(function(e,t){e.setTime(+e+t*i["durationMinute"])}),(function(e,t){return(t-e)/i["durationMinute"]}),(function(e){return e.getMinutes()}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/month.js":function(e,t,r){"use strict";r.r(t),r.d(t,"months",(function(){return o}));var n=r("./node_modules/d3-time/src/interval.js"),i=Object(n["default"])((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));t["default"]=i;var o=i.range},"./node_modules/d3-time/src/second.js":function(e,t,r){"use strict";r.r(t),r.d(t,"seconds",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*i["durationSecond"])}),(function(e,t){return(t-e)/i["durationSecond"]}),(function(e){return e.getUTCSeconds()}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/ticks.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcTicks",(function(){return M})),r.d(t,"utcTickInterval",(function(){return T})),r.d(t,"timeTicks",(function(){return S})),r.d(t,"timeTickInterval",(function(){return C}));var n=r("./node_modules/d3-array/src/bisector.js"),i=r("./node_modules/d3-array/src/ticks.js"),o=r("./node_modules/d3-time/src/duration.js"),s=r("./node_modules/d3-time/src/millisecond.js"),a=r("./node_modules/d3-time/src/second.js"),u=r("./node_modules/d3-time/src/minute.js"),c=r("./node_modules/d3-time/src/hour.js"),l=r("./node_modules/d3-time/src/day.js"),d=r("./node_modules/d3-time/src/week.js"),h=r("./node_modules/d3-time/src/month.js"),f=r("./node_modules/d3-time/src/year.js"),p=r("./node_modules/d3-time/src/utcMinute.js"),m=r("./node_modules/d3-time/src/utcHour.js"),_=r("./node_modules/d3-time/src/utcDay.js"),g=r("./node_modules/d3-time/src/utcWeek.js"),b=r("./node_modules/d3-time/src/utcMonth.js"),v=r("./node_modules/d3-time/src/utcYear.js");function ticker(e,t,r,u,c,l){const d=[[a["default"],1,o["durationSecond"]],[a["default"],5,5*o["durationSecond"]],[a["default"],15,15*o["durationSecond"]],[a["default"],30,30*o["durationSecond"]],[l,1,o["durationMinute"]],[l,5,5*o["durationMinute"]],[l,15,15*o["durationMinute"]],[l,30,30*o["durationMinute"]],[c,1,o["durationHour"]],[c,3,3*o["durationHour"]],[c,6,6*o["durationHour"]],[c,12,12*o["durationHour"]],[u,1,o["durationDay"]],[u,2,2*o["durationDay"]],[r,1,o["durationWeek"]],[t,1,o["durationMonth"]],[t,3,3*o["durationMonth"]],[e,1,o["durationYear"]]];function ticks(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const i=r&&"function"===typeof r.range?r:tickInterval(e,t,r),o=i?i.range(e,+t+1):[];return n?o.reverse():o}function tickInterval(t,r,a){const u=Math.abs(r-t)/a,c=Object(n["default"])(([,,e])=>e).right(d,u);if(c===d.length)return e.every(Object(i["tickStep"])(t/o["durationYear"],r/o["durationYear"],a));if(0===c)return s["default"].every(Math.max(Object(i["tickStep"])(t,r,a),1));const[l,h]=d[u/d[c-1][2]<d[c][2]/u?c-1:c];return l.every(h)}return[ticks,tickInterval]}const[M,T]=ticker(v["default"],b["default"],g["utcSunday"],_["default"],m["default"],p["default"]),[S,C]=ticker(f["default"],h["default"],d["sunday"],l["default"],c["default"],u["default"])},"./node_modules/d3-time/src/utcDay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcDays",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i["durationDay"]}),(function(e){return e.getUTCDate()-1}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/utcHour.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcHours",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*i["durationHour"])}),(function(e,t){return(t-e)/i["durationHour"]}),(function(e){return e.getUTCHours()}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/utcMinute.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcMinutes",(function(){return s}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js"),o=Object(n["default"])((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*i["durationMinute"])}),(function(e,t){return(t-e)/i["durationMinute"]}),(function(e){return e.getUTCMinutes()}));t["default"]=o;var s=o.range},"./node_modules/d3-time/src/utcMonth.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcMonths",(function(){return o}));var n=r("./node_modules/d3-time/src/interval.js"),i=Object(n["default"])((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));t["default"]=i;var o=i.range},"./node_modules/d3-time/src/utcWeek.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcSunday",(function(){return o})),r.d(t,"utcMonday",(function(){return s})),r.d(t,"utcTuesday",(function(){return a})),r.d(t,"utcWednesday",(function(){return u})),r.d(t,"utcThursday",(function(){return c})),r.d(t,"utcFriday",(function(){return l})),r.d(t,"utcSaturday",(function(){return d})),r.d(t,"utcSundays",(function(){return h})),r.d(t,"utcMondays",(function(){return f})),r.d(t,"utcTuesdays",(function(){return p})),r.d(t,"utcWednesdays",(function(){return m})),r.d(t,"utcThursdays",(function(){return _})),r.d(t,"utcFridays",(function(){return g})),r.d(t,"utcSaturdays",(function(){return b}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js");function utcWeekday(e){return Object(n["default"])((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i["durationWeek"]}))}var o=utcWeekday(0),s=utcWeekday(1),a=utcWeekday(2),u=utcWeekday(3),c=utcWeekday(4),l=utcWeekday(5),d=utcWeekday(6),h=o.range,f=s.range,p=a.range,m=u.range,_=c.range,g=l.range,b=d.range},"./node_modules/d3-time/src/utcYear.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utcYears",(function(){return o}));var n=r("./node_modules/d3-time/src/interval.js"),i=Object(n["default"])((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(n["default"])((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null},t["default"]=i;var o=i.range},"./node_modules/d3-time/src/week.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sunday",(function(){return o})),r.d(t,"monday",(function(){return s})),r.d(t,"tuesday",(function(){return a})),r.d(t,"wednesday",(function(){return u})),r.d(t,"thursday",(function(){return c})),r.d(t,"friday",(function(){return l})),r.d(t,"saturday",(function(){return d})),r.d(t,"sundays",(function(){return h})),r.d(t,"mondays",(function(){return f})),r.d(t,"tuesdays",(function(){return p})),r.d(t,"wednesdays",(function(){return m})),r.d(t,"thursdays",(function(){return _})),r.d(t,"fridays",(function(){return g})),r.d(t,"saturdays",(function(){return b}));var n=r("./node_modules/d3-time/src/interval.js"),i=r("./node_modules/d3-time/src/duration.js");function weekday(e){return Object(n["default"])((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i["durationMinute"])/i["durationWeek"]}))}var o=weekday(0),s=weekday(1),a=weekday(2),u=weekday(3),c=weekday(4),l=weekday(5),d=weekday(6),h=o.range,f=s.range,p=a.range,m=u.range,_=c.range,g=l.range,b=d.range},"./node_modules/d3-time/src/year.js":function(e,t,r){"use strict";r.r(t),r.d(t,"years",(function(){return o}));var n=r("./node_modules/d3-time/src/interval.js"),i=Object(n["default"])((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(n["default"])((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r*e)})):null},t["default"]=i;var o=i.range},"./node_modules/d3-timer/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-timer/src/timer.js");r.d(t,"now",(function(){return n["now"]})),r.d(t,"timer",(function(){return n["timer"]})),r.d(t,"timerFlush",(function(){return n["timerFlush"]}));var i=r("./node_modules/d3-timer/src/timeout.js");r.d(t,"timeout",(function(){return i["default"]}));var o=r("./node_modules/d3-timer/src/interval.js");r.d(t,"interval",(function(){return o["default"]}))},"./node_modules/d3-timer/src/interval.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-timer/src/timer.js");t["default"]=function(e,t,r){var i=new n["Timer"],o=t;return null==t?(i.restart(e,t,r),i):(i._restart=i.restart,i.restart=function(e,t,r){t=+t,r=null==r?Object(n["now"])():+r,i._restart((function tick(n){n+=o,i._restart(tick,o+=t,r),e(n)}),t,r)},i.restart(e,t,r),i)}},"./node_modules/d3-timer/src/timeout.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-timer/src/timer.js");t["default"]=function(e,t,r){var i=new n["Timer"];return t=null==t?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,r),i}},"./node_modules/d3-timer/src/timer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"now",(function(){return now})),r.d(t,"Timer",(function(){return Timer})),r.d(t,"timer",(function(){return timer})),r.d(t,"timerFlush",(function(){return timerFlush}));var n,i,o=0,s=0,a=0,u=1e3,c=0,l=0,d=0,h="object"===typeof performance&&performance.now?performance:Date,f="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return l||(f(clearNow),l=h.now()+d)}function clearNow(){l=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,r){var n=new Timer;return n.restart(e,t,r),n}function timerFlush(){now(),++o;var e,t=n;while(t)(e=l-t._time)>=0&&t._call.call(null,e),t=t._next;--o}function wake(){l=(c=h.now())+d,o=s=0;try{timerFlush()}finally{o=0,nap(),l=0}}function poke(){var e=h.now(),t=e-c;t>u&&(d-=t,c=e)}function nap(){var e,t,r=n,o=1/0;while(r)r._call?(o>r._time&&(o=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:n=t);i=e,sleep(o)}function sleep(e){if(!o){s&&(s=clearTimeout(s));var t=e-l;t>24?(e<1/0&&(s=setTimeout(wake,e-h.now()-d)),a&&(a=clearInterval(a))):(a||(c=h.now(),a=setInterval(poke,u)),o=1,f(wake))}}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,r){if("function"!==typeof e)throw new TypeError("callback is not a function");r=(null==r?now():+r)+(null==t?0:+t),this._next||i===this||(i?i._next=this:n=this,i=this),this._call=e,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}}},"./node_modules/d3-transition/src/active.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/index.js"),i=r("./node_modules/d3-transition/src/transition/schedule.js"),o=[null];t["default"]=function(e,t){var r,s,a=e.__transition;if(a)for(s in t=null==t?null:t+"",a)if((r=a[s]).state>i["SCHEDULED"]&&r.name===t)return new n["Transition"]([[e]],o,t,+s);return null}},"./node_modules/d3-transition/src/index.js":function(e,t,r){"use strict";r.r(t);r("./node_modules/d3-transition/src/selection/index.js");var n=r("./node_modules/d3-transition/src/transition/index.js");r.d(t,"transition",(function(){return n["default"]}));var i=r("./node_modules/d3-transition/src/active.js");r.d(t,"active",(function(){return i["default"]}));var o=r("./node_modules/d3-transition/src/interrupt.js");r.d(t,"interrupt",(function(){return o["default"]}))},"./node_modules/d3-transition/src/interrupt.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");t["default"]=function(e,t){var r,i,o,s=e.__transition,a=!0;if(s){for(o in t=null==t?null:t+"",s)(r=s[o]).name===t?(i=r.state>n["STARTING"]&&r.state<n["ENDING"],r.state=n["ENDED"],r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete s[o]):a=!1;a&&delete e.__transition}}},"./node_modules/d3-transition/src/selection/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-transition/src/selection/interrupt.js"),o=r("./node_modules/d3-transition/src/selection/transition.js");n["default"].prototype.interrupt=i["default"],n["default"].prototype.transition=o["default"]},"./node_modules/d3-transition/src/selection/interrupt.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/interrupt.js");t["default"]=function(e){return this.each((function(){Object(n["default"])(this,e)}))}},"./node_modules/d3-transition/src/selection/transition.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/index.js"),i=r("./node_modules/d3-transition/src/transition/schedule.js"),o=r("./node_modules/d3-ease/src/cubic.js"),s=r("./node_modules/d3-timer/src/timer.js"),a={time:null,delay:0,duration:250,ease:o["cubicInOut"]};function inherit(e,t){var r;while(!(r=e.__transition)||!(r=r[t]))if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}t["default"]=function(e){var t,r;e instanceof n["Transition"]?(t=e._id,e=e._name):(t=Object(n["newId"])(),(r=a).time=Object(s["now"])(),e=null==e?null:e+"");for(var o=this._groups,u=o.length,c=0;c<u;++c)for(var l,d=o[c],h=d.length,f=0;f<h;++f)(l=d[f])&&Object(i["default"])(l,e,t,f,d,r||inherit(l,t));return new n["Transition"](o,this._parents,e,t)}},"./node_modules/d3-transition/src/transition/attr.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/transform/index.js"),i=r("./node_modules/d3-selection/src/namespace.js"),o=r("./node_modules/d3-transition/src/transition/tween.js"),s=r("./node_modules/d3-transition/src/transition/interpolate.js");function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t,r){var n,i,o=r+"";return function(){var s=this.getAttribute(e);return s===o?null:s===n?i:i=t(n=s,r)}}function attrConstantNS(e,t,r){var n,i,o=r+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===n?i:i=t(n=s,r)}}function attrFunction(e,t,r){var n,i,o;return function(){var s,a,u=r(this);if(null!=u)return s=this.getAttribute(e),a=u+"",s===a?null:s===n&&a===i?o:(i=a,o=t(n=s,u));this.removeAttribute(e)}}function attrFunctionNS(e,t,r){var n,i,o;return function(){var s,a,u=r(this);if(null!=u)return s=this.getAttributeNS(e.space,e.local),a=u+"",s===a?null:s===n&&a===i?o:(i=a,o=t(n=s,u));this.removeAttributeNS(e.space,e.local)}}t["default"]=function(e,t){var r=Object(i["default"])(e),a="transform"===r?n["interpolateTransformSvg"]:s["default"];return this.attrTween(e,"function"===typeof t?(r.local?attrFunctionNS:attrFunction)(r,a,Object(o["tweenValue"])(this,"attr."+e,t)):null==t?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,a,t))}},"./node_modules/d3-transition/src/transition/attrTween.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/namespace.js");function attrInterpolate(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function attrInterpolateNS(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function attrTweenNS(e,t){var r,n;function tween(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolateNS(e,i)),r}return tween._value=t,tween}function attrTween(e,t){var r,n;function tween(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolate(e,i)),r}return tween._value=t,tween}t["default"]=function(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;var i=Object(n["default"])(e);return this.tween(r,(i.local?attrTweenNS:attrTween)(i,t))}},"./node_modules/d3-transition/src/transition/delay.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");function delayFunction(e,t){return function(){Object(n["init"])(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){Object(n["init"])(this,e).delay=t}}t["default"]=function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?delayFunction:delayConstant)(t,e)):Object(n["get"])(this.node(),t).delay}},"./node_modules/d3-transition/src/transition/duration.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");function durationFunction(e,t){return function(){Object(n["set"])(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){Object(n["set"])(this,e).duration=t}}t["default"]=function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?durationFunction:durationConstant)(t,e)):Object(n["get"])(this.node(),t).duration}},"./node_modules/d3-transition/src/transition/ease.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");function easeConstant(e,t){if("function"!==typeof t)throw new Error;return function(){Object(n["set"])(this,e).ease=t}}t["default"]=function(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):Object(n["get"])(this.node(),t).ease}},"./node_modules/d3-transition/src/transition/easeVarying.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");function easeVarying(e,t){return function(){var r=t.apply(this,arguments);if("function"!==typeof r)throw new Error;Object(n["set"])(this,e).ease=r}}t["default"]=function(e){if("function"!==typeof e)throw new Error;return this.each(easeVarying(this._id,e))}},"./node_modules/d3-transition/src/transition/end.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");t["default"]=function(){var e,t,r=this,i=r._id,o=r.size();return new Promise((function(s,a){var u={value:a},c={value:function(){0===--o&&s()}};r.each((function(){var r=Object(n["set"])(this,i),o=r.on;o!==e&&(t=(e=o).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(c)),r.on=t})),0===o&&s()}))}},"./node_modules/d3-transition/src/transition/filter.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/matcher.js"),i=r("./node_modules/d3-transition/src/transition/index.js");t["default"]=function(e){"function"!==typeof e&&(e=Object(n["default"])(e));for(var t=this._groups,r=t.length,o=new Array(r),s=0;s<r;++s)for(var a,u=t[s],c=u.length,l=o[s]=[],d=0;d<c;++d)(a=u[d])&&e.call(a,a.__data__,d,u)&&l.push(a);return new i["Transition"](o,this._parents,this._name,this._id)}},"./node_modules/d3-transition/src/transition/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Transition",(function(){return Transition})),r.d(t,"default",(function(){return transition})),r.d(t,"newId",(function(){return newId}));var n=r("./node_modules/d3-selection/src/selection/index.js"),i=r("./node_modules/d3-transition/src/transition/attr.js"),o=r("./node_modules/d3-transition/src/transition/attrTween.js"),s=r("./node_modules/d3-transition/src/transition/delay.js"),a=r("./node_modules/d3-transition/src/transition/duration.js"),u=r("./node_modules/d3-transition/src/transition/ease.js"),c=r("./node_modules/d3-transition/src/transition/easeVarying.js"),l=r("./node_modules/d3-transition/src/transition/filter.js"),d=r("./node_modules/d3-transition/src/transition/merge.js"),h=r("./node_modules/d3-transition/src/transition/on.js"),f=r("./node_modules/d3-transition/src/transition/remove.js"),p=r("./node_modules/d3-transition/src/transition/select.js"),m=r("./node_modules/d3-transition/src/transition/selectAll.js"),_=r("./node_modules/d3-transition/src/transition/selection.js"),g=r("./node_modules/d3-transition/src/transition/style.js"),b=r("./node_modules/d3-transition/src/transition/styleTween.js"),v=r("./node_modules/d3-transition/src/transition/text.js"),M=r("./node_modules/d3-transition/src/transition/textTween.js"),T=r("./node_modules/d3-transition/src/transition/transition.js"),S=r("./node_modules/d3-transition/src/transition/tween.js"),C=r("./node_modules/d3-transition/src/transition/end.js"),E=0;function Transition(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function transition(e){return Object(n["default"])().transition(e)}function newId(){return++E}var P=n["default"].prototype;Transition.prototype=transition.prototype={constructor:Transition,select:p["default"],selectAll:m["default"],filter:l["default"],merge:d["default"],selection:_["default"],transition:T["default"],call:P.call,nodes:P.nodes,node:P.node,size:P.size,empty:P.empty,each:P.each,on:h["default"],attr:i["default"],attrTween:o["default"],style:g["default"],styleTween:b["default"],text:v["default"],textTween:M["default"],remove:f["default"],tween:S["default"],delay:s["default"],duration:a["default"],ease:u["default"],easeVarying:c["default"],end:C["default"],[Symbol.iterator]:P[Symbol.iterator]}},"./node_modules/d3-transition/src/transition/interpolate.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-color/src/color.js"),i=r("./node_modules/d3-interpolate/src/number.js"),o=r("./node_modules/d3-interpolate/src/rgb.js"),s=r("./node_modules/d3-interpolate/src/string.js");t["default"]=function(e,t){var r;return("number"===typeof t?i["default"]:t instanceof n["default"]?o["default"]:(r=Object(n["default"])(t))?(t=r,o["default"]):s["default"])(e,t)}},"./node_modules/d3-transition/src/transition/merge.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/index.js");t["default"]=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c,l=t[u],d=r[u],h=l.length,f=a[u]=new Array(h),p=0;p<h;++p)(c=l[p]||d[p])&&(f[p]=c);for(;u<i;++u)a[u]=t[u];return new n["Transition"](a,this._parents,this._name,this._id)}},"./node_modules/d3-transition/src/transition/on.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/schedule.js");function start(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function onFunction(e,t,r){var i,o,s=start(t)?n["init"]:n["set"];return function(){var n=s(this,e),a=n.on;a!==i&&(o=(i=a).copy()).on(t,r),n.on=o}}t["default"]=function(e,t){var r=this._id;return arguments.length<2?Object(n["get"])(this.node(),r).on.on(e):this.each(onFunction(r,e,t))}},"./node_modules/d3-transition/src/transition/remove.js":function(e,t,r){"use strict";function removeFunction(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}r.r(t),t["default"]=function(){return this.on("end.remove",removeFunction(this._id))}},"./node_modules/d3-transition/src/transition/schedule.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CREATED",(function(){return u})),r.d(t,"SCHEDULED",(function(){return c})),r.d(t,"STARTING",(function(){return l})),r.d(t,"STARTED",(function(){return d})),r.d(t,"RUNNING",(function(){return h})),r.d(t,"ENDING",(function(){return f})),r.d(t,"ENDED",(function(){return p})),r.d(t,"init",(function(){return init})),r.d(t,"set",(function(){return set})),r.d(t,"get",(function(){return get}));var n=r("./node_modules/d3-dispatch/src/dispatch.js"),i=r("./node_modules/d3-timer/src/timer.js"),o=r("./node_modules/d3-timer/src/timeout.js"),s=Object(n["default"])("start","end","cancel","interrupt"),a=[],u=0,c=1,l=2,d=3,h=4,f=5,p=6;function init(e,t){var r=get(e,t);if(r.state>u)throw new Error("too late; already scheduled");return r}function set(e,t){var r=get(e,t);if(r.state>d)throw new Error("too late; already running");return r}function get(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function create(e,t,r){var n,s=e.__transition;function schedule(e){r.state=c,r.timer.restart(start,r.delay,r.time),r.delay<=e&&start(e-r.delay)}function start(i){var a,u,f,m;if(r.state!==c)return stop();for(a in s)if(m=s[a],m.name===r.name){if(m.state===d)return Object(o["default"])(start);m.state===h?(m.state=p,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete s[a]):+a<t&&(m.state=p,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete s[a])}if(Object(o["default"])((function(){r.state===d&&(r.state=h,r.timer.restart(tick,r.delay,r.time),tick(i))})),r.state=l,r.on.call("start",e,e.__data__,r.index,r.group),r.state===l){for(r.state=d,n=new Array(f=r.tween.length),a=0,u=-1;a<f;++a)(m=r.tween[a].value.call(e,e.__data__,r.index,r.group))&&(n[++u]=m);n.length=u+1}}function tick(t){var i=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(stop),r.state=f,1),o=-1,s=n.length;while(++o<s)n[o].call(e,i);r.state===f&&(r.on.call("end",e,e.__data__,r.index,r.group),stop())}function stop(){for(var n in r.state=p,r.timer.stop(),delete s[t],s)return;delete e.__transition}s[t]=r,r.timer=Object(i["timer"])(schedule,0,r.time)}t["default"]=function(e,t,r,n,i,o){var c=e.__transition;if(c){if(r in c)return}else e.__transition={};create(e,r,{name:t,index:n,group:i,on:s,tween:a,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:u})}},"./node_modules/d3-transition/src/transition/select.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selector.js"),i=r("./node_modules/d3-transition/src/transition/index.js"),o=r("./node_modules/d3-transition/src/transition/schedule.js");t["default"]=function(e){var t=this._name,r=this._id;"function"!==typeof e&&(e=Object(n["default"])(e));for(var s=this._groups,a=s.length,u=new Array(a),c=0;c<a;++c)for(var l,d,h=s[c],f=h.length,p=u[c]=new Array(f),m=0;m<f;++m)(l=h[m])&&(d=e.call(l,l.__data__,m,h))&&("__data__"in l&&(d.__data__=l.__data__),p[m]=d,Object(o["default"])(p[m],t,r,m,p,Object(o["get"])(l,r)));return new i["Transition"](u,this._parents,t,r)}},"./node_modules/d3-transition/src/transition/selectAll.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selectorAll.js"),i=r("./node_modules/d3-transition/src/transition/index.js"),o=r("./node_modules/d3-transition/src/transition/schedule.js");t["default"]=function(e){var t=this._name,r=this._id;"function"!==typeof e&&(e=Object(n["default"])(e));for(var s=this._groups,a=s.length,u=[],c=[],l=0;l<a;++l)for(var d,h=s[l],f=h.length,p=0;p<f;++p)if(d=h[p]){for(var m,_=e.call(d,d.__data__,p,h),g=Object(o["get"])(d,r),b=0,v=_.length;b<v;++b)(m=_[b])&&Object(o["default"])(m,t,r,b,_,g);u.push(_),c.push(d)}return new i["Transition"](u,c,t,r)}},"./node_modules/d3-transition/src/transition/selection.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-selection/src/selection/index.js"),i=n["default"].prototype.constructor;t["default"]=function(){return new i(this._groups,this._parents)}},"./node_modules/d3-transition/src/transition/style.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-interpolate/src/transform/index.js"),i=r("./node_modules/d3-selection/src/selection/style.js"),o=r("./node_modules/d3-transition/src/transition/schedule.js"),s=r("./node_modules/d3-transition/src/transition/tween.js"),a=r("./node_modules/d3-transition/src/transition/interpolate.js");function styleNull(e,t){var r,n,o;return function(){var s=Object(i["styleValue"])(this,e),a=(this.style.removeProperty(e),Object(i["styleValue"])(this,e));return s===a?null:s===r&&a===n?o:o=t(r=s,n=a)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,r){var n,o,s=r+"";return function(){var a=Object(i["styleValue"])(this,e);return a===s?null:a===n?o:o=t(n=a,r)}}function styleFunction(e,t,r){var n,o,s;return function(){var a=Object(i["styleValue"])(this,e),u=r(this),c=u+"";return null==u&&(this.style.removeProperty(e),c=u=Object(i["styleValue"])(this,e)),a===c?null:a===n&&c===o?s:(o=c,s=t(n=a,u))}}function styleMaybeRemove(e,t){var r,n,i,s,a="style."+t,u="end."+a;return function(){var c=Object(o["set"])(this,e),l=c.on,d=null==c.value[a]?s||(s=styleRemove(t)):void 0;l===r&&i===d||(n=(r=l).copy()).on(u,i=d),c.on=n}}t["default"]=function(e,t,r){var i="transform"===(e+="")?n["interpolateTransformCss"]:a["default"];return null==t?this.styleTween(e,styleNull(e,i)).on("end.style."+e,styleRemove(e)):"function"===typeof t?this.styleTween(e,styleFunction(e,i,Object(s["tweenValue"])(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,i,t),r).on("end.style."+e,null)}},"./node_modules/d3-transition/src/transition/styleTween.js":function(e,t,r){"use strict";function styleInterpolate(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function styleTween(e,t,r){var n,i;function tween(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&styleInterpolate(e,o,r)),n}return tween._value=t,tween}r.r(t),t["default"]=function(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;return this.tween(n,styleTween(e,t,null==r?"":r))}},"./node_modules/d3-transition/src/transition/text.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/tween.js");function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e(this);this.textContent=null==t?"":t}}t["default"]=function(e){return this.tween("text","function"===typeof e?textFunction(Object(n["tweenValue"])(this,"text",e)):textConstant(null==e?"":e+""))}},"./node_modules/d3-transition/src/transition/textTween.js":function(e,t,r){"use strict";function textInterpolate(e){return function(t){this.textContent=e.call(this,t)}}function textTween(e){var t,r;function tween(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&textInterpolate(n)),t}return tween._value=e,tween}r.r(t),t["default"]=function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,textTween(e))}},"./node_modules/d3-transition/src/transition/transition.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-transition/src/transition/index.js"),i=r("./node_modules/d3-transition/src/transition/schedule.js");t["default"]=function(){for(var e=this._name,t=this._id,r=Object(n["newId"])(),o=this._groups,s=o.length,a=0;a<s;++a)for(var u,c=o[a],l=c.length,d=0;d<l;++d)if(u=c[d]){var h=Object(i["get"])(u,t);Object(i["default"])(u,e,r,d,c,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new n["Transition"](o,this._parents,e,r)}},"./node_modules/d3-transition/src/transition/tween.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tweenValue",(function(){return tweenValue}));var n=r("./node_modules/d3-transition/src/transition/schedule.js");function tweenRemove(e,t){var r,i;return function(){var o=Object(n["set"])(this,e),s=o.tween;if(s!==r){i=r=s;for(var a=0,u=i.length;a<u;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function tweenFunction(e,t,r){var i,o;if("function"!==typeof r)throw new Error;return function(){var s=Object(n["set"])(this,e),a=s.tween;if(a!==i){o=(i=a).slice();for(var u={name:t,value:r},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=u;break}c===l&&o.push(u)}s.tween=o}}function tweenValue(e,t,r){var i=e._id;return e.each((function(){var e=Object(n["set"])(this,i);(e.value||(e.value={}))[t]=r.apply(this,arguments)})),function(e){return Object(n["get"])(e,i).value[t]}}t["default"]=function(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i,o=Object(n["get"])(this.node(),r).tween,s=0,a=o.length;s<a;++s)if((i=o[s]).name===e)return i.value;return null}return this.each((null==t?tweenRemove:tweenFunction)(r,e,t))}},"./node_modules/d3-zoom/src/constant.js":function(e,t,r){"use strict";r.r(t),t["default"]=e=>()=>e},"./node_modules/d3-zoom/src/event.js":function(e,t,r){"use strict";function ZoomEvent(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}r.r(t),r.d(t,"default",(function(){return ZoomEvent}))},"./node_modules/d3-zoom/src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-zoom/src/zoom.js");r.d(t,"zoom",(function(){return n["default"]}));var i=r("./node_modules/d3-zoom/src/transform.js");r.d(t,"zoomTransform",(function(){return i["default"]})),r.d(t,"zoomIdentity",(function(){return i["identity"]}))},"./node_modules/d3-zoom/src/noevent.js":function(e,t,r){"use strict";function nopropagation(e){e.stopImmediatePropagation()}r.r(t),r.d(t,"nopropagation",(function(){return nopropagation})),t["default"]=function(e){e.preventDefault(),e.stopImmediatePropagation()}},"./node_modules/d3-zoom/src/transform.js":function(e,t,r){"use strict";function Transform(e,t,r){this.k=e,this.x=t,this.y=r}r.r(t),r.d(t,"Transform",(function(){return Transform})),r.d(t,"identity",(function(){return n})),r.d(t,"default",(function(){return transform})),Transform.prototype={constructor:Transform,scale:function(e){return 1===e?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var n=new Transform(1,0,0);function transform(e){while(!e.__zoom)if(!(e=e.parentNode))return n;return e.__zoom}transform.prototype=Transform.prototype},"./node_modules/d3-zoom/src/zoom.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3-dispatch/src/dispatch.js"),i=r("./node_modules/d3-drag/src/nodrag.js"),o=r("./node_modules/d3-interpolate/src/zoom.js"),s=r("./node_modules/d3-selection/src/select.js"),a=r("./node_modules/d3-selection/src/pointer.js"),u=r("./node_modules/d3-transition/src/index.js"),c=r("./node_modules/d3-zoom/src/constant.js"),l=r("./node_modules/d3-zoom/src/event.js"),d=r("./node_modules/d3-zoom/src/transform.js"),h=r("./node_modules/d3-zoom/src/noevent.js");function defaultFilter(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||d["identity"]}function defaultWheelDelta(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],o=e.invertY(t[0][1])-r[0][1],s=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}t["default"]=function(){var e,t,r,f=defaultFilter,p=defaultExtent,m=defaultConstrain,_=defaultWheelDelta,g=defaultTouchable,b=[0,1/0],v=[[-1/0,-1/0],[1/0,1/0]],M=250,T=o["default"],S=Object(n["default"])("start","zoom","end"),C=500,E=150,P=0,A=10;function zoom(e){e.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(g).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(e,t){return t=Math.max(b[0],Math.min(b[1],t)),t===e.k?e:new d["Transform"](t,e.x,e.y)}function translate(e,t,r){var n=t[0]-r[0]*e.k,i=t[1]-r[1]*e.k;return n===e.x&&i===e.y?e:new d["Transform"](e.k,n,i)}function centroid(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function schedule(e,t,r,n){e.on("start.zoom",(function(){gesture(this,arguments).event(n).start()})).on("interrupt.zoom end.zoom",(function(){gesture(this,arguments).event(n).end()})).tween("zoom",(function(){var e=this,i=arguments,o=gesture(e,i).event(n),s=p.apply(e,i),a=null==r?centroid(s):"function"===typeof r?r.apply(e,i):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,l="function"===typeof t?t.apply(e,i):t,h=T(c.invert(a).concat(u/c.k),l.invert(a).concat(u/l.k));return function(e){if(1===e)e=l;else{var t=h(e),r=u/t[2];e=new d["Transform"](r,a[0]-t[0]*r,a[1]-t[1]*r)}o.zoom(null,e)}}))}function gesture(e,t,r){return!r&&e.__zooming||new Gesture(e,t)}function Gesture(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=p.apply(e,t),this.taps=0}function wheeled(e,...t){if(f.apply(this,arguments)){var r=gesture(this,t).event(e),n=this.__zoom,i=Math.max(b[0],Math.min(b[1],n.k*Math.pow(2,_.apply(this,arguments)))),o=Object(a["default"])(e);if(r.wheel)r.mouse[0][0]===o[0]&&r.mouse[0][1]===o[1]||(r.mouse[1]=n.invert(r.mouse[0]=o)),clearTimeout(r.wheel);else{if(n.k===i)return;r.mouse=[o,n.invert(o)],Object(u["interrupt"])(this),r.start()}Object(h["default"])(e),r.wheel=setTimeout(wheelidled,E),r.zoom("mouse",m(translate(scale(n,i),r.mouse[0],r.mouse[1]),r.extent,v))}function wheelidled(){r.wheel=null,r.end()}}function mousedowned(e,...t){if(!r&&f.apply(this,arguments)){var n=gesture(this,t,!0).event(e),o=Object(s["default"])(e.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),c=Object(a["default"])(e,l),l=e.currentTarget,d=e.clientX,p=e.clientY;Object(i["default"])(e.view),Object(h["nopropagation"])(e),n.mouse=[c,this.__zoom.invert(c)],Object(u["interrupt"])(this),n.start()}function mousemoved(e){if(Object(h["default"])(e),!n.moved){var t=e.clientX-d,r=e.clientY-p;n.moved=t*t+r*r>P}n.event(e).zoom("mouse",m(translate(n.that.__zoom,n.mouse[0]=Object(a["default"])(e,l),n.mouse[1]),n.extent,v))}function mouseupped(e){o.on("mousemove.zoom mouseup.zoom",null),Object(i["yesdrag"])(e.view,n.moved),Object(h["default"])(e),n.event(e).end()}}function dblclicked(e,...t){if(f.apply(this,arguments)){var r=this.__zoom,n=Object(a["default"])(e.changedTouches?e.changedTouches[0]:e,this),i=r.invert(n),o=r.k*(e.shiftKey?.5:2),u=m(translate(scale(r,o),n,i),p.apply(this,t),v);Object(h["default"])(e),M>0?Object(s["default"])(this).transition().duration(M).call(schedule,u,n,e):Object(s["default"])(this).call(zoom.transform,u,n,e)}}function touchstarted(r,...n){if(f.apply(this,arguments)){var i,o,s,c,l=r.touches,d=l.length,p=gesture(this,n,r.changedTouches.length===d).event(r);for(Object(h["nopropagation"])(r),o=0;o<d;++o)s=l[o],c=Object(a["default"])(s,this),c=[c,this.__zoom.invert(c),s.identifier],p.touch0?p.touch1||p.touch0[2]===c[2]||(p.touch1=c,p.taps=0):(p.touch0=c,i=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(p.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),C)),Object(u["interrupt"])(this),p.start())}}function touchmoved(e,...t){if(this.__zooming){var r,n,i,o,s=gesture(this,t).event(e),u=e.changedTouches,c=u.length;for(Object(h["default"])(e),r=0;r<c;++r)n=u[r],i=Object(a["default"])(n,this),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=i);if(n=s.that.__zoom,s.touch1){var l=s.touch0[0],d=s.touch0[1],f=s.touch1[0],p=s.touch1[1],_=(_=f[0]-l[0])*_+(_=f[1]-l[1])*_,g=(g=p[0]-d[0])*g+(g=p[1]-d[1])*g;n=scale(n,Math.sqrt(_/g)),i=[(l[0]+f[0])/2,(l[1]+f[1])/2],o=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",m(translate(n,i,o),s.extent,v))}}function touchended(e,...n){if(this.__zooming){var i,o,u=gesture(this,n).event(e),c=e.changedTouches,l=c.length;for(Object(h["nopropagation"])(e),r&&clearTimeout(r),r=setTimeout((function(){r=null}),C),i=0;i<l;++i)o=c[i],u.touch0&&u.touch0[2]===o.identifier?delete u.touch0:u.touch1&&u.touch1[2]===o.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(o=Object(a["default"])(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<A)){var d=Object(s["default"])(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return zoom.transform=function(e,t,r,n){var i=e.selection?e.selection():e;i.property("__zoom",defaultTransform),e!==i?schedule(e,t,r,n):i.interrupt().each((function(){gesture(this,arguments).event(n).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},zoom.scaleBy=function(e,t,r,n){zoom.scaleTo(e,(function(){var e=this.__zoom.k,r="function"===typeof t?t.apply(this,arguments):t;return e*r}),r,n)},zoom.scaleTo=function(e,t,r,n){zoom.transform(e,(function(){var e=p.apply(this,arguments),n=this.__zoom,i=null==r?centroid(e):"function"===typeof r?r.apply(this,arguments):r,o=n.invert(i),s="function"===typeof t?t.apply(this,arguments):t;return m(translate(scale(n,s),i,o),e,v)}),r,n)},zoom.translateBy=function(e,t,r,n){zoom.transform(e,(function(){return m(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof r?r.apply(this,arguments):r),p.apply(this,arguments),v)}),null,n)},zoom.translateTo=function(e,t,r,n,i){zoom.transform(e,(function(){var e=p.apply(this,arguments),i=this.__zoom,o=null==n?centroid(e):"function"===typeof n?n.apply(this,arguments):n;return m(d["identity"].translate(o[0],o[1]).scale(i.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof r?-r.apply(this,arguments):-r),e,v)}),n,i)},Gesture.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Object(s["default"])(this.that).datum();S.call(e,this.that,new l["default"](e,{sourceEvent:this.sourceEvent,target:zoom,type:e,transform:this.that.__zoom,dispatch:S}),t)}},zoom.wheelDelta=function(e){return arguments.length?(_="function"===typeof e?e:Object(c["default"])(+e),zoom):_},zoom.filter=function(e){return arguments.length?(f="function"===typeof e?e:Object(c["default"])(!!e),zoom):f},zoom.touchable=function(e){return arguments.length?(g="function"===typeof e?e:Object(c["default"])(!!e),zoom):g},zoom.extent=function(e){return arguments.length?(p="function"===typeof e?e:Object(c["default"])([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),zoom):p},zoom.scaleExtent=function(e){return arguments.length?(b[0]=+e[0],b[1]=+e[1],zoom):[b[0],b[1]]},zoom.translateExtent=function(e){return arguments.length?(v[0][0]=+e[0][0],v[1][0]=+e[1][0],v[0][1]=+e[0][1],v[1][1]=+e[1][1],zoom):[[v[0][0],v[0][1]],[v[1][0],v[1][1]]]},zoom.constrain=function(e){return arguments.length?(m=e,zoom):m},zoom.duration=function(e){return arguments.length?(M=+e,zoom):M},zoom.interpolate=function(e){return arguments.length?(T=e,zoom):T},zoom.on=function(){var e=S.on.apply(S,arguments);return e===S?zoom:e},zoom.clickDistance=function(e){return arguments.length?(P=(e=+e)*e,zoom):Math.sqrt(P)},zoom.tapDistance=function(e){return arguments.length?(A=+e,zoom):A},zoom}},"./node_modules/d3/dist/package.js":function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return n})),r.d(t,"version",(function(){return i})),r.d(t,"description",(function(){return o})),r.d(t,"keywords",(function(){return s})),r.d(t,"homepage",(function(){return a})),r.d(t,"license",(function(){return u})),r.d(t,"author",(function(){return c})),r.d(t,"main",(function(){return l})),r.d(t,"unpkg",(function(){return d})),r.d(t,"jsdelivr",(function(){return h})),r.d(t,"module",(function(){return e})),r.d(t,"repository",(function(){return f})),r.d(t,"files",(function(){return p})),r.d(t,"scripts",(function(){return m})),r.d(t,"devDependencies",(function(){return _})),r.d(t,"dependencies",(function(){return g}));var n="d3",i="6.7.0",o="Data-Driven Documents",s=["dom","visualization","svg","animation","canvas"],a="https://d3js.org",u="BSD-3-Clause",c={name:"Mike Bostock",url:"https://bost.ocks.org/mike"},l="dist/d3.node.js",d="dist/d3.min.js",h="dist/d3.min.js",f=(e="index.js",{type:"git",url:"https://github.com/d3/d3.git"}),p=["dist/**/*.js","index.js"],m={pretest:"rimraf dist && mkdir dist && json2module package.json > dist/package.js && rollup -c",test:"tape 'test/**/*-test.js'",prepublishOnly:"yarn test",postpublish:'git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/dist/d3.js d3.v${npm_package_version%%.*}.js && cp ../d3/dist/d3.min.js d3.v${npm_package_version%%.*}.min.js && git add d3.v${npm_package_version%%.*}.js d3.v${npm_package_version%%.*}.min.js && git commit -m "d3 ${npm_package_version}" && git push && cd - && zip -j dist/d3.zip -- LICENSE README.md API.md CHANGES.md dist/d3.js dist/d3.min.js'},_={json2module:"0.0",rimraf:"3",rollup:"2","rollup-plugin-ascii":"0.0","rollup-plugin-node-resolve":"5","rollup-plugin-terser":"7",tape:"4","tape-await":"0.1"},g={"d3-array":"2","d3-axis":"2","d3-brush":"2","d3-chord":"2","d3-color":"2","d3-contour":"2","d3-delaunay":"5","d3-dispatch":"2","d3-drag":"2","d3-dsv":"2","d3-ease":"2","d3-fetch":"2","d3-force":"2","d3-format":"2","d3-geo":"2","d3-hierarchy":"2","d3-interpolate":"2","d3-path":"2","d3-polygon":"2","d3-quadtree":"2","d3-random":"2","d3-scale":"3","d3-scale-chromatic":"2","d3-selection":"2","d3-shape":"2","d3-time":"2","d3-time-format":"3","d3-timer":"2","d3-transition":"2","d3-zoom":"2"}},"./node_modules/d3/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/d3/dist/package.js");r.d(t,"version",(function(){return n["version"]}));var i=r("./node_modules/d3-array/src/index.js");r.d(t,"bisect",(function(){return i["bisect"]})),r.d(t,"bisectRight",(function(){return i["bisectRight"]})),r.d(t,"bisectLeft",(function(){return i["bisectLeft"]})),r.d(t,"bisectCenter",(function(){return i["bisectCenter"]})),r.d(t,"ascending",(function(){return i["ascending"]})),r.d(t,"bisector",(function(){return i["bisector"]})),r.d(t,"count",(function(){return i["count"]})),r.d(t,"cross",(function(){return i["cross"]})),r.d(t,"cumsum",(function(){return i["cumsum"]})),r.d(t,"descending",(function(){return i["descending"]})),r.d(t,"deviation",(function(){return i["deviation"]})),r.d(t,"extent",(function(){return i["extent"]})),r.d(t,"Adder",(function(){return i["Adder"]})),r.d(t,"fsum",(function(){return i["fsum"]})),r.d(t,"fcumsum",(function(){return i["fcumsum"]})),r.d(t,"group",(function(){return i["group"]})),r.d(t,"groups",(function(){return i["groups"]})),r.d(t,"index",(function(){return i["index"]})),r.d(t,"indexes",(function(){return i["indexes"]})),r.d(t,"rollup",(function(){return i["rollup"]})),r.d(t,"rollups",(function(){return i["rollups"]})),r.d(t,"groupSort",(function(){return i["groupSort"]})),r.d(t,"bin",(function(){return i["bin"]})),r.d(t,"histogram",(function(){return i["histogram"]})),r.d(t,"thresholdFreedmanDiaconis",(function(){return i["thresholdFreedmanDiaconis"]})),r.d(t,"thresholdScott",(function(){return i["thresholdScott"]})),r.d(t,"thresholdSturges",(function(){return i["thresholdSturges"]})),r.d(t,"max",(function(){return i["max"]})),r.d(t,"maxIndex",(function(){return i["maxIndex"]})),r.d(t,"mean",(function(){return i["mean"]})),r.d(t,"median",(function(){return i["median"]})),r.d(t,"merge",(function(){return i["merge"]})),r.d(t,"min",(function(){return i["min"]})),r.d(t,"minIndex",(function(){return i["minIndex"]})),r.d(t,"nice",(function(){return i["nice"]})),r.d(t,"pairs",(function(){return i["pairs"]})),r.d(t,"permute",(function(){return i["permute"]})),r.d(t,"quantile",(function(){return i["quantile"]})),r.d(t,"quantileSorted",(function(){return i["quantileSorted"]})),r.d(t,"quickselect",(function(){return i["quickselect"]})),r.d(t,"range",(function(){return i["range"]})),r.d(t,"least",(function(){return i["least"]})),r.d(t,"leastIndex",(function(){return i["leastIndex"]})),r.d(t,"greatest",(function(){return i["greatest"]})),r.d(t,"greatestIndex",(function(){return i["greatestIndex"]})),r.d(t,"scan",(function(){return i["scan"]})),r.d(t,"shuffle",(function(){return i["shuffle"]})),r.d(t,"shuffler",(function(){return i["shuffler"]})),r.d(t,"sum",(function(){return i["sum"]})),r.d(t,"ticks",(function(){return i["ticks"]})),r.d(t,"tickIncrement",(function(){return i["tickIncrement"]})),r.d(t,"tickStep",(function(){return i["tickStep"]})),r.d(t,"transpose",(function(){return i["transpose"]})),r.d(t,"variance",(function(){return i["variance"]})),r.d(t,"zip",(function(){return i["zip"]})),r.d(t,"every",(function(){return i["every"]})),r.d(t,"some",(function(){return i["some"]})),r.d(t,"filter",(function(){return i["filter"]})),r.d(t,"map",(function(){return i["map"]})),r.d(t,"reduce",(function(){return i["reduce"]})),r.d(t,"reverse",(function(){return i["reverse"]})),r.d(t,"sort",(function(){return i["sort"]})),r.d(t,"difference",(function(){return i["difference"]})),r.d(t,"disjoint",(function(){return i["disjoint"]})),r.d(t,"intersection",(function(){return i["intersection"]})),r.d(t,"subset",(function(){return i["subset"]})),r.d(t,"superset",(function(){return i["superset"]})),r.d(t,"union",(function(){return i["union"]})),r.d(t,"InternMap",(function(){return i["InternMap"]})),r.d(t,"InternSet",(function(){return i["InternSet"]}));var o=r("./node_modules/d3-axis/src/index.js");r.d(t,"axisTop",(function(){return o["axisTop"]})),r.d(t,"axisRight",(function(){return o["axisRight"]})),r.d(t,"axisBottom",(function(){return o["axisBottom"]})),r.d(t,"axisLeft",(function(){return o["axisLeft"]}));var s=r("./node_modules/d3-brush/src/index.js");r.d(t,"brush",(function(){return s["brush"]})),r.d(t,"brushX",(function(){return s["brushX"]})),r.d(t,"brushY",(function(){return s["brushY"]})),r.d(t,"brushSelection",(function(){return s["brushSelection"]}));var a=r("./node_modules/d3-chord/src/index.js");r.d(t,"chord",(function(){return a["chord"]})),r.d(t,"chordTranspose",(function(){return a["chordTranspose"]})),r.d(t,"chordDirected",(function(){return a["chordDirected"]})),r.d(t,"ribbon",(function(){return a["ribbon"]})),r.d(t,"ribbonArrow",(function(){return a["ribbonArrow"]}));var u=r("./node_modules/d3-color/src/index.js");r.d(t,"color",(function(){return u["color"]})),r.d(t,"rgb",(function(){return u["rgb"]})),r.d(t,"hsl",(function(){return u["hsl"]})),r.d(t,"lab",(function(){return u["lab"]})),r.d(t,"hcl",(function(){return u["hcl"]})),r.d(t,"lch",(function(){return u["lch"]})),r.d(t,"gray",(function(){return u["gray"]})),r.d(t,"cubehelix",(function(){return u["cubehelix"]}));var c=r("./node_modules/d3-contour/src/index.js");r.d(t,"contours",(function(){return c["contours"]})),r.d(t,"contourDensity",(function(){return c["contourDensity"]}));var l=r("./node_modules/d3-delaunay/src/index.js");r.d(t,"Delaunay",(function(){return l["Delaunay"]})),r.d(t,"Voronoi",(function(){return l["Voronoi"]}));var d=r("./node_modules/d3-dispatch/src/index.js");r.d(t,"dispatch",(function(){return d["dispatch"]}));var h=r("./node_modules/d3-drag/src/index.js");r.d(t,"drag",(function(){return h["drag"]})),r.d(t,"dragDisable",(function(){return h["dragDisable"]})),r.d(t,"dragEnable",(function(){return h["dragEnable"]}));var f=r("./node_modules/d3-dsv/src/index.js");r.d(t,"dsvFormat",(function(){return f["dsvFormat"]})),r.d(t,"csvParse",(function(){return f["csvParse"]})),r.d(t,"csvParseRows",(function(){return f["csvParseRows"]})),r.d(t,"csvFormat",(function(){return f["csvFormat"]})),r.d(t,"csvFormatBody",(function(){return f["csvFormatBody"]})),r.d(t,"csvFormatRows",(function(){return f["csvFormatRows"]})),r.d(t,"csvFormatRow",(function(){return f["csvFormatRow"]})),r.d(t,"csvFormatValue",(function(){return f["csvFormatValue"]})),r.d(t,"tsvParse",(function(){return f["tsvParse"]})),r.d(t,"tsvParseRows",(function(){return f["tsvParseRows"]})),r.d(t,"tsvFormat",(function(){return f["tsvFormat"]})),r.d(t,"tsvFormatBody",(function(){return f["tsvFormatBody"]})),r.d(t,"tsvFormatRows",(function(){return f["tsvFormatRows"]})),r.d(t,"tsvFormatRow",(function(){return f["tsvFormatRow"]})),r.d(t,"tsvFormatValue",(function(){return f["tsvFormatValue"]})),r.d(t,"autoType",(function(){return f["autoType"]}));var p=r("./node_modules/d3-ease/src/index.js");r.d(t,"easeLinear",(function(){return p["easeLinear"]})),r.d(t,"easeQuad",(function(){return p["easeQuad"]})),r.d(t,"easeQuadIn",(function(){return p["easeQuadIn"]})),r.d(t,"easeQuadOut",(function(){return p["easeQuadOut"]})),r.d(t,"easeQuadInOut",(function(){return p["easeQuadInOut"]})),r.d(t,"easeCubic",(function(){return p["easeCubic"]})),r.d(t,"easeCubicIn",(function(){return p["easeCubicIn"]})),r.d(t,"easeCubicOut",(function(){return p["easeCubicOut"]})),r.d(t,"easeCubicInOut",(function(){return p["easeCubicInOut"]})),r.d(t,"easePoly",(function(){return p["easePoly"]})),r.d(t,"easePolyIn",(function(){return p["easePolyIn"]})),r.d(t,"easePolyOut",(function(){return p["easePolyOut"]})),r.d(t,"easePolyInOut",(function(){return p["easePolyInOut"]})),r.d(t,"easeSin",(function(){return p["easeSin"]})),r.d(t,"easeSinIn",(function(){return p["easeSinIn"]})),r.d(t,"easeSinOut",(function(){return p["easeSinOut"]})),r.d(t,"easeSinInOut",(function(){return p["easeSinInOut"]})),r.d(t,"easeExp",(function(){return p["easeExp"]})),r.d(t,"easeExpIn",(function(){return p["easeExpIn"]})),r.d(t,"easeExpOut",(function(){return p["easeExpOut"]})),r.d(t,"easeExpInOut",(function(){return p["easeExpInOut"]})),r.d(t,"easeCircle",(function(){return p["easeCircle"]})),r.d(t,"easeCircleIn",(function(){return p["easeCircleIn"]})),r.d(t,"easeCircleOut",(function(){return p["easeCircleOut"]})),r.d(t,"easeCircleInOut",(function(){return p["easeCircleInOut"]})),r.d(t,"easeBounce",(function(){return p["easeBounce"]})),r.d(t,"easeBounceIn",(function(){return p["easeBounceIn"]})),r.d(t,"easeBounceOut",(function(){return p["easeBounceOut"]})),r.d(t,"easeBounceInOut",(function(){return p["easeBounceInOut"]})),r.d(t,"easeBack",(function(){return p["easeBack"]})),r.d(t,"easeBackIn",(function(){return p["easeBackIn"]})),r.d(t,"easeBackOut",(function(){return p["easeBackOut"]})),r.d(t,"easeBackInOut",(function(){return p["easeBackInOut"]})),r.d(t,"easeElastic",(function(){return p["easeElastic"]})),r.d(t,"easeElasticIn",(function(){return p["easeElasticIn"]})),r.d(t,"easeElasticOut",(function(){return p["easeElasticOut"]})),r.d(t,"easeElasticInOut",(function(){return p["easeElasticInOut"]}));var m=r("./node_modules/d3-fetch/src/index.js");r.d(t,"blob",(function(){return m["blob"]})),r.d(t,"buffer",(function(){return m["buffer"]})),r.d(t,"dsv",(function(){return m["dsv"]})),r.d(t,"csv",(function(){return m["csv"]})),r.d(t,"tsv",(function(){return m["tsv"]})),r.d(t,"image",(function(){return m["image"]})),r.d(t,"json",(function(){return m["json"]})),r.d(t,"text",(function(){return m["text"]})),r.d(t,"xml",(function(){return m["xml"]})),r.d(t,"html",(function(){return m["html"]})),r.d(t,"svg",(function(){return m["svg"]}));var _=r("./node_modules/d3-force/src/index.js");r.d(t,"forceCenter",(function(){return _["forceCenter"]})),r.d(t,"forceCollide",(function(){return _["forceCollide"]})),r.d(t,"forceLink",(function(){return _["forceLink"]})),r.d(t,"forceManyBody",(function(){return _["forceManyBody"]})),r.d(t,"forceRadial",(function(){return _["forceRadial"]})),r.d(t,"forceSimulation",(function(){return _["forceSimulation"]})),r.d(t,"forceX",(function(){return _["forceX"]})),r.d(t,"forceY",(function(){return _["forceY"]}));var g=r("./node_modules/d3-format/src/index.js");r.d(t,"formatDefaultLocale",(function(){return g["formatDefaultLocale"]})),r.d(t,"format",(function(){return g["format"]})),r.d(t,"formatPrefix",(function(){return g["formatPrefix"]})),r.d(t,"formatLocale",(function(){return g["formatLocale"]})),r.d(t,"formatSpecifier",(function(){return g["formatSpecifier"]})),r.d(t,"FormatSpecifier",(function(){return g["FormatSpecifier"]})),r.d(t,"precisionFixed",(function(){return g["precisionFixed"]})),r.d(t,"precisionPrefix",(function(){return g["precisionPrefix"]})),r.d(t,"precisionRound",(function(){return g["precisionRound"]}));var b=r("./node_modules/d3-geo/src/index.js");r.d(t,"geoArea",(function(){return b["geoArea"]})),r.d(t,"geoBounds",(function(){return b["geoBounds"]})),r.d(t,"geoCentroid",(function(){return b["geoCentroid"]})),r.d(t,"geoCircle",(function(){return b["geoCircle"]})),r.d(t,"geoClipAntimeridian",(function(){return b["geoClipAntimeridian"]})),r.d(t,"geoClipCircle",(function(){return b["geoClipCircle"]})),r.d(t,"geoClipExtent",(function(){return b["geoClipExtent"]})),r.d(t,"geoClipRectangle",(function(){return b["geoClipRectangle"]})),r.d(t,"geoContains",(function(){return b["geoContains"]})),r.d(t,"geoDistance",(function(){return b["geoDistance"]})),r.d(t,"geoGraticule",(function(){return b["geoGraticule"]})),r.d(t,"geoGraticule10",(function(){return b["geoGraticule10"]})),r.d(t,"geoInterpolate",(function(){return b["geoInterpolate"]})),r.d(t,"geoLength",(function(){return b["geoLength"]})),r.d(t,"geoPath",(function(){return b["geoPath"]})),r.d(t,"geoAlbers",(function(){return b["geoAlbers"]})),r.d(t,"geoAlbersUsa",(function(){return b["geoAlbersUsa"]})),r.d(t,"geoAzimuthalEqualArea",(function(){return b["geoAzimuthalEqualArea"]})),r.d(t,"geoAzimuthalEqualAreaRaw",(function(){return b["geoAzimuthalEqualAreaRaw"]})),r.d(t,"geoAzimuthalEquidistant",(function(){return b["geoAzimuthalEquidistant"]})),r.d(t,"geoAzimuthalEquidistantRaw",(function(){return b["geoAzimuthalEquidistantRaw"]})),r.d(t,"geoConicConformal",(function(){return b["geoConicConformal"]})),r.d(t,"geoConicConformalRaw",(function(){return b["geoConicConformalRaw"]})),r.d(t,"geoConicEqualArea",(function(){return b["geoConicEqualArea"]})),r.d(t,"geoConicEqualAreaRaw",(function(){return b["geoConicEqualAreaRaw"]})),r.d(t,"geoConicEquidistant",(function(){return b["geoConicEquidistant"]})),r.d(t,"geoConicEquidistantRaw",(function(){return b["geoConicEquidistantRaw"]})),r.d(t,"geoEqualEarth",(function(){return b["geoEqualEarth"]})),r.d(t,"geoEqualEarthRaw",(function(){return b["geoEqualEarthRaw"]})),r.d(t,"geoEquirectangular",(function(){return b["geoEquirectangular"]})),r.d(t,"geoEquirectangularRaw",(function(){return b["geoEquirectangularRaw"]})),r.d(t,"geoGnomonic",(function(){return b["geoGnomonic"]})),r.d(t,"geoGnomonicRaw",(function(){return b["geoGnomonicRaw"]})),r.d(t,"geoIdentity",(function(){return b["geoIdentity"]})),r.d(t,"geoProjection",(function(){return b["geoProjection"]})),r.d(t,"geoProjectionMutator",(function(){return b["geoProjectionMutator"]})),r.d(t,"geoMercator",(function(){return b["geoMercator"]})),r.d(t,"geoMercatorRaw",(function(){return b["geoMercatorRaw"]})),r.d(t,"geoNaturalEarth1",(function(){return b["geoNaturalEarth1"]})),r.d(t,"geoNaturalEarth1Raw",(function(){return b["geoNaturalEarth1Raw"]})),r.d(t,"geoOrthographic",(function(){return b["geoOrthographic"]})),r.d(t,"geoOrthographicRaw",(function(){return b["geoOrthographicRaw"]})),r.d(t,"geoStereographic",(function(){return b["geoStereographic"]})),r.d(t,"geoStereographicRaw",(function(){return b["geoStereographicRaw"]})),r.d(t,"geoTransverseMercator",(function(){return b["geoTransverseMercator"]})),r.d(t,"geoTransverseMercatorRaw",(function(){return b["geoTransverseMercatorRaw"]})),r.d(t,"geoRotation",(function(){return b["geoRotation"]})),r.d(t,"geoStream",(function(){return b["geoStream"]})),r.d(t,"geoTransform",(function(){return b["geoTransform"]}));var v=r("./node_modules/d3-hierarchy/src/index.js");r.d(t,"cluster",(function(){return v["cluster"]})),r.d(t,"hierarchy",(function(){return v["hierarchy"]})),r.d(t,"pack",(function(){return v["pack"]})),r.d(t,"packSiblings",(function(){return v["packSiblings"]})),r.d(t,"packEnclose",(function(){return v["packEnclose"]})),r.d(t,"partition",(function(){return v["partition"]})),r.d(t,"stratify",(function(){return v["stratify"]})),r.d(t,"tree",(function(){return v["tree"]})),r.d(t,"treemap",(function(){return v["treemap"]})),r.d(t,"treemapBinary",(function(){return v["treemapBinary"]})),r.d(t,"treemapDice",(function(){return v["treemapDice"]})),r.d(t,"treemapSlice",(function(){return v["treemapSlice"]})),r.d(t,"treemapSliceDice",(function(){return v["treemapSliceDice"]})),r.d(t,"treemapSquarify",(function(){return v["treemapSquarify"]})),r.d(t,"treemapResquarify",(function(){return v["treemapResquarify"]}));var M=r("./node_modules/d3-interpolate/src/index.js");r.d(t,"interpolate",(function(){return M["interpolate"]})),r.d(t,"interpolateArray",(function(){return M["interpolateArray"]})),r.d(t,"interpolateBasis",(function(){return M["interpolateBasis"]})),r.d(t,"interpolateBasisClosed",(function(){return M["interpolateBasisClosed"]})),r.d(t,"interpolateDate",(function(){return M["interpolateDate"]})),r.d(t,"interpolateDiscrete",(function(){return M["interpolateDiscrete"]})),r.d(t,"interpolateHue",(function(){return M["interpolateHue"]})),r.d(t,"interpolateNumber",(function(){return M["interpolateNumber"]})),r.d(t,"interpolateNumberArray",(function(){return M["interpolateNumberArray"]})),r.d(t,"interpolateObject",(function(){return M["interpolateObject"]})),r.d(t,"interpolateRound",(function(){return M["interpolateRound"]})),r.d(t,"interpolateString",(function(){return M["interpolateString"]})),r.d(t,"interpolateTransformCss",(function(){return M["interpolateTransformCss"]})),r.d(t,"interpolateTransformSvg",(function(){return M["interpolateTransformSvg"]})),r.d(t,"interpolateZoom",(function(){return M["interpolateZoom"]})),r.d(t,"interpolateRgb",(function(){return M["interpolateRgb"]})),r.d(t,"interpolateRgbBasis",(function(){return M["interpolateRgbBasis"]})),r.d(t,"interpolateRgbBasisClosed",(function(){return M["interpolateRgbBasisClosed"]})),r.d(t,"interpolateHsl",(function(){return M["interpolateHsl"]})),r.d(t,"interpolateHslLong",(function(){return M["interpolateHslLong"]})),r.d(t,"interpolateLab",(function(){return M["interpolateLab"]})),r.d(t,"interpolateHcl",(function(){return M["interpolateHcl"]})),r.d(t,"interpolateHclLong",(function(){return M["interpolateHclLong"]})),r.d(t,"interpolateCubehelix",(function(){return M["interpolateCubehelix"]})),r.d(t,"interpolateCubehelixLong",(function(){return M["interpolateCubehelixLong"]})),r.d(t,"piecewise",(function(){return M["piecewise"]})),r.d(t,"quantize",(function(){return M["quantize"]}));var T=r("./node_modules/d3-path/src/index.js");r.d(t,"path",(function(){return T["path"]}));var S=r("./node_modules/d3-polygon/src/index.js");r.d(t,"polygonArea",(function(){return S["polygonArea"]})),r.d(t,"polygonCentroid",(function(){return S["polygonCentroid"]})),r.d(t,"polygonHull",(function(){return S["polygonHull"]})),r.d(t,"polygonContains",(function(){return S["polygonContains"]})),r.d(t,"polygonLength",(function(){return S["polygonLength"]}));var C=r("./node_modules/d3-quadtree/src/index.js");r.d(t,"quadtree",(function(){return C["quadtree"]}));var E=r("./node_modules/d3-random/src/index.js");r.d(t,"randomUniform",(function(){return E["randomUniform"]})),r.d(t,"randomInt",(function(){return E["randomInt"]})),r.d(t,"randomNormal",(function(){return E["randomNormal"]})),r.d(t,"randomLogNormal",(function(){return E["randomLogNormal"]})),r.d(t,"randomBates",(function(){return E["randomBates"]})),r.d(t,"randomIrwinHall",(function(){return E["randomIrwinHall"]})),r.d(t,"randomExponential",(function(){return E["randomExponential"]})),r.d(t,"randomPareto",(function(){return E["randomPareto"]})),r.d(t,"randomBernoulli",(function(){return E["randomBernoulli"]})),r.d(t,"randomGeometric",(function(){return E["randomGeometric"]})),r.d(t,"randomBinomial",(function(){return E["randomBinomial"]})),r.d(t,"randomGamma",(function(){return E["randomGamma"]})),r.d(t,"randomBeta",(function(){return E["randomBeta"]})),r.d(t,"randomWeibull",(function(){return E["randomWeibull"]})),r.d(t,"randomCauchy",(function(){return E["randomCauchy"]})),r.d(t,"randomLogistic",(function(){return E["randomLogistic"]})),r.d(t,"randomPoisson",(function(){return E["randomPoisson"]})),r.d(t,"randomLcg",(function(){return E["randomLcg"]}));var P=r("./node_modules/d3-scale/src/index.js");r.d(t,"scaleBand",(function(){return P["scaleBand"]})),r.d(t,"scalePoint",(function(){return P["scalePoint"]})),r.d(t,"scaleIdentity",(function(){return P["scaleIdentity"]})),r.d(t,"scaleLinear",(function(){return P["scaleLinear"]})),r.d(t,"scaleLog",(function(){return P["scaleLog"]})),r.d(t,"scaleSymlog",(function(){return P["scaleSymlog"]})),r.d(t,"scaleOrdinal",(function(){return P["scaleOrdinal"]})),r.d(t,"scaleImplicit",(function(){return P["scaleImplicit"]})),r.d(t,"scalePow",(function(){return P["scalePow"]})),r.d(t,"scaleSqrt",(function(){return P["scaleSqrt"]})),r.d(t,"scaleRadial",(function(){return P["scaleRadial"]})),r.d(t,"scaleQuantile",(function(){return P["scaleQuantile"]})),r.d(t,"scaleQuantize",(function(){return P["scaleQuantize"]})),r.d(t,"scaleThreshold",(function(){return P["scaleThreshold"]})),r.d(t,"scaleTime",(function(){return P["scaleTime"]})),r.d(t,"scaleUtc",(function(){return P["scaleUtc"]})),r.d(t,"scaleSequential",(function(){return P["scaleSequential"]})),r.d(t,"scaleSequentialLog",(function(){return P["scaleSequentialLog"]})),r.d(t,"scaleSequentialPow",(function(){return P["scaleSequentialPow"]})),r.d(t,"scaleSequentialSqrt",(function(){return P["scaleSequentialSqrt"]})),r.d(t,"scaleSequentialSymlog",(function(){return P["scaleSequentialSymlog"]})),r.d(t,"scaleSequentialQuantile",(function(){return P["scaleSequentialQuantile"]})),r.d(t,"scaleDiverging",(function(){return P["scaleDiverging"]})),r.d(t,"scaleDivergingLog",(function(){return P["scaleDivergingLog"]})),r.d(t,"scaleDivergingPow",(function(){return P["scaleDivergingPow"]})),r.d(t,"scaleDivergingSqrt",(function(){return P["scaleDivergingSqrt"]})),r.d(t,"scaleDivergingSymlog",(function(){return P["scaleDivergingSymlog"]})),r.d(t,"tickFormat",(function(){return P["tickFormat"]}));var A=r("./node_modules/d3-scale-chromatic/src/index.js");r.d(t,"schemeCategory10",(function(){return A["schemeCategory10"]})),r.d(t,"schemeAccent",(function(){return A["schemeAccent"]})),r.d(t,"schemeDark2",(function(){return A["schemeDark2"]})),r.d(t,"schemePaired",(function(){return A["schemePaired"]})),r.d(t,"schemePastel1",(function(){return A["schemePastel1"]})),r.d(t,"schemePastel2",(function(){return A["schemePastel2"]})),r.d(t,"schemeSet1",(function(){return A["schemeSet1"]})),r.d(t,"schemeSet2",(function(){return A["schemeSet2"]})),r.d(t,"schemeSet3",(function(){return A["schemeSet3"]})),r.d(t,"schemeTableau10",(function(){return A["schemeTableau10"]})),r.d(t,"interpolateBrBG",(function(){return A["interpolateBrBG"]})),r.d(t,"schemeBrBG",(function(){return A["schemeBrBG"]})),r.d(t,"interpolatePRGn",(function(){return A["interpolatePRGn"]})),r.d(t,"schemePRGn",(function(){return A["schemePRGn"]})),r.d(t,"interpolatePiYG",(function(){return A["interpolatePiYG"]})),r.d(t,"schemePiYG",(function(){return A["schemePiYG"]})),r.d(t,"interpolatePuOr",(function(){return A["interpolatePuOr"]})),r.d(t,"schemePuOr",(function(){return A["schemePuOr"]})),r.d(t,"interpolateRdBu",(function(){return A["interpolateRdBu"]})),r.d(t,"schemeRdBu",(function(){return A["schemeRdBu"]})),r.d(t,"interpolateRdGy",(function(){return A["interpolateRdGy"]})),r.d(t,"schemeRdGy",(function(){return A["schemeRdGy"]})),r.d(t,"interpolateRdYlBu",(function(){return A["interpolateRdYlBu"]})),r.d(t,"schemeRdYlBu",(function(){return A["schemeRdYlBu"]})),r.d(t,"interpolateRdYlGn",(function(){return A["interpolateRdYlGn"]})),r.d(t,"schemeRdYlGn",(function(){return A["schemeRdYlGn"]})),r.d(t,"interpolateSpectral",(function(){return A["interpolateSpectral"]})),r.d(t,"schemeSpectral",(function(){return A["schemeSpectral"]})),r.d(t,"interpolateBuGn",(function(){return A["interpolateBuGn"]})),r.d(t,"schemeBuGn",(function(){return A["schemeBuGn"]})),r.d(t,"interpolateBuPu",(function(){return A["interpolateBuPu"]})),r.d(t,"schemeBuPu",(function(){return A["schemeBuPu"]})),r.d(t,"interpolateGnBu",(function(){return A["interpolateGnBu"]})),r.d(t,"schemeGnBu",(function(){return A["schemeGnBu"]})),r.d(t,"interpolateOrRd",(function(){return A["interpolateOrRd"]})),r.d(t,"schemeOrRd",(function(){return A["schemeOrRd"]})),r.d(t,"interpolatePuBuGn",(function(){return A["interpolatePuBuGn"]})),r.d(t,"schemePuBuGn",(function(){return A["schemePuBuGn"]})),r.d(t,"interpolatePuBu",(function(){return A["interpolatePuBu"]})),r.d(t,"schemePuBu",(function(){return A["schemePuBu"]})),r.d(t,"interpolatePuRd",(function(){return A["interpolatePuRd"]})),r.d(t,"schemePuRd",(function(){return A["schemePuRd"]})),r.d(t,"interpolateRdPu",(function(){return A["interpolateRdPu"]})),r.d(t,"schemeRdPu",(function(){return A["schemeRdPu"]})),r.d(t,"interpolateYlGnBu",(function(){return A["interpolateYlGnBu"]})),r.d(t,"schemeYlGnBu",(function(){return A["schemeYlGnBu"]})),r.d(t,"interpolateYlGn",(function(){return A["interpolateYlGn"]})),r.d(t,"schemeYlGn",(function(){return A["schemeYlGn"]})),r.d(t,"interpolateYlOrBr",(function(){return A["interpolateYlOrBr"]})),r.d(t,"schemeYlOrBr",(function(){return A["schemeYlOrBr"]})),r.d(t,"interpolateYlOrRd",(function(){return A["interpolateYlOrRd"]})),r.d(t,"schemeYlOrRd",(function(){return A["schemeYlOrRd"]})),r.d(t,"interpolateBlues",(function(){return A["interpolateBlues"]})),r.d(t,"schemeBlues",(function(){return A["schemeBlues"]})),r.d(t,"interpolateGreens",(function(){return A["interpolateGreens"]})),r.d(t,"schemeGreens",(function(){return A["schemeGreens"]})),r.d(t,"interpolateGreys",(function(){return A["interpolateGreys"]})),r.d(t,"schemeGreys",(function(){return A["schemeGreys"]})),r.d(t,"interpolatePurples",(function(){return A["interpolatePurples"]})),r.d(t,"schemePurples",(function(){return A["schemePurples"]})),r.d(t,"interpolateReds",(function(){return A["interpolateReds"]})),r.d(t,"schemeReds",(function(){return A["schemeReds"]})),r.d(t,"interpolateOranges",(function(){return A["interpolateOranges"]})),r.d(t,"schemeOranges",(function(){return A["schemeOranges"]})),r.d(t,"interpolateCividis",(function(){return A["interpolateCividis"]})),r.d(t,"interpolateCubehelixDefault",(function(){return A["interpolateCubehelixDefault"]})),r.d(t,"interpolateRainbow",(function(){return A["interpolateRainbow"]})),r.d(t,"interpolateWarm",(function(){return A["interpolateWarm"]})),r.d(t,"interpolateCool",(function(){return A["interpolateCool"]})),r.d(t,"interpolateSinebow",(function(){return A["interpolateSinebow"]})),r.d(t,"interpolateTurbo",(function(){return A["interpolateTurbo"]})),r.d(t,"interpolateViridis",(function(){return A["interpolateViridis"]})),r.d(t,"interpolateMagma",(function(){return A["interpolateMagma"]})),r.d(t,"interpolateInferno",(function(){return A["interpolateInferno"]})),r.d(t,"interpolatePlasma",(function(){return A["interpolatePlasma"]}));var j=r("./node_modules/d3-selection/src/index.js");r.d(t,"create",(function(){return j["create"]})),r.d(t,"creator",(function(){return j["creator"]})),r.d(t,"local",(function(){return j["local"]})),r.d(t,"matcher",(function(){return j["matcher"]})),r.d(t,"namespace",(function(){return j["namespace"]})),r.d(t,"namespaces",(function(){return j["namespaces"]})),r.d(t,"pointer",(function(){return j["pointer"]})),r.d(t,"pointers",(function(){return j["pointers"]})),r.d(t,"select",(function(){return j["select"]})),r.d(t,"selectAll",(function(){return j["selectAll"]})),r.d(t,"selection",(function(){return j["selection"]})),r.d(t,"selector",(function(){return j["selector"]})),r.d(t,"selectorAll",(function(){return j["selectorAll"]})),r.d(t,"style",(function(){return j["style"]})),r.d(t,"window",(function(){return j["window"]}));var O=r("./node_modules/d3-shape/src/index.js");r.d(t,"arc",(function(){return O["arc"]})),r.d(t,"area",(function(){return O["area"]})),r.d(t,"line",(function(){return O["line"]})),r.d(t,"pie",(function(){return O["pie"]})),r.d(t,"areaRadial",(function(){return O["areaRadial"]})),r.d(t,"radialArea",(function(){return O["radialArea"]})),r.d(t,"lineRadial",(function(){return O["lineRadial"]})),r.d(t,"radialLine",(function(){return O["radialLine"]})),r.d(t,"pointRadial",(function(){return O["pointRadial"]})),r.d(t,"linkHorizontal",(function(){return O["linkHorizontal"]})),r.d(t,"linkVertical",(function(){return O["linkVertical"]})),r.d(t,"linkRadial",(function(){return O["linkRadial"]})),r.d(t,"symbol",(function(){return O["symbol"]})),r.d(t,"symbols",(function(){return O["symbols"]})),r.d(t,"symbolCircle",(function(){return O["symbolCircle"]})),r.d(t,"symbolCross",(function(){return O["symbolCross"]})),r.d(t,"symbolDiamond",(function(){return O["symbolDiamond"]})),r.d(t,"symbolSquare",(function(){return O["symbolSquare"]})),r.d(t,"symbolStar",(function(){return O["symbolStar"]})),r.d(t,"symbolTriangle",(function(){return O["symbolTriangle"]})),r.d(t,"symbolWye",(function(){return O["symbolWye"]})),r.d(t,"curveBasisClosed",(function(){return O["curveBasisClosed"]})),r.d(t,"curveBasisOpen",(function(){return O["curveBasisOpen"]})),r.d(t,"curveBasis",(function(){return O["curveBasis"]})),r.d(t,"curveBumpX",(function(){return O["curveBumpX"]})),r.d(t,"curveBumpY",(function(){return O["curveBumpY"]})),r.d(t,"curveBundle",(function(){return O["curveBundle"]})),r.d(t,"curveCardinalClosed",(function(){return O["curveCardinalClosed"]})),r.d(t,"curveCardinalOpen",(function(){return O["curveCardinalOpen"]})),r.d(t,"curveCardinal",(function(){return O["curveCardinal"]})),r.d(t,"curveCatmullRomClosed",(function(){return O["curveCatmullRomClosed"]})),r.d(t,"curveCatmullRomOpen",(function(){return O["curveCatmullRomOpen"]})),r.d(t,"curveCatmullRom",(function(){return O["curveCatmullRom"]})),r.d(t,"curveLinearClosed",(function(){return O["curveLinearClosed"]})),r.d(t,"curveLinear",(function(){return O["curveLinear"]})),r.d(t,"curveMonotoneX",(function(){return O["curveMonotoneX"]})),r.d(t,"curveMonotoneY",(function(){return O["curveMonotoneY"]})),r.d(t,"curveNatural",(function(){return O["curveNatural"]})),r.d(t,"curveStep",(function(){return O["curveStep"]})),r.d(t,"curveStepAfter",(function(){return O["curveStepAfter"]})),r.d(t,"curveStepBefore",(function(){return O["curveStepBefore"]})),r.d(t,"stack",(function(){return O["stack"]})),r.d(t,"stackOffsetExpand",(function(){return O["stackOffsetExpand"]})),r.d(t,"stackOffsetDiverging",(function(){return O["stackOffsetDiverging"]})),r.d(t,"stackOffsetNone",(function(){return O["stackOffsetNone"]})),r.d(t,"stackOffsetSilhouette",(function(){return O["stackOffsetSilhouette"]})),r.d(t,"stackOffsetWiggle",(function(){return O["stackOffsetWiggle"]})),r.d(t,"stackOrderAppearance",(function(){return O["stackOrderAppearance"]})),r.d(t,"stackOrderAscending",(function(){return O["stackOrderAscending"]})),r.d(t,"stackOrderDescending",(function(){return O["stackOrderDescending"]})),r.d(t,"stackOrderInsideOut",(function(){return O["stackOrderInsideOut"]})),r.d(t,"stackOrderNone",(function(){return O["stackOrderNone"]})),r.d(t,"stackOrderReverse",(function(){return O["stackOrderReverse"]}));var R=r("./node_modules/d3-time/src/index.js");r.d(t,"timeInterval",(function(){return R["timeInterval"]})),r.d(t,"timeMillisecond",(function(){return R["timeMillisecond"]})),r.d(t,"timeMilliseconds",(function(){return R["timeMilliseconds"]})),r.d(t,"utcMillisecond",(function(){return R["utcMillisecond"]})),r.d(t,"utcMilliseconds",(function(){return R["utcMilliseconds"]})),r.d(t,"timeSecond",(function(){return R["timeSecond"]})),r.d(t,"timeSeconds",(function(){return R["timeSeconds"]})),r.d(t,"utcSecond",(function(){return R["utcSecond"]})),r.d(t,"utcSeconds",(function(){return R["utcSeconds"]})),r.d(t,"timeMinute",(function(){return R["timeMinute"]})),r.d(t,"timeMinutes",(function(){return R["timeMinutes"]})),r.d(t,"timeHour",(function(){return R["timeHour"]})),r.d(t,"timeHours",(function(){return R["timeHours"]})),r.d(t,"timeDay",(function(){return R["timeDay"]})),r.d(t,"timeDays",(function(){return R["timeDays"]})),r.d(t,"timeWeek",(function(){return R["timeWeek"]})),r.d(t,"timeWeeks",(function(){return R["timeWeeks"]})),r.d(t,"timeSunday",(function(){return R["timeSunday"]})),r.d(t,"timeSundays",(function(){return R["timeSundays"]})),r.d(t,"timeMonday",(function(){return R["timeMonday"]})),r.d(t,"timeMondays",(function(){return R["timeMondays"]})),r.d(t,"timeTuesday",(function(){return R["timeTuesday"]})),r.d(t,"timeTuesdays",(function(){return R["timeTuesdays"]})),r.d(t,"timeWednesday",(function(){return R["timeWednesday"]})),r.d(t,"timeWednesdays",(function(){return R["timeWednesdays"]})),r.d(t,"timeThursday",(function(){return R["timeThursday"]})),r.d(t,"timeThursdays",(function(){return R["timeThursdays"]})),r.d(t,"timeFriday",(function(){return R["timeFriday"]})),r.d(t,"timeFridays",(function(){return R["timeFridays"]})),r.d(t,"timeSaturday",(function(){return R["timeSaturday"]})),r.d(t,"timeSaturdays",(function(){return R["timeSaturdays"]})),r.d(t,"timeMonth",(function(){return R["timeMonth"]})),r.d(t,"timeMonths",(function(){return R["timeMonths"]})),r.d(t,"timeYear",(function(){return R["timeYear"]})),r.d(t,"timeYears",(function(){return R["timeYears"]})),r.d(t,"utcMinute",(function(){return R["utcMinute"]})),r.d(t,"utcMinutes",(function(){return R["utcMinutes"]})),r.d(t,"utcHour",(function(){return R["utcHour"]})),r.d(t,"utcHours",(function(){return R["utcHours"]})),r.d(t,"utcDay",(function(){return R["utcDay"]})),r.d(t,"utcDays",(function(){return R["utcDays"]})),r.d(t,"utcWeek",(function(){return R["utcWeek"]})),r.d(t,"utcWeeks",(function(){return R["utcWeeks"]})),r.d(t,"utcSunday",(function(){return R["utcSunday"]})),r.d(t,"utcSundays",(function(){return R["utcSundays"]})),r.d(t,"utcMonday",(function(){return R["utcMonday"]})),r.d(t,"utcMondays",(function(){return R["utcMondays"]})),r.d(t,"utcTuesday",(function(){return R["utcTuesday"]})),r.d(t,"utcTuesdays",(function(){return R["utcTuesdays"]})),r.d(t,"utcWednesday",(function(){return R["utcWednesday"]})),r.d(t,"utcWednesdays",(function(){return R["utcWednesdays"]})),r.d(t,"utcThursday",(function(){return R["utcThursday"]})),r.d(t,"utcThursdays",(function(){return R["utcThursdays"]})),r.d(t,"utcFriday",(function(){return R["utcFriday"]})),r.d(t,"utcFridays",(function(){return R["utcFridays"]})),r.d(t,"utcSaturday",(function(){return R["utcSaturday"]})),r.d(t,"utcSaturdays",(function(){return R["utcSaturdays"]})),r.d(t,"utcMonth",(function(){return R["utcMonth"]})),r.d(t,"utcMonths",(function(){return R["utcMonths"]})),r.d(t,"utcYear",(function(){return R["utcYear"]})),r.d(t,"utcYears",(function(){return R["utcYears"]})),r.d(t,"utcTicks",(function(){return R["utcTicks"]})),r.d(t,"utcTickInterval",(function(){return R["utcTickInterval"]})),r.d(t,"timeTicks",(function(){return R["timeTicks"]})),r.d(t,"timeTickInterval",(function(){return R["timeTickInterval"]}));var I=r("./node_modules/d3-time-format/src/index.js");r.d(t,"timeFormatDefaultLocale",(function(){return I["timeFormatDefaultLocale"]})),r.d(t,"timeFormat",(function(){return I["timeFormat"]})),r.d(t,"timeParse",(function(){return I["timeParse"]})),r.d(t,"utcFormat",(function(){return I["utcFormat"]})),r.d(t,"utcParse",(function(){return I["utcParse"]})),r.d(t,"timeFormatLocale",(function(){return I["timeFormatLocale"]})),r.d(t,"isoFormat",(function(){return I["isoFormat"]})),r.d(t,"isoParse",(function(){return I["isoParse"]}));var w=r("./node_modules/d3-timer/src/index.js");r.d(t,"now",(function(){return w["now"]})),r.d(t,"timer",(function(){return w["timer"]})),r.d(t,"timerFlush",(function(){return w["timerFlush"]})),r.d(t,"timeout",(function(){return w["timeout"]})),r.d(t,"interval",(function(){return w["interval"]}));var D=r("./node_modules/d3-transition/src/index.js");r.d(t,"transition",(function(){return D["transition"]})),r.d(t,"active",(function(){return D["active"]})),r.d(t,"interrupt",(function(){return D["interrupt"]}));var F=r("./node_modules/d3-zoom/src/index.js");r.d(t,"zoom",(function(){return F["zoom"]})),r.d(t,"zoomTransform",(function(){return F["zoomTransform"]})),r.d(t,"zoomIdentity",(function(){return F["zoomIdentity"]}))},"./node_modules/delaunator/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Delaunator}));const n=Math.pow(2,-52),i=new Uint32Array(512);class Delaunator{static from(e,t=defaultGetX,r=defaultGetY){const n=e.length,i=new Float64Array(2*n);for(let o=0;o<n;o++){const n=e[o];i[2*o]=t(n),i[2*o+1]=r(n)}return new Delaunator(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=e.length>>1;let a=1/0,u=1/0,c=-1/0,l=-1/0;for(let n=0;n<s;n++){const t=e[2*n],r=e[2*n+1];t<a&&(a=t),r<u&&(u=r),t>c&&(c=t),r>l&&(l=r),this._ids[n]=n}const d=(a+c)/2,h=(u+l)/2;let f,p,m,_=1/0;for(let n=0;n<s;n++){const t=dist(d,h,e[2*n],e[2*n+1]);t<_&&(f=n,_=t)}const g=e[2*f],b=e[2*f+1];_=1/0;for(let n=0;n<s;n++){if(n===f)continue;const t=dist(g,b,e[2*n],e[2*n+1]);t<_&&t>0&&(p=n,_=t)}let v=e[2*p],M=e[2*p+1],T=1/0;for(let n=0;n<s;n++){if(n===f||n===p)continue;const t=circumradius(g,b,v,M,e[2*n],e[2*n+1]);t<T&&(m=n,T=t)}let S=e[2*m],C=e[2*m+1];if(T===1/0){for(let n=0;n<s;n++)this._dists[n]=e[2*n]-e[0]||e[2*n+1]-e[1];quicksort(this._ids,this._dists,0,s-1);const t=new Uint32Array(s);let r=0;for(let e=0,n=-1/0;e<s;e++){const i=this._ids[e];this._dists[i]>n&&(t[r++]=i,n=this._dists[i])}return this.hull=t.subarray(0,r),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(orient(g,b,v,M,S,C)){const e=p,t=v,r=M;p=m,v=S,M=C,m=e,S=t,C=r}const E=circumcenter(g,b,v,M,S,C);this._cx=E.x,this._cy=E.y;for(let n=0;n<s;n++)this._dists[n]=dist(e[2*n],e[2*n+1],E.x,E.y);quicksort(this._ids,this._dists,0,s-1),this._hullStart=f;let P=3;r[f]=t[m]=p,r[p]=t[f]=m,r[m]=t[p]=f,i[f]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,b)]=f,o[this._hashKey(v,M)]=p,o[this._hashKey(S,C)]=m,this.trianglesLen=0,this._addTriangle(f,p,m,-1,-1,-1);for(let A,j,O=0;O<this._ids.length;O++){const s=this._ids[O],a=e[2*s],u=e[2*s+1];if(O>0&&Math.abs(a-A)<=n&&Math.abs(u-j)<=n)continue;if(A=a,j=u,s===f||s===p||s===m)continue;let c=0;for(let e=0,t=this._hashKey(a,u);e<this._hashSize;e++)if(c=o[(t+e)%this._hashSize],-1!==c&&c!==r[c])break;c=t[c];let l,d=c;while(l=r[d],!orient(a,u,e[2*d],e[2*d+1],e[2*l],e[2*l+1]))if(d=l,d===c){d=-1;break}if(-1===d)continue;let h=this._addTriangle(d,s,r[d],-1,-1,i[d]);i[s]=this._legalize(h+2),i[d]=h,P++;let _=r[d];while(l=r[_],orient(a,u,e[2*_],e[2*_+1],e[2*l],e[2*l+1]))h=this._addTriangle(_,s,l,i[s],-1,i[_]),i[s]=this._legalize(h+2),r[_]=_,P--,_=l;if(d===c)while(l=t[d],orient(a,u,e[2*l],e[2*l+1],e[2*d],e[2*d+1]))h=this._addTriangle(l,s,d,-1,i[d],i[l]),this._legalize(h+2),i[l]=h,r[d]=d,P--,d=l;this._hullStart=t[s]=d,r[d]=t[_]=s,r[s]=_,o[this._hashKey(a,u)]=s,o[this._hashKey(e[2*d],e[2*d+1])]=d}this.hull=new Uint32Array(P);for(let n=0,A=this._hullStart;n<P;n++)this.hull[n]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(pseudoAngle(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:n}=this;let o=0,s=0;while(1){const a=r[e],u=e-e%3;if(s=u+(e+2)%3,-1===a){if(0===o)break;e=i[--o];continue}const c=a-a%3,l=u+(e+1)%3,d=c+(a+2)%3,h=t[s],f=t[e],p=t[l],m=t[d],_=inCircle(n[2*h],n[2*h+1],n[2*f],n[2*f+1],n[2*p],n[2*p+1],n[2*m],n[2*m+1]);if(_){t[e]=m,t[a]=h;const n=r[d];if(-1===n){let t=this._hullStart;do{if(this._hullTri[t]===d){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,n),this._link(a,r[s]),this._link(s,d);const u=c+(a+1)%3;o<i.length&&(i[o++]=u)}else{if(0===o)break;e=i[--o]}}return s}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,r,n,i,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=r,this._link(s,n),this._link(s+1,i),this._link(s+2,o),this.trianglesLen+=3,s}}function pseudoAngle(e,t){const r=e/(Math.abs(e)+Math.abs(t));return(t>0?3-r:1+r)/4}function dist(e,t,r,n){const i=e-r,o=t-n;return i*i+o*o}function orientIfSure(e,t,r,n,i,o){const s=(n-t)*(i-e),a=(r-e)*(o-t);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function orient(e,t,r,n,i,o){const s=orientIfSure(i,o,e,t,r,n)||orientIfSure(e,t,r,n,i,o)||orientIfSure(r,n,i,o,e,t);return s<0}function inCircle(e,t,r,n,i,o,s,a){const u=e-s,c=t-a,l=r-s,d=n-a,h=i-s,f=o-a,p=u*u+c*c,m=l*l+d*d,_=h*h+f*f;return u*(d*_-m*f)-c*(l*_-m*h)+p*(l*f-d*h)<0}function circumradius(e,t,r,n,i,o){const s=r-e,a=n-t,u=i-e,c=o-t,l=s*s+a*a,d=u*u+c*c,h=.5/(s*c-a*u),f=(c*l-a*d)*h,p=(s*d-u*l)*h;return f*f+p*p}function circumcenter(e,t,r,n,i,o){const s=r-e,a=n-t,u=i-e,c=o-t,l=s*s+a*a,d=u*u+c*c,h=.5/(s*c-a*u),f=e+(c*l-a*d)*h,p=t+(s*d-u*l)*h;return{x:f,y:p}}function quicksort(e,t,r,n){if(n-r<=20)for(let i=r+1;i<=n;i++){const n=e[i],o=t[n];let s=i-1;while(s>=r&&t[e[s]]>o)e[s+1]=e[s--];e[s+1]=n}else{const i=r+n>>1;let o=r+1,s=n;swap(e,i,o),t[e[r]]>t[e[n]]&&swap(e,r,n),t[e[o]]>t[e[n]]&&swap(e,o,n),t[e[r]]>t[e[o]]&&swap(e,r,o);const a=e[o],u=t[a];while(1){do{o++}while(t[e[o]]<u);do{s--}while(t[e[s]]>u);if(s<o)break;swap(e,o,s)}e[r+1]=e[s],e[s]=a,n-o+1>=s-r?(quicksort(e,t,o,n),quicksort(e,t,r,s-1)):(quicksort(e,t,r,s-1),quicksort(e,t,o,n))}}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}},"./node_modules/internmap/src/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"InternMap",(function(){return InternMap})),r.d(t,"InternSet",(function(){return InternSet}));class InternMap extends Map{constructor(e,t=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,t){return super.set(intern_set(this,e),t)}delete(e){return super.delete(intern_delete(this,e))}}class InternSet extends Set{constructor(e,t=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const r of e)this.add(r)}has(e){return super.has(intern_get(this,e))}add(e){return super.add(intern_set(this,e))}delete(e){return super.delete(intern_delete(this,e))}}function intern_get({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function intern_set({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function intern_delete({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(r),e.delete(n)),r}function keyof(e){return null!==e&&"object"===typeof e?e.valueOf():e}},"./node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=style&index=0&lang=css&":function(e,t,r){},"./node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=style&index=0&id=ab099a44&scoped=true&lang=css&":function(e,t,r){},"./node_modules/tslib/tslib.es6.js":function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return __extends})),r.d(t,"__assign",(function(){return __assign})),r.d(t,"__rest",(function(){return __rest})),r.d(t,"__decorate",(function(){return __decorate})),r.d(t,"__param",(function(){return __param})),r.d(t,"__metadata",(function(){return __metadata})),r.d(t,"__awaiter",(function(){return __awaiter})),r.d(t,"__generator",(function(){return __generator})),r.d(t,"__createBinding",(function(){return n})),r.d(t,"__exportStar",(function(){return __exportStar})),r.d(t,"__values",(function(){return __values})),r.d(t,"__read",(function(){return __read})),r.d(t,"__spread",(function(){return __spread})),r.d(t,"__spreadArrays",(function(){return __spreadArrays})),r.d(t,"__spreadArray",(function(){return __spreadArray})),r.d(t,"__await",(function(){return __await})),r.d(t,"__asyncGenerator",(function(){return __asyncGenerator})),r.d(t,"__asyncDelegator",(function(){return __asyncDelegator})),r.d(t,"__asyncValues",(function(){return __asyncValues})),r.d(t,"__makeTemplateObject",(function(){return __makeTemplateObject})),r.d(t,"__importStar",(function(){return __importStar})),r.d(t,"__importDefault",(function(){return __importDefault})),r.d(t,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),r.d(t,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)};function __extends(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function __decorate(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __metadata(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(t){i(t)}}function rejected(e){try{step(n["throw"](e))}catch(t){i(t)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(s)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var n=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)}function __values(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{while((void 0===t||t-- >0)&&!(n=o.next()).done)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function __spreadArray(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||resume(e,t)}))})}function resume(e,t){try{step(i[e](t))}catch(r){settle(o[0][3],r)}}function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(o[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),o.shift(),o.length&&resume(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){t=e[r](t),settle(n,i,t.done,t.value)}))}}function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}},"./node_modules/vuetify/lib/components/VColorPicker/VColorPicker.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=(r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/vuetify/src/components/VColorPicker/VColorPicker.sass"),r("./node_modules/vuetify/lib/components/VSheet/VSheet.js")),o=r("./node_modules/vuetify/lib/components/VColorPicker/VColorPickerPreview.js"),s=r("./node_modules/vuetify/lib/components/VColorPicker/VColorPickerCanvas.js"),a=r("./node_modules/vuetify/lib/components/VColorPicker/VColorPickerEdit.js"),u=r("./node_modules/vuetify/lib/components/VColorPicker/VColorPickerSwatches.js"),c=r("./node_modules/vuetify/lib/components/VColorPicker/util/index.js"),l=r("./node_modules/vuetify/lib/util/mixins.js"),d=r("./node_modules/vuetify/lib/util/helpers.js"),h=r("./node_modules/vuetify/lib/mixins/elevatable/index.js"),f=r("./node_modules/vuetify/lib/mixins/themeable/index.js");t["default"]=Object(l["default"])(h["default"],f["default"]).extend({name:"v-color-picker",props:{canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},flat:Boolean,hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,hideModeSwitch:Boolean,mode:{type:String,default:"rgba",validator:function validator(e){return Object.keys(a["modes"]).includes(e)}},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},value:{type:[Object,String]},width:{type:[Number,String],default:300}},data:function data(){return{internalValue:Object(c["fromRGBA"])({r:255,g:0,b:0,a:1})}},computed:{hideAlpha:function hideAlpha(){return!!this.value&&!Object(c["hasAlpha"])(this.value)}},watch:{value:{handler:function handler(e){this.updateColor(Object(c["parseColor"])(e,this.internalValue))},immediate:!0}},methods:{updateColor:function updateColor(e){this.internalValue=e;var t=Object(c["extractColor"])(this.internalValue,this.value);Object(d["deepEqual"])(t,this.value)||(this.$emit("input",t),this.$emit("update:color",this.internalValue))},genCanvas:function genCanvas(){return this.$createElement(s["default"],{props:{color:this.internalValue,disabled:this.disabled,dotSize:this.dotSize,width:this.width,height:this.canvasHeight},on:{"update:color":this.updateColor}})},genControls:function genControls(){return this.$createElement("div",{staticClass:"v-color-picker__controls"},[!this.hideSliders&&this.genPreview(),!this.hideInputs&&this.genEdit()])},genEdit:function genEdit(){var e=this;return this.$createElement(a["default"],{props:{color:this.internalValue,disabled:this.disabled,hideAlpha:this.hideAlpha,hideModeSwitch:this.hideModeSwitch,mode:this.mode},on:{"update:color":this.updateColor,"update:mode":function updateMode(t){return e.$emit("update:mode",t)}}})},genPreview:function genPreview(){return this.$createElement(o["default"],{props:{color:this.internalValue,disabled:this.disabled,hideAlpha:this.hideAlpha},on:{"update:color":this.updateColor}})},genSwatches:function genSwatches(){return this.$createElement(u["default"],{props:{dark:this.dark,light:this.light,disabled:this.disabled,swatches:this.swatches,color:this.internalValue,maxHeight:this.swatchesMaxHeight},on:{"update:color":this.updateColor}})}},render:function render(e){return e(i["default"],{staticClass:"v-color-picker",class:Object(n["default"])(Object(n["default"])({"v-color-picker--flat":this.flat},this.themeClasses),this.elevationClasses),props:{maxWidth:this.width}},[!this.hideCanvas&&this.genCanvas(),(!this.hideSliders||!this.hideInputs)&&this.genControls(),this.showSwatches&&this.genSwatches()])}})},"./node_modules/vuetify/lib/components/VColorPicker/VColorPickerCanvas.js":function(e,t,r){"use strict";r.r(t);r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/vuetify/src/components/VColorPicker/VColorPickerCanvas.sass");var n=r("./node_modules/vuetify/lib/util/helpers.js"),i=r("./node_modules/vuetify/lib/components/VColorPicker/util/index.js"),o=r("./node_modules/vue/dist/vue.runtime.esm.js");t["default"]=o["default"].extend({name:"v-color-picker-canvas",props:{color:{type:Object,default:function _default(){return Object(i["fromRGBA"])({r:255,g:0,b:0,a:1})}},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300}},data:function data(){return{boundingRect:{width:0,height:0,left:0,top:0}}},computed:{dot:function dot(){return this.color?{x:this.color.hsva.s*parseInt(this.width,10),y:(1-this.color.hsva.v)*parseInt(this.height,10)}:{x:0,y:0}}},watch:{"color.hue":"updateCanvas"},mounted:function mounted(){this.updateCanvas()},methods:{emitColor:function emitColor(e,t){var r=this.boundingRect,o=r.left,s=r.top,a=r.width,u=r.height;this.$emit("update:color",Object(i["fromHSVA"])({h:this.color.hue,s:Object(n["clamp"])(e-o,0,a)/a,v:1-Object(n["clamp"])(t-s,0,u)/u,a:this.color.alpha}))},updateCanvas:function updateCanvas(){if(this.color){var e=this.$refs.canvas,t=e.getContext("2d");if(t){var r=t.createLinearGradient(0,0,e.width,0);r.addColorStop(0,"hsla(0, 0%, 100%, 1)"),r.addColorStop(1,"hsla(".concat(this.color.hue,", 100%, 50%, 1)")),t.fillStyle=r,t.fillRect(0,0,e.width,e.height);var n=t.createLinearGradient(0,0,0,e.height);n.addColorStop(0,"hsla(0, 0%, 100%, 0)"),n.addColorStop(1,"hsla(0, 0%, 0%, 1)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}}},handleClick:function handleClick(e){this.disabled||(this.boundingRect=this.$el.getBoundingClientRect(),this.emitColor(e.clientX,e.clientY))},handleMouseDown:function handleMouseDown(e){e.preventDefault(),this.disabled||(this.boundingRect=this.$el.getBoundingClientRect(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp))},handleMouseMove:function handleMouseMove(e){this.disabled||this.emitColor(e.clientX,e.clientY)},handleMouseUp:function handleMouseUp(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)},genCanvas:function genCanvas(){return this.$createElement("canvas",{ref:"canvas",attrs:{width:this.width,height:this.height}})},genDot:function genDot(){var e=parseInt(this.dotSize,10)/2,t=Object(n["convertToUnit"])(this.dot.x-e),r=Object(n["convertToUnit"])(this.dot.y-e);return this.$createElement("div",{staticClass:"v-color-picker__canvas-dot",class:{"v-color-picker__canvas-dot--disabled":this.disabled},style:{width:Object(n["convertToUnit"])(this.dotSize),height:Object(n["convertToUnit"])(this.dotSize),transform:"translate(".concat(t,", ").concat(r,")")}})}},render:function render(e){return e("div",{staticClass:"v-color-picker__canvas",style:{width:Object(n["convertToUnit"])(this.width),height:Object(n["convertToUnit"])(this.height)},on:{click:this.handleClick,mousedown:this.handleMouseDown}},[this.genCanvas(),this.genDot()])}})},"./node_modules/vuetify/lib/components/VColorPicker/VColorPickerEdit.js":function(e,t,r){"use strict";r.r(t),r.d(t,"modes",(function(){return l}));var n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=(r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.string.ends-with.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/vuetify/src/components/VColorPicker/VColorPickerEdit.sass"),r("./node_modules/vuetify/lib/components/VBtn/index.js")),s=r("./node_modules/vuetify/lib/components/VIcon/index.js"),a=r("./node_modules/vuetify/lib/util/colorUtils.js"),u=r("./node_modules/vue/dist/vue.runtime.esm.js"),c=r("./node_modules/vuetify/lib/components/VColorPicker/util/index.js"),l={rgba:{inputs:[["r",255,"int"],["g",255,"int"],["b",255,"int"],["a",1,"float"]],from:c["fromRGBA"]},hsla:{inputs:[["h",360,"int"],["s",1,"float"],["l",1,"float"],["a",1,"float"]],from:c["fromHSLA"]},hexa:{from:c["fromHexa"]}};t["default"]=u["default"].extend({name:"v-color-picker-edit",props:{color:Object,disabled:Boolean,hideAlpha:Boolean,hideModeSwitch:Boolean,mode:{type:String,default:"rgba",validator:function validator(e){return Object.keys(l).includes(e)}}},data:function data(){return{modes:l,internalMode:this.mode}},computed:{currentMode:function currentMode(){return this.modes[this.internalMode]}},watch:{mode:function mode(e){this.internalMode=e}},created:function created(){this.internalMode=this.mode},methods:{getValue:function getValue(e,t){return"float"===t?Math.round(100*e)/100:"int"===t?Math.round(e):0},parseValue:function parseValue(e,t){return"float"===t?parseFloat(e):"int"===t&&parseInt(e,10)||0},changeMode:function changeMode(){var e=Object.keys(this.modes),t=e.indexOf(this.internalMode),r=e[(t+1)%e.length];this.internalMode=r,this.$emit("update:mode",r)},genInput:function genInput(e,t,r,n){return this.$createElement("div",{staticClass:"v-color-picker__input"},[this.$createElement("input",{key:e,attrs:t,domProps:{value:r},on:n}),this.$createElement("span",e.toUpperCase())])},genInputs:function genInputs(){var e=this;if("hexa"===this.internalMode){var t=this.color.hexa,r=this.hideAlpha&&t.endsWith("FF")?t.substr(0,7):t;return this.genInput("hex",{maxlength:this.hideAlpha?7:9,disabled:this.disabled},r,{change:function change(t){var r=t.target;e.$emit("update:color",e.currentMode.from(Object(a["parseHex"])(r.value)))}})}var o=this.hideAlpha?this.currentMode.inputs.slice(0,-1):this.currentMode.inputs;return o.map((function(t){var r=Object(i["default"])(t,3),o=r[0],s=r[1],a=r[2],u=e.color[e.internalMode];return e.genInput(o,{type:"number",min:0,max:s,step:"float"===a?"0.01":"int"===a?"1":void 0,disabled:e.disabled},e.getValue(u[o],a),{input:function input(t){var r=t.target,i=e.parseValue(r.value||"0",a);e.$emit("update:color",e.currentMode.from(Object.assign({},u,Object(n["default"])({},o,i)),e.color.alpha))}})}))},genSwitch:function genSwitch(){return this.$createElement(o["default"],{props:{small:!0,icon:!0,disabled:this.disabled},on:{click:this.changeMode}},[this.$createElement(s["default"],"$unfold")])}},render:function render(e){return e("div",{staticClass:"v-color-picker__edit"},[this.genInputs(),!this.hideModeSwitch&&this.genSwitch()])}})},"./node_modules/vuetify/lib/components/VColorPicker/VColorPickerPreview.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=(r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/vuetify/src/components/VColorPicker/VColorPickerPreview.sass"),r("./node_modules/vuetify/lib/components/VSlider/VSlider.js")),o=r("./node_modules/vuetify/lib/util/colorUtils.js"),s=r("./node_modules/vue/dist/vue.runtime.esm.js"),a=r("./node_modules/vuetify/lib/components/VColorPicker/util/index.js");t["default"]=s["default"].extend({name:"v-color-picker-preview",props:{color:Object,disabled:Boolean,hideAlpha:Boolean},methods:{genAlpha:function genAlpha(){var e=this;return this.genTrack({staticClass:"v-color-picker__alpha",props:{thumbColor:"grey lighten-2",hideDetails:!0,value:this.color.alpha,step:0,min:0,max:1},style:{backgroundImage:this.disabled?void 0:"linear-gradient(to ".concat(this.$vuetify.rtl?"left":"right",", transparent, ").concat(Object(o["RGBtoCSS"])(this.color.rgba),")")},on:{input:function input(t){return e.color.alpha!==t&&e.$emit("update:color",Object(a["fromHSVA"])(Object(n["default"])(Object(n["default"])({},e.color.hsva),{},{a:t})))}}})},genSliders:function genSliders(){return this.$createElement("div",{staticClass:"v-color-picker__sliders"},[this.genHue(),!this.hideAlpha&&this.genAlpha()])},genDot:function genDot(){return this.$createElement("div",{staticClass:"v-color-picker__dot"},[this.$createElement("div",{style:{background:Object(o["RGBAtoCSS"])(this.color.rgba)}})])},genHue:function genHue(){var e=this;return this.genTrack({staticClass:"v-color-picker__hue",props:{thumbColor:"grey lighten-2",hideDetails:!0,value:this.color.hue,step:0,min:0,max:360},on:{input:function input(t){return e.color.hue!==t&&e.$emit("update:color",Object(a["fromHSVA"])(Object(n["default"])(Object(n["default"])({},e.color.hsva),{},{h:t})))}}})},genTrack:function genTrack(e){return this.$createElement(i["default"],Object(n["default"])(Object(n["default"])({class:"v-color-picker__track"},e),{},{props:Object(n["default"])({disabled:this.disabled},e.props)}))}},render:function render(e){return e("div",{staticClass:"v-color-picker__preview",class:{"v-color-picker__preview--hide-alpha":this.hideAlpha}},[this.genDot(),this.genSliders()])}})},"./node_modules/vuetify/lib/components/VColorPicker/VColorPickerSwatches.js":function(e,t,r){"use strict";r.r(t);r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/vuetify/src/components/VColorPicker/VColorPickerSwatches.sass");var n=r("./node_modules/vuetify/lib/components/VIcon/index.js"),i=r("./node_modules/vuetify/lib/util/colors.js"),o=r("./node_modules/vuetify/lib/components/VColorPicker/util/index.js"),s=r("./node_modules/vuetify/lib/util/helpers.js"),a=r("./node_modules/vuetify/lib/util/mixins.js"),u=r("./node_modules/vuetify/lib/mixins/themeable/index.js"),c=r("./node_modules/vuetify/lib/util/colorUtils.js");function parseDefaultColors(e){return Object.keys(e).map((function(t){var r=e[t];return r.base?[r.base,r.darken4,r.darken3,r.darken2,r.darken1,r.lighten1,r.lighten2,r.lighten3,r.lighten4,r.lighten5]:[r.black,r.white,r.transparent]}))}var l=Object(o["fromHex"])("#FFFFFF").rgba,d=Object(o["fromHex"])("#000000").rgba;t["default"]=Object(a["default"])(u["default"]).extend({name:"v-color-picker-swatches",props:{swatches:{type:Array,default:function _default(){return parseDefaultColors(i["default"])}},disabled:Boolean,color:Object,maxWidth:[Number,String],maxHeight:[Number,String]},methods:{genColor:function genColor(e){var t=this,r=this.$createElement("div",{style:{background:e}},[Object(s["deepEqual"])(this.color,Object(o["parseColor"])(e,null))&&this.$createElement(n["default"],{props:{small:!0,dark:Object(c["contrastRatio"])(this.color.rgba,l)>2&&this.color.alpha>.5,light:Object(c["contrastRatio"])(this.color.rgba,d)>2&&this.color.alpha>.5}},"$success")]);return this.$createElement("div",{staticClass:"v-color-picker__color",on:{click:function click(){return t.disabled||t.$emit("update:color",Object(o["fromHex"])("transparent"===e?"#00000000":e))}}},[r])},genSwatches:function genSwatches(){var e=this;return this.swatches.map((function(t){var r=t.map(e.genColor);return e.$createElement("div",{staticClass:"v-color-picker__swatch"},r)}))}},render:function render(e){return e("div",{staticClass:"v-color-picker__swatches",style:{maxWidth:Object(s["convertToUnit"])(this.maxWidth),maxHeight:Object(s["convertToUnit"])(this.maxHeight)}},[this.$createElement("div",this.genSwatches())])}})},"./node_modules/vuetify/lib/components/VColorPicker/util/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"fromHSVA",(function(){return fromHSVA})),r.d(t,"fromHSLA",(function(){return fromHSLA})),r.d(t,"fromRGBA",(function(){return fromRGBA})),r.d(t,"fromHexa",(function(){return fromHexa})),r.d(t,"fromHex",(function(){return fromHex})),r.d(t,"parseColor",(function(){return parseColor})),r.d(t,"extractColor",(function(){return extractColor})),r.d(t,"hasAlpha",(function(){return hasAlpha}));var n=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),o=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),s=r("./node_modules/vuetify/lib/util/colorUtils.js");function fromHSVA(e){e=Object(o["default"])({},e);var t=Object(s["HSVAtoHex"])(e),r=Object(s["HSVAtoHSLA"])(e),n=Object(s["HSVAtoRGBA"])(e);return{alpha:e.a,hex:t.substr(0,7),hexa:t,hsla:r,hsva:e,hue:e.h,rgba:n}}function fromHSLA(e){var t=Object(s["HSLAtoHSVA"])(e),r=Object(s["HSVAtoHex"])(t),n=Object(s["HSVAtoRGBA"])(t);return{alpha:t.a,hex:r.substr(0,7),hexa:r,hsla:e,hsva:t,hue:t.h,rgba:n}}function fromRGBA(e){var t=Object(s["RGBAtoHSVA"])(e),r=Object(s["RGBAtoHex"])(e),n=Object(s["HSVAtoHSLA"])(t);return{alpha:t.a,hex:r.substr(0,7),hexa:r,hsla:n,hsva:t,hue:t.h,rgba:e}}function fromHexa(e){var t=Object(s["HexToHSVA"])(e),r=Object(s["HSVAtoHSLA"])(t),n=Object(s["HSVAtoRGBA"])(t);return{alpha:t.a,hex:e.substr(0,7),hexa:e,hsla:r,hsva:t,hue:t.h,rgba:n}}function fromHex(e){return fromHexa(Object(s["parseHex"])(e))}function has(e,t){return t.every((function(t){return e.hasOwnProperty(t)}))}function parseColor(e,t){if(!e)return fromRGBA({r:255,g:0,b:0,a:1});if("string"===typeof e){if("transparent"===e)return fromHexa("#00000000");var r=Object(s["parseHex"])(e);return t&&r===t.hexa?t:fromHexa(r)}if("object"===Object(i["default"])(e)){if(e.hasOwnProperty("alpha"))return e;var n=e.hasOwnProperty("a")?parseFloat(e.a):1;if(has(e,["r","g","b"]))return t&&e===t.rgba?t:fromRGBA(Object(o["default"])(Object(o["default"])({},e),{},{a:n}));if(has(e,["h","s","l"]))return t&&e===t.hsla?t:fromHSLA(Object(o["default"])(Object(o["default"])({},e),{},{a:n}));if(has(e,["h","s","v"]))return t&&e===t.hsva?t:fromHSVA(Object(o["default"])(Object(o["default"])({},e),{},{a:n}))}return fromRGBA({r:255,g:0,b:0,a:1})}function stripAlpha(e,t){if(t){e.a;var r=Object(n["default"])(e,["a"]);return r}return e}function extractColor(e,t){if(null==t)return e;if("string"===typeof t)return 7===t.length?e.hex:e.hexa;if("object"===Object(i["default"])(t)){var r="number"===typeof t.a&&0===t.a?!!t.a:!t.a;if(has(t,["r","g","b"]))return stripAlpha(e.rgba,r);if(has(t,["h","s","l"]))return stripAlpha(e.hsla,r);if(has(t,["h","s","v"]))return stripAlpha(e.hsva,r)}return e}function hasAlpha(e){return!!e&&("string"===typeof e?e.length>7:"object"===Object(i["default"])(e)&&(has(e,["a"])||has(e,["alpha"])))}},"./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanel.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=r("./node_modules/vuetify/lib/mixins/groupable/index.js"),o=r("./node_modules/vuetify/lib/mixins/registrable/index.js"),s=r("./node_modules/vuetify/lib/util/helpers.js"),a=r("./node_modules/vuetify/lib/util/mixins.js");t["default"]=Object(a["default"])(Object(i["factory"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(o["provide"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data:function data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes:function classes(){return Object(n["default"])({"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled},this.groupClasses)},isDisabled:function isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly:function isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent:function registerContent(e){this.content=e},unregisterContent:function unregisterContent(){this.content=null},registerHeader:function registerHeader(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader:function unregisterHeader(){this.header=null},onClick:function onClick(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle:function toggle(){var e=this;this.content&&(this.content.isBooted=!0),this.$nextTick((function(){return e.$emit("change")}))}},render:function render(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(s["getSlot"])(this))}})},"./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanelContent.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/vuetify/lib/components/transitions/index.js"),i=r("./node_modules/vuetify/lib/mixins/bootable/index.js"),o=r("./node_modules/vuetify/lib/mixins/colorable/index.js"),s=r("./node_modules/vuetify/lib/mixins/registrable/index.js"),a=r("./node_modules/vuetify/lib/util/helpers.js"),u=r("./node_modules/vuetify/lib/util/mixins.js"),c=Object(u["default"])(i["default"],o["default"],Object(s["inject"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));t["default"]=c.extend().extend({name:"v-expansion-panel-content",computed:{isActive:function isActive(){return this.expansionPanel.isActive}},created:function created(){this.expansionPanel.registerContent(this)},beforeDestroy:function beforeDestroy(){this.expansionPanel.unregisterContent()},render:function render(e){var t=this;return e(n["VExpandTransition"],this.showLazyContent((function(){return[e("div",t.setBackgroundColor(t.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:t.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},Object(a["getSlot"])(t))])]})))}})},"./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanelHeader.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=r("./node_modules/vuetify/lib/components/transitions/index.js"),o=r("./node_modules/vuetify/lib/components/VIcon/index.js"),s=r("./node_modules/vuetify/lib/mixins/colorable/index.js"),a=r("./node_modules/vuetify/lib/mixins/registrable/index.js"),u=r("./node_modules/vuetify/lib/directives/ripple/index.js"),c=r("./node_modules/vuetify/lib/util/helpers.js"),l=r("./node_modules/vuetify/lib/util/mixins.js"),d=Object(l["default"])(s["default"],Object(a["inject"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));t["default"]=d.extend().extend({name:"v-expansion-panel-header",directives:{ripple:u["default"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function data(){return{hasMousedown:!1}},computed:{classes:function classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive:function isActive(){return this.expansionPanel.isActive},isDisabled:function isDisabled(){return this.expansionPanel.isDisabled},isReadonly:function isReadonly(){return this.expansionPanel.isReadonly}},created:function created(){this.expansionPanel.registerHeader(this)},beforeDestroy:function beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick:function onClick(e){this.$emit("click",e)},genIcon:function genIcon(){var e=Object(c["getSlot"])(this,"actions")||[this.$createElement(o["default"],this.expandIcon)];return this.$createElement(i["VFadeTransition"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render:function render(e){var t=this;return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:Object(n["default"])(Object(n["default"])({},this.$listeners),{},{click:this.onClick,mousedown:function mousedown(){return t.hasMousedown=!0},mouseup:function mouseup(){return t.hasMousedown=!1}})}),[Object(c["getSlot"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},"./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanels.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=(r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/vuetify/src/components/VExpansionPanel/VExpansionPanel.sass"),r("./node_modules/vuetify/lib/components/VItemGroup/VItemGroup.js")),o=r("./node_modules/vuetify/lib/util/console.js");t["default"]=i["BaseItemGroup"].extend({name:"v-expansion-panels",provide:function provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes:function classes(){return Object(n["default"])(Object(n["default"])({},i["BaseItemGroup"].options.computed.classes.call(this)),{},{"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile})}},created:function created(){this.$attrs.hasOwnProperty("expand")&&Object(o["breaking"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(o["breaking"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem:function updateItem(e,t){var r=this.getValue(e,t),n=this.getValue(e,t+1);e.isActive=this.toggleMethod(r),e.nextIsActive=this.toggleMethod(n)}}})},"./node_modules/vuetify/lib/util/colors.js":function(e,t,r){"use strict";r.r(t);r("./node_modules/core-js/modules/es.object.freeze.js");var n=Object.freeze({base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"}),i=Object.freeze({base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"}),o=Object.freeze({base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"}),s=Object.freeze({base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"}),a=Object.freeze({base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"}),u=Object.freeze({base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"}),c=Object.freeze({base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"}),l=Object.freeze({base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"}),d=Object.freeze({base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"}),h=Object.freeze({base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"}),f=Object.freeze({base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"}),p=Object.freeze({base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"}),m=Object.freeze({base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"}),_=Object.freeze({base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"}),g=Object.freeze({base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"}),b=Object.freeze({base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"}),v=Object.freeze({base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"}),M=Object.freeze({base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"}),T=Object.freeze({base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"}),S=Object.freeze({black:"#000000",white:"#ffffff",transparent:"transparent"});t["default"]=Object.freeze({red:n,pink:i,purple:o,deepPurple:s,indigo:a,blue:u,lightBlue:c,cyan:l,teal:d,green:h,lightGreen:f,lime:p,yellow:m,amber:_,orange:g,deepOrange:b,brown:v,blueGrey:M,grey:T,shades:S})},"./node_modules/vuetify/src/components/VColorPicker/VColorPicker.sass":function(e,t,r){},"./node_modules/vuetify/src/components/VColorPicker/VColorPickerCanvas.sass":function(e,t,r){},"./node_modules/vuetify/src/components/VColorPicker/VColorPickerEdit.sass":function(e,t,r){},"./node_modules/vuetify/src/components/VColorPicker/VColorPickerPreview.sass":function(e,t,r){},"./node_modules/vuetify/src/components/VColorPicker/VColorPickerSwatches.sass":function(e,t,r){},"./node_modules/vuetify/src/components/VExpansionPanel/VExpansionPanel.sass":function(e,t,r){},"./src/plugins/GCodeViewer/ColorPicker.vue":function(e,t,r){"use strict";r.r(t);var n=r("./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=template&id=fb3c3ddc&"),i=r("./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=script&lang=js&"),o=(r("./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=style&index=0&lang=css&"),r("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),s=r("./node_modules/vuetify-loader/lib/runtime/installComponents.js"),a=r.n(s),u=r("./node_modules/vuetify/lib/components/VCard/VCard.js"),c=r("./node_modules/vuetify/lib/components/VCard/index.js"),l=r("./node_modules/vuetify/lib/components/VGrid/VCol.js"),d=r("./node_modules/vuetify/lib/components/VColorPicker/VColorPicker.js"),h=r("./node_modules/vuetify/lib/components/VMenu/VMenu.js"),f=r("./node_modules/vuetify/lib/components/VGrid/VRow.js"),p=r("./node_modules/vuetify/lib/components/VTextField/VTextField.js"),m=Object(o["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null);t["default"]=m.exports,a()(m,{VCard:u["default"],VCardText:c["VCardText"],VCol:l["default"],VColorPicker:d["default"],VMenu:h["default"],VRow:f["default"],VTextField:p["default"]})},"./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=script&lang=js&":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/cache-loader/dist/cjs.js?!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=script&lang=js&");t["default"]=n["default"]},"./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=style&index=0&lang=css&":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=style&index=0&lang=css&");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=template&id=fb3c3ddc&":function(e,t,r){"use strict";r.r(t);var n=r('./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"d3be3814-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/ColorPicker.vue?vue&type=template&id=fb3c3ddc&');r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"./src/plugins/GCodeViewer/GCodeViewer.vue":function(e,t,r){"use strict";r.r(t);var n=r("./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=template&id=ab099a44&scoped=true&"),i=r("./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=script&lang=js&"),o=(r("./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=style&index=0&id=ab099a44&scoped=true&lang=css&"),r("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),s=r("./node_modules/vuetify-loader/lib/runtime/installComponents.js"),a=r.n(s),u=r("./node_modules/vuetify/lib/components/VBtn/VBtn.js"),c=r("./node_modules/vuetify/lib/components/VBtnToggle/VBtnToggle.js"),l=r("./node_modules/vuetify/lib/components/VCard/VCard.js"),d=r("./node_modules/vuetify/lib/components/VCard/index.js"),h=r("./node_modules/vuetify/lib/components/VCheckbox/VCheckbox.js"),f=r("./node_modules/vuetify/lib/components/VGrid/VCol.js"),p=r("./node_modules/vuetify/lib/components/VDialog/VDialog.js"),m=r("./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanel.js"),_=r("./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanelContent.js"),g=r("./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanelHeader.js"),b=r("./node_modules/vuetify/lib/components/VExpansionPanel/VExpansionPanels.js"),v=r("./node_modules/vuetify/lib/components/VIcon/VIcon.js"),M=r("./node_modules/vuetify/lib/components/VNavigationDrawer/VNavigationDrawer.js"),T=r("./node_modules/vuetify/lib/components/VGrid/VRow.js"),S=r("./node_modules/vuetify/lib/components/VSlider/VSlider.js"),C=r("./node_modules/vuetify/lib/components/VSwitch/VSwitch.js"),E=r("./node_modules/vuetify-loader/lib/runtime/installDirectives.js"),P=r.n(E),A=r("./node_modules/vuetify/lib/directives/resize/index.js"),j=Object(o["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"ab099a44",null);t["default"]=j.exports,a()(j,{VBtn:u["default"],VBtnToggle:c["default"],VCard:l["default"],VCardActions:d["VCardActions"],VCardText:d["VCardText"],VCardTitle:d["VCardTitle"],VCheckbox:h["default"],VCol:f["default"],VDialog:p["default"],VExpansionPanel:m["default"],VExpansionPanelContent:_["default"],VExpansionPanelHeader:g["default"],VExpansionPanels:b["default"],VIcon:v["default"],VNavigationDrawer:M["default"],VRow:T["default"],VSlider:S["default"],VSwitch:C["default"]}),P()(j,{Resize:A["default"]})},"./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=script&lang=js&":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/cache-loader/dist/cjs.js?!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=script&lang=js&");t["default"]=n["default"]},"./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=style&index=0&id=ab099a44&scoped=true&lang=css&":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=style&index=0&id=ab099a44&scoped=true&lang=css&");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=template&id=ab099a44&scoped=true&":function(e,t,r){"use strict";r.r(t);var n=r('./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"d3be3814-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/plugins/GCodeViewer/GCodeViewer.vue?vue&type=template&id=ab099a44&scoped=true&');r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"./src/plugins/GCodeViewer/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/i18n/index.js"),i=r("./node_modules/vue/dist/vue.runtime.esm.js"),o=r("./src/routes/index.js"),s=r("./src/plugins/index.js"),a=r("./src/plugins/GCodeViewer/GCodeViewer.vue"),u=r("./src/plugins/GCodeViewer/ColorPicker.vue");i["default"].component("gcodeviewer-color-picker",u["default"]),Object(o["registerRoute"])(a["default"],{Job:{GCodeViewer:{icon:"mdi-rotate-3d",caption:"plugins.gcodeViewer.caption",path:"/Job/GCodeViewer"}}}),Object(s["registerPluginContextMenuItem"])((function(){return n["default"].t("plugins.gcodeViewer.view3D")}),"/Job/GCodeViewer","mdi-rotate-3d","view-3d-model",s["ContextMenuType"].JobFileList)},"./src/plugins/GCodeViewer/viewer/axes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=(r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/@babylonjs/core/Materials/Textures/dynamicTexture.js")),s=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),a=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),u=r("./node_modules/@babylonjs/core/Maths/math.color.js"),c=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),l=function(){function _default(e){Object(n["default"])(this,_default),this.visible=localStorage.getItem("axesVisible"),null===this.visible?this.visible=!0:this.visible=JSON.parse(this.visible),this.scene=e,this.registerClipIgnore=function(){},this.axesMesh,this.size=50,this.debug=!1}return Object(i["default"])(_default,[{key:"show",value:function show(e){localStorage.setItem("axesVisible",e),this.axesMesh&&this.axesMesh.setEnabled(e)}},{key:"makeTextPlane",value:function makeTextPlane(e,t,r){var n=new o["DynamicTexture"]("DynamicTexture",50,this.scene,!0);n.hasAlpha=!0,n.drawText(e,5,40,"bold 36px Arial",t,"transparent",!0);var i=a["Mesh"].CreatePlane("TextPlane",r,this.scene,!0);return i.material=new s["StandardMaterial"]("TextPlaneMaterial",this.scene),i.material.backFaceCulling=!1,i.material.specularColor=new u["Color3"](0,0,0),i.material.diffuseTexture=n,i}},{key:"resize",value:function resize(e){this.size=e,this.axesMesh.dispose(!1,!0),this.render()}},{key:"render",value:function render(){var e=this;if(!this.debug&&(!this.axesMesh||this.axesMesh.isDisposed())){this.axesMesh=new a["Mesh"]("axis"),this.registerClipIgnore(this.axesMesh);var t=a["Mesh"].CreateLines("axisX",[c["Vector3"].Zero(),new c["Vector3"](this.size,0,0),new c["Vector3"](.95*this.size,.05*this.size,0),new c["Vector3"](this.size,0,0),new c["Vector3"](.95*this.size,-.05*this.size,0)],this.scene);t.color=new u["Color3"](1,0,0),t.parent=this.axesMesh;var r=this.makeTextPlane("X","red",this.size/10);r.position=new c["Vector3"](.9*this.size,.05*this.size,0),r.parent=this.axesMesh;var n=a["Mesh"].CreateLines("axisY",[c["Vector3"].Zero(),new c["Vector3"](0,this.size,0),new c["Vector3"](-.05*this.size,.95*this.size,0),new c["Vector3"](0,this.size,0),new c["Vector3"](.05*this.size,.95*this.size,0)],this.scene);n.color=new u["Color3"](0,1,0),n.parent=this.axesMesh;var i=this.makeTextPlane("Z","green",this.size/10);i.position=new c["Vector3"](0,.9*this.size,-.05*this.size),i.parent=this.axesMesh;var o=a["Mesh"].CreateLines("axisZ",[c["Vector3"].Zero(),new c["Vector3"](0,0,this.size),new c["Vector3"](0,-.05*this.size,.95*this.size),new c["Vector3"](0,0,this.size),new c["Vector3"](0,.05*this.size,.95*this.size)],this.scene);o.color=new u["Color3"](0,0,1),o.parent=this.axesMesh;var s=this.makeTextPlane("Y","blue",this.size/10);s.position=new c["Vector3"](0,.05*this.size,.9*this.size),s.parent=this.axesMesh,this.axesMesh.setEnabled(this.visible),this.axesMesh.getChildren().forEach((function(t){return e.registerClipIgnore(t)}))}}}]),_default}()},"./src/plugins/GCodeViewer/viewer/bed.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderBedMode",(function(){return h})),r.d(t,"default",(function(){return f}));var n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=(r("./node_modules/core-js/modules/es.number.parse-int.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.string.pad-end.js"),r("./node_modules/@babylonjs/core/Maths/math.color.js")),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),u=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),c=r("./node_modules/@babylonjs/core/Layers/highlightLayer.js"),l=r("./node_modules/@babylonjs/core/Meshes/meshBuilder.js"),d=r("./node_modules/@babylonjs/materials/grid/gridMaterial.js"),h={bed:0,box:1},f=function(){function _default(e){Object(n["default"])(this,_default),this.buildVolume={x:{min:0,max:100},y:{min:0,max:100},z:{min:0,max:100}};var t=localStorage.getItem("buildVolume");null!==t&&(this.buildVolume=JSON.parse(t)),this.renderMode=Number.parseInt(localStorage.getItem("renderBedMode")),this.renderMode||(this.renderMode=h.bed),this.bedMesh,this.isDelta=!1,this.scene=e,this.registerClipIgnore=function(){},this.bedLineColor="#0000FF",this.getBedColor()||this.setBedColor("#0000FF"),this.planeMaterial=this.buildGridMaterial(),this.boxMaterial=new u["StandardMaterial"]("bedBoxMaterial",this.scene),this.boxMaterial.alpha=0,this.debug=!1}return Object(i["default"])(_default,[{key:"setRenderMode",value:function setRenderMode(e){this.renderMode=e,localStorage.setItem("renderBedMode",this.renderMode),this.bedMesh&&(this.scene.removeMesh(this.bedMesh),this.bedMesh.dispose(!1,!0)),this.buildBed()}},{key:"buildBed",value:function buildBed(){if(!this.debug){if(this.bedMesh&&this.bedMesh.isDisposed()&&(this.bedMesh=null),this.bedMesh)return this.bedMesh;switch(this.renderMode){case h.bed:this.buildFlatBed();break;case h.box:this.buildBox();break}return this.bedMesh}}},{key:"setDelta",value:function setDelta(e){this.isDelta=e,this.setRenderMode(this.renderMode)}},{key:"buildFlatBed",value:function buildFlatBed(){var e=this.getCenter(),t=this.getSize();if(this.isDelta){var r=Math.abs(this.buildVolume.x.max-this.buildVolume.x.min)/2;this.bedMesh=l["MeshBuilder"].CreateDisc("BuildPlate",{radius:r},this.scene),this.bedMesh.rotationQuaternion=new s["Quaternion"].RotationAxis(new s["Vector3"](1,0,0),Math.PI/2),this.bedMesh.material=this.planeMaterial}else{var n=t.x,i=t.y;this.bedMesh=l["MeshBuilder"].CreatePlane("BuildPlate",{width:n,height:i},this.scene),this.bedMesh.material=this.planeMaterial,this.bedMesh.rotationQuaternion=new s["Quaternion"].RotationAxis(new s["Vector3"](1,0,0),Math.PI/2),this.bedMesh.translate(new s["Vector3"](e.x,0,e.y),1,a["Space"].WORLD)}this.registerClipIgnore(this.bedMesh)}},{key:"getCenter",value:function getCenter(){return{x:(this.buildVolume.x.max+this.buildVolume.x.min)/2,y:(this.buildVolume.y.max+this.buildVolume.y.min)/2,z:(this.buildVolume.z.max+this.buildVolume.z.min)/2}}},{key:"getSize",value:function getSize(){return{x:Math.abs(this.buildVolume.x.max-this.buildVolume.x.min),y:Math.abs(this.buildVolume.y.max-this.buildVolume.y.min),z:Math.abs(this.buildVolume.z.max-this.buildVolume.z.min)}}},{key:"buildBox",value:function buildBox(){var e=this,t=this.getSize(),r=this.getCenter();if(this.isDelta){this.bedMesh=l["MeshBuilder"].CreateCylinder("bed",{diameterTop:t.x,diameterBottom:t.x,height:t.z},this.scene),this.bedMesh.position.x=r.x,this.bedMesh.position.y=r.z,this.bedMesh.position.z=r.x,this.bedMesh.alpha=0,this.bedMesh.diffuseColor=new o["Color4"](0,0,0,0),this.bedMesh.isPickable=!1,this.bedMesh.enableEdgesRendering(void 0,!0),this.bedMesh.renderingGroupId=2,this.scene.setRenderingAutoClearDepthStencil(2,!1,!1,!1);var n=new c["HighlightLayer"]("hl",this.scene,{isStroke:!0,blurTextureSizeRatio:3});n.addMesh(this.bedMesh,this.getBedColor4()),this.bedMesh.onBeforeRenderObservable.add((function(){e.scene.getEngine().setColorWrite(!1)})),this.bedMesh.onAfterRenderObservable.add((function(){e.scene.getEngine().setColorWrite(!0)})),this.registerClipIgnore(this.bedMesh)}else{this.bedMesh=l["MeshBuilder"].CreateBox("bed",{width:t.x,depth:t.y,height:t.z},this.scene);var i=this.getCenter();this.bedMesh.position.x=i.x-this.buildVolume.x.min,this.bedMesh.position.y=i.z-this.buildVolume.z.min,this.bedMesh.position.z=i.y-this.buildVolume.y.min,this.bedMesh.diffuseColor=new o["Color4"](0,0,0,0),this.bedMesh.enableEdgesRendering(),this.bedMesh.edgesWidth=100,this.bedMesh.material=this.boxMaterial,this.bedMesh.isPickable=!1,this.bedMesh.edgesColor=this.getBedColor4(),this.registerClipIgnore(this.bedMesh)}}},{key:"setVisibility",value:function setVisibility(e){this.bedMesh&&this.bedMesh.setEnabled(e)}},{key:"commitBedSize",value:function commitBedSize(){localStorage.setItem("buildVolume",JSON.stringify(this.buildVolume)),this.setRenderMode(this.renderMode)}},{key:"buildGridMaterial",value:function buildGridMaterial(){var e=new d["GridMaterial"]("bedMaterial",this.scene);return e.mainColor=new o["Color4"](0,0,0,0),e.lineColor=o["Color3"].FromHexString(this.getBedColor()),e.gridRatio=5,e.opacity=.8,e.majorUnitFrequency=10,e.minorUnitVisibility=.6,e.gridOffset=new s["Vector3"](0,0,0),e}},{key:"getBedColor",value:function getBedColor(){return localStorage.getItem("bedLineColor")}},{key:"setBedColor",value:function setBedColor(e){localStorage.setItem("bedLineColor",e),this.planeMaterial&&(this.planeMaterial=this.buildGridMaterial(),this.dispose(),this.buildBed())}},{key:"getBedColor4",value:function getBedColor4(){return o["Color4"].FromHexString(this.getBedColor().padEnd(9,"F"))}},{key:"dispose",value:function dispose(){this.bedMesh.dispose(!1,!0)}}]),_default}()},"./src/plugins/GCodeViewer/viewer/buildobjects.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=(r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/web.url.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/d3/index.js")),s=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),a=r("./node_modules/@babylonjs/core/Maths/math.color.js"),u=r("./node_modules/@babylonjs/core/Materials/Textures/texture.js"),c=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),l=r("./node_modules/@babylonjs/core/Meshes/meshBuilder.js"),d=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),h=r("./node_modules/@babylonjs/core/Events/pointerEvents.js"),f=function(){function _default(e){Object(n["default"])(this,_default),this.scene=e,this.checkerBoard="iVBORw0KGgoAAAANSUhEUgAAAQEAAAEBCAIAAAD3joeqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALnSURBVHhe7dZBEYQwFAVBWBtogAv+IhIEsZd4yGG6L/lPwFRl31jqPM/neeZghd98oUoD1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjb7/ueJyscxzHGmIMV9u/75skK7/te1zUHK/gLUacB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA7Rt2x+drw1hSNi5LQAAAABJRU5ErkJggg==",this.xmark="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPQAAADPCAMAAAD1TAyiAAAAkFBMVEX39/eZAAD8//+TAACWAACRAAD4+vr5/PyaAAD39fX18vLy6enr29v18PDm0dG1Y2PewMDYtbWuUFDkzc2jLy+iKSnLlpbRpKS/enrIjo6hJCTbu7u8dHSxWFi4a2vEh4eoOzudEhKdEBDPn5+pQUHq2dmsSUmnODjUqqqhJye0YGCeGRnIk5OrTEy6b2+fHh7/wUBWAAAIiElEQVR4nO2d2ULbOhRF4yNFijNAQiCBMoShhBTo7f//3bUc2kLIIOnsI6ut90v7hLS8ZCVWZJ1Op02bNm3atGnTps0fGGOsizGm6Z4kiiHqDMeT+Wo1vxwPS6IGwI2lqt3qqlf/WPH2DZnpYqnVz3SL5cXUpuWumnucL66Xp1WW14v5UUlWsDlDw0VPaV28i9aqWAyTYRsqJ8fVRdfrXlT/VP9/nvTFOkDDY/UB+Be4uhmSUKMbXRgsis990EqfD0Q6YMvz7cjrZs9Ledm2v7MLVQdG+EFO07udyC7q5UhaNk2KPV3QxSW6A/TQ3Yfs0n0QpTblsTrQgRvsRyhdHWiwln0lSG0Hp3tHWi37dASkpkMX+Y36WIzaDvVBZjeZD2HUXp5r6nMhajPw64C+R7mmC09mMeqK2cNzTX2HoaaJN7MQtRn0PJkr6q+ITy4zCGAWmc2st2dYB2gZ0GIhMJvZR3/PdQcu2a7tKkg0nrqatwM70Otz2yx7gU2Cqe1jcPuaO6/QLFQ0ljrcs2t/wJvBTXiTSGr7GMHMVW0uI0TjqKM8u+ZHnFbpOK5VDHWcZ9f6ijWBxzVaU7MXr2I9V+N7ybjk5ihudNfUJ8wHPZrGMlfUjPFt5/HQheZRc5gLNY5vmv5jNMyjpinjehf6Nf6mpu8c6Io6+r5mea5afo6/qc0Lp2WGa57nKreMmYzXcrRrpucqvXjmzsHVwMPUEa7Znqt2m4SOoeZ7Lopuo9CFvg38GYDGbM88aP4ld9SdEGoIc6HimeOesTYT5JrGgNFVJR6aviJUF/rJ2zXGc1F8Y3w5iX3I2oi3a5RnfR3/OW0fMNC+rlGeC71gfCPjf2D+7IXPbAZjLtSE8UBdgkx7ucYx81bJ6BpHfdrf3xGKXJraljPOuk3sGtm26LO9s1nQr0eHmprx1vvDl713d+V0DzVdYubtOsw1YHrFXf/K9c4RThMgM+dpuk4fdlMXe1wj7+dK9BFzTZI4y2SfssM11DPrm8lb7OG9HiEd2uYa67lQ/D0YZgjt0RbXWM+FmiF+oF5B+6RfNqZWCv4xeP/f5yyPvevVObZXdx+oaQ69pkXB/MnyV7+usdTvXWMnSjdzo3ZLWjD1b9doz2qM2xBgT2So0Z670P2hMq7hnsF7YiVc5+25pvbbH+qbajbL3bML3YBd++++9IqaSmzRBFOHbAP0iAwznhoZKeacqeWY86WWZM6VWpY5T2ppZrf5JjdqeWb4kyY7WvyFsJra9z2WJNGwZ8kD1Bm5TsWck2vcmoEHdSau03muqbNwndJzTZ2B67Se86BO7bmmvgCv3YZmmJ456B3Mv4a5YdcNMTfpWjfG3KDrBpkbc90oc0OuG2ZuwLVuntnrNBAo8/2geWZHndB1xZzHeWAJXWfDnNB1RszJXGfFnMj1xm6V5pPAtdaZMeN3Unxmzs2zC3gP3CfmL8gjqGARpd6zg7jZCFLrL5kyC1Jn69kF+U7Ce+Z8PbuIuM7as4uA68w9u9AEu2uoKJ6yZ+4Yc4Zl1qs0p88yYvpPaNMqd2pTQl/5WEf4GFZuTAn37AJ5LUMqIp5dMnYt5NlF5Upt+kKeXbp5jnCxsb1Olq7N6Ickc5auTf+LLHOGrsU9u2TmOoFnF/WaEXUSzzX1RTbUiTzX1Lm4Tua5ps7DdVLmTKjNwKeEwN9F7X+cPo666fvaDO5TMzfuOqSEAJKacQgVgLkBzzW1VMEPH+ZGPDdK3ZjnBqltc54bo7bD5J9VjVPHH7P+51JXnptPYuoMPLskpc7Cs4u6SUadiWcXwWJsm8xNo75LItfRJUFkksQ1HWXFnMR1dswJXGfILO46S2Zh15ky1+WL/jlmV75IiJoYNZXEo05E9l0hymN86Cb2cVzENU3BR6bNRi9garhrQOmXD+nOCL3cpNGu8Z4Jv0kF/Mkl4Nn9WTP6hqVG/gpgJTyvqbGuu2PYCDfg5+d32yjQrgvU2y2mDzy4v9jY9Ai+rzXqtgbWpXDZ2C5jRmfIP9/lHl3/xow9f/vTRmasa1Ydz9+BlioouvNPncK6ZlcpcKFz6OjbtmHdjDAlquog7urAkvIHssVz3UgJpOaVJK5Dr0DRWz3X1B0cNauC0jr2HtWZnZ5rapxr/vjGVcza47luCOeaU8izDi1ww27/Szc46i63+AjdYjriccw6jJpTh7lOH1ag7fAx6yhq9cCbyWC3tNdx+qZzC6keytxwZUGvi3oep286iK/5mvmrtcV8SnuXTTB0wm+QC42ZvEPKJli+azY04ot3WHkMvuscoEPLY7Af37kTGQC6G1zih+tazXkfWfx7OqasEbNUFffLiZ0xoeNKOfEK+XSZx/1YZkm+2PJVLNcvzG+hzG9k8SW76Dm6Yf6jZcmB5pQpi6fmLyJwCqzzSrNFU6s+k5kzfWtmOTqKK9AFWBiMv6k1uyRIHDViCZheIpkBJUFiRjigUG3V8CxukEHKoES4hqz1d0YxN7UClX4Jdq2vMEVbIw44xpW7CS3adM+eutcpg5lRnl3CCn50p6Af5W1otXdsWaOQ0hfAoyLoJui2Rpdy8neNfaUj6K1w+JHjvq6xm4HNwB9aomwCLXxuMPSrO/bRc4QJHS3vc+Qu/vVi67f/V/eEjtOn8YEzCLREoVo79Dj5QP8QO6LY9vcuK6jlQGKbux08HRpiail47KOhy7tdHVB6RTItG7P/o0OrC6GW32JpdaY+Dzet7mcduXoNNL7fja1u5SstWju90kr/vtG0Vur6siPasDUPxVZsrV6kBtjHGLJHDzdf77RL7/Z6Ni7l26Vy/qQ2prTqai8nJllBEGOJyr5LSWTTnB1r6XH2vVBK1RdbqW7veT6gHGqgiKa61J3H8fzi9fX1YjIedFJd7sZjjF3H/CPAbdq0adOmTZs2bbD5H8lJpKRvNiuNAAAAAElFTkSuQmCC",this.buildObjectMeshes=new Array,this.labels=new Array,this.labelSVGS=new Array,this.baseMaterial,this.highlightMaterial,this.cancelledMaterial,this.cancelledHighlightMaterial,this.showCancelObjects=!1,this.objectCallback,this.renderFailedCallback,this.labelCallback,this.registerClipIgnore,this.getMaxHeight,this.alphaLevel=.5,this.observableControls=null,this.showLabel=localStorage.getItem("showObjectLabels"),null===this.showLabel?this.showLabel=!0:this.showLabel=JSON.parse(this.showLabel),this.rebuildMaterials()}return Object(i["default"])(_default,[{key:"setBuildMaterial",value:function setBuildMaterial(e,t,r){r||(r=this.alphaLevel);var n=new d["StandardMaterial"](e,this.scene);return n.diffuseColor=t,n.specularColor=new a["Color3"](0,0,0),n.alpha=r,n.needAlphaTesting=function(){return!0},n.separateCullingPass=!0,n.backFaceCulling=!0,n}},{key:"rebuildMaterials",value:function rebuildMaterials(){this.baseMaterial=this.setBuildMaterial("BuildObjectBaseMaterial",new a["Color4"](.1,.5,.1),.25),this.highlightMaterial=this.setBuildMaterial("BuildObjectHighlightMateria",new a["Color3"](.8,.8,.8)),this.cancelledMaterial=this.setBuildMaterial("BuildObjectHighlightMateria",new a["Color3"](1,0,0),.4),this.cancelledHighlightMaterial=this.setBuildMaterial("BuildObjectHighlightMateria",new a["Color3"](1,1,0),.6);var e=new u["Texture"].CreateFromBase64String(this.xmark,"checkerboard",this.scene);this.cancelledMaterial.diffuseTexture=e,this.cancelledHighlightMaterial.diffuseTexture=e}},{key:"loadObjectBoundaries",value:function loadObjectBoundaries(e){if(this.rebuildMaterials(),this.buildObjectMeshes.length>0){for(var t=0;t<this.buildObjectMeshes.length;t++)this.buildObjectMeshes[t].dispose();this.labelSVGS.forEach((function(e){return window.URL.revokeObjectURL(e)})),this.buildObjectMeshes=new Array,this.labels=new Array}if(e)for(var r=0;r<e.length;r++){var n=e[r],i=l["MeshBuilder"].CreateTiledBox("OBJECTMESH:"+n.name,{pattern:c["Mesh"].CAP_ALL,alignVertical:c["Mesh"].TOP,alignHorizontal:c["Mesh"].LEFT,tileHeight:4,tileWidth:4,width:Math.abs(n.x[1]-n.x[0]),height:this.getMaxHeight()+10,depth:Math.abs(n.y[1]-n.y[0]),sideOrientation:c["Mesh"].FRONTSIDE},this.scene);i.position.x=(n.x[1]+n.x[0])/2,i.position.y=this.getMaxHeight()/2-4,i.position.z=(n.y[1]+n.y[0])/2,i.alphaIndex=5e6,n.index=r,i.metadata=n,i.enablePointerMoveEvents=!0,i.renderingGroupId=3,this.setObjectTexture(i),i.setEnabled(this.showCancelObjects),this.registerClipIgnore(i),this.buildObjectMeshes.push(i);var o=this.makeTextPlane(n.name,n.cancelled?"yellow":"white",20);o.position=new s["Vector3"](0,this.getMaxHeight()/2+10,0),o.isPickable=!1,o.metadata=n,o.parent=i,o.setEnabled(this.showLabel),this.labels.push(o)}}},{key:"makeTextPlane",value:function makeTextPlane(e,t,r){var n=o["create"]("svg").attr("width",800).attr("height",200).attr("fill","none");n.append("text").attr("x",400).attr("y",100).attr("font-family","Verdana").attr("font-size","50px").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","black").attr("stroke",t).attr("stroke-width",2).attr("text-rendering","optimizeLegibility").text(e);var i=n.attr("title","test2").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node(),s='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',c=(new XMLSerializer).serializeToString(i),h=new Blob([s+c],{type:"image/svg+xml"}),f=window.URL.createObjectURL(h);this.labelSVGS.push(f);var p=l["MeshBuilder"].CreatePlane("TextPlane",{width:r,height:8},this.scene);return p.material=new d["StandardMaterial"]("TextPlaneMaterial",this.scene),p.material.backFaceCulling=!1,p.material.specularColor=new a["Color3"](0,0,0),p.material.diffuseTexture=new u["Texture"](f,this.scene),p.material.diffuseTexture.hasAlpha=!0,p.billboardMode=7,this.registerClipIgnore(p),p}},{key:"buildObservables",value:function buildObservables(){var e=this;if(!this.observableControls){var t=0,r=!1,n=0;this.observableControls=this.scene.onPointerObservable.add((function(i){var o=i.pickInfo;switch(i.type){case h["PointerEventTypes"].POINTERDOWN:r=!0,n=Date.now();break;case h["PointerEventTypes"].POINTERUP:if(r=!1,Date.now()-n>200)return;e.handleClick(o);break;case h["PointerEventTypes"].POINTERMOVE:if(r||Date.now()-t<100)return;t=Date.now(),e.handlePointerMove(o)}}))}}},{key:"clearObservables",value:function clearObservables(){this.observableControls&&(this.scene.onPointerObservable.remove(this.observableControls),this.observableControls=null)}},{key:"showObjectSelection",value:function showObjectSelection(e){this.showCancelObjects=e,this.buildObjectMeshes.forEach((function(t){return t.setEnabled(e)})),e?this.buildObservables():this.clearObservables()}},{key:"setObjectTexture",value:function setObjectTexture(e){e.metadata.cancelled?(e.material=this.cancelledMaterial,e.enableEdgesRendering(),e.edgesWidth=15,e.edgesColor=new a["Color4"](1,0,0,1)):(e.material=this.baseMaterial,e.enableEdgesRendering(),e.edgesWidth=15,e.edgesColor=new a["Color4"](0,1,0,1))}},{key:"handleClick",value:function handleClick(e){this.showCancelObjects&&e.hit&&e.pickedMesh&&e.pickedMesh.name.includes("OBJECTMESH")&&this.objectCallback&&this.objectCallback(e.pickedMesh.metadata)}},{key:"handlePointerMove",value:function handlePointerMove(e){var t=this;this.showCancelObjects&&(this.buildObjectMeshes.forEach((function(e){return t.setObjectTexture(e)})),e.hit&&e.pickedMesh&&e.pickedMesh.name.includes("OBJECTMESH")?(e.pickedMesh.material=e.pickedMesh.metadata.cancelled?this.cancelledHighlightMaterial:this.highlightMaterial,this.labelCallback&&this.labelCallback(e.pickedMesh.metadata.name)):this.labelCallback&&this.labelCallback(""))}},{key:"showLabels",value:function showLabels(e){localStorage.setItem("showObjectLabels",e),this.showLabel=e,this.labels.forEach((function(t){return t.setEnabled(e)}))}}]),_default}()},"./src/plugins/GCodeViewer/viewer/gcodeline.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("./node_modules/@babylonjs/core/Maths/math.color.js"),s=r("./node_modules/@babylonjs/core/Meshes/mesh.js"),a=r("./node_modules/@babylonjs/core/Meshes/meshBuilder.js"),u=function(){function _default(){Object(n["default"])(this,_default),this.start,this.end,this.extruding=!1,this.gcodeLineNumber=0,this.color,this.feedRate=0}return Object(i["default"])(_default,[{key:"length",value:function length(){return this.distanceVector(this.start,this.end)}},{key:"renderLine",value:function renderLine(e){var t=[this.start,this.end],r=s["Mesh"].CreateLines("lines",t,e);r.enableEdgesRendering(),r.edgesWidth=10,r.edgesColor=new o["Color4"](1,1,0,1)}},{key:"renderLineV2",value:function renderLineV2(){var e=a["MeshBuilder"].CreateTube("tube",{path:[this.start,this.end],radius:.2,tesselation:4,sideOrientation:s["Mesh"].FRONTSIDE,updatable:!1});return e.doNotSyncBoundingInfo=!0,e}},{key:"distanceVector",value:function distanceVector(e,t){var r=e.x-t.x,n=e.y-t.y,i=e.z-t.z;return Math.sqrt(r*r+n*n+i*i)}},{key:"renderLineV3",value:function renderLineV3(e,t){var r=this.distanceVector(this.start,this.end),n=Math.atan2(this.end.z-this.start.z,this.end.x-this.start.x);e.scaling.x=r,e.rotation.y=-n,e.position.x=this.start.x+r/2*Math.cos(n),e.position.y=this.start.y,e.position.z=this.start.z+r/2*Math.sin(n),e.color=this.color,e.materialIndex=t?1:0,e.props={gcodeLineNumber:this.gcodeLineNumber,originalColor:this.color}}},{key:"renderParticle",value:function renderParticle(e){e.position.x=this.start.x,e.position.y=this.start.y,e.position.z=this.start.z,e.color=this.color}},{key:"getPoints",value:function getPoints(){return{points:[this.start,this.end],colors:[this.color,this.color]}}},{key:"getColor",value:function getColor(){return this.extruding?new o["Color4"](1,1,1,1):new o["Color4"](1,0,0,1)}}]),_default}()},"./src/plugins/GCodeViewer/viewer/gcodeprocessor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderMode",(function(){return m})),r.d(t,"ColorMode",(function(){return _})),r.d(t,"default",(function(){return g}));var n=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),s=(r("./node_modules/regenerator-runtime/runtime.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.number.parse-int.js"),r("./node_modules/core-js/modules/es.string.pad-end.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.string.trim.js"),r("./node_modules/core-js/modules/es.string.starts-with.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/@babylonjs/core/Maths/math.vector.js")),a=r("./node_modules/@babylonjs/core/Maths/math.color.js"),u=r("./node_modules/@babylonjs/core/Meshes/buffer.js"),c=r("./node_modules/@babylonjs/core/Materials/standardMaterial.js"),l=r("./node_modules/@babylonjs/core/Particles/solidParticleSystem.js"),d=r("./node_modules/@babylonjs/core/Particles/pointsCloudSystem.js"),h=r("./node_modules/@babylonjs/core/Meshes/meshBuilder.js"),f=r("./src/plugins/GCodeViewer/viewer/gcodeline.js"),p=r("./src/plugins/GCodeViewer/viewer/utils.js"),m={Block:1,Line:2,Point:3,Max:4},_={Color:0,Feed:1},g=function(){function _default(){Object(i["default"])(this,_default),this.currentPosition=new s["Vector3"](0,0,0),this.currentColor=new a["Color4"](.25,.25,.25,1),this.renderVersion=m.Line,this.absolute=!0,this.lines=[],this.travels=[],this.sps,this.maxHeight=0,this.lineCount=0,this.renderMode="",this.extruderCount=5,this.layerDictionary={},this.previousLayerHeight=0,this.currentLayerHeight=0,this.liveTracking=!1,this.liveTrackingShowSolid="true"===localStorage.getItem("showSolid"),this.materialTransparency=.3,this.gcodeLineIndex=[],this.gcodeFilePosition=0,this.refreshTime=200,this.timeStamp,this.lineLengthTolerance=.05,this.extruderColors=[new a["Color4"](0,1,1,1),new a["Color4"](1,0,1,1),new a["Color4"](1,1,0,1),new a["Color4"](0,0,0,1),new a["Color4"](1,1,1,1)],this.progressColor=new a["Color4"](0,1,0,1),this.lineMeshIndex=0,this.scene,this.renderFuncs=[],this.meshBreakPoint=2e4,this.feedRateTrimming=!1,this.currentFeedRate=0,this.feedValues=0,this.numChanges=0,this.avgFeed=0,this.maxFeedRate=0,this.minFeedRate=Number.MAX_VALUE,this.underspeedPercent=1,this.colorMode=Number.parseInt(localStorage.getItem("processorColorMode")),this.colorMode||this.setColorMode(_.Color),this.minColorRate=Number.parseInt(localStorage.getItem("minColorRate")),this.minColorRate||(this.minColorRate=1200,localStorage.setItem("minColorRate",this.minColorRate)),this.maxColorRate=Number.parseInt(localStorage.getItem("maxColorRate")),this.maxColorRate||(this.maxColorRate=3600,localStorage.setItem("maxColorRate",this.maxColorRate)),this.minFeedColorString=localStorage.getItem("minFeedColor"),this.minFeedColorString||(this.minFeedColorString="#0000FF"),this.minFeedColor=a["Color4"].FromHexString(this.minFeedColorString.padEnd(9,"F")),this.maxFeedColorString=localStorage.getItem("maxFeedColor"),this.maxFeedColorString||(this.maxFeedColorString="#FF0000"),this.maxFeedColor=a["Color4"].FromHexString(this.maxFeedColorString.padEnd(9,"F")),this.everyNthRow=0,this.currentRowIdx=-1,this.currentZ=0,this.renderTravels=!0,this.lineVertexAlpha=!1,this.forceWireMode="true"===localStorage.getItem("forceWireMode"),this.spreadLines=!1,this.spreadLineAmount=10,this.debug=!1,this.specularColor=new a["Color4"](.1,.1,.1,.1),this.lookAheadLength=500,this.cancelLoad=!1,this.loadingProgressCallback,this.hasSpindle=!1}return Object(o["default"])(_default,[{key:"setExtruderColors",value:function setExtruderColors(e){if(null!==e&&0!==e.length){this.extruderColors=[];for(var t=0;t<e.length;t++){var r=e[t],n=a["Color4"].FromHexString(r.padEnd(9,"F"));this.extruderColors.push(n)}}}},{key:"setProgressColor",value:function setProgressColor(e){this.progressColor=a["Color4"].FromHexString(e.padEnd(9,"F"))}},{key:"getMaxHeight",value:function getMaxHeight(){return this.maxHeight}},{key:"setRenderQualitySettings",value:function setRenderQualitySettings(e,t){void 0===t&&(t=1);var r=0,n=this.forceWireMode?2:1,i=2;switch(this.refreshTime=5e3,this.everyNthRow=1,this.renderTravels=!0,t){case 1:n=2,this.refreshTime=3e4,r=25e3,i=50,this.renderTravels=!1;break;case 2:n=2,this.refreshTime=3e4,r=5e5,i=10,this.renderTravels=!1;break;case 3:r=1e6,i=3;break;case 4:r=15e6,i=2;break;case 5:r=25e6;break;default:return this.renderVersion=m.Block,void(this.everyNthRow=1)}for(var o=n;o<4;o++){var s=void 0;switch(o){case 1:s=24;break;case 2:s=2;break;case 3:s=1;break}for(var a=this.everyNthRow;a<=i;a++)if(this.debug&&console.log("Mode: "+o+"  NRow: "+a+"   vertexcount: "+e*s/a),e*s/a<r)return this.renderVersion=o,void(this.everyNthRow=a)}console.log("Worst Case"),this.renderVersion=2,this.everyNthRow=20}},{key:"initVariables",value:function initVariables(){this.currentPosition=new s["Vector3"](0,0,0),this.cancelLoad=!1,this.absolute=!0,this.currentZ=0,this.currentRowIdx=-1,this.gcodeLineIndex=[],this.lineMeshIndex=0,this.lastExtrudedZHeight=0,this.previousLayerHeight=0,this.currentLayerHeight=0,this.minFeedRate=Number.MAX_VALUE,this.maxFeedRate=0,this.hasSpindle=!1,this.currentColor=this.extruderColors[0].clone()}},{key:"processGcodeFile",value:function(){var e=Object(n["default"])(regeneratorRuntime.mark((function _callee(e,t,r){var n,i,o;return regeneratorRuntime.wrap((function _callee$(s){while(1)switch(s.prev=s.next){case 0:if(this.initVariables(),void 0!==t&&null!==t||(t=4),void 0!==e&&null!==e&&0!==e.length){s.next=4;break}return s.abrupt("return");case 4:n=e.split("\n"),"function"===typeof r&&r(),this.lineCount=n.length,this.debug&&console.info("Line Count : ".concat(this.lineCount)),this.setRenderQualitySettings(this.lineCount,t),this.currentColor=this.extruderColors[0].clone(),n.reverse(),i=0,this.timeStamp=Date.now();case 13:if(!n.length){s.next=26;break}if(!this.cancelLoad){s.next=17;break}return this.cancelLoad=!1,s.abrupt("return");case 17:if(o=n.pop(),i+=o.length+1,o.trim(),o.startsWith(";")||(this.processLine(o,i),this.loadingProgressCallback&&this.loadingProgressCallback(i/o.length)),!(Date.now()-this.timeStamp>10)){s.next=24;break}return s.next=24,this.pauseProcessing();case 24:s.next=13;break;case 26:this.renderTravels&&this.createTravelLines(this.scene),e={};case 28:case"end":return s.stop()}}),_callee,this)})));function processGcodeFile(t,r,n){return e.apply(this,arguments)}return processGcodeFile}()},{key:"pauseProcessing",value:function pauseProcessing(){var e=this;return new Promise((function(e){return setTimeout(e)})).then((function(){e.timeStamp=Date.now()}))}},{key:"processLine",value:function(){var e=Object(n["default"])(regeneratorRuntime.mark((function _callee2(e,t){var r,n,i,o,u,c,l,d,h,m,g,b,v,M,T,S,C,E,P,A,j=this;return regeneratorRuntime.wrap((function _callee2$(O){while(1)switch(O.prev=O.next){case 0:if(r=e.indexOf(";"),r>-1&&(e=e.substring(0,r-1).trim()),e=e.toUpperCase(),i=e.match(/[GM]+[0-9.]+/),null==i){O.next=89;break}i=i.filter((function(e){return e.startsWith("G")||e.startsWith("M")})),O.t0=i[0],O.next="G0"===O.t0||"G1"===O.t0?9:"G2"===O.t0||"G3"===O.t0?48:"G28"===O.t0?55:"G90"===O.t0?57:"G91"===O.t0?59:"G92"===O.t0?61:"S"===O.t0?62:"M3"===O.t0||"M4"===O.t0?64:"M567"===O.t0?69:87;break;case 9:n=e.split(/(?=[GXYZEF])/),o=new f["default"],o.gcodeLineNumber=t,o.start=this.currentPosition.clone(),u=1;case 14:if(!(u<n.length)){O.next=37;break}c=n[u],O.t1=c[0],O.next="X"===O.t1?19:"Y"===O.t1?21:"Z"===O.t1?23:"E"===O.t1?26:"F"===O.t1?29:34;break;case 19:return this.currentPosition.x=this.absolute?Number(c.substring(1)):this.currentPosition.x+Number(c.substring(1)),O.abrupt("break",34);case 21:return this.currentPosition.z=this.absolute?Number(c.substring(1)):this.currentPosition.z+Number(c.substring(1)),O.abrupt("break",34);case 23:return this.currentPosition.y=this.absolute?Number(c.substring(1)):this.currentPosition.y+Number(c.substring(1)),this.spreadLines&&(this.currentPosition.y*=this.spreadLineAmount),O.abrupt("break",34);case 26:return o.extruding=!0,this.maxHeight=this.currentPosition.y,O.abrupt("break",34);case 29:return this.currentFeedRate=Number(c.substring(1)),this.currentFeedRate>this.maxFeedRate&&(this.maxFeedRate=this.currentFeedRate),this.currentFeedRate<this.minFeedRate&&(this.minFeedRate=this.currentFeedRate),this.colorMode===_.Feed&&(l=(this.currentFeedRate-this.minColorRate)/(this.maxColorRate-this.minColorRate),this.currentColor=l>=1?this.maxFeedColor:l<=0?this.minFeedColor:a["Color4"].Lerp(this.minFeedColor,this.maxFeedColor,l)),O.abrupt("break",34);case 34:u++,O.next=14;break;case 37:if(o.end=this.currentPosition.clone(),this.debug&&(console.log("".concat(e,"   absolute:").concat(this.absolute)),console.log(t,o)),this.feedRateTrimming&&(this.feedValues+=this.currentFeedRate,this.numChanges++,this.avgFeed=this.feedValues/this.numChanges*this.underspeedPercent),!(this.everyNthRow>1&&o.extruding)){O.next=44;break}if(this.currentPosition.y>this.currentZ&&(this.currentRowIdx++,this.currentZ=this.currentPosition.y),!(this.currentRowIdx%this.everyNthRow!==0^this.currentRowIdx<2)){O.next=44;break}return O.abrupt("return");case 44:return d=this.hasSpindle&&"G1"===i[0],h=o.length()>=this.lineLengthTolerance,d||h&&o.extruding?(o.color=this.currentColor.clone(),this.lines.push(o),this.currentPosition.y>this.currentLayerHeight&&this.currentPosition.y<20&&(this.previousLayerHeight=this.currentLayerHeight,this.currentLayerHeight=this.currentPosition.y)):this.renderTravels&&!o.extruding&&(o.color=new a["Color4"](1,0,0,1),this.travels.push(o)),O.abrupt("break",87);case 48:return n=e.split(/(?=[GXYZIJFRE])/),m=n.filter((function(e){return"G2"===e})),g=Object(p["doArc"])(n,this.currentPosition,!this.absolute,1),b=this.currentPosition.clone(),g.points.forEach((function(e,t){var r=new f["default"];r.gcodeLineNumber=j.gcodeLineNumber,r.start=b.clone(),r.end=new s["Vector3"](e.x,e.y,e.z),r.color=j.currentColor.clone(),j.debug&&(r.color=m?new a["Color4"](0,1,1,1):new a["Color4"](1,1,0,1),0==t&&(r.color=new a["Color4"](0,1,0,1))),b=r.end.clone(),j.lines.push(r)})),this.currentPosition=new s["Vector3"](g.position.x,g.position.y,g.position.z),O.abrupt("break",87);case 55:return this.currentPosition=new s["Vector3"](0,0,0),O.abrupt("break",87);case 57:return this.absolute=!0,O.abrupt("break",87);case 59:return this.absolute=!1,O.abrupt("break",87);case 61:return O.abrupt("break",87);case 62:return this.hasSpindle=!0,O.abrupt("break",87);case 64:return v=e.split(/(?=[SM])/),M=v.filter((function(e){return e.startsWith("S")})),M=M[0]?Number(M[0].substring(1)):0,M>0&&(this.hasSpindle=!0),O.abrupt("break",87);case 69:if(T=e.split(/(?=[PE])/),this.colorMode!==_.Feed){O.next=72;break}return O.abrupt("break",87);case 72:S=1;case 73:if(!(S<T.length)){O.next=84;break}C=T[S],E=[1,1,1],O.t2=C[0],O.next="E"===O.t2?79:81;break;case 79:return this.extruderPercentage=C.substring(1).split(":"),O.abrupt("break",81);case 81:S++,O.next=73;break;case 84:for(P=0;P<4;P++)E[0]-=(1-this.extruderColors[P].r)*this.extruderPercentage[P],E[1]-=(1-this.extruderColors[P].g)*this.extruderPercentage[P],E[2]-=(1-this.extruderColors[P].b)*this.extruderPercentage[P];return this.currentColor=new a["Color4"](E[0],E[1],E[2],.1),O.abrupt("break",87);case 87:O.next=91;break;case 89:e.startsWith("T")&&this.colorMode!==_.Feed&&(A=Number(e.substring(1))%this.extruderCount,A<0&&(A=0),this.currentColor=this.extruderColors[A].clone()),this.debug&&console.log(e);case 91:if(!(this.lines.length>=this.meshBreakPoint)){O.next=96;break}return this.createScene(this.scene),O.next=95,this.pauseProcessing();case 95:this.lineMeshIndex++;case 96:case"end":return O.stop()}}),_callee2,this)})));function processLine(t,r){return e.apply(this,arguments)}return processLine}()},{key:"renderLineMode",value:function renderLineMode(e){var t=this,r=Date.now(),n=!1,i=this.lineMeshIndex;this.gcodeLineIndex.push(new Array),this.renderMode="Line Rendering";var o=[],s=[];this.debug&&console.log(this.lines[0]);for(var a=this.lineVertexAlpha?this.materialTransparency:1,l=0;l<this.lines.length;l++){var d=this.lines[l];this.gcodeLineIndex[i].push(d.gcodeLineNumber);var f=d.getPoints(e);this.liveTracking?(f.colors[0].a=this.liveTrackingShowSolid?a:0,f.colors[1].a=this.liveTrackingShowSolid?a:0):(f.colors[0].a=a,f.colors[1].a=a),o.push(f.points),s.push(f.colors)}var p=h["MeshBuilder"].CreateLineSystem("m "+this.lineMeshIndex,{lines:o,colors:s,updatable:!0},e);o=null,s=null,p.isVisible=!0,p.isPickable=!1,p.markVerticesDataAsUpdatable(u["VertexBuffer"].ColorKind),p.material=new c["StandardMaterial"]("m",e),p.material.backFaceCulling=!0,p.material.forceDepthWrite=!0,p.alphaIndex=i,p.renderingGroupId=2;var m=0,_=function beforeRenderFunc(){if((t.liveTracking||n||t.gcodeFilePosition&&m>=t.gcodeLineIndex[i].length-1)&&!(Date.now()-r<t.refreshTime)){r=Date.now();var e=p.getVerticesData(u["VertexBuffer"].ColorKind);if(null!==e&&void 0!==e){for(var o=-1,s=-1,a=m;a<t.gcodeLineIndex[i].length;a++)t.gcodeLineIndex[i][a]<=t.gcodeFilePosition&&(o=a),t.gcodeLineIndex[i][a]<=t.gcodeFilePosition+t.lookAheadLength&&(s=a);for(var c=m;c<o;c++){var l=8*c;e[l]=t.progressColor.r,e[l+1]=t.progressColor.g,e[l+2]=t.progressColor.b,e[l+3]=t.progressColor.a,e[l+4]=t.progressColor.r,e[l+5]=t.progressColor.g,e[l+6]=t.progressColor.b,e[l+7]=t.progressColor.a}for(var d=o;d<s;d++){var h=8*d;e[h+3]=1,e[h+7]=1}m=o,p.updateVerticesData(u["VertexBuffer"].ColorKind,e,!0),t.gcodeFilePosition===Number.MAX_VALUE&&(n=!0)}else console.log("Failed to Load Color VBO")}};this.renderFuncs.push(_),e.registerBeforeRender(_)}},{key:"renderBlockMode",value:function renderBlockMode(e){var t=this,r=Date.now(),n=!1,i=this.lineMeshIndex;this.gcodeLineIndex.push(new Array);var o=Math.floor(100*(this.currentLayerHeight-this.previousLayerHeight))/100;this.spreadLines&&(o/=this.spreadLineAmount),this.renderMode="Mesh Rendering";var s=h["MeshBuilder"].CreateBox("box",{width:1,height:o,depth:1.2*o},e),u=this.lines;this.gcodeLineIndex.push(new Array);var d=function particleBuilder(e,r,n){u[n].renderLineV3(e,t.lineVertexAlpha||t.liveTracking&&!t.liveTrackingShowSolid),t.gcodeLineIndex[i].push(e.props.gcodeLineNumber)},f=new l["SolidParticleSystem"]("gcodemodel"+i,e,{updatable:!0,enableMultiMaterial:!0,useVertexAlpha:!0});f.addShape(s,this.lines.length,{positionFunction:d}),f.buildMesh();var p=this.lineVertexAlpha?this.materialTransparency:1;this.liveTracking&&(p=this.liveTrackingShowSolid?p:0);var m=new c["StandardMaterial"]("solidMaterial",e);m.specularColor=this.specularColor;var _=new c["StandardMaterial"]("transparentMaterial",e);_.specularColor=this.specularColor,_.alpha=this.liveTrackingShowSolid?this.materialTransparency:p,_.needAlphaTesting=function(){return!0},_.separateCullingPass=!0,_.backFaceCulling=!0,f.setMultiMaterial([m,_]),f.setParticles(),f.computeSubMeshes(),f.mesh.alphaIndex=0,f.mesh.isPickable=!1,f.mesh.doNotSyncBoundingInfo=!0,f.updateParticle=function(e){t.gcodeLineIndex[i][e.idx]<t.gcodeFilePosition?(e.color=t.progressColor,e.materialIndex=0):t.gcodeLineIndex[i][e.idx]<t.gcodeFilePosition+t.lookAheadLength?(e.color=new a["Color4"](e.color.r,e.color.g,e.color.b,1),e.materialIndex=0):e.color=new a["Color4"](e.color.r,e.color.g,e.color.b,0)};var g=function beforeRenderFunc(){if(t.liveTracking&&!n){if(Date.now()-r<t.refreshTime)return;r=Date.now(),f.setParticles(),f.computeSubMeshes(),t.gcodeFilePosition===Number.MAX_VALUE&&(n=!0)}};this.renderFuncs.push(g),e.registerBeforeRender(g),this.scene.clearCachedVertexData()}},{key:"renderPointMode",value:function renderPointMode(e){var t=this.lineMeshIndex;this.gcodeLineIndex.push(new Array),this.sps=new d["PointsCloudSystem"]("pcs"+t,1,e);var r=this.lines,n=function particleBuilder(e,t,n){r[n].renderParticle(e)};this.sps.addPoints(this.lines.length,n),this.sps.buildMeshAsync().then((function(e){e.material.pointSize=2}))}},{key:"createScene",value:function createScene(e){this.renderVersion===m.Line?this.renderLineMode(e):this.renderVersion===m.Block?this.renderBlockMode(e):this.renderVersion===m.Point&&this.renderPointMode(e),this.lines=[],this.scene.render()}},{key:"createTravelLines",value:function createTravelLines(e){for(var t=[],r=[],n=0;n<this.travels.length;n++){var i=this.travels[n],o=i.getPoints(e);t.push(o.points),r.push(o.colors)}var s=h["MeshBuilder"].CreateLineSystem("travels",{lines:t,colors:r,updatable:!1,useVertexAlpha:!1},e);s.isVisible=!1,this.travels=[]}},{key:"updateFilePosition",value:function updateFilePosition(e){this.liveTracking?this.gcodeFilePosition=e-1:this.gcodeFilePosition=0}},{key:"doFinalPass",value:function doFinalPass(){var e=this;this.liveTracking=!0,this.gcodeFilePosition=Number.MAX_VALUE,setTimeout((function(){e.liveTracking=!1}),this.refreshTime+200)}},{key:"updateMesh",value:function updateMesh(){1===this.renderVersion?console.log("Version 1"):2===this.renderVersion&&console.log("Version 2")}},{key:"unregisterEvents",value:function unregisterEvents(){for(var e=0;e<this.renderFuncs.length;e++)this.scene.unregisterBeforeRender(this.renderFuncs[e]);this.renderFuncs=[]}},{key:"setLiveTracking",value:function setLiveTracking(e){this.liveTracking=e}},{key:"setColorMode",value:function setColorMode(e){e||(this.colorMode=_.Color),localStorage.setItem("processorColorMode",e),this.colorMode=e}},{key:"updateMinFeedColor",value:function updateMinFeedColor(e){localStorage.setItem("minFeedColor",e),this.minFeedColorString=e,this.minFeedColor=a["Color4"].FromHexString(e.padEnd(9,"F"))}},{key:"updateMaxFeedColor",value:function updateMaxFeedColor(e){localStorage.setItem("maxFeedColor",e),this.maxFeedColorString=e,this.maxFeedColor=a["Color4"].FromHexString(e.padEnd(9,"F"))}},{key:"updateColorRate",value:function updateColorRate(e,t){localStorage.setItem("minColorRate",e),localStorage.setItem("maxColorRate",t),this.minColorRate=e,this.maxColorRate=t}},{key:"updateForceWireMode",value:function updateForceWireMode(e){this.forceWireMode=e,localStorage.setItem("forceWireMode",e)}},{key:"setLiveTrackingShowSolid",value:function setLiveTrackingShowSolid(e){this.liveTrackingShowSolid=e,localStorage.setItem("showSolid",e)}}]),_default}()},"./src/plugins/GCodeViewer/viewer/gcodeviewer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return M}));var n=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),s=(r("./node_modules/regenerator-runtime/runtime.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/@babylonjs/core/Engines/engine.js")),a=r("./node_modules/@babylonjs/core/scene.js"),u=r("./node_modules/@babylonjs/core/Maths/math.plane.js"),c=r("./node_modules/@babylonjs/core/Maths/math.color.js"),l=r("./node_modules/@babylonjs/core/Maths/math.vector.js"),d=r("./node_modules/@babylonjs/core/Maths/math.axis.js"),h=r("./node_modules/@babylonjs/core/Meshes/meshBuilder.js"),f=r("./node_modules/@babylonjs/core/Meshes/transformNode.js"),p=(r("./node_modules/@babylonjs/core/Rendering/edgesRenderer.js"),r("./node_modules/@babylonjs/core/Cameras/arcRotateCamera.js")),m=r("./node_modules/@babylonjs/core/Lights/pointLight.js"),_=r("./src/plugins/GCodeViewer/viewer/gcodeprocessor.js"),g=r("./src/plugins/GCodeViewer/viewer/bed.js"),b=r("./src/plugins/GCodeViewer/viewer/buildobjects.js"),v=r("./src/plugins/GCodeViewer/viewer/axes.js"),M=function(){function _default(e){Object(i["default"])(this,_default),this.lastLoadKey="lastLoadFailed",this.fileData,this.gcodeProcessor=new _["default"],this.maxHeight=0,this.sceneBackgroundColor="#000000",this.canvas=e,this.scene={},this.loading=!1,this.toolVisible=!1,this.toolCursor,this.toolCursorMesh,this.toolCursorVisible=!0,this.travelVisible=!1,this.debug=!1,this.zTopClipValue,this.zBottomClipValue,this.cancelHitTimer=0,this.pause=!1,this.cameraInertia="true"===localStorage.getItem("cameraInertia"),this.bed,this.buildObjects,this.axes,this.renderQuality=Number(localStorage.getItem("renderQuality")),void 0!==this.renderQuality&&null!==this.renderQuality||(this.renderQuality=1),this.hasCacheSupport=!1}return Object(o["default"])(_default,[{key:"getMaxHeight",value:function getMaxHeight(){return this.maxHeight}},{key:"setCameraType",value:function setCameraType(e){this.scene.activeCamera=e?this.orbitCamera:this.flyCamera}},{key:"setZClipPlane",value:function setZClipPlane(e,t){this.zTopClipValue=-e,this.zBottomClipValue=t,t>e&&(this.zTopClipValue=t+1),this.scene.clipPlane=new u["Plane"](0,1,0,this.zTopClipValue),this.scene.clipPlane2=new u["Plane"](0,-1,0,this.zBottomClipValue)}},{key:"init",value:function init(){var e=this;this.engine=new s["Engine"](this.canvas,!0,{doNotHandleContextLost:!0}),this.engine.enableOfflineSupport=!1,this.scene=new a["Scene"](this.engine),this.debug&&this.scene.debugLayer.show(),this.scene.clearColor=c["Color3"].FromHexString(this.getBackgroundColor()),this.bed=new g["default"](this.scene),this.bed.registerClipIgnore=function(t){e.registerClipIgnore(t)};var t=this.bed.getCenter();this.orbitCamera=new p["ArcRotateCamera"]("Camera",Math.PI/2,2.356194,250,new l["Vector3"](t.x,-2,t.y),this.scene),this.orbitCamera.invertRotation=!1,this.orbitCamera.attachControl(this.canvas,!1),this.updateCameraInertiaProperties();var r=new m["PointLight"]("light2",new l["Vector3"](0,1,-1),this.scene);r.diffuse=new c["Color3"](1,1,1),r.specular=new c["Color3"](1,1,1);var n=this;this.engine.runRenderLoop((function(){n.pause||(n.scene.render(),r.position=n.scene.cameras[0].position)})),this.buildObjects=new b["default"](this.scene),this.buildObjects.getMaxHeight=function(){return e.gcodeProcessor.getMaxHeight()},this.buildObjects.registerClipIgnore=function(t){e.registerClipIgnore(t)},this.bed.buildBed(),this.axes=new v["default"](this.scene),this.axes.registerClipIgnore=function(t){e.registerClipIgnore(t)},this.axes.render(50),this.resetCamera()}},{key:"resize",value:function resize(){this.engine.resize()}},{key:"refreshUI",value:function refreshUI(){setTimeout((function(){}),0)}},{key:"setFileName",value:function setFileName(e){this.hasCacheSupport&&window.caches.open("gcode-viewer").then((function(t){var r=new Blob([e],{type:"text/plain"});t.put("gcodeFileName",new Response(r))}))}},{key:"getFileName",value:function getFileName(){if(!this.hasCacheSupport)return"";window.caches.open("gcode-viewer").then((function(e){e.match("gcodeData").then((function(e){e.text().then((function(e){return e}))}))}))}},{key:"resetCamera",value:function resetCamera(){var e=this.bed.getCenter(),t=this.bed.getSize();this.scene.activeCamera.alpha=Math.PI/2,this.scene.activeCamera.beta=2.356194,this.bed.isDelta?(this.scene.activeCamera.radius=e.x,this.scene.activeCamera.target=new l["Vector3"](e.x,-2,e.y),this.scene.activeCamera.position=new l["Vector3"](-t.x,t.z,-t.x)):(this.scene.activeCamera.radius=250,this.scene.activeCamera.target=new l["Vector3"](e.x,-2,e.y),this.scene.activeCamera.position=new l["Vector3"](-t.x/2,t.z,-t.y/2))}},{key:"lastLoadFailed",value:function lastLoadFailed(){return!!localStorage&&"true"===localStorage.getItem(this.lastLoadKey)}},{key:"setLoadFlag",value:function setLoadFlag(){localStorage&&localStorage.setItem(this.lastLoadKey,"true")}},{key:"clearLoadFlag",value:function clearLoadFlag(){localStorage&&(localStorage.setItem(this.lastLoadKey,""),localStorage.removeItem(this.lastLoadKey))}},{key:"processFile",value:function(){var e=Object(n["default"])(regeneratorRuntime.mark((function _callee(e){var t;return regeneratorRuntime.wrap((function _callee$(r){while(1)switch(r.prev=r.next){case 0:return this.clearScene(),this.refreshUI(),t=this,this.hasCacheSupport&&window.caches.open("gcode-viewer").then((function(t){var r=new Blob([e],{type:"text/plain"});t.put("gcodeData",new Response(r))})),this.fileData=e,this.gcodeProcessor.setExtruderColors(this.getExtruderColors()),this.gcodeProcessor.setProgressColor(this.getProgressColor()),this.gcodeProcessor.scene=this.scene,this.lastLoadFailed()&&(console.error("Last rendering failed dropping to SBC quality"),this.updateRenderQuality(1),this.clearLoadFlag()),this.setLoadFlag(),r.next=12,this.gcodeProcessor.processGcodeFile(e,this.renderQuality,(function(){t.hasCacheSupport&&(t.fileData="")}));case 12:this.clearLoadFlag(),this.gcodeProcessor.createScene(this.scene),this.maxHeight=this.gcodeProcessor.getMaxHeight(),this.toggleTravels(this.travelVisible),this.setCursorVisiblity(this.toolCursorVisible);case 17:case"end":return r.stop()}}),_callee,this)})));function processFile(t){return e.apply(this,arguments)}return processFile}()},{key:"toggleTravels",value:function toggleTravels(e){var t=this.scene.getMeshByName("travels");if(void 0!==t)try{t.isVisible=e,this.travelVisible=e}catch(r){}}},{key:"getExtruderColors",value:function getExtruderColors(){var e=localStorage.getItem("extruderColors");return null===e?(e=["#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF"],this.saveExtruderColors(e)):e=e.split(","),e}},{key:"saveExtruderColors",value:function saveExtruderColors(e){localStorage.setItem("extruderColors",e)}},{key:"resetExtruderColors",value:function resetExtruderColors(){localStorage.removeItem("extruderColors"),this.getExtruderColors()}},{key:"getProgressColor",value:function getProgressColor(){var e=localStorage.getItem("progressColor");return null===e&&(e="#FFFFFF"),e}},{key:"setProgressColor",value:function setProgressColor(e){localStorage.setItem("progressColor",e),this.gcodeProcessor.setProgressColor(e)}},{key:"getBackgroundColor",value:function getBackgroundColor(){var e=localStorage.getItem("sceneBackgroundColor");return null===e&&(e="#000000"),e}},{key:"setBackgroundColor",value:function setBackgroundColor(e){null!==this.scene&&void 0!==this.scene&&(e.length>7&&(e=e.substring(0,7)),this.scene.clearColor=c["Color3"].FromHexString(e)),localStorage.setItem("sceneBackgroundColor",e)}},{key:"clearScene",value:function clearScene(e){this.fileData&&e&&(this.fileData=""),this.gcodeProcessor.unregisterEvents();for(var t=this.scene.meshes.length-1;t>=0;t--){var r=this.scene.meshes[t];r&&this.debug&&console.log("Disposing ".concat(r.name)),this.scene.removeMesh(r),r&&"function"===typeof r.dispose&&r.dispose(!1,!0)}for(var n=this.scene.materials.length-1;n>=0;n--){var i=this.scene.materials[n];"solidMaterial"===i.name&&(i&&this.debug&&console.log("Disposing ".concat(i.name)),this.scene.removeMaterial(i),i&&"function"===typeof i.dispose&&i.dispose(!1,!0))}this.toolCursor&&(this.toolCursor.dispose(!1,!0),this.toolCursor=void 0),this.buildtoolCursor(),this.bed.buildBed(),this.axes.render()}},{key:"reload",value:function reload(){var e=this;return new Promise((function(t){if(e.clearScene(),e.hasCacheSupport){var r=e;window.caches.open("gcode-viewer").then((function(e){e.match("gcodeData").then((function(e){e.text().then((function(e){r.processFile(e).then((function(){t()}))}))}))}))}else e.processFile(e.fileData).then((function(){t()}))}))}},{key:"getRenderMode",value:function getRenderMode(){return this.gcodeProcessor.renderMode}},{key:"setCursorVisiblity",value:function setCursorVisiblity(e){void 0!==this.scene&&(void 0===this.toolCursor&&this.buildtoolCursor(),this.toolCursorMesh.isVisible=e,this.toolCursorVisible=e)}},{key:"updateToolPosition",value:function updateToolPosition(e){var t=0,r=0,n=0;this.buildtoolCursor();for(var i=0;i<e.length;i++){switch(e[i].axes){case"X":t=e[i].position;break;case"Y":r=e[i].position;break;case"Z":n=e[i].position*(this.gcodeProcessor.spreadLines?this.gcodeProcessor.spreadLineAmount:1);break}this.toolCursor.setAbsolutePosition(new l["Vector3"](t,n,r))}}},{key:"buildtoolCursor",value:function buildtoolCursor(){void 0===this.toolCursor&&(this.toolCursor=new f["TransformNode"]("toolCursorContainer"),this.toolCursorMesh=h["MeshBuilder"].CreateCylinder("toolCursorMesh",{diameterTop:0,diameterBottom:1},this.scene),this.toolCursorMesh.parent=this.toolCursor,this.toolCursorMesh.position=new l["Vector3"](0,3,0),this.toolCursorMesh.rotate(d["Axis"].X,Math.PI,d["Space"].LOCAL),this.toolCursorMesh.scaling=new l["Vector3"](3,3,3),this.toolCursorMesh.isVisible=this.toolCursorVisible,this.registerClipIgnore(this.toolCursorMesh))}},{key:"updateRenderQuality",value:function updateRenderQuality(e){this.renderQuality=e,localStorage&&localStorage.setItem("renderQuality",e)}},{key:"registerClipIgnore",value:function registerClipIgnore(e){var t=this;void 0!==e&&null!==e&&(e.onBeforeRenderObservable.add((function(){t.scene.clipPlane=null,t.scene.clipPlane2=null})),e.onAfterRenderObservable.add((function(){t.scene.clipPlane=new u["Plane"](0,1,0,t.zTopClipValue),t.scene.clipPlane2=new u["Plane"](0,-1,0,t.zBottomClipValue)})))}},{key:"updateCameraInertiaProperties",value:function updateCameraInertiaProperties(){this.cameraInertia?(this.orbitCamera.speed=2,this.orbitCamera.inertia=.9,this.orbitCamera.panningInertia=.9,this.orbitCamera.inputs.attached.keyboard.angularSpeed=.005,this.orbitCamera.inputs.attached.keyboard.zoomingSensibility=2,this.orbitCamera.inputs.attached.keyboard.panningSensibility=2,this.orbitCamera.angularSensibilityX=1e3,this.orbitCamera.angularSensibilityY=1e3,this.orbitCamera.panningSensibility=10,this.orbitCamera.wheelPrecision=1):(this.orbitCamera.speed=500,this.orbitCamera.inertia=0,this.orbitCamera.panningInertia=0,this.orbitCamera.inputs.attached.keyboard.angularSpeed=.05,this.orbitCamera.inputs.attached.keyboard.zoomingSensibility=.5,this.orbitCamera.inputs.attached.keyboard.panningSensibility=.5,this.orbitCamera.angularSensibilityX=200,this.orbitCamera.angularSensibilityY=200,this.orbitCamera.panningSensibility=2,this.orbitCamera.wheelPrecision=.25)}},{key:"setCameraInertia",value:function setCameraInertia(e){this.cameraInertia=e,localStorage.setItem("cameraInertia",e),this.updateCameraInertiaProperties()}}]),_default}()},"./src/plugins/GCodeViewer/viewer/utils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"doArc",(function(){return doArc}));r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js");function getNumber(e,t,r){var n=Number(e.substring(1)),i=n||0;return r?i+t:i}function doArc(e,t,r,n){for(var i=t.x,o=t.z,s=t.y,a=i,u=o,c=s,l=0,d=0,h=0,f=e.some((function(e){return e.includes("G2")})),p=0;p<e.length;p++){var m=e[p];switch(m[0]){case"X":a=getNumber(m,a,r);break;case"Y":u=getNumber(m,u,r);break;case"Z":c=getNumber(m,c,r);break;case"I":l=getNumber(m,l,!1);break;case"J":d=getNumber(m,d,!1);break;case"R":h=getNumber(m,h,!1);break}}if(h){var _=a-i,g=u-o,b=Math.pow(_,2)+Math.pow(g,2),v=Math.pow(h)-b/4;if(0==b||v<0)return{position:{x:a,y:c,z:u},points:[]};var M=Math.sqrt(v/b);(f&&h<0||!f&&h>0)&&(M=-M),l=_/2+g*M,d=g/2-_*M}else if(0==l&&0==d)return{position:{x:a,y:u,z:c},points:[]};var T,S=i==l&&o==u,C=i+l,E=o+d,P=Math.sqrt(l*l+d*d),A=Math.atan2(-d,-l),j=Math.atan2(u-E,a-C);S?T=2*Math.PI:(T=f?A-j:j-A,T<0&&(T+=2*Math.PI));var O=P*T/n+.8;O<1&&(O=1);var R=T/O;R*=f?-1:1;for(var I=new Array,w=s-c,D=w/O,F=i,B=o,L=s,V=A,N=0;N<O-1;N++)V+=R,F=C+P*Math.cos(V),B=E+P*Math.sin(V),L+=D,I.push({x:F,y:L,z:B});return I.push({x:a,y:c,z:u}),{position:{x:a,y:c,z:u},points:I}}}}]);
//# sourceMappingURL=GCodeViewer.bb2a6990.js.map